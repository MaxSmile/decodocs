const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.esm.B-sBJQXh.js","_astro/index.esm.DAC6xlWs.js","_astro/index.esm.BpoIeuRg.js"])))=>i.map(i=>d[i]);
const k="modulepreload",F=function(t){return"/"+t},y={},b=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){let i=function(l){return Promise.all(l.map(E=>Promise.resolve(E).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),_=c?.nonce||c?.getAttribute("nonce");o=i(r.map(l=>{if(l=F(l),l in y)return;y[l]=!0;const E=l.endsWith(".css"),m=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${m}`))return;const d=document.createElement("link");if(d.rel=E?"stylesheet":k,E||(d.as="script"),d.crossOrigin="",d.href=l,_&&d.setAttribute("nonce",_),document.head.appendChild(d),E)return new Promise((T,W)=>{d.addEventListener("load",T),d.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return o.then(i=>{for(const c of i||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};let u=[],h=0;const w=4,I=t=>{let e=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=e.push(n),()=>{for(let s=h+w;s<u.length;)u[s]===n?u.splice(s,w):s+=w;let o=e.indexOf(n);~o&&(e.splice(o,1),--r.lc||r.off())}},notify(n,o){let s=!u.length;for(let i of e)u.push(i,r.value,n,o);if(s){for(h=0;h<u.length;h+=w)u[h](u[h+1],u[h+2],u[h+3]);u.length=0}},off(){},set(n){let o=r.value;o!==n&&(r.value=n,r.notify(o))},subscribe(n){let o=r.listen(n);return n(r.value),o},value:t};return r},O={status:"pending",user:null,error:null},f=I(O),S=I(null),P=I(null);let M=!1,g=null;const p={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"},D=t=>{if(!t||typeof t!="string")return!0;const e=t.trim();return e===""||e.includes("your_")||e.includes("replace_me")||e.includes("changeme")},B=()=>{const t=(e,r)=>{const n=import.meta?.env?.[e];return typeof n!="string"||D(n)?r:n.trim()};return{apiKey:t("VITE_FIREBASE_API_KEY",p.apiKey),authDomain:t("VITE_FIREBASE_AUTH_DOMAIN",p.authDomain),projectId:t("VITE_FIREBASE_PROJECT_ID",p.projectId),storageBucket:t("VITE_FIREBASE_STORAGE_BUCKET",p.storageBucket),messagingSenderId:t("VITE_FIREBASE_MESSAGING_SENDER_ID",p.messagingSenderId),appId:t("VITE_FIREBASE_APP_ID",p.appId),measurementId:t("VITE_FIREBASE_MEASUREMENT_ID",p.measurementId)}},v=t=>{const e=new t.GoogleAuthProvider;return typeof e.setCustomParameters=="function"&&e.setCustomParameters({prompt:"select_account"}),e},R=t=>{const e=new t.OAuthProvider("microsoft.com");return typeof e.addScope=="function"&&(e.addScope("openid"),e.addScope("email"),e.addScope("profile")),typeof e.setCustomParameters=="function"&&e.setCustomParameters({prompt:"select_account"}),e},U=t=>{const e=new t.OAuthProvider("apple.com");return typeof e.addScope=="function"&&(e.addScope("email"),e.addScope("name")),e},C=async()=>{const[t,e]=await Promise.all([b(()=>import("./index.esm.B-sBJQXh.js"),__vite__mapDeps([0,1])),b(()=>import("./index.esm.BpoIeuRg.js"),__vite__mapDeps([2,1]))]);return{firebaseAppModule:t,firebaseAuthModule:e}},N=async()=>{if(typeof window>"u")return{app:null,auth:null,firebaseAuthModule:null};const t=S.get(),e=P.get();if(t&&e){const{firebaseAuthModule:n}=await C();return{app:t,auth:e,firebaseAuthModule:n}}const r=B();try{const{firebaseAppModule:n,firebaseAuthModule:o}=await C(),s=n.getApps().length===0?n.initializeApp(r):n.getApp(),i=o.getAuth(s);return S.set(s),P.set(i),{app:s,auth:i,firebaseAuthModule:o}}catch(n){const o=n instanceof Error?n:new Error("Failed to initialize Firebase Auth");return f.set({status:"error",user:null,error:o}),{app:null,auth:null,firebaseAuthModule:null}}},a=async()=>{g||(g=N());const t=await g;if(!t.auth)throw new Error("Auth is not available");return t},A=async()=>{if(M||typeof window>"u")return;if(M=!0,window.MOCK_AUTH){const r=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;f.set({status:r?"authenticated":"unauthenticated",user:r,error:null});return}const{auth:t,firebaseAuthModule:e}=await a();if(!t||!e||typeof e.onAuthStateChanged!="function"){f.set({status:"error",user:null,error:new Error("Firebase Auth not available")});return}e.onAuthStateChanged(t,async r=>{if(!r){try{const n=await e.signInAnonymously(t);f.set({status:"authenticated",user:n.user,error:null})}catch(n){const o=n instanceof Error?n:new Error("Authentication error");f.set({status:"error",user:null,error:o})}return}f.set({status:"authenticated",user:r,error:null})},r=>{f.set({status:"error",user:null,error:r})})},G={signInWithGoogle:async()=>{const{auth:t,firebaseAuthModule:e}=await a();return await A(),e.signInWithPopup(t,v(e))},signInWithMicrosoft:async()=>{const{auth:t,firebaseAuthModule:e}=await a();return await A(),e.signInWithPopup(t,R(e))},signInWithApple:async()=>{const{auth:t,firebaseAuthModule:e}=await a();return await A(),e.signInWithPopup(t,U(e))},signInWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await a();return await A(),n.signInWithEmailAndPassword(r,t,e)},signUpWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await a();return await A(),n.createUserWithEmailAndPassword(r,t,e)},resetPassword:async t=>{const{auth:e,firebaseAuthModule:r}=await a();return await A(),r.sendPasswordResetEmail(e,t)},signOutUser:async()=>{const{auth:t,firebaseAuthModule:e}=await a();await e.signOut(t)},linkWithGoogle:async()=>{const{auth:t,firebaseAuthModule:e}=await a(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,v(e))},linkWithMicrosoft:async()=>{const{auth:t,firebaseAuthModule:e}=await a(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,R(e))},linkWithApple:async()=>{const{auth:t,firebaseAuthModule:e}=await a(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,U(e))},linkWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await a(),o=r.currentUser;if(!o)throw new Error("No user to link");const s=n.EmailAuthProvider.credential(t,e);return n.linkWithCredential(o,s)}};export{b as _,f as a,P as b,G as c,S as f,A as s};

const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.esm.B-sBJQXh.js","_astro/index.esm.DAC6xlWs.js","_astro/index.esm.BpoIeuRg.js"])))=>i.map(i=>d[i]);
const O="modulepreload",B=function(t){return"/"+t},b={},S=function(e,r,n){let o=Promise.resolve();if(r&&r.length>0){let a=function(l){return Promise.all(l.map(E=>Promise.resolve(E).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),y=c?.nonce||c?.getAttribute("nonce");o=a(r.map(l=>{if(l=B(l),l in b)return;b[l]=!0;const E=l.endsWith(".css"),A=E?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${A}`))return;const d=document.createElement("link");if(d.rel=E?"stylesheet":O,E||(d.as="script"),d.crossOrigin="",d.href=l,y&&d.setAttribute("nonce",y),document.head.appendChild(d),E)return new Promise((k,F)=>{d.addEventListener("load",k),d.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return o.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};let u=[],h=0;const g=4,_=t=>{let e=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=e.push(n),()=>{for(let s=h+g;s<u.length;)u[s]===n?u.splice(s,g):s+=g;let o=e.indexOf(n);~o&&(e.splice(o,1),--r.lc||r.off())}},notify(n,o){let s=!u.length;for(let a of e)u.push(a,r.value,n,o);if(s){for(h=0;h<u.length;h+=g)u[h](u[h+1],u[h+2],u[h+3]);u.length=0}},off(){},set(n){let o=r.value;o!==n&&(r.value=n,r.notify(o))},subscribe(n){let o=r.listen(n);return n(r.value),o},value:t};return r},D={status:"pending",user:null,error:null},p=_(D),P=_(null),M=_(null);let v=!1,w=null,U=!1;const f={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"},N=t=>{if(!t||typeof t!="string")return!0;const e=t.trim();return e===""||e.includes("your_")||e.includes("replace_me")||e.includes("changeme")},I=()=>import.meta?.env??{},L=t=>{if(typeof t=="boolean")return t;if(typeof t!="string")return!1;const e=t.trim().toLowerCase();return["1","true","yes","on"].includes(e)},V=()=>{const t=I(),e=(r,n)=>{const o=t[r];return typeof o!="string"||N(o)?n:o.trim()};return{apiKey:e("VITE_FIREBASE_API_KEY",f.apiKey),authDomain:e("VITE_FIREBASE_AUTH_DOMAIN",f.authDomain),projectId:e("VITE_FIREBASE_PROJECT_ID",f.projectId),storageBucket:e("VITE_FIREBASE_STORAGE_BUCKET",f.storageBucket),messagingSenderId:e("VITE_FIREBASE_MESSAGING_SENDER_ID",f.messagingSenderId),appId:e("VITE_FIREBASE_APP_ID",f.appId),measurementId:e("VITE_FIREBASE_MEASUREMENT_ID",f.measurementId)}},G=()=>L(I().VITE_USE_FIREBASE_EMULATOR),K=()=>{const t=I().VITE_FIREBASE_AUTH_EMULATOR_URL;return typeof t=="string"&&t.trim()?t.trim():"http://localhost:9099"},x=(t,e)=>{U||!G()||typeof e.connectAuthEmulator=="function"&&(e.connectAuthEmulator(t,K(),{disableWarnings:!0}),U=!0)},R=t=>{const e=new t.GoogleAuthProvider;return typeof e.setCustomParameters=="function"&&e.setCustomParameters({prompt:"select_account"}),e},T=t=>{const e=new t.OAuthProvider("microsoft.com");return typeof e.addScope=="function"&&(e.addScope("openid"),e.addScope("email"),e.addScope("profile")),typeof e.setCustomParameters=="function"&&e.setCustomParameters({prompt:"select_account"}),e},C=t=>{const e=new t.OAuthProvider("apple.com");return typeof e.addScope=="function"&&(e.addScope("email"),e.addScope("name")),e},W=async()=>{const[t,e]=await Promise.all([S(()=>import("./index.esm.B-sBJQXh.js"),__vite__mapDeps([0,1])),S(()=>import("./index.esm.BpoIeuRg.js"),__vite__mapDeps([2,1]))]);return{firebaseAppModule:t,firebaseAuthModule:e}},q=async()=>{if(typeof window>"u")return{app:null,auth:null,firebaseAuthModule:null};const t=P.get(),e=M.get();if(t&&e){const{firebaseAuthModule:n}=await W();return{app:t,auth:e,firebaseAuthModule:n}}const r=V();try{const{firebaseAppModule:n,firebaseAuthModule:o}=await W(),s=n.getApps().length===0?n.initializeApp(r):n.getApp(),a=o.getAuth(s);return x(a,o),P.set(s),M.set(a),{app:s,auth:a,firebaseAuthModule:o}}catch(n){const o=n instanceof Error?n:new Error("Failed to initialize Firebase Auth");return p.set({status:"error",user:null,error:o}),{app:null,auth:null,firebaseAuthModule:null}}},i=async()=>{w||(w=q());const t=await w;if(!t.auth)throw new Error("Auth is not available");return t},m=async()=>{if(v||typeof window>"u")return;if(v=!0,window.MOCK_AUTH){const r=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;p.set({status:r?"authenticated":"unauthenticated",user:r,error:null});return}const{auth:t,firebaseAuthModule:e}=await i();if(!t||!e||typeof e.onAuthStateChanged!="function"){p.set({status:"error",user:null,error:new Error("Firebase Auth not available")});return}e.onAuthStateChanged(t,async r=>{if(!r){try{const n=await e.signInAnonymously(t);p.set({status:"authenticated",user:n.user,error:null})}catch(n){const o=n instanceof Error?n:new Error("Authentication error");p.set({status:"error",user:null,error:o})}return}p.set({status:"authenticated",user:r,error:null})},r=>{p.set({status:"error",user:null,error:r})})},z={signInWithGoogle:async()=>{const{auth:t,firebaseAuthModule:e}=await i();return await m(),e.signInWithPopup(t,R(e))},signInWithMicrosoft:async()=>{const{auth:t,firebaseAuthModule:e}=await i();return await m(),e.signInWithPopup(t,T(e))},signInWithApple:async()=>{const{auth:t,firebaseAuthModule:e}=await i();return await m(),e.signInWithPopup(t,C(e))},signInWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await i();return await m(),n.signInWithEmailAndPassword(r,t,e)},signUpWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await i();return await m(),n.createUserWithEmailAndPassword(r,t,e)},resetPassword:async t=>{const{auth:e,firebaseAuthModule:r}=await i();return await m(),r.sendPasswordResetEmail(e,t)},signOutUser:async()=>{const{auth:t,firebaseAuthModule:e}=await i();await e.signOut(t)},linkWithGoogle:async()=>{const{auth:t,firebaseAuthModule:e}=await i(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,R(e))},linkWithMicrosoft:async()=>{const{auth:t,firebaseAuthModule:e}=await i(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,T(e))},linkWithApple:async()=>{const{auth:t,firebaseAuthModule:e}=await i(),r=t.currentUser;if(!r)throw new Error("No user to link");return e.linkWithPopup(r,C(e))},linkWithEmail:async(t,e)=>{const{auth:r,firebaseAuthModule:n}=await i(),o=r.currentUser;if(!o)throw new Error("No user to link");const s=n.EmailAuthProvider.credential(t,e);return n.linkWithCredential(o,s)}};export{S as _,p as a,M as b,z as c,P as f,m as s};

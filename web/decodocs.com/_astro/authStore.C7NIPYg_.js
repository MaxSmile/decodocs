const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.esm.B-sBJQXh.js","_astro/index.esm.DAC6xlWs.js","_astro/index.esm.BpoIeuRg.js"])))=>i.map(i=>d[i]);
const C="modulepreload",W=function(r){return"/"+r},y={},M=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){let o=function(u){return Promise.all(u.map(p=>Promise.resolve(p).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),E=l?.nonce||l?.getAttribute("nonce");s=o(e.map(u=>{if(u=W(u),u in y)return;y[u]=!0;const p=u.endsWith(".css"),A=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${A}`))return;const c=document.createElement("link");if(c.rel=p?"stylesheet":C,p||(c.as="script"),c.crossOrigin="",c.href=u,E&&c.setAttribute("nonce",E),document.head.appendChild(c),p)return new Promise((S,U)=>{c.addEventListener("load",S),c.addEventListener("error",()=>U(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};let i=[],h=0;const g=4,b=r=>{let t=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},lc:0,listen(n){return e.lc=t.push(n),()=>{for(let a=h+g;a<i.length;)i[a]===n?i.splice(a,g):a+=g;let s=t.indexOf(n);~s&&(t.splice(s,1),--e.lc||e.off())}},notify(n,s){let a=!i.length;for(let o of t)i.push(o,e.value,n,s);if(a){for(h=0;h<i.length;h+=g)i[h](i[h+1],i[h+2],i[h+3]);i.length=0}},off(){},set(n){let s=e.value;s!==n&&(e.value=n,e.notify(s))},subscribe(n){let s=e.listen(n);return n(e.value),s},value:r};return e},O={status:"pending",user:null,error:null},f=b(O),v=b(null),P=b(null);let _=!1,m=null;const R=()=>({apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"}),I=async()=>{const[r,t]=await Promise.all([M(()=>import("./index.esm.B-sBJQXh.js"),__vite__mapDeps([0,1])),M(()=>import("./index.esm.BpoIeuRg.js"),__vite__mapDeps([2,1]))]);return{firebaseAppModule:r,firebaseAuthModule:t}},L=async()=>{if(typeof window>"u")return{app:null,auth:null,firebaseAuthModule:null};const r=v.get(),t=P.get();if(r&&t){const{firebaseAuthModule:n}=await I();return{app:r,auth:t,firebaseAuthModule:n}}const e=R();try{const{firebaseAppModule:n,firebaseAuthModule:s}=await I(),a=n.getApps().length===0?n.initializeApp(e):n.getApp(),o=s.getAuth(a);return v.set(a),P.set(o),{app:a,auth:o,firebaseAuthModule:s}}catch(n){const s=n instanceof Error?n:new Error("Failed to initialize Firebase Auth");return f.set({status:"error",user:null,error:s}),{app:null,auth:null,firebaseAuthModule:null}}},d=async()=>{m||(m=L());const r=await m;if(!r.auth)throw new Error("Auth is not available");return r},w=async()=>{if(_||typeof window>"u")return;if(_=!0,window.MOCK_AUTH){const e=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;f.set({status:e?"authenticated":"unauthenticated",user:e,error:null});return}const{auth:r,firebaseAuthModule:t}=await d();if(!r||!t){f.set({status:"error",user:null,error:new Error("Firebase Auth not available")});return}t.onAuthStateChanged(r,async e=>{if(!e){try{const n=await t.signInAnonymously(r);f.set({status:"authenticated",user:n.user,error:null})}catch(n){const s=n instanceof Error?n:new Error("Authentication error");f.set({status:"error",user:null,error:s})}return}f.set({status:"authenticated",user:e,error:null})},e=>{f.set({status:"error",user:null,error:e})})},T={signInWithGoogle:async()=>{const{auth:r,firebaseAuthModule:t}=await d();return await w(),t.signInWithPopup(r,new t.GoogleAuthProvider)},signInWithMicrosoft:async()=>{const{auth:r,firebaseAuthModule:t}=await d();return await w(),t.signInWithPopup(r,new t.OAuthProvider("microsoft.com"))},signInWithApple:async()=>{const{auth:r,firebaseAuthModule:t}=await d();return await w(),t.signInWithPopup(r,new t.OAuthProvider("apple.com"))},signInWithEmail:async(r,t)=>{const{auth:e,firebaseAuthModule:n}=await d();return await w(),n.signInWithEmailAndPassword(e,r,t)},signUpWithEmail:async(r,t)=>{const{auth:e,firebaseAuthModule:n}=await d();return await w(),n.createUserWithEmailAndPassword(e,r,t)},resetPassword:async r=>{const{auth:t,firebaseAuthModule:e}=await d();return await w(),e.sendPasswordResetEmail(t,r)},signOutUser:async()=>{const{auth:r,firebaseAuthModule:t}=await d();await t.signOut(r)}};export{M as _,f as a,P as b,T as c,v as f,w as s};

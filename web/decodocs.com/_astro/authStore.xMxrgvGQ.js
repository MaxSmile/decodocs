const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.esm.B-sBJQXh.js","_astro/index.esm.DAC6xlWs.js","_astro/index.esm.BpoIeuRg.js"])))=>i.map(i=>d[i]);
const W="modulepreload",k=function(r){return"/"+r},E={},M=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){let o=function(l){return Promise.all(l.map(p=>Promise.resolve(p).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),y=u?.nonce||u?.getAttribute("nonce");a=o(t.map(l=>{if(l=k(l),l in E)return;E[l]=!0;const p=l.endsWith(".css"),w=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${w}`))return;const c=document.createElement("link");if(c.rel=p?"stylesheet":W,p||(c.as="script"),c.crossOrigin="",c.href=l,y&&c.setAttribute("nonce",y),document.head.appendChild(c),p)return new Promise((U,O)=>{c.addEventListener("load",U),c.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return a.then(o=>{for(const u of o||[])u.status==="rejected"&&s(u.reason);return e().catch(s)})};let i=[],d=0;const g=4,b=r=>{let e=[],t={get(){return t.lc||t.listen(()=>{})(),t.value},lc:0,listen(n){return t.lc=e.push(n),()=>{for(let s=d+g;s<i.length;)i[s]===n?i.splice(s,g):s+=g;let a=e.indexOf(n);~a&&(e.splice(a,1),--t.lc||t.off())}},notify(n,a){let s=!i.length;for(let o of e)i.push(o,t.value,n,a);if(s){for(d=0;d<i.length;d+=g)i[d](i[d+1],i[d+2],i[d+3]);i.length=0}},off(){},set(n){let a=t.value;a!==n&&(t.value=n,t.notify(a))},subscribe(n){let a=t.listen(n);return n(t.value),a},value:r};return t},R={status:"pending",user:null,error:null},f=b(R),I=b(null),P=b(null);let _=!1,v=!1,A=null;const S=r=>{if(!r||typeof r!="string")return!0;const e=r.trim();return e===""||e.includes("your_")||e.includes("replace_me")||e.includes("changeme")},K=()=>({apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"}),C=async()=>{const[r,e]=await Promise.all([M(()=>import("./index.esm.B-sBJQXh.js"),__vite__mapDeps([0,1])),M(()=>import("./index.esm.BpoIeuRg.js"),__vite__mapDeps([2,1]))]);return{firebaseAppModule:r,firebaseAuthModule:e}},L=async()=>{if(typeof window>"u")return{app:null,auth:null,firebaseAuthModule:null};const r=I.get(),e=P.get();if(r&&e){const{firebaseAuthModule:n}=await C();return{app:r,auth:e,firebaseAuthModule:n}}let t=K();try{if(window.MOCK_AUTH)S(t.apiKey)&&(t={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef",measurementId:"G-MOCK"});else if(S(t.apiKey))throw new Error("Firebase client configuration is missing or invalid. Authentication will be unavailable.");const{firebaseAppModule:n,firebaseAuthModule:a}=await C(),s=n.getApps().length===0?n.initializeApp(t):n.getApp(),o=a.getAuth(s);return"".toLowerCase()==="true"&&!v&&(a.connectAuthEmulator(o,"http://localhost:9099",{disableWarnings:!0}),v=!0),I.set(s),P.set(o),{app:s,auth:o,firebaseAuthModule:a}}catch(n){const a=n instanceof Error?n:new Error("Failed to initialize Firebase Auth");return f.set({status:"error",user:null,error:a}),{app:null,auth:null,firebaseAuthModule:null}}},h=async()=>{A||(A=L());const r=await A;if(!r.auth)throw new Error("Auth is not available");return r},m=async()=>{if(_||typeof window>"u")return;if(_=!0,window.MOCK_AUTH){const t=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;f.set({status:t?"authenticated":"unauthenticated",user:t,error:null});return}const{auth:r,firebaseAuthModule:e}=await h();if(!r||!e){f.set({status:"error",user:null,error:new Error("Firebase Auth not available")});return}e.onAuthStateChanged(r,async t=>{if(!t){try{const n=await e.signInAnonymously(r);f.set({status:"authenticated",user:n.user,error:null})}catch(n){const a=n instanceof Error?n:new Error("Authentication error");f.set({status:"error",user:null,error:a})}return}f.set({status:"authenticated",user:t,error:null})},t=>{f.set({status:"error",user:null,error:t})})},T={signInWithGoogle:async()=>{const{auth:r,firebaseAuthModule:e}=await h();return await m(),e.signInWithPopup(r,new e.GoogleAuthProvider)},signInWithMicrosoft:async()=>{const{auth:r,firebaseAuthModule:e}=await h();return await m(),e.signInWithPopup(r,new e.OAuthProvider("microsoft.com"))},signInWithApple:async()=>{const{auth:r,firebaseAuthModule:e}=await h();return await m(),e.signInWithPopup(r,new e.OAuthProvider("apple.com"))},signInWithEmail:async(r,e)=>{const{auth:t,firebaseAuthModule:n}=await h();return await m(),n.signInWithEmailAndPassword(t,r,e)},signUpWithEmail:async(r,e)=>{const{auth:t,firebaseAuthModule:n}=await h();return await m(),n.createUserWithEmailAndPassword(t,r,e)},resetPassword:async r=>{const{auth:e,firebaseAuthModule:t}=await h();return await m(),t.sendPasswordResetEmail(e,r)},signOutUser:async()=>{const{auth:r,firebaseAuthModule:e}=await h();await e.signOut(r)}};export{M as _,f as a,P as b,T as c,I as f,m as s};

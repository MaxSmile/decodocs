var yb=r=>{throw TypeError(r)};var zd=(r,t,e)=>t.has(r)||yb("Cannot "+e);var ie=(r,t,e)=>(zd(r,t,"read from private field"),e?e.call(r):t.get(r)),Qn=(r,t,e)=>t.has(r)?yb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),sn=(r,t,e,i)=>(zd(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),Zn=(r,t,e)=>(zd(r,t,"access private method"),e);var bb=(r,t,e,i)=>({set _(a){sn(r,t,a,e)},get _(){return ie(r,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function K0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Hd={exports:{}},_o={};var vb;function bx(){if(vb)return _o;vb=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return _o.Fragment=t,_o.jsx=e,_o.jsxs=e,_o}var wb;function vx(){return wb||(wb=1,Hd.exports=bx()),Hd.exports}var v=vx(),Gd={exports:{}},wt={};var Ab;function wx(){if(Ab)return wt;Ab=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=b&&D[b]||D["@@iterator"],typeof D=="function"?D:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,_={};function E(D,V,Q){this.props=D,this.context=V,this.refs=_,this.updater=Q||x}E.prototype.isReactComponent={},E.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function C(){}C.prototype=E.prototype;function R(D,V,Q){this.props=D,this.context=V,this.refs=_,this.updater=Q||x}var M=R.prototype=new C;M.constructor=R,S(M,E.prototype),M.isPureReactComponent=!0;var O=Array.isArray;function P(){}var B={H:null,A:null,T:null,S:null},W=Object.prototype.hasOwnProperty;function K(D,V,Q){var nt=Q.ref;return{$$typeof:r,type:D,key:V,ref:nt!==void 0?nt:null,props:Q}}function et(D,V){return K(D.type,V,D.props)}function tt(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function pt(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return V[Q]})}var Et=/\/+/g;function q(D,V){return typeof D=="object"&&D!==null&&D.key!=null?pt(""+D.key):V.toString(36)}function ot(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(P,P):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function k(D,V,Q,nt,ht){var gt=typeof D;(gt==="undefined"||gt==="boolean")&&(D=null);var dt=!1;if(D===null)dt=!0;else switch(gt){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(D.$$typeof){case r:case t:dt=!0;break;case g:return dt=D._init,k(dt(D._payload),V,Q,nt,ht)}}if(dt)return ht=ht(D),dt=nt===""?"."+q(D,0):nt,O(ht)?(Q="",dt!=null&&(Q=dt.replace(Et,"$&/")+"/"),k(ht,V,Q,"",function(Vn){return Vn})):ht!=null&&(tt(ht)&&(ht=et(ht,Q+(ht.key==null||D&&D.key===ht.key?"":(""+ht.key).replace(Et,"$&/")+"/")+dt)),V.push(ht)),1;dt=0;var ee=nt===""?".":nt+":";if(O(D))for(var It=0;It<D.length;It++)nt=D[It],gt=ee+q(nt,It),dt+=k(nt,V,Q,gt,ht);else if(It=w(D),typeof It=="function")for(D=It.call(D),It=0;!(nt=D.next()).done;)nt=nt.value,gt=ee+q(nt,It++),dt+=k(nt,V,Q,gt,ht);else if(gt==="object"){if(typeof D.then=="function")return k(ot(D),V,Q,nt,ht);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return dt}function U(D,V,Q){if(D==null)return D;var nt=[],ht=0;return k(D,nt,"","",function(gt){return V.call(Q,gt,ht++)}),nt}function Z(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var vt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},yt={map:U,forEach:function(D,V,Q){U(D,function(){V.apply(this,arguments)},Q)},count:function(D){var V=0;return U(D,function(){V++}),V},toArray:function(D){return U(D,function(V){return V})||[]},only:function(D){if(!tt(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return wt.Activity=y,wt.Children=yt,wt.Component=E,wt.Fragment=e,wt.Profiler=a,wt.PureComponent=R,wt.StrictMode=i,wt.Suspense=d,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,wt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return B.H.useMemoCache(D)}},wt.cache=function(D){return function(){return D.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(D,V,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var nt=S({},D.props),ht=D.key;if(V!=null)for(gt in V.key!==void 0&&(ht=""+V.key),V)!W.call(V,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&V.ref===void 0||(nt[gt]=V[gt]);var gt=arguments.length-2;if(gt===1)nt.children=Q;else if(1<gt){for(var dt=Array(gt),ee=0;ee<gt;ee++)dt[ee]=arguments[ee+2];nt.children=dt}return K(D.type,ht,nt)},wt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},wt.createElement=function(D,V,Q){var nt,ht={},gt=null;if(V!=null)for(nt in V.key!==void 0&&(gt=""+V.key),V)W.call(V,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(ht[nt]=V[nt]);var dt=arguments.length-2;if(dt===1)ht.children=Q;else if(1<dt){for(var ee=Array(dt),It=0;It<dt;It++)ee[It]=arguments[It+2];ht.children=ee}if(D&&D.defaultProps)for(nt in dt=D.defaultProps,dt)ht[nt]===void 0&&(ht[nt]=dt[nt]);return K(D,gt,ht)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(D){return{$$typeof:h,render:D}},wt.isValidElement=tt,wt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:Z}},wt.memo=function(D,V){return{$$typeof:f,type:D,compare:V===void 0?null:V}},wt.startTransition=function(D){var V=B.T,Q={};B.T=Q;try{var nt=D(),ht=B.S;ht!==null&&ht(Q,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(P,vt)}catch(gt){vt(gt)}finally{V!==null&&Q.types!==null&&(V.types=Q.types),B.T=V}},wt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},wt.use=function(D){return B.H.use(D)},wt.useActionState=function(D,V,Q){return B.H.useActionState(D,V,Q)},wt.useCallback=function(D,V){return B.H.useCallback(D,V)},wt.useContext=function(D){return B.H.useContext(D)},wt.useDebugValue=function(){},wt.useDeferredValue=function(D,V){return B.H.useDeferredValue(D,V)},wt.useEffect=function(D,V){return B.H.useEffect(D,V)},wt.useEffectEvent=function(D){return B.H.useEffectEvent(D)},wt.useId=function(){return B.H.useId()},wt.useImperativeHandle=function(D,V,Q){return B.H.useImperativeHandle(D,V,Q)},wt.useInsertionEffect=function(D,V){return B.H.useInsertionEffect(D,V)},wt.useLayoutEffect=function(D,V){return B.H.useLayoutEffect(D,V)},wt.useMemo=function(D,V){return B.H.useMemo(D,V)},wt.useOptimistic=function(D,V){return B.H.useOptimistic(D,V)},wt.useReducer=function(D,V,Q){return B.H.useReducer(D,V,Q)},wt.useRef=function(D){return B.H.useRef(D)},wt.useState=function(D){return B.H.useState(D)},wt.useSyncExternalStore=function(D,V,Q){return B.H.useSyncExternalStore(D,V,Q)},wt.useTransition=function(){return B.H.useTransition()},wt.version="19.2.4",wt}var Sb;function Uf(){return Sb||(Sb=1,Gd.exports=wx()),Gd.exports}var I=Uf();const Ff=K0(I);var Vd={exports:{}},Eo={},qd={exports:{}},$d={};var xb;function Ax(){return xb||(xb=1,(function(r){function t(k,U){var Z=k.length;k.push(U);t:for(;0<Z;){var vt=Z-1>>>1,yt=k[vt];if(0<a(yt,U))k[vt]=U,k[Z]=yt,Z=vt;else break t}}function e(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var U=k[0],Z=k.pop();if(Z!==U){k[0]=Z;t:for(var vt=0,yt=k.length,D=yt>>>1;vt<D;){var V=2*(vt+1)-1,Q=k[V],nt=V+1,ht=k[nt];if(0>a(Q,Z))nt<yt&&0>a(ht,Q)?(k[vt]=ht,k[nt]=Z,vt=nt):(k[vt]=Q,k[V]=Z,vt=V);else if(nt<yt&&0>a(ht,Z))k[vt]=ht,k[nt]=Z,vt=nt;else break t}}return U}function a(k,U){var Z=k.sortIndex-U.sortIndex;return Z!==0?Z:k.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var d=[],f=[],g=1,y=null,b=3,w=!1,x=!1,S=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function M(k){for(var U=e(f);U!==null;){if(U.callback===null)i(f);else if(U.startTime<=k)i(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=e(f)}}function O(k){if(S=!1,M(k),!x)if(e(d)!==null)x=!0,P||(P=!0,pt());else{var U=e(f);U!==null&&ot(O,U.startTime-k)}}var P=!1,B=-1,W=5,K=-1;function et(){return _?!0:!(r.unstable_now()-K<W)}function tt(){if(_=!1,P){var k=r.unstable_now();K=k;var U=!0;try{t:{x=!1,S&&(S=!1,C(B),B=-1),w=!0;var Z=b;try{e:{for(M(k),y=e(d);y!==null&&!(y.expirationTime>k&&et());){var vt=y.callback;if(typeof vt=="function"){y.callback=null,b=y.priorityLevel;var yt=vt(y.expirationTime<=k);if(k=r.unstable_now(),typeof yt=="function"){y.callback=yt,M(k),U=!0;break e}y===e(d)&&i(d),M(k)}else i(d);y=e(d)}if(y!==null)U=!0;else{var D=e(f);D!==null&&ot(O,D.startTime-k),U=!1}}break t}finally{y=null,b=Z,w=!1}U=void 0}}finally{U?pt():P=!1}}}var pt;if(typeof R=="function")pt=function(){R(tt)};else if(typeof MessageChannel<"u"){var Et=new MessageChannel,q=Et.port2;Et.port1.onmessage=tt,pt=function(){q.postMessage(null)}}else pt=function(){E(tt,0)};function ot(k,U){B=E(function(){k(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(k){k.callback=null},r.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<k?Math.floor(1e3/k):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(k){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var Z=b;b=U;try{return k()}finally{b=Z}},r.unstable_requestPaint=function(){_=!0},r.unstable_runWithPriority=function(k,U){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var Z=b;b=k;try{return U()}finally{b=Z}},r.unstable_scheduleCallback=function(k,U,Z){var vt=r.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?vt+Z:vt):Z=vt,k){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=Z+yt,k={id:g++,callback:U,priorityLevel:k,startTime:Z,expirationTime:yt,sortIndex:-1},Z>vt?(k.sortIndex=Z,t(f,k),e(d)===null&&k===e(f)&&(S?(C(B),B=-1):S=!0,ot(O,Z-vt))):(k.sortIndex=yt,t(d,k),x||w||(x=!0,P||(P=!0,pt()))),k},r.unstable_shouldYield=et,r.unstable_wrapCallback=function(k){var U=b;return function(){var Z=b;b=U;try{return k.apply(this,arguments)}finally{b=Z}}}})($d)),$d}var _b;function Sx(){return _b||(_b=1,qd.exports=Ax()),qd.exports}var Yd={exports:{}},ze={};var Eb;function xx(){if(Eb)return ze;Eb=1;var r=Uf();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ze.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,g)},ze.flushSync=function(d){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=g,i.d.f()}},ze.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},ze.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},ze.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:w}):g==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ze.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},ze.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,y=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ze.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},ze.requestFormReset=function(d){i.d.r(d)},ze.unstable_batchedUpdates=function(d,f){return d(f)},ze.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},ze.useFormStatus=function(){return c.H.useHostTransitionStatus()},ze.version="19.2.4",ze}var Tb;function _x(){if(Tb)return Yd.exports;Tb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Yd.exports=xx(),Yd.exports}var Cb;function Ex(){if(Cb)return Eo;Cb=1;var r=Sx(),t=Uf(),e=_x();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var p=o.return;if(p===null)break;var m=p.alternate;if(m===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===m.child){for(m=p.child;m;){if(m===o)return d(p),n;if(m===u)return d(p),s;m=m.sibling}throw Error(i(188))}if(o.return!==u.return)o=p,u=m;else{for(var A=!1,T=p.child;T;){if(T===o){A=!0,o=p,u=m;break}if(T===u){A=!0,u=p,o=m;break}T=T.sibling}if(!A){for(T=m.child;T;){if(T===o){A=!0,o=m,u=p;break}if(T===u){A=!0,u=m,o=p;break}T=T.sibling}if(!A)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),tt=Symbol.iterator;function pt(n){return n===null||typeof n!="object"?null:(n=tt&&n[tt]||n["@@iterator"],typeof n=="function"?n:null)}var Et=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Et?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case E:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case x:return"Portal";case R:return n.displayName||"Context";case C:return(n._context.displayName||"Context")+".Consumer";case M:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return s=n.displayName||null,s!==null?s:q(n.type)||"Memo";case W:s=n._payload,n=n._init;try{return q(n(s))}catch{}}return null}var ot=Array.isArray,k=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},vt=[],yt=-1;function D(n){return{current:n}}function V(n){0>yt||(n.current=vt[yt],vt[yt]=null,yt--)}function Q(n,s){yt++,vt[yt]=n.current,n.current=s}var nt=D(null),ht=D(null),gt=D(null),dt=D(null);function ee(n,s){switch(Q(gt,s),Q(ht,n),Q(nt,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Fy(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Fy(s),n=zy(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(nt),Q(nt,n)}function It(){V(nt),V(ht),V(gt)}function Vn(n){n.memoizedState!==null&&Q(dt,n);var s=nt.current,o=zy(s,n.type);s!==o&&(Q(ht,n),Q(nt,o))}function Pn(n){ht.current===n&&(V(nt),V(ht)),dt.current===n&&(V(dt),wo._currentValue=Z)}var ci,ca;function Ge(n){if(ci===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ci=s&&s[1]||"",ca=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ci+n+ca}var Gi=!1;function Vi(n,s){if(!n||Gi)return"";Gi=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(G){var H=G}Reflect.construct(n,[],X)}else{try{X.call()}catch(G){H=G}n.call(X.prototype)}}else{try{throw Error()}catch(G){H=G}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),A=m[0],T=m[1];if(A&&T){var N=A.split(`
`),z=T.split(`
`);for(p=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;p<z.length&&!z[p].includes("DetermineComponentFrameRoot");)p++;if(u===N.length||p===z.length)for(u=N.length-1,p=z.length-1;1<=u&&0<=p&&N[u]!==z[p];)p--;for(;1<=u&&0<=p;u--,p--)if(N[u]!==z[p]){if(u!==1||p!==1)do if(u--,p--,0>p||N[u]!==z[p]){var $=`
`+N[u].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=u&&0<=p);break}}}finally{Gi=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ge(o):""}function Be(n,s){switch(n.tag){case 26:case 27:case 5:return Ge(n.type);case 16:return Ge("Lazy");case 13:return n.child!==s&&s!==null?Ge("Suspense Fallback"):Ge("Suspense");case 19:return Ge("SuspenseList");case 0:case 15:return Vi(n.type,!1);case 11:return Vi(n.type.render,!1);case 1:return Vi(n.type,!0);case 31:return Ge("Activity");default:return""}}function ml(n){try{var s="",o=null;do s+=Be(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Dr=Object.prototype.hasOwnProperty,Nr=r.unstable_scheduleCallback,Mr=r.unstable_cancelCallback,Ds=r.unstable_shouldYield,Cu=r.unstable_requestPaint,Ue=r.unstable_now,Tp=r.unstable_getCurrentPriorityLevel,ua=r.unstable_ImmediatePriority,yl=r.unstable_UserBlockingPriority,ha=r.unstable_NormalPriority,kr=r.unstable_LowPriority,qn=r.unstable_IdlePriority,Ns=r.log,bl=r.unstable_setDisableYieldValue,qi=null,Ve=null;function $n(n){if(typeof Ns=="function"&&bl(n),Ve&&typeof Ve.setStrictMode=="function")try{Ve.setStrictMode(qi,n)}catch{}}var qe=Math.clz32?Math.clz32:Nu,Ru=Math.log,Du=Math.LN2;function Nu(n){return n>>>=0,n===0?32:31-(Ru(n)/Du|0)|0}var da=256,fa=262144,pa=4194304;function ui(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ga(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var p=0,m=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~m,u!==0?p=ui(u):(A&=T,A!==0?p=ui(A):o||(o=T&~n,o!==0&&(p=ui(o))))):(T=u&~m,T!==0?p=ui(T):A!==0?p=ui(A):o||(o=u&~n,o!==0&&(p=ui(o)))),p===0?0:s!==0&&s!==p&&(s&m)===0&&(m=p&-p,o=s&-s,m>=o||m===32&&(o&4194048)!==0)?s:p}function Ms(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Mu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vl(){var n=pa;return pa<<=1,(pa&62914560)===0&&(pa=4194304),n}function Lr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function ks(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function J(n,s,o,u,p,m){var A=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var T=n.entanglements,N=n.expirationTimes,z=n.hiddenUpdates;for(o=A&~o;0<o;){var $=31-qe(o),X=1<<$;T[$]=0,N[$]=-1;var H=z[$];if(H!==null)for(z[$]=null,$=0;$<H.length;$++){var G=H[$];G!==null&&(G.lane&=-536870913)}o&=~X}u!==0&&it(n,u,0),m!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=m&~(A&~s))}function it(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-qe(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Ot(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-qe(o),p=1<<u;p&s|n[u]&s&&(n[u]|=s),o&=~p}}function Tt(n,s){var o=s&-s;return o=(o&42)!==0?1:_e(o),(o&(n.suspendedLanes|s))!==0?0:o}function _e(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Qt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ae(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:ub(n.type))}function fe(n,s){var o=U.p;try{return U.p=n,s()}finally{U.p=o}}var ke=Math.random().toString(36).slice(2),Zt="__reactFiber$"+ke,Fe="__reactProps$"+ke,ma="__reactContainer$"+ke,ku="__reactEvents$"+ke,oA="__reactListeners$"+ke,lA="__reactHandles$"+ke,Cp="__reactResources$"+ke,Or="__reactMarker$"+ke;function Lu(n){delete n[Zt],delete n[Fe],delete n[ku],delete n[oA],delete n[lA]}function ya(n){var s=n[Zt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[ma]||o[Zt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Xy(n);n!==null;){if(o=n[Zt])return o;n=Xy(n)}return s}n=o,o=n.parentNode}return null}function ba(n){if(n=n[Zt]||n[ma]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ir(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function va(n){var s=n[Cp];return s||(s=n[Cp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ce(n){n[Or]=!0}var Rp=new Set,Dp={};function Ls(n,s){wa(n,s),wa(n+"Capture",s)}function wa(n,s){for(Dp[n]=s,n=0;n<s.length;n++)Rp.add(s[n])}var cA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Np={},Mp={};function uA(n){return Dr.call(Mp,n)?!0:Dr.call(Np,n)?!1:cA.test(n)?Mp[n]=!0:(Np[n]=!0,!1)}function wl(n,s,o){if(uA(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Al(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function hi(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function wn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function kp(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function hA(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,m=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(A){o=""+A,m.call(this,A)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(A){o=""+A},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ou(n){if(!n._valueTracker){var s=kp(n)?"checked":"value";n._valueTracker=hA(n,s,""+n[s])}}function Lp(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=kp(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Sl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var dA=/[\n"\\]/g;function An(n){return n.replace(dA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Iu(n,s,o,u,p,m,A,T){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),s!=null?A==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+wn(s)):n.value!==""+wn(s)&&(n.value=""+wn(s)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),s!=null?Pu(n,A,wn(s)):o!=null?Pu(n,A,wn(o)):u!=null&&n.removeAttribute("value"),p==null&&m!=null&&(n.defaultChecked=!!m),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+wn(T):n.removeAttribute("name")}function Op(n,s,o,u,p,m,A,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||s!=null)){Ou(n);return}o=o!=null?""+wn(o):"",s=s!=null?""+wn(s):o,T||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),Ou(n)}function Pu(n,s,o){s==="number"&&Sl(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Aa(n,s,o,u){if(n=n.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<n.length;o++)p=s.hasOwnProperty("$"+n[o].value),n[o].selected!==p&&(n[o].selected=p),p&&u&&(n[o].defaultSelected=!0)}else{for(o=""+wn(o),s=null,p=0;p<n.length;p++){if(n[p].value===o){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function Ip(n,s,o){if(s!=null&&(s=""+wn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+wn(o):""}function Pp(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(ot(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=wn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Ou(n)}function Sa(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var fA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jp(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||fA.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Bp(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&o[p]!==u&&jp(n,p,u)}else for(var m in s)s.hasOwnProperty(m)&&jp(n,m,s[m])}function ju(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xl(n){return gA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function di(){}var Bu=null;function Uu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var xa=null,_a=null;function Up(n){var s=ba(n);if(s&&(n=s.stateNode)){var o=n[Fe]||null;t:switch(n=s.stateNode,s.type){case"input":if(Iu(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var p=u[Fe]||null;if(!p)throw Error(i(90));Iu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Lp(u)}break t;case"textarea":Ip(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Aa(n,!!o.multiple,s,!1)}}}var Fu=!1;function Fp(n,s,o){if(Fu)return n(s,o);Fu=!0;try{var u=n(s);return u}finally{if(Fu=!1,(xa!==null||_a!==null)&&(uc(),xa&&(s=xa,n=_a,_a=xa=null,Up(s),n)))for(s=0;s<n.length;s++)Up(n[s])}}function Pr(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Fe]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zu=!1;if(fi)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){zu=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{zu=!1}var $i=null,Hu=null,_l=null;function zp(){if(_l)return _l;var n,s=Hu,o=s.length,u,p="value"in $i?$i.value:$i.textContent,m=p.length;for(n=0;n<o&&s[n]===p[n];n++);var A=o-n;for(u=1;u<=A&&s[o-u]===p[m-u];u++);return _l=p.slice(n,1<u?1-u:void 0)}function El(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Tl(){return!0}function Hp(){return!1}function Qe(n){function s(o,u,p,m,A){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=m,this.target=A,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(o=n[T],this[T]=o?o(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Tl:Hp,this.isPropagationStopped=Hp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Tl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Tl)},persist:function(){},isPersistent:Tl}),s}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cl=Qe(Os),Br=y({},Os,{view:0,detail:0}),mA=Qe(Br),Gu,Vu,Ur,Rl=y({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$u,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Gu=n.screenX-Ur.screenX,Vu=n.screenY-Ur.screenY):Vu=Gu=0,Ur=n),Gu)},movementY:function(n){return"movementY"in n?n.movementY:Vu}}),Gp=Qe(Rl),yA=y({},Rl,{dataTransfer:0}),bA=Qe(yA),vA=y({},Br,{relatedTarget:0}),qu=Qe(vA),wA=y({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),AA=Qe(wA),SA=y({},Os,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xA=Qe(SA),_A=y({},Os,{data:0}),Vp=Qe(_A),EA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RA(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=CA[n])?!!s[n]:!1}function $u(){return RA}var DA=y({},Br,{key:function(n){if(n.key){var s=EA[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=El(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?TA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$u,charCode:function(n){return n.type==="keypress"?El(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?El(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),NA=Qe(DA),MA=y({},Rl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qp=Qe(MA),kA=y({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$u}),LA=Qe(kA),OA=y({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),IA=Qe(OA),PA=y({},Rl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),jA=Qe(PA),BA=y({},Os,{newState:0,oldState:0}),UA=Qe(BA),FA=[9,13,27,32],Yu=fi&&"CompositionEvent"in window,Fr=null;fi&&"documentMode"in document&&(Fr=document.documentMode);var zA=fi&&"TextEvent"in window&&!Fr,$p=fi&&(!Yu||Fr&&8<Fr&&11>=Fr),Yp=" ",Xp=!1;function Wp(n,s){switch(n){case"keyup":return FA.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ea=!1;function HA(n,s){switch(n){case"compositionend":return Kp(s);case"keypress":return s.which!==32?null:(Xp=!0,Yp);case"textInput":return n=s.data,n===Yp&&Xp?null:n;default:return null}}function GA(n,s){if(Ea)return n==="compositionend"||!Yu&&Wp(n,s)?(n=zp(),_l=Hu=$i=null,Ea=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return $p&&s.locale!=="ko"?null:s.data;default:return null}}var VA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!VA[n.type]:s==="textarea"}function Zp(n,s,o,u){xa?_a?_a.push(u):_a=[u]:xa=u,s=yc(s,"onChange"),0<s.length&&(o=new Cl("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var zr=null,Hr=null;function qA(n){Oy(n,0)}function Dl(n){var s=Ir(n);if(Lp(s))return n}function Jp(n,s){if(n==="change")return s}var tg=!1;if(fi){var Xu;if(fi){var Wu="oninput"in document;if(!Wu){var eg=document.createElement("div");eg.setAttribute("oninput","return;"),Wu=typeof eg.oninput=="function"}Xu=Wu}else Xu=!1;tg=Xu&&(!document.documentMode||9<document.documentMode)}function ng(){zr&&(zr.detachEvent("onpropertychange",ig),Hr=zr=null)}function ig(n){if(n.propertyName==="value"&&Dl(Hr)){var s=[];Zp(s,Hr,n,Uu(n)),Fp(qA,s)}}function $A(n,s,o){n==="focusin"?(ng(),zr=s,Hr=o,zr.attachEvent("onpropertychange",ig)):n==="focusout"&&ng()}function YA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Dl(Hr)}function XA(n,s){if(n==="click")return Dl(s)}function WA(n,s){if(n==="input"||n==="change")return Dl(s)}function KA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var cn=typeof Object.is=="function"?Object.is:KA;function Gr(n,s){if(cn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!Dr.call(s,p)||!cn(n[p],s[p]))return!1}return!0}function sg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ag(n,s){var o=sg(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=sg(o)}}function rg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?rg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function og(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Sl(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Sl(n.document)}return s}function Ku(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var QA=fi&&"documentMode"in document&&11>=document.documentMode,Ta=null,Qu=null,Vr=null,Zu=!1;function lg(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Zu||Ta==null||Ta!==Sl(u)||(u=Ta,"selectionStart"in u&&Ku(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Vr&&Gr(Vr,u)||(Vr=u,u=yc(Qu,"onSelect"),0<u.length&&(s=new Cl("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ta)))}function Is(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ca={animationend:Is("Animation","AnimationEnd"),animationiteration:Is("Animation","AnimationIteration"),animationstart:Is("Animation","AnimationStart"),transitionrun:Is("Transition","TransitionRun"),transitionstart:Is("Transition","TransitionStart"),transitioncancel:Is("Transition","TransitionCancel"),transitionend:Is("Transition","TransitionEnd")},Ju={},cg={};fi&&(cg=document.createElement("div").style,"AnimationEvent"in window||(delete Ca.animationend.animation,delete Ca.animationiteration.animation,delete Ca.animationstart.animation),"TransitionEvent"in window||delete Ca.transitionend.transition);function Ps(n){if(Ju[n])return Ju[n];if(!Ca[n])return n;var s=Ca[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in cg)return Ju[n]=s[o];return n}var ug=Ps("animationend"),hg=Ps("animationiteration"),dg=Ps("animationstart"),ZA=Ps("transitionrun"),JA=Ps("transitionstart"),tS=Ps("transitioncancel"),fg=Ps("transitionend"),pg=new Map,th="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");th.push("scrollEnd");function jn(n,s){pg.set(n,s),Ls(s,[n])}var Nl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Sn=[],Ra=0,eh=0;function Ml(){for(var n=Ra,s=eh=Ra=0;s<n;){var o=Sn[s];Sn[s++]=null;var u=Sn[s];Sn[s++]=null;var p=Sn[s];Sn[s++]=null;var m=Sn[s];if(Sn[s++]=null,u!==null&&p!==null){var A=u.pending;A===null?p.next=p:(p.next=A.next,A.next=p),u.pending=p}m!==0&&gg(o,p,m)}}function kl(n,s,o,u){Sn[Ra++]=n,Sn[Ra++]=s,Sn[Ra++]=o,Sn[Ra++]=u,eh|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function nh(n,s,o,u){return kl(n,s,o,u),Ll(n)}function js(n,s){return kl(n,null,null,s),Ll(n)}function gg(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var p=!1,m=n.return;m!==null;)m.childLanes|=o,u=m.alternate,u!==null&&(u.childLanes|=o),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(p=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,p&&s!==null&&(p=31-qe(o),n=m.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=o|536870912),m):null}function Ll(n){if(50<fo)throw fo=0,hd=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Da={};function eS(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(n,s,o,u){return new eS(n,s,o,u)}function ih(n){return n=n.prototype,!(!n||!n.isReactComponent)}function pi(n,s){var o=n.alternate;return o===null?(o=un(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function mg(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ol(n,s,o,u,p,m){var A=0;if(u=n,typeof n=="function")ih(n)&&(A=1);else if(typeof n=="string")A=rx(n,o,nt.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case K:return n=un(31,o,s,p),n.elementType=K,n.lanes=m,n;case S:return Bs(o.children,p,m,s);case _:A=8,p|=24;break;case E:return n=un(12,o,s,p|2),n.elementType=E,n.lanes=m,n;case O:return n=un(13,o,s,p),n.elementType=O,n.lanes=m,n;case P:return n=un(19,o,s,p),n.elementType=P,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:A=10;break t;case C:A=9;break t;case M:A=11;break t;case B:A=14;break t;case W:A=16,u=null;break t}A=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=un(A,o,s,p),s.elementType=n,s.type=u,s.lanes=m,s}function Bs(n,s,o,u){return n=un(7,n,u,s),n.lanes=o,n}function sh(n,s,o){return n=un(6,n,null,s),n.lanes=o,n}function yg(n){var s=un(18,null,null,0);return s.stateNode=n,s}function ah(n,s,o){return s=un(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var bg=new WeakMap;function xn(n,s){if(typeof n=="object"&&n!==null){var o=bg.get(n);return o!==void 0?o:(s={value:n,source:s,stack:ml(s)},bg.set(n,s),s)}return{value:n,source:s,stack:ml(s)}}var Na=[],Ma=0,Il=null,qr=0,_n=[],En=0,Yi=null,Yn=1,Xn="";function gi(n,s){Na[Ma++]=qr,Na[Ma++]=Il,Il=n,qr=s}function vg(n,s,o){_n[En++]=Yn,_n[En++]=Xn,_n[En++]=Yi,Yi=n;var u=Yn;n=Xn;var p=32-qe(u)-1;u&=~(1<<p),o+=1;var m=32-qe(s)+p;if(30<m){var A=p-p%5;m=(u&(1<<A)-1).toString(32),u>>=A,p-=A,Yn=1<<32-qe(s)+p|o<<p|u,Xn=m+n}else Yn=1<<m|o<<p|u,Xn=n}function rh(n){n.return!==null&&(gi(n,1),vg(n,1,0))}function oh(n){for(;n===Il;)Il=Na[--Ma],Na[Ma]=null,qr=Na[--Ma],Na[Ma]=null;for(;n===Yi;)Yi=_n[--En],_n[En]=null,Xn=_n[--En],_n[En]=null,Yn=_n[--En],_n[En]=null}function wg(n,s){_n[En++]=Yn,_n[En++]=Xn,_n[En++]=Yi,Yn=s.id,Xn=s.overflow,Yi=n}var Le=null,Jt=null,kt=!1,Xi=null,Tn=!1,lh=Error(i(519));function Wi(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $r(xn(s,n)),lh}function Ag(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[Zt]=n,s[Fe]=u,o){case"dialog":Rt("cancel",s),Rt("close",s);break;case"iframe":case"object":case"embed":Rt("load",s);break;case"video":case"audio":for(o=0;o<go.length;o++)Rt(go[o],s);break;case"source":Rt("error",s);break;case"img":case"image":case"link":Rt("error",s),Rt("load",s);break;case"details":Rt("toggle",s);break;case"input":Rt("invalid",s),Op(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Rt("invalid",s);break;case"textarea":Rt("invalid",s),Pp(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||By(s.textContent,o)?(u.popover!=null&&(Rt("beforetoggle",s),Rt("toggle",s)),u.onScroll!=null&&Rt("scroll",s),u.onScrollEnd!=null&&Rt("scrollend",s),u.onClick!=null&&(s.onclick=di),s=!0):s=!1,s||Wi(n,!0)}function Sg(n){for(Le=n.return;Le;)switch(Le.tag){case 5:case 31:case 13:Tn=!1;return;case 27:case 3:Tn=!0;return;default:Le=Le.return}}function ka(n){if(n!==Le)return!1;if(!kt)return Sg(n),kt=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Td(n.type,n.memoizedProps)),o=!o),o&&Jt&&Wi(n),Sg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=Yy(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=Yy(n)}else s===27?(s=Jt,cs(n.type)?(n=Md,Md=null,Jt=n):Jt=s):Jt=Le?Rn(n.stateNode.nextSibling):null;return!0}function Us(){Jt=Le=null,kt=!1}function ch(){var n=Xi;return n!==null&&(en===null?en=n:en.push.apply(en,n),Xi=null),n}function $r(n){Xi===null?Xi=[n]:Xi.push(n)}var uh=D(null),Fs=null,mi=null;function Ki(n,s,o){Q(uh,s._currentValue),s._currentValue=o}function yi(n){n._currentValue=uh.current,V(uh)}function hh(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function dh(n,s,o,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var m=p.dependencies;if(m!==null){var A=p.child;m=m.firstContext;t:for(;m!==null;){var T=m;m=p;for(var N=0;N<s.length;N++)if(T.context===s[N]){m.lanes|=o,T=m.alternate,T!==null&&(T.lanes|=o),hh(m.return,o,n),u||(A=null);break t}m=T.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(i(341));A.lanes|=o,m=A.alternate,m!==null&&(m.lanes|=o),hh(A,o,n),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===n){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function La(n,s,o,u){n=null;for(var p=s,m=!1;p!==null;){if(!m){if((p.flags&524288)!==0)m=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var T=p.type;cn(p.pendingProps.value,A.value)||(n!==null?n.push(T):n=[T])}}else if(p===dt.current){if(A=p.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(wo):n=[wo])}p=p.return}n!==null&&dh(s,n,o,u),s.flags|=262144}function Pl(n){for(n=n.firstContext;n!==null;){if(!cn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function zs(n){Fs=n,mi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Oe(n){return xg(Fs,n)}function jl(n,s){return Fs===null&&zs(n),xg(n,s)}function xg(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},mi===null){if(n===null)throw Error(i(308));mi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else mi=mi.next=s;return o}var nS=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},iS=r.unstable_scheduleCallback,sS=r.unstable_NormalPriority,be={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fh(){return{controller:new nS,data:new Map,refCount:0}}function Yr(n){n.refCount--,n.refCount===0&&iS(sS,function(){n.controller.abort()})}var Xr=null,ph=0,Oa=0,Ia=null;function aS(n,s){if(Xr===null){var o=Xr=[];ph=0,Oa=yd(),Ia={status:"pending",value:void 0,then:function(u){o.push(u)}}}return ph++,s.then(_g,_g),s}function _g(){if(--ph===0&&Xr!==null){Ia!==null&&(Ia.status="fulfilled");var n=Xr;Xr=null,Oa=0,Ia=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function rS(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var Eg=k.S;k.S=function(n,s){ly=Ue(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&aS(n,s),Eg!==null&&Eg(n,s)};var Hs=D(null);function gh(){var n=Hs.current;return n!==null?n:Xt.pooledCache}function Bl(n,s){s===null?Q(Hs,Hs.current):Q(Hs,s.pool)}function Tg(){var n=gh();return n===null?null:{parent:be._currentValue,pool:n}}var Pa=Error(i(460)),mh=Error(i(474)),Ul=Error(i(542)),Fl={then:function(){}};function Cg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Rg(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(di,di),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ng(n),n;default:if(typeof s.status=="string")s.then(di,di);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ng(n),n}throw Vs=s,Pa}}function Gs(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Vs=o,Pa):o}}var Vs=null;function Dg(){if(Vs===null)throw Error(i(459));var n=Vs;return Vs=null,n}function Ng(n){if(n===Pa||n===Ul)throw Error(i(483))}var ja=null,Wr=0;function zl(n){var s=Wr;return Wr+=1,ja===null&&(ja=[]),Rg(ja,n,s)}function Kr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Hl(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Mg(n){function s(j,L){if(n){var F=j.deletions;F===null?(j.deletions=[L],j.flags|=16):F.push(L)}}function o(j,L){if(!n)return null;for(;L!==null;)s(j,L),L=L.sibling;return null}function u(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function p(j,L){return j=pi(j,L),j.index=0,j.sibling=null,j}function m(j,L,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<L?(j.flags|=67108866,L):F):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function A(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function T(j,L,F,Y){return L===null||L.tag!==6?(L=sh(F,j.mode,Y),L.return=j,L):(L=p(L,F),L.return=j,L)}function N(j,L,F,Y){var ct=F.type;return ct===S?$(j,L,F.props.children,Y,F.key):L!==null&&(L.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&Gs(ct)===L.type)?(L=p(L,F.props),Kr(L,F),L.return=j,L):(L=Ol(F.type,F.key,F.props,null,j.mode,Y),Kr(L,F),L.return=j,L)}function z(j,L,F,Y){return L===null||L.tag!==4||L.stateNode.containerInfo!==F.containerInfo||L.stateNode.implementation!==F.implementation?(L=ah(F,j.mode,Y),L.return=j,L):(L=p(L,F.children||[]),L.return=j,L)}function $(j,L,F,Y,ct){return L===null||L.tag!==7?(L=Bs(F,j.mode,Y,ct),L.return=j,L):(L=p(L,F),L.return=j,L)}function X(j,L,F){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=sh(""+L,j.mode,F),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return F=Ol(L.type,L.key,L.props,null,j.mode,F),Kr(F,L),F.return=j,F;case x:return L=ah(L,j.mode,F),L.return=j,L;case W:return L=Gs(L),X(j,L,F)}if(ot(L)||pt(L))return L=Bs(L,j.mode,F,null),L.return=j,L;if(typeof L.then=="function")return X(j,zl(L),F);if(L.$$typeof===R)return X(j,jl(j,L),F);Hl(j,L)}return null}function H(j,L,F,Y){var ct=L!==null?L.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ct!==null?null:T(j,L,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===ct?N(j,L,F,Y):null;case x:return F.key===ct?z(j,L,F,Y):null;case W:return F=Gs(F),H(j,L,F,Y)}if(ot(F)||pt(F))return ct!==null?null:$(j,L,F,Y,null);if(typeof F.then=="function")return H(j,L,zl(F),Y);if(F.$$typeof===R)return H(j,L,jl(j,F),Y);Hl(j,F)}return null}function G(j,L,F,Y,ct){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return j=j.get(F)||null,T(L,j,""+Y,ct);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return j=j.get(Y.key===null?F:Y.key)||null,N(L,j,Y,ct);case x:return j=j.get(Y.key===null?F:Y.key)||null,z(L,j,Y,ct);case W:return Y=Gs(Y),G(j,L,F,Y,ct)}if(ot(Y)||pt(Y))return j=j.get(F)||null,$(L,j,Y,ct,null);if(typeof Y.then=="function")return G(j,L,F,zl(Y),ct);if(Y.$$typeof===R)return G(j,L,F,jl(L,Y),ct);Hl(L,Y)}return null}function rt(j,L,F,Y){for(var ct=null,Pt=null,lt=L,_t=L=0,Nt=null;lt!==null&&_t<F.length;_t++){lt.index>_t?(Nt=lt,lt=null):Nt=lt.sibling;var jt=H(j,lt,F[_t],Y);if(jt===null){lt===null&&(lt=Nt);break}n&&lt&&jt.alternate===null&&s(j,lt),L=m(jt,L,_t),Pt===null?ct=jt:Pt.sibling=jt,Pt=jt,lt=Nt}if(_t===F.length)return o(j,lt),kt&&gi(j,_t),ct;if(lt===null){for(;_t<F.length;_t++)lt=X(j,F[_t],Y),lt!==null&&(L=m(lt,L,_t),Pt===null?ct=lt:Pt.sibling=lt,Pt=lt);return kt&&gi(j,_t),ct}for(lt=u(lt);_t<F.length;_t++)Nt=G(lt,j,_t,F[_t],Y),Nt!==null&&(n&&Nt.alternate!==null&&lt.delete(Nt.key===null?_t:Nt.key),L=m(Nt,L,_t),Pt===null?ct=Nt:Pt.sibling=Nt,Pt=Nt);return n&&lt.forEach(function(ps){return s(j,ps)}),kt&&gi(j,_t),ct}function mt(j,L,F,Y){if(F==null)throw Error(i(151));for(var ct=null,Pt=null,lt=L,_t=L=0,Nt=null,jt=F.next();lt!==null&&!jt.done;_t++,jt=F.next()){lt.index>_t?(Nt=lt,lt=null):Nt=lt.sibling;var ps=H(j,lt,jt.value,Y);if(ps===null){lt===null&&(lt=Nt);break}n&&lt&&ps.alternate===null&&s(j,lt),L=m(ps,L,_t),Pt===null?ct=ps:Pt.sibling=ps,Pt=ps,lt=Nt}if(jt.done)return o(j,lt),kt&&gi(j,_t),ct;if(lt===null){for(;!jt.done;_t++,jt=F.next())jt=X(j,jt.value,Y),jt!==null&&(L=m(jt,L,_t),Pt===null?ct=jt:Pt.sibling=jt,Pt=jt);return kt&&gi(j,_t),ct}for(lt=u(lt);!jt.done;_t++,jt=F.next())jt=G(lt,j,_t,jt.value,Y),jt!==null&&(n&&jt.alternate!==null&&lt.delete(jt.key===null?_t:jt.key),L=m(jt,L,_t),Pt===null?ct=jt:Pt.sibling=jt,Pt=jt);return n&&lt.forEach(function(yx){return s(j,yx)}),kt&&gi(j,_t),ct}function qt(j,L,F,Y){if(typeof F=="object"&&F!==null&&F.type===S&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:t:{for(var ct=F.key;L!==null;){if(L.key===ct){if(ct=F.type,ct===S){if(L.tag===7){o(j,L.sibling),Y=p(L,F.props.children),Y.return=j,j=Y;break t}}else if(L.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===W&&Gs(ct)===L.type){o(j,L.sibling),Y=p(L,F.props),Kr(Y,F),Y.return=j,j=Y;break t}o(j,L);break}else s(j,L);L=L.sibling}F.type===S?(Y=Bs(F.props.children,j.mode,Y,F.key),Y.return=j,j=Y):(Y=Ol(F.type,F.key,F.props,null,j.mode,Y),Kr(Y,F),Y.return=j,j=Y)}return A(j);case x:t:{for(ct=F.key;L!==null;){if(L.key===ct)if(L.tag===4&&L.stateNode.containerInfo===F.containerInfo&&L.stateNode.implementation===F.implementation){o(j,L.sibling),Y=p(L,F.children||[]),Y.return=j,j=Y;break t}else{o(j,L);break}else s(j,L);L=L.sibling}Y=ah(F,j.mode,Y),Y.return=j,j=Y}return A(j);case W:return F=Gs(F),qt(j,L,F,Y)}if(ot(F))return rt(j,L,F,Y);if(pt(F)){if(ct=pt(F),typeof ct!="function")throw Error(i(150));return F=ct.call(F),mt(j,L,F,Y)}if(typeof F.then=="function")return qt(j,L,zl(F),Y);if(F.$$typeof===R)return qt(j,L,jl(j,F),Y);Hl(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,L!==null&&L.tag===6?(o(j,L.sibling),Y=p(L,F),Y.return=j,j=Y):(o(j,L),Y=sh(F,j.mode,Y),Y.return=j,j=Y),A(j)):o(j,L)}return function(j,L,F,Y){try{Wr=0;var ct=qt(j,L,F,Y);return ja=null,ct}catch(lt){if(lt===Pa||lt===Ul)throw lt;var Pt=un(29,lt,null,j.mode);return Pt.lanes=Y,Pt.return=j,Pt}}}var qs=Mg(!0),kg=Mg(!1),Qi=!1;function yh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ji(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Bt&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Ll(n),gg(n,null,o),s}return kl(n,u,s,o),Ll(n)}function Qr(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ot(n,o)}}function vh(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var A={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?p=m=A:m=m.next=A,o=o.next}while(o!==null);m===null?p=m=s:m=m.next=s}else p=m=s;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var wh=!1;function Zr(){if(wh){var n=Ia;if(n!==null)throw n}}function Jr(n,s,o,u){wh=!1;var p=n.updateQueue;Qi=!1;var m=p.firstBaseUpdate,A=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var N=T,z=N.next;N.next=null,A===null?m=z:A.next=z,A=N;var $=n.alternate;$!==null&&($=$.updateQueue,T=$.lastBaseUpdate,T!==A&&(T===null?$.firstBaseUpdate=z:T.next=z,$.lastBaseUpdate=N))}if(m!==null){var X=p.baseState;A=0,$=z=N=null,T=m;do{var H=T.lane&-536870913,G=H!==T.lane;if(G?(Dt&H)===H:(u&H)===H){H!==0&&H===Oa&&(wh=!0),$!==null&&($=$.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var rt=n,mt=T;H=s;var qt=o;switch(mt.tag){case 1:if(rt=mt.payload,typeof rt=="function"){X=rt.call(qt,X,H);break t}X=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=mt.payload,H=typeof rt=="function"?rt.call(qt,X,H):rt,H==null)break t;X=y({},X,H);break t;case 2:Qi=!0}}H=T.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=p.callbacks,G===null?p.callbacks=[H]:G.push(H))}else G={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},$===null?(z=$=G,N=X):$=$.next=G,A|=H;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;G=T,T=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);$===null&&(N=X),p.baseState=N,p.firstBaseUpdate=z,p.lastBaseUpdate=$,m===null&&(p.shared.lanes=0),ss|=A,n.lanes=A,n.memoizedState=X}}function Lg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Og(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Lg(o[n],s)}var Ba=D(null),Gl=D(0);function Ig(n,s){n=Ti,Q(Gl,n),Q(Ba,s),Ti=n|s.baseLanes}function Ah(){Q(Gl,Ti),Q(Ba,Ba.current)}function Sh(){Ti=Gl.current,V(Ba),V(Gl)}var hn=D(null),Cn=null;function ts(n){var s=n.alternate;Q(pe,pe.current&1),Q(hn,n),Cn===null&&(s===null||Ba.current!==null||s.memoizedState!==null)&&(Cn=n)}function xh(n){Q(pe,pe.current),Q(hn,n),Cn===null&&(Cn=n)}function Pg(n){n.tag===22?(Q(pe,pe.current),Q(hn,n),Cn===null&&(Cn=n)):es()}function es(){Q(pe,pe.current),Q(hn,hn.current)}function dn(n){V(hn),Cn===n&&(Cn=null),V(pe)}var pe=D(0);function Vl(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Dd(o)||Nd(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var bi=0,xt=null,Gt=null,ve=null,ql=!1,Ua=!1,$s=!1,$l=0,to=0,Fa=null,oS=0;function he(){throw Error(i(321))}function _h(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!cn(n[o],s[o]))return!1;return!0}function Eh(n,s,o,u,p,m){return bi=m,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,k.H=n===null||n.memoizedState===null?vm:Fh,$s=!1,m=o(u,p),$s=!1,Ua&&(m=Bg(s,o,u,p)),jg(n),m}function jg(n){k.H=io;var s=Gt!==null&&Gt.next!==null;if(bi=0,ve=Gt=xt=null,ql=!1,to=0,Fa=null,s)throw Error(i(300));n===null||we||(n=n.dependencies,n!==null&&Pl(n)&&(we=!0))}function Bg(n,s,o,u){xt=n;var p=0;do{if(Ua&&(Fa=null),to=0,Ua=!1,25<=p)throw Error(i(301));if(p+=1,ve=Gt=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}k.H=wm,m=s(o,u)}while(Ua);return m}function lS(){var n=k.H,s=n.useState()[0];return s=typeof s.then=="function"?eo(s):s,n=n.useState()[0],(Gt!==null?Gt.memoizedState:null)!==n&&(xt.flags|=1024),s}function Th(){var n=$l!==0;return $l=0,n}function Ch(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Rh(n){if(ql){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ql=!1}bi=0,ve=Gt=xt=null,Ua=!1,to=$l=0,Fa=null}function $e(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?xt.memoizedState=ve=n:ve=ve.next=n,ve}function ge(){if(Gt===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=Gt.next;var s=ve===null?xt.memoizedState:ve.next;if(s!==null)ve=s,Gt=n;else{if(n===null)throw xt.alternate===null?Error(i(467)):Error(i(310));Gt=n,n={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},ve===null?xt.memoizedState=ve=n:ve=ve.next=n}return ve}function Yl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eo(n){var s=to;return to+=1,Fa===null&&(Fa=[]),n=Rg(Fa,n,s),s=xt,(ve===null?s.memoizedState:ve.next)===null&&(s=s.alternate,k.H=s===null||s.memoizedState===null?vm:Fh),n}function Xl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return eo(n);if(n.$$typeof===R)return Oe(n)}throw Error(i(438,String(n)))}function Dh(n){var s=null,o=xt.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=xt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Yl(),xt.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=et;return s.index++,o}function vi(n,s){return typeof s=="function"?s(n):s}function Wl(n){var s=ge();return Nh(s,Gt,n)}function Nh(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var p=n.baseQueue,m=u.pending;if(m!==null){if(p!==null){var A=p.next;p.next=m.next,m.next=A}s.baseQueue=p=m,u.pending=null}if(m=n.baseState,p===null)n.memoizedState=m;else{s=p.next;var T=A=null,N=null,z=s,$=!1;do{var X=z.lane&-536870913;if(X!==z.lane?(Dt&X)===X:(bi&X)===X){var H=z.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),X===Oa&&($=!0);else if((bi&H)===H){z=z.next,H===Oa&&($=!0);continue}else X={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(T=N=X,A=m):N=N.next=X,xt.lanes|=H,ss|=H;X=z.action,$s&&o(m,X),m=z.hasEagerState?z.eagerState:o(m,X)}else H={lane:X,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(T=N=H,A=m):N=N.next=H,xt.lanes|=X,ss|=X;z=z.next}while(z!==null&&z!==s);if(N===null?A=m:N.next=T,!cn(m,n.memoizedState)&&(we=!0,$&&(o=Ia,o!==null)))throw o;n.memoizedState=m,n.baseState=A,n.baseQueue=N,u.lastRenderedState=m}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Mh(n){var s=ge(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,p=o.pending,m=s.memoizedState;if(p!==null){o.pending=null;var A=p=p.next;do m=n(m,A.action),A=A.next;while(A!==p);cn(m,s.memoizedState)||(we=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),o.lastRenderedState=m}return[m,u]}function Ug(n,s,o){var u=xt,p=ge(),m=kt;if(m){if(o===void 0)throw Error(i(407));o=o()}else o=s();var A=!cn((Gt||p).memoizedState,o);if(A&&(p.memoizedState=o,we=!0),p=p.queue,Oh(Hg.bind(null,u,p,n),[n]),p.getSnapshot!==s||A||ve!==null&&ve.memoizedState.tag&1){if(u.flags|=2048,za(9,{destroy:void 0},zg.bind(null,u,p,o,s),null),Xt===null)throw Error(i(349));m||(bi&127)!==0||Fg(u,s,o)}return o}function Fg(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=xt.updateQueue,s===null?(s=Yl(),xt.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function zg(n,s,o,u){s.value=o,s.getSnapshot=u,Gg(s)&&Vg(n)}function Hg(n,s,o){return o(function(){Gg(s)&&Vg(n)})}function Gg(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!cn(n,o)}catch{return!0}}function Vg(n){var s=js(n,2);s!==null&&nn(s,n,2)}function kh(n){var s=$e();if(typeof n=="function"){var o=n;if(n=o(),$s){$n(!0);try{o()}finally{$n(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:n},s}function qg(n,s,o,u){return n.baseState=o,Nh(n,Gt,typeof u=="function"?u:vi)}function cS(n,s,o,u,p){if(Zl(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){m.listeners.push(A)}};k.T!==null?o(!0):m.isTransition=!1,u(m),o=s.pending,o===null?(m.next=s.pending=m,$g(s,m)):(m.next=o.next,s.pending=o.next=m)}}function $g(n,s){var o=s.action,u=s.payload,p=n.state;if(s.isTransition){var m=k.T,A={};k.T=A;try{var T=o(p,u),N=k.S;N!==null&&N(A,T),Yg(n,s,T)}catch(z){Lh(n,s,z)}finally{m!==null&&A.types!==null&&(m.types=A.types),k.T=m}}else try{m=o(p,u),Yg(n,s,m)}catch(z){Lh(n,s,z)}}function Yg(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Xg(n,s,u)},function(u){return Lh(n,s,u)}):Xg(n,s,o)}function Xg(n,s,o){s.status="fulfilled",s.value=o,Wg(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,$g(n,o)))}function Lh(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,Wg(s),s=s.next;while(s!==u)}n.action=null}function Wg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Kg(n,s){return s}function Qg(n,s){if(kt){var o=Xt.formState;if(o!==null){t:{var u=xt;if(kt){if(Jt){e:{for(var p=Jt,m=Tn;p.nodeType!==8;){if(!m){p=null;break e}if(p=Rn(p.nextSibling),p===null){p=null;break e}}m=p.data,p=m==="F!"||m==="F"?p:null}if(p){Jt=Rn(p.nextSibling),u=p.data==="F!";break t}}Wi(u)}u=!1}u&&(s=o[0])}}return o=$e(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kg,lastRenderedState:s},o.queue=u,o=mm.bind(null,xt,u),u.dispatch=o,u=kh(!1),m=Uh.bind(null,xt,!1,u.queue),u=$e(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,o=cS.bind(null,xt,p,m,o),p.dispatch=o,u.memoizedState=n,[s,o,!1]}function Zg(n){var s=ge();return Jg(s,Gt,n)}function Jg(n,s,o){if(s=Nh(n,s,Kg)[0],n=Wl(vi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=eo(s)}catch(A){throw A===Pa?Ul:A}else u=s;s=ge();var p=s.queue,m=p.dispatch;return o!==s.memoizedState&&(xt.flags|=2048,za(9,{destroy:void 0},uS.bind(null,p,o),null)),[u,m,n]}function uS(n,s){n.action=s}function tm(n){var s=ge(),o=Gt;if(o!==null)return Jg(s,o,n);ge(),s=s.memoizedState,o=ge();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function za(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=xt.updateQueue,s===null&&(s=Yl(),xt.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function em(){return ge().memoizedState}function Kl(n,s,o,u){var p=$e();xt.flags|=n,p.memoizedState=za(1|s,{destroy:void 0},o,u===void 0?null:u)}function Ql(n,s,o,u){var p=ge();u=u===void 0?null:u;var m=p.memoizedState.inst;Gt!==null&&u!==null&&_h(u,Gt.memoizedState.deps)?p.memoizedState=za(s,m,o,u):(xt.flags|=n,p.memoizedState=za(1|s,m,o,u))}function nm(n,s){Kl(8390656,8,n,s)}function Oh(n,s){Ql(2048,8,n,s)}function hS(n){xt.flags|=4;var s=xt.updateQueue;if(s===null)s=Yl(),xt.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function im(n){var s=ge().memoizedState;return hS({ref:s,nextImpl:n}),function(){if((Bt&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function sm(n,s){return Ql(4,2,n,s)}function am(n,s){return Ql(4,4,n,s)}function rm(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function om(n,s,o){o=o!=null?o.concat([n]):null,Ql(4,4,rm.bind(null,s,n),o)}function Ih(){}function lm(n,s){var o=ge();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&_h(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function cm(n,s){var o=ge();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&_h(s,u[1]))return u[0];if(u=n(),$s){$n(!0);try{n()}finally{$n(!1)}}return o.memoizedState=[u,s],u}function Ph(n,s,o){return o===void 0||(bi&1073741824)!==0&&(Dt&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=uy(),xt.lanes|=n,ss|=n,o)}function um(n,s,o,u){return cn(o,s)?o:Ba.current!==null?(n=Ph(n,o,u),cn(n,s)||(we=!0),n):(bi&42)===0||(bi&1073741824)!==0&&(Dt&261930)===0?(we=!0,n.memoizedState=o):(n=uy(),xt.lanes|=n,ss|=n,s)}function hm(n,s,o,u,p){var m=U.p;U.p=m!==0&&8>m?m:8;var A=k.T,T={};k.T=T,Uh(n,!1,s,o);try{var N=p(),z=k.S;if(z!==null&&z(T,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=rS(N,u);no(n,s,$,gn(n))}else no(n,s,u,gn(n))}catch(X){no(n,s,{then:function(){},status:"rejected",reason:X},gn())}finally{U.p=m,A!==null&&T.types!==null&&(A.types=T.types),k.T=A}}function dS(){}function jh(n,s,o,u){if(n.tag!==5)throw Error(i(476));var p=dm(n).queue;hm(n,p,s,Z,o===null?dS:function(){return fm(n),o(u)})}function dm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:Z},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function fm(n){var s=dm(n);s.next===null&&(s=n.alternate.memoizedState),no(n,s.next.queue,{},gn())}function Bh(){return Oe(wo)}function pm(){return ge().memoizedState}function gm(){return ge().memoizedState}function fS(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=gn();n=Zi(o);var u=Ji(s,n,o);u!==null&&(nn(u,s,o),Qr(u,s,o)),s={cache:fh()},n.payload=s;return}s=s.return}}function pS(n,s,o){var u=gn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Zl(n)?ym(s,o):(o=nh(n,s,o,u),o!==null&&(nn(o,n,u),bm(o,s,u)))}function mm(n,s,o){var u=gn();no(n,s,o,u)}function no(n,s,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zl(n))ym(s,p);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var A=s.lastRenderedState,T=m(A,o);if(p.hasEagerState=!0,p.eagerState=T,cn(T,A))return kl(n,s,p,0),Xt===null&&Ml(),!1}catch{}if(o=nh(n,s,p,u),o!==null)return nn(o,n,u),bm(o,s,u),!0}return!1}function Uh(n,s,o,u){if(u={lane:2,revertLane:yd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Zl(n)){if(s)throw Error(i(479))}else s=nh(n,o,u,2),s!==null&&nn(s,n,2)}function Zl(n){var s=n.alternate;return n===xt||s!==null&&s===xt}function ym(n,s){Ua=ql=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function bm(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Ot(n,o)}}var io={readContext:Oe,use:Xl,useCallback:he,useContext:he,useEffect:he,useImperativeHandle:he,useLayoutEffect:he,useInsertionEffect:he,useMemo:he,useReducer:he,useRef:he,useState:he,useDebugValue:he,useDeferredValue:he,useTransition:he,useSyncExternalStore:he,useId:he,useHostTransitionStatus:he,useFormState:he,useActionState:he,useOptimistic:he,useMemoCache:he,useCacheRefresh:he};io.useEffectEvent=he;var vm={readContext:Oe,use:Xl,useCallback:function(n,s){return $e().memoizedState=[n,s===void 0?null:s],n},useContext:Oe,useEffect:nm,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Kl(4194308,4,rm.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Kl(4194308,4,n,s)},useInsertionEffect:function(n,s){Kl(4,2,n,s)},useMemo:function(n,s){var o=$e();s=s===void 0?null:s;var u=n();if($s){$n(!0);try{n()}finally{$n(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=$e();if(o!==void 0){var p=o(s);if($s){$n(!0);try{o(s)}finally{$n(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=pS.bind(null,xt,n),[u.memoizedState,n]},useRef:function(n){var s=$e();return n={current:n},s.memoizedState=n},useState:function(n){n=kh(n);var s=n.queue,o=mm.bind(null,xt,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Ih,useDeferredValue:function(n,s){var o=$e();return Ph(o,n,s)},useTransition:function(){var n=kh(!1);return n=hm.bind(null,xt,n.queue,!0,!1),$e().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=xt,p=$e();if(kt){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Xt===null)throw Error(i(349));(Dt&127)!==0||Fg(u,s,o)}p.memoizedState=o;var m={value:o,getSnapshot:s};return p.queue=m,nm(Hg.bind(null,u,m,n),[n]),u.flags|=2048,za(9,{destroy:void 0},zg.bind(null,u,m,o,s),null),o},useId:function(){var n=$e(),s=Xt.identifierPrefix;if(kt){var o=Xn,u=Yn;o=(u&~(1<<32-qe(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=$l++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=oS++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Bh,useFormState:Qg,useActionState:Qg,useOptimistic:function(n){var s=$e();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Uh.bind(null,xt,!0,o),o.dispatch=s,[n,s]},useMemoCache:Dh,useCacheRefresh:function(){return $e().memoizedState=fS.bind(null,xt)},useEffectEvent:function(n){var s=$e(),o={impl:n};return s.memoizedState=o,function(){if((Bt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},Fh={readContext:Oe,use:Xl,useCallback:lm,useContext:Oe,useEffect:Oh,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:am,useMemo:cm,useReducer:Wl,useRef:em,useState:function(){return Wl(vi)},useDebugValue:Ih,useDeferredValue:function(n,s){var o=ge();return um(o,Gt.memoizedState,n,s)},useTransition:function(){var n=Wl(vi)[0],s=ge().memoizedState;return[typeof n=="boolean"?n:eo(n),s]},useSyncExternalStore:Ug,useId:pm,useHostTransitionStatus:Bh,useFormState:Zg,useActionState:Zg,useOptimistic:function(n,s){var o=ge();return qg(o,Gt,n,s)},useMemoCache:Dh,useCacheRefresh:gm};Fh.useEffectEvent=im;var wm={readContext:Oe,use:Xl,useCallback:lm,useContext:Oe,useEffect:Oh,useImperativeHandle:om,useInsertionEffect:sm,useLayoutEffect:am,useMemo:cm,useReducer:Mh,useRef:em,useState:function(){return Mh(vi)},useDebugValue:Ih,useDeferredValue:function(n,s){var o=ge();return Gt===null?Ph(o,n,s):um(o,Gt.memoizedState,n,s)},useTransition:function(){var n=Mh(vi)[0],s=ge().memoizedState;return[typeof n=="boolean"?n:eo(n),s]},useSyncExternalStore:Ug,useId:pm,useHostTransitionStatus:Bh,useFormState:tm,useActionState:tm,useOptimistic:function(n,s){var o=ge();return Gt!==null?qg(o,Gt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Dh,useCacheRefresh:gm};wm.useEffectEvent=im;function zh(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:y({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Hh={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=gn(),p=Zi(u);p.payload=s,o!=null&&(p.callback=o),s=Ji(n,p,u),s!==null&&(nn(s,n,u),Qr(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=gn(),p=Zi(u);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=Ji(n,p,u),s!==null&&(nn(s,n,u),Qr(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=gn(),u=Zi(o);u.tag=2,s!=null&&(u.callback=s),s=Ji(n,u,o),s!==null&&(nn(s,n,o),Qr(s,n,o))}};function Am(n,s,o,u,p,m,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,A):s.prototype&&s.prototype.isPureReactComponent?!Gr(o,u)||!Gr(p,m):!0}function Sm(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Hh.enqueueReplaceState(s,s.state,null)}function Ys(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=y({},o));for(var p in n)o[p]===void 0&&(o[p]=n[p])}return o}function xm(n){Nl(n)}function _m(n){console.error(n)}function Em(n){Nl(n)}function Jl(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Tm(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Gh(n,s,o){return o=Zi(o),o.tag=3,o.payload={element:null},o.callback=function(){Jl(n,s)},o}function Cm(n){return n=Zi(n),n.tag=3,n}function Rm(n,s,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var m=u.value;n.payload=function(){return p(m)},n.callback=function(){Tm(s,o,u)}}var A=o.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Tm(s,o,u),typeof p!="function"&&(as===null?as=new Set([this]):as.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function gS(n,s,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&La(s,o,p,!0),o=hn.current,o!==null){switch(o.tag){case 31:case 13:return Cn===null?hc():o.alternate===null&&de===0&&(de=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===Fl?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),pd(n,u,p)),!1;case 22:return o.flags|=65536,u===Fl?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),pd(n,u,p)),!1}throw Error(i(435,o.tag))}return pd(n,u,p),hc(),!1}if(kt)return s=hn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==lh&&(n=Error(i(422),{cause:u}),$r(xn(n,o)))):(u!==lh&&(s=Error(i(423),{cause:u}),$r(xn(s,o))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=xn(u,o),p=Gh(n.stateNode,u,p),vh(n,p),de!==4&&(de=2)),!1;var m=Error(i(520),{cause:u});if(m=xn(m,o),ho===null?ho=[m]:ho.push(m),de!==4&&(de=2),s===null)return!0;u=xn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=p&-p,o.lanes|=n,n=Gh(o.stateNode,u,n),vh(o,n),!1;case 1:if(s=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(as===null||!as.has(m))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Cm(p),Rm(p,n,o,u),vh(o,p),!1}o=o.return}while(o!==null);return!1}var Vh=Error(i(461)),we=!1;function Ie(n,s,o,u){s.child=n===null?kg(s,null,o,u):qs(s,n.child,o,u)}function Dm(n,s,o,u,p){o=o.render;var m=s.ref;if("ref"in u){var A={};for(var T in u)T!=="ref"&&(A[T]=u[T])}else A=u;return zs(s),u=Eh(n,s,o,A,m,p),T=Th(),n!==null&&!we?(Ch(n,s,p),wi(n,s,p)):(kt&&T&&rh(s),s.flags|=1,Ie(n,s,u,p),s.child)}function Nm(n,s,o,u,p){if(n===null){var m=o.type;return typeof m=="function"&&!ih(m)&&m.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=m,Mm(n,s,m,u,p)):(n=Ol(o.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!Zh(n,p)){var A=m.memoizedProps;if(o=o.compare,o=o!==null?o:Gr,o(A,u)&&n.ref===s.ref)return wi(n,s,p)}return s.flags|=1,n=pi(m,u),n.ref=s.ref,n.return=s,s.child=n}function Mm(n,s,o,u,p){if(n!==null){var m=n.memoizedProps;if(Gr(m,u)&&n.ref===s.ref)if(we=!1,s.pendingProps=u=m,Zh(n,p))(n.flags&131072)!==0&&(we=!0);else return s.lanes=n.lanes,wi(n,s,p)}return qh(n,s,o,u,p)}function km(n,s,o,u){var p=u.children,m=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(m=m!==null?m.baseLanes|o:o,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~m}else u=0,s.child=null;return Lm(n,s,m,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Bl(s,m!==null?m.cachePool:null),m!==null?Ig(s,m):Ah(),Pg(s);else return u=s.lanes=536870912,Lm(n,s,m!==null?m.baseLanes|o:o,o,u)}else m!==null?(Bl(s,m.cachePool),Ig(s,m),es(),s.memoizedState=null):(n!==null&&Bl(s,null),Ah(),es());return Ie(n,s,p,o),s.child}function so(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Lm(n,s,o,u,p){var m=gh();return m=m===null?null:{parent:be._currentValue,pool:m},s.memoizedState={baseLanes:o,cachePool:m},n!==null&&Bl(s,null),Ah(),Pg(s),n!==null&&La(n,s,u,!0),s.childLanes=p,null}function tc(n,s){return s=nc({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Om(n,s,o){return qs(s,n.child,null,o),n=tc(s,s.pendingProps),n.flags|=2,dn(s),s.memoizedState=null,n}function mS(n,s,o){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(kt){if(u.mode==="hidden")return n=tc(s,u),s.lanes=536870912,so(null,n);if(xh(s),(n=Jt)?(n=$y(n,Tn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Yi!==null?{id:Yn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},o=yg(n),o.return=s,s.child=o,Le=s,Jt=null)):n=null,n===null)throw Wi(s);return s.lanes=536870912,null}return tc(s,u)}var m=n.memoizedState;if(m!==null){var A=m.dehydrated;if(xh(s),p)if(s.flags&256)s.flags&=-257,s=Om(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(we||La(n,s,o,!1),p=(o&n.childLanes)!==0,we||p){if(u=Xt,u!==null&&(A=Tt(u,o),A!==0&&A!==m.retryLane))throw m.retryLane=A,js(n,A),nn(u,n,A),Vh;hc(),s=Om(n,s,o)}else n=m.treeContext,Jt=Rn(A.nextSibling),Le=s,kt=!0,Xi=null,Tn=!1,n!==null&&wg(s,n),s=tc(s,u),s.flags|=4096;return s}return n=pi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function ec(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function qh(n,s,o,u,p){return zs(s),o=Eh(n,s,o,u,void 0,p),u=Th(),n!==null&&!we?(Ch(n,s,p),wi(n,s,p)):(kt&&u&&rh(s),s.flags|=1,Ie(n,s,o,p),s.child)}function Im(n,s,o,u,p,m){return zs(s),s.updateQueue=null,o=Bg(s,u,o,p),jg(n),u=Th(),n!==null&&!we?(Ch(n,s,m),wi(n,s,m)):(kt&&u&&rh(s),s.flags|=1,Ie(n,s,o,m),s.child)}function Pm(n,s,o,u,p){if(zs(s),s.stateNode===null){var m=Da,A=o.contextType;typeof A=="object"&&A!==null&&(m=Oe(A)),m=new o(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Hh,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},yh(s),A=o.contextType,m.context=typeof A=="object"&&A!==null?Oe(A):Da,m.state=s.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(zh(s,o,A,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(A=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),A!==m.state&&Hh.enqueueReplaceState(m,m.state,null),Jr(s,u,m,p),Zr(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var T=s.memoizedProps,N=Ys(o,T);m.props=N;var z=m.context,$=o.contextType;A=Da,typeof $=="object"&&$!==null&&(A=Oe($));var X=o.getDerivedStateFromProps;$=typeof X=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,$||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||z!==A)&&Sm(s,m,u,A),Qi=!1;var H=s.memoizedState;m.state=H,Jr(s,u,m,p),Zr(),z=s.memoizedState,T||H!==z||Qi?(typeof X=="function"&&(zh(s,o,X,u),z=s.memoizedState),(N=Qi||Am(s,o,N,u,H,z,A))?($||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),m.props=u,m.state=z,m.context=A,u=N):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,bh(n,s),A=s.memoizedProps,$=Ys(o,A),m.props=$,X=s.pendingProps,H=m.context,z=o.contextType,N=Da,typeof z=="object"&&z!==null&&(N=Oe(z)),T=o.getDerivedStateFromProps,(z=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A!==X||H!==N)&&Sm(s,m,u,N),Qi=!1,H=s.memoizedState,m.state=H,Jr(s,u,m,p),Zr();var G=s.memoizedState;A!==X||H!==G||Qi||n!==null&&n.dependencies!==null&&Pl(n.dependencies)?(typeof T=="function"&&(zh(s,o,T,u),G=s.memoizedState),($=Qi||Am(s,o,$,u,H,G,N)||n!==null&&n.dependencies!==null&&Pl(n.dependencies))?(z||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,G,N),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,G,N)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=N,u=$):(typeof m.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,ec(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=qs(s,n.child,null,p),s.child=qs(s,null,o,p)):Ie(n,s,o,p),s.memoizedState=m.state,n=s.child):n=wi(n,s,p),n}function jm(n,s,o,u){return Us(),s.flags|=256,Ie(n,s,o,u),s.child}var $h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yh(n){return{baseLanes:n,cachePool:Tg()}}function Xh(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=pn),n}function Bm(n,s,o){var u=s.pendingProps,p=!1,m=(s.flags&128)!==0,A;if((A=m)||(A=n!==null&&n.memoizedState===null?!1:(pe.current&2)!==0),A&&(p=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,n===null){if(kt){if(p?ts(s):es(),(n=Jt)?(n=$y(n,Tn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Yi!==null?{id:Yn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},o=yg(n),o.return=s,s.child=o,Le=s,Jt=null)):n=null,n===null)throw Wi(s);return Nd(n)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(es(),p=s.mode,T=nc({mode:"hidden",children:T},p),u=Bs(u,p,o,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=Yh(o),u.childLanes=Xh(n,A,o),s.memoizedState=$h,so(null,u)):(ts(s),Wh(s,T))}var N=n.memoizedState;if(N!==null&&(T=N.dehydrated,T!==null)){if(m)s.flags&256?(ts(s),s.flags&=-257,s=Kh(n,s,o)):s.memoizedState!==null?(es(),s.child=n.child,s.flags|=128,s=null):(es(),T=u.fallback,p=s.mode,u=nc({mode:"visible",children:u.children},p),T=Bs(T,p,o,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,qs(s,n.child,null,o),u=s.child,u.memoizedState=Yh(o),u.childLanes=Xh(n,A,o),s.memoizedState=$h,s=so(null,u));else if(ts(s),Nd(T)){if(A=T.nextSibling&&T.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(i(419)),u.stack="",u.digest=A,$r({value:u,source:null,stack:null}),s=Kh(n,s,o)}else if(we||La(n,s,o,!1),A=(o&n.childLanes)!==0,we||A){if(A=Xt,A!==null&&(u=Tt(A,o),u!==0&&u!==N.retryLane))throw N.retryLane=u,js(n,u),nn(A,n,u),Vh;Dd(T)||hc(),s=Kh(n,s,o)}else Dd(T)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,Jt=Rn(T.nextSibling),Le=s,kt=!0,Xi=null,Tn=!1,n!==null&&wg(s,n),s=Wh(s,u.children),s.flags|=4096);return s}return p?(es(),T=u.fallback,p=s.mode,N=n.child,z=N.sibling,u=pi(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,z!==null?T=pi(z,T):(T=Bs(T,p,o,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,so(null,u),u=s.child,T=n.child.memoizedState,T===null?T=Yh(o):(p=T.cachePool,p!==null?(N=be._currentValue,p=p.parent!==N?{parent:N,pool:N}:p):p=Tg(),T={baseLanes:T.baseLanes|o,cachePool:p}),u.memoizedState=T,u.childLanes=Xh(n,A,o),s.memoizedState=$h,so(n.child,u)):(ts(s),o=n.child,n=o.sibling,o=pi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(A=s.deletions,A===null?(s.deletions=[n],s.flags|=16):A.push(n)),s.child=o,s.memoizedState=null,o)}function Wh(n,s){return s=nc({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function nc(n,s){return n=un(22,n,null,s),n.lanes=0,n}function Kh(n,s,o){return qs(s,n.child,null,o),n=Wh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Um(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),hh(n.return,s,o)}function Qh(n,s,o,u,p,m){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:m}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=o,A.tailMode=p,A.treeForkCount=m)}function Fm(n,s,o){var u=s.pendingProps,p=u.revealOrder,m=u.tail;u=u.children;var A=pe.current,T=(A&2)!==0;if(T?(A=A&1|2,s.flags|=128):A&=1,Q(pe,A),Ie(n,s,u,o),u=kt?qr:0,!T&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Um(n,o,s);else if(n.tag===19)Um(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)n=o.alternate,n!==null&&Vl(n)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),Qh(s,!1,p,o,m,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&Vl(n)===null){s.child=p;break}n=p.sibling,p.sibling=o,o=p,p=n}Qh(s,!0,o,null,m,u);break;case"together":Qh(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function wi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ss|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(La(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=pi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=pi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Zh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Pl(n)))}function yS(n,s,o){switch(s.tag){case 3:ee(s,s.stateNode.containerInfo),Ki(s,be,n.memoizedState.cache),Us();break;case 27:case 5:Vn(s);break;case 4:ee(s,s.stateNode.containerInfo);break;case 10:Ki(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,xh(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(ts(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Bm(n,s,o):(ts(s),n=wi(n,s,o),n!==null?n.sibling:null);ts(s);break;case 19:var p=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(La(n,s,o,!1),u=(o&s.childLanes)!==0),p){if(u)return Fm(n,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(pe,pe.current),u)break;return null;case 22:return s.lanes=0,km(n,s,o,s.pendingProps);case 24:Ki(s,be,n.memoizedState.cache)}return wi(n,s,o)}function zm(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)we=!0;else{if(!Zh(n,o)&&(s.flags&128)===0)return we=!1,yS(n,s,o);we=(n.flags&131072)!==0}else we=!1,kt&&(s.flags&1048576)!==0&&vg(s,qr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=Gs(s.elementType),s.type=n,typeof n=="function")ih(n)?(u=Ys(n,u),s.tag=1,s=Pm(null,s,n,u,o)):(s.tag=0,s=qh(null,s,n,u,o));else{if(n!=null){var p=n.$$typeof;if(p===M){s.tag=11,s=Dm(null,s,n,u,o);break t}else if(p===B){s.tag=14,s=Nm(null,s,n,u,o);break t}}throw s=q(n)||n,Error(i(306,s,""))}}return s;case 0:return qh(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,p=Ys(u,s.pendingProps),Pm(n,s,u,p,o);case 3:t:{if(ee(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;p=m.element,bh(n,s),Jr(s,u,null,o);var A=s.memoizedState;if(u=A.cache,Ki(s,be,u),u!==m.cache&&dh(s,[be],o,!0),Zr(),u=A.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=jm(n,s,u,o);break t}else if(u!==p){p=xn(Error(i(424)),s),$r(p),s=jm(n,s,u,o);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Jt=Rn(n.firstChild),Le=s,kt=!0,Xi=null,Tn=!0,o=kg(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Us(),u===p){s=wi(n,s,o);break t}Ie(n,s,u,o)}s=s.child}return s;case 26:return ec(n,s),n===null?(o=Zy(s.type,null,s.pendingProps,null))?s.memoizedState=o:kt||(o=s.type,n=s.pendingProps,u=bc(gt.current).createElement(o),u[Zt]=s,u[Fe]=n,Pe(u,o,n),Ce(u),s.stateNode=u):s.memoizedState=Zy(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Vn(s),n===null&&kt&&(u=s.stateNode=Wy(s.type,s.pendingProps,gt.current),Le=s,Tn=!0,p=Jt,cs(s.type)?(Md=p,Jt=Rn(u.firstChild)):Jt=p),Ie(n,s,s.pendingProps.children,o),ec(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&kt&&((p=u=Jt)&&(u=YS(u,s.type,s.pendingProps,Tn),u!==null?(s.stateNode=u,Le=s,Jt=Rn(u.firstChild),Tn=!1,p=!0):p=!1),p||Wi(s)),Vn(s),p=s.type,m=s.pendingProps,A=n!==null?n.memoizedProps:null,u=m.children,Td(p,m)?u=null:A!==null&&Td(p,A)&&(s.flags|=32),s.memoizedState!==null&&(p=Eh(n,s,lS,null,null,o),wo._currentValue=p),ec(n,s),Ie(n,s,u,o),s.child;case 6:return n===null&&kt&&((n=o=Jt)&&(o=XS(o,s.pendingProps,Tn),o!==null?(s.stateNode=o,Le=s,Jt=null,n=!0):n=!1),n||Wi(s)),null;case 13:return Bm(n,s,o);case 4:return ee(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=qs(s,null,u,o):Ie(n,s,u,o),s.child;case 11:return Dm(n,s,s.type,s.pendingProps,o);case 7:return Ie(n,s,s.pendingProps,o),s.child;case 8:return Ie(n,s,s.pendingProps.children,o),s.child;case 12:return Ie(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Ki(s,s.type,u.value),Ie(n,s,u.children,o),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,zs(s),p=Oe(p),u=u(p),s.flags|=1,Ie(n,s,u,o),s.child;case 14:return Nm(n,s,s.type,s.pendingProps,o);case 15:return Mm(n,s,s.type,s.pendingProps,o);case 19:return Fm(n,s,o);case 31:return mS(n,s,o);case 22:return km(n,s,o,s.pendingProps);case 24:return zs(s),u=Oe(be),n===null?(p=gh(),p===null&&(p=Xt,m=fh(),p.pooledCache=m,m.refCount++,m!==null&&(p.pooledCacheLanes|=o),p=m),s.memoizedState={parent:u,cache:p},yh(s),Ki(s,be,p)):((n.lanes&o)!==0&&(bh(n,s),Jr(s,null,null,o),Zr()),p=n.memoizedState,m=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ki(s,be,u)):(u=m.cache,Ki(s,be,u),u!==p.cache&&dh(s,[be],o,!0))),Ie(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ai(n){n.flags|=4}function Jh(n,s,o,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(py())n.flags|=8192;else throw Vs=Fl,mh}else n.flags&=-16777217}function Hm(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ib(s))if(py())n.flags|=8192;else throw Vs=Fl,mh}function ic(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?vl():536870912,n.lanes|=s,qa|=s)}function ao(n,s){if(!kt)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function te(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function bS(n,s,o){var u=s.pendingProps;switch(oh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(s),null;case 1:return te(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),yi(be),It(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(ka(s)?Ai(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ch())),te(s),null;case 26:var p=s.type,m=s.memoizedState;return n===null?(Ai(s),m!==null?(te(s),Hm(s,m)):(te(s),Jh(s,p,null,u,o))):m?m!==n.memoizedState?(Ai(s),te(s),Hm(s,m)):(te(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ai(s),te(s),Jh(s,p,n,u,o)),null;case 27:if(Pn(s),o=gt.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ai(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return te(s),null}n=nt.current,ka(s)?Ag(s):(n=Wy(p,u,o),s.stateNode=n,Ai(s))}return te(s),null;case 5:if(Pn(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ai(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return te(s),null}if(m=nt.current,ka(s))Ag(s);else{var A=bc(gt.current);switch(m){case 1:m=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:m=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":m=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":m=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":m=A.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?m.multiple=!0:u.size&&(m.size=u.size);break;default:m=typeof u.is=="string"?A.createElement(p,{is:u.is}):A.createElement(p)}}m[Zt]=s,m[Fe]=u;t:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)m.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break t;for(;A.sibling===null;){if(A.return===null||A.return===s)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=m;t:switch(Pe(m,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ai(s)}}return te(s),Jh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Ai(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=gt.current,ka(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,p=Le,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[Zt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||By(n.nodeValue,o)),n||Wi(s,!0)}else n=bc(n).createTextNode(u),n[Zt]=s,s.stateNode=n}return te(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=ka(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Zt]=s}else Us(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;te(s),n=!1}else o=ch(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(dn(s),s):(dn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return te(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=ka(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Zt]=s}else Us(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;te(s),p=!1}else p=ch(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(dn(s),s):(dn(s),null)}return dn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==p&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),ic(s,s.updateQueue),te(s),null);case 4:return It(),n===null&&Ad(s.stateNode.containerInfo),te(s),null;case 10:return yi(s.type),te(s),null;case 19:if(V(pe),u=s.memoizedState,u===null)return te(s),null;if(p=(s.flags&128)!==0,m=u.rendering,m===null)if(p)ao(u,!1);else{if(de!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Vl(n),m!==null){for(s.flags|=128,ao(u,!1),n=m.updateQueue,s.updateQueue=n,ic(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)mg(o,n),o=o.sibling;return Q(pe,pe.current&1|2),kt&&gi(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Ue()>lc&&(s.flags|=128,p=!0,ao(u,!1),s.lanes=4194304)}else{if(!p)if(n=Vl(m),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,ic(s,n),ao(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!kt)return te(s),null}else 2*Ue()-u.renderingStartTime>lc&&o!==536870912&&(s.flags|=128,p=!0,ao(u,!1),s.lanes=4194304);u.isBackwards?(m.sibling=s.child,s.child=m):(n=u.last,n!==null?n.sibling=m:s.child=m,u.last=m)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Ue(),n.sibling=null,o=pe.current,Q(pe,p?o&1|2:o&1),kt&&gi(s,u.treeForkCount),n):(te(s),null);case 22:case 23:return dn(s),Sh(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(te(s),s.subtreeFlags&6&&(s.flags|=8192)):te(s),o=s.updateQueue,o!==null&&ic(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&V(Hs),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),yi(be),te(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function vS(n,s){switch(oh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return yi(be),It(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Pn(s),null;case 31:if(s.memoizedState!==null){if(dn(s),s.alternate===null)throw Error(i(340));Us()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(dn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Us()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return V(pe),null;case 4:return It(),null;case 10:return yi(s.type),null;case 22:case 23:return dn(s),Sh(),n!==null&&V(Hs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return yi(be),null;case 25:return null;default:return null}}function Gm(n,s){switch(oh(s),s.tag){case 3:yi(be),It();break;case 26:case 27:case 5:Pn(s);break;case 4:It();break;case 31:s.memoizedState!==null&&dn(s);break;case 13:dn(s);break;case 19:V(pe);break;case 10:yi(s.type);break;case 22:case 23:dn(s),Sh(),n!==null&&V(Hs);break;case 24:yi(be)}}function ro(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&n)===n){u=void 0;var m=o.create,A=o.inst;u=m(),A.destroy=u}o=o.next}while(o!==p)}}catch(T){Ht(s,s.return,T)}}function ns(n,s,o){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var m=p.next;u=m;do{if((u.tag&n)===n){var A=u.inst,T=A.destroy;if(T!==void 0){A.destroy=void 0,p=s;var N=o,z=T;try{z()}catch($){Ht(p,N,$)}}}u=u.next}while(u!==m)}}catch($){Ht(s,s.return,$)}}function Vm(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Og(s,o)}catch(u){Ht(n,n.return,u)}}}function qm(n,s,o){o.props=Ys(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Ht(n,s,u)}}function oo(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(p){Ht(n,s,p)}}function Wn(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Ht(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Ht(n,s,p)}else o.current=null}function $m(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Ht(n,n.return,p)}}function td(n,s,o){try{var u=n.stateNode;zS(u,n.type,o,s),u[Fe]=s}catch(p){Ht(n,n.return,p)}}function Ym(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&cs(n.type)||n.tag===4}function ed(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Ym(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function nd(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=di));else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(nd(n,s,o),n=n.sibling;n!==null;)nd(n,s,o),n=n.sibling}function sc(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&cs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(sc(n,s,o),n=n.sibling;n!==null;)sc(n,s,o),n=n.sibling}function Xm(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Pe(s,u,o),s[Zt]=n,s[Fe]=o}catch(m){Ht(n,n.return,m)}}var Si=!1,Ae=!1,id=!1,Wm=typeof WeakSet=="function"?WeakSet:Set,Re=null;function wS(n,s){if(n=n.containerInfo,_d=Ec,n=og(n),Ku(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var A=0,T=-1,N=-1,z=0,$=0,X=n,H=null;e:for(;;){for(var G;X!==o||p!==0&&X.nodeType!==3||(T=A+p),X!==m||u!==0&&X.nodeType!==3||(N=A+u),X.nodeType===3&&(A+=X.nodeValue.length),(G=X.firstChild)!==null;)H=X,X=G;for(;;){if(X===n)break e;if(H===o&&++z===p&&(T=A),H===m&&++$===u&&(N=A),(G=X.nextSibling)!==null)break;X=H,H=X.parentNode}X=G}o=T===-1||N===-1?null:{start:T,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ed={focusedElem:n,selectionRange:o},Ec=!1,Re=s;Re!==null;)if(s=Re,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Re=n;else for(;Re!==null;){switch(s=Re,m=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)p=n[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,o=s,p=m.memoizedProps,m=m.memoizedState,u=o.stateNode;try{var rt=Ys(o.type,p);n=u.getSnapshotBeforeUpdate(rt,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(mt){Ht(o,o.return,mt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Rd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Rd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Re=n;break}Re=s.return}}function Km(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:_i(n,o),u&4&&ro(5,o);break;case 1:if(_i(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(A){Ht(o,o.return,A)}else{var p=Ys(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Ht(o,o.return,A)}}u&64&&Vm(o),u&512&&oo(o,o.return);break;case 3:if(_i(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Og(n,s)}catch(A){Ht(o,o.return,A)}}break;case 27:s===null&&u&4&&Xm(o);case 26:case 5:_i(n,o),s===null&&u&4&&$m(o),u&512&&oo(o,o.return);break;case 12:_i(n,o);break;case 31:_i(n,o),u&4&&Jm(n,o);break;case 13:_i(n,o),u&4&&ty(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=DS.bind(null,o),WS(n,o))));break;case 22:if(u=o.memoizedState!==null||Si,!u){s=s!==null&&s.memoizedState!==null||Ae,p=Si;var m=Ae;Si=u,(Ae=s)&&!m?Ei(n,o,(o.subtreeFlags&8772)!==0):_i(n,o),Si=p,Ae=m}break;case 30:break;default:_i(n,o)}}function Qm(n){var s=n.alternate;s!==null&&(n.alternate=null,Qm(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Lu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ne=null,Ze=!1;function xi(n,s,o){for(o=o.child;o!==null;)Zm(n,s,o),o=o.sibling}function Zm(n,s,o){if(Ve&&typeof Ve.onCommitFiberUnmount=="function")try{Ve.onCommitFiberUnmount(qi,o)}catch{}switch(o.tag){case 26:Ae||Wn(o,s),xi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ae||Wn(o,s);var u=ne,p=Ze;cs(o.type)&&(ne=o.stateNode,Ze=!1),xi(n,s,o),yo(o.stateNode),ne=u,Ze=p;break;case 5:Ae||Wn(o,s);case 6:if(u=ne,p=Ze,ne=null,xi(n,s,o),ne=u,Ze=p,ne!==null)if(Ze)try{(ne.nodeType===9?ne.body:ne.nodeName==="HTML"?ne.ownerDocument.body:ne).removeChild(o.stateNode)}catch(m){Ht(o,s,m)}else try{ne.removeChild(o.stateNode)}catch(m){Ht(o,s,m)}break;case 18:ne!==null&&(Ze?(n=ne,Vy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Ja(n)):Vy(ne,o.stateNode));break;case 4:u=ne,p=Ze,ne=o.stateNode.containerInfo,Ze=!0,xi(n,s,o),ne=u,Ze=p;break;case 0:case 11:case 14:case 15:ns(2,o,s),Ae||ns(4,o,s),xi(n,s,o);break;case 1:Ae||(Wn(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&qm(o,s,u)),xi(n,s,o);break;case 21:xi(n,s,o);break;case 22:Ae=(u=Ae)||o.memoizedState!==null,xi(n,s,o),Ae=u;break;default:xi(n,s,o)}}function Jm(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Ja(n)}catch(o){Ht(s,s.return,o)}}}function ty(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Ja(n)}catch(o){Ht(s,s.return,o)}}function AS(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Wm),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Wm),s;default:throw Error(i(435,n.tag))}}function ac(n,s){var o=AS(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var p=NS.bind(null,n,u);u.then(p,p)}})}function Je(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],m=n,A=s,T=A;t:for(;T!==null;){switch(T.tag){case 27:if(cs(T.type)){ne=T.stateNode,Ze=!1;break t}break;case 5:ne=T.stateNode,Ze=!1;break t;case 3:case 4:ne=T.stateNode.containerInfo,Ze=!0;break t}T=T.return}if(ne===null)throw Error(i(160));Zm(m,A,p),ne=null,Ze=!1,m=p.alternate,m!==null&&(m.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ey(s,n),s=s.sibling}var Bn=null;function ey(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Je(s,n),tn(n),u&4&&(ns(3,n,n.return),ro(3,n),ns(5,n,n.return));break;case 1:Je(s,n),tn(n),u&512&&(Ae||o===null||Wn(o,o.return)),u&64&&Si&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Bn;if(Je(s,n),tn(n),u&512&&(Ae||o===null||Wn(o,o.return)),u&4){var m=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":m=p.getElementsByTagName("title")[0],(!m||m[Or]||m[Zt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=p.createElement(u),p.head.insertBefore(m,p.querySelector("head > title"))),Pe(m,u,o),m[Zt]=n,Ce(m),u=m;break t;case"link":var A=eb("link","href",p).get(u+(o.href||""));if(A){for(var T=0;T<A.length;T++)if(m=A[T],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){A.splice(T,1);break e}}m=p.createElement(u),Pe(m,u,o),p.head.appendChild(m);break;case"meta":if(A=eb("meta","content",p).get(u+(o.content||""))){for(T=0;T<A.length;T++)if(m=A[T],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){A.splice(T,1);break e}}m=p.createElement(u),Pe(m,u,o),p.head.appendChild(m);break;default:throw Error(i(468,u))}m[Zt]=n,Ce(m),u=m}n.stateNode=u}else nb(p,n.type,n.stateNode);else n.stateNode=tb(p,u,n.memoizedProps);else m!==u?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,u===null?nb(p,n.type,n.stateNode):tb(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&td(n,n.memoizedProps,o.memoizedProps)}break;case 27:Je(s,n),tn(n),u&512&&(Ae||o===null||Wn(o,o.return)),o!==null&&u&4&&td(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Je(s,n),tn(n),u&512&&(Ae||o===null||Wn(o,o.return)),n.flags&32){p=n.stateNode;try{Sa(p,"")}catch(rt){Ht(n,n.return,rt)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,td(n,p,o!==null?o.memoizedProps:p)),u&1024&&(id=!0);break;case 6:if(Je(s,n),tn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(rt){Ht(n,n.return,rt)}}break;case 3:if(Ac=null,p=Bn,Bn=vc(s.containerInfo),Je(s,n),Bn=p,tn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Ja(s.containerInfo)}catch(rt){Ht(n,n.return,rt)}id&&(id=!1,ny(n));break;case 4:u=Bn,Bn=vc(n.stateNode.containerInfo),Je(s,n),tn(n),Bn=u;break;case 12:Je(s,n),tn(n);break;case 31:Je(s,n),tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ac(n,u)));break;case 13:Je(s,n),tn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(oc=Ue()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ac(n,u)));break;case 22:p=n.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,z=Si,$=Ae;if(Si=z||p,Ae=$||N,Je(s,n),Ae=$,Si=z,tn(n),u&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||N||Si||Ae||Xs(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){N=o=s;try{if(m=N.stateNode,p)A=m.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{T=N.stateNode;var X=N.memoizedProps.style,H=X!=null&&X.hasOwnProperty("display")?X.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(rt){Ht(N,N.return,rt)}}}else if(s.tag===6){if(o===null){N=s;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(rt){Ht(N,N.return,rt)}}}else if(s.tag===18){if(o===null){N=s;try{var G=N.stateNode;p?qy(G,!0):qy(N.stateNode,!1)}catch(rt){Ht(N,N.return,rt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,ac(n,o))));break;case 19:Je(s,n),tn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,ac(n,u)));break;case 30:break;case 21:break;default:Je(s,n),tn(n)}}function tn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Ym(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,m=ed(n);sc(n,m,p);break;case 5:var A=o.stateNode;o.flags&32&&(Sa(A,""),o.flags&=-33);var T=ed(n);sc(n,T,A);break;case 3:case 4:var N=o.stateNode.containerInfo,z=ed(n);nd(n,z,N);break;default:throw Error(i(161))}}catch($){Ht(n,n.return,$)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function ny(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;ny(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function _i(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Km(n,s.alternate,s),s=s.sibling}function Xs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ns(4,s,s.return),Xs(s);break;case 1:Wn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&qm(s,s.return,o),Xs(s);break;case 27:yo(s.stateNode);case 26:case 5:Wn(s,s.return),Xs(s);break;case 22:s.memoizedState===null&&Xs(s);break;case 30:Xs(s);break;default:Xs(s)}n=n.sibling}}function Ei(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,m=s,A=m.flags;switch(m.tag){case 0:case 11:case 15:Ei(p,m,o),ro(4,m);break;case 1:if(Ei(p,m,o),u=m,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(z){Ht(u,u.return,z)}if(u=m,p=u.updateQueue,p!==null){var T=u.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Lg(N[p],T)}catch(z){Ht(u,u.return,z)}}o&&A&64&&Vm(m),oo(m,m.return);break;case 27:Xm(m);case 26:case 5:Ei(p,m,o),o&&u===null&&A&4&&$m(m),oo(m,m.return);break;case 12:Ei(p,m,o);break;case 31:Ei(p,m,o),o&&A&4&&Jm(p,m);break;case 13:Ei(p,m,o),o&&A&4&&ty(p,m);break;case 22:m.memoizedState===null&&Ei(p,m,o),oo(m,m.return);break;case 30:break;default:Ei(p,m,o)}s=s.sibling}}function sd(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Yr(o))}function ad(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Yr(n))}function Un(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)iy(n,s,o,u),s=s.sibling}function iy(n,s,o,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Un(n,s,o,u),p&2048&&ro(9,s);break;case 1:Un(n,s,o,u);break;case 3:Un(n,s,o,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Yr(n)));break;case 12:if(p&2048){Un(n,s,o,u),n=s.stateNode;try{var m=s.memoizedProps,A=m.id,T=m.onPostCommit;typeof T=="function"&&T(A,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Ht(s,s.return,N)}}else Un(n,s,o,u);break;case 31:Un(n,s,o,u);break;case 13:Un(n,s,o,u);break;case 23:break;case 22:m=s.stateNode,A=s.alternate,s.memoizedState!==null?m._visibility&2?Un(n,s,o,u):lo(n,s):m._visibility&2?Un(n,s,o,u):(m._visibility|=2,Ha(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&sd(A,s);break;case 24:Un(n,s,o,u),p&2048&&ad(s.alternate,s);break;default:Un(n,s,o,u)}}function Ha(n,s,o,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var m=n,A=s,T=o,N=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Ha(m,A,T,N,p),ro(8,A);break;case 23:break;case 22:var $=A.stateNode;A.memoizedState!==null?$._visibility&2?Ha(m,A,T,N,p):lo(m,A):($._visibility|=2,Ha(m,A,T,N,p)),p&&z&2048&&sd(A.alternate,A);break;case 24:Ha(m,A,T,N,p),p&&z&2048&&ad(A.alternate,A);break;default:Ha(m,A,T,N,p)}s=s.sibling}}function lo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,p=u.flags;switch(u.tag){case 22:lo(o,u),p&2048&&sd(u.alternate,u);break;case 24:lo(o,u),p&2048&&ad(u.alternate,u);break;default:lo(o,u)}s=s.sibling}}var co=8192;function Ga(n,s,o){if(n.subtreeFlags&co)for(n=n.child;n!==null;)sy(n,s,o),n=n.sibling}function sy(n,s,o){switch(n.tag){case 26:Ga(n,s,o),n.flags&co&&n.memoizedState!==null&&ox(o,Bn,n.memoizedState,n.memoizedProps);break;case 5:Ga(n,s,o);break;case 3:case 4:var u=Bn;Bn=vc(n.stateNode.containerInfo),Ga(n,s,o),Bn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=co,co=16777216,Ga(n,s,o),co=u):Ga(n,s,o));break;default:Ga(n,s,o)}}function ay(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function uo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Re=u,oy(u,n)}ay(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ry(n),n=n.sibling}function ry(n){switch(n.tag){case 0:case 11:case 15:uo(n),n.flags&2048&&ns(9,n,n.return);break;case 3:uo(n);break;case 12:uo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,rc(n)):uo(n);break;default:uo(n)}}function rc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Re=u,oy(u,n)}ay(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ns(8,s,s.return),rc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,rc(s));break;default:rc(s)}n=n.sibling}}function oy(n,s){for(;Re!==null;){var o=Re;switch(o.tag){case 0:case 11:case 15:ns(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Yr(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Re=u;else t:for(o=n;Re!==null;){u=Re;var p=u.sibling,m=u.return;if(Qm(u),u===o){Re=null;break t}if(p!==null){p.return=m,Re=p;break t}Re=m}}}var SS={getCacheForType:function(n){var s=Oe(be),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Oe(be).controller.signal}},xS=typeof WeakMap=="function"?WeakMap:Map,Bt=0,Xt=null,Ct=null,Dt=0,zt=0,fn=null,is=!1,Va=!1,rd=!1,Ti=0,de=0,ss=0,Ws=0,od=0,pn=0,qa=0,ho=null,en=null,ld=!1,oc=0,ly=0,lc=1/0,cc=null,as=null,Ee=0,rs=null,$a=null,Ci=0,cd=0,ud=null,cy=null,fo=0,hd=null;function gn(){return(Bt&2)!==0&&Dt!==0?Dt&-Dt:k.T!==null?yd():ae()}function uy(){if(pn===0)if((Dt&536870912)===0||kt){var n=fa;fa<<=1,(fa&3932160)===0&&(fa=262144),pn=n}else pn=536870912;return n=hn.current,n!==null&&(n.flags|=32),pn}function nn(n,s,o){(n===Xt&&(zt===2||zt===9)||n.cancelPendingCommit!==null)&&(Ya(n,0),os(n,Dt,pn,!1)),ks(n,o),((Bt&2)===0||n!==Xt)&&(n===Xt&&((Bt&2)===0&&(Ws|=o),de===4&&os(n,Dt,pn,!1)),Kn(n))}function hy(n,s,o){if((Bt&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Ms(n,s),p=u?TS(n,s):fd(n,s,!0),m=u;do{if(p===0){Va&&!u&&os(n,s,0,!1);break}else{if(o=n.current.alternate,m&&!_S(o)){p=fd(n,s,!1),m=!1;continue}if(p===2){if(m=s,n.errorRecoveryDisabledLanes&m)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;t:{var T=n;p=ho;var N=T.current.memoizedState.isDehydrated;if(N&&(Ya(T,A).flags|=256),A=fd(T,A,!1),A!==2){if(rd&&!N){T.errorRecoveryDisabledLanes|=m,Ws|=m,p=4;break t}m=en,en=p,m!==null&&(en===null?en=m:en.push.apply(en,m))}p=A}if(m=!1,p!==2)continue}}if(p===1){Ya(n,0),os(n,s,0,!0);break}t:{switch(u=n,m=p,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:os(u,s,pn,!is);break t;case 2:en=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=oc+300-Ue(),10<p)){if(os(u,s,pn,!is),ga(u,0,!0)!==0)break t;Ci=s,u.timeoutHandle=Hy(dy.bind(null,u,o,en,cc,ld,s,pn,Ws,qa,is,m,"Throttled",-0,0),p);break t}dy(u,o,en,cc,ld,s,pn,Ws,qa,is,m,null,-0,0)}}break}while(!0);Kn(n)}function dy(n,s,o,u,p,m,A,T,N,z,$,X,H,G){if(n.timeoutHandle=-1,X=s.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:di},sy(s,m,X);var rt=(m&62914560)===m?oc-Ue():(m&4194048)===m?ly-Ue():0;if(rt=lx(X,rt),rt!==null){Ci=m,n.cancelPendingCommit=rt(wy.bind(null,n,s,m,o,u,p,A,T,N,$,X,null,H,G)),os(n,m,A,!z);return}}wy(n,s,m,o,u,p,A,T,N)}function _S(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],m=p.getSnapshot;p=p.value;try{if(!cn(m(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function os(n,s,o,u){s&=~od,s&=~Ws,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var m=31-qe(p),A=1<<m;u[m]=-1,p&=~A}o!==0&&it(n,o,s)}function uc(){return(Bt&6)===0?(po(0),!1):!0}function dd(){if(Ct!==null){if(zt===0)var n=Ct.return;else n=Ct,mi=Fs=null,Rh(n),ja=null,Wr=0,n=Ct;for(;n!==null;)Gm(n.alternate,n),n=n.return;Ct=null}}function Ya(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,VS(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Ci=0,dd(),Xt=n,Ct=o=pi(n.current,null),Dt=s,zt=0,fn=null,is=!1,Va=Ms(n,s),rd=!1,qa=pn=od=Ws=ss=de=0,en=ho=null,ld=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-qe(u),m=1<<p;s|=n[p],u&=~m}return Ti=s,Ml(),o}function fy(n,s){xt=null,k.H=io,s===Pa||s===Ul?(s=Dg(),zt=3):s===mh?(s=Dg(),zt=4):zt=s===Vh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,fn=s,Ct===null&&(de=1,Jl(n,xn(s,n.current)))}function py(){var n=hn.current;return n===null?!0:(Dt&4194048)===Dt?Cn===null:(Dt&62914560)===Dt||(Dt&536870912)!==0?n===Cn:!1}function gy(){var n=k.H;return k.H=io,n===null?io:n}function my(){var n=k.A;return k.A=SS,n}function hc(){de=4,is||(Dt&4194048)!==Dt&&hn.current!==null||(Va=!0),(ss&134217727)===0&&(Ws&134217727)===0||Xt===null||os(Xt,Dt,pn,!1)}function fd(n,s,o){var u=Bt;Bt|=2;var p=gy(),m=my();(Xt!==n||Dt!==s)&&(cc=null,Ya(n,s)),s=!1;var A=de;t:do try{if(zt!==0&&Ct!==null){var T=Ct,N=fn;switch(zt){case 8:dd(),A=6;break t;case 3:case 2:case 9:case 6:hn.current===null&&(s=!0);var z=zt;if(zt=0,fn=null,Xa(n,T,N,z),o&&Va){A=0;break t}break;default:z=zt,zt=0,fn=null,Xa(n,T,N,z)}}ES(),A=de;break}catch($){fy(n,$)}while(!0);return s&&n.shellSuspendCounter++,mi=Fs=null,Bt=u,k.H=p,k.A=m,Ct===null&&(Xt=null,Dt=0,Ml()),A}function ES(){for(;Ct!==null;)yy(Ct)}function TS(n,s){var o=Bt;Bt|=2;var u=gy(),p=my();Xt!==n||Dt!==s?(cc=null,lc=Ue()+500,Ya(n,s)):Va=Ms(n,s);t:do try{if(zt!==0&&Ct!==null){s=Ct;var m=fn;e:switch(zt){case 1:zt=0,fn=null,Xa(n,s,m,1);break;case 2:case 9:if(Cg(m)){zt=0,fn=null,by(s);break}s=function(){zt!==2&&zt!==9||Xt!==n||(zt=7),Kn(n)},m.then(s,s);break t;case 3:zt=7;break t;case 4:zt=5;break t;case 7:Cg(m)?(zt=0,fn=null,by(s)):(zt=0,fn=null,Xa(n,s,m,7));break;case 5:var A=null;switch(Ct.tag){case 26:A=Ct.memoizedState;case 5:case 27:var T=Ct;if(A?ib(A):T.stateNode.complete){zt=0,fn=null;var N=T.sibling;if(N!==null)Ct=N;else{var z=T.return;z!==null?(Ct=z,dc(z)):Ct=null}break e}}zt=0,fn=null,Xa(n,s,m,5);break;case 6:zt=0,fn=null,Xa(n,s,m,6);break;case 8:dd(),de=6;break t;default:throw Error(i(462))}}CS();break}catch($){fy(n,$)}while(!0);return mi=Fs=null,k.H=u,k.A=p,Bt=o,Ct!==null?0:(Xt=null,Dt=0,Ml(),de)}function CS(){for(;Ct!==null&&!Ds();)yy(Ct)}function yy(n){var s=zm(n.alternate,n,Ti);n.memoizedProps=n.pendingProps,s===null?dc(n):Ct=s}function by(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Im(o,s,s.pendingProps,s.type,void 0,Dt);break;case 11:s=Im(o,s,s.pendingProps,s.type.render,s.ref,Dt);break;case 5:Rh(s);default:Gm(o,s),s=Ct=mg(s,Ti),s=zm(o,s,Ti)}n.memoizedProps=n.pendingProps,s===null?dc(n):Ct=s}function Xa(n,s,o,u){mi=Fs=null,Rh(s),ja=null,Wr=0;var p=s.return;try{if(gS(n,p,s,o,Dt)){de=1,Jl(n,xn(o,n.current)),Ct=null;return}}catch(m){if(p!==null)throw Ct=p,m;de=1,Jl(n,xn(o,n.current)),Ct=null;return}s.flags&32768?(kt||u===1?n=!0:Va||(Dt&536870912)!==0?n=!1:(is=n=!0,(u===2||u===9||u===3||u===6)&&(u=hn.current,u!==null&&u.tag===13&&(u.flags|=16384))),vy(s,n)):dc(s)}function dc(n){var s=n;do{if((s.flags&32768)!==0){vy(s,is);return}n=s.return;var o=bS(s.alternate,s,Ti);if(o!==null){Ct=o;return}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=n}while(s!==null);de===0&&(de=5)}function vy(n,s){do{var o=vS(n.alternate,n);if(o!==null){o.flags&=32767,Ct=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ct=n;return}Ct=n=o}while(n!==null);de=6,Ct=null}function wy(n,s,o,u,p,m,A,T,N){n.cancelPendingCommit=null;do fc();while(Ee!==0);if((Bt&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=eh,J(n,o,m,A,T,N),n===Xt&&(Ct=Xt=null,Dt=0),$a=s,rs=n,Ci=o,cd=m,ud=p,cy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,MS(ha,function(){return Ey(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=k.T,k.T=null,p=U.p,U.p=2,A=Bt,Bt|=4;try{wS(n,s,o)}finally{Bt=A,U.p=p,k.T=u}}Ee=1,Ay(),Sy(),xy()}}function Ay(){if(Ee===1){Ee=0;var n=rs,s=$a,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=k.T,k.T=null;var u=U.p;U.p=2;var p=Bt;Bt|=4;try{ey(s,n);var m=Ed,A=og(n.containerInfo),T=m.focusedElem,N=m.selectionRange;if(A!==T&&T&&T.ownerDocument&&rg(T.ownerDocument.documentElement,T)){if(N!==null&&Ku(T)){var z=N.start,$=N.end;if($===void 0&&($=z),"selectionStart"in T)T.selectionStart=z,T.selectionEnd=Math.min($,T.value.length);else{var X=T.ownerDocument||document,H=X&&X.defaultView||window;if(H.getSelection){var G=H.getSelection(),rt=T.textContent.length,mt=Math.min(N.start,rt),qt=N.end===void 0?mt:Math.min(N.end,rt);!G.extend&&mt>qt&&(A=qt,qt=mt,mt=A);var j=ag(T,mt),L=ag(T,qt);if(j&&L&&(G.rangeCount!==1||G.anchorNode!==j.node||G.anchorOffset!==j.offset||G.focusNode!==L.node||G.focusOffset!==L.offset)){var F=X.createRange();F.setStart(j.node,j.offset),G.removeAllRanges(),mt>qt?(G.addRange(F),G.extend(L.node,L.offset)):(F.setEnd(L.node,L.offset),G.addRange(F))}}}}for(X=[],G=T;G=G.parentNode;)G.nodeType===1&&X.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<X.length;T++){var Y=X[T];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Ec=!!_d,Ed=_d=null}finally{Bt=p,U.p=u,k.T=o}}n.current=s,Ee=2}}function Sy(){if(Ee===2){Ee=0;var n=rs,s=$a,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=k.T,k.T=null;var u=U.p;U.p=2;var p=Bt;Bt|=4;try{Km(n,s.alternate,s)}finally{Bt=p,U.p=u,k.T=o}}Ee=3}}function xy(){if(Ee===4||Ee===3){Ee=0,Cu();var n=rs,s=$a,o=Ci,u=cy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ee=5:(Ee=0,$a=rs=null,_y(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(as=null),Qt(o),s=s.stateNode,Ve&&typeof Ve.onCommitFiberRoot=="function")try{Ve.onCommitFiberRoot(qi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=k.T,p=U.p,U.p=2,k.T=null;try{for(var m=n.onRecoverableError,A=0;A<u.length;A++){var T=u[A];m(T.value,{componentStack:T.stack})}}finally{k.T=s,U.p=p}}(Ci&3)!==0&&fc(),Kn(n),p=n.pendingLanes,(o&261930)!==0&&(p&42)!==0?n===hd?fo++:(fo=0,hd=n):fo=0,po(0)}}function _y(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Yr(s)))}function fc(){return Ay(),Sy(),xy(),Ey()}function Ey(){if(Ee!==5)return!1;var n=rs,s=cd;cd=0;var o=Qt(Ci),u=k.T,p=U.p;try{U.p=32>o?32:o,k.T=null,o=ud,ud=null;var m=rs,A=Ci;if(Ee=0,$a=rs=null,Ci=0,(Bt&6)!==0)throw Error(i(331));var T=Bt;if(Bt|=4,ry(m.current),iy(m,m.current,A,o),Bt=T,po(0,!1),Ve&&typeof Ve.onPostCommitFiberRoot=="function")try{Ve.onPostCommitFiberRoot(qi,m)}catch{}return!0}finally{U.p=p,k.T=u,_y(n,s)}}function Ty(n,s,o){s=xn(o,s),s=Gh(n.stateNode,s,2),n=Ji(n,s,2),n!==null&&(ks(n,2),Kn(n))}function Ht(n,s,o){if(n.tag===3)Ty(n,n,o);else for(;s!==null;){if(s.tag===3){Ty(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(as===null||!as.has(u))){n=xn(o,n),o=Cm(2),u=Ji(s,o,2),u!==null&&(Rm(o,u,s,n),ks(u,2),Kn(u));break}}s=s.return}}function pd(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new xS;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(o)||(rd=!0,p.add(o),n=RS.bind(null,n,s,o),s.then(n,n))}function RS(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Xt===n&&(Dt&o)===o&&(de===4||de===3&&(Dt&62914560)===Dt&&300>Ue()-oc?(Bt&2)===0&&Ya(n,0):od|=o,qa===Dt&&(qa=0)),Kn(n)}function Cy(n,s){s===0&&(s=vl()),n=js(n,s),n!==null&&(ks(n,s),Kn(n))}function DS(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),Cy(n,o)}function NS(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Cy(n,o)}function MS(n,s){return Nr(n,s)}var pc=null,Wa=null,gd=!1,gc=!1,md=!1,ls=0;function Kn(n){n!==Wa&&n.next===null&&(Wa===null?pc=Wa=n:Wa=Wa.next=n),gc=!0,gd||(gd=!0,LS())}function po(n,s){if(!md&&gc){md=!0;do for(var o=!1,u=pc;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var m=0;else{var A=u.suspendedLanes,T=u.pingedLanes;m=(1<<31-qe(42|n)+1)-1,m&=p&~(A&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,My(u,m))}else m=Dt,m=ga(u,u===Xt?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Ms(u,m)||(o=!0,My(u,m));u=u.next}while(o);md=!1}}function kS(){Ry()}function Ry(){gc=gd=!1;var n=0;ls!==0&&GS()&&(n=ls);for(var s=Ue(),o=null,u=pc;u!==null;){var p=u.next,m=Dy(u,s);m===0?(u.next=null,o===null?pc=p:o.next=p,p===null&&(Wa=o)):(o=u,(n!==0||(m&3)!==0)&&(gc=!0)),u=p}Ee!==0&&Ee!==5||po(n),ls!==0&&(ls=0)}function Dy(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var A=31-qe(m),T=1<<A,N=p[A];N===-1?((T&o)===0||(T&u)!==0)&&(p[A]=Mu(T,s)):N<=s&&(n.expiredLanes|=T),m&=~T}if(s=Xt,o=Dt,o=ga(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(zt===2||zt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Mr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Ms(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Mr(u),Qt(o)){case 2:case 8:o=yl;break;case 32:o=ha;break;case 268435456:o=qn;break;default:o=ha}return u=Ny.bind(null,n),o=Nr(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Mr(u),n.callbackPriority=2,n.callbackNode=null,2}function Ny(n,s){if(Ee!==0&&Ee!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(fc()&&n.callbackNode!==o)return null;var u=Dt;return u=ga(n,n===Xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(hy(n,u,s),Dy(n,Ue()),n.callbackNode!=null&&n.callbackNode===o?Ny.bind(null,n):null)}function My(n,s){if(fc())return null;hy(n,s,!0)}function LS(){qS(function(){(Bt&6)!==0?Nr(ua,kS):Ry()})}function yd(){if(ls===0){var n=Oa;n===0&&(n=da,da<<=1,(da&261888)===0&&(da=256)),ls=n}return ls}function ky(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:xl(""+n)}function Ly(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function OS(n,s,o,u,p){if(s==="submit"&&o&&o.stateNode===p){var m=ky((p[Fe]||null).action),A=u.submitter;A&&(s=(s=A[Fe]||null)?ky(s.formAction):A.getAttribute("formAction"),s!==null&&(m=s,A=null));var T=new Cl("action","action",null,u,p);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ls!==0){var N=A?Ly(p,A):new FormData(p);jh(o,{pending:!0,data:N,method:p.method,action:m},null,N)}}else typeof m=="function"&&(T.preventDefault(),N=A?Ly(p,A):new FormData(p),jh(o,{pending:!0,data:N,method:p.method,action:m},m,N))},currentTarget:p}]})}}for(var bd=0;bd<th.length;bd++){var vd=th[bd],IS=vd.toLowerCase(),PS=vd[0].toUpperCase()+vd.slice(1);jn(IS,"on"+PS)}jn(ug,"onAnimationEnd"),jn(hg,"onAnimationIteration"),jn(dg,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(ZA,"onTransitionRun"),jn(JA,"onTransitionStart"),jn(tS,"onTransitionCancel"),jn(fg,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),Ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function Oy(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],p=u.event;u=u.listeners;t:{var m=void 0;if(s)for(var A=u.length-1;0<=A;A--){var T=u[A],N=T.instance,z=T.currentTarget;if(T=T.listener,N!==m&&p.isPropagationStopped())break t;m=T,p.currentTarget=z;try{m(p)}catch($){Nl($)}p.currentTarget=null,m=N}else for(A=0;A<u.length;A++){if(T=u[A],N=T.instance,z=T.currentTarget,T=T.listener,N!==m&&p.isPropagationStopped())break t;m=T,p.currentTarget=z;try{m(p)}catch($){Nl($)}p.currentTarget=null,m=N}}}}function Rt(n,s){var o=s[ku];o===void 0&&(o=s[ku]=new Set);var u=n+"__bubble";o.has(u)||(Iy(s,n,2,!1),o.add(u))}function wd(n,s,o){var u=0;s&&(u|=4),Iy(o,n,u,s)}var mc="_reactListening"+Math.random().toString(36).slice(2);function Ad(n){if(!n[mc]){n[mc]=!0,Rp.forEach(function(o){o!=="selectionchange"&&(jS.has(o)||wd(o,!1,n),wd(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[mc]||(s[mc]=!0,wd("selectionchange",!1,s))}}function Iy(n,s,o,u){switch(ub(s)){case 2:var p=hx;break;case 8:p=dx;break;default:p=Pd}o=p.bind(null,s,o,n),p=void 0,!zu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,o,{capture:!0,passive:p}):n.addEventListener(s,o,!0):p!==void 0?n.addEventListener(s,o,{passive:p}):n.addEventListener(s,o,!1)}function Sd(n,s,o,u,p){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var T=u.stateNode.containerInfo;if(T===p)break;if(A===4)for(A=u.return;A!==null;){var N=A.tag;if((N===3||N===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;T!==null;){if(A=ya(T),A===null)return;if(N=A.tag,N===5||N===6||N===26||N===27){u=m=A;continue t}T=T.parentNode}}u=u.return}Fp(function(){var z=m,$=Uu(o),X=[];t:{var H=pg.get(n);if(H!==void 0){var G=Cl,rt=n;switch(n){case"keypress":if(El(o)===0)break t;case"keydown":case"keyup":G=NA;break;case"focusin":rt="focus",G=qu;break;case"focusout":rt="blur",G=qu;break;case"beforeblur":case"afterblur":G=qu;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=bA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=LA;break;case ug:case hg:case dg:G=AA;break;case fg:G=IA;break;case"scroll":case"scrollend":G=mA;break;case"wheel":G=jA;break;case"copy":case"cut":case"paste":G=xA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=qp;break;case"toggle":case"beforetoggle":G=UA}var mt=(s&4)!==0,qt=!mt&&(n==="scroll"||n==="scrollend"),j=mt?H!==null?H+"Capture":null:H;mt=[];for(var L=z,F;L!==null;){var Y=L;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||j===null||(Y=Pr(L,j),Y!=null&&mt.push(mo(L,Y,F))),qt)break;L=L.return}0<mt.length&&(H=new G(H,rt,null,o,$),X.push({event:H,listeners:mt}))}}if((s&7)===0){t:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&o!==Bu&&(rt=o.relatedTarget||o.fromElement)&&(ya(rt)||rt[ma]))break t;if((G||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,G?(rt=o.relatedTarget||o.toElement,G=z,rt=rt?ya(rt):null,rt!==null&&(qt=l(rt),mt=rt.tag,rt!==qt||mt!==5&&mt!==27&&mt!==6)&&(rt=null)):(G=null,rt=z),G!==rt)){if(mt=Gp,Y="onMouseLeave",j="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(mt=qp,Y="onPointerLeave",j="onPointerEnter",L="pointer"),qt=G==null?H:Ir(G),F=rt==null?H:Ir(rt),H=new mt(Y,L+"leave",G,o,$),H.target=qt,H.relatedTarget=F,Y=null,ya($)===z&&(mt=new mt(j,L+"enter",rt,o,$),mt.target=F,mt.relatedTarget=qt,Y=mt),qt=Y,G&&rt)e:{for(mt=BS,j=G,L=rt,F=0,Y=j;Y;Y=mt(Y))F++;Y=0;for(var ct=L;ct;ct=mt(ct))Y++;for(;0<F-Y;)j=mt(j),F--;for(;0<Y-F;)L=mt(L),Y--;for(;F--;){if(j===L||L!==null&&j===L.alternate){mt=j;break e}j=mt(j),L=mt(L)}mt=null}else mt=null;G!==null&&Py(X,H,G,mt,!1),rt!==null&&qt!==null&&Py(X,qt,rt,mt,!0)}}t:{if(H=z?Ir(z):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var Pt=Jp;else if(Qp(H))if(tg)Pt=WA;else{Pt=YA;var lt=$A}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&ju(z.elementType)&&(Pt=Jp):Pt=XA;if(Pt&&(Pt=Pt(n,z))){Zp(X,Pt,o,$);break t}lt&&lt(n,H,z),n==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&Pu(H,"number",H.value)}switch(lt=z?Ir(z):window,n){case"focusin":(Qp(lt)||lt.contentEditable==="true")&&(Ta=lt,Qu=z,Vr=null);break;case"focusout":Vr=Qu=Ta=null;break;case"mousedown":Zu=!0;break;case"contextmenu":case"mouseup":case"dragend":Zu=!1,lg(X,o,$);break;case"selectionchange":if(QA)break;case"keydown":case"keyup":lg(X,o,$)}var _t;if(Yu)t:{switch(n){case"compositionstart":var Nt="onCompositionStart";break t;case"compositionend":Nt="onCompositionEnd";break t;case"compositionupdate":Nt="onCompositionUpdate";break t}Nt=void 0}else Ea?Wp(n,o)&&(Nt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Nt="onCompositionStart");Nt&&($p&&o.locale!=="ko"&&(Ea||Nt!=="onCompositionStart"?Nt==="onCompositionEnd"&&Ea&&(_t=zp()):($i=$,Hu="value"in $i?$i.value:$i.textContent,Ea=!0)),lt=yc(z,Nt),0<lt.length&&(Nt=new Vp(Nt,n,null,o,$),X.push({event:Nt,listeners:lt}),_t?Nt.data=_t:(_t=Kp(o),_t!==null&&(Nt.data=_t)))),(_t=zA?HA(n,o):GA(n,o))&&(Nt=yc(z,"onBeforeInput"),0<Nt.length&&(lt=new Vp("onBeforeInput","beforeinput",null,o,$),X.push({event:lt,listeners:Nt}),lt.data=_t)),OS(X,n,z,o,$)}Oy(X,s)})}function mo(n,s,o){return{instance:n,listener:s,currentTarget:o}}function yc(n,s){for(var o=s+"Capture",u=[];n!==null;){var p=n,m=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||m===null||(p=Pr(n,o),p!=null&&u.unshift(mo(n,p,m)),p=Pr(n,s),p!=null&&u.push(mo(n,p,m))),n.tag===3)return u;n=n.return}return[]}function BS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Py(n,s,o,u,p){for(var m=s._reactName,A=[];o!==null&&o!==u;){var T=o,N=T.alternate,z=T.stateNode;if(T=T.tag,N!==null&&N===u)break;T!==5&&T!==26&&T!==27||z===null||(N=z,p?(z=Pr(o,m),z!=null&&A.unshift(mo(o,z,N))):p||(z=Pr(o,m),z!=null&&A.push(mo(o,z,N)))),o=o.return}A.length!==0&&n.push({event:s,listeners:A})}var US=/\r\n?/g,FS=/\u0000|\uFFFD/g;function jy(n){return(typeof n=="string"?n:""+n).replace(US,`
`).replace(FS,"")}function By(n,s){return s=jy(s),jy(n)===s}function Vt(n,s,o,u,p,m){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Sa(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Sa(n,""+u);break;case"className":Al(n,"class",u);break;case"tabIndex":Al(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Al(n,o,u);break;case"style":Bp(n,u,m);break;case"data":if(s!=="object"){Al(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=xl(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(s!=="input"&&Vt(n,s,"name",p.name,p,null),Vt(n,s,"formEncType",p.formEncType,p,null),Vt(n,s,"formMethod",p.formMethod,p,null),Vt(n,s,"formTarget",p.formTarget,p,null)):(Vt(n,s,"encType",p.encType,p,null),Vt(n,s,"method",p.method,p,null),Vt(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=xl(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=di);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=xl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),wl(n,"popover",u);break;case"xlinkActuate":hi(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":hi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":hi(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":hi(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":hi(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":hi(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":hi(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":hi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":hi(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":wl(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pA.get(o)||o,wl(n,o,u))}}function xd(n,s,o,u,p,m){switch(o){case"style":Bp(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Sa(n,u):(typeof u=="number"||typeof u=="bigint")&&Sa(n,""+u);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=di);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dp.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),m=n[Fe]||null,m=m!=null?m[o]:null,typeof m=="function"&&n.removeEventListener(s,m,p),typeof u=="function")){typeof m!="function"&&m!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,p);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):wl(n,o,u)}}}function Pe(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var u=!1,p=!1,m;for(m in o)if(o.hasOwnProperty(m)){var A=o[m];if(A!=null)switch(m){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Vt(n,s,m,A,o,null)}}p&&Vt(n,s,"srcSet",o.srcSet,o,null),u&&Vt(n,s,"src",o.src,o,null);return;case"input":Rt("invalid",n);var T=m=A=p=null,N=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":p=$;break;case"type":A=$;break;case"checked":N=$;break;case"defaultChecked":z=$;break;case"value":m=$;break;case"defaultValue":T=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:Vt(n,s,u,$,o,null)}}Op(n,m,T,N,z,A,p,!1);return;case"select":Rt("invalid",n),u=A=m=null;for(p in o)if(o.hasOwnProperty(p)&&(T=o[p],T!=null))switch(p){case"value":m=T;break;case"defaultValue":A=T;break;case"multiple":u=T;default:Vt(n,s,p,T,o,null)}s=m,o=A,n.multiple=!!u,s!=null?Aa(n,!!u,s,!1):o!=null&&Aa(n,!!u,o,!0);return;case"textarea":Rt("invalid",n),m=p=u=null;for(A in o)if(o.hasOwnProperty(A)&&(T=o[A],T!=null))switch(A){case"value":u=T;break;case"defaultValue":p=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Vt(n,s,A,T,o,null)}Pp(n,u,p,m);return;case"option":for(N in o)o.hasOwnProperty(N)&&(u=o[N],u!=null)&&(N==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":Vt(n,s,N,u,o,null));return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(u=0;u<go.length;u++)Rt(go[u],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Vt(n,s,z,u,o,null)}return;default:if(ju(s)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&xd(n,s,$,u,o,void 0));return}}for(T in o)o.hasOwnProperty(T)&&(u=o[T],u!=null&&Vt(n,s,T,u,o,null))}function zS(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,m=null,A=null,T=null,N=null,z=null,$=null;for(G in o){var X=o[G];if(o.hasOwnProperty(G)&&X!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=X;default:u.hasOwnProperty(G)||Vt(n,s,G,null,u,X)}}for(var H in u){var G=u[H];if(X=o[H],u.hasOwnProperty(H)&&(G!=null||X!=null))switch(H){case"type":m=G;break;case"name":p=G;break;case"checked":z=G;break;case"defaultChecked":$=G;break;case"value":A=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==X&&Vt(n,s,H,G,u,X)}}Iu(n,A,T,N,z,$,m,p);return;case"select":G=A=T=H=null;for(m in o)if(N=o[m],o.hasOwnProperty(m)&&N!=null)switch(m){case"value":break;case"multiple":G=N;default:u.hasOwnProperty(m)||Vt(n,s,m,null,u,N)}for(p in u)if(m=u[p],N=o[p],u.hasOwnProperty(p)&&(m!=null||N!=null))switch(p){case"value":H=m;break;case"defaultValue":T=m;break;case"multiple":A=m;default:m!==N&&Vt(n,s,p,m,u,N)}s=T,o=A,u=G,H!=null?Aa(n,!!o,H,!1):!!u!=!!o&&(s!=null?Aa(n,!!o,s,!0):Aa(n,!!o,o?[]:"",!1));return;case"textarea":G=H=null;for(T in o)if(p=o[T],o.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Vt(n,s,T,null,u,p)}for(A in u)if(p=u[A],m=o[A],u.hasOwnProperty(A)&&(p!=null||m!=null))switch(A){case"value":H=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==m&&Vt(n,s,A,p,u,m)}Ip(n,H,G);return;case"option":for(var rt in o)H=o[rt],o.hasOwnProperty(rt)&&H!=null&&!u.hasOwnProperty(rt)&&(rt==="selected"?n.selected=!1:Vt(n,s,rt,null,u,H));for(N in u)H=u[N],G=o[N],u.hasOwnProperty(N)&&H!==G&&(H!=null||G!=null)&&(N==="selected"?n.selected=H&&typeof H!="function"&&typeof H!="symbol":Vt(n,s,N,H,u,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in o)H=o[mt],o.hasOwnProperty(mt)&&H!=null&&!u.hasOwnProperty(mt)&&Vt(n,s,mt,null,u,H);for(z in u)if(H=u[z],G=o[z],u.hasOwnProperty(z)&&H!==G&&(H!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:Vt(n,s,z,H,u,G)}return;default:if(ju(s)){for(var qt in o)H=o[qt],o.hasOwnProperty(qt)&&H!==void 0&&!u.hasOwnProperty(qt)&&xd(n,s,qt,void 0,u,H);for($ in u)H=u[$],G=o[$],!u.hasOwnProperty($)||H===G||H===void 0&&G===void 0||xd(n,s,$,H,u,G);return}}for(var j in o)H=o[j],o.hasOwnProperty(j)&&H!=null&&!u.hasOwnProperty(j)&&Vt(n,s,j,null,u,H);for(X in u)H=u[X],G=o[X],!u.hasOwnProperty(X)||H===G||H==null&&G==null||Vt(n,s,X,H,u,G)}function Uy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],m=p.transferSize,A=p.initiatorType,T=p.duration;if(m&&T&&Uy(A)){for(A=0,T=p.responseEnd,u+=1;u<o.length;u++){var N=o[u],z=N.startTime;if(z>T)break;var $=N.transferSize,X=N.initiatorType;$&&Uy(X)&&(N=N.responseEnd,A+=$*(N<T?1:(T-z)/(N-z)))}if(--u,s+=8*(m+A)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var _d=null,Ed=null;function bc(n){return n.nodeType===9?n:n.ownerDocument}function Fy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zy(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Td(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Cd=null;function GS(){var n=window.event;return n&&n.type==="popstate"?n===Cd?!1:(Cd=n,!0):(Cd=null,!1)}var Hy=typeof setTimeout=="function"?setTimeout:void 0,VS=typeof clearTimeout=="function"?clearTimeout:void 0,Gy=typeof Promise=="function"?Promise:void 0,qS=typeof queueMicrotask=="function"?queueMicrotask:typeof Gy<"u"?function(n){return Gy.resolve(null).then(n).catch($S)}:Hy;function $S(n){setTimeout(function(){throw n})}function cs(n){return n==="head"}function Vy(n,s){var o=s,u=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(p),Ja(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")yo(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,yo(o);for(var m=o.firstChild;m;){var A=m.nextSibling,T=m.nodeName;m[Or]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&m.rel.toLowerCase()==="stylesheet"||o.removeChild(m),m=A}}else o==="body"&&yo(n.ownerDocument.body);o=p}while(o);Ja(s)}function qy(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Rd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Rd(o),Lu(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function YS(n,s,o,u){for(;n.nodeType===1;){var p=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Or])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Rn(n.nextSibling),n===null)break}return null}function XS(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Rn(n.nextSibling),n===null))return null;return n}function $y(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Rn(n.nextSibling),n===null))return null;return n}function Dd(n){return n.data==="$?"||n.data==="$~"}function Nd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function WS(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Rn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Md=null;function Yy(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return Rn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Xy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function Wy(n,s,o){switch(s=bc(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function yo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Lu(n)}var Dn=new Map,Ky=new Set;function vc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ri=U.d;U.d={f:KS,r:QS,D:ZS,C:JS,L:tx,m:ex,X:ix,S:nx,M:sx};function KS(){var n=Ri.f(),s=uc();return n||s}function QS(n){var s=ba(n);s!==null&&s.tag===5&&s.type==="form"?fm(s):Ri.r(n)}var Ka=typeof document>"u"?null:document;function Qy(n,s,o){var u=Ka;if(u&&typeof s=="string"&&s){var p=An(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),Ky.has(p)||(Ky.add(p),n={rel:n,crossOrigin:o,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),Pe(s,"link",n),Ce(s),u.head.appendChild(s)))}}function ZS(n){Ri.D(n),Qy("dns-prefetch",n,null)}function JS(n,s){Ri.C(n,s),Qy("preconnect",n,s)}function tx(n,s,o){Ri.L(n,s,o);var u=Ka;if(u&&n&&s){var p='link[rel="preload"][as="'+An(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+An(o.imageSizes)+'"]')):p+='[href="'+An(n)+'"]';var m=p;switch(s){case"style":m=Qa(n);break;case"script":m=Za(n)}Dn.has(m)||(n=y({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Dn.set(m,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(bo(m))||s==="script"&&u.querySelector(vo(m))||(s=u.createElement("link"),Pe(s,"link",n),Ce(s),u.head.appendChild(s)))}}function ex(n,s){Ri.m(n,s);var o=Ka;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+An(u)+'"][href="'+An(n)+'"]',m=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Za(n)}if(!Dn.has(m)&&(n=y({rel:"modulepreload",href:n},s),Dn.set(m,n),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(vo(m)))return}u=o.createElement("link"),Pe(u,"link",n),Ce(u),o.head.appendChild(u)}}}function nx(n,s,o){Ri.S(n,s,o);var u=Ka;if(u&&n){var p=va(u).hoistableStyles,m=Qa(n);s=s||"default";var A=p.get(m);if(!A){var T={loading:0,preload:null};if(A=u.querySelector(bo(m)))T.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Dn.get(m))&&kd(n,o);var N=A=u.createElement("link");Ce(N),Pe(N,"link",n),N._p=new Promise(function(z,$){N.onload=z,N.onerror=$}),N.addEventListener("load",function(){T.loading|=1}),N.addEventListener("error",function(){T.loading|=2}),T.loading|=4,wc(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:T},p.set(m,A)}}}function ix(n,s){Ri.X(n,s);var o=Ka;if(o&&n){var u=va(o).hoistableScripts,p=Za(n),m=u.get(p);m||(m=o.querySelector(vo(p)),m||(n=y({src:n,async:!0},s),(s=Dn.get(p))&&Ld(n,s),m=o.createElement("script"),Ce(m),Pe(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function sx(n,s){Ri.M(n,s);var o=Ka;if(o&&n){var u=va(o).hoistableScripts,p=Za(n),m=u.get(p);m||(m=o.querySelector(vo(p)),m||(n=y({src:n,async:!0,type:"module"},s),(s=Dn.get(p))&&Ld(n,s),m=o.createElement("script"),Ce(m),Pe(m,"link",n),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(p,m))}}function Zy(n,s,o,u){var p=(p=gt.current)?vc(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Qa(o.href),o=va(p).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Qa(o.href);var m=va(p).hoistableStyles,A=m.get(n);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,A),(m=p.querySelector(bo(n)))&&!m._p&&(A.instance=m,A.state.loading=5),Dn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Dn.set(n,o),m||ax(p,n,o,A.state))),s&&u===null)throw Error(i(528,""));return A}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Za(o),o=va(p).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Qa(n){return'href="'+An(n)+'"'}function bo(n){return'link[rel="stylesheet"]['+n+"]"}function Jy(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function ax(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Pe(s,"link",o),Ce(s),n.head.appendChild(s))}function Za(n){return'[src="'+An(n)+'"]'}function vo(n){return"script[async]"+n}function tb(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+An(o.href)+'"]');if(u)return s.instance=u,Ce(u),u;var p=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Ce(u),Pe(u,"style",p),wc(u,o.precedence,n),s.instance=u;case"stylesheet":p=Qa(o.href);var m=n.querySelector(bo(p));if(m)return s.state.loading|=4,s.instance=m,Ce(m),m;u=Jy(o),(p=Dn.get(p))&&kd(u,p),m=(n.ownerDocument||n).createElement("link"),Ce(m);var A=m;return A._p=new Promise(function(T,N){A.onload=T,A.onerror=N}),Pe(m,"link",u),s.state.loading|=4,wc(m,o.precedence,n),s.instance=m;case"script":return m=Za(o.src),(p=n.querySelector(vo(m)))?(s.instance=p,Ce(p),p):(u=o,(p=Dn.get(m))&&(u=y({},o),Ld(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),Ce(p),Pe(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,wc(u,o.precedence,n));return s.instance}function wc(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,m=p,A=0;A<u.length;A++){var T=u[A];if(T.dataset.precedence===s)m=T;else if(m!==p)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function kd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Ld(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Ac=null;function eb(n,s,o){if(Ac===null){var u=new Map,p=Ac=new Map;p.set(o,u)}else p=Ac,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),p=0;p<o.length;p++){var m=o[p];if(!(m[Or]||m[Zt]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var A=m.getAttribute(s)||"";A=n+A;var T=u.get(A);T?T.push(m):u.set(A,[m])}}return u}function nb(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function rx(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function ib(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function ox(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=Qa(u.href),m=s.querySelector(bo(p));if(m){s=m._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Sc.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=m,Ce(m);return}m=s.ownerDocument||s,u=Jy(u),(p=Dn.get(p))&&kd(u,p),m=m.createElement("link"),Ce(m);var A=m;A._p=new Promise(function(T,N){A.onload=T,A.onerror=N}),Pe(m,"link",u),o.instance=m}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Sc.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Od=0;function lx(n,s){return n.stylesheets&&n.count===0&&_c(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&_c(n,n.stylesheets),n.unsuspend){var m=n.unsuspend;n.unsuspend=null,m()}},6e4+s);0<n.imgBytes&&Od===0&&(Od=62500*HS());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&_c(n,n.stylesheets),n.unsuspend)){var m=n.unsuspend;n.unsuspend=null,m()}},(n.imgBytes>Od?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_c(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var xc=null;function _c(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,xc=new Map,s.forEach(cx,n),xc=null,Sc.call(n))}function cx(n,s){if(!(s.state.loading&4)){var o=xc.get(n);if(o)var u=o.get(null);else{o=new Map,xc.set(n,o);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<p.length;m++){var A=p[m];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(o.set(A.dataset.precedence,A),u=A)}u&&o.set(null,u)}p=s.instance,A=p.getAttribute("data-precedence"),m=o.get(A)||u,m===u&&o.set(null,p),o.set(A,p),this.count++,u=Sc.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),m?m.parentNode.insertBefore(p,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var wo={$$typeof:R,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function ux(n,s,o,u,p,m,A,T,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lr(0),this.hiddenUpdates=Lr(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=m,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function sb(n,s,o,u,p,m,A,T,N,z,$,X){return n=new ux(n,s,o,A,N,z,$,X,T),s=1,m===!0&&(s|=24),m=un(3,null,null,s),n.current=m,m.stateNode=n,s=fh(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:o,cache:s},yh(m),n}function ab(n){return n?(n=Da,n):Da}function rb(n,s,o,u,p,m){p=ab(p),u.context===null?u.context=p:u.pendingContext=p,u=Zi(s),u.payload={element:o},m=m===void 0?null:m,m!==null&&(u.callback=m),o=Ji(n,u,s),o!==null&&(nn(o,n,s),Qr(o,n,s))}function ob(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Id(n,s){ob(n,s),(n=n.alternate)&&ob(n,s)}function lb(n){if(n.tag===13||n.tag===31){var s=js(n,67108864);s!==null&&nn(s,n,67108864),Id(n,67108864)}}function cb(n){if(n.tag===13||n.tag===31){var s=gn();s=_e(s);var o=js(n,s);o!==null&&nn(o,n,s),Id(n,s)}}var Ec=!0;function hx(n,s,o,u){var p=k.T;k.T=null;var m=U.p;try{U.p=2,Pd(n,s,o,u)}finally{U.p=m,k.T=p}}function dx(n,s,o,u){var p=k.T;k.T=null;var m=U.p;try{U.p=8,Pd(n,s,o,u)}finally{U.p=m,k.T=p}}function Pd(n,s,o,u){if(Ec){var p=jd(u);if(p===null)Sd(n,s,u,Tc,o),hb(n,u);else if(px(p,n,s,o,u))u.stopPropagation();else if(hb(n,u),s&4&&-1<fx.indexOf(n)){for(;p!==null;){var m=ba(p);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var A=ui(m.pendingLanes);if(A!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;A;){var N=1<<31-qe(A);T.entanglements[1]|=N,A&=~N}Kn(m),(Bt&6)===0&&(lc=Ue()+500,po(0))}}break;case 31:case 13:T=js(m,2),T!==null&&nn(T,m,2),uc(),Id(m,2)}if(m=jd(u),m===null&&Sd(n,s,u,Tc,o),m===p)break;p=m}p!==null&&u.stopPropagation()}else Sd(n,s,u,null,o)}}function jd(n){return n=Uu(n),Bd(n)}var Tc=null;function Bd(n){if(Tc=null,n=ya(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Tc=n,null}function ub(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Tp()){case ua:return 2;case yl:return 8;case ha:case kr:return 32;case qn:return 268435456;default:return 32}default:return 32}}var Ud=!1,us=null,hs=null,ds=null,Ao=new Map,So=new Map,fs=[],fx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hb(n,s){switch(n){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":Ao.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(s.pointerId)}}function xo(n,s,o,u,p,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:m,targetContainers:[p]},s!==null&&(s=ba(s),s!==null&&lb(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function px(n,s,o,u,p){switch(s){case"focusin":return us=xo(us,n,s,o,u,p),!0;case"dragenter":return hs=xo(hs,n,s,o,u,p),!0;case"mouseover":return ds=xo(ds,n,s,o,u,p),!0;case"pointerover":var m=p.pointerId;return Ao.set(m,xo(Ao.get(m)||null,n,s,o,u,p)),!0;case"gotpointercapture":return m=p.pointerId,So.set(m,xo(So.get(m)||null,n,s,o,u,p)),!0}return!1}function db(n){var s=ya(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,fe(n.priority,function(){cb(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,fe(n.priority,function(){cb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Cc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=jd(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Bu=u,o.target.dispatchEvent(u),Bu=null}else return s=ba(o),s!==null&&lb(s),n.blockedOn=o,!1;s.shift()}return!0}function fb(n,s,o){Cc(n)&&o.delete(s)}function gx(){Ud=!1,us!==null&&Cc(us)&&(us=null),hs!==null&&Cc(hs)&&(hs=null),ds!==null&&Cc(ds)&&(ds=null),Ao.forEach(fb),So.forEach(fb)}function Rc(n,s){n.blockedOn===s&&(n.blockedOn=null,Ud||(Ud=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,gx)))}var Dc=null;function pb(n){Dc!==n&&(Dc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Dc===n&&(Dc=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(Bd(u||o)===null)continue;break}var m=ba(o);m!==null&&(n.splice(s,3),s-=3,jh(m,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function Ja(n){function s(N){return Rc(N,n)}us!==null&&Rc(us,n),hs!==null&&Rc(hs,n),ds!==null&&Rc(ds,n),Ao.forEach(s),So.forEach(s);for(var o=0;o<fs.length;o++){var u=fs[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<fs.length&&(o=fs[0],o.blockedOn===null);)db(o),o.blockedOn===null&&fs.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],m=o[u+1],A=p[Fe]||null;if(typeof m=="function")A||pb(o);else if(A){var T=null;if(m&&m.hasAttribute("formAction")){if(p=m,A=m[Fe]||null)T=A.formAction;else if(Bd(p)!==null)continue}else T=A.action;typeof T=="function"?o[u+1]=T:(o.splice(u,3),u-=3),pb(o)}}}function gb(){function n(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function Fd(n){this._internalRoot=n}Nc.prototype.render=Fd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=gn();rb(o,u,n,s,null,null)},Nc.prototype.unmount=Fd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;rb(n.current,2,null,n,null,null),uc(),s[ma]=null}};function Nc(n){this._internalRoot=n}Nc.prototype.unstable_scheduleHydration=function(n){if(n){var s=ae();n={blockedOn:null,target:n,priority:s};for(var o=0;o<fs.length&&s!==0&&s<fs[o].priority;o++);fs.splice(o,0,n),o===0&&db(n)}};var mb=t.version;if(mb!=="19.2.4")throw Error(i(527,mb,"19.2.4"));U.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var mx={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{qi=Mc.inject(mx),Ve=Mc}catch{}}return Eo.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",p=xm,m=_m,A=Em;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=sb(n,1,!1,null,null,o,u,null,p,m,A,gb),n[ma]=s.current,Ad(n),new Fd(s)},Eo.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,p="",m=xm,A=_m,T=Em,N=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError),o.formState!==void 0&&(N=o.formState)),s=sb(n,1,!0,s,o??null,u,p,N,m,A,T,gb),s.context=ab(null),o=s.current,u=gn(),u=_e(u),p=Zi(u),p.callback=null,Ji(o,p,u),o=u,s.current.lanes=o,ks(s,o),Kn(s),n[ma]=s.current,Ad(n),new Nc(s)},Eo.version="19.2.4",Eo}var Rb;function Tx(){if(Rb)return Vd.exports;Rb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Vd.exports=Ex(),Vd.exports}var Cx=Tx();const Rx=K0(Cx);var Db="popstate";function Dx(r={}){function t(i,a){let{pathname:l,search:c,hash:h}=i.location;return mf("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Ho(a)}return Mx(t,e,null,r)}function ce(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function ri(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Nx(){return Math.random().toString(36).substring(2,10)}function Nb(r,t){return{usr:r.state,key:r.key,idx:t}}function mf(r,t,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?vr(t):t,state:e,key:t&&t.key||i||Nx()}}function Ho({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function vr(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substring(i),r=r.substring(0,i)),r&&(t.pathname=r)}return t}function Mx(r,t,e,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,h="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function y(){h="POP";let _=g(),E=_==null?null:_-f;f=_,d&&d({action:h,location:S.location,delta:E})}function b(_,E){h="PUSH";let C=mf(S.location,_,E);f=g()+1;let R=Nb(C,f),M=S.createHref(C);try{c.pushState(R,"",M)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(M)}l&&d&&d({action:h,location:S.location,delta:1})}function w(_,E){h="REPLACE";let C=mf(S.location,_,E);f=g();let R=Nb(C,f),M=S.createHref(C);c.replaceState(R,"",M),l&&d&&d({action:h,location:S.location,delta:0})}function x(_){return kx(_)}let S={get action(){return h},get location(){return r(a,c)},listen(_){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Db,y),d=_,()=>{a.removeEventListener(Db,y),d=null}},createHref(_){return t(a,_)},createURL:x,encodeLocation(_){let E=x(_);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:w,go(_){return c.go(_)}};return S}function kx(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),ce(e,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Ho(r);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function Q0(r,t,e="/"){return Lx(r,t,e,!1)}function Lx(r,t,e,i){let a=typeof t=="string"?vr(t):t,l=Pi(a.pathname||"/",e);if(l==null)return null;let c=Z0(r);Ox(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=qx(l);h=Gx(c[d],f,i)}return h}function Z0(r,t=[],e=[],i="",a=!1){let l=(c,h,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;ce(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let y=Ii([i,g.relativePath]),b=e.concat(g);c.children&&c.children.length>0&&(ce(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),Z0(c.children,t,b,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:zx(y,c.index),routesMeta:b})};return r.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let d of J0(c.path))l(c,h,!0,d)}),t}function J0(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=J0(i.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...c),h.map(d=>r.startsWith("/")&&d===""?"/":d)}function Ox(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:Hx(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var Ix=/^:[\w-]+$/,Px=3,jx=2,Bx=1,Ux=10,Fx=-2,Mb=r=>r==="*";function zx(r,t){let e=r.split("/"),i=e.length;return e.some(Mb)&&(i+=Fx),t&&(i+=jx),e.filter(a=>!Mb(a)).reduce((a,l)=>a+(Ix.test(l)?Px:l===""?Bx:Ux),i)}function Hx(r,t){return r.length===t.length&&r.slice(0,-1).every((i,a)=>i===t[a])?r[r.length-1]-t[t.length-1]:0}function Gx(r,t,e=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=l==="/"?t:t.slice(l.length)||"/",y=tu({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),b=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=tu({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:Ii([l,y.pathname]),pathnameBase:Wx(Ii([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=Ii([l,y.pathnameBase]))}return c}function tu(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=Vx(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:y},b)=>{if(g==="*"){let x=h[b]||"";c=l.slice(0,l.length-x.length).replace(/(.)\/+$/,"$1")}const w=h[b];return y&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:r}}function Vx(r,t=!1,e=!0){ri(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function qx(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ri(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Pi(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}var $x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Yx(r,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof r=="string"?vr(r):r,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=kb(e.substring(1),"/"):l=kb(e,t)):l=t,{pathname:l,search:Kx(i),hash:Qx(a)}}function kb(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Xd(r,t,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Xx(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function tv(r){let t=Xx(r);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function ev(r,t,e,i=!1){let a;typeof r=="string"?a=vr(r):(a={...r},ce(!a.pathname||!a.pathname.includes("?"),Xd("?","pathname","search",a)),ce(!a.pathname||!a.pathname.includes("#"),Xd("#","pathname","hash",a)),ce(!a.search||!a.search.includes("#"),Xd("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=e;else{let y=t.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}h=y>=0?t[y]:"/"}let d=Yx(a,h),f=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ii=r=>r.join("/").replace(/\/\/+/g,"/"),Wx=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Kx=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Qx=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Zx=class{constructor(r,t,e,i=!1){this.status=r,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function Jx(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function t_(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function iv(r,t){let e=r;if(typeof e!="string"||!$x.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,a=!1;if(nv)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),h=Pi(c.pathname,t);c.origin===l.origin&&h!=null?e=h+c.search+c.hash:a=!0}catch{ri(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var sv=["POST","PUT","PATCH","DELETE"];new Set(sv);var e_=["GET",...sv];new Set(e_);var wr=I.createContext(null);wr.displayName="DataRouter";var fu=I.createContext(null);fu.displayName="DataRouterState";var n_=I.createContext(!1),av=I.createContext({isTransitioning:!1});av.displayName="ViewTransition";var i_=I.createContext(new Map);i_.displayName="Fetchers";var s_=I.createContext(null);s_.displayName="Await";var On=I.createContext(null);On.displayName="Navigation";var Jo=I.createContext(null);Jo.displayName="Location";var oi=I.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var zf=I.createContext(null);zf.displayName="RouteError";var rv="REACT_ROUTER_ERROR",a_="REDIRECT",r_="ROUTE_ERROR_RESPONSE";function o_(r){if(r.startsWith(`${rv}:${a_}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function l_(r){if(r.startsWith(`${rv}:${r_}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Zx(t.status,t.statusText,t.data)}catch{}}function c_(r,{relative:t}={}){ce(tl(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=I.useContext(On),{hash:a,pathname:l,search:c}=el(r,{relative:t}),h=l;return e!=="/"&&(h=l==="/"?e:Ii([e,l])),i.createHref({pathname:h,search:c,hash:a})}function tl(){return I.useContext(Jo)!=null}function li(){return ce(tl(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(Jo).location}var ov="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function lv(r){I.useContext(On).static||I.useLayoutEffect(r)}function ra(){let{isDataRoute:r}=I.useContext(oi);return r?S_():u_()}function u_(){ce(tl(),"useNavigate() may be used only in the context of a <Router> component.");let r=I.useContext(wr),{basename:t,navigator:e}=I.useContext(On),{matches:i}=I.useContext(oi),{pathname:a}=li(),l=JSON.stringify(tv(i)),c=I.useRef(!1);return lv(()=>{c.current=!0}),I.useCallback((d,f={})=>{if(ri(c.current,ov),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=ev(d,JSON.parse(l),a,f.relative==="path");r==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ii([t,g.pathname])),(f.replace?e.replace:e.push)(g,f.state,f)},[t,e,l,a,r])}I.createContext(null);function cv(){let{matches:r}=I.useContext(oi),t=r[r.length-1];return t?t.params:{}}function el(r,{relative:t}={}){let{matches:e}=I.useContext(oi),{pathname:i}=li(),a=JSON.stringify(tv(e));return I.useMemo(()=>ev(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function h_(r,t){return uv(r,t)}function uv(r,t,e,i,a){ce(tl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=I.useContext(On),{matches:c}=I.useContext(oi),h=c[c.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",y=h&&h.route;{let C=y&&y.path||"";dv(f,!y||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=li(),w;if(t){let C=typeof t=="string"?vr(t):t;ce(g==="/"||C.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${C.pathname}" was given in the \`location\` prop.`),w=C}else w=b;let x=w.pathname||"/",S=x;if(g!=="/"){let C=g.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=Q0(r,{pathname:S});ri(y||_!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ri(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=m_(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:Ii([g,l.encodeLocation?l.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?g:Ii([g,l.encodeLocation?l.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),c,e,i,a);return t&&E?I.createElement(Jo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},E):E}function d_(){let r=A_(),t=Jx(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:l},"ErrorBoundary")," or"," ",I.createElement("code",{style:l},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),e?I.createElement("pre",{style:a},e):null,c)}var f_=I.createElement(d_,null),hv=class extends I.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const e=l_(r.digest);e&&(r=e)}let t=r!==void 0?I.createElement(oi.Provider,{value:this.props.routeContext},I.createElement(zf.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?I.createElement(p_,{error:r},t):t}};hv.contextType=n_;var Wd=new WeakMap;function p_({children:r,error:t}){let{basename:e}=I.useContext(On);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=o_(t.digest);if(i){let a=Wd.get(t);if(a)throw a;let l=iv(i.location,e);if(nv&&!Wd.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Wd.set(t,c),c}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function g_({routeContext:r,match:t,children:e}){let i=I.useContext(wr);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(oi.Provider,{value:r},e)}function m_(r,t=[],e=null,i=null,a=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let l=r,c=e?.errors;if(c!=null){let g=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);ce(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(e)for(let g=0;g<l.length;g++){let y=l[g];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=g),y.route.id){let{loaderData:b,errors:w}=e,x=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||x){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let f=e&&i?(g,y)=>{i(g,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:t_(e.matches),errorInfo:y})}:void 0;return l.reduceRight((g,y,b)=>{let w,x=!1,S=null,_=null;e&&(w=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||f_,h&&(d<0&&b===0?(dv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,_=null):d===b&&(x=!0,_=y.route.hydrateFallbackElement||null)));let E=t.concat(l.slice(0,b+1)),C=()=>{let R;return w?R=S:x?R=_:y.route.Component?R=I.createElement(y.route.Component,null):y.route.element?R=y.route.element:R=g,I.createElement(g_,{match:y,routeContext:{outlet:g,matches:E,isDataRoute:e!=null},children:R})};return e&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?I.createElement(hv,{location:e.location,revalidation:e.revalidation,component:S,error:w,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):C()},null)}function Hf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function y_(r){let t=I.useContext(wr);return ce(t,Hf(r)),t}function b_(r){let t=I.useContext(fu);return ce(t,Hf(r)),t}function v_(r){let t=I.useContext(oi);return ce(t,Hf(r)),t}function Gf(r){let t=v_(r),e=t.matches[t.matches.length-1];return ce(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function w_(){return Gf("useRouteId")}function A_(){let r=I.useContext(zf),t=b_("useRouteError"),e=Gf("useRouteError");return r!==void 0?r:t.errors?.[e]}function S_(){let{router:r}=y_("useNavigate"),t=Gf("useNavigate"),e=I.useRef(!1);return lv(()=>{e.current=!0}),I.useCallback(async(a,l={})=>{ri(e.current,ov),e.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:t,...l}))},[r,t])}var Lb={};function dv(r,t,e){!t&&!Lb[r]&&(Lb[r]=!0,ri(!1,e))}I.memo(x_);function x_({routes:r,future:t,state:e,onError:i}){return uv(r,void 0,e,i,t)}function an(r){ce(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function __({basename:r="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){ce(!tl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[h,a,l,c]);typeof e=="string"&&(e=vr(e));let{pathname:f="/",search:g="",hash:y="",state:b=null,key:w="default"}=e,x=I.useMemo(()=>{let S=Pi(f,h);return S==null?null:{location:{pathname:S,search:g,hash:y,state:b,key:w},navigationType:i}},[h,f,g,y,b,w,i]);return ri(x!=null,`<Router basename="${h}"> is not able to match the URL "${f}${g}${y}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:I.createElement(On.Provider,{value:d},I.createElement(Jo.Provider,{children:t,value:x}))}function E_({children:r,location:t}){return h_(yf(r),t)}function yf(r,t=[]){let e=[];return I.Children.forEach(r,(i,a)=>{if(!I.isValidElement(i))return;let l=[...t,a];if(i.type===I.Fragment){e.push.apply(e,yf(i.props.children,l));return}ce(i.type===an,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ce(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=yf(i.props.children,l)),e.push(c)}),e}var $c="get",Yc="application/x-www-form-urlencoded";function pu(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function T_(r){return pu(r)&&r.tagName.toLowerCase()==="button"}function C_(r){return pu(r)&&r.tagName.toLowerCase()==="form"}function R_(r){return pu(r)&&r.tagName.toLowerCase()==="input"}function D_(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function N_(r,t){return r.button===0&&(!t||t==="_self")&&!D_(r)}var kc=null;function M_(){if(kc===null)try{new FormData(document.createElement("form"),0),kc=!1}catch{kc=!0}return kc}var k_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kd(r){return r!=null&&!k_.has(r)?(ri(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Yc}"`),null):r}function L_(r,t){let e,i,a,l,c;if(C_(r)){let h=r.getAttribute("action");i=h?Pi(h,t):null,e=r.getAttribute("method")||$c,a=Kd(r.getAttribute("enctype"))||Yc,l=new FormData(r)}else if(T_(r)||R_(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||h.getAttribute("action");if(i=d?Pi(d,t):null,e=r.getAttribute("formmethod")||h.getAttribute("method")||$c,a=Kd(r.getAttribute("formenctype"))||Kd(h.getAttribute("enctype"))||Yc,l=new FormData(h,r),!M_()){let{name:f,type:g,value:y}=r;if(g==="image"){let b=f?`${f}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else f&&l.append(f,y)}}else{if(pu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=$c,i=null,a=Yc,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Vf(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function O_(r,t,e,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&Pi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function I_(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P_(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function j_(r,t,e){let i=await Promise.all(r.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await I_(l,e);return c.links?c.links():[]}return[]}));return z_(i.flat(1).filter(P_).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ob(r,t,e,i,a,l){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,h=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,f)=>c(d,f)||h(d,f)):l==="data"?t.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function B_(r,t,{includeHydrateFallback:e}={}){return U_(r.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function U_(r){return[...new Set(r)]}function F_(r){let t={},e=Object.keys(r).sort();for(let i of e)t[i]=r[i];return t}function z_(r,t){let e=new Set;return new Set(t),r.reduce((i,a)=>{let l=JSON.stringify(F_(a));return e.has(l)||(e.add(l),i.push({key:l,link:a})),i},[])}function fv(){let r=I.useContext(wr);return Vf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function H_(){let r=I.useContext(fu);return Vf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var qf=I.createContext(void 0);qf.displayName="FrameworkContext";function pv(){let r=I.useContext(qf);return Vf(r,"You must render this element inside a <HydratedRouter> element"),r}function G_(r,t){let e=I.useContext(qf),[i,a]=I.useState(!1),[l,c]=I.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:y}=t,b=I.useRef(null);I.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let S=E=>{E.forEach(C=>{c(C.isIntersecting)})},_=new IntersectionObserver(S,{threshold:.5});return b.current&&_.observe(b.current),()=>{_.disconnect()}}},[r]),I.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let w=()=>{a(!0)},x=()=>{a(!1),c(!1)};return e?r!=="intent"?[l,b,{}]:[l,b,{onFocus:To(h,w),onBlur:To(d,x),onMouseEnter:To(f,w),onMouseLeave:To(g,x),onTouchStart:To(y,w)}]:[!1,b,{}]}function To(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function V_({page:r,...t}){let{router:e}=fv(),i=I.useMemo(()=>Q0(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?I.createElement($_,{page:r,matches:i,...t}):null}function q_(r){let{manifest:t,routeModules:e}=pv(),[i,a]=I.useState([]);return I.useEffect(()=>{let l=!1;return j_(r,t,e).then(c=>{l||a(c)}),()=>{l=!0}},[r,t,e]),i}function $_({page:r,matches:t,...e}){let i=li(),{future:a,manifest:l,routeModules:c}=pv(),{basename:h}=fv(),{loaderData:d,matches:f}=H_(),g=I.useMemo(()=>Ob(r,t,f,l,i,"data"),[r,t,f,l,i]),y=I.useMemo(()=>Ob(r,t,f,l,i,"assets"),[r,t,f,l,i]),b=I.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let S=new Set,_=!1;if(t.forEach(C=>{let R=l.routes[C.route.id];!R||!R.hasLoader||(!g.some(M=>M.route.id===C.route.id)&&C.route.id in d&&c[C.route.id]?.shouldRevalidate||R.hasClientLoader?_=!0:S.add(C.route.id))}),S.size===0)return[];let E=O_(r,h,a.unstable_trailingSlashAwareDataRequests,"data");return _&&S.size>0&&E.searchParams.set("_routes",t.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[h,a.unstable_trailingSlashAwareDataRequests,d,i,l,g,t,r,c]),w=I.useMemo(()=>B_(y,l),[y,l]),x=q_(y);return I.createElement(I.Fragment,null,b.map(S=>I.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),w.map(S=>I.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),x.map(({key:S,link:_})=>I.createElement("link",{key:S,nonce:e.nonce,..._,crossOrigin:_.crossOrigin??e.crossOrigin})))}function Y_(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var X_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X_&&(window.__reactRouterVersion="7.13.0")}catch{}function W_({basename:r,children:t,unstable_useTransitions:e,window:i}){let a=I.useRef();a.current==null&&(a.current=Dx({window:i,v5Compat:!0}));let l=a.current,[c,h]=I.useState({action:l.action,location:l.location}),d=I.useCallback(f=>{e===!1?h(f):I.startTransition(()=>h(f))},[e]);return I.useLayoutEffect(()=>l.listen(d),[l,d]),I.createElement(__,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var gv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yt=I.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:h,target:d,to:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...w},x){let{basename:S,unstable_useTransitions:_}=I.useContext(On),E=typeof f=="string"&&gv.test(f),C=iv(f,S);f=C.to;let R=c_(f,{relative:a}),[M,O,P]=G_(i,w),B=J_(f,{replace:c,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:_});function W(et){t&&t(et),et.defaultPrevented||B(et)}let K=I.createElement("a",{...w,...P,href:C.absoluteURL||R,onClick:C.isExternal||l?t:W,ref:Y_(x,O),target:d,"data-discover":!E&&e==="render"?"true":void 0});return M&&!E?I.createElement(I.Fragment,null,K,I.createElement(V_,{page:R})):K});Yt.displayName="Link";var K_=I.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:h,children:d,...f},g){let y=el(c,{relative:f.relative}),b=li(),w=I.useContext(fu),{navigator:x,basename:S}=I.useContext(On),_=w!=null&&sE(y)&&h===!0,E=x.encodeLocation?x.encodeLocation(y).pathname:y.pathname,C=b.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(C=C.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&S&&(R=Pi(R,S)||R);const M=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=C===E||!a&&C.startsWith(E)&&C.charAt(M)==="/",P=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),B={isActive:O,isPending:P,isTransitioning:_},W=O?t:void 0,K;typeof i=="function"?K=i(B):K=[i,O?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let et=typeof l=="function"?l(B):l;return I.createElement(Yt,{...f,"aria-current":W,className:K,ref:g,style:et,to:c,viewTransition:h},typeof d=="function"?d(B):d)});K_.displayName="NavLink";var Q_=I.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:l,method:c=$c,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b,...w},x)=>{let{unstable_useTransitions:S}=I.useContext(On),_=nE(),E=iE(h,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",R=typeof h=="string"&&gv.test(h),M=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let P=O.nativeEvent.submitter,B=P?.getAttribute("formmethod")||c,W=()=>_(P||O.currentTarget,{fetcherKey:t,method:B,navigate:e,replace:a,state:l,relative:f,preventScrollReset:g,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&e!==!1?I.startTransition(()=>W()):W()};return I.createElement("form",{ref:x,method:C,action:E,onSubmit:i?d:M,...w,"data-discover":!R&&r==="render"?"true":void 0})});Q_.displayName="Form";function Z_(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mv(r){let t=I.useContext(wr);return ce(t,Z_(r)),t}function J_(r,{target:t,replace:e,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let f=ra(),g=li(),y=el(r,{relative:l});return I.useCallback(b=>{if(N_(b,t)){b.preventDefault();let w=e!==void 0?e:Ho(g)===Ho(y),x=()=>f(r,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?I.startTransition(()=>x()):x()}},[g,f,y,e,i,t,r,a,l,c,h,d])}var tE=0,eE=()=>`__${String(++tE)}__`;function nE(){let{router:r}=mv("useSubmit"),{basename:t}=I.useContext(On),e=w_(),i=r.fetch,a=r.navigate;return I.useCallback(async(l,c={})=>{let{action:h,method:d,encType:f,formData:g,body:y}=L_(l,t);if(c.navigate===!1){let b=c.fetcherKey||eE();await i(b,e,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,t,e])}function iE(r,{relative:t}={}){let{basename:e}=I.useContext(On),i=I.useContext(oi);ce(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...el(r||".",{relative:t})},c=li();if(r==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let g=h.toString();l.search=g?`?${g}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:Ii([e,l.pathname])),Ho(l)}function sE(r,{relative:t}={}){let e=I.useContext(av);ce(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=mv("useViewTransitionState"),a=el(r,{relative:t});if(!e.isTransitioning)return!1;let l=Pi(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=Pi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return tu(a.pathname,c)!=null||tu(a.pathname,l)!=null}const yv="data:image/svg+xml,%3csvg%20width='630'%20height='718'%20viewBox='0%200%20630%20718'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M507.588%20467.968V382.194L437.065%20422.437V508.279L507.588%20467.968Z'%20fill='%2315D6E3'/%3e%3cpath%20d='M507.588%20247.995L434.559%20206.201L315.313%20274.417L196.068%20206.201L123.038%20247.995V323.966L244.293%20393.349V537.261L315.313%20577.888L386.334%20537.261V393.349L507.588%20323.966V247.995Z'%20fill='%233A36FF'/%3e%3cpath%20d='M630.006%20254.748V178.525L557.185%20136.592L486.298%20177.354L559.119%20219.288V295.511L630.006%20254.748Z'%20fill='%233A36FF'/%3e%3cpath%20d='M71.5074%20295.511V219.288L144.328%20177.354L73.4419%20136.592L0.620972%20178.525V254.748L71.5074%20295.511Z'%20fill='%233A36FF'/%3e%3cpath%20d='M123.038%20467.968L193.561%20508.279V422.437L123.038%20382.194V467.968Z'%20fill='%233998FF'/%3e%3cpath%20d='M386.502%20594.962L315.313%20635.677L244.125%20594.962V676.392L315.313%20717.107L386.502%20676.392V594.962Z'%20fill='%233A36FF'/%3e%3cpath%20d='M383.84%20177.307L315.313%20137.905L246.786%20177.307L315.313%20216.708L383.84%20177.307Z'%20fill='%238A88FF'/%3e%3cpath%20d='M558.695%20353.18V496.979L437.065%20566.307V647.497L630.006%20537.574V312.585L558.695%20353.18Z'%20fill='%2315D7E3'/%3e%3cpath%20d='M193.561%20566.307L71.931%20496.979V353.18L0.620972%20312.585V537.574L193.561%20647.497V566.307Z'%20fill='%233998FF'/%3e%3cpath%20d='M195.686%20148.412L315.313%2080.7477L434.94%20148.412L506.258%20108.072L315.313%200L124.369%20108.072L195.686%20148.412Z'%20fill='%238A88FF'/%3e%3c/svg%3e",aE=["Northwind Legal","Acme Ventures","Solaris Health","Beacon Realty","Atlas Finance","Bluebird Energy"],rE=[{label:"Docs decoded",value:"42k+"},{label:"Average time saved",value:"3.4 hrs"},{label:"Risk flags identified",value:"128k+"}],oE=[{title:"Upload or open a PDF",description:"Drop in a contract, policy, or report. No setup required."},{title:"Decode with AI",description:"We translate the text, highlight obligations, and surface risks."},{title:"Act with clarity",description:"Export notes or send for signature only when you are ready."}],lE=[{title:"Plain-language summaries",description:"Every section is rewritten into clear, actionable language."},{title:"Risk and obligation flags",description:"Spot penalties, expiry traps, and one-sided clauses fast."},{title:"Side-by-side evidence",description:"See the original text next to the AI explanation."},{title:"Shareable decision reports",description:"Create a clean, board-ready summary in one click."},{title:"Structured highlights",description:"Tag sections as financial, legal, or operational."},{title:"Secure by design",description:"Free mode never stores files. Pro adds private vaults."}],cE=[{title:"Procurement teams",description:"Speed up vendor reviews without missing hidden liabilities."},{title:"Startup founders",description:"Understand term sheets and SaaS agreements fast."},{title:"HR & people ops",description:"Review contracts, handbooks, and compliance updates with confidence."},{title:"Property managers",description:"Decode leases, maintenance agreements, and building policies."}],uE=[{name:"Starter",description:"For occasional checks and quick clarity.",monthlyPrice:0,annualPrice:0,cta:"Start free",highlights:["3 document decodes / month","No storage (privacy-first)","Basic risk flags"]},{name:"Pro",description:"For teams reviewing docs weekly.",monthlyPrice:29,annualPrice:24,cta:"Upgrade to Pro",isPopular:!0,highlights:["Unlimited document decodes","Private doc vaults","Advanced risk mapping","Shareable reports"]},{name:"Enterprise",description:"For regulated or high-volume workflows.",monthlyPrice:79,annualPrice:65,cta:"Talk to sales",highlights:["Custom AI workflows","Dedicated security review","SSO & audit logs","Priority support"]}],hE=[{question:"Can I use DecoDocs without uploading a file?",answer:"Yes. The free workflow lets you open a PDF locally with no storage."},{question:"Do you replace legal advice?",answer:"No. We provide clarity, risk highlighting, and summaries to speed review."},{question:"What happens to my documents?",answer:"Free mode does not store files. Pro stores documents in a private vault you control."},{question:"Can I export my insights?",answer:"Yes. Pro exports a summary report and key obligations list."}],Qd={product:[{label:"How it works",href:"#how-it-works"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",href:"#pricing"}],company:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"}],legal:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"}]},dE="0.1.0+1828381-2026-02-01T18:56:17.099Z",fE=()=>v.jsx("footer",{className:"border-t border-slate-200 bg-white px-6 py-12",children:v.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-10 md:grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr]",children:[v.jsxs("div",{className:"flex flex-col gap-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("img",{src:yv,alt:"DecoDocs",className:"h-10 w-10"}),v.jsxs("div",{children:[v.jsx("p",{className:"text-base font-semibold text-slate-900",children:"DecoDocs"}),v.jsx("p",{className:"text-xs text-slate-500",children:"Understand documents before you sign"})]})]}),v.jsx("p",{className:"text-sm text-slate-600",children:"Privacy-first document understanding by Snap Sign Pty Ltd."}),v.jsxs("p",{className:"text-xs text-slate-500",children:[" ",new Date().getFullYear()," Snap Sign Pty Ltd. All rights reserved."]}),v.jsxs("p",{className:"text-xs text-slate-400",children:["Version: ",dE]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Product"}),v.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Qd.product.map(r=>v.jsx("li",{className:"m-0",children:v.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r.href,children:r.label})},r.label))})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Company"}),v.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Qd.company.map(r=>v.jsx("li",{className:"m-0",children:v.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r.href,children:r.label})},r.label))})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Legal"}),v.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Qd.legal.map(r=>v.jsx("li",{className:"m-0",children:v.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r.href,children:r.label})},r.label))})]})]})}),gu=({onOpenPdf:r,children:t})=>v.jsx("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900",children:v.jsxs("div",{className:"relative overflow-hidden",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[v.jsx("div",{className:"absolute -top-32 -right-20 h-72 w-72 rounded-full bg-[#d8e6ff] blur-3xl opacity-60 animate-float-slow"}),v.jsx("div",{className:"absolute top-40 -left-24 h-72 w-72 rounded-full bg-[#fde4c7] blur-3xl opacity-50 animate-float-slow"})]}),v.jsx("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4",children:[v.jsxs(Yt,{to:"/",className:"flex items-center gap-3 text-lg font-semibold",children:[v.jsx("img",{src:yv,alt:"DecoDocs",className:"h-9 w-9"}),"DecoDocs"]}),v.jsxs("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:[v.jsx("a",{className:"hover:text-slate-900 transition",href:"#how-it-works",children:"How it works"}),v.jsx("a",{className:"hover:text-slate-900 transition",href:"#features",children:"Features"}),v.jsx("a",{className:"hover:text-slate-900 transition",href:"#use-cases",children:"Use cases"}),v.jsx("a",{className:"hover:text-slate-900 transition",href:"#pricing",children:"Pricing"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx(Yt,{to:"/view",className:"hidden rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:border-slate-300 md:inline-flex",children:"Launch app"}),v.jsx("button",{type:"button",onClick:r,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:-translate-y-0.5",children:"Open PDF"})]})]})}),v.jsx("main",{className:"relative z-10",children:t}),v.jsx(fE,{})]})}),pE=({onOpenPdf:r})=>v.jsx("section",{className:"px-6 pt-20 pb-16",children:v.jsxs("div",{className:"mx-auto grid w-full max-w-6xl items-center gap-12 lg:grid-cols-[1.1fr_0.9fr]",children:[v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsx("span",{className:"w-fit rounded-full border border-slate-200 bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Modern document intelligence"}),v.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-slate-900 md:text-5xl",children:"Decode documents before you sign them."}),v.jsx("p",{className:"text-lg text-slate-600",children:"DecoDocs turns dense PDFs into clear decisions with AI summaries, risk flags, and evidence-backed explanations."}),v.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[v.jsx("button",{type:"button",onClick:r,className:"rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-slate-900/25 transition hover:-translate-y-0.5",children:"Open a PDF"}),v.jsx(Yt,{to:"/view",className:"rounded-full border border-slate-300 bg-white px-6 py-3 text-sm font-semibold text-slate-700 shadow-sm",children:"View the app"})]}),v.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Free mode never stores files"]}),v.jsxs("span",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-900"}),"Pro adds private vaults"]})]})]}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute -left-6 top-6 h-24 w-24 rounded-2xl bg-[#fbd1b7] opacity-70"}),v.jsxs("div",{className:"relative rounded-3xl border border-white/60 bg-white/90 p-6 shadow-2xl shadow-slate-900/10",children:[v.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[v.jsx("span",{children:"Contract Review"}),v.jsx("span",{children:"12 pages"})]}),v.jsxs("div",{className:"mt-6 space-y-4",children:[v.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:v.jsxs("p",{className:"text-sm text-slate-800",children:[v.jsx("span",{className:"font-semibold",children:"Risk flagged:"})," Termination clause requires 90-day notice and carries a 3x fee."]})}),v.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white p-4",children:v.jsx("p",{className:"text-sm text-slate-600",children:"Plain language: You must give three months notice or pay a penalty equal to three months of fees."})}),v.jsx("div",{className:"rounded-2xl bg-slate-900 p-4 text-white",children:v.jsx("p",{className:"text-sm",children:"Suggested action: renegotiate the termination period or cap the penalty."})})]}),v.jsxs("div",{className:"mt-6 flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-3 text-xs text-slate-500",children:[v.jsx("span",{children:"AI decode complete"}),v.jsx("span",{className:"font-semibold text-slate-900",children:"Ready to review"})]})]})]})]})}),Ar=({eyebrow:r,title:t,description:e,align:i="center"})=>{const a=i==="left"?"items-start text-left":"items-center text-center";return v.jsxs("div",{className:`flex flex-col gap-3 ${a}`,children:[r?v.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:r}):null,v.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:t}),e?v.jsx("p",{className:"text-base md:text-lg text-slate-600 max-w-2xl",children:e}):null]})},gE=()=>v.jsx("section",{className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsx(Ar,{eyebrow:"Trusted teams",title:"Teams use DecoDocs to review faster",description:"From startups to procurement teams, we help busy leaders move faster without missing critical terms."}),v.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:rE.map(r=>v.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-lg shadow-slate-900/5",children:[v.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:r.value}),v.jsx("p",{className:"mt-2 text-sm text-slate-500",children:r.label})]},r.label))}),v.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-5 text-xs uppercase tracking-[0.2em] text-slate-400",children:aE.map(r=>v.jsx("span",{children:r},r))})]})}),mE=()=>v.jsx("section",{id:"how-it-works",className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsx(Ar,{eyebrow:"How it works",title:"Three steps to clarity",description:"No onboarding, no templates. Drop in a document and get structured insights within seconds.",align:"left"}),v.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:oE.map((r,t)=>v.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",t+1]}),v.jsx("span",{className:"text-xl",children:String(t+1).padStart(2,"0")})]}),v.jsx("h3",{className:"mt-6 text-xl font-semibold text-slate-900",children:r.title}),v.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),yE=()=>v.jsx("section",{id:"features",className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsx(Ar,{eyebrow:"Product",title:"Every insight you need to move faster",description:"Built for modern teams that need clarity, speed, and secure workflows."}),v.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:lE.map(r=>v.jsxs("div",{className:"group rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5 transition hover:-translate-y-1",children:[v.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white",children:v.jsx("span",{className:"text-xs font-semibold",children:"AI"})}),v.jsx("h3",{className:"mt-5 text-lg font-semibold text-slate-900",children:r.title}),v.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),bE=()=>v.jsx("section",{id:"use-cases",className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsx(Ar,{eyebrow:"Use cases",title:"Built for high-stakes decisions",description:"DecoDocs supports every team that needs clean answers before signing or committing.",align:"left"}),v.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:cE.map((r,t)=>v.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[v.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[v.jsx("span",{children:"Use case"}),v.jsx("span",{children:String(t+1).padStart(2,"0")})]}),v.jsx("h3",{className:"mt-5 text-xl font-semibold text-slate-900",children:r.title}),v.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),Ib=r=>r===0?"Free":`$${r}`,vE=()=>{const[r,t]=I.useState("monthly"),e=I.useMemo(()=>uE.map(i=>{const a=r==="monthly"?i.monthlyPrice:i.annualPrice;return{...i,price:a,label:r==="monthly"?`${Ib(a)}/mo`:`${Ib(a)}/mo`}}),[r]);return v.jsx("section",{id:"pricing",className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsxs("div",{className:"flex flex-col items-center justify-between gap-6 md:flex-row",children:[v.jsx(Ar,{eyebrow:"Pricing",title:"Simple plans that scale with your review workload",description:"Switch between monthly and annual billing. Annual plans include a discount for teams reviewing weekly.",align:"left"}),v.jsxs("div",{className:"flex items-center rounded-full border border-slate-200 bg-white p-1",children:[v.jsx("button",{type:"button",onClick:()=>t("monthly"),className:`rounded-full px-4 py-2 text-sm font-semibold ${r==="monthly"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Monthly"}),v.jsx("button",{type:"button",onClick:()=>t("annual"),className:`rounded-full px-4 py-2 text-sm font-semibold ${r==="annual"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Annual"})]})]}),v.jsx("div",{className:"grid gap-6 lg:grid-cols-3",children:e.map(i=>v.jsxs("div",{className:`relative flex h-full flex-col rounded-3xl border p-6 shadow-xl shadow-slate-900/5 ${i.isPopular?"border-slate-900 bg-slate-900 text-white":"border-slate-100 bg-white"}`,children:[i.isPopular?v.jsx("span",{className:"absolute -top-4 left-6 rounded-full bg-white px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-900",children:"Most popular"}):null,v.jsx("h3",{className:"text-xl font-semibold",children:i.name}),v.jsx("p",{className:`mt-2 text-sm ${i.isPopular?"text-white/80":"text-slate-500"}`,children:i.description}),v.jsxs("div",{className:"mt-6",children:[v.jsxs("div",{className:"flex items-end gap-2",children:[v.jsx("span",{className:"text-3xl font-semibold",children:i.label}),i.price>0?v.jsxs("span",{className:`text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:["billed ",r]}):null]}),r==="annual"&&i.price>0?v.jsx("p",{className:`mt-2 text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:"Save 20% with annual billing"}):null]}),v.jsx("ul",{className:"mt-6 space-y-3 text-sm",children:i.highlights.map(a=>v.jsxs("li",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-current"}),v.jsx("span",{children:a})]},a))}),v.jsx("button",{type:"button",className:`mt-8 w-full rounded-full px-4 py-3 text-sm font-semibold ${i.isPopular?"bg-white text-slate-900":"bg-slate-900 text-white"}`,children:i.cta})]},i.name))})]})})},wE=()=>{const[r,t]=I.useState(0);return v.jsx("section",{className:"px-6 py-16",children:v.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[v.jsx(Ar,{eyebrow:"FAQ",title:"Answers before you start",description:"Everything you need to know about privacy, storage, and how DecoDocs helps you decode faster.",align:"left"}),v.jsx("div",{className:"grid gap-4",children:hE.map((e,i)=>{const a=r===i;return v.jsxs("button",{type:"button",onClick:()=>t(a?-1:i),className:"rounded-3xl border border-slate-100 bg-white p-6 text-left shadow-lg shadow-slate-900/5",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-base font-semibold text-slate-900",children:e.question}),v.jsx("span",{className:"text-xl text-slate-500",children:a?"-":"+"})]}),a?v.jsx("p",{className:"mt-4 text-sm text-slate-600",children:e.answer}):null]},e.question)})})]})})},Pb=()=>{const r=ra(),t=I.useRef(null),e=()=>{t.current&&t.current.click()},i=a=>{const l=a.target.files?.[0];if(l){if(l.type!=="application/pdf"){alert("Please select a valid PDF file"),a.target.value="";return}window.gtag&&window.gtag("event","home_open_pdf_click",{event_category:"engagement",event_label:"landing_open_pdf"}),r("/view",{state:{document:{id:Date.now()+Math.random(),name:l.name,size:l.size,type:l.type,file:l}}}),a.target.value=""}};return v.jsxs(gu,{onOpenPdf:e,children:[v.jsx("input",{ref:t,type:"file",accept:".pdf,application/pdf",onChange:i,style:{display:"none"}}),v.jsx(pE,{onOpenPdf:e}),v.jsx(gE,{}),v.jsx(mE,{}),v.jsx(yE,{}),v.jsx(bE,{}),v.jsx(vE,{}),v.jsx(wE,{})]})},AE="modulepreload",SE=function(r){return"/"+r},jb={},$f=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");a=d(e.map(f=>{if(f=SE(f),f in jb)return;jb[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":AE,g||(b.as="script"),b.crossOrigin="",b.href=f,h&&b.setAttribute("nonce",h),document.head.appendChild(b),g)return new Promise((w,x)=>{b.addEventListener("load",w),b.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},xE=()=>{};var Bb={};const bv=function(r){const t=[];let e=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},_E=function(r){const t=[];let e=0,i=0;for(;e<r.length;){const a=r[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[e++],c=r[e++],h=r[e++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const l=r[e++],c=r[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},vv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,h=c?r[a+1]:0,d=a+2<r.length,f=d?r[a+2]:0,g=l>>2,y=(l&3)<<4|h>>4;let b=(h&15)<<2|f>>6,w=f&63;d||(w=64,c||(b=64)),i.push(e[g],e[y],e[b],e[w])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(bv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):_E(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=e[r.charAt(a++)],h=a<r.length?e[r.charAt(a)]:0;++a;const f=a<r.length?e[r.charAt(a)]:64;++a;const y=a<r.length?e[r.charAt(a)]:64;if(++a,l==null||h==null||f==null||y==null)throw new EE;const b=l<<2|h>>4;if(i.push(b),f!==64){const w=h<<4&240|f>>2;if(i.push(w),y!==64){const x=f<<6&192|y;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class EE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TE=function(r){const t=bv(r);return vv.encodeByteArray(t,!0)},wv=function(r){return TE(r).replace(/\./g,"")},Av=function(r){try{return vv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function CE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const RE=()=>CE().__FIREBASE_DEFAULTS__,DE=()=>{if(typeof process>"u"||typeof Bb>"u")return;const r=Bb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},NE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Av(r[1]);return t&&JSON.parse(t)},Yf=()=>{try{return xE()||RE()||DE()||NE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Sv=r=>Yf()?.emulatorHosts?.[r],ME=r=>{const t=Sv(r);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},xv=()=>Yf()?.config,_v=r=>Yf()?.[`_${r}`];class kE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function Sr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ev(r){return(await fetch(r,{credentials:"include"})).ok}const jo={};function LE(){const r={prod:[],emulator:[]};for(const t of Object.keys(jo))jo[t]?r.emulator.push(t):r.prod.push(t);return r}function OE(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let Ub=!1;function Tv(r,t){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||jo[r]===t||jo[r]||Ub)return;jo[r]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=LE().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,w){b.setAttribute("width","24"),b.setAttribute("id",w),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Ub=!0,c()},b}function g(b,w){b.setAttribute("id",w),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=OE(i),w=e("text"),x=document.getElementById(w)||document.createElement("span"),S=e("learnmore"),_=document.getElementById(S)||document.createElement("a"),E=e("preprendIcon"),C=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const R=b.element;h(R),g(_,S);const M=f();d(C,E),R.append(C,x,_,M),document.body.appendChild(R)}l?(x.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Ke(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ke())}function PE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function BE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UE(){const r=Ke();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function FE(){try{return typeof indexedDB=="object"}catch{return!1}}function zE(){return new Promise((r,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}const HE="FirebaseError";class Hi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=HE,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nl.prototype.create)}}class nl{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?GE(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Hi(a,h,i)}}function GE(r,t){return r.replace(VE,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const VE=/\{\$([^}]+)}/g;function qE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function pr(r,t){if(r===t)return!0;const e=Object.keys(r),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=r[a],c=t[a];if(Fb(l)&&Fb(c)){if(!pr(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Fb(r){return r!==null&&typeof r=="object"}function il(r){const t=[];for(const[e,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function ko(r){const t={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Lo(r){const t=r.indexOf("?");if(!t)return"";const e=r.indexOf("#",t);return r.substring(t,e>0?e:void 0)}function $E(r,t){const e=new YE(r,t);return e.subscribe.bind(e)}class YE{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");XE(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Zd),a.error===void 0&&(a.error=Zd),a.complete===void 0&&(a.complete=Zd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XE(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function Zd(){}function In(r){return r&&r._delegate?r._delegate:r}class ia{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Ks="[DEFAULT]";class WE{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new kE;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(QE(t))try{this.getOrInitializeService({instanceIdentifier:Ks})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=Ks){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ks){return this.instances.has(t)}getOptions(t=Ks){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&t(l,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:KE(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Ks){return this.component?this.component.multipleInstances?t:Ks:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KE(r){return r===Ks?void 0:r}function QE(r){return r.instantiationMode==="EAGER"}class ZE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new WE(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Wt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Wt||(Wt={}));const JE={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},t1=Wt.INFO,e1={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},n1=(r,t,...e)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=e1[t];if(a)console[a](`[${i}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Cv{constructor(t){this.name=t,this._logLevel=t1,this._logHandler=n1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...t),this._logHandler(this,Wt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...t),this._logHandler(this,Wt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...t),this._logHandler(this,Wt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...t),this._logHandler(this,Wt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...t),this._logHandler(this,Wt.ERROR,...t)}}const i1=(r,t)=>t.some(e=>r instanceof e);let zb,Hb;function s1(){return zb||(zb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function a1(){return Hb||(Hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rv=new WeakMap,bf=new WeakMap,Dv=new WeakMap,Jd=new WeakMap,Xf=new WeakMap;function r1(r){const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{e(As(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Rv.set(e,r)}).catch(()=>{}),Xf.set(t,r),t}function o1(r){if(bf.has(r))return;const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});bf.set(r,t)}let vf={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return bf.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Dv.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return As(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function l1(r){vf=r(vf)}function c1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=r.call(tf(this),t,...e);return Dv.set(i,t.sort?t.sort():[t]),As(i)}:a1().includes(r)?function(...t){return r.apply(tf(this),t),As(Rv.get(this))}:function(...t){return As(r.apply(tf(this),t))}}function u1(r){return typeof r=="function"?c1(r):(r instanceof IDBTransaction&&o1(r),i1(r,s1())?new Proxy(r,vf):r)}function As(r){if(r instanceof IDBRequest)return r1(r);if(Jd.has(r))return Jd.get(r);const t=u1(r);return t!==r&&(Jd.set(r,t),Xf.set(t,r)),t}const tf=r=>Xf.get(r);function h1(r,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,t),h=As(c);return i&&c.addEventListener("upgradeneeded",d=>{i(As(c.result),d.oldVersion,d.newVersion,As(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const d1=["get","getKey","getAll","getAllKeys","count"],f1=["put","add","delete","clear"],ef=new Map;function Gb(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(ef.get(t))return ef.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=f1.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||d1.includes(e)))return;const l=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[e](...h),a&&d.done]))[0]};return ef.set(t,l),l}l1(r=>({...r,get:(t,e,i)=>Gb(t,e)||r.get(t,e,i),has:(t,e)=>!!Gb(t,e)||r.has(t,e)}));class p1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(g1(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function g1(r){return r.getComponent()?.type==="VERSION"}const wf="@firebase/app",Vb="0.14.7";const ji=new Cv("@firebase/app"),m1="@firebase/app-compat",y1="@firebase/analytics-compat",b1="@firebase/analytics",v1="@firebase/app-check-compat",w1="@firebase/app-check",A1="@firebase/auth",S1="@firebase/auth-compat",x1="@firebase/database",_1="@firebase/data-connect",E1="@firebase/database-compat",T1="@firebase/functions",C1="@firebase/functions-compat",R1="@firebase/installations",D1="@firebase/installations-compat",N1="@firebase/messaging",M1="@firebase/messaging-compat",k1="@firebase/performance",L1="@firebase/performance-compat",O1="@firebase/remote-config",I1="@firebase/remote-config-compat",P1="@firebase/storage",j1="@firebase/storage-compat",B1="@firebase/firestore",U1="@firebase/ai",F1="@firebase/firestore-compat",z1="firebase",H1="12.8.0";const Af="[DEFAULT]",G1={[wf]:"fire-core",[m1]:"fire-core-compat",[b1]:"fire-analytics",[y1]:"fire-analytics-compat",[w1]:"fire-app-check",[v1]:"fire-app-check-compat",[A1]:"fire-auth",[S1]:"fire-auth-compat",[x1]:"fire-rtdb",[_1]:"fire-data-connect",[E1]:"fire-rtdb-compat",[T1]:"fire-fn",[C1]:"fire-fn-compat",[R1]:"fire-iid",[D1]:"fire-iid-compat",[N1]:"fire-fcm",[M1]:"fire-fcm-compat",[k1]:"fire-perf",[L1]:"fire-perf-compat",[O1]:"fire-rc",[I1]:"fire-rc-compat",[P1]:"fire-gcs",[j1]:"fire-gcs-compat",[B1]:"fire-fst",[F1]:"fire-fst-compat",[U1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};const Go=new Map,V1=new Map,Sf=new Map;function qb(r,t){try{r.container.addComponent(t)}catch(e){ji.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function gr(r){const t=r.name;if(Sf.has(t))return ji.debug(`There were multiple attempts to register component ${t}.`),!1;Sf.set(t,r);for(const e of Go.values())qb(e,r);for(const e of V1.values())qb(e,r);return!0}function Wf(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function kn(r){return r==null?!1:r.settings!==void 0}const q1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new nl("app","Firebase",q1);class $1{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}}const sl=H1;function Nv(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const i={name:Af,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Ss.create("bad-app-name",{appName:String(a)});if(e||(e=xv()),!e)throw Ss.create("no-options");const l=Go.get(a);if(l){if(pr(e,l.options)&&pr(i,l.config))return l;throw Ss.create("duplicate-app",{appName:a})}const c=new ZE(a);for(const d of Sf.values())c.addComponent(d);const h=new $1(e,i,c);return Go.set(a,h),h}function Kf(r=Af){const t=Go.get(r);if(!t&&r===Af&&xv())return Nv();if(!t)throw Ss.create("no-app",{appName:r});return t}function Y1(){return Array.from(Go.values())}function xs(r,t,e){let i=G1[r]??r;e&&(i+=`-${e}`);const a=i.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ji.warn(c.join(" "));return}gr(new ia(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const X1="firebase-heartbeat-database",W1=1,Vo="firebase-heartbeat-store";let nf=null;function Mv(){return nf||(nf=h1(X1,W1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Vo)}catch(e){console.warn(e)}}}}).catch(r=>{throw Ss.create("idb-open",{originalErrorMessage:r.message})})),nf}async function K1(r){try{const e=(await Mv()).transaction(Vo),i=await e.objectStore(Vo).get(kv(r));return await e.done,i}catch(t){if(t instanceof Hi)ji.warn(t.message);else{const e=Ss.create("idb-get",{originalErrorMessage:t?.message});ji.warn(e.message)}}}async function $b(r,t){try{const i=(await Mv()).transaction(Vo,"readwrite");await i.objectStore(Vo).put(t,kv(r)),await i.done}catch(e){if(e instanceof Hi)ji.warn(e.message);else{const i=Ss.create("idb-set",{originalErrorMessage:e?.message});ji.warn(i.message)}}}function kv(r){return`${r.name}!${r.options.appId}`}const Q1=1024,Z1=30;class J1{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new eT(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Yb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>Z1){const a=nT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){ji.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Yb(),{heartbeatsToSend:e,unsentEntries:i}=tT(this._heartbeatsCache.heartbeats),a=wv(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ji.warn(t),""}}}function Yb(){return new Date().toISOString().substring(0,10)}function tT(r,t=Q1){const e=[];let i=r.slice();for(const a of r){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Xb(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Xb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class eT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FE()?zE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await K1(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return $b(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return $b(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Xb(r){return wv(JSON.stringify({version:2,heartbeats:r})).length}function nT(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let i=1;i<r.length;i++)r[i].date<e&&(e=r[i].date,t=i);return t}function iT(r){gr(new ia("platform-logger",t=>new p1(t),"PRIVATE")),gr(new ia("heartbeat",t=>new J1(t),"PRIVATE")),xs(wf,Vb,r),xs(wf,Vb,"esm2020"),xs("fire-js","")}iT("");function Lv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sT=Lv,Ov=new nl("auth","Firebase",Lv());const eu=new Cv("@firebase/auth");function aT(r,...t){eu.logLevel<=Wt.WARN&&eu.warn(`Auth (${sl}): ${r}`,...t)}function Xc(r,...t){eu.logLevel<=Wt.ERROR&&eu.error(`Auth (${sl}): ${r}`,...t)}function Ln(r,...t){throw Zf(r,...t)}function Hn(r,...t){return Zf(r,...t)}function Qf(r,t,e){const i={...sT(),[t]:e};return new nl("auth","Firebase",i).create(t,{appName:r.name})}function _s(r){return Qf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Iv(r,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&Ln(r,"argument-error"),Qf(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Zf(r,...t){if(typeof r!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(e,...i)}return Ov.create(r,...t)}function ft(r,t,...e){if(!r)throw Zf(t,...e)}function Li(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Xc(t),new Error(t)}function Bi(r,t){r||Li(t)}function xf(){return typeof self<"u"&&self.location?.href||""}function rT(){return Wb()==="http:"||Wb()==="https:"}function Wb(){return typeof self<"u"&&self.location?.protocol||null}function oT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rT()||jE()||"connection"in navigator)?navigator.onLine:!0}function lT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class al{constructor(t,e){this.shortDelay=t,this.longDelay=e,Bi(e>t,"Short delay should be less than long delay!"),this.isMobile=IE()||BE()}get(){return oT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jf(r,t){Bi(r.emulator,"Emulator should always be set here");const{url:e}=r.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class Pv{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const uT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hT=new al(3e4,6e4);function Cs(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Rs(r,t,e,i,a={}){return jv(r,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const h=il({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:t,headers:d,...l};return PE()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Sr(r.emulatorConfig.host)&&(f.credentials="include"),Pv.fetch()(await Bv(r,r.config.apiHost,e,h),f)})}async function jv(r,t,e){r._canInitEmulator=!1;const i={...cT,...t};try{const a=new fT(r),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Lc(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lc(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Lc(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw Lc(r,"user-disabled",c);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Qf(r,g,f);Ln(r,g)}}catch(a){if(a instanceof Hi)throw a;Ln(r,"network-request-failed",{message:String(a)})}}async function rl(r,t,e,i,a={}){const l=await Rs(r,t,e,i,a);return"mfaPendingCredential"in l&&Ln(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Bv(r,t,e,i){const a=`${t}${e}?${i}`,l=r,c=l.config.emulator?Jf(r.config,a):`${r.config.apiScheme}://${a}`;return uT.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function dT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Hn(this.auth,"network-request-failed")),hT.get())})}}function Lc(r,t,e){const i={appName:r.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Hn(r,t,i);return a.customData._tokenResponse=e,a}function Kb(r){return r!==void 0&&r.enterprise!==void 0}class pT{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return dT(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gT(r,t){return Rs(r,"GET","/v2/recaptchaConfig",Cs(r,t))}async function mT(r,t){return Rs(r,"POST","/v1/accounts:delete",t)}async function nu(r,t){return Rs(r,"POST","/v1/accounts:lookup",t)}function Bo(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function yT(r,t=!1){const e=In(r),i=await e.getIdToken(t),a=tp(i);ft(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Bo(sf(a.auth_time)),issuedAtTime:Bo(sf(a.iat)),expirationTime:Bo(sf(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function sf(r){return Number(r)*1e3}function tp(r){const[t,e,i]=r.split(".");if(t===void 0||e===void 0||i===void 0)return Xc("JWT malformed, contained fewer than 3 sections"),null;try{const a=Av(e);return a?JSON.parse(a):(Xc("Failed to decode base64 JWT payload"),null)}catch(a){return Xc("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Qb(r){const t=tp(r);return ft(t,"internal-error"),ft(typeof t.exp<"u","internal-error"),ft(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function qo(r,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Hi&&bT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function bT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class vT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class _f{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function $o(r){const t=r.auth,e=await r.getIdToken(),i=await qo(r,nu(t,{idToken:e}));ft(i?.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?Uv(a.providerUserInfo):[],c=AT(r.providerData,l),h=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!c?.length,f=h?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new _f(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function wT(r){const t=In(r);await $o(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function AT(r,t){return[...r.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function Uv(r){return r.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function ST(r,t){const e=await jv(r,{},async()=>{const i=il({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await Bv(r,a,"/v1/token",`key=${l}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return r.emulatorConfig&&Sr(r.emulatorConfig.host)&&(d.credentials="include"),Pv.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function xT(r,t){return Rs(r,"POST","/v2/accounts:revokeToken",Cs(r,t))}class rr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ft(t.idToken,"internal-error"),ft(typeof t.idToken<"u","internal-error"),ft(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Qb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){ft(t.length!==0,"internal-error");const e=Qb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(ft(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await ST(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new rr;return i&&(ft(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(ft(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(ft(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new rr,this.toJSON())}_performRefresh(){return Li("not implemented")}}function gs(r,t){ft(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class zn{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new vT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _f(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await qo(this,this.stsTokenManager.getToken(this.auth,t));return ft(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return yT(this,t)}reload(){return wT(this)}_assign(t){this!==t&&(ft(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new zn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){ft(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await $o(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(_s(this.auth));const t=await this.getIdToken();return await qo(this,mT(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,f=e.createdAt??void 0,g=e.lastLoginAt??void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:S}=e;ft(y&&S,t,"internal-error");const _=rr.fromJSON(this.name,S);ft(typeof y=="string",t,"internal-error"),gs(i,t.name),gs(a,t.name),ft(typeof b=="boolean",t,"internal-error"),ft(typeof w=="boolean",t,"internal-error"),gs(l,t.name),gs(c,t.name),gs(h,t.name),gs(d,t.name),gs(f,t.name),gs(g,t.name);const E=new zn({uid:y,auth:t,email:a,emailVerified:b,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:_,createdAt:f,lastLoginAt:g});return x&&Array.isArray(x)&&(E.providerData=x.map(C=>({...C}))),d&&(E._redirectEventId=d),E}static async _fromIdTokenResponse(t,e,i=!1){const a=new rr;a.updateFromServerResponse(e);const l=new zn({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await $o(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];ft(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Uv(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new rr;h.updateFromIdToken(i);const d=new zn({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new _f(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,f),d}}const Zb=new Map;function Oi(r){Bi(r instanceof Function,"Expected a class definition");let t=Zb.get(r);return t?(Bi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,Zb.set(r,t),t)}class Fv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Fv.type="NONE";const Jb=Fv;function Wc(r,t,e){return`firebase:${r}:${t}:${e}`}class or{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Wc(this.userKey,a.apiKey,l),this.fullPersistenceKey=Wc("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await nu(this.auth,{idToken:t}).catch(()=>{});return e?zn._fromGetAccountInfoResponse(this.auth,e,t):null}return zn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new or(Oi(Jb),t,i);const a=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Oi(Jb);const c=Wc(i,t.config.apiKey,t.name);let h=null;for(const f of e)try{const g=await f._get(c);if(g){let y;if(typeof g=="string"){const b=await nu(t,{idToken:g}).catch(()=>{});if(!b)break;y=await zn._fromGetAccountInfoResponse(t,b,g)}else y=zn._fromJSON(t,g);f!==l&&(h=y),l=f;break}}catch{}const d=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new or(l,t,i):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(e.map(async f=>{if(f!==l)try{await f._remove(c)}catch{}})),new or(l,t,i))}}function t0(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Vv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(zv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if($v(t))return"Blackberry";if(Yv(t))return"Webos";if(Hv(t))return"Safari";if((t.includes("chrome/")||Gv(t))&&!t.includes("edge/"))return"Chrome";if(qv(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(e);if(i?.length===2)return i[1]}return"Other"}function zv(r=Ke()){return/firefox\//i.test(r)}function Hv(r=Ke()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Gv(r=Ke()){return/crios\//i.test(r)}function Vv(r=Ke()){return/iemobile/i.test(r)}function qv(r=Ke()){return/android/i.test(r)}function $v(r=Ke()){return/blackberry/i.test(r)}function Yv(r=Ke()){return/webos/i.test(r)}function ep(r=Ke()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _T(r=Ke()){return ep(r)&&!!window.navigator?.standalone}function ET(){return UE()&&document.documentMode===10}function Xv(r=Ke()){return ep(r)||qv(r)||Yv(r)||$v(r)||/windows phone/i.test(r)||Vv(r)}function Wv(r,t=[]){let e;switch(r){case"Browser":e=t0(Ke());break;case"Worker":e=`${t0(Ke())}-${r}`;break;default:e=r}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${sl}/${i}`}class TT{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,h)=>{try{const d=t(l);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function CT(r,t={}){return Rs(r,"GET","/v2/passwordPolicy",Cs(r,t))}const RT=6;class DT{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??RT,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class NT{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new e0(this),this.idTokenSubscription=new e0(this),this.beforeStateQueue=new TT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ov,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Oi(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await or.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await nu(this,{idToken:t}),i=await zn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!l||l===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ft(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await $o(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=lT()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kn(this.app))return Promise.reject(_s(this));const e=t?In(t):null;return e&&ft(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&ft(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kn(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await CT(this),e=new DT(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new nl("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await xT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Oi(t)||this._popupRedirectResolver;ft(e,this,"argument-error"),this.redirectPersistenceManager=await or.create(this,[Oi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ft(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ft(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Wv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&aT(`Error while retrieving App Check token: ${t.error}`),t?.token}}function xr(r){return In(r)}class e0{constructor(t){this.auth=t,this.observer=null,this.addObserver=$E(e=>this.observer=e)}get next(){return ft(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MT(r){mu=r}function Kv(r){return mu.loadJS(r)}function kT(){return mu.recaptchaEnterpriseScript}function LT(){return mu.gapiScript}function OT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class IT{constructor(){this.enterprise=new PT}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class PT{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const jT="recaptcha-enterprise",Qv="NO_RECAPTCHA";class BT{constructor(t){this.type=jT,this.auth=xr(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{gT(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new pT(d);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,c(f.siteKey)}}).catch(d=>{h(d)})})}function a(l,c,h){const d=window.grecaptcha;Kb(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(f=>{c(f)}).catch(()=>{c(Qv)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new IT().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!e&&Kb(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=kT();d.length!==0&&(d+=h),Kv(d).then(()=>{a(h,l,c)}).catch(f=>{c(f)})}}).catch(h=>{c(h)})})}}async function n0(r,t,e,i=!1,a=!1){const l=new BT(r);let c;if(a)c=Qv;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const h={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function i0(r,t,e,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await n0(r,t,e,e==="getOobCode");return i(r,l)}else return i(r,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await n0(r,t,e,e==="getOobCode");return i(r,c)}else return Promise.reject(l)})}function UT(r,t){const e=Wf(r,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(pr(l,t??{}))return a;Ln(a,"already-initialized")}return e.initialize({options:t})}function FT(r,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Oi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(i,t?.popupRedirectResolver)}function Zv(r,t,e){const i=xr(r);ft(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!!e?.disableWarnings,l=Jv(t),{host:c,port:h}=zT(t),d=h===null?"":`:${h}`,f={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){ft(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ft(pr(f,i.config.emulator)&&pr(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Sr(c)?(Ev(`${l}//${c}${d}`),Tv("Auth",!0)):a||HT()}function Jv(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function zT(r){const t=Jv(r),e=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:s0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:s0(c)}}}function s0(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function HT(){function r(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class np{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Li("not implemented")}_getIdTokenResponse(t){return Li("not implemented")}_linkToIdToken(t,e){return Li("not implemented")}_getReauthenticationResolver(t){return Li("not implemented")}}async function GT(r,t){return Rs(r,"POST","/v1/accounts:signUp",t)}async function VT(r,t){return rl(r,"POST","/v1/accounts:signInWithPassword",Cs(r,t))}async function qT(r,t){return rl(r,"POST","/v1/accounts:signInWithEmailLink",Cs(r,t))}async function $T(r,t){return rl(r,"POST","/v1/accounts:signInWithEmailLink",Cs(r,t))}class Yo extends np{constructor(t,e,i,a=null){super("password",i),this._email=t,this._password=e,this._tenantId=a}static _fromEmailAndPassword(t,e){return new Yo(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Yo(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(t,e,"signInWithPassword",VT);case"emailLink":return qT(t,{email:this._email,oobCode:this._password});default:Ln(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return i0(t,i,"signUpPassword",GT);case"emailLink":return $T(t,{idToken:e,email:this._email,oobCode:this._password});default:Ln(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function lr(r,t){return rl(r,"POST","/v1/accounts:signInWithIdp",Cs(r,t))}const YT="http://localhost";class Ui extends np{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Ui(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ln("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...l}=e;if(!i||!a)return null;const c=new Ui(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return lr(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,lr(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,lr(t,e)}buildRequest(){const t={requestUri:YT,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=il(e)}return t}}function XT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function WT(r){const t=ko(Lo(r)).link,e=t?ko(Lo(t)).deep_link_id:null,i=ko(Lo(r)).deep_link_id;return(i?ko(Lo(i)).link:null)||i||e||t||r}class ip{constructor(t){const e=ko(Lo(t)),i=e.apiKey??null,a=e.oobCode??null,l=XT(e.mode??null);ft(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=WT(t);try{return new ip(e)}catch{return null}}}class _r{constructor(){this.providerId=_r.PROVIDER_ID}static credential(t,e){return Yo._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=ip.parseLink(e);return ft(i,"argument-error"),Yo._fromEmailAndCode(t,i.code,i.tenantId)}}_r.PROVIDER_ID="password";_r.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_r.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class yu{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Er extends yu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class cr extends Er{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return ft("providerId"in e&&"signInMethod"in e,"argument-error"),Ui._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return ft(t.idToken||t.accessToken,"argument-error"),Ui._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return cr.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return cr.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:h}=t;if(!i&&!a&&!e&&!l||!h)return null;try{return new cr(h)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:l})}catch{return null}}}class ms extends Er{constructor(){super("facebook.com")}static credential(t){return Ui._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ms.credentialFromTaggedObject(t)}static credentialFromError(t){return ms.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ms.credential(t.oauthAccessToken)}catch{return null}}}ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";ms.PROVIDER_ID="facebook.com";class Mi extends Er{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Ui._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return Mi.credentialFromTaggedObject(t)}static credentialFromError(t){return Mi.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return Mi.credential(e,i)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";class ys extends Er{constructor(){super("github.com")}static credential(t){return Ui._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ys.credentialFromTaggedObject(t)}static credentialFromError(t){return ys.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ys.credential(t.oauthAccessToken)}catch{return null}}}ys.GITHUB_SIGN_IN_METHOD="github.com";ys.PROVIDER_ID="github.com";class bs extends Er{constructor(){super("twitter.com")}static credential(t,e){return Ui._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return bs.credentialFromTaggedObject(t)}static credentialFromError(t){return bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return bs.credential(e,i)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";async function KT(r,t){return rl(r,"POST","/v1/accounts:signUp",Cs(r,t))}class Es{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await zn._fromIdTokenResponse(t,i,a),c=a0(i);return new Es({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=a0(i);return new Es({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function a0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function QT(r){if(kn(r.app))return Promise.reject(_s(r));const t=xr(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Es({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await KT(t,{returnSecureToken:!0}),i=await Es._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class iu extends Hi{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,iu.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new iu(t,e,i,a)}}function tw(r,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(r):e._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?iu._fromErrorAndOperation(r,l,t,i):l})}function ZT(r){return new Set(r.map(({providerId:t})=>t).filter(t=>!!t))}async function ew(r,t,e=!1){const i=await qo(r,t._linkToIdToken(r.auth,await r.getIdToken()),e);return Es._forOperation(r,"link",i)}async function JT(r,t,e){await $o(t);const i=ZT(t.providerData);ft(i.has(e)===r,t.auth,"provider-already-linked")}async function tC(r,t,e=!1){const{auth:i}=r;if(kn(i.app))return Promise.reject(_s(i));const a="reauthenticate";try{const l=await qo(r,tw(i,a,t,r),e);ft(l.idToken,i,"internal-error");const c=tp(l.idToken);ft(c,i,"internal-error");const{sub:h}=c;return ft(r.uid===h,i,"user-mismatch"),Es._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ln(i,"user-mismatch"),l}}async function eC(r,t,e=!1){if(kn(r.app))return Promise.reject(_s(r));const i="signIn",a=await tw(r,i,t),l=await Es._fromIdTokenResponse(r,i,a);return e||await r._updateCurrentUser(l.user),l}async function nC(r,t){const e=In(r);return await JT(!1,e,t.providerId),ew(e,t)}function iC(r,t,e,i){return In(r).onIdTokenChanged(t,e,i)}function sC(r,t,e){return In(r).beforeAuthStateChanged(t,e)}function nw(r){return In(r).signOut()}const su="__sak";class iw{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(su,"1"),this.storage.removeItem(su),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const aC=1e3,rC=10;class sw extends iw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);ET()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,rC):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},aC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}sw.type="LOCAL";const oC=sw;class aw extends iw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}aw.type="SESSION";const rw=aw;function lC(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class bu{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new bu(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async f=>f(e.origin,l)),d=await lC(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bu.receivers=[];function sp(r="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return r+e}class cC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const f=sp("",20);a.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(b.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function si(){return window}function uC(r){si().location.href=r}function ow(){return typeof si().WorkerGlobalScope<"u"&&typeof si().importScripts=="function"}async function hC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dC(){return navigator?.serviceWorker?.controller||null}function fC(){return ow()?self:null}const lw="firebaseLocalStorageDb",pC=1,au="firebaseLocalStorage",cw="fbase_key";class ol{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function vu(r,t){return r.transaction([au],t?"readwrite":"readonly").objectStore(au)}function gC(){const r=indexedDB.deleteDatabase(lw);return new ol(r).toPromise()}function Ef(){const r=indexedDB.open(lw,pC);return new Promise((t,e)=>{r.addEventListener("error",()=>{e(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(au,{keyPath:cw})}catch(a){e(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(au)?t(i):(i.close(),await gC(),t(await Ef()))})})}async function r0(r,t,e){const i=vu(r,!0).put({[cw]:t,value:e});return new ol(i).toPromise()}async function mC(r,t){const e=vu(r,!1).get(t),i=await new ol(e).toPromise();return i===void 0?null:i.value}function o0(r,t){const e=vu(r,!0).delete(t);return new ol(e).toPromise()}const yC=800,bC=3;class uw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ef(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>bC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ow()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bu._getInstance(fC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await hC(),!this.activeServiceWorker)return;this.sender=new cC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||dC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ef();return await r0(t,su,"1"),await o0(t,su),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>r0(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>mC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>o0(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=vu(a,!1).getAll();return new ol(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uw.type="LOCAL";const vC=uw;new al(3e4,6e4);function ap(r,t){return t?Oi(t):(ft(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class rp extends np{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return lr(t,this._buildIdpRequest())}_linkToIdToken(t,e){return lr(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return lr(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function wC(r){return eC(r.auth,new rp(r),r.bypassAuthState)}function AC(r){const{auth:t,user:e}=r;return ft(e,t,"internal-error"),tC(e,new rp(r),r.bypassAuthState)}async function SC(r){const{auth:t,user:e}=r;return ft(e,t,"internal-error"),ew(e,new rp(r),r.bypassAuthState)}class hw{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return wC;case"linkViaPopup":case"linkViaRedirect":return SC;case"reauthViaPopup":case"reauthViaRedirect":return AC;default:Ln(this.auth,"internal-error")}}resolve(t){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xC=new al(2e3,1e4);async function _C(r,t,e){if(kn(r.app))return Promise.reject(Hn(r,"operation-not-supported-in-this-environment"));const i=xr(r);Iv(r,t,yu);const a=ap(i,e);return new ws(i,"signInViaPopup",t,a).executeNotNull()}async function EC(r,t,e){const i=In(r);Iv(i.auth,t,yu);const a=ap(i.auth,e);return new ws(i.auth,"linkViaPopup",t,a,i).executeNotNull()}class ws extends hw{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ft(t,this.auth,"internal-error"),t}async onExecution(){Bi(this.filter.length===1,"Popup operations only handle one event");const t=sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,xC.get())};t()}}ws.currentPopupAction=null;const TC="pendingRedirect",Kc=new Map;class CC extends hw{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Kc.get(this.auth._key());if(!t){try{const i=await RC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Kc.set(this.auth._key(),t)}return this.bypassAuthState||Kc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RC(r,t){const e=MC(t),i=NC(r);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function DC(r,t){Kc.set(r._key(),t)}function NC(r){return Oi(r._redirectPersistence)}function MC(r){return Wc(TC,r.config.apiKey,r.name)}async function kC(r,t,e=!1){if(kn(r.app))return Promise.reject(_s(r));const i=xr(r),a=ap(i,t),c=await new CC(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const LC=600*1e3;class OC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!dw(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Hn(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LC&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(t))}saveEventToCache(t){this.cachedEventUids.add(l0(t)),this.lastProcessedEventTime=Date.now()}}function l0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function dw({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function IC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dw(r);default:return!1}}async function PC(r,t={}){return Rs(r,"GET","/v1/projects",t)}const jC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BC=/^https?/;async function UC(r){if(r.config.emulator)return;const{authorizedDomains:t}=await PC(r);for(const e of t)try{if(FC(e))return}catch{}Ln(r,"unauthorized-domain")}function FC(r){const t=xf(),{protocol:e,hostname:i}=new URL(t);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?e==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!BC.test(e))return!1;if(jC.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const zC=new al(3e4,6e4);function c0(){const r=si().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let e=0;e<r.CP.length;e++)r.CP[e]=null}}function HC(r){return new Promise((t,e)=>{function i(){c0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{c0(),e(Hn(r,"network-request-failed"))},timeout:zC.get()})}if(si().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(si().gapi?.load)i();else{const a=OT("iframefcb");return si()[a]=()=>{gapi.load?i():e(Hn(r,"network-request-failed"))},Kv(`${LT()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Qc=null,t})}let Qc=null;function GC(r){return Qc=Qc||HC(r),Qc}const VC=new al(5e3,15e3),qC="__/auth/iframe",$C="emulator/auth/iframe",YC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WC(r){const t=r.config;ft(t.authDomain,r,"auth-domain-config-required");const e=t.emulator?Jf(t,$C):`https://${r.config.authDomain}/${qC}`,i={apiKey:t.apiKey,appName:r.name,v:sl},a=XC.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${il(i).slice(1)}`}async function KC(r){const t=await GC(r),e=si().gapi;return ft(e,r,"internal-error"),t.open({where:document.body,url:WC(r),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YC,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Hn(r,"network-request-failed"),h=si().setTimeout(()=>{l(c)},VC.get());function d(){si().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{l(c)})}))}const QC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZC=500,JC=600,tR="_blank",eR="http://localhost";class u0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(r,t,e,i=ZC,a=JC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...QC,width:i.toString(),height:a.toString(),top:l,left:c},f=Ke().toLowerCase();e&&(h=Gv(f)?tR:e),zv(f)&&(t=t||eR,d.scrollbars="yes");const g=Object.entries(d).reduce((b,[w,x])=>`${b}${w}=${x},`,"");if(_T(f)&&h!=="_self")return iR(t||"",h),new u0(null);const y=window.open(t||"",h,g);ft(y,r,"popup-blocked");try{y.focus()}catch{}return new u0(y)}function iR(r,t){const e=document.createElement("a");e.href=r,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const sR="__/auth/handler",aR="emulator/auth/handler",rR=encodeURIComponent("fac");async function h0(r,t,e,i,a,l){ft(r.config.authDomain,r,"auth-domain-config-required"),ft(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:e,redirectUrl:i,v:sl,eventId:a};if(t instanceof yu){t.setDefaultLanguage(r.languageCode),c.providerId=t.providerId||"",qE(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(t instanceof Er){const g=t.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await r._getAppCheckToken(),f=d?`#${rR}=${encodeURIComponent(d)}`:"";return`${oR(r)}?${il(h).slice(1)}${f}`}function oR({config:r}){return r.emulator?Jf(r,aR):`https://${r.authDomain}/${sR}`}const af="webStorageSupport";class lR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rw,this._completeRedirectFn=kC,this._overrideRedirectResult=DC}async _openPopup(t,e,i,a){Bi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const l=await h0(t,e,i,xf(),a);return nR(t,l,sp())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await h0(t,e,i,xf(),a);return uC(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(Bi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await KC(t),i=new OC(t);return e.register("authEvent",a=>(ft(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(af,{type:af},a=>{const l=a?.[0]?.[af];l!==void 0&&e(!!l),Ln(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=UC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Xv()||Hv()||ep()}}const cR=lR;var d0="@firebase/auth",f0="1.12.0";class uR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){ft(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(r){gr(new ia("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;ft(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wv(r)},f=new NT(i,a,l,d);return FT(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),gr(new ia("auth-internal",t=>{const e=xr(t.getProvider("auth").getImmediate());return(i=>new uR(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),xs(d0,f0,hR(r)),xs(d0,f0,"esm2020")}const fR=300,pR=_v("authIdTokenMaxAge")||fR;let p0=null;const gR=r=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>pR)return;const a=e?.token;p0!==a&&(p0=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mR(r=Kf()){const t=Wf(r,"auth");if(t.isInitialized())return t.getImmediate();const e=UT(r,{popupRedirectResolver:cR,persistence:[vC,oC,rw]}),i=_v("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=gR(l.toString());sC(e,c,()=>c(e.currentUser)),iC(e,h=>c(h))}}const a=Sv("auth");return a&&Zv(e,`http://${a}`),e}function yR(){return document.getElementsByTagName("head")?.[0]??document}MT({loadJS(r){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=t,i.onerror=a=>{const l=Hn("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",yR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");const bR="type.googleapis.com/google.protobuf.Int64Value",vR="type.googleapis.com/google.protobuf.UInt64Value";function fw(r,t){const e={};for(const i in r)r.hasOwnProperty(i)&&(e[i]=t(r[i]));return e}function ru(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(t=>ru(t));if(typeof r=="function"||typeof r=="object")return fw(r,t=>ru(t));throw new Error("Data cannot be encoded in JSON: "+r)}function mr(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case bR:case vR:{const t=Number(r.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+r);return t}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(t=>mr(t)):typeof r=="function"||typeof r=="object"?fw(r,t=>mr(t)):r}const op="functions";const g0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Hi{constructor(t,e,i){super(`${op}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,Xe.prototype)}}function wR(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ou(r,t){let e=wR(r),i=e,a;try{const l=t&&t.error;if(l){const c=l.status;if(typeof c=="string"){if(!g0[c])return new Xe("internal","internal");e=g0[c],i=c}const h=l.message;typeof h=="string"&&(i=h),a=l.details,a!==void 0&&(a=mr(a))}}catch{}return e==="ok"?null:new Xe(e,i,a)}class AR{constructor(t,e,i,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:a}}}const Tf="us-central1",SR=/^data: (.*?)(?:\n|$)/;function xR(r){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new Xe("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{t&&clearTimeout(t)}}}class _R{constructor(t,e,i,a,l=Tf,c=(...h)=>fetch(...h)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new AR(t,e,i,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Tf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}function ER(r,t,e){const i=Sr(t);r.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Ev(r.emulatorOrigin+"/backends"),Tv("Functions",!0))}function TR(r,t,e){const i=a=>RR(r,t,a,e||{});return i.stream=(a,l)=>NR(r,t,a,l),i}function pw(r){return r.emulatorOrigin&&Sr(r.emulatorOrigin)?"include":void 0}async function CR(r,t,e,i,a){e["Content-Type"]="application/json";let l;try{l=await i(r,{method:"POST",body:JSON.stringify(t),headers:e,credentials:pw(a)})}catch{return{status:0,json:null}}let c=null;try{c=await l.json()}catch{}return{status:l.status,json:c}}async function gw(r,t){const e={},i=await r.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function RR(r,t,e,i){const a=r._url(t);return DR(r,a,e,i)}async function DR(r,t,e,i){e=ru(e);const a={data:e},l=await gw(r,i),c=i.timeout||7e4,h=xR(c),d=await Promise.race([CR(t,a,l,r.fetchImpl,r),h.promise,r.cancelAllRequests]);if(h.cancel(),!d)throw new Xe("cancelled","Firebase Functions instance was deleted.");const f=ou(d.status,d.json);if(f)throw f;if(!d.json)throw new Xe("internal","Response is not valid JSON object.");let g=d.json.data;if(typeof g>"u"&&(g=d.json.result),typeof g>"u")throw new Xe("internal","Response is missing data field.");return{data:mr(g)}}function NR(r,t,e,i){const a=r._url(t);return MR(r,a,e,i||{})}async function MR(r,t,e,i){e=ru(e);const a={data:e},l=await gw(r,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await r.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:l,signal:i?.signal,credentials:pw(r)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const x=new Xe("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const w=ou(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let h,d;const f=new Promise((b,w)=>{h=b,d=w});i?.signal?.addEventListener("abort",()=>{const b=new Xe("cancelled","Request was cancelled.");d(b)});const g=c.body.getReader(),y=kR(g,h,d,i?.signal);return{stream:{[Symbol.asyncIterator](){const b=y.getReader();return{async next(){const{value:w,done:x}=await b.read();return{value:w,done:x}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:f}}function kR(r,t,e,i){const a=(c,h)=>{const d=c.match(SR);if(!d)return;const f=d[1];try{const g=JSON.parse(f);if("result"in g){t(mr(g.result));return}if("message"in g){h.enqueue(mr(g.message));return}if("error"in g){const y=ou(0,g);h.error(y),e(y);return}}catch(g){if(g instanceof Xe){h.error(g),e(g);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return d();async function d(){if(i?.aborted){const f=new Xe("cancelled","Request was cancelled");return c.error(f),e(f),Promise.resolve()}try{const{value:f,done:g}=await r.read();if(g){h.trim()&&a(h.trim(),c),c.close();return}if(i?.aborted){const b=new Xe("cancelled","Request was cancelled");c.error(b),e(b),await r.cancel();return}h+=l.decode(f,{stream:!0});const y=h.split(`
`);h=y.pop()||"";for(const b of y)b.trim()&&a(b.trim(),c);return d()}catch(f){const g=f instanceof Xe?f:ou(0,null);c.error(g),e(g)}}},cancel(){return r.cancel()}})}const m0="@firebase/functions",y0="0.13.1";const LR="auth-internal",OR="app-check-internal",IR="messaging-internal";function PR(r){const t=(e,{instanceIdentifier:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider(LR),c=e.getProvider(IR),h=e.getProvider(OR);return new _R(a,l,c,h,i)};gr(new ia(op,t,"PUBLIC").setMultipleInstances(!0)),xs(m0,y0,r),xs(m0,y0,"esm2020")}function mw(r=Kf(),t=Tf){const i=Wf(In(r),op).getImmediate({identifier:t}),a=ME("functions");return a&&yw(i,...a),i}function yw(r,t,e){ER(In(r),t,e)}function ai(r,t,e){return TR(In(r),t,e)}PR();const bw=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:Xe,connectFunctionsEmulator:yw,getFunctions:mw,httpsCallable:ai},Symbol.toStringTag,{value:"Module"}));async function jR({functions:r,docHash:t,text:e}){if(!r)throw new Error("Firebase functions not available");const i=ai(r,"analyzeByType");if(typeof i!="function")throw new Error("analyzeByType callable not available");return(await i({docHash:t,text:e}))?.data}async function BR({functions:r,docHash:t,typeId:e}){if(!r)throw new Error("Firebase functions not available");const i=ai(r,"saveDocTypeOverride");return typeof i!="function"?null:(await i({docHash:t,typeId:e}))?.data}async function UR({functions:r,docHash:t}){if(!r)throw new Error("Firebase functions not available");const e=ai(r,"getDocumentTypeState");return typeof e!="function"?null:(await e({docHash:t}))?.data}async function FR({functions:r,docHash:t,stats:e,text:i}){if(!r)throw new Error("Firebase functions not available");const a=ai(r,"detectDocumentType");return typeof a!="function"?null:(await a({docHash:t,stats:e,text:i}))?.data}async function zR({functions:r,docHash:t,stats:e}){if(!r)throw new Error("Firebase functions not available");const i=ai(r,"preflightCheck");if(typeof i!="function")throw new Error("preflightCheck callable not available");return(await i({docHash:t,stats:e}))?.data}async function HR({functions:r,payload:t}){if(!r)throw new Error("Firebase functions not available");const e=ai(r,"analyzeText");if(typeof e!="function")throw new Error("analyzeText callable not available");return await e(t)}var GR="firebase",VR="12.8.0";xs(GR,VR,"app");const vw=I.createContext();let Oc={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"};const b0=r=>{if(!r||typeof r!="string")return!0;const t=r.trim();return t===""||t.includes("your_")||t.includes("replace_me")||t.includes("changeme")};let Cf=null,Uo=null,v0=!1;try{if(window.MOCK_AUTH)b0(Oc.apiKey)&&(console.log("Using dummy Firebase config for MOCK_AUTH mode"),Oc={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"});else if(b0(Oc.apiKey))throw new Error("Firebase client configuration is missing or invalid. Authentication will be unavailable.");Cf=Y1().length===0?Nv(Oc):Kf(),Uo=mR(Cf),"".toLowerCase()==="true"&&!v0&&(Zv(Uo,"http://localhost:9099",{disableWarnings:!0}),v0=!0)}catch(r){console.error("Failed to initialize Firebase:",r)}const qR=({children:r})=>{const[t,e]=I.useState({status:"pending",user:null,error:null});return I.useEffect(()=>{(async()=>{if(window.MOCK_AUTH){const a=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;e({status:a?"authenticated":"unauthenticated",user:a,error:null});return}if(!Uo){e({status:"error",user:null,error:new Error("Firebase Auth not available")}),console.error("Firebase Auth not available");return}try{const a=await QT(Uo);e({status:"authenticated",user:a.user,error:null})}catch(a){console.error("Authentication error:",a),e({status:"error",user:null,error:a})}})()},[]),v.jsx(vw.Provider,{value:{authState:t,app:Cf,auth:Uo},children:r})},Tr=()=>{const r=I.useContext(vw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},$R=({children:r,showHeader:t=!0,showFooter:e=!0})=>{const{authState:i}=Tr(),a=i.status==="error"?i.error?.message:null;return v.jsxs("div",{className:"min-h-screen flex flex-col",children:[t&&v.jsx("header",{className:"bg-gray-800 text-white px-5 py-4 flex-shrink-0",children:v.jsxs(Yt,{to:"/",className:"no-underline text-white",children:[v.jsx("h1",{className:"text-3xl font-bold inline-block mr-5 m-0",children:"DecoDocs"}),v.jsx("p",{className:"inline-block m-0",children:v.jsx("strong",{className:"text-cyan-400 text-base",children:"Decode documents. Act with confidence."})})]})}),v.jsx("div",{className:`px-5 py-2.5 text-center font-medium text-sm border-b flex-shrink-0 ${i.status==="authenticated"?"bg-green-50 text-green-800 border-green-300":"bg-yellow-50 text-yellow-800 border-yellow-300"}`,children:i.status==="authenticated"?" Firebase authenticated - AI features available":a?` AI calls disabled: "${a}". Document viewing features remain available.`:" Authenticating with Firebase..."}),v.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:r}),e&&v.jsx("footer",{className:"text-center py-5 px-5 text-gray-600 border-t flex-shrink-0 bg-gray-50",children:v.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-2.5",children:[v.jsx("p",{className:"m-0 text-gray-600 text-sm",children:" Snap Sign Pty Ltd"}),v.jsx("p",{className:"m-0 text-gray-600 text-sm",children:"ABN 72 679 570 757"}),v.jsxs("div",{className:"flex gap-6 flex-wrap justify-center",children:[v.jsx(Yt,{to:"/about",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"About"}),v.jsx(Yt,{to:"/privacy",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Privacy Policy"}),v.jsx(Yt,{to:"/terms",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Terms of Service"}),v.jsx(Yt,{to:"/contact",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Contact"})]})]})})]})},YR=({onFileSelect:r,onEdit:t,currentFileName:e,pageNumber:i,numPages:a,pageScale:l,onPreviousPage:c,onNextPage:h,onZoomIn:d,onZoomOut:f,fileInputRef:g})=>v.jsxs("div",{className:"flex gap-4 mb-4 items-center flex-wrap",children:[v.jsx("button",{onClick:()=>g.current?.click(),className:"bg-blue-500 text-white px-4 py-2 text-sm rounded hover:bg-blue-600 transition-colors",children:"Open Different PDF"}),v.jsx("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 text-sm rounded hover:bg-green-700 transition-colors",children:"Edit & Sign"}),e&&v.jsxs("span",{className:"text-sm text-gray-600 flex-1 text-left break-all",children:["Current: ",e]}),v.jsxs("div",{className:"flex gap-2 items-center",children:[v.jsx("button",{onClick:c,disabled:i<=1,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:" Prev"}),v.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",i," of ",a||0]}),v.jsx("button",{onClick:h,disabled:i>=a,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Next "})]}),v.jsxs("div",{className:"flex gap-2 items-center",children:[v.jsx("button",{onClick:f,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom Out"}),v.jsxs("span",{className:"text-sm text-gray-700 min-w-[60px] text-center",children:[Math.round(l*100),"%"]}),v.jsx("button",{onClick:d,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom In"})]}),v.jsx("input",{type:"file",ref:g,accept:".pdf",onChange:r,className:"hidden"})]}),XR=({pdfDoc:r,isLoading:t,loadingMessage:e,canvasRef:i,textLayerRef:a,annotationsRef:l})=>t?v.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),v.jsx("p",{children:e||"Loading PDF..."})]})}):r?v.jsx("div",{className:"flex-1 border border-gray-300 rounded overflow-hidden relative bg-gray-100 h-[calc(100vh-200px)] overflow-auto",children:v.jsxs("div",{className:"relative mx-auto w-fit",children:[v.jsx("canvas",{ref:i,className:"block max-w-full max-h-full bg-white shadow-lg"}),v.jsx("div",{ref:a,className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-0 leading-none"}),v.jsx("div",{ref:l,className:"absolute top-0 left-0 w-full h-full pointer-events-none"})]})}):v.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:v.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})}),WR=({onAnalyzeDocument:r,onAnalyzeByType:t,onExplainSelection:e,onHighlightRisks:i,onTranslateToPlainEnglish:a,isLoading:l,isAuthenticated:c,hasDocument:h})=>{const d=!h||!c||l;let f=null;return l?f="Working":h?c||(f="Sign in to enable AI analysis (Free) and unlock Pro upgrades (OCR / deeper processing)."):f="Open a PDF to enable analysis tools.",v.jsxs("div",{className:"w-[350px] p-5 bg-gray-50 border-l border-gray-300 flex flex-col overflow-y-auto",children:[v.jsx("h3",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2.5",children:"Document Analysis Tools"}),f&&v.jsxs("div",{className:"mb-4 rounded border border-slate-200 bg-white p-3 text-sm text-slate-700",children:[v.jsx("div",{className:"font-semibold",children:"Why are buttons disabled?"}),v.jsx("div",{className:"mt-1",children:f}),!c&&v.jsxs("div",{className:"mt-2 flex gap-3 flex-wrap",children:[v.jsx(Yt,{to:"/sign-in",className:"rounded-full bg-slate-900 px-3 py-1.5 text-xs font-semibold text-white no-underline",children:"Sign in"}),v.jsx(Yt,{to:"/pricing",className:"rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 no-underline",children:"See Free vs Pro"})]})]}),v.jsxs("div",{className:"flex flex-col gap-2.5 mb-5",children:[v.jsx("button",{onClick:t,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:l?"Analyzing...":"Type-specific analysis (recommended)"}),v.jsx("button",{onClick:r,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Legacy analysis (generic)"}),v.jsx("button",{onClick:e,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Explain Selection"}),v.jsx("button",{onClick:i,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Highlight Risks"}),v.jsx("button",{onClick:a,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Translate to Plain English"}),v.jsx("button",{disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Summarize Key Points"}),v.jsx("button",{disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Suggest Improvements"})]})]})},KR=({risk:r})=>{const t=i=>{switch(i){case"high":return"bg-red-600";case"medium":return"bg-orange-500";case"low":return"bg-yellow-500";default:return"bg-gray-500"}},e=i=>{switch(i){case"high":return"border-l-red-600";case"medium":return"border-l-orange-500";case"low":return"border-l-yellow-500";default:return"border-l-gray-500"}};return v.jsxs("div",{className:`mb-3 border border-gray-300 rounded overflow-hidden ${e(r.riskLevel)}`,children:[v.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-50",children:[v.jsx("h6",{className:"m-0 text-gray-700 font-semibold",children:r.clause}),v.jsx("span",{className:`px-2 py-0.5 rounded-xl text-xs font-bold text-white ${t(r.riskLevel)}`,children:r.riskLevel.toUpperCase()})]}),v.jsxs("div",{className:"p-2.5 bg-white",children:[v.jsxs("p",{className:"mb-2",children:[v.jsx("strong",{children:"Risk:"})," ",r.description]}),v.jsxs("p",{className:"m-0",children:[v.jsx("strong",{children:"Plain Language:"})," ",r.explanation]})]})]})},QR=({analysis:r})=>r?v.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[v.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Document Summary"}),v.jsx("p",{className:"text-gray-700",children:r.summary})]}),r.risks&&r.risks.length>0&&v.jsxs("div",{className:"mb-4",children:[v.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Identified Risks"}),r.risks.map(t=>v.jsx(KR,{risk:t},t.id))]}),r.typeSpecific&&v.jsxs("div",{className:"mb-4",children:[v.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Type-specific (beta)"}),v.jsxs("div",{className:"text-gray-700",style:{whiteSpace:"pre-wrap"},children:[v.jsxs("div",{children:[v.jsx("strong",{children:"effectiveTypeId:"})," ",r.typeSpecific.effectiveTypeId||""]}),v.jsxs("div",{children:[v.jsx("strong",{children:"validationSlug:"})," ",r.typeSpecific.validationSlug||""]}),v.jsxs("div",{children:[v.jsx("strong",{children:"validationTitle:"})," ",r.typeSpecific.validationTitle||""]}),r.typeSpecific.result?.plainExplanation?v.jsxs("div",{style:{marginTop:8},children:[v.jsx("strong",{children:"explanation:"}),v.jsx("div",{children:r.typeSpecific.result.plainExplanation})]}):null,r.typeSpecific.usage?v.jsxs("div",{style:{marginTop:8},children:[v.jsx("strong",{children:"usage:"}),v.jsxs("div",{children:["estimatedTokens: ",r.typeSpecific.usage.estimatedTokens??"","  ","remainingTokens: ",r.typeSpecific.usage.remainingTokens??""]})]}):null,r.typeSpecific.ok===!1&&(r.typeSpecific.code||r.typeSpecific.requiredTier)?v.jsxs("div",{style:{marginTop:8,color:"#991b1b"},children:[v.jsx("strong",{children:"blocked:"})," ",r.typeSpecific.code||"",r.typeSpecific.requiredTier?` (required: ${r.typeSpecific.requiredTier})`:""]}):null,r.typeSpecific.result?.checks?.length?v.jsxs("div",{style:{marginTop:8},children:[v.jsx("strong",{children:"checks:"}),v.jsx("ul",{className:"list-none p-0",style:{marginTop:6},children:r.typeSpecific.result.checks.map(t=>v.jsx("li",{className:"mb-2 p-2 border border-gray-200 rounded",children:v.jsxs("div",{children:[v.jsxs("strong",{children:[t.ok?"OK":"FAIL",":"]})," ",t.message]})},t.id))})]}):null,r.typeSpecific.result?.extracted&&Object.keys(r.typeSpecific.result.extracted).length?v.jsxs("div",{style:{marginTop:8},children:[v.jsx("strong",{children:"extracted:"}),v.jsx("pre",{style:{marginTop:6,background:"#f8fafc",border:"1px solid #e2e8f0",padding:10,borderRadius:10,overflow:"auto"},children:JSON.stringify(r.typeSpecific.result.extracted,null,2)})]}):null,r.typeSpecific.message?v.jsxs("div",{style:{marginTop:8},children:[v.jsx("strong",{children:"message:"}),v.jsx("div",{children:r.typeSpecific.message})]}):null]})]}),r.recommendations&&r.recommendations.length>0&&v.jsxs("div",{children:[v.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Recommendations"}),v.jsx("ul",{className:"list-none p-0",children:r.recommendations.map((t,e)=>v.jsx("li",{className:"mb-4 p-2.5 border border-gray-300 rounded",children:v.jsx("div",{className:"text-gray-700",children:t})},e))})]})]}):null,re={UNREADABLE:"UNREADABLE",GENERAL:"GENERAL",BUSINESS_LEGAL:"BUSINESS_LEGAL"},ZR=[{id:"unreadable_broken",label:"Unreadable / broken file",category:re.UNREADABLE,synonyms:["corrupt","broken","invalid pdf","cannot open","damaged"]},{id:"unreadable_encrypted",label:"Password-protected / encrypted",category:re.UNREADABLE,synonyms:["encrypted","password","protected"]},{id:"unreadable_empty",label:"Empty / blank document",category:re.UNREADABLE,synonyms:["blank","empty","no text"]},{id:"general_letter",label:"Letter (general / personal)",category:re.GENERAL,synonyms:["letter","correspondence","personal letter"]},{id:"general_police_letter",label:"Police letter / notice",category:re.GENERAL,synonyms:["police","notice","infringement","fine","offence"]},{id:"general_presentation",label:"Presentation / pitch deck",category:re.GENERAL,synonyms:["deck","slides","presentation","pitch"]},{id:"general_marketing",label:"Flyer / advertisement / marketing",category:re.GENERAL,synonyms:["flyer","ad","advertisement","brochure","marketing"]},{id:"general_book",label:"Book / long-form text",category:re.GENERAL,synonyms:["book","chapter","novel","story","longform"]},{id:"general_notes",label:"Notes / diary / journal",category:re.GENERAL,synonyms:["notes","diary","journal","private notes"]},{id:"general_schedule",label:"Schedule / timetable",category:re.GENERAL,synonyms:["schedule","timetable","calendar","rota"]},{id:"general_sop_procedure",label:"SOP / procedure",category:re.GENERAL,synonyms:["sop","procedure","runbook","work instruction","instructions","guide"],validationSlug:"sop-procedure"},{id:"general_resume_cv",label:"Resume / CV",category:re.GENERAL,synonyms:["resume","cv","curriculum vitae","work experience","education","skills"]},{id:"legal_job_offer",label:"Job offer / offer letter",category:re.BUSINESS_LEGAL,synonyms:["offer letter","job offer","employment offer","compensation","salary","starting date"],validationSlug:"job-offer"},{id:"legal_contract_generic",label:"Contract / agreement (general)",category:re.BUSINESS_LEGAL,synonyms:["agreement","contract","terms","conditions"]},{id:"legal_employment_contract",label:"Employment contract",category:re.BUSINESS_LEGAL,synonyms:["employment","employee","employer","salary","position"]},{id:"legal_nda",label:"NDA / confidentiality agreement",category:re.BUSINESS_LEGAL,synonyms:["nda","non-disclosure","confidentiality"]},{id:"legal_lease_residential",label:"Residential lease / tenancy agreement",category:re.BUSINESS_LEGAL,synonyms:["lease","tenancy","rent","bond","landlord","tenant"]},{id:"legal_lease_commercial",label:"Commercial lease",category:re.BUSINESS_LEGAL,synonyms:["commercial lease","premises","outgoings"]},{id:"business_invoice",label:"Invoice",category:re.BUSINESS_LEGAL,synonyms:["invoice","tax invoice","payment due"],validationSlug:"invoice"},{id:"business_purchase_order",label:"Purchase order",category:re.BUSINESS_LEGAL,synonyms:["purchase order","po","order"]},{id:"policy_privacy",label:"Privacy policy",category:re.BUSINESS_LEGAL,synonyms:["privacy policy","personal information","data collection"],validationSlug:"company-policy"},{id:"policy_terms",label:"Terms of service / website terms",category:re.BUSINESS_LEGAL,synonyms:["terms of service","terms","conditions","website terms"]}];function ww(){const[r,t]=I.useState(null);I.useEffect(()=>{let l=!1;return(async()=>{try{const h=await fetch("/classifications/document-types.index.json",{cache:"force-cache"});if(!h.ok)throw new Error(`Failed to load document types: ${h.status}`);const d=await h.json(),f=Array.isArray(d?.types)?d.types:null;if(f)for(const g of f)"validationSlug"in g||(g.validationSlug=null);if(!f)throw new Error("Invalid document-types.index.json");l||t(f)}catch{l||t(null)}})(),()=>{l=!0}},[]);const e=I.useMemo(()=>Array.isArray(r)&&r.length?r:ZR,[r]),i=I.useMemo(()=>l=>{const c=String(l||"").trim().toLowerCase();if(!c)return e;const h=d=>{const f=String(d.label||"").toLowerCase(),g=Array.isArray(d.synonyms)?d.synonyms.join(" ").toLowerCase():"";if(f.includes(c))return 100;if(g.includes(c))return 80;const y=c.split(/\s+/).filter(Boolean);return y.length&&y.every(b=>f.includes(b)||g.includes(b))?60:0};return e.map(d=>({t:d,s:h(d)})).filter(d=>d.s>0).sort((d,f)=>f.s-d.s).map(d=>d.t)},[e]);return{types:e,find:i,categories:re,source:Array.isArray(r)&&r.length?"remote":"bundled"}}const JR=(r,t)=>r===t.BUSINESS_LEGAL?"Business & legal":r===t.GENERAL?"General documents":r===t.UNREADABLE?"Unreadable / special cases":"Other";function t2({open:r,onClose:t,detectedType:e,onPick:i}){const[a,l]=I.useState(""),[c,h]=I.useState(0),d=I.useRef(null),{types:f,find:g,categories:y,source:b}=ww();I.useEffect(()=>{r&&(l(""),h(0),setTimeout(()=>d.current?.focus(),0))},[r]);const w=I.useMemo(()=>{const C=g(a);return a?C.slice(0,30):f.slice(0,25)},[a,g,f]),x=I.useMemo(()=>{const C=new Map;for(const R of w){const M=R.category;C.has(M)||C.set(M,[]),C.get(M).push(R)}return Array.from(C.entries())},[w]),S=I.useMemo(()=>w,[w]),_=C=>{const R=S[C];R&&i?.(R)},E=C=>{if(C.key==="Escape"){t?.();return}if(C.key==="ArrowDown"){C.preventDefault(),h(R=>Math.min(R+1,S.length-1));return}if(C.key==="ArrowUp"){C.preventDefault(),h(R=>Math.max(R-1,0));return}C.key==="Enter"&&(C.preventDefault(),_(c))};return r?v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2500,padding:16},onClick:()=>t?.(),children:v.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:760,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:C=>C.stopPropagation(),onKeyDown:E,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"flex-start"},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Change document type"}),v.jsx("div",{style:{marginTop:6,color:"#475569",lineHeight:1.4},children:"We use this to decide which actions/checks to show. You can override the AI classification."}),e&&v.jsxs("div",{style:{marginTop:8,color:"#64748b",fontSize:13},children:["Detected: ",v.jsx("strong",{children:e.label})]})]}),v.jsx("button",{type:"button",onClick:()=>t?.(),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),v.jsx("input",{ref:d,value:a,onChange:C=>{l(C.target.value),h(0)},placeholder:"Start typing (e.g. lease, invoice, police letter)",style:{marginTop:14,width:"100%",padding:12,borderRadius:12,border:"1px solid #e2e8f0"}}),v.jsxs("div",{style:{marginTop:14,maxHeight:360,overflow:"auto"},children:[x.map(([C,R])=>v.jsxs("div",{style:{marginBottom:14},children:[v.jsxs("div",{style:{fontWeight:900,color:"#0f172a",fontSize:13,marginBottom:8},children:[JR(C,y),v.jsxs("span",{style:{marginLeft:8,color:"#94a3b8",fontWeight:800},children:["(",b,")"]})]}),v.jsx("div",{style:{display:"grid",gap:8},children:R.map(M=>{const O=S.findIndex(B=>B.id===M.id),P=O===c;return v.jsxs("button",{type:"button",onClick:()=>i?.(M),onMouseEnter:()=>h(O),style:{textAlign:"left",padding:"10px 12px",borderRadius:12,border:"1px solid "+(P?"#0f172a":"#e2e8f0"),background:P?"#f8fafc":"#fff",cursor:"pointer"},children:[v.jsx("div",{style:{fontWeight:900,color:"#0f172a"},children:M.label}),v.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:2},children:M.id})]},M.id)})})]},C)),!x.length&&v.jsx("div",{style:{color:"#64748b"},children:"No matches."})]})]})}):null}function e2(r){const[t,e]=I.useState({status:"idle",spec:null,error:null});return I.useEffect(()=>{if(!r){e({status:"idle",spec:null,error:null});return}let i=!1;return(async()=>{e({status:"loading",spec:null,error:null});try{const l=await fetch(`/classifications/validation/${r}.json`,{cache:"force-cache"});if(!l.ok)throw new Error(`Failed to load validation spec: ${l.status}`);const c=await l.json();i||e({status:"ready",spec:c,error:null})}catch(l){i||e({status:"error",spec:null,error:l})}})(),()=>{i=!0}},[r]),t}const n2=(r,t)=>{const e=I.useRef(null),i=I.useRef(null),a=I.useRef(null),l=g=>{alert(`Clause: ${g.text}

${g.details||"No details available."}`)},c=g=>{alert(`Risk: ${g.description}

${g.explanation||"No explanation available."}`)},h=I.useCallback(async(g,y)=>{if(i.current){i.current.innerHTML="";try{const w=(await g.getTextContent()).items,x=y.transform;for(const S of w){const _=document.createElement("span");_.textContent=S.str,_.style.position="absolute",_.style.color="transparent",_.style.whiteSpace="pre",_.style.fontSize=`${S.height}px`,_.style.fontFamily="sans-serif",_.style.lineHeight="1";const E=x[0]*S.transform[4]+x[2]*S.transform[5]+x[4],C=x[1]*S.transform[4]+x[3]*S.transform[5]+x[5];_.style.left=`${E}px`,_.style.top=`${C}px`,_.style.width=`${S.width*x[0]}px`,_.style.height=`${S.height*x[3]}px`,i.current.appendChild(_)}}catch(b){console.error("Error rendering text layer:",b)}}},[]),d=I.useCallback((g,y,b,w,x)=>{a.current&&(a.current.innerHTML="",b.filter(S=>S.pageNum===g).forEach(S=>{const _=document.createElement("div");_.className="highlight-overlay",_.style.position="absolute",_.style.backgroundColor="rgba(255, 255, 0, 0.3)",_.style.border="1px solid rgba(255, 255, 0, 0.5)",_.style.left=`${S.x}px`,_.style.top=`${S.y}px`,_.style.width=`${S.width}px`,_.style.height=`${S.height}px`,_.style.pointerEvents="none",_.dataset.page=g,a.current.appendChild(_)}),w.filter(S=>S.pageNum===g).forEach(S=>{const _=document.createElement("div");_.className="clause-marker",_.style.position="absolute",_.style.left=`${S.x}px`,_.style.top=`${S.y}px`,_.style.width="20px",_.style.height="20px",_.style.borderRadius="50%",_.style.backgroundColor="rgba(0, 123, 255, 0.7)",_.style.cursor="pointer",_.style.zIndex="10",_.title=S.text,_.onclick=()=>l(S),a.current.appendChild(_)}),x.filter(S=>S.pageNum===g).forEach(S=>{const _=document.createElement("div");_.className="risk-badge",_.style.position="absolute",_.style.left=`${S.x}px`,_.style.top=`${S.y}px`,_.style.padding="2px 6px",_.style.borderRadius="10px",_.style.fontSize="12px",_.style.fontWeight="bold",_.style.color="white",_.style.backgroundColor=S.level==="high"?"#dc3545":S.level==="medium"?"#fd7e14":"#ffc107",_.style.cursor="pointer",_.style.zIndex="10",_.title=S.description,_.onclick=()=>c(S),_.textContent=S.level.toUpperCase(),a.current.appendChild(_)}))},[]),f=I.useCallback(async(g,y=[],b=[],w=[])=>{if(!(!r||!e.current))try{const x=await r.getPage(g),S=e.current,_=S.getContext("2d"),E=t,C=x.getViewport({scale:E});S.height=C.height,S.width=C.width,_.clearRect(0,0,S.width,S.height);const R={canvasContext:_,viewport:C};await x.render(R).promise,await h(x,C),d(g,C,y,b,w)}catch(x){console.error("Error rendering page:",x)}},[r,t,h,d]);return{canvasRef:e,textLayerRef:i,annotationsRef:a,renderPage:f}},Ye=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Rf=[.001,0,0,.001,0,0],rf=1.35,mn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ki={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Xo="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Aw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Df={TRIANGLES:1,LATTICE:2},Te={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Fo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},me={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},er={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ll={ERRORS:0,WARNINGS:1,INFOS:5},yr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Co={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Sw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wu=ll.WARNINGS;function i2(r){Number.isInteger(r)&&(wu=r)}function s2(){return wu}function Au(r){wu>=ll.INFOS&&console.info(`Info: ${r}`)}function St(r){wu>=ll.WARNINGS&&console.warn(`Warning: ${r}`)}function Kt(r){throw new Error(r)}function Lt(r,t){r||Kt(t)}function a2(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lp(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=u2(r)}catch{}const i=t?URL.parse(r,t):URL.parse(r);return a2(i)?i:null}function cp(r,t,e=!1){const i=URL.parse(r);return i?(i.hash=t,i.href):e&&lp(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function bt(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const oa=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class w0 extends oa{constructor(t,e){super(t,"PasswordException"),this.code=e}}class of extends oa{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class lu extends oa{constructor(t){super(t,"InvalidPDFException")}}class Wo extends oa{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class r2 extends oa{constructor(t){super(t,"FormatError")}}class Fi extends oa{constructor(t){super(t,"AbortException")}}function xw(r){(typeof r!="object"||r?.length===void 0)&&Kt("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=r.subarray(a,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function cl(r){typeof r!="string"&&Kt("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function o2(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function l2(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function c2(){try{return new Function(""),!0}catch{return!1}}class xe{static get isLittleEndian(){return bt(this,"isLittleEndian",l2())}static get isEvalSupported(){return bt(this,"isEvalSupported",c2())}static get isOffscreenCanvasSupported(){return bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return bt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return bt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return bt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return bt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const lf=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class st{static makeHexColor(t,e,i){return`#${lf[t]}${lf[e]}${lf[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const y=t[i+g],b=t[i+g+1];t[i+g]=y*a+b*c+d,t[i+g+1]=y*l+b*h+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5],g=t[0],y=t[1],b=t[2],w=t[3];let x=a*g+d,S=x,_=a*b+d,E=_,C=h*y+f,R=C,M=h*w+f,O=M;if(l!==0||c!==0){const P=l*g,B=l*b,W=c*y,K=c*w;x+=W,E+=W,_+=K,S+=K,C+=P,O+=P,M+=B,R+=B}i[0]=Math.min(i[0],x,_,S,E),i[1]=Math.min(i[1],C,M,R,O),i[2]=Math.max(i[2],x,_,S,E),i[3]=Math.max(i[3],C,M,R,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],c=t[3],h=i**2+a**2,d=i*l+a*c,f=l**2+c**2,g=(h+f)/2,y=Math.sqrt(g**2-(h*f-d**2));e[0]=Math.sqrt(g+y||1),e[1]=Math.sqrt(g-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,c,h,d,f,g){if(f<=0||f>=1)return;const y=1-f,b=f*f,w=b*f,x=y*(y*(y*t+3*f*e)+3*b*i)+w*a,S=y*(y*(y*l+3*f*c)+3*b*h)+w*d;g[0]=Math.min(g[0],x),g[1]=Math.min(g[1],S),g[2]=Math.max(g[2],x),g[3]=Math.max(g[3],S)}static#e(t,e,i,a,l,c,h,d,f,g,y,b){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,i,a,l,c,h,d,-y/g,b);return}const w=g**2-4*y*f;if(w<0)return;const x=Math.sqrt(w),S=2*f;this.#t(t,e,i,a,l,c,h,d,(-g+x)/S,b),this.#t(t,e,i,a,l,c,h,d,(-g-x)/S,b)}static bezierBoundingBox(t,e,i,a,l,c,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,i,l,h,e,a,c,d,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),f),this.#e(t,i,l,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function u2(r){return decodeURIComponent(escape(r))}let cf=null,A0=null;function _w(r){return cf||(cf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,A0=new Map([["","t"]])),r.replaceAll(cf,(t,e,i)=>e?e.normalize("NFKC"):A0.get(i))}function up(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),xw(r)}const ir="pdfjs_internal_id_";function h2(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!r(i)&&!Number.isInteger(i)||!t(a))return!1;const c=l.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function He(r,t,e){return Math.min(Math.max(r,t),e)}function Ew(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(xw(r))}function d2(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):cl(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class Ko{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(Ko.shouldBuildText(h))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class hp{static setupStorage(t,e,i,a,l){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of i.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:i});const h=l!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),h&&Ko.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[y,b,w]=g.at(-1);if(b+1===y.children.length){g.pop();continue}const x=y.children[++g.at(-1)[1]];if(x===null)continue;const{name:S}=x;if(S==="#text"){const E=document.createTextNode(x.value);f.push(E),w.append(E);continue}const _=x?.attributes?.xmlns?document.createElementNS(x.attributes.xmlns,S):document.createElement(S);if(w.append(_),x.attributes&&this.setAttributes({html:_,element:x,storage:e,intent:l,linkService:i}),x.children?.length>0)g.push([x,-1,_]);else if(x.value){const E=document.createTextNode(x.value);h&&Ko.shouldBuildText(S)&&f.push(E),_.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Di="http://www.w3.org/2000/svg";class sa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Cr(r,t="text"){if(Oo(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class ul{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,y,b,w;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,y=0,b=0,w=1;break;case 90:g=0,y=1,b=1,w=0;break;case 270:g=0,y=-1,b=-1,w=0;break;case 0:g=1,y=0,b=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,w=-w);let x,S,_,E;g===0?(x=Math.abs(f-t[1])*i+l,S=Math.abs(d-t[0])*i+c,_=(t[3]-t[1])*i,E=(t[2]-t[0])*i):(x=Math.abs(d-t[0])*i+l,S=Math.abs(f-t[1])*i+c,_=(t[2]-t[0])*i,E=(t[3]-t[1])*i),this.transform=[g*i,y*i,b*i,w*i,x-g*i*d-b*i*f,S-y*i*d-w*i*f],this.width=_,this.height=E}get rawDims(){const t=this.viewBox;return bt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new ul({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return st.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];st.applyTransform(e,this.transform);const i=[t[2],t[3]];return st.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return st.applyInverseTransform(i,this.transform),i}}class Su extends oa{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function hl(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function xu(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Tw(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Cw(r,t="document.pdf"){if(typeof r!="string")return t;if(hl(r))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return a(c);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const f of h)if(l.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class S0{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Oo(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function vn(r){r.preventDefault()}function le(r){r.preventDefault(),r.stopPropagation()}function f2(r){console.log("Deprecated API usage: "+r)}class cu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=g,h+=y):f==="+"&&(c-=g,h-=y),new Date(Date.UTC(i,a,l,c,h,d))}}function Rw(r,{scale:t=1,rotation:e=0}){const{width:i,height:a}=r.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new ul({viewBox:l,userUnit:1,scale:t,rotation:e})}function Rr(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${r}"`),[0,0,0])}function p2(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;r.set(e,Rr(i))}t.remove()}function oe(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform();return[t,e,i,a,l,c]}function Jn(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform().invertSelf();return[t,e,i,a,l,c]}function Ts(r,t,e=!1,i=!0){if(t instanceof ul){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=r,h=xe.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=y):(c.width=y,c.height=g)}i&&r.setAttribute("data-main-rotation",t.rotation)}class Gn{constructor(){const{pixelRatio:t}=Gn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let c=1/0,h=1/0,d=1/0;i=Gn.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(c,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const uu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class g2{static get isDarkMode(){return bt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Dw{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),bt(this,"commentForegroundColor",Rr(i))}}function Nw(r,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return r=Math.round(r*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[r,t,e]}function x0(r,t){const e=r[0]/255,i=r[1]/255,a=r[2]/255,l=Math.max(e,i,a),c=Math.min(e,i,a),h=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const d=l-c;switch(t[1]=h<.5?d/(l+c):d/(2-l-c),l){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=h}function Nf(r,t){const e=r[0],i=r[1],a=r[2],l=(1-Math.abs(2*a-1))*i,c=l*(1-Math.abs(e/60%2-1)),h=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=l+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=c+h;break}}function _0(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function E0(r,t,e){Nf(r,e),e.map(_0);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Nf(t,e),e.map(_0);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const T0=new Map;function Mw(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=T0.get(e);if(i)return i;const a=new Float32Array(9),l=a.subarray(0,3),c=a.subarray(3,6);x0(r,c);const h=a.subarray(6,9);x0(t,h);const d=h[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),E0(c,h,l)<f){let g,y;d?(g=c[2],y=1):(g=0,y=c[2]);const b=.005;for(;y-g>b;){const w=c[2]=(g+y)/2;d===E0(c,h,l)<f?g=w:y=w}c[2]=d?y:g}return Nf(c,l),i=st.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),T0.set(e,i),i}function dp({html:r,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof r=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const f=c[h];l.append(document.createTextNode(f)),h<d-1&&l.append(document.createElement("br"))}a.append(l)}else hp.render({xfaHtml:r,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),i.append(a)}function kw(r){const t=new Path2D;if(!r)return t;for(let e=0,i=r.length;e<i;)switch(r[e++]){case Co.moveTo:t.moveTo(r[e++],r[e++]);break;case Co.lineTo:t.lineTo(r[e++],r[e++]);break;case Co.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Co.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Co.closePath:t.closePath();break;default:St(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}class zo{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,zo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",vn,{signal:e}),t.addEventListener("pointerdown",zo.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:l}=t,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,le(t)}#h(t){this.#i._focusEventsAllowed=!0,le(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",vn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",zo.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#a)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#s=this.#m;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class m2{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",vn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,a=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const h=l.x+(e?l.width:0);if(c>i){a=h,i=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#r(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,i,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",vn,{signal:h}),l.addEventListener("click",a,{signal:h})),this.#t.append(l)}}function Lw(r,t,e){for(const i of e)t.addEventListener(i,r[i].bind(r))}class Ft{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(Ft.#e||=new Set).add(t)}static setPointer(t,e){Ft.#t||=e,Ft.#n??=t}static setTimeStamp(t){Ft.#i=t}static isSamePointerId(t){return Ft.#t===t}static isSamePointerIdOrRemove(t){return Ft.#t===t?!0:(Ft.#e?.delete(t),!1)}static isSamePointerType(t){return Ft.#n===t}static isInitializedAndDifferentPointerType(t){return Ft.#n!==null&&!Ft.isSamePointerType(t)}static isSameTimeStamp(t){return Ft.#i===t}static isUsingMultiplePointers(){return Ft.#e?.size>=1}static clearPointerType(){Ft.#n=null}static clearPointerIds(){Ft.#t=NaN,Ft.#e=null}static clearTimeStamp(){Ft.#i=NaN}}class y2{#t=0;get id(){return`${Xo}${this.#t++}`}}class fp{#t=up();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return bt(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Cr(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=fp._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,f()},c.onload=async()=>{const y=i.svgUrl=c.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=g});c.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){St(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#n(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class b2{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===l){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class dl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=xe.platform;for(const[i,a,l={}]of t)for(const c of i){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:h=null}}=i;h&&!h(t,e)||(a.bind(t,...c,e)(),l||le(e))}}class pp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return p2(t),bt(this,"_colors",t)}convert(t){const e=Rr(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,c)=>l===e[c]))return pp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?st.makeHexColor(...e):t}}class zi{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new b2;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#x=null;#A=null;#C=null;#w=!1;#_=null;#N=new y2;#R=!1;#D=!1;#j=!1;#k=null;#O=null;#B=null;#I=null;#V=null;#T=At.NONE;#S=new Set;#L=null;#U=null;#z=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#q=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=zi.prototype,e=c=>c.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return bt(this,"_keyboardManager",new dl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,c,h,d,f,g,y,b,w,x,S,_){const E=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=i,this.#a=a,this.#l=l,this.#U=c,this.#$=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:E}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),h._on("setpreference",this.onSetPreference.bind(this),{signal:E}),h._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#E=d.filterFactory,this.#z=f,this.#C=g||null,this.#y=y,this.#v=b,this.#b=w,this.#V=x||null,this.viewParameters={realScale:sa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=_!==!1,l?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return bt(this,"hcmFilter",this.#z?this.#E.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return bt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return bt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return bt(this,"highlightColors",null);const e=new Map,i=!!this.#z;for(const[a,l]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),l);continue}!i&&!c&&e.set(a,l)}return bt(this,"highlightColors",e)}get highlightColorNames(){return bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:a,y:l,width:c,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+h)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*sa.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h}=i,d=i.toString(),g=this.#Q(i).closest(".textLayer"),y=this.getSelectionBoxes(g);if(!y)return;i.empty();const b=this.#tt(g),w=this.#T===At.NONE,x=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h,text:d});w&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(w){this.switchToMode(At.HIGHLIGHT,x);return}x()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#_||=new m2(this),this.#_.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Xo}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#_?.hide(),this.#L=null,this.#M({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#L&&(this.#_?.hide(),this.#L=null,this.#M({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#L=e,this.#M({hasSelectedText:!0}),!(this.#T!==At.HIGHLIGHT&&this.#T!==At.NONE)&&(this.#T===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===At.HIGHLIGHT?this.#tt(a):null;if(l?.toggleDrawing(),this.#D){const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#k?.abort(),this.#k=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){St(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;l.push(f)}const c=()=>{for(const d of l)this.#nt(d);this.#it(l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){St(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==At.NONE&&!this.isEditorHandlingKeyboard&&zi._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#M(t){Object.entries(t).some(([i,a])=>this.#X[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#T===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#M({isEditing:this.#T!==At.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#M({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,l=!1,c=!1){if(this.#T!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===At.NONE){this.setEditingState(!1),this.#pt();for(const h of this.#n.values())h.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const h of this.#n.values())h.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#U?.loadSignatures(),i&&Ft.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const h of this.#r.values())h.updateMode(t);if(t===At.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const h=new Set,d=[];for(const f of this.#n.values()){const{annotationElementId:g,hasComment:y,deleted:b}=f;g&&h.add(g),y&&!b&&d.push(f.getData())}for(const f of this.#i){const{id:g,popupRef:y,contentsObj:b}=f;y&&b?.str&&!h.has(g)&&!this.#m.has(g)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){a&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const h of this.#n.values())h.uid===e?(this.setSelected(h),c?h.editComment():l?h.enterInEditMode():h.focus()):h.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(e);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#n.values())l.editorType===t&&l.show(e);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#j!==t){this.#j=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#M({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#M({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#M({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#M({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#M({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#nt(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#M({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#M({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,l]=this.#H,c=[...this.#S],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},h);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#S)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:a,y:l,pageIndex:c},h]of t)h.newX=a,h.newY=l,h.newPageIndex=c,e||=a!==h.savedX||l!==h.savedY||c!==h.savedPageIndex;if(!e)return!1;const i=(a,l,c,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,l,c):(a.pageIndex=h,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:h}]of t)i(a,l,c,h)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:h}]of t)i(a,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==At.NONE}get imageManager(){return bt(this,"imageManager",new fp)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,y,b)=>({x:(g-a)/c,y:1-(f+y-i)/l,width:b/c,height:y/l});break;case"180":h=(f,g,y,b)=>({x:1-(f+y-i)/l,y:1-(g+b-a)/c,width:y/l,height:b/c});break;case"270":h=(f,g,y,b)=>({x:1-(g+b-a)/c,y:(f-i)/l,width:b/c,height:y/l});break;default:h=(f,g,y,b)=>({x:(f-i)/l,y:(g-a)/c,width:y/l,height:b/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:w,width:x,height:S}of y.getClientRects())x===0||S===0||d.push(h(b,w,x,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#T===At.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#I?.get(t);a&&(a.setCanvas(e,i),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class ni{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,ni.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){ni._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",ni.#f.missing),e.setAttribute("data-l10n-id",ni.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",vn,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,a(l))},{signal:i}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await ni._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",ni.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",ni.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Ic{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/c,(e+i-l)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",vn,{signal:i}),e&&(t.addEventListener("focusin",l=>{this.#n._focusEventsAllowed=!1,le(l)},{capture:!0,signal:i}),t.addEventListener("focusout",l=>{this.#n._focusEventsAllowed=!0,le(l)},{capture:!0,signal:i})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#i=!0,a(l))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:g,height:y,x:b,y:w}=this.#n;i=b+i*g,a=w+a*y}const l=this.#n.parent.boundingClientRect,{x:c,y:h,width:d,height:f}=l;this.#n._uiManager.editComment(this.#n,c+i*d,h+a*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class fl{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#i=i,this.#n=e,this.#r=a,this.#a=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Gn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,l=AbortSignal.any([this.#c,a.signal]),c=this.#t,h={capture:!0,signal:l,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(le(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const h=this.#g.bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",le,c),l.addEventListener("pointermove",le,c),l.addEventListener("pointercancel",le,c),l.addEventListener("pointerup",le,c),this.#r?.()}if(le(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;le(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:h}=i,d=this.#l,{touch0X:f,touch0Y:g,touch1X:y,touch1Y:b}=d,w=y-f,x=b-g,S=c-a,_=h-l,E=Math.hypot(S,_)||1,C=Math.hypot(w,x)||1;if(!this.#e&&Math.abs(C-E)<=fl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=c,d.touch1Y=h,!this.#e){this.#e=!0;return}const R=[(a+c)/2,(l+h)/2];this.#a?.(R,C,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(le(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ut{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#E=0;#x=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#_=ut._zIndex++;static _borderLineWidth=-1;static _colorManager=new pp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ut.prototype._resizeWithKeyboard,e=zi.TRANSLATE_SMALL,i=zi.TRANSLATE_BIG;return bt(this,"_resizerKeyboardManager",new dl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ut.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new v2({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ut._l10n??=t,ut._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ut._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ut._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Kt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#N([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#N(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,f]=this.getBaseTranslation();c+=d,h+=f;const{style:g}=i;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ut,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:c,width:h,height:d}=this;if(h*=i,d*=a,l*=i,c*=a,this._mustFixPosition)switch(t){case 0:l=He(l,0,i-h),c=He(c,0,a-d);break;case 90:l=He(l,0,i-d),c=He(c,h,a);break;case 180:l=He(l,h,i),c=He(c,d,a);break;case 270:l=He(l,d,i),c=He(c,0,a-h);break}this.x=l/=i,this.y=c/=a;const[f,g]=this.getBaseTranslation();l+=f,c+=g,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ut.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ut.#R(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#k.bind(this,i),{signal:e}),a.addEventListener("contextmenu",vn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:i}=xe.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",le,{passive:!1,signal:c}),window.addEventListener("contextmenu",vn,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#B()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#O(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const l=this.x,c=this.y,h=this.width,d=this.height;l===t&&c===e&&h===i&&d===a||this.addCommands({cmd:this.#O.bind(this,l,c,h,d),undo:this.#O.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#I(t,e){const[i,a]=this.parentDimensions,l=this.x,c=this.y,h=this.width,d=this.height,f=ut.MIN_SIZE/i,g=ut.MIN_SIZE/a,y=this.#D(this.rotation),b=(k,U)=>[y[0]*k+y[2]*U,y[1]*k+y[3]*U],w=this.#D(360-this.rotation),x=(k,U)=>[w[0]*k+w[2]*U,w[1]*k+w[3]*U];let S,_,E=!1,C=!1;switch(t){case"topLeft":E=!0,S=(k,U)=>[0,0],_=(k,U)=>[k,U];break;case"topMiddle":S=(k,U)=>[k/2,0],_=(k,U)=>[k/2,U];break;case"topRight":E=!0,S=(k,U)=>[k,0],_=(k,U)=>[0,U];break;case"middleRight":C=!0,S=(k,U)=>[k,U/2],_=(k,U)=>[0,U/2];break;case"bottomRight":E=!0,S=(k,U)=>[k,U],_=(k,U)=>[0,0];break;case"bottomMiddle":S=(k,U)=>[k/2,U],_=(k,U)=>[k/2,0];break;case"bottomLeft":E=!0,S=(k,U)=>[0,U],_=(k,U)=>[k,0];break;case"middleLeft":C=!0,S=(k,U)=>[0,U/2],_=(k,U)=>[k,U/2];break}const R=S(h,d),M=_(h,d);let O=b(...M);const P=ut._round(l+O[0]),B=ut._round(c+O[1]);let W=1,K=1,et,tt;if(e.fromKeyboard)({deltaX:et,deltaY:tt}=e);else{const{screenX:k,screenY:U}=e,[Z,vt]=this.#l;[et,tt]=this.screenToPageTranslation(k-Z,U-vt),this.#l[0]=k,this.#l[1]=U}if([et,tt]=x(et/i,tt/a),E){const k=Math.hypot(h,d);W=K=Math.max(Math.min(Math.hypot(M[0]-R[0]-et,M[1]-R[1]-tt)/k,1/h,1/d),f/h,g/d)}else C?W=He(Math.abs(M[0]-R[0]-et),f,1)/h:K=He(Math.abs(M[1]-R[1]-tt),g,1)/d;const pt=ut._round(h*W),Et=ut._round(d*K);O=b(..._(pt,Et));const q=P-O[0],ot=B-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=pt,this.height=Et,this.x=q,this.y=ot,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new zo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(ni.initialize(ut._l10n),this.#i=new ni(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Ic(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Ic(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new Ic(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Ic(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),Lw(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new fl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#D(this.rotation),h=(P,B)=>[c[0]*P+c[2]*B,c[1]*P+c[3]*B],[d,f]=this.parentDimensions,g=this.x,y=this.y,b=this.width,w=this.height,x=ut.MIN_SIZE/d,S=ut.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/w),x/b,S/w);const _=ut._round(b*l),E=ut._round(w*l);if(_===b&&E===w)return;this.#u||=[g,y,b,w];const C=h(b/2,w/2),R=ut._round(g+C[0]),M=ut._round(y+C[1]),O=h(_/2,E/2);this.x=R-O[0],this.y=M-O[1],this.width=_,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=xe.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:e}=xe.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},h=f=>{a.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#L(f),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#x=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:y,pointerId:b}=f;if(b!==this.#s){le(f);return}const[w,x]=this.screenToPageTranslation(g-this.#E,y-this.#x);this.#E=g,this.#x=y,this._uiManager.dragSelectedEditors(w,x)},c),window.addEventListener("touchmove",le,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&h(f),le(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){h(f);return}le(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=e/a,y=this.x*l,b=this.y*c,w=this.width*l,x=this.height*c;switch(i){case 0:return[y+f+h,c-b-g-x+d,y+f+w+h,c-b-g+d];case 90:return[y+g+h,c-b+f+d,y+g+x+h,c-b+f+w+d];case 180:return[y-f-w+h,c-b+g+d,y-f+h,c-b+g+x+d];case 270:return[y-g-x+h,c-b-f-w+d,y-g+h,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,c]=t,h=l-i,d=c-a;switch(this.rotation){case 0:return[i,e-c,h,d];case 90:return[i,e-a,d,h];case 180:return[l,e-a,h,d];case 270:return[l,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:l,richText:c},uid:h,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:i||g,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/l,a.y=d/c,a.width=f/l,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,l,c]=this.getPDFRect();return[ut._round(i+(l-i)*t),ut._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#Y.bind(this),h=this.#$.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#X.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ut._l10nResizer[g])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)this.#c.append(this.#c.firstElementChild);else if(l>a)for(let h=0;h<l-a;h++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const h of e){const f=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ut._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ut._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#X(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#I(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let a=this.#A.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},ut._telemetryTimeout),this.#A.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class v2 extends ut{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const C0=3285377520,Nn=4294901760,ti=65535;class Ow{constructor(t){this.h1=t?t&4294967295:C0,this.h2=t?t&4294967295:C0}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,_=t.length;S<_;S++){const E=t.charCodeAt(S);E<=255?e[i++]=E:(e[i++]=E>>>8,e[i++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const y=3432918353,b=461845907,w=y&ti,x=b&ti;for(let S=0;S<a;S++)S&1?(h=c[S],h=h*y&Nn|h*w&ti,h=h<<15|h>>>17,h=h*b&Nn|h*x&ti,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&Nn|d*w&ti,d=d<<15|d>>>17,d=d*b&Nn|d*x&ti,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&Nn|h*w&ti,h=h<<15|h>>>17,h=h*b&Nn|h*x&ti,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Nn|t*36045&ti,e=e*4283543511&Nn|((e<<16|t>>>16)*2950163797&Nn)>>>16,t^=e>>>1,t=t*444984403&Nn|t*60499&ti,e=e*3301882366&Nn|((e<<16|t>>>16)*3120437893&Nn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Mf=Object.freeze({map:null,hash:"",transfer:void 0});class gp{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ut&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof ut)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(a=!0,i[l]=c);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof ut&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Iw(this)}get serializable(){if(this.#n.size===0)return Mf;const t=new Map,e=new Ow,i=[],a=Object.create(null);let l=!1;for(const[c,h]of this.#n){const d=h instanceof ut?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Mf}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const l of this.#n.values()){if(!(l instanceof ut)){l.popup&&(l.popup.deleted?a+=1:i+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(i+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(g)??0;y.set(g,b+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Iw extends gp{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){Kt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return bt(this,"modifiedIds",{ids:new Set,hash:""})}}class w2{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(Lt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,h=new FontFace(a,l,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Kt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw St(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return bt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return bt(this,"isSyncFontLoadingSupported",Ye||xe.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Lt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return bt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(M,O){return M.charCodeAt(O)<<24|M.charCodeAt(O+1)<<16|M.charCodeAt(O+2)<<8|M.charCodeAt(O+3)&255}function a(M,O,P,B){const W=M.substring(0,O),K=M.substring(O+P);return W+B+K}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(M,O){if(++f>30){St("Load test font never loaded."),O();return}if(d.font="30px "+M,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(g.bind(null,M,O))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const x=16,S=1482184792;let _=i(b,x);for(l=0,c=y.length-3;l<c;l+=4)_=_-S+i(y,l)|0;l<y.length&&(_=_-S+i(y+"XXX",l)|0),b=a(b,x,4,o2(_));const E=`url(data:font/opentype;base64,${btoa(b)});`,C=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(C);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const M of[t.loadedName,y]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=M,R.append(O)}this._document.body.append(R),g(y,()=>{R.remove(),e.complete()})}}class A2{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Ew(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){St(`getPathGenerator - ignoring character: "${c}".`)}const l=kw(a?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){bt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){bt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class ur{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of ur.strings){const g=e.encode(t[f]);i[f]=g,a+=4+g.length}const l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let d=0;for(const f of ur.strings){const g=i[f],y=g.length;h.setUint32(d,y),c.set(g,d+4),d+=4+y}return Lt(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){Lt(t<ur.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class hr{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const b of hr.strings){const w=e.encode(t[b]);i[b]=w,a+=4+w.length}a+=4;let l,c,h=1+a;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+l.length+4+c.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let y=0;g.setUint8(y++,t.guessFallback?1:0),g.setUint32(y,0),y+=4,a=0;for(const b of hr.strings){const w=i[b],x=w.length;a+=4+x,g.setUint32(y,x),f.set(w,y+4),y+=4+x}return g.setUint32(y-a-4,a),t.style&&(g.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,g.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),Lt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){Lt(t<hr.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),l=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:l}}}class $t{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){Lt(t<$t.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return Lt(t<$t.numbers.length,"Invalid number index"),this.#o.getFloat64($t.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=$t.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=$t.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=$t.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){Lt(t<$t.strings.length,"Invalid string index");let e=$t.#r+4;for(let l=0;l<t;l++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,e+4,i)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=$t.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#a,t+4,l)}clearData(){let t=$t.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=$t.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(this.#a,t+4,a)),new ur(l.buffer)}get systemFontInfo(){let t=$t.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,t+4,i)),new hr(a.buffer)}static write(t){const e=t.systemFontInfo?hr.write(t.systemFontInfo):null,i=t.cssFontInfo?ur.write(t.cssFontInfo):null,a=new TextEncoder,l={};let c=0;for(const S of $t.strings)l[S]=a.encode(t[S]),c+=4+l[S].length;const h=$t.#r+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let y=0;const b=$t.bools.length;let w=0,x=0;for(let S=0;S<b;S++){const _=t[$t.bools[S]];w|=(_===void 0?0:_?2:1)<<x,x+=2,(x===8||S===b-1)&&(g.setUint8(y++,w),w=0,x=0)}Lt(y===$t.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of $t.numbers)g.setFloat64(y,t[S]),y+=8;if(Lt(y===$t.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(y++,4);for(const S of t.bbox)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=8;if(Lt(y===$t.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(y++,6);for(const S of t.fontMatrix)g.setFloat64(y,S,!0),y+=8}else g.setUint8(y++,0),y+=48;if(Lt(y===$t.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(y++,1);for(const S of t.defaultVMetrics)g.setInt16(y,S,!0),y+=2}else g.setUint8(y++,0),y+=6;Lt(y===$t.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32($t.#r,0),y+=4;for(const S of $t.strings){const _=l[S],E=_.length;g.setUint32(y,E),f.set(_,y+4),y+=4+E}if(g.setUint32($t.#r,y-$t.#r-4),!e)g.setUint32(y,0),y+=4;else{const S=e.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+S}if(!i)g.setUint32(y,0),y+=4;else{const S=i.byteLength;g.setUint32(y,S),Lt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}return t.data===void 0?(g.setUint32(y,0),y+=4):(g.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),Lt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class De{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,a=[],l=[],c=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],l=t[3],h=t[4]||[],i=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(a.length/2),y=Math.floor(l.length/3),b=c.length,w=h.length;let x=0;for(const O of h)x+=1,x=Math.ceil(x/4)*4,x+=4+O.coords.length*4,x+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(x+=4);const S=20+g*8+y*3+b*8+(i?16:0)+(f?3:0)+x,_=new ArrayBuffer(S),E=new DataView(_),C=new Uint8Array(_);E.setUint8(De.#t,e),E.setUint8(De.#e,i?1:0),E.setUint8(De.#i,f?1:0),E.setUint8(De.#n,d),E.setUint32(De.#r,g,!0),E.setUint32(De.#a,y,!0),E.setUint32(De.#s,b,!0),E.setUint32(De.#o,w,!0);let R=20;new Float32Array(_,R,g*2).set(a),R+=g*8,C.set(l,R),R+=y*3;for(const[O,P]of c)E.setFloat32(R,O,!0),R+=4,E.setUint32(R,parseInt(P.slice(1),16),!0),R+=4;if(i)for(const O of i)E.setFloat32(R,O,!0),R+=4;f&&(C.set(f,R),R+=3);for(let O=0;O<h.length;O++){const P=h[O];E.setUint8(R,P.type),R+=1,R=Math.ceil(R/4)*4,E.setUint32(R,P.coords.length,!0),R+=4,new Int32Array(_,R,P.coords.length).set(P.coords),R+=P.coords.length*4,E.setUint32(R,P.colors.length,!0),R+=4,new Int32Array(_,R,P.colors.length).set(P.colors),R+=P.colors.length*4,P.verticesPerRow!==void 0&&(E.setUint32(R,P.verticesPerRow,!0),R+=4)}return _}getIR(){const t=this.view,e=this.data[De.#t],i=!!this.data[De.#e],a=!!this.data[De.#i],l=t.getUint32(De.#r,!0),c=t.getUint32(De.#a,!0),h=t.getUint32(De.#s,!0),d=t.getUint32(De.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let _=0;_<h;++_){const E=t.getFloat32(f,!0);f+=4;const C=t.getUint32(f,!0);f+=4,b.push([E,`#${C.toString(16).padStart(6,"0")}`])}let w=null;if(i){w=[];for(let _=0;_<4;++_)w.push(t.getFloat32(f,!0)),f+=4}let x=null;a&&(x=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let _=0;_<d;++_){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const C=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,C);f+=C*4;const M=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,M);f+=M*4;const P={type:E,coords:R,colors:O};E===Df.LATTICE&&(P.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(P)}if(e===1)return["RadialAxial","axial",w,b,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",w,b,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(e===3){const _=this.data[De.#n];let E=null;if(g.length>0){let C=g[0],R=g[0],M=g[1],O=g[1];for(let P=0;P<g.length;P+=2){const B=g[P],W=g[P+1];C=C>B?B:C,M=M>W?W:M,R=R<B?B:R,O=O<W?W:O}E=[C,M,R,O]}return["Mesh",_,g,y,S,E,w,x]}throw new Error(`Unsupported pattern kind: ${e}`)}}class S2{static write(t){let e,i;return xe.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#t;constructor(t){this.#t=t}get path(){return xe.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function x2(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Ye)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function _2(r){if(Ye&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return cl(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Pc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const kf=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,E2=r=>typeof r=="object"&&typeof r?.name=="string",Pw=h2.bind(null,kf,E2);class T2{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const jc={DATA:1,ERROR:2},Se={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function R0(){}function rn(r){if(r instanceof Fi||r instanceof lu||r instanceof w0||r instanceof Wo||r instanceof of)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Kt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Fi(r.message);case"InvalidPDFException":return new lu(r.message);case"PasswordException":return new w0(r.message,r.code);case"ResponseException":return new Wo(r.message,r.status,r.missing);case"UnknownErrorException":return new of(r.message,r.details)}return new of(r.message,r.toString())}class Io{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===jc.DATA)a.resolve(t.data);else if(t.callback===jc.ERROR)a.reject(rn(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:a,callback:jc.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:a,callback:jc.ERROR,callbackId:t.callbackId,reason:rn(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,d.postMessage({sourceName:c,targetName:h,stream:Se.PULL,streamId:l,desiredSize:f.desiredSize}),g.promise},cancel:f=>{Lt(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:Se.CANCEL,streamId:l,reason:rn(f)}),g.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=g,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:Se.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:Se.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){Lt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:Se.ERROR,streamId:e,reason:rn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.START_COMPLETE,streamId:e,reason:rn(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Se.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(rn(t.reason));break;case Se.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(rn(t.reason));break;case Se.PULL:if(!h){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||R0).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,reason:rn(f)})});break;case Se.ENQUEUE:if(Lt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Se.CLOSE:if(Lt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,e);break;case Se.ERROR:Lt(c,"error should have stream controller"),c.controller.error(rn(t.reason)),this.#r(c,e);break;case Se.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(rn(t.reason)),this.#r(c,e);break;case Se.CANCEL:if(!h)break;const d=rn(t.reason);Promise.try(h.onCancel||R0,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.CANCEL_COMPLETE,streamId:e,reason:rn(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class jw{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Kt("Abstract method `_createCanvas` called.")}}class C2 extends jw{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Bw{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class D0 extends Bw{async _fetch(t){const e=await Cr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):cl(e)}}class Uw{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class R2 extends Uw{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(Di,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(Di,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const g=f.join(",");return[g,g,g]}const[e,i,a]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,h[d]=a[d]/255;return[l.join(","),c.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(hl(e)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=cp(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,l]=this.#d(t),c=t.length===1?i:`${i}${a}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#g(h);return this.#p(i,a,l,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#c.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#c.set(a,l)),!t||!e))return l.url;const c=this.#v(t);t=st.makeHexColor(...c);const h=this.#v(e);if(e=st.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let w=0;w<=255;w++){const x=w/255;d[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,y=l.filter=this.#g(g);this.#p(f,f,f,y),this.#m(y);const b=(w,x)=>{const S=c[w]/255,_=h[w]/255,E=new Array(x+1);for(let C=0;C<=x;C++)E[C]=S+C/x*(_-S);return E.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(g),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#g(l);return this.#y(i,h),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#g(l);return this.#f(h),t&&this.#y(i,h),c}addHighlightHCMFilter(t,e,i,a,l){const c=`${e}-${i}-${a}-${l}`;let h=this.#c.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#c.set(t,h)),!e||!i))return h.url;const[d,f]=[e,i].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,w]=[a,l].map(this.#v.bind(this));y<g&&([g,y,b,w]=[y,g,w,b]),this.#l.style.color="";const x=(E,C,R)=>{const M=new Array(256),O=(y-g)/R,P=E/255,B=(C-E)/(255*R);let W=0;for(let K=0;K<=R;K++){const et=Math.round(g+K*O),tt=P+K*B;for(let pt=W;pt<=et;pt++)M[pt]=tt;W=et+1}for(let K=W;K<256;K++)M[K]=M[W-1];return M.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,_=h.filter=this.#g(S);return this.#m(_),this.#p(x(b[0],w[0],5),x(b[1],w[1],5),x(b[2],w[2],5),_),h.url=this.#h(S),h.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(Di,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(Di,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Di,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#r.createElementNS(Di,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#p(t,e,i,a){const l=this.#r.createElementNS(Di,"feComponentTransfer");a.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",e),this.#u(l,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(Di,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,Rr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Fw{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class N0 extends Fw{async _fetch(t){const e=await Cr(t,"arraybuffer");return new Uint8Array(e)}}class zw{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Kt("Abstract method `_fetch` called.")}}class M0 extends zw{async _fetch(t){const e=await Cr(t,"arraybuffer");return new Uint8Array(e)}}Ye&&St("Please use the `legacy` build in Node.js environments.");async function mp(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class D2 extends Uw{}class N2 extends jw{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class M2 extends Bw{async _fetch(t){return mp(t)}}class k2 extends Fw{async _fetch(t){return mp(t)}}class L2 extends zw{async _fetch(t){return mp(t)}}const tr="__forcedDependency",{floor:k0,ceil:L0}=Math;function Bc(r,t,e,i,a,l){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],i),r[t*4+2]=Math.max(r[t*4+2],a),r[t*4+3]=Math.max(r[t*4+3],l)}const Lf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class O2{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Lf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Uc=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};class I2{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[tr]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(Lf,e.length)):this.#u.fill(Lf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[tr]:{__proto__:this.#e[tr]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(Uc(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Uc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Uc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(st.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(tr,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(tr,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,l,c){const h=st.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([i,l,a,c],h,d);const f=st.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,a,l,c){const h=this.#s;if(h[0]===1/0)return this;const d=st.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(h[0]===-1/0)return st.axialAlignedBoundingBox([i,l,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([i,l,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,i,a=1,l=0,c=0,h){const d=i.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(g=[0,0,0,0],st.axialAlignedBoundingBox(d,i.fontMatrix,g),(a!==1||l!==0||c!==0)&&st.scaleMinMax([a,0,0,-a,l,c],g),f)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&g&&f===void 0&&(f=g[0]<=l-y.actualBoundingBoxLeft&&g[2]>=l+y.actualBoundingBoxRight&&g[1]<=c-y.actualBoundingBoxAscent&&g[3]>=c+y.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in l&&l[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[tr]),this.#p){const i=Uc(this.#p,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=k0(this.#o[0]*256/this.#f),a=k0(this.#o[1]*256/this.#m),l=L0(this.#o[2]*256/this.#f),c=L0(this.#o[3]*256/this.#m);Bc(this.#g,t,i,a,l,c);for(const h of this.#l)h!==t&&Bc(this.#g,h,i,a,l,c);for(const h of this.#n)h!==t&&Bc(this.#g,h,i,a,l,c);for(const h of this.#r)h!==t&&Bc(this.#g,h,i,a,l,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new O2(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class hu{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof hu&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,l,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,l,c),this}recordBBox(t,e,i,a,l,c){return this.#i||this.#t.recordBBox(this.#e,e,i,a,l,c),this}recordCharacterBBox(t,e,i,a,l,c,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,l,c,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Mn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},je={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Of(r,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),r.clip(a)}class yp{isModifyingCurrentTransform(){return!1}getPattern(){Kt("Abstract method `getPattern` called.")}}class P2 extends yp{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,a=this._p0,l=this._p1;if(e&&(a=a.slice(),l=l.slice(),st.applyTransform(a,e),st.applyTransform(l,e)),this._type==="axial")i=t.createLinearGradient(a[0],a[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,h=this._r1;if(e){const d=new Float32Array(2);st.singularValueDecompose2dScale(e,d),c*=d[0],h*=d[0]}i=t.createRadialGradient(a[0],a[1],c,l[0],l[1],h)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(t,e,i,a){let l;if(a===je.STROKE||a===je.FILL){if(this.isOriginBased()){let b=st.transform(i,e.baseTransform);this.matrix&&(b=st.transform(b,this.matrix));const w=.001,x=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),_=(b[0]*b[2]+b[1]*b[3])/(x*S);if(Math.abs(_)<w)if(this.isRadial()){if(Math.abs(x-S)<w)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=e.current.getClippedPathBoundingBox(a,oe(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=st.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),Of(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);l.setTransform(y)}else Of(t,this._bbox),l=this._createGradient(t);return l}}function uf(r,t,e,i,a,l,c,h){const d=t.coords,f=t.colors,g=r.data,y=r.width*4;let b;d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b),d[i+1]>d[a+1]&&(b=i,i=a,a=b,b=c,c=h,h=b),d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b);const w=(d[e]+t.offsetX)*t.scaleX,x=(d[e+1]+t.offsetY)*t.scaleY,S=(d[i]+t.offsetX)*t.scaleX,_=(d[i+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,C=(d[a+1]+t.offsetY)*t.scaleY;if(x>=C)return;const R=f[l],M=f[l+1],O=f[l+2],P=f[c],B=f[c+1],W=f[c+2],K=f[h],et=f[h+1],tt=f[h+2],pt=Math.round(x),Et=Math.round(C);let q,ot,k,U,Z,vt,yt,D;for(let V=pt;V<=Et;V++){if(V<_){const dt=V<x?0:(x-V)/(x-_);q=w-(w-S)*dt,ot=R-(R-P)*dt,k=M-(M-B)*dt,U=O-(O-W)*dt}else{let dt;V>C?dt=1:_===C?dt=0:dt=(_-V)/(_-C),q=S-(S-E)*dt,ot=P-(P-K)*dt,k=B-(B-et)*dt,U=W-(W-tt)*dt}let Q;V<x?Q=0:V>C?Q=1:Q=(x-V)/(x-C),Z=w-(w-E)*Q,vt=R-(R-K)*Q,yt=M-(M-et)*Q,D=O-(O-tt)*Q;const nt=Math.round(Math.min(q,Z)),ht=Math.round(Math.max(q,Z));let gt=y*V+nt*4;for(let dt=nt;dt<=ht;dt++)Q=(q-dt)/(q-Z),Q<0?Q=0:Q>1&&(Q=1),g[gt++]=ot-(ot-vt)*Q|0,g[gt++]=k-(k-yt)*Q|0,g[gt++]=U-(U-D)*Q|0,g[gt++]=255}}function j2(r,t,e){const i=t.coords,a=t.colors;let l,c;switch(t.type){case Df.LATTICE:const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,f=h-1;for(l=0;l<d;l++){let g=l*h;for(let y=0;y<f;y++,g++)uf(r,e,i[g],i[g+1],i[g+h],a[g],a[g+1],a[g+h]),uf(r,e,i[g+h+1],i[g+1],i[g+h],a[g+h+1],a[g+1],a[g+h])}break;case Df.TRIANGLES:for(l=0,c=i.length;l<c;l+=3)uf(r,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class B2 extends yp{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),w=f/y,x=g/b,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/w,scaleY:1/x},_=y+4,E=b+4,C=i.getCanvas("mesh",_,E),R=C.context,M=R.createImageData(y,b);if(e){const P=M.data;for(let B=0,W=P.length;B<W;B+=4)P[B]=e[0],P[B+1]=e[1],P[B+2]=e[2],P[B+3]=255}for(const P of this._figures)j2(M,P,S);return R.putImageData(M,2,2),{canvas:C.canvas,offsetX:h-2*w,offsetY:d-2*x,scaleX:w,scaleY:x}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){Of(t,this._bbox);const l=new Float32Array(2);if(a===je.SHADING)st.singularValueDecompose2dScale(oe(t),l);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;st.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else st.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===je.SHADING?null:this._background,e.cachedCanvases);return a!==je.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class U2 extends yp{getPattern(){return"hotpink"}}function F2(r){switch(r[0]){case"RadialAxial":return new P2(r);case"Mesh":return new B2(r);case"Dummy":return new U2}throw new Error(`Unknown IR type: ${r[0]}`)}const O0={COLORED:1,UNCOLORED:2};class bp{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:l,tilingType:c,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),Au("TilingType: "+c);const y=i[0],b=i[1],w=i[2],x=i[3],S=w-y,_=x-b,E=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,E);const[C,R]=E;st.singularValueDecompose2dScale(this.baseTransform,E);const M=C*E[0],O=R*E[1];let P=S,B=_,W=!1,K=!1;const et=Math.ceil(f*M),tt=Math.ceil(g*O),pt=Math.ceil(S*M),Et=Math.ceil(_*O);et>=pt?P=f:W=!0,tt>=Et?B=g:K=!0;const q=this.getSizeAndScale(P,this.ctx.canvas.width,M),ot=this.getSizeAndScale(B,this.ctx.canvas.height,O),k=t.cachedCanvases.getCanvas("pattern",q.size,ot.size),U=k.context,Z=d.createCanvasGraphics(U,e);if(Z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(Z,l,h),U.translate(-q.scale*y,-ot.scale*b),Z.transform(0,q.scale,0,0,ot.scale,0,0),U.save(),Z.dependencyTracker?.save(),this.clipBbox(Z,y,b,w,x),Z.baseTransform=oe(Z.ctx),Z.executeOperatorList(a),Z.endDrawing(),Z.dependencyTracker?.restore(),U.restore(),W||K){const vt=k.canvas;W&&(P=f),K&&(B=g);const yt=this.getSizeAndScale(P,this.ctx.canvas.width,M),D=this.getSizeAndScale(B,this.ctx.canvas.height,O),V=yt.size,Q=D.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",V,Q),ht=nt.context,gt=W?Math.floor(S/f):0,dt=K?Math.floor(_/g):0;for(let ee=0;ee<=gt;ee++)for(let It=0;It<=dt;It++)ht.drawImage(vt,V*ee,Q*It,V,Q,0,0,V,Q);return{canvas:nt.canvas,scaleX:yt.scale,scaleY:D.scale,offsetX:y,offsetY:b}}return{canvas:k.canvas,scaleX:q.scale,scaleY:ot.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,i){const a=Math.max(bp.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const c=a-e,h=l-i;t.ctx.rect(e,i,c,h),st.axialAlignedBoundingBox([e,i,a,l],oe(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case O0.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=h;break;case O0.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new r2(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,l){let c=i;a!==je.SHADING&&(c=st.transform(c,e.baseTransform),this.matrix&&(c=st.transform(c,this.matrix)));const h=this.createPatternCanvas(e,l);let d=new DOMMatrix(c);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function z2({src:r,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=xe.isLittleEndian?4278190080:255,[d,f]=c?[l,h]:[h,l],g=i>>3,y=i&7,b=r.length;e=new Uint32Array(e.buffer);let w=0;for(let x=0;x<a;x++){for(const _=t+g;t<_;t++){const E=t<b?r[t]:255;e[w++]=E&128?f:d,e[w++]=E&64?f:d,e[w++]=E&32?f:d,e[w++]=E&16?f:d,e[w++]=E&8?f:d,e[w++]=E&4?f:d,e[w++]=E&2?f:d,e[w++]=E&1?f:d}if(y===0)continue;const S=t<b?r[t++]:255;for(let _=0;_<y;_++)e[w++]=S&1<<7-_?f:d}return{srcPos:t,destPos:w}}const I0=16,P0=100,H2=15,j0=10,on=16,hf=new DOMMatrix,bn=new Float32Array(2),sr=new Float32Array([1/0,1/0,-1/0,-1/0]);function G2(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,a,l,c,h){t.transform(e,i,a,l,c,h),this.__originalTransform(e,i,a,l,c,h)},r.setTransform=function(e,i,a,l,c,h){t.setTransform(e,i,a,l,c,h),this.__originalSetTransform(e,i,a,l,c,h)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,a,l,c,h){t.bezierCurveTo(e,i,a,l,c,h),this.__originalBezierCurveTo(e,i,a,l,c,h)},r.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class V2{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Fc(r,t,e,i,a,l,c,h,d,f){const[g,y,b,w,x,S]=oe(r);if(y===0&&b===0){const C=c*g+x,R=Math.round(C),M=h*w+S,O=Math.round(M),P=(c+d)*g+x,B=Math.abs(Math.round(P)-R)||1,W=(h+f)*w+S,K=Math.abs(Math.round(W)-O)||1;return r.setTransform(Math.sign(g),0,0,Math.sign(w),R,O),r.drawImage(t,e,i,a,l,0,0,B,K),r.setTransform(g,y,b,w,x,S),[B,K]}if(g===0&&w===0){const C=h*b+x,R=Math.round(C),M=c*y+S,O=Math.round(M),P=(h+f)*b+x,B=Math.abs(Math.round(P)-R)||1,W=(c+d)*y+S,K=Math.abs(Math.round(W)-O)||1;return r.setTransform(0,Math.sign(y),Math.sign(b),0,R,O),r.drawImage(t,e,i,a,l,0,0,K,B),r.setTransform(g,y,b,w,x,S),[K,B]}r.drawImage(t,e,i,a,l,c,h,d,f);const _=Math.hypot(g,y),E=Math.hypot(b,w);return[_*d,E*f]}class B0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Rf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Te.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=sr.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=je.FILL,e=null){const i=this.minMax.slice();if(t===je.STROKE){e||Kt("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(e,bn);const a=bn[0]*this.lineWidth/2,l=bn[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(sr,0)}getClippedPathBoundingBox(t=je.FILL,e=null){return st.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function U0(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%on,l=(e-a)/on,c=a===0?l:l+1,h=r.createImageData(i,on);let d=0,f;const g=t.data,y=h.data;let b,w,x,S;if(t.kind===Fo.GRAYSCALE_1BPP){const _=g.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),C=E.length,R=i+7>>3,M=4294967295,O=xe.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(x=b<l?on:a,f=0,w=0;w<x;w++){const P=_-d;let B=0;const W=P>R?i:P*8-7,K=W&-8;let et=0,tt=0;for(;B<K;B+=8)tt=g[d++],E[f++]=tt&128?M:O,E[f++]=tt&64?M:O,E[f++]=tt&32?M:O,E[f++]=tt&16?M:O,E[f++]=tt&8?M:O,E[f++]=tt&4?M:O,E[f++]=tt&2?M:O,E[f++]=tt&1?M:O;for(;B<W;B++)et===0&&(tt=g[d++],et=128),E[f++]=tt&et?M:O,et>>=1}for(;f<C;)E[f++]=0;r.putImageData(h,0,b*on)}}else if(t.kind===Fo.RGBA_32BPP){for(w=0,S=i*on*4,b=0;b<l;b++)y.set(g.subarray(d,d+S)),d+=S,r.putImageData(h,0,w),w+=on;b<c&&(S=i*a*4,y.set(g.subarray(d,d+S)),r.putImageData(h,0,w))}else if(t.kind===Fo.RGB_24BPP)for(x=on,S=i*x,b=0;b<c;b++){for(b>=l&&(x=a,S=i*x),f=0,w=S;w--;)y[f++]=g[d++],y[f++]=g[d++],y[f++]=g[d++],y[f++]=255;r.putImageData(h,0,b*on)}else throw new Error(`bad image kind: ${t.kind}`)}function F0(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%on,l=(e-a)/on,c=a===0?l:l+1,h=r.createImageData(i,on);let d=0;const f=t.data,g=h.data;for(let y=0;y<c;y++){const b=y<l?on:a;({srcPos:d}=z2({src:f,srcPos:d,dest:g,width:i,height:b,nonBlackColor:0})),r.putImageData(h,0,y*on)}}function Ro(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function zc(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function z0(r,t){if(t)return!0;st.singularValueDecompose2dScale(r,bn);const e=Math.fround(Gn.pixelRatio*sa.PDF_TO_CSS_UNITS);return bn[0]<=e&&bn[1]<=e}const q2=["butt","round","square"],$2=["miter","round","bevel"],Y2={},H0={};class dr{constructor(t,e,i,a,l,{optionalContentConfig:c,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new B0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new V2(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...oe(this.compositeCtx))}this.ctx.save(),zc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=oe(this.ctx)}executeOperatorList(t,e,i,a,l){const c=t.argsArray,h=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const g=f-d>j0&&typeof i=="function",y=g?Date.now()+H2:0;let b=0;const w=this.commonObjs,x=this.objs;let S,_;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!l||l(d))if(S=h[d],_=c[d]??null,S!==yr.dependency)_===null?this[S](d):this[S](d,..._);else for(const E of _){this.dependencyTracker?.recordNamedData(E,d);const C=E.startsWith("g_")?w:x;if(!C.has(E))return C.get(E,i),d}if(d++,d===f)return d;if(g&&++b>j0){if(Date.now()>y)return i(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=a,f="prescale1",g,y;for(;l>2&&h>1||c>2&&d>1;){let b=h,w=d;l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/b),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),g=this.cachedCanvases.getCanvas(f,b,w),y=g.context,y.clearRect(0,0,b,w),y.drawImage(t,0,0,h,d,0,0,b,w),t=g.canvas,h=b,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,d=oe(i);let f,g,y,b;if((e.bitmap||e.data)&&e.count>1){const et=e.bitmap||e.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(et),f||(f=new Map,this._cachedBitmapsMap.set(et,f));const tt=f.get(g);if(tt&&!h){const pt=Math.round(Math.min(d[0],d[2])+d[4]),Et=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,Mn.transformAndFill),{canvas:tt,offsetX:pt,offsetY:Et}}y=tt}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,l),F0(b.context,e));let w=st.transform(d,[1/a,0,0,-1/l,0,0]);w=st.transform(w,[1,0,0,1,0,-l]);const x=sr.slice();st.axialAlignedBoundingBox([0,0,a,l],w,x);const[S,_,E,C]=x,R=Math.round(E-S)||1,M=Math.round(C-_)||1,O=this.cachedCanvases.getCanvas("fillCanvas",R,M),P=O.context,B=S,W=_;P.translate(-B,-W),P.transform(...w),y||(y=this._scaleImage(b.canvas,Jn(P)),y=y.img,f&&h&&f.set(g,y)),P.imageSmoothingEnabled=z0(oe(P),e.interpolate),Fc(P,y,0,0,y.width,y.height,0,0,a,l),P.globalCompositeOperation="source-in";const K=st.transform(Jn(P),[1,0,0,1,-B,-W]);return P.fillStyle=h?c.getPattern(i,this,K,je.FILL,t):c,P.fillRect(0,0,a,l),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,O.canvas)),this.dependencyTracker?.recordDependencies(t,Mn.transformAndFill),{canvas:O.canvas,offsetX:Math.round(B),offsetY:Math.round(W)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=q2[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=$2[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),Ro(this.suspendedCtx,c),G2(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ro(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],c=a[1],h=a[2]-l,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,c,h,d,f,g,y){let b=t.canvas,w=d-g,x=f-y;if(c)if(w<0||x<0||w+i>b.width||x+a>b.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,a),E=_.context;E.drawImage(b,-w,-x),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,i,a),E.globalCompositeOperation="source-over",b=_.canvas,w=x=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(w,x,i,a),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(w,x,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,f,i,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,w,x,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&Ro(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ro(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,c,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[l]=i;if(!a){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===yr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=i[0]=kw(l)),st.axialAlignedBoundingBox(a,oe(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Jn(a),je.STROKE,t),c){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,Mn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(je.STROKE,oe(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const f=l.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Jn(a),je.FILL,t),f){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,Mn.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,Mn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Y2}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=H0}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:f,path:g}of e)g&&a.addPath(g,new DOMMatrix(c).preMultiplySelf(l).translate(h,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||Rf,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&St("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=i;i<I0?g=I0:i>P0&&(g=P0),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l,c){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=g&Te.FILL_STROKE_MASK,w=!!(g&Te.ADD_TO_PATH_FLAG),x=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let _;if((f.disableFontFace||w||x||S)&&!f.missingFile&&(_=f.getPathGenerator(this.commonObjs,e)),_&&(f.disableFontFace||x||S)){h.save(),h.translate(i,a),h.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,h,f);let E;if(b===Te.FILL||b===Te.FILL_STROKE)if(l){E=h.getTransform(),h.setTransform(...l);const C=this.#i(_,E,l);h.fill(C)}else h.fill(_);if(b===Te.STROKE||b===Te.FILL_STROKE)if(c){E||=h.getTransform(),h.setTransform(...c);const{a:C,b:R,c:M,d:O}=E,P=st.inverseTransform(c),B=st.transform([C,R,M,O,0,0],P);st.singularValueDecompose2dScale(B,bn),h.lineWidth*=Math.max(bn[0],bn[1])/y,h.stroke(this.#i(_,E,c))}else h.lineWidth/=y,h.stroke(_);h.restore()}else(b===Te.FILL||b===Te.FILL_STROKE)&&(h.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e))),(b===Te.STROKE||b===Te.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e)).recordDependencies(t,Mn.stroke),h.strokeText(e,i,a));w&&((this.pendingTextPaths||=[]).push({transform:oe(h),x:i,y:a,fontSize:y,path:_}),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return bt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Mn.showText).resetBBox(t),this.current.textRenderingMode&Te.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,h=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,y=i.textHScale*g,b=e.length,w=a.vertical,x=w?1:-1,S=a.defaultVMetrics,_=l*i.fontMatrix[0],E=i.textRenderingMode===Te.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),g>0?c.scale(y,-1):c.scale(y,1);let C,R;const M=i.textRenderingMode&Te.FILL_STROKE_MASK,O=M===Te.FILL||M===Te.FILL_STROKE,P=M===Te.STROKE||M===Te.FILL_STROKE;if(O&&i.patternFill){c.save();const tt=i.fillColor.getPattern(c,this,Jn(c),je.FILL,t);C=oe(c),c.restore(),c.fillStyle=tt}if(P&&i.patternStroke){c.save();const tt=i.strokeColor.getPattern(c,this,Jn(c),je.STROKE,t);R=oe(c),c.restore(),c.strokeStyle=tt}let B=i.lineWidth;const W=i.textMatrixScale;if(W===0||B===0?P&&(B=this.getSinglePixelWidth()):B/=W,h!==1&&(c.scale(h,h),B/=h),c.lineWidth=B,a.isInvalidPDFjsFont){const tt=[];let pt=0;for(const q of e)tt.push(q.unicode),pt+=q.width;const Et=tt.join("");if(c.fillText(Et,0,0),this.dependencyTracker!==null){const q=c.measureText(Et);this.dependencyTracker.recordBBox(t,this.ctx,-q.actualBoundingBoxLeft,q.actualBoundingBoxRight,-q.actualBoundingBoxAscent,q.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=pt*_*y,c.restore(),this.compose();return}let K=0,et;for(et=0;et<b;++et){const tt=e[et];if(typeof tt=="number"){K+=x*tt*l/1e3;continue}let pt=!1;const Et=(tt.isSpace?f:0)+d,q=tt.fontChar,ot=tt.accent;let k,U,Z=tt.width;if(w){const D=tt.vmetric||S,V=-(tt.vmetric?D[1]:Z*.5)*_,Q=D[2]*_;Z=D?-D[0]:Z,k=V/h,U=(K+Q)/h}else k=K/h,U=0;let vt;if(a.remeasure&&Z>0){vt=c.measureText(q);const D=vt.width*1e3/l*h;if(Z<D&&this.isFontSubpixelAAEnabled){const V=Z/D;pt=!0,c.save(),c.scale(V,1),k/=V}else Z!==D&&(k+=(Z-D)/2e3*l/h)}if(this.contentVisible&&(tt.isInFont||a.missingFile)){if(E&&!ot)c.fillText(q,k,U),this.dependencyTracker?.recordCharacterBBox(t,c,vt?{bbox:null}:a,l/h,k,U,()=>vt??c.measureText(q));else if(this.paintChar(t,q,k,U,C,R),ot){const D=k+l*ot.offset.x/h,V=U-l*ot.offset.y/h;this.paintChar(t,ot.fontChar,D,V,C,R)}}const yt=w?Z*_-Et*g:Z*_+Et*g;K+=yt,pt&&c.restore()}w?i.y-=K:i.x+=K*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,l=a.font,c=a.fontSize,h=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,y=a.textHScale*h,b=a.fontMatrix||Rf,w=e.length,x=a.textRenderingMode===Te.INVISIBLE;let S,_,E,C;if(x||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,h);const R=this.dependencyTracker;for(this.dependencyTracker=R?new hu(R,t):null,S=0;S<w;++S){if(_=e[S],typeof _=="number"){C=d*_*c/1e3,this.ctx.translate(C,0),a.x+=C*y;continue}const M=(_.isSpace?g:0)+f,O=l.charProcOperatorList[_.operatorListId];O?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...b),this.executeOperatorList(O),this.restore()):St(`Type3 character "${_.operatorListId}" is not available.`);const P=[_.width,0];st.applyTransform(P,b),E=P[0]*c+M,i.translate(E,0),a.x+=E*y}i.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,l,c,h){const d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,l,h).recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||oe(this.ctx),l={createCanvasGraphics:(c,h)=>new dr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new hu(this.dependencyTracker,h,!0):null)};i=new bp(e,this.ctx,l,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=F2(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Jn(i),je.SHADING,t);const l=Jn(i);if(l){const{width:c,height:h}=i.canvas,d=sr.slice();st.axialAlignedBoundingBox([0,0,c,h],l,d);const[f,g,y,b]=d;this.ctx.fillRect(f,g,y-f,b-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Mn.transform).recordDependencies(t,Mn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Kt("Should not call beginInlineImage")}beginImageData(){Kt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=oe(this.ctx),i)){st.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,l,c,h]=i,d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Au("TODO: Support non-isolated groups."),e.knockout&&St("Knockout groups not supported.");const a=oe(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=sr.slice();st.axialAlignedBoundingBox(e.bbox,oe(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=st.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-h,1),g=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,g),w=b.context;w.translate(-h,-d),w.transform(...a);let x=new Path2D;const[S,_,E,C]=e.bbox;if(x.rect(S,_,E-S,C-_),e.matrix){const R=new Path2D;R.addPath(x,new DOMMatrix(e.matrix)),x=R}w.clip(x),e.smask&&this.smaskStack.push({canvas:b.canvas,context:w,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),Ro(i,w),this.ctx=w,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=oe(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=sr.slice();st.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,l,c){if(this.#t(),zc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,st.singularValueDecompose2dScale(oe(this.ctx),bn);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,y);const{canvas:b,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(bn[0],0,0,-bn[1],0,d*bn[1]),zc(this.ctx)}else{zc(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],h,d),this.ctx.clip(f)}}this.current=new B0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,l=0,c,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=oe(d);d.transform(i,a,l,c,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=h.length;y<b;y+=2){const w=st.transform(f,[i,a,l,c,h[y],h[y+1]]);d.drawImage(g.canvas,w[4],w[5]),this.dependencyTracker?.recordBBox(t,this.ctx,w[4],w[4]+g.canvas.width,w[5],w[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,Mn.transformAndFill);for(const c of e){const{data:h,width:d,height:f,transform:g}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const w=this.getObject(t,h,c);F0(b,w),b.globalCompositeOperation="source-in",b.fillStyle=l?a.getPattern(b,this,Jn(i),je.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),i.save(),i.transform(...g),i.scale(1,-1),Fc(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){St("Dependent image isn't ready yet");return}const h=c.width,d=c.height,f=[];for(let g=0,y=l.length;g<y;g+=2)f.push({transform:[i,0,0,a,l[g],l[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,a).context;U0(g,e),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,Jn(l));l.imageSmoothingEnabled=z0(oe(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-a,0).recordDependencies(t,Mn.imageXObject).recordOperation(t),Fc(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;U0(f,e),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),Fc(a,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Mn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===H0?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=oe(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let c,h;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)c=h=1/d;else{const g=d*t;c=h=g<1?1/g:1}else if(t===0)c=1/d,h=1/f;else{const g=d*t,y=f*t;c=g<1?1/g:1,h=y<1?1/y:1}}else{const d=Math.abs(e*l-i*a),f=Math.hypot(e,i),g=Math.hypot(a,l);if(t===0)c=g/d,h=f/d;else{const y=t*d;c=g>y?g/y:1,h=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(a||1)*l,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(l,c),hf.a=1/l,hf.d=1/c;const d=new Path2D;if(d.addPath(t,hf),h.length>0){const f=Math.max(l,c);i.setLineDash(h.map(g=>g/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in yr)dr.prototype[r]!==void 0&&(dr.prototype[yr[r]]=dr.prototype[r]);class na{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class X2{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const nr=Symbol("INTERNAL");class W2{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&mn.DISPLAY),this.#e=!!(t&mn.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==nr&&Kt("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class K2{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=mn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new W2(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(nr,!1);for(const i of t.on)this.#e.get(i)._setVisible(nr,!0);for(const i of t.off)this.#e.get(i)._setVisible(nr,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return St(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Au("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return St(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){St(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(nr,!1,!0);a._setVisible(nr,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Ow;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Q2{constructor(t,{disableRange:e=!1,disableStream:i=!1}){Lt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});Lt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Lt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Z2(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new J2(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class Z2{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=xu(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class J2{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function tD(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=f(g),l(g)}if(e=c(r),e){const g=f(e);return l(g)}if(e=i("filename","i").exec(r),e){e=e[1];let g=h(e);return g=f(g),l(g)}function i(g,y){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(g,y){if(g){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(g,{fatal:!0}),w=cl(y);y=b.decode(w),t=!1}catch{}}return y}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const y=[];let b;const w=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=w.exec(g))!==null;){let[,S,_,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[_,E]}const x=[];for(let S=0;S<y.length&&S in y;++S){let[_,E]=y[S];E=h(E),_&&(E=unescape(E),S===0&&(E=d(E))),x.push(E)}return x.join("")}function h(g){if(g.startsWith('"')){const y=g.slice(1).split('\\"');for(let b=0;b<y.length;++b){const w=y[b].indexOf('"');w!==-1&&(y[b]=y[b].slice(0,w),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}g=y.join('"')}return g}function d(g){const y=g.indexOf("'");if(y===-1)return g;const b=g.slice(0,y),x=g.slice(y+1).replace(/^[^']*'/,"");return a(b,x)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,w,x){if(w==="q"||w==="Q")return x=x.replaceAll("_"," "),x=x.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,_){return String.fromCharCode(parseInt(_,16))}),a(b,x);try{x=atob(x)}catch{}return a(b,x)})}return""}function Hw(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function _u(r){return URL.parse(r)?.origin??null}function Gw({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(r.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Vw(r){const t=r.get("Content-Disposition");if(t){let e=tD(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(xu(e))return e}return null}function pl(r,t){return new Wo(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function qw(r){return r===200||r===206}function $w(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Yw(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(St(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class eD{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Hw(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new nD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new iD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class nD{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,$w(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=_u(l.url),!qw(l.status))throw pl(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:d}=Gw({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=Vw(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Yw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class iD{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const c=a.url;fetch(c,$w(l,this._withCredentials,this._abortController)).then(h=>{const d=_u(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!qw(h.status))throw pl(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Yw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const df=200,ff=206;function sD(r){const t=r.response;return typeof t!="string"?t:cl(t).buffer}class aD{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Hw(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=ff):a.expectedStatus=df,e.responseType="arraybuffer",Lt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const l=a.status||df;if(!(l===df&&i.expectedStatus===ff)&&l!==i.expectedStatus){i.onError(a.status);return}const h=sD(a);if(l===ff){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:h}):(St('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class rD{constructor(t){this._source=t,this._manager=new aD(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Lt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new oD(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new lD(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class oD{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=_u(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=Gw({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Vw(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=pl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class lD{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=_u(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=pl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const cD=/^[a-z][a-z0-9\-+.]+:/i;function uD(r){if(cD.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class hD{constructor(t){this.source=t,this.url=uD(t.url),Lt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Lt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new dD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new fD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class dD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=pl(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fD{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Do=Symbol("INITIAL_DATA");class Xw{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:Do}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===Do)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==Do}delete(t){const e=this.#t[t];return!e||e.data===Do?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==Do&&(yield[t,e])}}}const pD=1e5,G0=30;class ln{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#x=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Gn.pixelRatio,this.#d=i.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:c,pageY:h}=i.rawDims;this.#y=[1,0,0,-1,-c,h+l],this.#o=a,this.#s=l,ln.#D(),e.style.setProperty("--min-font-size",ln.#x),Ts(e,i),this.#t.promise.finally(()=>{ln.#A.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=xe.platform;return bt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),ln.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Gn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ts(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const l={div:null,properties:null,ctx:ln.#N(this.#r)};for(const c of this.#u)l.properties=this.#p.get(c),l.div=c,this.#_(l)}}cancel(){const t=new Fi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#a.ctx??=ln.#N(this.#r);const e=this.#u,i=this.#m;for(const a of t){if(e.length>pD){St("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#w(a)}}#w(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=st.transform(this.#y,t.transform);let l=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let h=this.#n&&c.fontSubstitution||c.fontFamily;h=ln.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*ln.#j(h,c,this.#r);let g,y;l===0?(g=a[4],y=a[5]-f):(g=a[4]+f*Math.sin(l),y=a[5]-f*Math.cos(l));const b=e.style;b.left=`${(100*g/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${d.toFixed(2)}px`),b.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(w=!0)}if(w&&(i.canvasWidth=c.vertical?t.height:t.width),this.#p.set(e,i),this.#a.div=e,this.#a.properties=i,this.#_(this.#a),i.hasText&&this.#e.append(e),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),this.#e.append(x)}}#_(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=l,{canvasWidth:h,fontSize:d}=i;ln.#R(a,d*this.#h,c);const{width:f}=a.measureText(e.textContent);f>0&&l.setProperty("--scale-x",h*this.#h/f)}i.angle!==0&&l.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#N(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#E.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#D(){if(this.#x!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#x=t.getBoundingClientRect().height,t.remove()}static#j(t,e,i){const a=this.#v.get(t);if(a)return a;const l=this.#N(i);l.canvas.width=l.canvas.height=G0,this.#R(l,G0,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return h?f=h/(h+d):(xe.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const gD=100;function Ww(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new vp,{docId:e}=t,i=r.url?x2(r.url):null,a=r.data?_2(r.data):null,l=r.httpHeaders||null,c=r.withCredentials===!0,h=r.password??null,d=r.range instanceof wp?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let g=r.worker instanceof br?r.worker:null;const y=r.verbosity,b=typeof r.docBaseUrl=="string"&&!hl(r.docBaseUrl)?r.docBaseUrl:null,w=Pc(r.cMapUrl),x=r.cMapPacked!==!1,S=r.CMapReaderFactory||(Ye?M2:D0),_=Pc(r.iccUrl),E=Pc(r.standardFontDataUrl),C=r.StandardFontDataFactory||(Ye?k2:N0),R=Pc(r.wasmUrl),M=r.WasmFactory||(Ye?L2:M0),O=r.stopAtErrors!==!0,P=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,B=r.isEvalSupported!==!1,W=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Ye,K=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Ye&&(xe.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,tt=typeof r.disableFontFace=="boolean"?r.disableFontFace:Ye,pt=r.fontExtraProperties===!0,Et=r.enableXfa===!0,q=r.ownerDocument||globalThis.document,ot=r.disableRange===!0,k=r.disableStream===!0,U=r.disableAutoFetch===!0,Z=r.pdfBug===!0,vt=r.CanvasFactory||(Ye?N2:C2),yt=r.FilterFactory||(Ye?D2:R2),D=r.enableHWA===!0,V=r.useWasm!==!1,Q=d?d.length:r.length??NaN,nt=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Ye&&!tt,ht=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(S===D0&&C===N0&&M===M0&&w&&E&&R&&Oo(w,document.baseURI)&&Oo(E,document.baseURI)&&Oo(R,document.baseURI)),gt=null;i2(y);const dt={canvasFactory:new vt({ownerDocument:q,enableHWA:D}),filterFactory:new yt({docId:e,ownerDocument:q}),cMapReaderFactory:ht?null:new S({baseUrl:w,isCompressed:x}),standardFontDataFactory:ht?null:new C({baseUrl:E}),wasmFactory:ht?null:new M({baseUrl:R})};g||(g=br.create({verbosity:y,port:na.workerPort}),t._worker=g);const ee={docId:e,apiVersion:"5.4.530",data:a,password:h,disableAutoFetch:U,rangeChunkSize:f,length:Q,docBaseUrl:b,enableXfa:Et,evaluatorOptions:{maxImageSize:P,disableFontFace:tt,ignoreErrors:O,isEvalSupported:B,isOffscreenCanvasSupported:W,isImageDecoderSupported:K,canvasMaxAreaInBytes:et,fontExtraProperties:pt,useSystemFonts:nt,useWasm:V,useWorkerFetch:ht,cMapUrl:w,iccUrl:_,standardFontDataUrl:E,wasmUrl:R}},It={ownerDocument:q,pdfBug:Z,styleElement:gt,loadingParams:{disableAutoFetch:U,enableXfa:Et}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const Vn=g.messageHandler.sendWithPromise("GetDocRequest",ee,a?[a.buffer]:null);let Pn;if(d)Pn=new Q2(d,{disableRange:ot,disableStream:k});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const ci=Oo(i)?eD:Ye?hD:rD;Pn=new ci({url:i,length:Q,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:ot,disableStream:k})}return Vn.then(ci=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ca=new Io(e,ci,g.port),Ge=new bD(ca,t,Pn,It,dt,D);t._transport=Ge,ca.send("Ready",null)})}).catch(t._capability.reject),t}class vp{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${vp.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class wp{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Kt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class mD{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class yD{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new S0:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Xw,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new ul({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:l=ki.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:w=!1,operationsFilter:x=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,l,y,b),{renderingIntent:_,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(_);let C=this._intentStates.get(E);C||(C=Object.create(null),this._intentStates.set(E,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const R=!!(_&mn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const M=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(w||M),P=K=>{if(C.renderTasks.delete(B),O){const et=B.gfx?.dependencyTracker.take();et&&(B.stepper&&B.stepper.setOperatorBBoxes(et,B.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=et))}R&&(this.#t=!0),this.#e(),K?(B.capability.reject(K),this._abortOperatorList({intentState:C,reason:K instanceof Error?K:new Error(K)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new ar({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:O?new I2(e,C.operatorList.length,M):null,viewport:i,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:x});(C.renderTasks||=new Set).add(B);const W=B.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([K,et])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&_))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:K,optionalContentConfig:et}),B.operatorListChanged()}).catch(P),W}getOperatorList({intent:t="display",annotationMode:e=ki.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ko.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){c.read().then(function({value:d,done:f}){if(f){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new S0),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),g())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Su){let a=gD;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Fi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var vs,Fn,Ni,Js,du,ta,ea,We,Zc,Kw,Qw,Po,fr,Jc;const se=class se{constructor({name:t=null,port:e=null,verbosity:i=s2()}={}){Qn(this,We);Qn(this,vs,Promise.withResolvers());Qn(this,Fn,null);Qn(this,Ni,null);Qn(this,Js,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(ie(se,ea).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ie(se,ea).set(e,this),Zn(this,We,Kw).call(this,e)}else Zn(this,We,Qw).call(this)}get promise(){return ie(this,vs).promise}get port(){return ie(this,Ni)}get messageHandler(){return ie(this,Fn)}destroy(){this.destroyed=!0,ie(this,Js)?.terminate(),sn(this,Js,null),ie(se,ea).delete(ie(this,Ni)),sn(this,Ni,null),ie(this,Fn)?.destroy(),sn(this,Fn,null)}static create(t){const e=ie(this,ea).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new se(t)}static get workerSrc(){if(na.workerSrc)return na.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return bt(this,"_setupFakeWorkerGlobal",(async()=>ie(this,fr,Jc)?ie(this,fr,Jc):(await import(this.workerSrc)).WorkerMessageHandler)())}};vs=new WeakMap,Fn=new WeakMap,Ni=new WeakMap,Js=new WeakMap,du=new WeakMap,ta=new WeakMap,ea=new WeakMap,We=new WeakSet,Zc=function(){ie(this,vs).resolve(),ie(this,Fn).send("configure",{verbosity:this.verbosity})},Kw=function(t){sn(this,Ni,t),sn(this,Fn,new Io("main","worker",t)),ie(this,Fn).on("ready",()=>{}),Zn(this,We,Zc).call(this)},Qw=function(){if(ie(se,ta)||ie(se,fr,Jc)){Zn(this,We,Po).call(this);return}let{workerSrc:t}=se;try{se._isSameOrigin(window.location,t)||(t=se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new Io("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?ie(this,vs).reject(new Error("Worker was destroyed")):Zn(this,We,Po).call(this)},l=new AbortController;e.addEventListener("error",()=>{ie(this,Js)||a()},{signal:l.signal}),i.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}sn(this,Fn,i),sn(this,Ni,e),sn(this,Js,e),Zn(this,We,Zc).call(this)}),i.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{Zn(this,We,Po).call(this)}});const c=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};c();return}catch{Au("The worker has been disabled.")}Zn(this,We,Po).call(this)},Po=function(){ie(se,ta)||(St("Setting up fake worker."),sn(se,ta,!0)),se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ie(this,vs).reject(new Error("Worker was destroyed"));return}const e=new T2;sn(this,Ni,e);const i=`fake${bb(se,du)._++}`,a=new Io(i+"_worker",i,e);t.setup(a,e),sn(this,Fn,new Io(i,i+"_worker",e)),Zn(this,We,Zc).call(this)}).catch(t=>{ie(this,vs).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},fr=new WeakSet,Jc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Qn(se,fr),Qn(se,du,0),Qn(se,ta,!1),Qn(se,ea,new WeakMap),Ye&&(sn(se,ta,!0),na.workerSrc||="./pdf.worker.mjs"),se._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},se.fromPort=t=>{if(f2("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return se.create(t)};let br=se;class bD{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,a,l,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new Xw,this.fontLoader=new w2({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return bt(this,"annotationStorage",new gp)}getRenderingIntent(t,e=ki.ENABLE,i=null,a=!1,l=!1){let c=mn.DISPLAY,h=Mf;switch(t){case"any":c=mn.ANY;break;case"display":break;case"print":c=mn.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const d=c&mn.PRINT&&i instanceof Iw?i:this.annotationStorage;switch(e){case ki.DISABLE:c+=mn.ANNOTATIONS_DISABLE;break;case ki.ENABLE:break;case ki.ENABLE_FORMS:c+=mn.ANNOTATIONS_FORMS;break;case ki.ENABLE_STORAGE:c+=mn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=mn.IS_EDITING),l&&(c+=mn.OPLIST);const{ids:f,hash:g}=d.modifiedIds,y=[c,h.hash,g];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ln.cleanup(),this._networkStream?.cancelAllRequests(new Fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{Lt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){a.close();return}Lt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this._fullReader;return(!a||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{Lt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){a.close();return}Lt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new mD(i,this))}),t.on("DocException",i=>{e._capability.reject(rn(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw rn(i);const a=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const y=l.error;St(`Error during font loading: ${y}`),this.commonObjs.resolve(i,y);break}const c=new $t(l),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,d=new A2(c,h,l.extra,l.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=l;Lt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new S2(l));break;case"Image":this.commonObjs.resolve(i,l);break;case"Pattern":const g=new De(l);this.commonObjs.resolve(i,g.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,c])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,t);const c=new yD(e,l,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#i.set(e,a),a}getPageIndex(t){return kf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new K2(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new X2(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ln.cleanup()}}cachedPageNumber(t){if(!kf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class vD{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class ar{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:w=!1,operationsFilter:x=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new vD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=x}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(ar.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ar.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new dr(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),ar.#e.delete(this._canvas),t||=new Su(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ar.#e.delete(this._canvas),this.callback())))}}const Zw="5.4.530",Jw="50cc4adac";class yn{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return bt(this,"_keyboardManager",new dl([[["Escape","mac+Escape"],yn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],yn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],yn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],yn.prototype._moveToPrevious],[["Home","mac+Home"],yn.prototype._moveToBeginning],[["End","mac+End"],yn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",yn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",vn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",yn.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===this.#i,l.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#n.lastElementChild?.focus()}#m(t){yn._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Qo{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Qo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Qo.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function V0(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function No(r){return Math.max(0,Math.min(255,255*r))}class q0{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=No(t),[t,t,t]}static G_HTML([t]){const e=V0(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(No)}static RGB_HTML(t){return`#${t.map(V0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[No(1-Math.min(1,t+a)),No(1-Math.min(1,i+a)),No(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,c=1-i,h=Math.min(a,l,c);return["CMYK",a,l,c,h]}}class wD{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Kt("Abstract method `_createSVG` called.")}}class Zo extends wD{_createSVG(t){return document.createElementNS(Di,t)}}const AD=9,aa=new WeakSet,SD=new Date().getTimezoneOffset()*60*1e3;class pf{static create(t){switch(t.data.annotationType){case me.LINK:return new Ap(t);case me.TEXT:return new _D(t);case me.WIDGET:switch(t.data.fieldType){case"Tx":return new ED(t);case"Btn":return t.data.radioButton?new tA(t):t.data.checkBox?new CD(t):new RD(t);case"Ch":return new DD(t);case"Sig":return new TD(t)}return new la(t);case me.POPUP:return new If(t);case me.FREETEXT:return new eA(t);case me.LINE:return new MD(t);case me.SQUARE:return new kD(t);case me.CIRCLE:return new LD(t);case me.POLYLINE:return new nA(t);case me.CARET:return new ID(t);case me.INK:return new Sp(t);case me.POLYGON:return new OD(t);case me.HIGHLIGHT:return new iA(t);case me.UNDERLINE:return new PD(t);case me.SQUIGGLY:return new jD(t);case me.STRIKEOUT:return new BD(t);case me.STAMP:return new sA(t);case me.FILEATTACHMENT:return new UD(t);default:return new ue(t)}}}class ue{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ue._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let l=-1/0,c=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>c?(c=e[h+1],l=e[h+2]):e[h+1]===c&&(l=Math.max(l,e[h+2]));return[l,c]}if(i?.length>=1){for(const h of i)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>c?(c=h[d+1],l=h[d]):h[d+1]===c&&(l=Math.max(l,h[d]));if(l!==1/0)return[l,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Xo}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Xo}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof la)&&!(this instanceof Ap)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof If){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(S>0||_>0){const C=`calc(${S}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof tA){const C=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=C}switch(e.borderStyle.style){case er.SOLID:c.borderStyle="solid";break;case er.DASHED:c.borderStyle="dashed";break;case er.BEVELED:St("Unimplemented border style: beveled");break;case er.INSET:St("Unimplemented border style: inset");break;case er.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,c.borderColor=st.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=st.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:y,pageX:b,pageY:w}=a.rawDims;c.left=`${100*(f[0]-b)/g}%`,c.top=`${100*(f[1]-w)/y}%`;const{rotation:x}=e;return e.hasOwnCanvas||x===0?(c.width=`${100*h/g}%`,c.height=`${100*d/y}%`):this.setRotation(x,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],c=l[0],h=l.slice(1);a.target.style[i]=q0[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:q0[`${c}_rgb`](h)})};return bt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const c=i[a];if(c){const h={detail:{[a]:l},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,_,E,C]=t.subarray(2,6);if(a===S&&l===_&&e===E&&i===C)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:S,borderWidth:_}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-i,{svgFactory:g}=this,y=g.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=g.createElement("defs");y.append(b);const w=g.createElement("clipPath"),x=`clippath_${this.data.id}`;w.setAttribute("id",x),w.setAttribute("clipPathUnits","objectBoundingBox"),b.append(w);for(let S=2,_=t.length;S<_;S+=8){const E=t[S],C=t[S+1],R=t[S+2],M=t[S+3],O=g.createElement("rect"),P=(R-e)/d,B=(l-C)/f,W=(E-R)/d,K=(C-M)/f;O.setAttribute("x",P),O.setAttribute("y",B),O.setAttribute("width",W),O.setAttribute("height",K),w.append(O),h?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${B}" width="${W}" height="${K}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${x})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate),this.#i=new If({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Kt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:h}of a){if(l===-1||c===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!aa.has(f)){St(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&aa.has(a)&&i.push({id:c,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class xD extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Ap extends ue{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:c}=e,h=[];if(a.length!==0||l.length!==0){const g=new Set(l);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:w}of b)g.add(w)}for(const y of Object.values(this._fieldObjects))for(const b of y)g.has(b.id)===c&&h.push(b)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:y}=g;switch(f.push(y),g.type){case"text":{const w=g.defaultValue||"";d.setValue(y,{value:w});break}case"checkbox":case"radiobutton":{const w=g.defaultValue===g.exportValues;d.setValue(y,{value:w});break}case"combobox":case"listbox":{const w=g.defaultValue||"";d.setValue(y,{value:w});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!aa.has(b)){St(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class _D extends ue{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class la extends ue{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return xe.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}})})}_setEventListeners(t,e,i,a){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":st.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||AD,l=t.style;let c;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(rf*a))||1,y=f/g;c=Math.min(a,d(y/rf))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(f/rf))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=st.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class ED extends la{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),aa.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:y}=this.data,b=!!g&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",x=>{t.setValue(e,{value:x.target.value}),this.setPropertyOnSiblings(i,"value",x.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",x=>{const S=this.data.defaultFieldValue??"";i.value=d.userValue=S,d.formattedValue=null});let w=x=>{const{formattedValue:S}=d;S!=null&&(x.target.value=S),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(d.focused)return;const{target:_}=S;if(b&&(_.type=g,y&&(_.step=y)),d.userValue){const E=d.userValue;if(b)if(g==="time"){const C=new Date(E),R=[C.getHours(),C.getMinutes(),C.getSeconds()];_.value=R.map(M=>M.toString().padStart(2,"0")).join(":")}else _.value=new Date(E-SD).toISOString().split(g==="date"?"T":".",1)[0];else _.value=E}d.lastCommittedValue=_.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const _={value(E){d.userValue=E.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:C}=E.detail;d.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C);const R={formattedValue:C};b&&(R.value=C),t.setValue(e,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:C}=E.detail,{target:R}=E;if(C===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",C);let M=d.userValue;!M||M.length<=C||(M=M.slice(0,C),R.value=d.userValue=M,t.setValue(e,{value:M}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:M,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(_,S)}),i.addEventListener("keydown",S=>{d.commitKey=1;let _=-1;if(S.key==="Escape"?_=0:S.key==="Enter"&&!this.data.multiLine?_=2:S.key==="Tab"&&(d.commitKey=3),_===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:_,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const x=w;w=null,i.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:_}=S;let{value:E}=_;if(b){if(E&&g==="time"){const C=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),_.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();_.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),x(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:_,target:E}=S,{value:C,selectionStart:R,selectionEnd:M}=E;let O=R,P=M;switch(S.inputType){case"deleteWordBackward":{const B=C.substring(0,R).match(/\w*[^\w]*$/);B&&(O-=B[0].length);break}case"deleteWordForward":{const B=C.substring(R).match(/^[^\w]*\w*/);B&&(P+=B[0].length);break}case"deleteContentBackward":R===M&&(O-=1);break;case"deleteContentForward":R===M&&(P+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:_||"",willCommit:!1,selStart:O,selEnd:P}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(w&&i.addEventListener("blur",w),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class TD extends la{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class CD extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return aa.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class tA extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(aa.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=g&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class RD extends Ap{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class DD extends la{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");aa.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const g of this.data.options){const y=document.createElement("option");y.textContent=g.displayValue,y.value=g.exportValue,i.value.includes(g.exportValue)&&(y.setAttribute("selected",!0),l=!1),a.append(y)}let c=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=g=>{const y=g?"value":"textContent",{options:b,multiple:w}=a;return w?Array.prototype.filter.call(b,x=>x.selected).map(x=>x[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=h(!1);const f=g=>{const y=g.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const y={value(b){c?.();const w=b.detail.value,x=new Set(Array.isArray(w)?w:[w]);for(const S of a.options)S.selected=x.has(S.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(b){a.multiple=!0},remove(b){const w=a.options,x=b.detail.remove;w[x].selected=!1,a.remove(x),w.length>0&&Array.prototype.findIndex.call(w,_=>_.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(b){const{index:w,displayValue:x,exportValue:S}=b.detail.insert,_=a.children[w],E=document.createElement("option");E.textContent=x,E.value=S,_?_.before(E):a.append(E),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},items(b){const{items:w}=b.detail;for(;a.length!==0;)a.remove(0);for(const x of w){const{displayValue:S,exportValue:_}=x,E=document.createElement("option");E.textContent=S,E.value=_,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},indices(b){const w=new Set(b.detail.indices);for(const x of b.target.options)x.selected=w.has(x.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,g)}),a.addEventListener("input",g=>{const y=h(!0),b=h(!1);t.setValue(e,{value:y}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class If extends ue{constructor(t){const{data:e,elements:i,parent:a}=t,l=!!a._commentManager;if(super(t,{isRenderable:!l&&ue._hasPopupData(e)}),this.elements=i,l&&ue._hasPopupData(e)){const c=this.popup=this.#t();for(const h of i)h.popup=c}else this.popup=null}#t(){return new ND({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${ir}${a}`).join(",")),this.container}}class ND{#t=null;#e=this.#V.bind(this);#i=this.#U.bind(this);#n=this.#L.bind(this);#r=this.#S.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#E=null;#x=null;#A=null;#C=!1;#w=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:c,richText:h,parent:d,rect:f,parentRect:g,open:y,commentManager:b=null}){this.#s=t,this.#x=a,this.#o=c,this.#E=h,this.#d=d,this.#a=e,this.#b=f,this.#h=g,this.#l=i,this.#t=b,this.#w=i[0],this.#c=cu.toDateObject(l),this.trigger=i.flatMap(w=>w.getElementsToTriggerPopup()),b||(this.#N(),this.#s.hidden=!0,y&&this.#S())}#N(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#g=new AbortController,e=this.#w.hasOwnCommentButton,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const h=this.#w.container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),h.after(c)}}#D(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#j(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#w.commentText,this.#_}set comment(t){t!==this.comment&&(this.#w.commentText=this.#_=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#w.layer.getBoundingClientRect();return[(t-a)/c,(e+i-l)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:l,y:c,width:h,height:d}=a;this.#t.showDialog(null,this,l+e*h,c+i*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const i=t.style.outlineColor=st.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#x?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#x}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}dp({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#k(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#O(){return this.#k?.attributes?.style?.fontSize||0}get#B(){return this.#k?.attributes?.style?.color||null}#I(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#j(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#N(),this.#A||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#I(e.text),this.#c=cu.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#E}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#d;let c=!!this.#h,h=c?this.#h:this.#b;for(const x of this.#l)if(!h||st.intersect(x.data.rect,h)!==null){h=x.data.rect,c=!0;break}const d=st.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=c?h[2]-h[0]+5:0,y=d[0]+g,b=d[1];this.#u=[100*(y-a)/e,100*(b-l)/i];const{style:w}=this.#s;w.left=`${this.#u[0]}%`,w.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#N(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class eA extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class MD extends ue{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class kD extends ue{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class LD extends ue{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class nA extends ue{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:c}=this;if(!e)return this.container;const h=this.svgFactory.create(l,c,!0);let d=[];for(let g=0,y=e.length;g<y;g+=2){const b=e[g]-t[0],w=t[3]-e[g+1];d.push(`${b},${w}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class OD extends nA{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ID extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Sp extends ue{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:c,width:h,height:d}=this.#i(e,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let y=0,b=i.length;y<b;y++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",i[y].join(",")),g.append(w)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:h,height:d}=this.#i(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class iA extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class PD extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class jD extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class BD extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class sA extends ue{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class UD extends ue{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=xe.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Eu{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=e,this.#e=i,this.#r=h||null,this.#a=f||null,this.#i=g||new gp,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,i=this.div;Ts(i,this.viewport);const a=new Map,l=[],c={data:null,layer:i,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Zo,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const d=h.annotationType===me.POPUP;if(d){const y=a.get(h.id);if(!y)continue;if(!this._commentManager){l.push(h);continue}c.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;c.data=h;const f=pf.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),h.popupRef)){const y=a.get(h.popupRef);y?y.push(f):a.set(h.popupRef,[f])}const g=f.render();h.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const h of l){const d=c.elements=a.get(h.id);c.data=h;const f=pf.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${ir}${h.id}`,h.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#s){const l=i.id=`${ir}${a}`;t.push(this.#r?.getAriaAttributes(l).then(c=>{if(c)for(const[h,d]of c)i.setAttribute(h,d)}))}}this.#s.sort(({data:{rect:[i,a,l,c]}},{data:{rect:[h,d,f,g]}})=>{if(i===l&&a===c)return 1;if(h===f&&d===g)return-1;const y=c,b=a,w=(a+c)/2,x=g,S=d,_=(d+g)/2;if(w>=x&&_<=b)return-1;if(_>=y&&w<=S)return 1;const E=(i+l)/2,C=(h+f)/2;return E-C});const e=document.createDocumentFragment();for(const i of this.#s)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const i of this.#s)this.#t.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Zo,parent:this};for(const i of t){i.borderStyle||=Eu._defaultBorderStyle,e.data=i;const a=pf.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${ir}${i.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Ts(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,l=new xD({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return l.render(),l.contentElement.id=`${ir}${i}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const e=this.#s.findIndex(a=>a.data.id===t);if(e<0)return;const[i]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return bt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:er.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Hc=/\r\n?|\n/g;class Ne extends ut{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Ne.prototype,e=l=>l.isEmpty(),i=zi.TRANSLATE_SMALL,a=zi.TRANSLATE_BIG;return bt(this,"_keyboardManager",new dl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Ne._defaultColor||ut._defaultLineColor,this.#n=t.fontSize||Ne._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){ut.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Mt.FREETEXT_SIZE:Ne._defaultFontSize=e;break;case Mt.FREETEXT_COLOR:Ne._defaultColor=e;break}}updateParams(t,e){switch(t){case Mt.FREETEXT_SIZE:this.#r(e);break;case Mt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,Ne._defaultFontSize],[Mt.FREETEXT_COLOR,Ne._defaultColor||ut._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#n],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Qo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Ne._internalPadding*t,-(Ne._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Ne.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Ne._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[y,b]=this.pageTranslation;let w,x;switch(this.rotation){case 0:w=t+(c[0]-y)/f,x=e+this.height-(c[1]-b)/g;break;case 90:w=t+(c[0]-y)/f,x=e-(c[1]-b)/g,[h,d]=[d,-h];break;case 180:w=t-this.width+(c[0]-y)/f,x=e-(c[1]-b)/g,[h,d]=[-h,-d];break;case 270:w=t+(c[0]-y-this.height*g)/f,x=e+(c[1]-b-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(w*a,x*l,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Hc,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=Ne.#h(e.getData("text")||"").replaceAll(Hc,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const w=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(Hc,"")),w!==this.editorDiv){let x=f;for(const S of this.editorDiv.childNodes){if(S===w){x=g;continue}x.push(Ne.#c(S))}}f.push(h.nodeValue.slice(0,d).replaceAll(Hc,""))}else if(h===this.editorDiv){let w=f,x=0;for(const S of this.editorDiv.childNodes)x++===d&&(w=g),w.push(Ne.#c(S))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const x=w.nodeValue.length;if(b<=x){y.setStart(w,b),y.setEnd(w,b);break}b-=x}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Ne._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof eA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:f,id:g,popupRef:y,richText:b,contentsObj:w,creationDate:x,modificationDate:S},textContent:_,textPosition:E,parent:{page:{pageNumber:C}}}=t;if(!_||_.length===0)return null;a=t={annotationType:At.FREETEXT,color:Array.from(h),fontSize:c,value:_.join(`
`),position:E,pageIndex:C-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:y,comment:w?.str||null,richText:b,creationDate:x,modificationDate:S}}const l=await super.deserialize(t,e,i);return l.#n=t.fontSize,l.color=st.makeHexColor(...t.color),l.#t=Ne.#h(t.value),l._initialData=a,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ut._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,h)=>c!==a[h])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class at{static PRECISION=1e-4;toSVGPath(){Kt("Abstract method `toSVGPath` must be implemented.")}get box(){Kt("Abstract getter `box` must be implemented.")}serialize(t,e){Kt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*a,c[h+1]=i+t[h+1]*l;return c}static _rescaleAndSwap(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*a,c[h+1]=i+t[h]*l;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+c)/6,(i+l)/2,(a+c)/2]}}class Zs{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=Zs.#m+Zs.#g;constructor({x:t,y:e},i,a,l,c,h=0){this.#t=i,this.#h=l*a,this.#n=c,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=Zs.#m*a,this.#c=Zs.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[i,a,l,c]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-a)/c,(this.#s+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,a,l,c]=this.#t;let[h,d,f,g]=this.#a.subarray(8,12);const y=t-f,b=e-g,w=Math.hypot(y,b);if(w<this.#c)return!1;const x=w-this.#l,S=x/w,_=S*y,E=S*b;let C=h,R=d;h=f,d=g,f+=_,g+=E,this.#f?.push(t,e);const M=-E/x,O=_/x,P=M*this.#h,B=O*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+P,g+B],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-P,g-B],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([h+P,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(h+P-i)/l,(d+B-a)/c),this.#a.set([h-P,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(h-P-i)/l,(d-B-a)/c)),this.#a.set([C,R,h,d,f,g],6),!this.isEmpty()):(this.#a.set([C,R,h,d,f,g],6),Math.abs(Math.atan2(R-d,C-h)-Math.atan2(E,_))<Math.PI/2?([h,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-i)/l,((d+g)/2-a)/c),[h,d,C,R]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+h)/2-i)/l,((R+d)/2-a)/c),!0):([C,R,h,d,f,g]=this.#a.subarray(0,6),this.#r.push(((C+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),[f,g,h,d,C,R]=this.#a.subarray(12,18),this.#e.push(((C+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[l,c,h,d]=this.#p();return`M${(this.#a[2]-t)/i} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/i} ${(this.#a[5]-e)/a} L${l} ${c} L${h} ${d} L${(this.#a[16]-t)/i} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/i} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,a,l]=this.#t,c=this.#a.subarray(4,6),h=this.#a.subarray(16,18),[d,f,g,y]=this.#p();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/l} L${d} ${f} L${g} ${y} L${(h[0]-e)/a} ${(h[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,c){return new aA(t,e,i,a,l,c)}getOutlines(){const t=this.#r,e=this.#e,i=this.#a,[a,l,c,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/c,d[y+1]=(this.#f[y+1]-l)/h;if(d[d.length-2]=(this.#s-a)/c,d[d.length-1]=(this.#o-l)/h,isNaN(i[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let y=0;y<g;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}g=this.#A(f,g);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[y+b],f[g+1]=e[y+b+1],g+=2}return this.#x(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#a,[i,a,l,c]=this.#t,[h,d,f,g]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#x(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[l,c,h,d]=this.#t,[f,g,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/h,(i[1]-c)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-c)/d],e),e+=24}}class aA extends at{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,i,a,l,c){super(),this.#s=t,this.#r=e,this.#t=i,this.#a=a,this.#i=l,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[h,d,f,g]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/f,t[y+1]=(t[y+1]-d)/g;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-h)/f,e[y+1]=(e[y+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const c=i-t,h=a-e;let d,f;switch(l){case 0:d=at._rescale(this.#s,t,a,c,-h),f=at._rescale(this.#r,t,a,c,-h);break;case 90:d=at._rescaleAndSwap(this.#s,t,e,c,h),f=at._rescaleAndSwap(this.#r,t,e,c,h);break;case 180:d=at._rescale(this.#s,i,e,-c,h),f=at._rescale(this.#r,i,e,-c,h);break;case 270:d=at._rescaleAndSwap(this.#s,i,a,-c,-h),f=at._rescaleAndSwap(this.#r,i,a,-c,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],a=e[5];const l=[i,a,i,a];let c=i,h=a,d=i,f=a;const g=t?Math.max:Math.min,y=new Float32Array(4);for(let w=6,x=e.length;w<x;w+=6){const S=e[w+4],_=e[w+5];isNaN(e[w])?(st.pointBoundingBox(S,_,l),h>_?(c=S,h=_):h===_&&(c=g(c,S)),f<_?(d=S,f=_):f===_&&(d=g(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,st.bezierBoundingBox(i,a,...e.slice(w,w+6),y),st.rectBoundingBox(y[0],y[1],y[2],y[3],l),h>y[1]?(c=y[0],h=y[1]):h===y[1]&&(c=g(c,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=g(d,y[2]))),i=S,a=_}const b=this.#e;b[0]=l[0]-this.#i,b[1]=l[1]-this.#i,b[2]=l[2]-l[0]+2*this.#i,b[3]=l[3]-l[1]+2*this.#i,this.firstPoint=[c,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,l,c=0){return new Zs(t,e,i,a,l,c)}getNewOutline(t,e){const[i,a,l,c]=this.#e,[h,d,f,g]=this.#t,y=l*f,b=c*g,w=i*f+h,x=a*g+d,S=this.newOutliner({x:this.#r[0]*y+w,y:this.#r[1]*b+x},this.#t,this.#a,t,this.#n,e??this.#i);for(let _=2;_<this.#r.length;_+=2)S.add({x:this.#r[_]*y+w,y:this.#r[_+1]*b+x});return S.getOutlines()}}class Pf{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:_,width:E,height:C}of t){const R=Math.floor((S-e)/c)*c,M=Math.ceil((S+E+e)/c)*c,O=Math.floor((_-e)/c)*c,P=Math.ceil((_+C+e)/c)*c,B=[R,O,P,!0],W=[M,O,P,!1];this.#n.push(B,W),st.rectBoundingBox(R,O,M,P,l)}const h=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,f=l[0]-i,g=l[1]-i;let y=a?-1/0:1/0,b=1/0;const w=this.#n.at(a?-1:-2),x=[w[0],w[2]];for(const S of this.#n){const[_,E,C,R]=S;!R&&a?E<b?(b=E,y=_):E===b&&(y=Math.max(y,_)):R&&!a&&(E<b?(b=E,y=_):E===b&&(y=Math.min(y,_))),S[0]=(_-f)/h,S[1]=(E-g)/d,S[2]=(C-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=[y,b],this.#i=x}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const c of t){const[h,d,f]=c;e.push([h,d,c],[h,f,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let l;for(;i.size>0;){const c=i.values().next().value;let[h,d,f,g,y]=c;i.delete(c);let b=h,w=d;for(l=[h,f],a.push(l);;){let x;if(i.has(g))x=g;else if(i.has(y))x=y;else break;i.delete(x),[h,d,f,g,y]=x,b!==h&&(l.push(b,w,h,w===d?d:f),b=h),w=w===d?f:d}l.push(b,w)}return new FD(a,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:a=l-1}return a+1}#o([,t,e]){const i=this.#s(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let a=i;a<this.#r.length;a++){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}}#l(t){const[e,i,a]=t,l=[[e,i,a]],c=this.#s(a);for(let h=0;h<c;h++){const[d,f]=this.#r[h];for(let g=0,y=l.length;g<y;g++){const[,b,w]=l[g];if(!(f<=b||w<=d)){if(b>=d){if(w>f)l[g][1]=f;else{if(y===1)return[];l.splice(g,1),g--,y--}continue}l[g][2]=d,w>f&&l.push([e,f,w])}}}return l}}class FD extends at{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const c=e[l],h=e[l+1];c===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const c=[],h=i-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let y=0;y<f.length;y+=2)g[y]=t+f[y]*h,g[y+1]=a-f[y+1]*d;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class jf extends Zs{newFreeDrawOutline(t,e,i,a,l,c){return new zD(t,e,i,a,l,c)}}class zD extends aA{newOutliner(t,e,i,a,l,c=0){return new jf(t,e,i,a,l,c)}}class ye extends ut{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=ye.prototype;return bt(this,"_keyboardManager",new dl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||ye._defaultColor,this.#p=t.thickness||ye._defaultThickness,this.opacity=t.opacity||ye._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Pf(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Pf(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#p/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:ye.#_(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:ye.#_(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[l,c,h,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=h,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=h*b/y,this.height=d*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=h,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=h*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/h,(f[1]-c)/d];const{lastPoint:g}=this.#a;this.#m=[(g[0]-l)/h,(g[1]-c)/d]}static initialize(t,e){ut.initialize(t,e),ye._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:ye._defaultColor=e;break;case Mt.HIGHLIGHT_THICKNESS:ye._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:this.#E(e);break;case Mt.HIGHLIGHT_THICKNESS:this.#x(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,ye._defaultColor],[Mt.HIGHLIGHT_THICKNESS,ye._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||ye._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||ye._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,ye._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#x(t){const e=this.#p,i=a=>{this.#p=a,this.#A(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new yn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=ye.#_(this.#l.box,t)):i=ye.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:ye.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),Lw(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#N(t){ye._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#j(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#i,c=new Float32Array(l.length*8);let h=0;for(const{x:d,y:f,width:g,height:y}of l){const b=d*t+i,w=(1-f)*e+a;c[h]=c[h+4]=b,c[h+1]=c[h+3]=w,c[h+2]=c[h+6]=b+g*t,c[h+5]=c[h+7]=w-y*e,h+=8}return c}#k(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:c,y:h,width:d,height:f}=i.getBoundingClientRect(),g=new AbortController,y=t.combinedSignal(g),b=w=>{g.abort(),this.#B(t,w)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",le,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",vn,{signal:y}),i.addEventListener("pointermove",this.#O.bind(this,t),{signal:y}),this._freeHighlight=new jf({x:a,y:l},[c,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof iA){const{data:{quadPoints:x,rect:S,rotation:_,id:E,color:C,opacity:R,popupRef:M,richText:O,contentsObj:P,creationDate:B,modificationDate:W},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(C),opacity:R,quadPoints:x,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:P?.str||null,creationDate:B,modificationDate:W}}else if(t instanceof Sp){const{data:{inkLists:x,rect:S,rotation:_,id:E,color:C,borderStyle:{rawWidth:R},popupRef:M,richText:O,contentsObj:P,creationDate:B,modificationDate:W},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(C),thickness:R,inkLists:x,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,popupRef:M,richText:O,comment:P?.str||null,creationDate:B,modificationDate:W}}const{color:l,quadPoints:c,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=st.makeHexColor(...l),f.opacity=d||1,h&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,y]=f.pageDimensions,[b,w]=f.pageTranslation;if(c){const x=f.#i=[];for(let S=0;S<c.length;S+=8)x.push({x:(c[S]-b)/g,y:1-(c[S+1]-w)/y,width:(c[S+2]-c[S])/g,height:(c[S+1]-c[S+5])/y});f.#v(),f.#w(),f.rotate(f.rotation)}else if(h){f.#h=!0;const x=h[0],S={x:x[0]-b,y:y-(x[1]-w)},_=new jf(S,[0,0,g,y],1,f.#p/2,!0,.001);for(let R=0,M=x.length;R<M;R+=2)S.x=x[R]-b,S.y=y-(x[R+1]-w),_.add(S);const{id:E,clipPathId:C}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);f.#b({highlightOutlines:_.getOutlines(),highlightId:E,clipPathId:C}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ut._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#j(),outlines:this.#k(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class rA{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Kt("Not implemented")}}class Ut extends ut{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:i}=e.drawLayer.draw(Ut._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){Kt("Not implemented")}static get typesMap(){Kt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(Ut.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],c=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,i,a]){const{parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(c/l),a*(l/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/l),a*(l/c)];default:return[t,e,i,a]}}#d(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(l/c),a*(c/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/c),a*(c/l)];default:return[t,e,i,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:c,parentDimensions:[h,d]}=this;switch((l*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(h/d),a*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-a*(d/h),i*(h/d),a*(d/h)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/h),e,a*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-a*(d/h),i*(h/d),a*(d/h)];case 14:return[1-t,1-e-i*(h/d),a*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),a*(d/h)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ut._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){Kt("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:c,offsetY:h,pointerId:d,pointerType:f}=a;if(Ft.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:y,height:b}=l.getBoundingClientRect(),w=Ut.#n=new AbortController,x=t.combinedSignal(w);if(Ft.setPointer(f,d),window.addEventListener("pointerup",S=>{Ft.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:x}),window.addEventListener("pointercancel",S=>{Ft.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:x}),window.addEventListener("pointerdown",S=>{Ft.isSamePointerType(S.pointerType)&&(Ft.initializeAndAddPointerId(S.pointerId),Ut.#i.isCancellable()&&(Ut.#i.removeLastElement(),Ut.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:x}),window.addEventListener("contextmenu",vn,{signal:x}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:x}),l.addEventListener("touchmove",S=>{Ft.isSameTimeStamp(S.timeStamp)&&le(S)},{signal:x}),t.toggleDrawing(),e._editorUndoBar?.hide(),Ut.#i){t.drawLayer.updateProperties(this._currentDrawId,Ut.#i.startNew(c,h,y,b,g));return}e.updateUIForDefaultProperties(this),Ut.#i=this.createDrawerInstance(c,h,y,b,g),Ut.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Ut.#r.toSVGProperties(),Ut.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ft.isSameTimeStamp(t.timeStamp),!Ut.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(Ft.isSamePointerId(a)){if(Ft.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Ut.#i.add(e,i)),Ft.setTimeStamp(t.timeStamp),le(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Ut.#i=null,Ut.#r=null,Ft.clearTimeStamp()),Ut.#n&&(Ut.#n.abort(),Ut.#n=null,Ft.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Ut.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=Ut.#i,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Mt.DRAW_STEP),!Ut.#i.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Ut.#i.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:Ut.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,c){Kt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}=e.viewport,d=this.deserializeDraw(c,h,a,l,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class HD{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new gl;#l;#d;constructor(t,e,i,a,l,c){this.#l=i,this.#d=a,this.#n=l,this.#r=c,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:h,points:this.#a}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return at._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,l,c]=this.#t.subarray(2,6),h=t-l,d=e-c;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,c,t,e],0),this.#e.push(...at.createBezierPoints(i,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#l=i,this.#d=a,this.#n=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=at.svgRound(this.#e[4]),e=at.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const a=at.svgRound(this.#e[10]),l=at.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${l}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,l=this.#e.length;a<l;a+=6){const[c,h,d,f,g,y]=this.#e.slice(a,a+6).map(at.svgRound);i.push(`C${c} ${h} ${d} ${f} ${g} ${y}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,a){const l=this.#i.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class gl extends at{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,i,a,l,c,h){this.#r=e,this.#a=i,this.#s=a,this.#o=l,this.#c=c,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${at.svgRound(e[4])} ${at.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${at.svgRound(e[10])} ${at.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,c,h,d,f,g]=e.subarray(i,i+6).map(at.svgRound);t.push(`C${l} ${c} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,i,a],l){const c=[],h=[],[d,f,g,y]=this.#d();let b,w,x,S,_,E,C,R,M;switch(this.#o){case 0:M=at._rescale,b=t,w=e+a,x=i,S=-a,_=t+d*i,E=e+(1-f-y)*a,C=t+(d+g)*i,R=e+(1-f)*a;break;case 90:M=at._rescaleAndSwap,b=t,w=e,x=i,S=a,_=t+f*i,E=e+d*a,C=t+(f+y)*i,R=e+(d+g)*a;break;case 180:M=at._rescale,b=t+i,w=e,x=-i,S=a,_=t+(1-d-g)*i,E=e+f*a,C=t+(1-d)*i,R=e+(f+y)*a;break;case 270:M=at._rescaleAndSwap,b=t+i,w=e+a,x=-i,S=-a,_=t+(1-f-y)*i,E=e+(1-d-g)*a,C=t+(1-f)*i,R=e+(1-d)*a;break}for(const{line:O,points:P}of this.#n)c.push(M(O,b,w,x,S,l?new Array(O.length):null)),h.push(M(P,b,w,x,S,l?new Array(P.length):null));return{lines:c,points:h,rect:[_,E,C,R]}}static deserialize(t,e,i,a,l,{paths:{lines:c,points:h},rotation:d,thickness:f}){const g=[];let y,b,w,x,S;switch(d){case 0:S=at._rescale,y=-t/i,b=e/a+1,w=1/i,x=-1/a;break;case 90:S=at._rescaleAndSwap,y=-e/a,b=-t/i,w=1/a,x=1/i;break;case 180:S=at._rescale,y=t/i+1,b=-e/a,w=-1/i,x=1/a;break;case 270:S=at._rescaleAndSwap,y=e/a+1,b=t/i+1,w=-1/a,x=-1/i;break}if(!c){c=[];for(const E of h){const C=E.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(C-2));c.push(R);let[M,O,P,B]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,M,O],0);for(let W=4;W<C;W+=2){const K=E[W],et=E[W+1];R.set(at.createBezierPoints(M,O,P,B,K,et),(W-2)*3),[M,O,P,B]=[P,B,K,et]}}}for(let E=0,C=c.length;E<C;E++)g.push({line:S(c[E].map(R=>R??NaN),y,b,w,x),points:S(h[E].map(R=>R??NaN),y,b,w,x)});const _=new this.prototype.constructor;return _.build(g,i,a,1,d,f,l),_}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,i,a]=this.#t,[l,c]=this.#l(0);return[t+l,e+c,i-2*l,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)st.pointBoundingBox(a[h],a[h+1],t);continue}let l=a[4],c=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,y,b,w,x]=a.subarray(h,h+6);st.bezierBoundingBox(l,c,f,g,y,b,w,x,t),l=w,c=x}}const[e,i]=this.#l();t[0]=He(t[0]-e,0,1),t[1]=He(t[1]-i,0,1),t[2]=He(t[2]+e,0,1),t[3]=He(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,l]=this.#l(),[c,h]=[a-e,l-i],d=this.#t;return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[a,l]=this.#l();this.#r=t,this.#a=e,this.#s=i;const[c,h]=this.#l(),d=c-a,f=h-l,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(at.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,c=0,h=0,d=0;switch(this.#e){case 90:a=e/t,l=-t/e,h=t;break;case 180:i=-1,c=-1,h=t,d=e;break;case 270:a=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${l} ${c} ${at.svgRound(h)} ${at.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,c]=this.#l(),[h,d,f,g]=this.#t;if(Math.abs(f-l)<=at.PRECISION||Math.abs(g-c)<=at.PRECISION){const S=t+i/2-(h+f/2),_=e+a/2-(d+g/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${_})`}}}const y=(i-2*l)/(f-2*l),b=(a-2*c)/(g-2*c),w=f/i,x=g/a;return{path:{"transform-origin":`${at.svgRound(h)} ${at.svgRound(d)}`,transform:`${this.rotationTransform} scale(${w} ${x}) translate(${at.svgRound(l)} ${at.svgRound(c)}) scale(${y} ${b}) translate(${at.svgRound(-l)} ${at.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,c]=this.#l(),h=this.#t,[d,f,g,y]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=a,Math.abs(g-l)<=at.PRECISION||Math.abs(y-c)<=at.PRECISION){const _=t+i/2-(d+g/2),E=e+a/2-(f+y/2);for(const{line:C,points:R}of this.#n)at._translate(C,_,E,C),at._translate(R,_,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*l)/(g-2*l),w=(a-2*c)/(y-2*c),x=-b*(d+l)+t+l,S=-w*(f+c)+e+c;if(b!==1||w!==1||x!==0||S!==0)for(const{line:_,points:E}of this.#n)at._rescale(_,x,S,b,w,_),at._rescale(E,x,S,b,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,c=this.#t,h=t-c[0],d=e-c[1];if(this.#r===a&&this.#a===l)for(const{line:f,points:g}of this.#n)at._translate(f,h,d,f),at._translate(g,h,d,g);else{const f=this.#r/a,g=this.#a/l;this.#r=a,this.#a=l;for(const{line:y,points:b}of this.#n)at._rescale(y,h,d,f,g,y),at._rescale(b,h,d,f,g,b);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Tu extends rA{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ut._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Tu(this._viewParameters);return t.updateAll(this),t}}class xp extends Ut{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ut.initialize(t,e),this._defaultDrawingOptions=new Tu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return bt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new HD(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,c){return gl.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){let a=null;if(t instanceof Sp){const{data:{inkLists:c,rect:h,rotation:d,id:f,color:g,opacity:y,borderStyle:{rawWidth:b},popupRef:w,richText:x,contentsObj:S,creationDate:_,modificationDate:E},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:At.INK,color:Array.from(g),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:C-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:w,richText:x,comment:S?.str||null,creationDate:_,modificationDate:E}}const l=await super.deserialize(t,e,i);return l._initialData=a,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new Qo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=xp.getDefaultDrawingOptions({stroke:st.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h=Object.assign(super.serialize(t),{color:ut._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:i}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==e[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class Bf extends gl{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Gc=8,Mo=3;class Qs{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(i+y)*e+(a+b)]!==0)return g}return-1}static#r(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,y=this.#i[2*g],b=this.#i[2*g+1];if(t[(i+y)*e+(a+b)]!==0)return g}return-1}static#a(t,e,i,a){const l=t.length,c=new Int32Array(l);for(let g=0;g<l;g++)c[g]=t[g]<=a?1:0;for(let g=1;g<i-1;g++)c[g*e]=c[g*e+e-1]=0;for(let g=0;g<e;g++)c[g]=c[e*i-1-g]=0;let h=1,d;const f=[];for(let g=1;g<i-1;g++){d=1;for(let y=1;y<e-1;y++){const b=g*e+y,w=c[b];if(w===0)continue;let x=g,S=y;if(w===1&&c[b-1]===0)h+=1,S-=1;else if(w>=1&&c[b+1]===0)h+=1,S+=1,w>1&&(d=w);else{w!==1&&(d=Math.abs(w));continue}const _=[y,g],E=S===y+1,C={isHole:E,points:_,id:h,parent:0};f.push(C);let R;for(const tt of f)if(tt.id===d){R=tt;break}R?R.isHole?C.parent=E?R.parent:d:C.parent=E?d:R.parent:C.parent=E?d:0;const M=this.#n(c,e,g,y,x,S,0);if(M===-1){c[b]=-h,c[b]!==1&&(d=Math.abs(c[b]));continue}let O=this.#i[2*M],P=this.#i[2*M+1];const B=g+O,W=y+P;x=B,S=W;let K=g,et=y;for(;;){const tt=this.#r(c,e,K,et,x,S,1);O=this.#i[2*tt],P=this.#i[2*tt+1];const pt=K+O,Et=et+P;_.push(Et,pt);const q=K*e+et;if(c[q+1]===0?c[q]=-h:c[q]===1&&(c[q]=h),pt===g&&Et===y&&K===B&&et===W){c[b]!==1&&(d=Math.abs(c[b]));break}else x=K,S=et,K=pt,et=Et}}}return f}static#s(t,e,i,a){if(i-e<=4){for(let B=e;B<i-2;B+=2)a.push(t[B],t[B+1]);return}const l=t[e],c=t[e+1],h=t[i-4]-l,d=t[i-3]-c,f=Math.hypot(h,d),g=h/f,y=d/f,b=g*c-y*l,w=d/h,x=1/f,S=Math.atan(w),_=Math.cos(S),E=Math.sin(S),C=x*(Math.abs(_)+Math.abs(E)),R=x*(1-C+C**2),M=Math.max(Math.atan(Math.abs(E+_)*R),Math.atan(Math.abs(E-_)*R));let O=0,P=e;for(let B=e+2;B<i-2;B+=2){const W=Math.abs(b-g*t[B+1]+y*t[B]);W>O&&(P=B,O=W)}O>(f*M)**2?(this.#s(t,e,P+2,a),this.#s(t,P,i,a)):a.push(l,c)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,l,c){const h=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let S=0;S<c;S++){const _=(S-f)**2;for(let E=0;E<c;E++)h[S*c+E]=Math.exp((_+(E-f)**2)/d)}const g=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)g[S]=Math.exp(S**2/y);const b=t.length,w=new Uint8Array(b),x=new Uint32Array(256);for(let S=0;S<i;S++)for(let _=0;_<e;_++){const E=S*e+_,C=t[E];let R=0,M=0;for(let P=0;P<c;P++){const B=S+P-f;if(!(B<0||B>=i))for(let W=0;W<c;W++){const K=_+W-f;if(K<0||K>=e)continue;const et=t[B*e+K],tt=h[P*c+W]*g[Math.abs(et-C)];R+=et*tt,M+=tt}}const O=w[E]=Math.round(R/M);x[O]++}return[w,x]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,d=i.length;h<d;h++){const f=i[h]=t[h<<2];a=Math.max(a,f),l=Math.min(l,f)}const c=255/(a-l);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-l)*c;return i}static#h(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let c=l,h=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>a&&(a=e-c,h=e-1),i=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let c=i,h=a;if(i>l||a>l){let b=i,w=a,x=Math.log2(Math.max(i,a)/l);const S=Math.floor(x);x=x===S?S-1:S;for(let E=0;E<x;E++){c=Math.ceil(b/2),h=Math.ceil(w/2);const C=new OffscreenCanvas(c,h);C.getContext("2d").drawImage(t,0,0,b,w,0,0,c,h),b=c,w=h,t!==e&&t.close(),t=C.transferToImageBitmap()}const _=Math.min(l/c,l/h);c=Math.round(c*_),h=Math.round(h*_)}const f=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,h);const g=f.getImageData(0,0,c,h).data;return[this.#d(g),c,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,c,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const y=200,b=g.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:x,actualBoundingBoxAscent:S,actualBoundingBoxDescent:_,fontBoundingBoxAscent:E,fontBoundingBoxDescent:C,width:R}=g.measureText(t),M=1.5,O=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||0,R)*M),P=Math.ceil(Math.max(Math.abs(S)+Math.abs(_)||y,Math.abs(E)+Math.abs(C)||y)*M);f=new OffscreenCanvas(O,P),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=b,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,O,P),g.fillStyle="black",g.fillText(t,O*(M-1)/2,P*(3-M)/2);const B=this.#d(g.getImageData(0,0,O,P).data),W=this.#l(B),K=this.#h(W),et=this.#a(B,O,P,K);return this.processDrawnLines({lines:{curves:et,width:O,height:P},pageWidth:l,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[c,h,d]=this.#f(t),[f,g]=this.#c(c,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(g),b=this.#a(f,h,d,y);return this.processDrawnLines({lines:{curves:b,width:h,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:c,areContours:h}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:g}=t,y=t.thickness??0,b=[],w=Math.min(e/f,i/g),x=w/e,S=w/i,_=[];for(const{points:C}of d){const R=c?this.#o(C):C;if(!R)continue;_.push(R);const M=R.length,O=new Float32Array(M),P=new Float32Array(3*(M===2?2:M-2));if(b.push({line:P,points:O}),M===2){O[0]=R[0]*x,O[1]=R[1]*S,P.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[B,W,K,et]=R;B*=x,W*=S,K*=x,et*=S,O.set([B,W,K,et],0),P.set([NaN,NaN,NaN,NaN,B,W],0);for(let tt=4;tt<M;tt+=2){const pt=O[tt]=R[tt]*x,Et=O[tt+1]=R[tt+1]*S;P.set(at.createBezierPoints(B,W,K,et,pt,Et),(tt-2)*3),[B,W,K,et]=[K,et,pt,Et]}}if(b.length===0)return null;const E=h?new Bf:new gl;return E.build(b,e,i,1,a,h?0:y,l),{outline:E,newCurves:_,areContours:h,thickness:y,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let c=1/0,h=-1/0,d=0;for(const R of t){d+=R.length;for(let M=2,O=R.length;M<O;M++){const P=R[M]-R[M-2];c=Math.min(c,P),h=Math.max(h,P)}}let f;c>=-128&&h<=127?f=Int8Array:c>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,y=Gc+Mo*g,b=new Uint32Array(y);let w=0;b[w++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,b[w++]=0,b[w++]=a,b[w++]=l,b[w++]=e?0:1,b[w++]=Math.max(0,Math.floor(i??0)),b[w++]=g,b[w++]=f.BYTES_PER_ELEMENT;for(const R of t)b[w++]=R.length-2,b[w++]=R[0],b[w++]=R[1];const x=new CompressionStream("deflate-raw"),S=x.writable.getWriter();await S.ready,S.write(b);const _=f.prototype.constructor;for(const R of t){const M=new _(R.length-2);for(let O=2,P=R.length;O<P;O++)M[O-2]=R[O]-R[O-2];S.write(M)}S.close();const E=await new Response(x.readable).arrayBuffer(),C=new Uint8Array(E);return Ew(C)}static async decompressSignature(t){try{const e=d2(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const R of i)c||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),c.set(R,h),h+=R.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],y=d[3],b=d[4]===0,w=d[5],x=d[6],S=d[7],_=[],E=(Gc+Mo*x)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(S){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,E);break}h=0;for(let R=0;R<x;R++){const M=d[Mo*R+Gc],O=new Float32Array(M+2);_.push(O);for(let P=0;P<Mo-1;P++)O[P]=d[Mo*R+Gc+P+1];for(let P=0;P<M;P++)O[P+2]=O[P]+C[h++]}return{areContours:b,thickness:w,outlines:_,width:g,height:y}}catch(e){return St(`decompressSignature: ${e}`),null}}}class _p extends rA{constructor(){super(),super.updateProperties({fill:ut._defaultLineColor,"stroke-width":0})}clone(){const t=new _p;return t.updateAll(this),t}}class Ep extends Tu{constructor(t){super(t),super.updateProperties({stroke:ut._defaultLineColor,"stroke-width":1})}clone(){const t=new Ep(this._viewParameters);return t.updateAll(this),t}}class ei extends Ut{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ut.initialize(t,e),this._defaultDrawingOptions=new _p,this._defaultDrawnSignatureOptions=new Ep(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return bt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:l,areContours:c,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:y},rotation:b}=this.parent.viewport,w=Qs.processDrawnLines({lines:a,pageWidth:g,pageHeight:y,rotation:b,innerMargin:ei._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(w,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#i,c=Math.max(a,l),h=Qs.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:c}=this,{outline:h}=this.#i=t;this.#t=h instanceof Bf,this.description=i;let d;this.#t?d=ei.getDefaultDrawingOptions():(d=ei._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let g=e/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Qs.process(t,e,i,a,ei._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return Qs.extractContoursFromText(t,e,i,a,l,ei._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Qs.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:ei._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=ei.getDefaultDrawingOptions():(this._drawingOptions=ei._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#n,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,a,l,c){return c.areContours?Bf.deserialize(t,e,i,a,l,c):gl.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class GD extends ut{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ut.initialize(t,e)}static isHandlingMimeForPasting(t){return uu.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=uu.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>c*a||i>c*l){const d=Math.min(c*a/e,c*l/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const h=this.#s=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/a,this.height=i/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,c=new Gn;let h=this.#t,d=a,f=l,g=null;if(e){if(a>e||l>e){const P=Math.min(e/a,e/l);d=Math.floor(a*P),f=Math.floor(l*P)}g=document.createElement("canvas");const b=g.width=Math.ceil(d*c.sx),w=g.height=Math.ceil(f*c.sy);this.#l||(h=this.#u(b,w));const x=g.getContext("2d");x.filter=this._uiManager.hcmFilter;let S="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":g2.isDarkMode&&(S="#8f8f9d",_="#42414d");const E=15,C=E*c.sx,R=E*c.sy,M=new OffscreenCanvas(C*2,R*2),O=M.getContext("2d");O.fillStyle=S,O.fillRect(0,0,C*2,R*2),O.fillStyle=_,O.fillRect(0,0,C,R),O.fillRect(C,R,C,R),x.fillStyle=x.createPattern(M,"repeat"),x.fillRect(0,0,b,w),x.drawImage(h,0,0,h.width,h.height,0,0,b,w)}let y=null;if(i){let b,w;if(c.symmetric&&h.width<t&&h.height<t)b=h.width,w=h.height;else if(h=this.#t,a>t||l>t){const _=Math.min(t/a,t/l);b=Math.floor(a*_),w=Math.floor(l*_),this.#l||(h=this.#u(b,w))}const S=new OffscreenCanvas(b,w).getContext("2d",{willReadFrequently:!0});S.drawImage(h,0,0,h.width,h.height,0,0,b,w),y={width:b,height:w,data:S.getImageData(0,0,b,w).data}}return{canvas:g,width:d,height:f,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let l=i,c=a,h=this.#t;for(;l>2*t||c>2*e;){const d=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(l,c);g.getContext("2d").drawImage(h,0,0,d,f,0,0,l,c),h=g.transferToImageBitmap()}return h}#p(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new Gn,c=Math.ceil(i*t*l.sx),h=Math.ceil(a*e*l.sy),d=this.#s;if(!d||d.width===c&&d.height===h)return;d.width=c,d.height=h;const f=this.#l?this.#t:this.#u(c,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,h)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*sa.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*sa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof sA){const{data:{rect:S,rotation:_,id:E,structParent:C,popupRef:R,richText:M,contentsObj:O,creationDate:P,modificationDate:B},container:W,parent:{page:{pageNumber:K}},canvas:et}=t;let tt,pt;et?(delete t.canvas,{id:tt,bitmap:pt}=i.imageManager.getFromCanvas(W.id,et),et.remove()):(l=!0,t._hasNoCanvas=!0);const Et=(await e._structTree.getAriaAttributes(`${ir}${E}`))?.get("aria-label")||"";a=t={annotationType:At.STAMP,bitmapId:tt,bitmap:pt,pageIndex:K-1,rect:S.slice(0),rotation:_,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:Et},isSvg:!1,structParent:C,popupRef:R,richText:M,comment:O?.str||null,creationDate:P,modificationDate:B}}const c=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:y,accessibilityData:b}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):g&&i.imageManager.isValidId(g)?(c.#e=g,d&&(c.#t=d)):c.#n=f,c.#l=y;const[w,x]=c.pageDimensions;return c.width=(h[2]-h[0])/w,c.height=(h[3]-h[1])/x,b&&(c.altTextData=b),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=this.#v(i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ii{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([Ne,xp,GD,ye,ei].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const y=[...ii.#p.values()];if(!ii._initialized){ii._initialized=!0;for(const b of y)b.initialize(g,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=l,this.#i=c,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of ii.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const a=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:d,timeStamp:f}=l,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let w;const x=new RegExp(`^${Xo}[0-9]+$`);for(const _ of b)if(x.test(_.id)){w=_.id;break}if(!w)return;const S=this.#a.get(w);S?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),S.dblclick(l))},{signal:a,capture:!0})}const t=this.#i,e=[];if(t){const a=new Map,l=new Map;for(const h of this.#y){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);this.getEditableAnnotation(h.annotationElementId)?.show(),h.remove()}const c=t.getEditableAnnotations();for(const h of c){const{id:d}=h.data;if(this.#u.isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let f=l.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(h)&&f.show(!1)),h.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of ii.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=xe.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),ye.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),ut.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return ii.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#x(),l=this.getNextId(),c=this.#E({parent:this,id:l,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await ii.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#E({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(l+h)/2-t,g=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#x(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===At.STAMP||i===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=xe.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ts(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Ts(this.div,{rotation:i}),e!==i)for(const a of this.#a.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Me{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return bt(this,"_svgFactory",new Zo)}static#r(t,[e,i,a,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`}#a(){const t=Me._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=Me._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=Me._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Me.#n++,l=this.#a(),c=Me._svgFactory.createElement("defs");l.append(c);const h=Me._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,h);const f=i?this.#s(c,d):null,g=Me._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Me.#n++,a=this.#a(),l=Me._svgFactory.createElement("defs");a.append(l);const c=Me._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Me._svgFactory.createElement("mask");l.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Me._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const w=Me._svgFactory.createElement("use");y.append(w),w.setAttribute("href",`#${h}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Me._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:c}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),a&&Me.#r(h,a),l){const{classList:d}=h;for(const[f,g]of Object.entries(l))d.toggle(f,g)}if(c){const f=h.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Pf};globalThis.pdfjsLib={AbortException:Fi,AnnotationEditorLayer:ii,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:zi,AnnotationLayer:Eu,AnnotationMode:ki,AnnotationType:me,applyOpacity:Nw,build:Jw,ColorPicker:yn,createValidAbsoluteUrl:lp,CSSConstants:Dw,DOMSVGFactory:Zo,DrawLayer:Me,FeatureTest:xe,fetchData:Cr,findContrastColor:Mw,getDocument:Ww,getFilenameFromUrl:Tw,getPdfFilenameFromUrl:Cw,getRGB:Rr,getUuid:up,getXfaPageViewport:Rw,GlobalWorkerOptions:na,ImageKind:Fo,InvalidPDFException:lu,isDataScheme:hl,isPdfFile:xu,isValidExplicitDest:Pw,MathClamp:He,noContextMenu:vn,normalizeUnicode:_w,OPS:yr,OutputScale:Gn,PasswordResponses:Sw,PDFDataRangeTransport:wp,PDFDateString:cu,PDFWorker:br,PermissionFlag:Aw,PixelsPerInch:sa,RenderingCancelledException:Su,renderRichText:dp,ResponseException:Wo,setLayerDimensions:Ts,shadow:bt,SignatureExtractor:Qs,stopEvent:le,SupportedImageMimeTypes:uu,TextLayer:ln,TouchManager:fl,updateUrlHash:cp,Util:st,VerbosityLevel:ll,version:Zw,XfaLayer:hp};const VD=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Fi,AnnotationEditorLayer:ii,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:zi,AnnotationLayer:Eu,AnnotationMode:ki,AnnotationType:me,CSSConstants:Dw,ColorPicker:yn,DOMSVGFactory:Zo,DrawLayer:Me,FeatureTest:xe,GlobalWorkerOptions:na,ImageKind:Fo,InvalidPDFException:lu,MathClamp:He,OPS:yr,OutputScale:Gn,PDFDataRangeTransport:wp,PDFDateString:cu,PDFWorker:br,PasswordResponses:Sw,PermissionFlag:Aw,PixelsPerInch:sa,RenderingCancelledException:Su,ResponseException:Wo,SignatureExtractor:Qs,SupportedImageMimeTypes:uu,TextLayer:ln,TouchManager:fl,Util:st,VerbosityLevel:ll,XfaLayer:hp,applyOpacity:Nw,build:Jw,createValidAbsoluteUrl:lp,fetchData:Cr,findContrastColor:Mw,getDocument:Ww,getFilenameFromUrl:Tw,getPdfFilenameFromUrl:Cw,getRGB:Rr,getUuid:up,getXfaPageViewport:Rw,isDataScheme:hl,isPdfFile:xu,isValidExplicitDest:Pw,noContextMenu:vn,normalizeUnicode:_w,renderRichText:dp,setLayerDimensions:Ts,shadow:bt,stopEvent:le,updateUrlHash:cp,version:Zw},Symbol.toStringTag,{value:"Module"}));na.workerPort=new Worker(new URL("/assets/pdf.worker.min-BHtGh23B.js",import.meta.url),{type:"module"});const $0=async r=>{try{let t="";for(let e=1;e<=r.numPages;e++){const l=(await(await r.getPage(e)).getTextContent()).items.map(c=>c.str).join(" ");t+=l+"\f"}return t}catch(t){return console.error("Error extracting text from PDF:",t),"PDF text content"}},Y0=async r=>{let t;if(typeof r=="string")t=new TextEncoder().encode(r);else if(r instanceof ArrayBuffer)t=new Uint8Array(r);else if(r instanceof Uint8Array)t=r;else throw new Error("computeSHA256: unsupported input type");const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(a=>a.toString(16).padStart(2,"0")).join("")};function Vc({pageCount:r,extractedText:t,pdfSizeBytes:e}){const i=String(t||""),l=i.split("\f").filter(c=>c!==void 0).slice(0,r).map(c=>String(c||"").trim().length);return{pageCount:r,charsPerPage:l,totalChars:i.replace(/\f/g,"").length,pdfSizeBytes:e||0}}const X0=()=>{const{authState:r,app:t,auth:e}=Tr(),i=typeof window<"u"&&window.MOCK_AUTH,[a,l]=I.useState(null),[c,h]=I.useState({}),[d,f]=I.useState(!1),[g,y]=I.useState(null),[b,w]=I.useState(null),[x,S]=I.useState(1),[_,E]=I.useState(1.5),[C,R]=I.useState(null),[M,O]=I.useState(""),[P,B]=I.useState(null),[W,K]=I.useState([]),[et,tt]=I.useState([]),[pt,Et]=I.useState([]),[q,ot]=I.useState(null),[k,U]=I.useState(""),[Z,vt]=I.useState(!1),[yt,D]=I.useState(null),[V,Q]=I.useState(!1),[nt,ht]=I.useState("legal_contract_generic"),[gt,dt]=I.useState(null),[ee,It]=I.useState(null),[Vn,Pn]=I.useState(null),ci=I.useRef(null),{documentId:ca,fileName:Ge}=cv(),Gi=li(),Vi=ra(),Be=t?mw(t):null,{canvasRef:ml,textLayerRef:Dr,annotationsRef:Nr,renderPage:Mr}=n2(g,_);I.useEffect(()=>{r.status==="error"&&r.error?l(r.error.message||"Firebase authentication error"):t||l("Firebase not initialized properly")},[r,t]);const Ds=()=>i&&r.status==="authenticated"?!0:t&&Be&&r.status==="authenticated";I.useEffect(()=>{(async()=>{const it=await $f(()=>Promise.resolve().then(()=>VD),[]);window.pdfjsLib=it,vt(!0),Ge&&await qe(Ge)})()},[Ge]),I.useEffect(()=>{Gi.state?.document&&!Ge&&Z&&(R(Gi.state.document),$n(Gi.state.document.file))},[Gi,Ge,Z]),I.useEffect(()=>{g&&x&&Mr(x,W,et,pt)},[g,x,_,W,et,pt]);const{types:Cu}=ww(),Ue=J=>Cu.find(it=>it.id===J)||null,ua=Ue(ee||nt),yl=Ue(nt),[ha,kr]=I.useState(!1),qn=ua?.validationSlug||null,Ns=e2(qn),bl=async J=>{if(!(!Be||i))try{const it=await UR({functions:Be,docHash:J})||{};it?.overrideTypeId&&It(it.overrideTypeId),it?.detected?.typeId&&ht(it.detected.typeId),it?.detected&&dt({intakeCategory:it.detected.intakeCategory||null,confidence:typeof it.detected.confidence=="number"?it.detected.confidence:null,model:it.detected.model||null,updatedAt:it.detected.updatedAt||null})}catch(it){console.warn("Failed to load server document type state",it)}},qi=async({docHashValue:J,stats:it,text:Ot})=>{if(!(!Be||i))try{const Tt=await FR({functions:Be,docHash:J,stats:it,text:Ot})||{};Tt?.typeId&&ht(Tt.typeId),dt({intakeCategory:Tt.intakeCategory||null,confidence:typeof Tt.confidence=="number"?Tt.confidence:null,model:Tt.model||"heuristic-v1",updatedAt:null})}catch(Tt){console.warn("Failed to detect document type",Tt)}},Ve=async(J,it)=>{try{localStorage.setItem(`decodocs:doctype:${J}`,String(it))}catch{}if(!(!Be||i))try{await BR({functions:Be,docHash:J,typeId:it})}catch(Ot){console.warn("Failed to persist doc type override",Ot)}},$n=async J=>{if(!(!window.pdfjsLib||!J))try{f(!0);const it=J.name||"document";U(`Loading ${it}...`);const Ot=await J.arrayBuffer();console.log("PDF Buffer Size:",Ot.byteLength);const Tt=await Y0(Ot);ot(Tt);try{const ke=localStorage.getItem(`decodocs:doctype:${Tt}`);ke&&It(ke)}catch{}await bl(Tt);const Qt=await window.pdfjsLib.getDocument({data:Ot,onProgress:ke=>{const Zt=Math.round(ke.loaded/ke.total*100);U(`Loading ${it}: ${Zt}%`)}}).promise;y(Qt),w(Qt.numPages),U(`Extracting text from ${it}...`);const ae=await $0(Qt);O(ae);const fe=Vc({pageCount:Qt.numPages,extractedText:ae,pdfSizeBytes:Ot.byteLength});B(fe),qi({docHashValue:Tt,stats:fe,text:ae}),S(1),U("")}catch(it){console.error("Error loading PDF from blob:",it),console.error(it.stack),U("")}finally{f(!1)}},qe=async J=>{if(window.pdfjsLib)try{f(!0),U(`Loading ${J}...`);const it=`/test-docs/${J}`,Ot=await fetch(it);if(!Ot.ok)throw new Error(`Failed to fetch PDF: ${Ot.statusText}`);const Tt=await Ot.arrayBuffer(),_e=await Y0(Tt);ot(_e);try{const Zt=localStorage.getItem(`decodocs:doctype:${_e}`);Zt&&It(Zt)}catch{}await bl(_e);const ae=await window.pdfjsLib.getDocument({data:Tt,onProgress:Zt=>{const Fe=Math.round(Zt.loaded/Zt.total*100);U(`Loading ${J}: ${Fe}%`)}}).promise;y(ae),w(ae.numPages),R({id:J,name:J,size:Tt.byteLength,type:"application/pdf",file:null}),U(`Extracting text from ${J}...`);const fe=await $0(ae);O(fe);const ke=Vc({pageCount:ae.numPages,extractedText:fe,pdfSizeBytes:Tt.byteLength});B(ke),qi({docHashValue:_e,stats:ke,text:fe}),S(1),U("")}catch(it){console.error("Error loading test PDF:",it),U(""),D({title:"Could not load PDF",message:it?.message||"Failed to load test PDF.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{f(!1)}},Ru=()=>{x<=1||S(x-1)},Du=()=>{x>=b||S(x+1)},Nu=()=>{E(J=>Math.min(J+.2,3))},da=()=>{E(J=>Math.max(J-.2,.5))},fa=J=>{const Ot=Array.from(J.target.files).filter(Tt=>Tt.type==="application/pdf");if(Ot.length>0){const Tt=Ot[0],_e={id:Date.now()+Math.random(),name:Tt.name,size:Tt.size,type:Tt.type,file:Tt};R(_e),Vi("/view",{state:{document:_e}})}},pa=async()=>{if(!M||!b)return{ok:!0,classification:"OK"};if(i)return{ok:!0,classification:"OK"};if(!Be)return console.error("Firebase functions not available. Returning default response."),{ok:!0,classification:"OK"};try{const J=Vc({pageCount:b,extractedText:M,pdfSizeBytes:C?.size||0});return await zR({functions:Be,docHash:q,stats:J})}catch(J){return console.error("Preflight check error:",J),{ok:!0,classification:"OK"}}},ui=async()=>{if(!(!C||!M||!q)){if(!Ds()){console.warn("Type-specific analysis unavailable: Firebase services not accessible.");return}f(!0);try{if(i){D({title:"Type-specific analysis (beta)",message:"Not available in mock mode yet.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null});return}const J=await jR({functions:Be,docHash:q,text:M})||{},it={ok:!!J.ok,effectiveTypeId:J.effectiveTypeId||null,validationSlug:J.validationSlug||null,validationTitle:J.validationSpec?.title||null,message:J.message||null,result:J.result||null,usage:J.usage||null,requiredTier:J.requiredTier||null,code:J.code||null};h(Ot=>({...Ot,[C.id]:{...Ot[C.id]||{},typeSpecific:it}})),D({title:"Type-specific analysis (beta)",message:`effectiveTypeId: ${it.effectiveTypeId||"null"}
validationSlug: ${it.validationSlug||"null"}

`+(it.validationTitle?`Spec: ${it.validationTitle}

`:"")+(it.message||""),primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}catch(J){console.error("analyzeByType error:",J),D({title:"Type-specific analysis failed",message:J?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{f(!1)}}},ga=async()=>{if(!(!C||!M||!q)){if(!Ds()){console.warn("Document analysis unavailable: Firebase services not accessible.");return}f(!0);try{const J=await pa();if(!J.ok)throw console.error("Preflight check failed:",J),new Error(J.message||"Preflight check failed");if(J.classification==="PRO_REQUIRED"){D({title:"Pro required",message:J.reasons?.map(ae=>ae.message).join(" ")||"This document requires Pro features (OCR / deeper processing).",primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}const it=Vc({pageCount:b,extractedText:M,pdfSizeBytes:C?.size||0}),Ot=M.split("\f"),{charsPerPage:Tt,totalChars:_e}=it;let Qt;if(i?Qt={data:await(await fetch("/analyzeText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,stats:{pageCount:b,charsPerPage:Tt,totalChars:_e,languageHint:"en"},text:{format:"paged",value:M},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}})})).json()}:Qt=await HR({functions:Be,payload:{docHash:q,stats:{pageCount:b,charsPerPage:Tt,totalChars:_e,languageHint:"en"},text:{format:"paged",value:M,pageTextIndex:Ot.map((ae,fe)=>({page:fe+1,start:0,end:ae.length}))},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}}}),Qt.data.ok){D(null);const ae={summary:Qt.data.result.plainExplanation,keyPoints:[],risks:Qt.data.result.risks.map(fe=>({id:fe.id,clause:fe.title,riskLevel:fe.severity,description:fe.whyItMatters,explanation:fe.whatToCheck.join("; ")})),recommendations:Qt.data.result.risks.flatMap(fe=>fe.whatToCheck||[])};h(fe=>({...fe,[C.id]:ae})),Ms(ae)}else{const ae=Qt.data.code;if(ae==="SCAN_DETECTED_PRO_REQUIRED"){D({title:"Scanned PDF (OCR requires Pro)",message:Qt.data.message||"This PDF appears to be scanned. OCR is available on Pro.",primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}if(ae==="ANON_TOKEN_LIMIT"){D({title:"Limit reached",message:Qt.data.message||"Anonymous token limit reached. Create a free account to continue.",primaryLabel:"Create free account",primaryTo:"/sign-in",secondaryLabel:"Cancel",secondaryTo:null});return}if(ae==="FREE_TOKEN_LIMIT"){D({title:"Daily limit reached",message:Qt.data.message||"Daily token limit reached. Upgrade to Pro to continue.",primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}throw console.error("Analysis failed:",Qt.data),new Error(Qt.data.message||"Analysis failed")}}catch(J){throw console.error("Error analyzing document:",J),J}finally{f(!1)}}},Ms=J=>{const it=[],Ot=[],Tt=[];J.risks&&J.risks.length>0&&J.risks.forEach((_e,Qt)=>{Tt.push({id:Qt,pageNum:1,x:100+Qt*50,y:100+Qt*40,level:_e.riskLevel,description:_e.description,explanation:_e.explanation})}),K(it),tt(Ot),Et(Tt)},Mu=async()=>{if(!C||!q)return;if(!Ds()){console.warn("Explain selection unavailable: Firebase services not accessible.");return}const J="Limitation of liability clause";try{let it;if(i?it={data:await(await fetch("/explainSelection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,selection:J,documentContext:M})})).json()}:it=await ai(Be,"explainSelection")({docHash:q,selection:J,documentContext:M}),it.data.success)alert(`Explanation: ${it.data.explanation.plainExplanation}`);else throw console.error("Explanation failed:",it.data),new Error(it.data.error||"Explanation failed")}catch(it){throw console.error("Error explaining selection:",it),it}},vl=async()=>{if(!(!C||!q)){if(!Ds()){console.warn("Risk highlighting unavailable: Firebase services not accessible.");return}f(!0);try{let J;if(i?J={data:await(await fetch("/highlightRisks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,documentText:M,documentType:"contract"})})).json()}:J=await ai(Be,"highlightRisks")({docHash:q,documentText:M,documentType:"contract"}),J.data.success){alert(`Found ${J.data.risks.summary.totalRisks} risks in the document.`);const it=J.data.risks.items?.map((Ot,Tt)=>({id:Tt,pageNum:1,x:150+Tt*40,y:150+Tt*35,level:Ot.riskLevel,description:Ot.description,explanation:Ot.explanation}))||[];Et(it)}else throw console.error("Risk highlighting failed:",J.data),new Error(J.data.error||"Risk highlighting failed")}catch(J){throw console.error("Error highlighting risks:",J),J}finally{f(!1)}}},Lr=async()=>{if(!(!C||!q)){if(!Ds()){console.warn("Translation unavailable: Firebase services not accessible.");return}try{const J=M.substring(0,500);let it;if(i?it={data:await(await fetch("/translateToPlainEnglish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,legalText:J})})).json()}:it=await ai(Be,"translateToPlainEnglish")({docHash:q,legalText:J}),it.data.success)alert(`Original: ${it.data.translation.originalText}

Plain English: ${it.data.translation.plainEnglishTranslation}`);else throw console.error("Translation failed:",it.data),new Error(it.data.error||"Translation failed")}catch(J){throw console.error("Error translating to plain English:",J),J}}},ks=()=>{C&&Vi(`/edit/${C.id}`,{state:{document:C}})};return I.useEffect(()=>()=>{g&&g.destroy()},[g]),v.jsxs($R,{children:[yt&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:16},onClick:()=>D(null),children:v.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:520,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:J=>J.stopPropagation(),children:[v.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:yt.title}),v.jsx("div",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:yt.message}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap",justifyContent:"flex-end"},children:[yt.secondaryLabel&&v.jsx("button",{type:"button",onClick:()=>{D(null),yt.secondaryTo&&Vi(yt.secondaryTo)},style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:yt.secondaryLabel}),yt.primaryLabel&&v.jsx("button",{type:"button",onClick:async()=>{if(yt._kind==="confirm-override"&&Vn&&q){const J=Vn.id;It(J),await Ve(q,J),Pn(null),D(null);return}D(null),yt.primaryTo&&Vi(yt.primaryTo)},style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:yt.primaryLabel})]})]})}),v.jsx(t2,{open:V,detectedType:yl,onClose:()=>Q(!1),onPick:J=>{Q(!1),Pn(J),D({title:"Confirm document type",message:`Set document type to ${J.label}? This will change the actions/checks we show for this document.`,primaryLabel:"Confirm",primaryTo:null,secondaryLabel:"Cancel",secondaryTo:null,_kind:"confirm-override"})}}),ha&&v.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2100,padding:16},onClick:()=>kr(!1),children:v.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:820,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",maxHeight:"80vh",overflow:"auto"},onClick:J=>J.stopPropagation(),children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[v.jsxs("div",{children:[v.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Validation criteria"}),v.jsxs("div",{style:{marginTop:6,color:"#475569"},children:["Type: ",v.jsx("strong",{children:ua?.label||"Unknown"}),qn?v.jsxs("span",{style:{color:"#94a3b8"},children:[" (",qn,")"]}):null]})]}),v.jsx("button",{type:"button",onClick:()=>kr(!1),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),v.jsxs("div",{style:{marginTop:12},children:[Ns.status==="loading"&&v.jsx("div",{style:{color:"#475569"},children:"Loading"}),Ns.status==="error"&&v.jsx("div",{style:{color:"#991b1b"},children:"Could not load criteria."}),Ns.status==="ready"&&v.jsxs(v.Fragment,{children:[v.jsx("div",{style:{fontWeight:900,color:"#0f172a",marginBottom:8},children:Ns.spec?.title}),v.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,color:"#0f172a",fontSize:13,lineHeight:1.6},children:Ns.spec?.markdown})]})]})]})}),v.jsxs("div",{className:"flex flex-1 min-h-0 h-[calc(100vh-120px)]",children:[v.jsxs("div",{className:"flex-1 flex flex-col p-5 border-r border-gray-300 min-w-0",children:[v.jsx(YR,{onFileSelect:fa,onEdit:ks,currentFileName:C?.name,pageNumber:x,numPages:b,pageScale:_,onPreviousPage:Ru,onNextPage:Du,onZoomIn:Nu,onZoomOut:da,fileInputRef:ci}),q&&v.jsxs("div",{style:{marginTop:10,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[v.jsxs("div",{style:{display:"inline-flex",gap:8,alignItems:"center",padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,color:"#0f172a",fontSize:13,flexWrap:"wrap"},children:[v.jsx("span",{style:{color:"#64748b",fontWeight:800},children:"Type:"}),v.jsx("span",{children:ua?.label||"Unknown"}),ee&&v.jsx("span",{style:{color:"#64748b",fontWeight:800},children:"(overridden)"}),gt?.intakeCategory&&v.jsxs("span",{style:{color:"#64748b",fontWeight:800},children:[" ",gt.intakeCategory]}),typeof gt?.confidence=="number"&&v.jsxs("span",{style:{color:"#94a3b8",fontWeight:800},children:["(",Math.round(gt.confidence*100),"%)"]})]}),v.jsx("button",{type:"button",onClick:()=>Q(!0),style:{padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Change"}),v.jsx("button",{type:"button",onClick:()=>kr(!0),disabled:!qn,style:{padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:qn?"pointer":"not-allowed",opacity:qn?1:.5},title:qn?"View validation criteria":"No criteria spec for this type yet",children:"Criteria"})]}),v.jsx(XR,{pdfDoc:g,isLoading:d,loadingMessage:k,canvasRef:ml,textLayerRef:Dr,annotationsRef:Nr})]}),v.jsxs("div",{className:"flex flex-col",children:[v.jsx(WR,{onAnalyzeDocument:ga,onAnalyzeByType:ui,onExplainSelection:Mu,onHighlightRisks:vl,onTranslateToPlainEnglish:Lr,isLoading:d,isAuthenticated:r.status==="authenticated",hasDocument:!!C}),c[C?.id]&&v.jsx("div",{className:"w-[350px] p-5 bg-gray-50 border-l border-gray-300 overflow-y-auto",children:v.jsx(QR,{analysis:c[C.id]})})]})]})]})},qD=()=>{const[r,t]=I.useState(null),[e,i]=I.useState(null),[a,l]=I.useState(!1),[c,h]=I.useState([]),[d,f]=I.useState([]),[g,y]=I.useState(null),[b,w]=I.useState({width:150,height:50}),x=I.useRef(null);I.useRef(null);const{documentId:S}=cv(),_=li(),E=ra();I.useEffect(()=>{if(_.state?.document){i(_.state.document);const q=URL.createObjectURL(_.state.document.file);t(q)}else if(S){const q={id:S,name:`Document_${S}.pdf`,size:102400,type:"application/pdf",file:null};i(q)}},[S,_]),I.useEffect(()=>{if(e)try{const q=e?.id||S||"unknown",ot=e?.name||"document",k=`decodocs:draft:${q}:${ot}`,U=localStorage.getItem(k);if(!U)return;const Z=JSON.parse(U);Array.isArray(Z?.signatures)&&h(Z.signatures),Array.isArray(Z?.annotations)&&f(Z.annotations)}catch(q){console.warn("Failed to load local draft",q)}},[e,S]);const C=q=>{const k=Array.from(q.target.files).filter(U=>U.type==="application/pdf");if(k.length>0){const U={id:Date.now()+Math.random(),name:k[0].name,size:k[0].size,type:k[0].type,file:k[0]},Z=URL.createObjectURL(U.file);i(U),t(Z),E(`/edit/${U.id}`,{state:{document:U}})}},R=()=>{const q=e?.id||S||"unknown",ot=e?.name||"document";return`decodocs:draft:${q}:${ot}`},M=()=>{if(!e)return;const q={savedAt:new Date().toISOString(),document:{id:e.id||S||null,name:e.name||null},signatures:c,annotations:d};try{localStorage.setItem(R(),JSON.stringify(q)),console.log("Draft saved locally")}catch(ot){console.error("Failed to save draft locally",ot)}},O=async()=>{try{if(!r&&!e?.file)return;const q=e?.name||`document_${e?.id||S||"download"}.pdf`;let ot;if(e?.file instanceof File)ot=e.file;else{const Z=await fetch(r);if(!Z.ok)throw new Error(`Failed to download PDF (${Z.status})`);ot=await Z.blob()}const k=URL.createObjectURL(ot),U=document.createElement("a");U.href=k,U.download=q,document.body.appendChild(U),U.click(),U.remove(),URL.revokeObjectURL(k)}catch(q){console.error("Download failed",q)}},P=()=>{if(!r)return;const q=window.open(r,"_blank","noopener,noreferrer");if(!q)return;const ot=()=>{try{q.focus(),q.print()}catch(k){console.error("Print failed",k)}};q.addEventListener("load",()=>setTimeout(ot,250))},B=()=>{l(!a)},W=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),k=q.clientX-ot.left,U=q.clientY-ot.top,Z={id:Date.now(),x:k,y:U,width:b.width,height:b.height,text:"John Doe",date:new Date().toLocaleDateString()};h([...c,Z])},K=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),k=q.clientX-ot.left,U=q.clientY-ot.top,Z={id:Date.now(),x:k,y:U,text:"Important note"};f([...d,Z])},et=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),k=q.clientX-ot.left,U=q.clientY-ot.top,Z={id:Date.now(),x:k,y:U,width:50,height:25,text:"JD"};h([...c,Z])},tt=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),k=q.clientX-ot.left,U=q.clientY-ot.top,Z={id:Date.now(),x:k,y:U,width:100,height:25,text:new Date().toLocaleDateString()};h([...c,Z])},pt=(q,ot)=>{w(k=>({...k,[q]:parseInt(ot)}))},Et=()=>{e&&E(`/view/${e.id}`,{state:{document:e}})};return v.jsxs(v.Fragment,{children:[v.jsx("header",{className:"App-header",children:v.jsxs(Yt,{to:"/",style:{textDecoration:"none",color:"white"},children:[v.jsx("h1",{children:"DecoDocs"}),v.jsx("p",{children:v.jsx("strong",{children:"Decode documents. Act with confidence."})})]})}),v.jsxs("div",{className:"pdf-editor-layout",children:[v.jsxs("div",{className:"pdf-editor-container",children:[v.jsxs("div",{className:"pdf-controls",children:[v.jsx("button",{onClick:()=>x.current?.click(),className:"open-pdf-btn",children:"Open Different PDF"}),v.jsx("button",{onClick:Et,className:"view-pdf-btn",children:"View Document"}),v.jsx("button",{onClick:B,className:`sign-mode-btn ${a?"active":""}`,children:a?"Exit Sign Mode":"Enter Sign Mode"}),e&&v.jsxs("span",{className:"current-file",children:["Current: ",e.name]}),v.jsx("input",{type:"file",ref:x,accept:".pdf",multiple:!0,onChange:C,style:{display:"none"}})]}),r?v.jsxs("div",{className:"pdf-display",onClick:a?W:void 0,children:[v.jsx("iframe",{src:r,title:"PDF Editor",width:"100%",height:"calc(100vh - 200px)",type:"application/pdf"}),a&&v.jsxs(v.Fragment,{children:[c.map(q=>v.jsx("div",{className:"signature-element",style:{position:"absolute",left:`${q.x}px`,top:`${q.y}px`,width:`${q.width}px`,height:`${q.height}px`,border:"1px solid #007acc",backgroundColor:"rgba(0, 122, 204, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#007acc",zIndex:1e3},children:q.text},q.id)),d.map(q=>v.jsx("div",{className:"annotation-element",style:{position:"absolute",left:`${q.x}px`,top:`${q.y}px`,padding:"5px",backgroundColor:"yellow",border:"1px solid black",fontSize:"12px",zIndex:1e3},children:q.text},q.id))]})]}):v.jsx("div",{className:"pdf-placeholder",children:v.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})})]}),v.jsxs("div",{className:"editor-toolbox-section",children:[v.jsxs("div",{className:"editor-controls",children:[v.jsx("h4",{children:"Editor Controls"}),v.jsxs("div",{className:"editor-buttons",children:[v.jsx("button",{onClick:M,className:"save-btn",disabled:!e,children:"Save (local)"}),v.jsx("button",{onClick:O,className:"download-btn",disabled:!r&&!e?.file,children:"Download"}),v.jsx("button",{onClick:P,className:"print-btn",disabled:!r,children:"Print"})]})]}),v.jsxs("div",{className:"signing-tools",children:[v.jsx("h4",{children:"Signing Tools"}),v.jsxs("div",{className:"signing-buttons",children:[v.jsx("button",{onClick:q=>{q.preventDefault(),W(q)},className:"add-signature-btn",disabled:!a,children:"Add Signature"}),v.jsx("button",{onClick:q=>{q.preventDefault(),K(q)},className:"add-annotation-btn",disabled:!a,children:"Add Annotation"}),v.jsx("button",{onClick:q=>{q.preventDefault(),et(q)},className:"add-initial-btn",disabled:!a,children:"Add Initials"}),v.jsx("button",{onClick:q=>{q.preventDefault(),tt(q)},className:"add-date-btn",disabled:!a,children:"Add Date"})]}),v.jsxs("div",{className:"signature-preview",children:[v.jsx("h4",{children:"Signature Settings"}),v.jsxs("div",{className:"signature-dimensions",children:[v.jsxs("label",{children:["Width:",v.jsx("input",{type:"number",value:b.width,onChange:q=>pt("width",q.target.value),min:"50",max:"300"})]}),v.jsxs("label",{children:["Height:",v.jsx("input",{type:"number",value:b.height,onChange:q=>pt("height",q.target.value),min:"25",max:"100"})]})]})]})]}),v.jsxs("div",{className:"editing-tools",children:[v.jsx("h4",{children:"Editing Options"}),v.jsx("div",{className:"editing-options",children:v.jsxs("div",{className:"tool-option",children:[v.jsx("input",{type:"checkbox",id:"enable-comments",checked:a,onChange:B}),v.jsx("label",{htmlFor:"enable-comments",children:"Enable Signing Tools"})]})})]}),v.jsxs("div",{className:"document-info",children:[v.jsx("h4",{children:"Document Info"}),v.jsxs("ul",{children:[v.jsxs("li",{children:[v.jsx("strong",{children:"Name:"})," ",e?.name||"None selected"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Size:"})," ",(e?.size/1024).toFixed(2)," KB"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Type:"})," ",e?.type||"N/A"]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Signatures:"})," ",c.length]}),v.jsxs("li",{children:[v.jsx("strong",{children:"Annotations:"})," ",d.length]})]})]})]})]}),v.jsx("footer",{className:"standard-footer",children:v.jsxs("div",{className:"footer-content",children:[v.jsx("p",{children:" Snap Sign Pty Ltd"}),v.jsx("p",{children:"ABN 72 679 570 757"}),v.jsxs("div",{className:"footer-links",children:[v.jsx(Yt,{to:"/about",children:"About"}),v.jsx("a",{href:"#privacy",children:"Privacy Policy"}),v.jsx("a",{href:"#terms",children:"Terms of Service"}),v.jsx("a",{href:"#contact",children:"Contact"})]})]})})]})},$D=()=>v.jsxs("div",{className:"about-page",children:[v.jsx("header",{className:"App-header",children:v.jsxs(Yt,{to:"/",style:{textDecoration:"none",color:"white"},children:[v.jsx("h1",{children:"DecoDocs"}),v.jsx("p",{children:v.jsx("strong",{children:"Understand documents before you sign."})})]})}),v.jsx("main",{className:"about-main",children:v.jsxs("div",{className:"about-container",children:[v.jsxs("section",{className:"about-header",children:[v.jsx("h1",{children:"About DecoDocs"}),v.jsx("p",{children:"DecoDocs is a document intelligence product designed to help people understand what they are about to sign. Before any signature, DecoDocs explains documents in plain language, highlights caveats and unfair conditions, flags logical inconsistencies, and provides translations when needed. Our focus is clarity before commitment."})]}),v.jsxs("section",{className:"product-philosophy",children:[v.jsx("h2",{children:"What We Believe"}),v.jsxs("ul",{className:"philosophy-list",children:[v.jsx("li",{children:"Documents should be understood before being signed"}),v.jsx("li",{children:"AI should reduce information asymmetry, not introduce new ones"}),v.jsx("li",{children:"Free users deserve real value, not crippled features"}),v.jsx("li",{children:"We charge only for real costs: deeper analysis and storage"}),v.jsx("li",{children:"Documents belong to users, not platforms"})]})]}),v.jsxs("section",{className:"scope-definition",children:[v.jsx("h2",{children:"What DecoDocs Is  and Is Not"}),v.jsxs("div",{className:"scope-columns",children:[v.jsxs("div",{className:"scope-column",children:[v.jsx("h3",{children:"Is"}),v.jsxs("ul",{children:[v.jsx("li",{children:"Pre-signature document analysis"}),v.jsx("li",{children:"Plain-language explanation"}),v.jsx("li",{children:"Caveat and unfair-condition detection"}),v.jsx("li",{children:"Logical inconsistency checks"}),v.jsx("li",{children:"Ephemeral processing by default"})]})]}),v.jsxs("div",{className:"scope-column",children:[v.jsx("h3",{children:"Is Not"}),v.jsxs("ul",{children:[v.jsx("li",{children:"A document editor"}),v.jsx("li",{children:"A document management system"}),v.jsx("li",{children:'A "sign now, think later" tool'}),v.jsx("li",{children:"A storage-first SaaS"}),v.jsx("li",{children:"A replacement for legal advice"})]})]})]})]}),v.jsxs("section",{className:"decodocs-clarification",children:[v.jsx("h2",{children:"How It Relates To SnapSign"}),v.jsx("p",{children:"Snap Sign Pty Ltd builds DecoDocs. SnapSign is the company brand and broader product family; DecoDocs is the document understanding and analysis product in that family."})]}),v.jsxs("section",{className:"team-company",children:[v.jsx("h2",{children:"Company"}),v.jsx("p",{children:"SnapSign is built by a small, focused team with backgrounds in software engineering, automation, and privacy-first systems. We prioritize correctness, transparency, and long-term maintainability."}),v.jsxs("div",{className:"legal-block",children:[v.jsx("p",{children:"Snap Sign Pty Ltd"}),v.jsx("p",{children:"ABN 72 679 570 757"}),v.jsx("p",{children:"Australia"})]})]}),v.jsxs("section",{className:"collaboration-contact",children:[v.jsx("h2",{children:"Collaboration"}),v.jsx("p",{children:"We welcome serious collaboration and partnership enquiries. For certain discussions, a Non-Disclosure Agreement (NDA) may be required before sharing internal details."}),v.jsx("div",{className:"contact-info",children:v.jsxs("p",{children:["Email: ",v.jsx("a",{href:"mailto:partnerships@snapsign.com.au",children:"partnerships@snapsign.com.au"})]})})]})]})}),v.jsx("footer",{className:"about-footer",children:v.jsxs("div",{className:"footer-content",children:[v.jsx("p",{children:" Snap Sign Pty Ltd"}),v.jsx("p",{children:"ABN 72 679 570 757"}),v.jsxs("div",{className:"footer-links",children:[v.jsx(Yt,{to:"/about",children:"About"}),v.jsx(Yt,{to:"/privacy",children:"Privacy Policy"}),v.jsx(Yt,{to:"/terms",children:"Terms of Service"}),v.jsx(Yt,{to:"/contact",children:"Contact"})]})]})})]}),YD=()=>v.jsx(gu,{onOpenPdf:()=>{},children:v.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[v.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Privacy Policy"}),v.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),v.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[v.jsx("p",{children:'DecoDocs ("we", "us") is built by Snap Sign Pty Ltd. This policy explains what data is processed when you use DecoDocs, what is stored, and what choices you have.'}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"What we process"}),v.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[v.jsx("li",{children:"PDF file metadata (filename, size) and content needed to render and analyze the document."}),v.jsx("li",{children:"Extracted text used to generate summaries, explanations, and risk highlights."}),v.jsx("li",{children:"Basic usage events (e.g. button clicks) to understand product performance."})]}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Storage (Free vs Pro)"}),v.jsxs("p",{children:[v.jsx("strong",{children:"Free:"})," we aim to avoid storing your files. Documents are opened for viewing and analysis without persistent storage."]}),v.jsxs("p",{children:[v.jsx("strong",{children:"Pro (optional):"})," secure storage may be available for users who explicitly choose to save documents for later access."]}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Retention"}),v.jsx("p",{children:"We retain only what is necessary to operate the service. Where storage is enabled (e.g. Pro), retention and deletion controls will be provided."}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your controls"}),v.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[v.jsx("li",{children:"You can choose whether to use free (no-storage) workflows or paid storage features when available."}),v.jsx("li",{children:"You can contact us to request deletion or export of stored data where applicable."})]}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),v.jsxs("p",{children:["Questions or requests: ",v.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]})}),XD=()=>v.jsx(gu,{onOpenPdf:()=>{},children:v.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[v.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Terms of Service"}),v.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),v.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[v.jsx("p",{children:"These terms govern use of DecoDocs provided by Snap Sign Pty Ltd. By using the service, you agree to these terms."}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Not legal advice"}),v.jsx("p",{children:"DecoDocs provides informational analysis and is not legal advice. For legal decisions, consult a qualified professional."}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Acceptable use"}),v.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[v.jsx("li",{children:"Do not upload content you do not have the right to process."}),v.jsx("li",{children:"Do not attempt to abuse, probe, or disrupt the service."}),v.jsx("li",{children:"Do not use the service for illegal activity."})]}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Availability and changes"}),v.jsx("p",{children:"The service may change over time. We may add, modify, or remove features. We may suspend access to protect the service or comply with law."}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Limitation of liability"}),v.jsx("p",{children:"To the maximum extent permitted by law, Snap Sign Pty Ltd is not liable for indirect or consequential losses arising from use of the service."}),v.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),v.jsxs("p",{children:["Questions: ",v.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]})}),WD=()=>{const r="mailto:contact@snapsign.com?subject="+encodeURIComponent("DecoDocs signing waitlist");return v.jsx(gu,{onOpenPdf:()=>{},children:v.jsxs("section",{className:"mx-auto w-full max-w-3xl px-6 py-16",children:[v.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Contact"}),v.jsxs("p",{className:"mt-4 text-slate-700",children:["For support, partnerships, or product feedback, email us at"," ",v.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"}),"."]}),v.jsxs("div",{className:"mt-10 rounded-2xl border border-slate-200 bg-white p-6",children:[v.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Signing waitlist"}),v.jsx("p",{className:"mt-2 text-slate-700",children:"Want the signing workflow? Join the waitlist and tell us your use case."}),v.jsx("a",{className:"mt-4 inline-flex rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",href:r,children:"Join the waitlist"})]})]})})},qc=r=>{try{return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",maximumFractionDigits:0}).format(r)}catch{return`$${r} AUD`}},gf=({items:r})=>v.jsx("ul",{style:{margin:0,paddingLeft:18,color:"#0f172a",lineHeight:1.7},children:r.map(t=>v.jsx("li",{style:{marginBottom:6},children:t},t))});function KD(){const r=ra(),{authState:t}=Tr(),[e,i]=I.useState("monthly"),[a,l]=I.useState(null),c=I.useMemo(()=>e==="annual"?{label:qc(60),suffix:"/year"}:{label:qc(5),suffix:"/month"},[e]),h=async()=>{if(l(null),!t?.user){r("/sign-in?intent=upgrade");return}try{const{getFunctions:b,httpsCallable:w}=await $f(async()=>{const{getFunctions:C,httpsCallable:R}=await Promise.resolve().then(()=>bw);return{getFunctions:C,httpsCallable:R}},void 0),x=b(),E=(await w(x,"stripeCreateCheckoutSession")({billing:e}))?.data?.url;if(!E)throw new Error("No checkout URL returned");window.location.assign(E)}catch(b){l(`Could not start Stripe checkout: ${b?.message||b}`)}},d=()=>r("/sign-in"),f={padding:"2.5rem 1.5rem",maxWidth:1100,margin:"0 auto"},g={border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},y=b=>({padding:"8px 12px",borderRadius:999,border:`1px solid ${b?"#0f172a":"#e2e8f0"}`,background:b?"#0f172a":"#ffffff",color:b?"#ffffff":"#0f172a",fontWeight:700,fontSize:13,cursor:"pointer"});return v.jsxs("div",{style:f,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[v.jsxs("div",{children:[v.jsx("h1",{style:{margin:0},children:"Pricing"}),v.jsx("p",{style:{marginTop:10,marginBottom:0,color:"#334155",lineHeight:1.6},children:"Three user types, one rule: pay only when your usage costs us money."})]}),v.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[v.jsx("button",{type:"button",onClick:()=>i("monthly"),style:y(e==="monthly"),children:"Monthly"}),v.jsx("button",{type:"button",onClick:()=>i("annual"),style:y(e==="annual"),children:"Annual"})]})]}),a&&v.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),v.jsxs("div",{style:{marginTop:22,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14},children:[v.jsxs("div",{style:g,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[v.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Anonymous"}),v.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[qc(0),v.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),v.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Try DecoDocs instantly. Minimal AI budget. No OCR. No storage."}),v.jsx("button",{type:"button",onClick:()=>r("/view"),style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Start now"}),v.jsx("div",{style:{marginTop:14},children:v.jsx(gf,{items:["AI analysis: 20k tokens per uid session","Text-only PDFs (no OCR)","No storage (browser-only)"]})})]}),v.jsxs("div",{style:g,children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[v.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Free"}),v.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[qc(0),v.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),v.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create an account to get a bigger daily budget and manage linked sign-in methods."}),v.jsx("button",{type:"button",onClick:d,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Continue for free"}),v.jsx("div",{style:{marginTop:14},children:v.jsx(gf,{items:["AI analysis: 40k tokens/day per uid","Text-only PDFs (no OCR)","No storage with us (browser-only)","Link multiple providers (Google/Email/Apple/Microsoft)"]})})]}),v.jsxs("div",{style:{...g,borderColor:"#0f172a"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[v.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Pro"}),v.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[c.label,v.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:c.suffix})]})]}),v.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"OCR for scanned PDFs, unlimited analysis (for now), better model, and 5GB storage."}),v.jsx("button",{type:"button",onClick:h,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Upgrade"}),v.jsx("div",{style:{marginTop:14},children:v.jsx(gf,{items:["Unlimited AI (until abuse policy exists)","OCR / vision model for scanned PDFs","5GB storage (Contabo VPS)","Receipts + subscription management in /profile"]})})]})]}),v.jsxs("div",{style:{marginTop:22,display:"flex",gap:12,flexWrap:"wrap"},children:[v.jsx(Yt,{to:"/profile",style:{color:"#0f172a",fontWeight:800},children:"Go to profile"}),v.jsx(Yt,{to:"/terms",style:{color:"#475569",fontWeight:700},children:"Terms"}),v.jsx(Yt,{to:"/privacy",style:{color:"#475569",fontWeight:700},children:"Privacy"})]}),v.jsxs("div",{style:{marginTop:22,padding:16,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Notes"}),v.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Well prompt you to upgrade when you hit limits or when a scanned/OCR-required document is detected. Upgrade redirects to ",v.jsx("code",{children:"/pricing"}),", and account linking is handled via ",v.jsx("code",{children:"/sign-in"}),"."]})]})]})}const QD=()=>{const{search:r}=li();return I.useMemo(()=>new URLSearchParams(r),[r])},W0=({children:r})=>v.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function ZD(){const{authState:r,auth:t}=Tr(),e=ra(),i=QD(),[a,l]=I.useState(""),[c,h]=I.useState(""),[d,f]=I.useState({kind:"idle",message:""}),g=r?.user||null,y=!!g?.isAnonymous,b=i.get("intent"),w=async E=>{f({kind:"loading",message:"Opening sign-in"});try{if(!t)throw new Error("Auth is not available");t.currentUser?await EC(t.currentUser,E):await _C(t,E),f({kind:"ok",message:"Signed in. Your accounts are linked."}),e("/profile")}catch(C){const R=C?.code||"";if(R==="auth/credential-already-in-use"||R==="auth/email-already-in-use"){f({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}f({kind:"error",message:C?.message||"Sign-in failed."})}},x=async E=>{f({kind:"loading",message:"Creating account"});try{if(!t)throw new Error("Auth is not available");if(!t.currentUser)throw new Error("No active session. Refresh and try again.");if(!a||!c)throw new Error("Email and password are required.");const C=_r.credential(a,c);await nC(t.currentUser,C),f({kind:"ok",message:"Email sign-in linked."}),e("/profile")}catch(C){if((C?.code||"")==="auth/email-already-in-use"){f({kind:"error",message:"Email already exists. Use Sign out then sign in with that email, and link providers from /profile."});return}f({kind:"error",message:C?.message||"Email sign-in failed."})}},S=async()=>{t&&(await nw(t),f({kind:"ok",message:"Signed out. Refreshing"}),window.location.reload())},_=b==="upgrade"?"Sign in to upgrade":"Sign in";return v.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[v.jsx("h1",{style:{marginTop:0},children:_}),v.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"We support Google, Email, Apple, and Microsoft. Linking is universal  you can attach multiple providers to one account."}),v.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[v.jsxs(W0,{children:[v.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),v.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[v.jsx("button",{type:"button",onClick:()=>w(new Mi),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Google"}),v.jsx("button",{type:"button",onClick:()=>w(new cr("apple.com")),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Apple"}),v.jsx("button",{type:"button",onClick:()=>w(new cr("microsoft.com")),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Microsoft"})]})]}),v.jsxs(W0,{children:[v.jsx("div",{style:{fontWeight:900},children:"Email + password"}),v.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[v.jsx("input",{value:a,onChange:E=>l(E.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),v.jsx("input",{value:c,onChange:E=>h(E.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),v.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>x(),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer",flex:1},children:"Link Email"}),v.jsx("button",{type:"button",onClick:S,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]}),v.jsx("div",{style:{color:"#64748b",fontSize:13,lineHeight:1.5},children:"This links email/password to your current session (anonymous or not). If the email already exists, sign out and sign in fresh."})]})]})]}),d.kind!=="idle"&&v.jsx("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(d.kind==="error"?"#fecaca":"#bbf7d0"),background:d.kind==="error"?"#fef2f2":"#f0fdf4",color:d.kind==="error"?"#991b1b":"#166534"},children:d.message}),v.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[v.jsx(Yt,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),v.jsx(Yt,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),v.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[v.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),v.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",v.jsx("strong",{children:r?.status}),v.jsx("br",{}),"UID: ",v.jsx("code",{children:g?.uid||"n/a"}),v.jsx("br",{}),"Anonymous: ",v.jsx("strong",{children:String(y)})]})]})]})}function JD(){const{authState:r,auth:t}=Tr(),e=ra(),i=r?.user,[a,l]=I.useState(null),c=async()=>{t&&(await nw(t),window.location.reload())},h=async()=>{l(null);try{const{getFunctions:d,httpsCallable:f}=await $f(async()=>{const{getFunctions:x,httpsCallable:S}=await Promise.resolve().then(()=>bw);return{getFunctions:x,httpsCallable:S}},void 0),g=d(),w=(await f(g,"stripeCreatePortalSession")({}))?.data?.url;if(!w)throw new Error("No portal URL returned");window.location.assign(w)}catch(d){l(`Could not open Stripe portal: ${d?.message||d}`)}};return v.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[v.jsx("h1",{style:{marginTop:0},children:"Profile"}),v.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Manage linked accounts and subscription. Receipts and subscription management use Stripe Customer Portal."}),a&&v.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),v.jsxs("div",{style:{marginTop:16,padding:16,borderRadius:14,border:"1px solid #e2e8f0",background:"#fff"},children:[v.jsx("div",{style:{fontWeight:900},children:"Session"}),v.jsxs("div",{style:{marginTop:10,color:"#0f172a",lineHeight:1.7},children:["Status: ",v.jsx("strong",{children:r?.status}),v.jsx("br",{}),"UID: ",v.jsx("code",{children:i?.uid||"n/a"}),v.jsx("br",{}),"Anonymous: ",v.jsx("strong",{children:String(!!i?.isAnonymous)})]}),v.jsxs("div",{style:{marginTop:12,color:"#475569"},children:["Linked providers: ",i?.providerData?.length?v.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18},children:i.providerData.map(d=>v.jsxs("li",{children:[v.jsx("code",{children:d.providerId}),d.email?`  ${d.email}`:""]},d.providerId))}):v.jsx("span",{children:"none (anonymous)"})]}),v.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap"},children:[v.jsx("button",{type:"button",onClick:()=>e("/sign-in"),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Link accounts"}),v.jsx("button",{type:"button",onClick:h,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Billing & receipts"}),v.jsx("button",{type:"button",onClick:c,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]})]}),v.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[v.jsx(Yt,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Pricing"}),v.jsx(Yt,{to:"/view",style:{color:"#475569",fontWeight:700},children:"Analyze a PDF"})]})]})}class tN extends Ff.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.error("ErrorBoundary caught an error:",t,e),this.setState({error:t,errorInfo:e})}render(){return this.state.hasError?v.jsxs("div",{style:{padding:"2rem",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[v.jsx("h1",{children:"Oops! Something went wrong"}),v.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"We encountered an unexpected error. Please try refreshing the page."}),!1,v.jsx("button",{onClick:()=>window.location.href="/",style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Home"})]}):this.props.children}}const eN=()=>{const{authState:r}=Tr(),[t,e]=Ff.useState(!1);return r.status!=="error"||t?null:v.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"1rem",maxWidth:"400px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontFamily:"sans-serif"},role:"alert",children:v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[v.jsxs("div",{children:[v.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"Authentication Unavailable"}),v.jsxs("div",{style:{margin:0,color:"#856404",fontSize:"0.9rem",lineHeight:1.4},children:[v.jsx("div",{children:"Some features may be limited, but you can still view documents."}),!1]})]}),v.jsx("button",{onClick:()=>e(!0),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#856404",padding:0,marginLeft:"1rem",flexShrink:0},"aria-label":"Dismiss notification",children:""})]})})},nN=()=>{const r=[{title:"Signature placement UI",detail:"Place a signature field on a PDF with drag/drop + resize; support multiple signers."},{title:"Identity & consent",detail:"Signer authentication (email link / SSO) + explicit consent before signing."},{title:"Audit trail",detail:"Record who signed, when, from where, and what version/hash of the document was signed."},{title:"Document integrity (hashing)",detail:"Generate and store a stable doc hash; prevent signing if the PDF changes."},{title:"Signature appearance",detail:"Render a professional signature mark (typed/drawn/uploaded) with timestamp."},{title:"Export signed PDF",detail:"Produce a signed PDF + embedded audit data (or sidecar) with deterministic output."},{title:"Verification view",detail:"A public verification page that checks integrity + shows audit details safely."},{title:"Send-for-signing flow",detail:"Invite signer(s), track status (sent/viewed/signed), reminders, and expiry."},{title:"Storage & retention policy",detail:"Define what is stored for Free vs Pro, retention, deletion, and user controls."},{title:"Legal/terms UX",detail:"Terms, privacy, and not legal advice shown at decision points; versioned change notice."}];return v.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[v.jsx("h1",{style:{marginTop:0},children:"Sign PDFs"}),v.jsxs("p",{style:{marginTop:8,color:"#334155",lineHeight:1.6},children:["Signing is not ready yet. To ship a safe, verifiable signing MVP we need to complete"," ",v.jsxs("strong",{children:[r.length," tasks"]}),"."]}),v.jsxs("div",{style:{marginTop:24,padding:16,border:"1px solid #e2e8f0",borderRadius:12,background:"#ffffff"},children:[v.jsx("h2",{style:{margin:0,fontSize:18},children:"Signing MVP checklist"}),v.jsx("ol",{style:{marginTop:12,marginBottom:0,paddingLeft:18,color:"#0f172a"},children:r.map(t=>v.jsxs("li",{style:{marginBottom:12},children:[v.jsx("div",{style:{fontWeight:600},children:t.title}),v.jsx("div",{style:{color:"#475569",marginTop:4},children:t.detail})]},t.title))})]}),v.jsxs("div",{style:{marginTop:28,display:"flex",gap:12,flexWrap:"wrap"},children:[v.jsx(Yt,{to:"/view",className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",children:"Analyze a PDF"}),v.jsx(Yt,{to:"/contact",className:"rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-slate-700",children:"Join the waitlist"})]})]})};function iN(){return v.jsx(tN,{children:v.jsxs(qR,{children:[v.jsx(eN,{}),v.jsx(W_,{children:v.jsxs(E_,{children:[v.jsx(an,{path:"/",element:v.jsx(Pb,{})}),v.jsx(an,{path:"/app",element:v.jsx(Pb,{})}),v.jsx(an,{path:"/sign",element:v.jsx("div",{className:"App",children:v.jsx(nN,{})})}),v.jsx(an,{path:"/about",element:v.jsx("div",{className:"App",children:v.jsx($D,{})})}),v.jsx(an,{path:"/privacy",element:v.jsx("div",{className:"App",children:v.jsx(YD,{})})}),v.jsx(an,{path:"/terms",element:v.jsx("div",{className:"App",children:v.jsx(XD,{})})}),v.jsx(an,{path:"/contact",element:v.jsx("div",{className:"App",children:v.jsx(WD,{})})}),v.jsx(an,{path:"/pricing",element:v.jsx("div",{className:"App",children:v.jsx(KD,{})})}),v.jsx(an,{path:"/sign-in",element:v.jsx("div",{className:"App",children:v.jsx(ZD,{})})}),v.jsx(an,{path:"/profile",element:v.jsx("div",{className:"App",children:v.jsx(JD,{})})}),v.jsx(an,{path:"/view/:documentId?",element:v.jsx("div",{className:"App",children:v.jsx(X0,{})})}),v.jsx(an,{path:"/view/test-docs/:fileName",element:v.jsx("div",{className:"App",children:v.jsx(X0,{})})}),v.jsx(an,{path:"/edit/:documentId?",element:v.jsx("div",{className:"App",children:v.jsx(qD,{})})})]})})]})})}Rx.createRoot(document.getElementById("root")).render(v.jsx(Ff.StrictMode,{children:v.jsx(iN,{})}));

var Ky=o=>{throw TypeError(o)};var vd=(o,t,e)=>t.has(o)||Ky("Cannot "+e);var ne=(o,t,e)=>(vd(o,t,"read from private field"),e?e.call(o):t.get(o)),Fn=(o,t,e)=>t.has(o)?Ky("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(o):t.set(o,e),Ye=(o,t,e,i)=>(vd(o,t,"write to private field"),i?i.call(o,e):t.set(o,e),e),zn=(o,t,e)=>(vd(o,t,"access private method"),e);var Qy=(o,t,e,i)=>({set _(a){Ye(o,t,a,e)},get _(){return ne(o,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function E0(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ad={exports:{}},no={};var Zy;function XS(){if(Zy)return no;Zy=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:o,type:i,key:c,ref:a!==void 0?a:null,props:l}}return no.Fragment=t,no.jsx=e,no.jsxs=e,no}var Jy;function YS(){return Jy||(Jy=1,Ad.exports=XS()),Ad.exports}var w=YS(),wd={exports:{}},vt={};var tb;function WS(){if(tb)return vt;tb=1;var o=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function E(M,V,W){this.props=M,this.context=V,this.refs=x,this.updater=W||_}E.prototype.isReactComponent={},E.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},E.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function C(){}C.prototype=E.prototype;function R(M,V,W){this.props=M,this.context=V,this.refs=x,this.updater=W||_}var k=R.prototype=new C;k.constructor=R,S(k,E.prototype),k.isPureReactComponent=!0;var O=Array.isArray;function I(){}var B={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function K(M,V,W){var et=W.ref;return{$$typeof:o,type:M,key:V,ref:et!==void 0?et:null,props:W}}function tt(M,V){return K(M.type,V,M.props)}function Z(M){return typeof M=="object"&&M!==null&&M.$$typeof===o}function rt(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(W){return V[W]})}var Q=/\/+/g;function at(M,V){return typeof M=="object"&&M!==null&&M.key!=null?rt(""+M.key):V.toString(36)}function ct(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(I,I):(M.status="pending",M.then(function(V){M.status==="pending"&&(M.status="fulfilled",M.value=V)},function(V){M.status==="pending"&&(M.status="rejected",M.reason=V)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,V,W,et,ft){var gt=typeof M;(gt==="undefined"||gt==="boolean")&&(M=null);var pt=!1;if(M===null)pt=!0;else switch(gt){case"bigint":case"string":case"number":pt=!0;break;case"object":switch(M.$$typeof){case o:case t:pt=!0;break;case m:return pt=M._init,L(pt(M._payload),V,W,et,ft)}}if(pt)return ft=ft(M),pt=et===""?"."+at(M,0):et,O(ft)?(W="",pt!=null&&(W=pt.replace(Q,"$&/")+"/"),L(ft,V,W,"",function(Qn){return Qn})):ft!=null&&(Z(ft)&&(ft=tt(ft,W+(ft.key==null||M&&M.key===ft.key?"":(""+ft.key).replace(Q,"$&/")+"/")+pt)),V.push(ft)),1;pt=0;var Kt=et===""?".":et+":";if(O(M))for(var jt=0;jt<M.length;jt++)et=M[jt],gt=Kt+at(et,jt),pt+=L(et,V,W,gt,ft);else if(jt=A(M),typeof jt=="function")for(M=jt.call(M),jt=0;!(et=M.next()).done;)et=et.value,gt=Kt+at(et,jt++),pt+=L(et,V,W,gt,ft);else if(gt==="object"){if(typeof M.then=="function")return L(ct(M),V,W,et,ft);throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return pt}function H(M,V,W){if(M==null)return M;var et=[],ft=0;return L(M,et,"","",function(gt){return V.call(W,gt,ft++)}),et}function J(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(W){(M._status===0||M._status===-1)&&(M._status=1,M._result=W)},function(W){(M._status===0||M._status===-1)&&(M._status=2,M._result=W)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var St=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},_t={map:H,forEach:function(M,V,W){H(M,function(){V.apply(this,arguments)},W)},count:function(M){var V=0;return H(M,function(){V++}),V},toArray:function(M){return H(M,function(V){return V})||[]},only:function(M){if(!Z(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return vt.Activity=y,vt.Children=_t,vt.Component=E,vt.Fragment=e,vt.Profiler=a,vt.PureComponent=R,vt.StrictMode=i,vt.Suspense=d,vt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,vt.__COMPILER_RUNTIME={__proto__:null,c:function(M){return B.H.useMemoCache(M)}},vt.cache=function(M){return function(){return M.apply(null,arguments)}},vt.cacheSignal=function(){return null},vt.cloneElement=function(M,V,W){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var et=S({},M.props),ft=M.key;if(V!=null)for(gt in V.key!==void 0&&(ft=""+V.key),V)!Y.call(V,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&V.ref===void 0||(et[gt]=V[gt]);var gt=arguments.length-2;if(gt===1)et.children=W;else if(1<gt){for(var pt=Array(gt),Kt=0;Kt<gt;Kt++)pt[Kt]=arguments[Kt+2];et.children=pt}return K(M.type,ft,et)},vt.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},vt.createElement=function(M,V,W){var et,ft={},gt=null;if(V!=null)for(et in V.key!==void 0&&(gt=""+V.key),V)Y.call(V,et)&&et!=="key"&&et!=="__self"&&et!=="__source"&&(ft[et]=V[et]);var pt=arguments.length-2;if(pt===1)ft.children=W;else if(1<pt){for(var Kt=Array(pt),jt=0;jt<pt;jt++)Kt[jt]=arguments[jt+2];ft.children=Kt}if(M&&M.defaultProps)for(et in pt=M.defaultProps,pt)ft[et]===void 0&&(ft[et]=pt[et]);return K(M,gt,ft)},vt.createRef=function(){return{current:null}},vt.forwardRef=function(M){return{$$typeof:h,render:M}},vt.isValidElement=Z,vt.lazy=function(M){return{$$typeof:m,_payload:{_status:-1,_result:M},_init:J}},vt.memo=function(M,V){return{$$typeof:f,type:M,compare:V===void 0?null:V}},vt.startTransition=function(M){var V=B.T,W={};B.T=W;try{var et=M(),ft=B.S;ft!==null&&ft(W,et),typeof et=="object"&&et!==null&&typeof et.then=="function"&&et.then(I,St)}catch(gt){St(gt)}finally{V!==null&&W.types!==null&&(V.types=W.types),B.T=V}},vt.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},vt.use=function(M){return B.H.use(M)},vt.useActionState=function(M,V,W){return B.H.useActionState(M,V,W)},vt.useCallback=function(M,V){return B.H.useCallback(M,V)},vt.useContext=function(M){return B.H.useContext(M)},vt.useDebugValue=function(){},vt.useDeferredValue=function(M,V){return B.H.useDeferredValue(M,V)},vt.useEffect=function(M,V){return B.H.useEffect(M,V)},vt.useEffectEvent=function(M){return B.H.useEffectEvent(M)},vt.useId=function(){return B.H.useId()},vt.useImperativeHandle=function(M,V,W){return B.H.useImperativeHandle(M,V,W)},vt.useInsertionEffect=function(M,V){return B.H.useInsertionEffect(M,V)},vt.useLayoutEffect=function(M,V){return B.H.useLayoutEffect(M,V)},vt.useMemo=function(M,V){return B.H.useMemo(M,V)},vt.useOptimistic=function(M,V){return B.H.useOptimistic(M,V)},vt.useReducer=function(M,V,W){return B.H.useReducer(M,V,W)},vt.useRef=function(M){return B.H.useRef(M)},vt.useState=function(M){return B.H.useState(M)},vt.useSyncExternalStore=function(M,V,W){return B.H.useSyncExternalStore(M,V,W)},vt.useTransition=function(){return B.H.useTransition()},vt.version="19.2.4",vt}var eb;function gf(){return eb||(eb=1,wd.exports=WS()),wd.exports}var j=gf();const yf=E0(j);var Sd={exports:{}},io={},_d={exports:{}},xd={};var nb;function KS(){return nb||(nb=1,(function(o){function t(L,H){var J=L.length;L.push(H);t:for(;0<J;){var St=J-1>>>1,_t=L[St];if(0<a(_t,H))L[St]=H,L[J]=_t,J=St;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var H=L[0],J=L.pop();if(J!==H){L[0]=J;t:for(var St=0,_t=L.length,M=_t>>>1;St<M;){var V=2*(St+1)-1,W=L[V],et=V+1,ft=L[et];if(0>a(W,J))et<_t&&0>a(ft,W)?(L[St]=ft,L[et]=J,St=et):(L[St]=W,L[V]=J,St=V);else if(et<_t&&0>a(ft,J))L[St]=ft,L[et]=J,St=et;else break t}}return H}function a(L,H){var J=L.sortIndex-H.sortIndex;return J!==0?J:L.id-H.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;o.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();o.unstable_now=function(){return c.now()-h}}var d=[],f=[],m=1,y=null,b=3,A=!1,_=!1,S=!1,x=!1,E=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(L){for(var H=e(f);H!==null;){if(H.callback===null)i(f);else if(H.startTime<=L)i(f),H.sortIndex=H.expirationTime,t(d,H);else break;H=e(f)}}function O(L){if(S=!1,k(L),!_)if(e(d)!==null)_=!0,I||(I=!0,rt());else{var H=e(f);H!==null&&ct(O,H.startTime-L)}}var I=!1,B=-1,Y=5,K=-1;function tt(){return x?!0:!(o.unstable_now()-K<Y)}function Z(){if(x=!1,I){var L=o.unstable_now();K=L;var H=!0;try{t:{_=!1,S&&(S=!1,C(B),B=-1),A=!0;var J=b;try{e:{for(k(L),y=e(d);y!==null&&!(y.expirationTime>L&&tt());){var St=y.callback;if(typeof St=="function"){y.callback=null,b=y.priorityLevel;var _t=St(y.expirationTime<=L);if(L=o.unstable_now(),typeof _t=="function"){y.callback=_t,k(L),H=!0;break e}y===e(d)&&i(d),k(L)}else i(d);y=e(d)}if(y!==null)H=!0;else{var M=e(f);M!==null&&ct(O,M.startTime-L),H=!1}}break t}finally{y=null,b=J,A=!1}H=void 0}}finally{H?rt():I=!1}}}var rt;if(typeof R=="function")rt=function(){R(Z)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,at=Q.port2;Q.port1.onmessage=Z,rt=function(){at.postMessage(null)}}else rt=function(){E(Z,0)};function ct(L,H){B=E(function(){L(o.unstable_now())},H)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(L){L.callback=null},o.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<L?Math.floor(1e3/L):5},o.unstable_getCurrentPriorityLevel=function(){return b},o.unstable_next=function(L){switch(b){case 1:case 2:case 3:var H=3;break;default:H=b}var J=b;b=H;try{return L()}finally{b=J}},o.unstable_requestPaint=function(){x=!0},o.unstable_runWithPriority=function(L,H){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var J=b;b=L;try{return H()}finally{b=J}},o.unstable_scheduleCallback=function(L,H,J){var St=o.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?St+J:St):J=St,L){case 1:var _t=-1;break;case 2:_t=250;break;case 5:_t=1073741823;break;case 4:_t=1e4;break;default:_t=5e3}return _t=J+_t,L={id:m++,callback:H,priorityLevel:L,startTime:J,expirationTime:_t,sortIndex:-1},J>St?(L.sortIndex=J,t(f,L),e(d)===null&&L===e(f)&&(S?(C(B),B=-1):S=!0,ct(O,J-St))):(L.sortIndex=_t,t(d,L),_||A||(_=!0,I||(I=!0,rt()))),L},o.unstable_shouldYield=tt,o.unstable_wrapCallback=function(L){var H=b;return function(){var J=b;b=H;try{return L.apply(this,arguments)}finally{b=J}}}})(xd)),xd}var ib;function QS(){return ib||(ib=1,_d.exports=KS()),_d.exports}var Ed={exports:{}},Ie={};var sb;function ZS(){if(sb)return Ie;sb=1;var o=gf();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,m){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:y==null?null:""+y,children:d,containerInfo:f,implementation:m}}var c=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ie.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ie.createPortal=function(d,f){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,m)},Ie.flushSync=function(d){var f=c.T,m=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=m,i.d.f()}},Ie.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},Ie.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},Ie.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var m=f.as,y=h(m,f.crossOrigin),b=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;m==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:A}):m==="script"&&i.d.X(d,{crossOrigin:y,integrity:b,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ie.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var m=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},Ie.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var m=f.as,y=h(m,f.crossOrigin);i.d.L(d,m,{crossOrigin:y,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ie.preloadModule=function(d,f){if(typeof d=="string")if(f){var m=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},Ie.requestFormReset=function(d){i.d.r(d)},Ie.unstable_batchedUpdates=function(d,f){return d(f)},Ie.useFormState=function(d,f,m){return c.H.useFormState(d,f,m)},Ie.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ie.version="19.2.4",Ie}var ab;function JS(){if(ab)return Ed.exports;ab=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Ed.exports=ZS(),Ed.exports}var rb;function t_(){if(rb)return io;rb=1;var o=QS(),t=gf(),e=JS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,r=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(r=s.return),n=s.return;while(n)}return s.tag===3?r:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var r=n,u=s;;){var p=r.return;if(p===null)break;var g=p.alternate;if(g===null){if(u=p.return,u!==null){r=u;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===r)return d(p),n;if(g===u)return d(p),s;g=g.sibling}throw Error(i(188))}if(r.return!==u.return)r=p,u=g;else{for(var v=!1,T=p.child;T;){if(T===r){v=!0,r=p,u=g;break}if(T===u){v=!0,u=p,r=g;break}T=T.sibling}if(!v){for(T=g.child;T;){if(T===r){v=!0,r=g,u=p;break}if(T===u){v=!0,u=g,r=p;break}T=T.sibling}if(!v)throw Error(i(189))}}if(r.alternate!==u)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:s}function m(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=m(n),s!==null)return s;n=n.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),tt=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function rt(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var Q=Symbol.for("react.client.reference");function at(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===Q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case S:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case I:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case R:return n.displayName||"Context";case C:return(n._context.displayName||"Context")+".Consumer";case k:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case B:return s=n.displayName||null,s!==null?s:at(n.type)||"Memo";case Y:s=n._payload,n=n._init;try{return at(n(s))}catch{}}return null}var ct=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},St=[],_t=-1;function M(n){return{current:n}}function V(n){0>_t||(n.current=St[_t],St[_t]=null,_t--)}function W(n,s){_t++,St[_t]=n.current,n.current=s}var et=M(null),ft=M(null),gt=M(null),pt=M(null);function Kt(n,s){switch(W(gt,s),W(ft,n),W(et,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?vy(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=vy(s),n=Ay(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(et),W(et,n)}function jt(){V(et),V(ft),V(gt)}function Qn(n){n.memoizedState!==null&&W(pt,n);var s=et.current,r=Ay(s,n.type);s!==r&&(W(ft,n),W(et,r))}function In(n){ft.current===n&&(V(et),V(ft)),pt.current===n&&(V(pt),Zr._currentValue=J)}var Zn,gs;function Tn(n){if(Zn===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);Zn=s&&s[1]||"",gs=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zn+n+gs}var ar=!1;function rr(n,s){if(!n||ar)return"";ar=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(G){var z=G}Reflect.construct(n,[],X)}else{try{X.call()}catch(G){z=G}n.call(X.prototype)}}else{try{throw Error()}catch(G){z=G}(X=n())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(G){if(G&&z&&typeof G.stack=="string")return[G.stack,z.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),v=g[0],T=g[1];if(v&&T){var D=v.split(`
`),F=T.split(`
`);for(p=u=0;u<D.length&&!D[u].includes("DetermineComponentFrameRoot");)u++;for(;p<F.length&&!F[p].includes("DetermineComponentFrameRoot");)p++;if(u===D.length||p===F.length)for(u=D.length-1,p=F.length-1;1<=u&&0<=p&&D[u]!==F[p];)p--;for(;1<=u&&0<=p;u--,p--)if(D[u]!==F[p]){if(u!==1||p!==1)do if(u--,p--,0>p||D[u]!==F[p]){var q=`
`+D[u].replace(" at new "," at ");return n.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",n.displayName)),q}while(1<=u&&0<=p);break}}}finally{ar=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?Tn(r):""}function su(n,s){switch(n.tag){case 26:case 27:case 5:return Tn(n.type);case 16:return Tn("Lazy");case 13:return n.child!==s&&s!==null?Tn("Suspense Fallback"):Tn("Suspense");case 19:return Tn("SuspenseList");case 0:case 15:return rr(n.type,!1);case 11:return rr(n.type.render,!1);case 1:return rr(n.type,!0);case 31:return Tn("Activity");default:return""}}function $o(n){try{var s="",r=null;do s+=su(n,r),r=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var or=Object.prototype.hasOwnProperty,lr=o.unstable_scheduleCallback,cr=o.unstable_cancelCallback,au=o.unstable_shouldYield,lt=o.unstable_requestPaint,ut=o.unstable_now,$t=o.unstable_getCurrentPriorityLevel,Qt=o.unstable_ImmediatePriority,Zt=o.unstable_UserBlockingPriority,zt=o.unstable_NormalPriority,se=o.unstable_LowPriority,Jn=o.unstable_IdlePriority,Ys=o.log,ru=o.unstable_setDisableYieldValue,ur=null,Je=null;function Oi(n){if(typeof Ys=="function"&&ru(n),Je&&typeof Je.setStrictMode=="function")try{Je.setStrictMode(ur,n)}catch{}}var tn=Math.clz32?Math.clz32:OA,NA=Math.log,kA=Math.LN2;function OA(n){return n>>>=0,n===0?32:31-(NA(n)/kA|0)|0}var Xo=256,Yo=262144,Wo=4194304;function ys(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ko(n,s,r){var u=n.pendingLanes;if(u===0)return 0;var p=0,g=n.suspendedLanes,v=n.pingedLanes;n=n.warmLanes;var T=u&134217727;return T!==0?(u=T&~g,u!==0?p=ys(u):(v&=T,v!==0?p=ys(v):r||(r=T&~n,r!==0&&(p=ys(r))))):(T=u&~g,T!==0?p=ys(T):v!==0?p=ys(v):r||(r=u&~n,r!==0&&(p=ys(r)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,r=s&-s,g>=r||g===32&&(r&4194048)!==0)?s:p}function hr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function LA(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tp(){var n=Wo;return Wo<<=1,(Wo&62914560)===0&&(Wo=4194304),n}function ou(n){for(var s=[],r=0;31>r;r++)s.push(n);return s}function dr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function IA(n,s,r,u,p,g){var v=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var T=n.entanglements,D=n.expirationTimes,F=n.hiddenUpdates;for(r=v&~r;0<r;){var q=31-tn(r),X=1<<q;T[q]=0,D[q]=-1;var z=F[q];if(z!==null)for(F[q]=null,q=0;q<z.length;q++){var G=z[q];G!==null&&(G.lane&=-536870913)}r&=~X}u!==0&&ep(n,u,0),g!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=g&~(v&~s))}function ep(n,s,r){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-tn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|r&261930}function np(n,s){var r=n.entangledLanes|=s;for(n=n.entanglements;r;){var u=31-tn(r),p=1<<u;p&s|n[u]&s&&(n[u]|=s),r&=~p}}function ip(n,s){var r=s&-s;return r=(r&42)!==0?1:lu(r),(r&(n.suspendedLanes|s))!==0?0:r}function lu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function cu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function sp(){var n=H.p;return n!==0?n:(n=window.event,n===void 0?32:Vy(n.type))}function ap(n,s){var r=H.p;try{return H.p=n,s()}finally{H.p=r}}var Li=Math.random().toString(36).slice(2),Re="__reactFiber$"+Li,ze="__reactProps$"+Li,Ws="__reactContainer$"+Li,uu="__reactEvents$"+Li,PA="__reactListeners$"+Li,BA="__reactHandles$"+Li,rp="__reactResources$"+Li,fr="__reactMarker$"+Li;function hu(n){delete n[Re],delete n[ze],delete n[uu],delete n[PA],delete n[BA]}function Ks(n){var s=n[Re];if(s)return s;for(var r=n.parentNode;r;){if(s=r[Ws]||r[Re]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(n=Cy(n);n!==null;){if(r=n[Re])return r;n=Cy(n)}return s}n=r,r=n.parentNode}return null}function Qs(n){if(n=n[Re]||n[Ws]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function pr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Zs(n){var s=n[rp];return s||(s=n[rp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function _e(n){n[fr]=!0}var op=new Set,lp={};function bs(n,s){Js(n,s),Js(n+"Capture",s)}function Js(n,s){for(lp[n]=s,n=0;n<s.length;n++)op.add(s[n])}var jA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cp={},up={};function UA(n){return or.call(up,n)?!0:or.call(cp,n)?!1:jA.test(n)?up[n]=!0:(cp[n]=!0,!1)}function Qo(n,s,r){if(UA(s))if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+r)}}function Zo(n,s,r){if(r===null)n.removeAttribute(s);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+r)}}function ti(n,s,r,u){if(u===null)n.removeAttribute(r);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(s,r,""+u)}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function hp(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function FA(n,s,r){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,g=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(v){r=""+v,g.call(this,v)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return r},setValue:function(v){r=""+v},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function du(n){if(!n._valueTracker){var s=hp(n)?"checked":"value";n._valueTracker=FA(n,s,""+n[s])}}function dp(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var r=s.getValue(),u="";return n&&(u=hp(n)?n.checked?"true":"false":n.value),n=u,n!==r?(s.setValue(n),!0):!1}function Jo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var zA=/[\n"\\]/g;function pn(n){return n.replace(zA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function fu(n,s,r,u,p,g,v,T){n.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?n.type=v:n.removeAttribute("type"),s!=null?v==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+fn(s)):n.value!==""+fn(s)&&(n.value=""+fn(s)):v!=="submit"&&v!=="reset"||n.removeAttribute("value"),s!=null?pu(n,v,fn(s)):r!=null?pu(n,v,fn(r)):u!=null&&n.removeAttribute("value"),p==null&&g!=null&&(n.defaultChecked=!!g),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.name=""+fn(T):n.removeAttribute("name")}function fp(n,s,r,u,p,g,v,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){du(n);return}r=r!=null?""+fn(r):"",s=s!=null?""+fn(s):r,T||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=T?n.checked:!!u,n.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.name=v),du(n)}function pu(n,s,r){s==="number"&&Jo(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function ta(n,s,r,u){if(n=n.options,s){s={};for(var p=0;p<r.length;p++)s["$"+r[p]]=!0;for(r=0;r<n.length;r++)p=s.hasOwnProperty("$"+n[r].value),n[r].selected!==p&&(n[r].selected=p),p&&u&&(n[r].defaultSelected=!0)}else{for(r=""+fn(r),s=null,p=0;p<n.length;p++){if(n[p].value===r){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function pp(n,s,r){if(s!=null&&(s=""+fn(s),s!==n.value&&(n.value=s),r==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=r!=null?""+fn(r):""}function mp(n,s,r,u){if(s==null){if(u!=null){if(r!=null)throw Error(i(92));if(ct(u)){if(1<u.length)throw Error(i(93));u=u[0]}r=u}r==null&&(r=""),s=r}r=fn(s),n.defaultValue=r,u=n.textContent,u===r&&u!==""&&u!==null&&(n.value=u),du(n)}function ea(n,s){if(s){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=s;return}}n.textContent=s}var HA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gp(n,s,r){var u=s.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,r):typeof r!="number"||r===0||HA.has(s)?s==="float"?n.cssFloat=r:n[s]=(""+r).trim():n[s]=r+"px"}function yp(n,s,r){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,r!=null){for(var u in r)!r.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&r[p]!==u&&gp(n,p,u)}else for(var g in s)s.hasOwnProperty(g)&&gp(n,g,s[g])}function mu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),GA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(n){return GA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function ei(){}var gu=null;function yu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var na=null,ia=null;function bp(n){var s=Qs(n);if(s&&(n=s.stateNode)){var r=n[ze]||null;t:switch(n=s.stateNode,s.type){case"input":if(fu(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),s=r.name,r.type==="radio"&&s!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+pn(""+s)+'"][type="radio"]'),s=0;s<r.length;s++){var u=r[s];if(u!==n&&u.form===n.form){var p=u[ze]||null;if(!p)throw Error(i(90));fu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<r.length;s++)u=r[s],u.form===n.form&&dp(u)}break t;case"textarea":pp(n,r.value,r.defaultValue);break t;case"select":s=r.value,s!=null&&ta(n,!!r.multiple,s,!1)}}}var bu=!1;function vp(n,s,r){if(bu)return n(s,r);bu=!0;try{var u=n(s);return u}finally{if(bu=!1,(na!==null||ia!==null)&&(zl(),na&&(s=na,n=ia,ia=na=null,bp(s),n)))for(s=0;s<n.length;s++)bp(n[s])}}function mr(n,s){var r=n.stateNode;if(r===null)return null;var u=r[ze]||null;if(u===null)return null;r=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,s,typeof r));return r}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vu=!1;if(ni)try{var gr={};Object.defineProperty(gr,"passive",{get:function(){vu=!0}}),window.addEventListener("test",gr,gr),window.removeEventListener("test",gr,gr)}catch{vu=!1}var Ii=null,Au=null,el=null;function Ap(){if(el)return el;var n,s=Au,r=s.length,u,p="value"in Ii?Ii.value:Ii.textContent,g=p.length;for(n=0;n<r&&s[n]===p[n];n++);var v=r-n;for(u=1;u<=v&&s[r-u]===p[g-u];u++);return el=p.slice(n,1<u?1-u:void 0)}function nl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function il(){return!0}function wp(){return!1}function He(n){function s(r,u,p,g,v){this._reactName=r,this._targetInst=p,this.type=u,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var T in n)n.hasOwnProperty(T)&&(r=n[T],this[T]=r?r(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?il:wp,this.isPropagationStopped=wp,this}return y(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),s}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sl=He(vs),yr=y({},vs,{view:0,detail:0}),qA=He(yr),wu,Su,br,al=y({},yr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==br&&(br&&n.type==="mousemove"?(wu=n.screenX-br.screenX,Su=n.screenY-br.screenY):Su=wu=0,br=n),wu)},movementY:function(n){return"movementY"in n?n.movementY:Su}}),Sp=He(al),$A=y({},al,{dataTransfer:0}),XA=He($A),YA=y({},yr,{relatedTarget:0}),_u=He(YA),WA=y({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),KA=He(WA),QA=y({},vs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),ZA=He(QA),JA=y({},vs,{data:0}),_p=He(JA),tw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ew={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iw(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=nw[n])?!!s[n]:!1}function xu(){return iw}var sw=y({},yr,{key:function(n){if(n.key){var s=tw[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=nl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ew[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xu,charCode:function(n){return n.type==="keypress"?nl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),aw=He(sw),rw=y({},al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=He(rw),ow=y({},yr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xu}),lw=He(ow),cw=y({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),uw=He(cw),hw=y({},al,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),dw=He(hw),fw=y({},vs,{newState:0,oldState:0}),pw=He(fw),mw=[9,13,27,32],Eu=ni&&"CompositionEvent"in window,vr=null;ni&&"documentMode"in document&&(vr=document.documentMode);var gw=ni&&"TextEvent"in window&&!vr,Ep=ni&&(!Eu||vr&&8<vr&&11>=vr),Tp=" ",Cp=!1;function Rp(n,s){switch(n){case"keyup":return mw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var sa=!1;function yw(n,s){switch(n){case"compositionend":return Dp(s);case"keypress":return s.which!==32?null:(Cp=!0,Tp);case"textInput":return n=s.data,n===Tp&&Cp?null:n;default:return null}}function bw(n,s){if(sa)return n==="compositionend"||!Eu&&Rp(n,s)?(n=Ap(),el=Au=Ii=null,sa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ep&&s.locale!=="ko"?null:s.data;default:return null}}var vw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!vw[n.type]:s==="textarea"}function Np(n,s,r,u){na?ia?ia.push(u):ia=[u]:na=u,s=Yl(s,"onChange"),0<s.length&&(r=new sl("onChange","change",null,r,u),n.push({event:r,listeners:s}))}var Ar=null,wr=null;function Aw(n){fy(n,0)}function rl(n){var s=pr(n);if(dp(s))return n}function kp(n,s){if(n==="change")return s}var Op=!1;if(ni){var Tu;if(ni){var Cu="oninput"in document;if(!Cu){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),Cu=typeof Lp.oninput=="function"}Tu=Cu}else Tu=!1;Op=Tu&&(!document.documentMode||9<document.documentMode)}function Ip(){Ar&&(Ar.detachEvent("onpropertychange",Pp),wr=Ar=null)}function Pp(n){if(n.propertyName==="value"&&rl(wr)){var s=[];Np(s,wr,n,yu(n)),vp(Aw,s)}}function ww(n,s,r){n==="focusin"?(Ip(),Ar=s,wr=r,Ar.attachEvent("onpropertychange",Pp)):n==="focusout"&&Ip()}function Sw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return rl(wr)}function _w(n,s){if(n==="click")return rl(s)}function xw(n,s){if(n==="input"||n==="change")return rl(s)}function Ew(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var en=typeof Object.is=="function"?Object.is:Ew;function Sr(n,s){if(en(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var r=Object.keys(n),u=Object.keys(s);if(r.length!==u.length)return!1;for(u=0;u<r.length;u++){var p=r[u];if(!or.call(s,p)||!en(n[p],s[p]))return!1}return!0}function Bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jp(n,s){var r=Bp(n);n=0;for(var u;r;){if(r.nodeType===3){if(u=n+r.textContent.length,n<=s&&u>=s)return{node:r,offset:s-n};n=u}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Bp(r)}}function Up(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Up(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Fp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Jo(n.document);s instanceof n.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)n=s.contentWindow;else break;s=Jo(n.document)}return s}function Ru(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Tw=ni&&"documentMode"in document&&11>=document.documentMode,aa=null,Du=null,_r=null,Mu=!1;function zp(n,s,r){var u=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Mu||aa==null||aa!==Jo(u)||(u=aa,"selectionStart"in u&&Ru(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),_r&&Sr(_r,u)||(_r=u,u=Yl(Du,"onSelect"),0<u.length&&(s=new sl("onSelect","select",null,s,r),n.push({event:s,listeners:u}),s.target=aa)))}function As(n,s){var r={};return r[n.toLowerCase()]=s.toLowerCase(),r["Webkit"+n]="webkit"+s,r["Moz"+n]="moz"+s,r}var ra={animationend:As("Animation","AnimationEnd"),animationiteration:As("Animation","AnimationIteration"),animationstart:As("Animation","AnimationStart"),transitionrun:As("Transition","TransitionRun"),transitionstart:As("Transition","TransitionStart"),transitioncancel:As("Transition","TransitionCancel"),transitionend:As("Transition","TransitionEnd")},Nu={},Hp={};ni&&(Hp=document.createElement("div").style,"AnimationEvent"in window||(delete ra.animationend.animation,delete ra.animationiteration.animation,delete ra.animationstart.animation),"TransitionEvent"in window||delete ra.transitionend.transition);function ws(n){if(Nu[n])return Nu[n];if(!ra[n])return n;var s=ra[n],r;for(r in s)if(s.hasOwnProperty(r)&&r in Hp)return Nu[n]=s[r];return n}var Vp=ws("animationend"),Gp=ws("animationiteration"),qp=ws("animationstart"),Cw=ws("transitionrun"),Rw=ws("transitionstart"),Dw=ws("transitioncancel"),$p=ws("transitionend"),Xp=new Map,ku="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ku.push("scrollEnd");function Cn(n,s){Xp.set(n,s),bs(s,[n])}var ol=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},mn=[],oa=0,Ou=0;function ll(){for(var n=oa,s=Ou=oa=0;s<n;){var r=mn[s];mn[s++]=null;var u=mn[s];mn[s++]=null;var p=mn[s];mn[s++]=null;var g=mn[s];if(mn[s++]=null,u!==null&&p!==null){var v=u.pending;v===null?p.next=p:(p.next=v.next,v.next=p),u.pending=p}g!==0&&Yp(r,p,g)}}function cl(n,s,r,u){mn[oa++]=n,mn[oa++]=s,mn[oa++]=r,mn[oa++]=u,Ou|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Lu(n,s,r,u){return cl(n,s,r,u),ul(n)}function Ss(n,s){return cl(n,null,null,s),ul(n)}function Yp(n,s,r){n.lanes|=r;var u=n.alternate;u!==null&&(u.lanes|=r);for(var p=!1,g=n.return;g!==null;)g.childLanes|=r,u=g.alternate,u!==null&&(u.childLanes|=r),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(p=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,p&&s!==null&&(p=31-tn(r),n=g.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=r|536870912),g):null}function ul(n){if(50<qr)throw qr=0,Vh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var la={};function Mw(n,s,r,u){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nn(n,s,r,u){return new Mw(n,s,r,u)}function Iu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ii(n,s){var r=n.alternate;return r===null?(r=nn(n.tag,s,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=s,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,s=n.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function Wp(n,s){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,s=r.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function hl(n,s,r,u,p,g){var v=0;if(u=n,typeof n=="function")Iu(n)&&(v=1);else if(typeof n=="string")v=IS(n,r,et.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case K:return n=nn(31,r,s,p),n.elementType=K,n.lanes=g,n;case S:return _s(r.children,p,g,s);case x:v=8,p|=24;break;case E:return n=nn(12,r,s,p|2),n.elementType=E,n.lanes=g,n;case O:return n=nn(13,r,s,p),n.elementType=O,n.lanes=g,n;case I:return n=nn(19,r,s,p),n.elementType=I,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:v=10;break t;case C:v=9;break t;case k:v=11;break t;case B:v=14;break t;case Y:v=16,u=null;break t}v=29,r=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=nn(v,r,s,p),s.elementType=n,s.type=u,s.lanes=g,s}function _s(n,s,r,u){return n=nn(7,n,u,s),n.lanes=r,n}function Pu(n,s,r){return n=nn(6,n,null,s),n.lanes=r,n}function Kp(n){var s=nn(18,null,null,0);return s.stateNode=n,s}function Bu(n,s,r){return s=nn(4,n.children!==null?n.children:[],n.key,s),s.lanes=r,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Qp=new WeakMap;function gn(n,s){if(typeof n=="object"&&n!==null){var r=Qp.get(n);return r!==void 0?r:(s={value:n,source:s,stack:$o(s)},Qp.set(n,s),s)}return{value:n,source:s,stack:$o(s)}}var ca=[],ua=0,dl=null,xr=0,yn=[],bn=0,Pi=null,Pn=1,Bn="";function si(n,s){ca[ua++]=xr,ca[ua++]=dl,dl=n,xr=s}function Zp(n,s,r){yn[bn++]=Pn,yn[bn++]=Bn,yn[bn++]=Pi,Pi=n;var u=Pn;n=Bn;var p=32-tn(u)-1;u&=~(1<<p),r+=1;var g=32-tn(s)+p;if(30<g){var v=p-p%5;g=(u&(1<<v)-1).toString(32),u>>=v,p-=v,Pn=1<<32-tn(s)+p|r<<p|u,Bn=g+n}else Pn=1<<g|r<<p|u,Bn=n}function ju(n){n.return!==null&&(si(n,1),Zp(n,1,0))}function Uu(n){for(;n===dl;)dl=ca[--ua],ca[ua]=null,xr=ca[--ua],ca[ua]=null;for(;n===Pi;)Pi=yn[--bn],yn[bn]=null,Bn=yn[--bn],yn[bn]=null,Pn=yn[--bn],yn[bn]=null}function Jp(n,s){yn[bn++]=Pn,yn[bn++]=Bn,yn[bn++]=Pi,Pn=s.id,Bn=s.overflow,Pi=n}var De=null,Jt=null,Nt=!1,Bi=null,vn=!1,Fu=Error(i(519));function ji(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Er(gn(s,n)),Fu}function tm(n){var s=n.stateNode,r=n.type,u=n.memoizedProps;switch(s[Re]=n,s[ze]=u,r){case"dialog":Ct("cancel",s),Ct("close",s);break;case"iframe":case"object":case"embed":Ct("load",s);break;case"video":case"audio":for(r=0;r<Xr.length;r++)Ct(Xr[r],s);break;case"source":Ct("error",s);break;case"img":case"image":case"link":Ct("error",s),Ct("load",s);break;case"details":Ct("toggle",s);break;case"input":Ct("invalid",s),fp(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ct("invalid",s);break;case"textarea":Ct("invalid",s),mp(s,u.value,u.defaultValue,u.children)}r=u.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||s.textContent===""+r||u.suppressHydrationWarning===!0||yy(s.textContent,r)?(u.popover!=null&&(Ct("beforetoggle",s),Ct("toggle",s)),u.onScroll!=null&&Ct("scroll",s),u.onScrollEnd!=null&&Ct("scrollend",s),u.onClick!=null&&(s.onclick=ei),s=!0):s=!1,s||ji(n,!0)}function em(n){for(De=n.return;De;)switch(De.tag){case 5:case 31:case 13:vn=!1;return;case 27:case 3:vn=!0;return;default:De=De.return}}function ha(n){if(n!==De)return!1;if(!Nt)return em(n),Nt=!0,!1;var s=n.tag,r;if((r=s!==3&&s!==27)&&((r=s===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||sd(n.type,n.memoizedProps)),r=!r),r&&Jt&&ji(n),em(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=Ty(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Jt=Ty(n)}else s===27?(s=Jt,Zi(n.type)?(n=cd,cd=null,Jt=n):Jt=s):Jt=De?wn(n.stateNode.nextSibling):null;return!0}function xs(){Jt=De=null,Nt=!1}function zu(){var n=Bi;return n!==null&&($e===null?$e=n:$e.push.apply($e,n),Bi=null),n}function Er(n){Bi===null?Bi=[n]:Bi.push(n)}var Hu=M(null),Es=null,ai=null;function Ui(n,s,r){W(Hu,s._currentValue),s._currentValue=r}function ri(n){n._currentValue=Hu.current,V(Hu)}function Vu(n,s,r){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===r)break;n=n.return}}function Gu(n,s,r,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var g=p.dependencies;if(g!==null){var v=p.child;g=g.firstContext;t:for(;g!==null;){var T=g;g=p;for(var D=0;D<s.length;D++)if(T.context===s[D]){g.lanes|=r,T=g.alternate,T!==null&&(T.lanes|=r),Vu(g.return,r,n),u||(v=null);break t}g=T.next}}else if(p.tag===18){if(v=p.return,v===null)throw Error(i(341));v.lanes|=r,g=v.alternate,g!==null&&(g.lanes|=r),Vu(v,r,n),v=null}else v=p.child;if(v!==null)v.return=p;else for(v=p;v!==null;){if(v===n){v=null;break}if(p=v.sibling,p!==null){p.return=v.return,v=p;break}v=v.return}p=v}}function da(n,s,r,u){n=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var v=p.alternate;if(v===null)throw Error(i(387));if(v=v.memoizedProps,v!==null){var T=p.type;en(p.pendingProps.value,v.value)||(n!==null?n.push(T):n=[T])}}else if(p===pt.current){if(v=p.alternate,v===null)throw Error(i(387));v.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(Zr):n=[Zr])}p=p.return}n!==null&&Gu(s,n,r,u),s.flags|=262144}function fl(n){for(n=n.firstContext;n!==null;){if(!en(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ts(n){Es=n,ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Me(n){return nm(Es,n)}function pl(n,s){return Es===null&&Ts(n),nm(n,s)}function nm(n,s){var r=s._currentValue;if(s={context:s,memoizedValue:r,next:null},ai===null){if(n===null)throw Error(i(308));ai=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else ai=ai.next=s;return r}var Nw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(r,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(r){return r()})}},kw=o.unstable_scheduleCallback,Ow=o.unstable_NormalPriority,me={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function qu(){return{controller:new Nw,data:new Map,refCount:0}}function Tr(n){n.refCount--,n.refCount===0&&kw(Ow,function(){n.controller.abort()})}var Cr=null,$u=0,fa=0,pa=null;function Lw(n,s){if(Cr===null){var r=Cr=[];$u=0,fa=Wh(),pa={status:"pending",value:void 0,then:function(u){r.push(u)}}}return $u++,s.then(im,im),s}function im(){if(--$u===0&&Cr!==null){pa!==null&&(pa.status="fulfilled");var n=Cr;Cr=null,fa=0,pa=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function Iw(n,s){var r=[],u={status:"pending",value:null,reason:null,then:function(p){r.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<r.length;p++)(0,r[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<r.length;p++)(0,r[p])(void 0)}),u}var sm=L.S;L.S=function(n,s){zg=ut(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&Lw(n,s),sm!==null&&sm(n,s)};var Cs=M(null);function Xu(){var n=Cs.current;return n!==null?n:Xt.pooledCache}function ml(n,s){s===null?W(Cs,Cs.current):W(Cs,s.pool)}function am(){var n=Xu();return n===null?null:{parent:me._currentValue,pool:n}}var ma=Error(i(460)),Yu=Error(i(474)),gl=Error(i(542)),yl={then:function(){}};function rm(n){return n=n.status,n==="fulfilled"||n==="rejected"}function om(n,s,r){switch(r=n[r],r===void 0?n.push(s):r!==s&&(s.then(ei,ei),s=r),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cm(n),n;default:if(typeof s.status=="string")s.then(ei,ei);else{if(n=Xt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,cm(n),n}throw Ds=s,ma}}function Rs(n){try{var s=n._init;return s(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Ds=r,ma):r}}var Ds=null;function lm(){if(Ds===null)throw Error(i(459));var n=Ds;return Ds=null,n}function cm(n){if(n===ma||n===gl)throw Error(i(483))}var ga=null,Rr=0;function bl(n){var s=Rr;return Rr+=1,ga===null&&(ga=[]),om(ga,n,s)}function Dr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function vl(n,s){throw s.$$typeof===b?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function um(n){function s(P,N){if(n){var U=P.deletions;U===null?(P.deletions=[N],P.flags|=16):U.push(N)}}function r(P,N){if(!n)return null;for(;N!==null;)s(P,N),N=N.sibling;return null}function u(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function p(P,N){return P=ii(P,N),P.index=0,P.sibling=null,P}function g(P,N,U){return P.index=U,n?(U=P.alternate,U!==null?(U=U.index,U<N?(P.flags|=67108866,N):U):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function v(P){return n&&P.alternate===null&&(P.flags|=67108866),P}function T(P,N,U,$){return N===null||N.tag!==6?(N=Pu(U,P.mode,$),N.return=P,N):(N=p(N,U),N.return=P,N)}function D(P,N,U,$){var ht=U.type;return ht===S?q(P,N,U.props.children,$,U.key):N!==null&&(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&Rs(ht)===N.type)?(N=p(N,U.props),Dr(N,U),N.return=P,N):(N=hl(U.type,U.key,U.props,null,P.mode,$),Dr(N,U),N.return=P,N)}function F(P,N,U,$){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Bu(U,P.mode,$),N.return=P,N):(N=p(N,U.children||[]),N.return=P,N)}function q(P,N,U,$,ht){return N===null||N.tag!==7?(N=_s(U,P.mode,$,ht),N.return=P,N):(N=p(N,U),N.return=P,N)}function X(P,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Pu(""+N,P.mode,U),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case A:return U=hl(N.type,N.key,N.props,null,P.mode,U),Dr(U,N),U.return=P,U;case _:return N=Bu(N,P.mode,U),N.return=P,N;case Y:return N=Rs(N),X(P,N,U)}if(ct(N)||rt(N))return N=_s(N,P.mode,U,null),N.return=P,N;if(typeof N.then=="function")return X(P,bl(N),U);if(N.$$typeof===R)return X(P,pl(P,N),U);vl(P,N)}return null}function z(P,N,U,$){var ht=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ht!==null?null:T(P,N,""+U,$);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return U.key===ht?D(P,N,U,$):null;case _:return U.key===ht?F(P,N,U,$):null;case Y:return U=Rs(U),z(P,N,U,$)}if(ct(U)||rt(U))return ht!==null?null:q(P,N,U,$,null);if(typeof U.then=="function")return z(P,N,bl(U),$);if(U.$$typeof===R)return z(P,N,pl(P,U),$);vl(P,U)}return null}function G(P,N,U,$,ht){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return P=P.get(U)||null,T(N,P,""+$,ht);if(typeof $=="object"&&$!==null){switch($.$$typeof){case A:return P=P.get($.key===null?U:$.key)||null,D(N,P,$,ht);case _:return P=P.get($.key===null?U:$.key)||null,F(N,P,$,ht);case Y:return $=Rs($),G(P,N,U,$,ht)}if(ct($)||rt($))return P=P.get(U)||null,q(N,P,$,ht,null);if(typeof $.then=="function")return G(P,N,U,bl($),ht);if($.$$typeof===R)return G(P,N,U,pl(N,$),ht);vl(N,$)}return null}function st(P,N,U,$){for(var ht=null,Ot=null,ot=N,Et=N=0,Dt=null;ot!==null&&Et<U.length;Et++){ot.index>Et?(Dt=ot,ot=null):Dt=ot.sibling;var Lt=z(P,ot,U[Et],$);if(Lt===null){ot===null&&(ot=Dt);break}n&&ot&&Lt.alternate===null&&s(P,ot),N=g(Lt,N,Et),Ot===null?ht=Lt:Ot.sibling=Lt,Ot=Lt,ot=Dt}if(Et===U.length)return r(P,ot),Nt&&si(P,Et),ht;if(ot===null){for(;Et<U.length;Et++)ot=X(P,U[Et],$),ot!==null&&(N=g(ot,N,Et),Ot===null?ht=ot:Ot.sibling=ot,Ot=ot);return Nt&&si(P,Et),ht}for(ot=u(ot);Et<U.length;Et++)Dt=G(ot,P,Et,U[Et],$),Dt!==null&&(n&&Dt.alternate!==null&&ot.delete(Dt.key===null?Et:Dt.key),N=g(Dt,N,Et),Ot===null?ht=Dt:Ot.sibling=Dt,Ot=Dt);return n&&ot.forEach(function(is){return s(P,is)}),Nt&&si(P,Et),ht}function mt(P,N,U,$){if(U==null)throw Error(i(151));for(var ht=null,Ot=null,ot=N,Et=N=0,Dt=null,Lt=U.next();ot!==null&&!Lt.done;Et++,Lt=U.next()){ot.index>Et?(Dt=ot,ot=null):Dt=ot.sibling;var is=z(P,ot,Lt.value,$);if(is===null){ot===null&&(ot=Dt);break}n&&ot&&is.alternate===null&&s(P,ot),N=g(is,N,Et),Ot===null?ht=is:Ot.sibling=is,Ot=is,ot=Dt}if(Lt.done)return r(P,ot),Nt&&si(P,Et),ht;if(ot===null){for(;!Lt.done;Et++,Lt=U.next())Lt=X(P,Lt.value,$),Lt!==null&&(N=g(Lt,N,Et),Ot===null?ht=Lt:Ot.sibling=Lt,Ot=Lt);return Nt&&si(P,Et),ht}for(ot=u(ot);!Lt.done;Et++,Lt=U.next())Lt=G(ot,P,Et,Lt.value,$),Lt!==null&&(n&&Lt.alternate!==null&&ot.delete(Lt.key===null?Et:Lt.key),N=g(Lt,N,Et),Ot===null?ht=Lt:Ot.sibling=Lt,Ot=Lt);return n&&ot.forEach(function($S){return s(P,$S)}),Nt&&si(P,Et),ht}function Gt(P,N,U,$){if(typeof U=="object"&&U!==null&&U.type===S&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case A:t:{for(var ht=U.key;N!==null;){if(N.key===ht){if(ht=U.type,ht===S){if(N.tag===7){r(P,N.sibling),$=p(N,U.props.children),$.return=P,P=$;break t}}else if(N.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===Y&&Rs(ht)===N.type){r(P,N.sibling),$=p(N,U.props),Dr($,U),$.return=P,P=$;break t}r(P,N);break}else s(P,N);N=N.sibling}U.type===S?($=_s(U.props.children,P.mode,$,U.key),$.return=P,P=$):($=hl(U.type,U.key,U.props,null,P.mode,$),Dr($,U),$.return=P,P=$)}return v(P);case _:t:{for(ht=U.key;N!==null;){if(N.key===ht)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){r(P,N.sibling),$=p(N,U.children||[]),$.return=P,P=$;break t}else{r(P,N);break}else s(P,N);N=N.sibling}$=Bu(U,P.mode,$),$.return=P,P=$}return v(P);case Y:return U=Rs(U),Gt(P,N,U,$)}if(ct(U))return st(P,N,U,$);if(rt(U)){if(ht=rt(U),typeof ht!="function")throw Error(i(150));return U=ht.call(U),mt(P,N,U,$)}if(typeof U.then=="function")return Gt(P,N,bl(U),$);if(U.$$typeof===R)return Gt(P,N,pl(P,U),$);vl(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(r(P,N.sibling),$=p(N,U),$.return=P,P=$):(r(P,N),$=Pu(U,P.mode,$),$.return=P,P=$),v(P)):r(P,N)}return function(P,N,U,$){try{Rr=0;var ht=Gt(P,N,U,$);return ga=null,ht}catch(ot){if(ot===ma||ot===gl)throw ot;var Ot=nn(29,ot,null,P.mode);return Ot.lanes=$,Ot.return=P,Ot}}}var Ms=um(!0),hm=um(!1),Fi=!1;function Wu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function zi(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Hi(n,s,r){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(It&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=ul(n),Yp(n,null,r),s}return cl(n,u,s,r),ul(n)}function Mr(n,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,np(n,r)}}function Qu(n,s){var r=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,r===u)){var p=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var v={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?p=g=v:g=g.next=v,r=r.next}while(r!==null);g===null?p=g=s:g=g.next=s}else p=g=s;r={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=s:n.next=s,r.lastBaseUpdate=s}var Zu=!1;function Nr(){if(Zu){var n=pa;if(n!==null)throw n}}function kr(n,s,r,u){Zu=!1;var p=n.updateQueue;Fi=!1;var g=p.firstBaseUpdate,v=p.lastBaseUpdate,T=p.shared.pending;if(T!==null){p.shared.pending=null;var D=T,F=D.next;D.next=null,v===null?g=F:v.next=F,v=D;var q=n.alternate;q!==null&&(q=q.updateQueue,T=q.lastBaseUpdate,T!==v&&(T===null?q.firstBaseUpdate=F:T.next=F,q.lastBaseUpdate=D))}if(g!==null){var X=p.baseState;v=0,q=F=D=null,T=g;do{var z=T.lane&-536870913,G=z!==T.lane;if(G?(Rt&z)===z:(u&z)===z){z!==0&&z===fa&&(Zu=!0),q!==null&&(q=q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var st=n,mt=T;z=s;var Gt=r;switch(mt.tag){case 1:if(st=mt.payload,typeof st=="function"){X=st.call(Gt,X,z);break t}X=st;break t;case 3:st.flags=st.flags&-65537|128;case 0:if(st=mt.payload,z=typeof st=="function"?st.call(Gt,X,z):st,z==null)break t;X=y({},X,z);break t;case 2:Fi=!0}}z=T.callback,z!==null&&(n.flags|=64,G&&(n.flags|=8192),G=p.callbacks,G===null?p.callbacks=[z]:G.push(z))}else G={lane:z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},q===null?(F=q=G,D=X):q=q.next=G,v|=z;if(T=T.next,T===null){if(T=p.shared.pending,T===null)break;G=T,T=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);q===null&&(D=X),p.baseState=D,p.firstBaseUpdate=F,p.lastBaseUpdate=q,g===null&&(p.shared.lanes=0),Xi|=v,n.lanes=v,n.memoizedState=X}}function dm(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function fm(n,s){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)dm(r[n],s)}var ya=M(null),Al=M(0);function pm(n,s){n=mi,W(Al,n),W(ya,s),mi=n|s.baseLanes}function Ju(){W(Al,mi),W(ya,ya.current)}function th(){mi=Al.current,V(ya),V(Al)}var sn=M(null),An=null;function Vi(n){var s=n.alternate;W(he,he.current&1),W(sn,n),An===null&&(s===null||ya.current!==null||s.memoizedState!==null)&&(An=n)}function eh(n){W(he,he.current),W(sn,n),An===null&&(An=n)}function mm(n){n.tag===22?(W(he,he.current),W(sn,n),An===null&&(An=n)):Gi()}function Gi(){W(he,he.current),W(sn,sn.current)}function an(n){V(sn),An===n&&(An=null),V(he)}var he=M(0);function wl(n){for(var s=n;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||od(r)||ld(r)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oi=0,xt=null,Ht=null,ge=null,Sl=!1,ba=!1,Ns=!1,_l=0,Or=0,va=null,Pw=0;function ce(){throw Error(i(321))}function nh(n,s){if(s===null)return!1;for(var r=0;r<s.length&&r<n.length;r++)if(!en(n[r],s[r]))return!1;return!0}function ih(n,s,r,u,p,g){return oi=g,xt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,L.H=n===null||n.memoizedState===null?Zm:bh,Ns=!1,g=r(u,p),Ns=!1,ba&&(g=ym(s,r,u,p)),gm(n),g}function gm(n){L.H=Pr;var s=Ht!==null&&Ht.next!==null;if(oi=0,ge=Ht=xt=null,Sl=!1,Or=0,va=null,s)throw Error(i(300));n===null||ye||(n=n.dependencies,n!==null&&fl(n)&&(ye=!0))}function ym(n,s,r,u){xt=n;var p=0;do{if(ba&&(va=null),Or=0,ba=!1,25<=p)throw Error(i(301));if(p+=1,ge=Ht=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Jm,g=s(r,u)}while(ba);return g}function Bw(){var n=L.H,s=n.useState()[0];return s=typeof s.then=="function"?Lr(s):s,n=n.useState()[0],(Ht!==null?Ht.memoizedState:null)!==n&&(xt.flags|=1024),s}function sh(){var n=_l!==0;return _l=0,n}function ah(n,s,r){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~r}function rh(n){if(Sl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Sl=!1}oi=0,ge=Ht=xt=null,ba=!1,Or=_l=0,va=null}function Be(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ge===null?xt.memoizedState=ge=n:ge=ge.next=n,ge}function de(){if(Ht===null){var n=xt.alternate;n=n!==null?n.memoizedState:null}else n=Ht.next;var s=ge===null?xt.memoizedState:ge.next;if(s!==null)ge=s,Ht=n;else{if(n===null)throw xt.alternate===null?Error(i(467)):Error(i(310));Ht=n,n={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},ge===null?xt.memoizedState=ge=n:ge=ge.next=n}return ge}function xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lr(n){var s=Or;return Or+=1,va===null&&(va=[]),n=om(va,n,s),s=xt,(ge===null?s.memoizedState:ge.next)===null&&(s=s.alternate,L.H=s===null||s.memoizedState===null?Zm:bh),n}function El(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Lr(n);if(n.$$typeof===R)return Me(n)}throw Error(i(438,String(n)))}function oh(n){var s=null,r=xt.updateQueue;if(r!==null&&(s=r.memoCache),s==null){var u=xt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),r===null&&(r=xl(),xt.updateQueue=r),r.memoCache=s,r=s.data[s.index],r===void 0)for(r=s.data[s.index]=Array(n),u=0;u<n;u++)r[u]=tt;return s.index++,r}function li(n,s){return typeof s=="function"?s(n):s}function Tl(n){var s=de();return lh(s,Ht,n)}function lh(n,s,r){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var p=n.baseQueue,g=u.pending;if(g!==null){if(p!==null){var v=p.next;p.next=g.next,g.next=v}s.baseQueue=p=g,u.pending=null}if(g=n.baseState,p===null)n.memoizedState=g;else{s=p.next;var T=v=null,D=null,F=s,q=!1;do{var X=F.lane&-536870913;if(X!==F.lane?(Rt&X)===X:(oi&X)===X){var z=F.revertLane;if(z===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),X===fa&&(q=!0);else if((oi&z)===z){F=F.next,z===fa&&(q=!0);continue}else X={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=X,v=g):D=D.next=X,xt.lanes|=z,Xi|=z;X=F.action,Ns&&r(g,X),g=F.hasEagerState?F.eagerState:r(g,X)}else z={lane:X,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},D===null?(T=D=z,v=g):D=D.next=z,xt.lanes|=X,Xi|=X;F=F.next}while(F!==null&&F!==s);if(D===null?v=g:D.next=T,!en(g,n.memoizedState)&&(ye=!0,q&&(r=pa,r!==null)))throw r;n.memoizedState=g,n.baseState=v,n.baseQueue=D,u.lastRenderedState=g}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function ch(n){var s=de(),r=s.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var u=r.dispatch,p=r.pending,g=s.memoizedState;if(p!==null){r.pending=null;var v=p=p.next;do g=n(g,v.action),v=v.next;while(v!==p);en(g,s.memoizedState)||(ye=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),r.lastRenderedState=g}return[g,u]}function bm(n,s,r){var u=xt,p=de(),g=Nt;if(g){if(r===void 0)throw Error(i(407));r=r()}else r=s();var v=!en((Ht||p).memoizedState,r);if(v&&(p.memoizedState=r,ye=!0),p=p.queue,dh(wm.bind(null,u,p,n),[n]),p.getSnapshot!==s||v||ge!==null&&ge.memoizedState.tag&1){if(u.flags|=2048,Aa(9,{destroy:void 0},Am.bind(null,u,p,r,s),null),Xt===null)throw Error(i(349));g||(oi&127)!==0||vm(u,s,r)}return r}function vm(n,s,r){n.flags|=16384,n={getSnapshot:s,value:r},s=xt.updateQueue,s===null?(s=xl(),xt.updateQueue=s,s.stores=[n]):(r=s.stores,r===null?s.stores=[n]:r.push(n))}function Am(n,s,r,u){s.value=r,s.getSnapshot=u,Sm(s)&&_m(n)}function wm(n,s,r){return r(function(){Sm(s)&&_m(n)})}function Sm(n){var s=n.getSnapshot;n=n.value;try{var r=s();return!en(n,r)}catch{return!0}}function _m(n){var s=Ss(n,2);s!==null&&Xe(s,n,2)}function uh(n){var s=Be();if(typeof n=="function"){var r=n;if(n=r(),Ns){Oi(!0);try{r()}finally{Oi(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:n},s}function xm(n,s,r,u){return n.baseState=r,lh(n,Ht,typeof u=="function"?u:li)}function jw(n,s,r,u,p){if(Dl(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){g.listeners.push(v)}};L.T!==null?r(!0):g.isTransition=!1,u(g),r=s.pending,r===null?(g.next=s.pending=g,Em(s,g)):(g.next=r.next,s.pending=r.next=g)}}function Em(n,s){var r=s.action,u=s.payload,p=n.state;if(s.isTransition){var g=L.T,v={};L.T=v;try{var T=r(p,u),D=L.S;D!==null&&D(v,T),Tm(n,s,T)}catch(F){hh(n,s,F)}finally{g!==null&&v.types!==null&&(g.types=v.types),L.T=g}}else try{g=r(p,u),Tm(n,s,g)}catch(F){hh(n,s,F)}}function Tm(n,s,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(u){Cm(n,s,u)},function(u){return hh(n,s,u)}):Cm(n,s,r)}function Cm(n,s,r){s.status="fulfilled",s.value=r,Rm(s),n.state=r,s=n.pending,s!==null&&(r=s.next,r===s?n.pending=null:(r=r.next,s.next=r,Em(n,r)))}function hh(n,s,r){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=r,Rm(s),s=s.next;while(s!==u)}n.action=null}function Rm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Dm(n,s){return s}function Mm(n,s){if(Nt){var r=Xt.formState;if(r!==null){t:{var u=xt;if(Nt){if(Jt){e:{for(var p=Jt,g=vn;p.nodeType!==8;){if(!g){p=null;break e}if(p=wn(p.nextSibling),p===null){p=null;break e}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Jt=wn(p.nextSibling),u=p.data==="F!";break t}}ji(u)}u=!1}u&&(s=r[0])}}return r=Be(),r.memoizedState=r.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Dm,lastRenderedState:s},r.queue=u,r=Wm.bind(null,xt,u),u.dispatch=r,u=uh(!1),g=yh.bind(null,xt,!1,u.queue),u=Be(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,r=jw.bind(null,xt,p,g,r),p.dispatch=r,u.memoizedState=n,[s,r,!1]}function Nm(n){var s=de();return km(s,Ht,n)}function km(n,s,r){if(s=lh(n,s,Dm)[0],n=Tl(li)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Lr(s)}catch(v){throw v===ma?gl:v}else u=s;s=de();var p=s.queue,g=p.dispatch;return r!==s.memoizedState&&(xt.flags|=2048,Aa(9,{destroy:void 0},Uw.bind(null,p,r),null)),[u,g,n]}function Uw(n,s){n.action=s}function Om(n){var s=de(),r=Ht;if(r!==null)return km(s,r,n);de(),s=s.memoizedState,r=de();var u=r.queue.dispatch;return r.memoizedState=n,[s,u,!1]}function Aa(n,s,r,u){return n={tag:n,create:r,deps:u,inst:s,next:null},s=xt.updateQueue,s===null&&(s=xl(),xt.updateQueue=s),r=s.lastEffect,r===null?s.lastEffect=n.next=n:(u=r.next,r.next=n,n.next=u,s.lastEffect=n),n}function Lm(){return de().memoizedState}function Cl(n,s,r,u){var p=Be();xt.flags|=n,p.memoizedState=Aa(1|s,{destroy:void 0},r,u===void 0?null:u)}function Rl(n,s,r,u){var p=de();u=u===void 0?null:u;var g=p.memoizedState.inst;Ht!==null&&u!==null&&nh(u,Ht.memoizedState.deps)?p.memoizedState=Aa(s,g,r,u):(xt.flags|=n,p.memoizedState=Aa(1|s,g,r,u))}function Im(n,s){Cl(8390656,8,n,s)}function dh(n,s){Rl(2048,8,n,s)}function Fw(n){xt.flags|=4;var s=xt.updateQueue;if(s===null)s=xl(),xt.updateQueue=s,s.events=[n];else{var r=s.events;r===null?s.events=[n]:r.push(n)}}function Pm(n){var s=de().memoizedState;return Fw({ref:s,nextImpl:n}),function(){if((It&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Bm(n,s){return Rl(4,2,n,s)}function jm(n,s){return Rl(4,4,n,s)}function Um(n,s){if(typeof s=="function"){n=n();var r=s(n);return function(){typeof r=="function"?r():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Fm(n,s,r){r=r!=null?r.concat([n]):null,Rl(4,4,Um.bind(null,s,n),r)}function fh(){}function zm(n,s){var r=de();s=s===void 0?null:s;var u=r.memoizedState;return s!==null&&nh(s,u[1])?u[0]:(r.memoizedState=[n,s],n)}function Hm(n,s){var r=de();s=s===void 0?null:s;var u=r.memoizedState;if(s!==null&&nh(s,u[1]))return u[0];if(u=n(),Ns){Oi(!0);try{n()}finally{Oi(!1)}}return r.memoizedState=[u,s],u}function ph(n,s,r){return r===void 0||(oi&1073741824)!==0&&(Rt&261930)===0?n.memoizedState=s:(n.memoizedState=r,n=Vg(),xt.lanes|=n,Xi|=n,r)}function Vm(n,s,r,u){return en(r,s)?r:ya.current!==null?(n=ph(n,r,u),en(n,s)||(ye=!0),n):(oi&42)===0||(oi&1073741824)!==0&&(Rt&261930)===0?(ye=!0,n.memoizedState=r):(n=Vg(),xt.lanes|=n,Xi|=n,s)}function Gm(n,s,r,u,p){var g=H.p;H.p=g!==0&&8>g?g:8;var v=L.T,T={};L.T=T,yh(n,!1,s,r);try{var D=p(),F=L.S;if(F!==null&&F(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=Iw(D,u);Ir(n,s,q,ln(n))}else Ir(n,s,u,ln(n))}catch(X){Ir(n,s,{then:function(){},status:"rejected",reason:X},ln())}finally{H.p=g,v!==null&&T.types!==null&&(v.types=T.types),L.T=v}}function zw(){}function mh(n,s,r,u){if(n.tag!==5)throw Error(i(476));var p=qm(n).queue;Gm(n,p,s,J,r===null?zw:function(){return $m(n),r(u)})}function qm(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:J},next:null};var r={};return s.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:r},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function $m(n){var s=qm(n);s.next===null&&(s=n.alternate.memoizedState),Ir(n,s.next.queue,{},ln())}function gh(){return Me(Zr)}function Xm(){return de().memoizedState}function Ym(){return de().memoizedState}function Hw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var r=ln();n=zi(r);var u=Hi(s,n,r);u!==null&&(Xe(u,s,r),Mr(u,s,r)),s={cache:qu()},n.payload=s;return}s=s.return}}function Vw(n,s,r){var u=ln();r={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Dl(n)?Km(s,r):(r=Lu(n,s,r,u),r!==null&&(Xe(r,n,u),Qm(r,s,u)))}function Wm(n,s,r){var u=ln();Ir(n,s,r,u)}function Ir(n,s,r,u){var p={lane:u,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Dl(n))Km(s,p);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var v=s.lastRenderedState,T=g(v,r);if(p.hasEagerState=!0,p.eagerState=T,en(T,v))return cl(n,s,p,0),Xt===null&&ll(),!1}catch{}if(r=Lu(n,s,p,u),r!==null)return Xe(r,n,u),Qm(r,s,u),!0}return!1}function yh(n,s,r,u){if(u={lane:2,revertLane:Wh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Dl(n)){if(s)throw Error(i(479))}else s=Lu(n,r,u,2),s!==null&&Xe(s,n,2)}function Dl(n){var s=n.alternate;return n===xt||s!==null&&s===xt}function Km(n,s){ba=Sl=!0;var r=n.pending;r===null?s.next=s:(s.next=r.next,r.next=s),n.pending=s}function Qm(n,s,r){if((r&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,r|=u,s.lanes=r,np(n,r)}}var Pr={readContext:Me,use:El,useCallback:ce,useContext:ce,useEffect:ce,useImperativeHandle:ce,useLayoutEffect:ce,useInsertionEffect:ce,useMemo:ce,useReducer:ce,useRef:ce,useState:ce,useDebugValue:ce,useDeferredValue:ce,useTransition:ce,useSyncExternalStore:ce,useId:ce,useHostTransitionStatus:ce,useFormState:ce,useActionState:ce,useOptimistic:ce,useMemoCache:ce,useCacheRefresh:ce};Pr.useEffectEvent=ce;var Zm={readContext:Me,use:El,useCallback:function(n,s){return Be().memoizedState=[n,s===void 0?null:s],n},useContext:Me,useEffect:Im,useImperativeHandle:function(n,s,r){r=r!=null?r.concat([n]):null,Cl(4194308,4,Um.bind(null,s,n),r)},useLayoutEffect:function(n,s){return Cl(4194308,4,n,s)},useInsertionEffect:function(n,s){Cl(4,2,n,s)},useMemo:function(n,s){var r=Be();s=s===void 0?null:s;var u=n();if(Ns){Oi(!0);try{n()}finally{Oi(!1)}}return r.memoizedState=[u,s],u},useReducer:function(n,s,r){var u=Be();if(r!==void 0){var p=r(s);if(Ns){Oi(!0);try{r(s)}finally{Oi(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=Vw.bind(null,xt,n),[u.memoizedState,n]},useRef:function(n){var s=Be();return n={current:n},s.memoizedState=n},useState:function(n){n=uh(n);var s=n.queue,r=Wm.bind(null,xt,s);return s.dispatch=r,[n.memoizedState,r]},useDebugValue:fh,useDeferredValue:function(n,s){var r=Be();return ph(r,n,s)},useTransition:function(){var n=uh(!1);return n=Gm.bind(null,xt,n.queue,!0,!1),Be().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,r){var u=xt,p=Be();if(Nt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=s(),Xt===null)throw Error(i(349));(Rt&127)!==0||vm(u,s,r)}p.memoizedState=r;var g={value:r,getSnapshot:s};return p.queue=g,Im(wm.bind(null,u,g,n),[n]),u.flags|=2048,Aa(9,{destroy:void 0},Am.bind(null,u,g,r,s),null),r},useId:function(){var n=Be(),s=Xt.identifierPrefix;if(Nt){var r=Bn,u=Pn;r=(u&~(1<<32-tn(u)-1)).toString(32)+r,s="_"+s+"R_"+r,r=_l++,0<r&&(s+="H"+r.toString(32)),s+="_"}else r=Pw++,s="_"+s+"r_"+r.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:gh,useFormState:Mm,useActionState:Mm,useOptimistic:function(n){var s=Be();s.memoizedState=s.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=r,s=yh.bind(null,xt,!0,r),r.dispatch=s,[n,s]},useMemoCache:oh,useCacheRefresh:function(){return Be().memoizedState=Hw.bind(null,xt)},useEffectEvent:function(n){var s=Be(),r={impl:n};return s.memoizedState=r,function(){if((It&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},bh={readContext:Me,use:El,useCallback:zm,useContext:Me,useEffect:dh,useImperativeHandle:Fm,useInsertionEffect:Bm,useLayoutEffect:jm,useMemo:Hm,useReducer:Tl,useRef:Lm,useState:function(){return Tl(li)},useDebugValue:fh,useDeferredValue:function(n,s){var r=de();return Vm(r,Ht.memoizedState,n,s)},useTransition:function(){var n=Tl(li)[0],s=de().memoizedState;return[typeof n=="boolean"?n:Lr(n),s]},useSyncExternalStore:bm,useId:Xm,useHostTransitionStatus:gh,useFormState:Nm,useActionState:Nm,useOptimistic:function(n,s){var r=de();return xm(r,Ht,n,s)},useMemoCache:oh,useCacheRefresh:Ym};bh.useEffectEvent=Pm;var Jm={readContext:Me,use:El,useCallback:zm,useContext:Me,useEffect:dh,useImperativeHandle:Fm,useInsertionEffect:Bm,useLayoutEffect:jm,useMemo:Hm,useReducer:ch,useRef:Lm,useState:function(){return ch(li)},useDebugValue:fh,useDeferredValue:function(n,s){var r=de();return Ht===null?ph(r,n,s):Vm(r,Ht.memoizedState,n,s)},useTransition:function(){var n=ch(li)[0],s=de().memoizedState;return[typeof n=="boolean"?n:Lr(n),s]},useSyncExternalStore:bm,useId:Xm,useHostTransitionStatus:gh,useFormState:Om,useActionState:Om,useOptimistic:function(n,s){var r=de();return Ht!==null?xm(r,Ht,n,s):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:oh,useCacheRefresh:Ym};Jm.useEffectEvent=Pm;function vh(n,s,r,u){s=n.memoizedState,r=r(u,s),r=r==null?s:y({},s,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Ah={enqueueSetState:function(n,s,r){n=n._reactInternals;var u=ln(),p=zi(u);p.payload=s,r!=null&&(p.callback=r),s=Hi(n,p,u),s!==null&&(Xe(s,n,u),Mr(s,n,u))},enqueueReplaceState:function(n,s,r){n=n._reactInternals;var u=ln(),p=zi(u);p.tag=1,p.payload=s,r!=null&&(p.callback=r),s=Hi(n,p,u),s!==null&&(Xe(s,n,u),Mr(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var r=ln(),u=zi(r);u.tag=2,s!=null&&(u.callback=s),s=Hi(n,u,r),s!==null&&(Xe(s,n,r),Mr(s,n,r))}};function tg(n,s,r,u,p,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,v):s.prototype&&s.prototype.isPureReactComponent?!Sr(r,u)||!Sr(p,g):!0}function eg(n,s,r,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,u),s.state!==n&&Ah.enqueueReplaceState(s,s.state,null)}function ks(n,s){var r=s;if("ref"in s){r={};for(var u in s)u!=="ref"&&(r[u]=s[u])}if(n=n.defaultProps){r===s&&(r=y({},r));for(var p in n)r[p]===void 0&&(r[p]=n[p])}return r}function ng(n){ol(n)}function ig(n){console.error(n)}function sg(n){ol(n)}function Ml(n,s){try{var r=n.onUncaughtError;r(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function ag(n,s,r){try{var u=n.onCaughtError;u(r.value,{componentStack:r.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function wh(n,s,r){return r=zi(r),r.tag=3,r.payload={element:null},r.callback=function(){Ml(n,s)},r}function rg(n){return n=zi(n),n.tag=3,n}function og(n,s,r,u){var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var g=u.value;n.payload=function(){return p(g)},n.callback=function(){ag(s,r,u)}}var v=r.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(n.callback=function(){ag(s,r,u),typeof p!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var T=u.stack;this.componentDidCatch(u.value,{componentStack:T!==null?T:""})})}function Gw(n,s,r,u,p){if(r.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=r.alternate,s!==null&&da(s,r,p,!0),r=sn.current,r!==null){switch(r.tag){case 31:case 13:return An===null?Hl():r.alternate===null&&ue===0&&(ue=3),r.flags&=-257,r.flags|=65536,r.lanes=p,u===yl?r.flags|=16384:(s=r.updateQueue,s===null?r.updateQueue=new Set([u]):s.add(u),$h(n,u,p)),!1;case 22:return r.flags|=65536,u===yl?r.flags|=16384:(s=r.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},r.updateQueue=s):(r=s.retryQueue,r===null?s.retryQueue=new Set([u]):r.add(u)),$h(n,u,p)),!1}throw Error(i(435,r.tag))}return $h(n,u,p),Hl(),!1}if(Nt)return s=sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==Fu&&(n=Error(i(422),{cause:u}),Er(gn(n,r)))):(u!==Fu&&(s=Error(i(423),{cause:u}),Er(gn(s,r))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=gn(u,r),p=wh(n.stateNode,u,p),Qu(n,p),ue!==4&&(ue=2)),!1;var g=Error(i(520),{cause:u});if(g=gn(g,r),Gr===null?Gr=[g]:Gr.push(g),ue!==4&&(ue=2),s===null)return!0;u=gn(u,r),r=s;do{switch(r.tag){case 3:return r.flags|=65536,n=p&-p,r.lanes|=n,n=wh(r.stateNode,u,n),Qu(r,n),!1;case 1:if(s=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Yi===null||!Yi.has(g))))return r.flags|=65536,p&=-p,r.lanes|=p,p=rg(p),og(p,n,r,u),Qu(r,p),!1}r=r.return}while(r!==null);return!1}var Sh=Error(i(461)),ye=!1;function Ne(n,s,r,u){s.child=n===null?hm(s,null,r,u):Ms(s,n.child,r,u)}function lg(n,s,r,u,p){r=r.render;var g=s.ref;if("ref"in u){var v={};for(var T in u)T!=="ref"&&(v[T]=u[T])}else v=u;return Ts(s),u=ih(n,s,r,v,g,p),T=sh(),n!==null&&!ye?(ah(n,s,p),ci(n,s,p)):(Nt&&T&&ju(s),s.flags|=1,Ne(n,s,u,p),s.child)}function cg(n,s,r,u,p){if(n===null){var g=r.type;return typeof g=="function"&&!Iu(g)&&g.defaultProps===void 0&&r.compare===null?(s.tag=15,s.type=g,ug(n,s,g,u,p)):(n=hl(r.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!Mh(n,p)){var v=g.memoizedProps;if(r=r.compare,r=r!==null?r:Sr,r(v,u)&&n.ref===s.ref)return ci(n,s,p)}return s.flags|=1,n=ii(g,u),n.ref=s.ref,n.return=s,s.child=n}function ug(n,s,r,u,p){if(n!==null){var g=n.memoizedProps;if(Sr(g,u)&&n.ref===s.ref)if(ye=!1,s.pendingProps=u=g,Mh(n,p))(n.flags&131072)!==0&&(ye=!0);else return s.lanes=n.lanes,ci(n,s,p)}return _h(n,s,r,u,p)}function hg(n,s,r,u){var p=u.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~g}else u=0,s.child=null;return dg(n,s,g,r,u)}if((r&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&ml(s,g!==null?g.cachePool:null),g!==null?pm(s,g):Ju(),mm(s);else return u=s.lanes=536870912,dg(n,s,g!==null?g.baseLanes|r:r,r,u)}else g!==null?(ml(s,g.cachePool),pm(s,g),Gi(),s.memoizedState=null):(n!==null&&ml(s,null),Ju(),Gi());return Ne(n,s,p,r),s.child}function Br(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function dg(n,s,r,u,p){var g=Xu();return g=g===null?null:{parent:me._currentValue,pool:g},s.memoizedState={baseLanes:r,cachePool:g},n!==null&&ml(s,null),Ju(),mm(s),n!==null&&da(n,s,u,!0),s.childLanes=p,null}function Nl(n,s){return s=Ol({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function fg(n,s,r){return Ms(s,n.child,null,r),n=Nl(s,s.pendingProps),n.flags|=2,an(s),s.memoizedState=null,n}function qw(n,s,r){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Nt){if(u.mode==="hidden")return n=Nl(s,u),s.lanes=536870912,Br(null,n);if(eh(s),(n=Jt)?(n=Ey(n,vn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Pi!==null?{id:Pn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},r=Kp(n),r.return=s,s.child=r,De=s,Jt=null)):n=null,n===null)throw ji(s);return s.lanes=536870912,null}return Nl(s,u)}var g=n.memoizedState;if(g!==null){var v=g.dehydrated;if(eh(s),p)if(s.flags&256)s.flags&=-257,s=fg(n,s,r);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(ye||da(n,s,r,!1),p=(r&n.childLanes)!==0,ye||p){if(u=Xt,u!==null&&(v=ip(u,r),v!==0&&v!==g.retryLane))throw g.retryLane=v,Ss(n,v),Xe(u,n,v),Sh;Hl(),s=fg(n,s,r)}else n=g.treeContext,Jt=wn(v.nextSibling),De=s,Nt=!0,Bi=null,vn=!1,n!==null&&Jp(s,n),s=Nl(s,u),s.flags|=4096;return s}return n=ii(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function kl(n,s){var r=s.ref;if(r===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(s.flags|=4194816)}}function _h(n,s,r,u,p){return Ts(s),r=ih(n,s,r,u,void 0,p),u=sh(),n!==null&&!ye?(ah(n,s,p),ci(n,s,p)):(Nt&&u&&ju(s),s.flags|=1,Ne(n,s,r,p),s.child)}function pg(n,s,r,u,p,g){return Ts(s),s.updateQueue=null,r=ym(s,u,r,p),gm(n),u=sh(),n!==null&&!ye?(ah(n,s,g),ci(n,s,g)):(Nt&&u&&ju(s),s.flags|=1,Ne(n,s,r,g),s.child)}function mg(n,s,r,u,p){if(Ts(s),s.stateNode===null){var g=la,v=r.contextType;typeof v=="object"&&v!==null&&(g=Me(v)),g=new r(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Ah,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Wu(s),v=r.contextType,g.context=typeof v=="object"&&v!==null?Me(v):la,g.state=s.memoizedState,v=r.getDerivedStateFromProps,typeof v=="function"&&(vh(s,r,v,u),g.state=s.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(v=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),v!==g.state&&Ah.enqueueReplaceState(g,g.state,null),kr(s,u,g,p),Nr(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var T=s.memoizedProps,D=ks(r,T);g.props=D;var F=g.context,q=r.contextType;v=la,typeof q=="object"&&q!==null&&(v=Me(q));var X=r.getDerivedStateFromProps;q=typeof X=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=s.pendingProps!==T,q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||F!==v)&&eg(s,g,u,v),Fi=!1;var z=s.memoizedState;g.state=z,kr(s,u,g,p),Nr(),F=s.memoizedState,T||z!==F||Fi?(typeof X=="function"&&(vh(s,r,X,u),F=s.memoizedState),(D=Fi||tg(s,r,D,u,z,F,v))?(q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=F),g.props=u,g.state=F,g.context=v,u=D):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Ku(n,s),v=s.memoizedProps,q=ks(r,v),g.props=q,X=s.pendingProps,z=g.context,F=r.contextType,D=la,typeof F=="object"&&F!==null&&(D=Me(F)),T=r.getDerivedStateFromProps,(F=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(v!==X||z!==D)&&eg(s,g,u,D),Fi=!1,z=s.memoizedState,g.state=z,kr(s,u,g,p),Nr();var G=s.memoizedState;v!==X||z!==G||Fi||n!==null&&n.dependencies!==null&&fl(n.dependencies)?(typeof T=="function"&&(vh(s,r,T,u),G=s.memoizedState),(q=Fi||tg(s,r,q,u,z,G,D)||n!==null&&n.dependencies!==null&&fl(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,G,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,G,D)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),g.props=u,g.state=G,g.context=D,u=q):(typeof g.componentDidUpdate!="function"||v===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||v===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,kl(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,r=u&&typeof r.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=Ms(s,n.child,null,p),s.child=Ms(s,null,r,p)):Ne(n,s,r,p),s.memoizedState=g.state,n=s.child):n=ci(n,s,p),n}function gg(n,s,r,u){return xs(),s.flags|=256,Ne(n,s,r,u),s.child}var xh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Eh(n){return{baseLanes:n,cachePool:am()}}function Th(n,s,r){return n=n!==null?n.childLanes&~r:0,s&&(n|=on),n}function yg(n,s,r){var u=s.pendingProps,p=!1,g=(s.flags&128)!==0,v;if((v=g)||(v=n!==null&&n.memoizedState===null?!1:(he.current&2)!==0),v&&(p=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,n===null){if(Nt){if(p?Vi(s):Gi(),(n=Jt)?(n=Ey(n,vn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:Pi!==null?{id:Pn,overflow:Bn}:null,retryLane:536870912,hydrationErrors:null},r=Kp(n),r.return=s,s.child=r,De=s,Jt=null)):n=null,n===null)throw ji(s);return ld(n)?s.lanes=32:s.lanes=536870912,null}var T=u.children;return u=u.fallback,p?(Gi(),p=s.mode,T=Ol({mode:"hidden",children:T},p),u=_s(u,p,r,null),T.return=s,u.return=s,T.sibling=u,s.child=T,u=s.child,u.memoizedState=Eh(r),u.childLanes=Th(n,v,r),s.memoizedState=xh,Br(null,u)):(Vi(s),Ch(s,T))}var D=n.memoizedState;if(D!==null&&(T=D.dehydrated,T!==null)){if(g)s.flags&256?(Vi(s),s.flags&=-257,s=Rh(n,s,r)):s.memoizedState!==null?(Gi(),s.child=n.child,s.flags|=128,s=null):(Gi(),T=u.fallback,p=s.mode,u=Ol({mode:"visible",children:u.children},p),T=_s(T,p,r,null),T.flags|=2,u.return=s,T.return=s,u.sibling=T,s.child=u,Ms(s,n.child,null,r),u=s.child,u.memoizedState=Eh(r),u.childLanes=Th(n,v,r),s.memoizedState=xh,s=Br(null,u));else if(Vi(s),ld(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var F=v.dgst;v=F,u=Error(i(419)),u.stack="",u.digest=v,Er({value:u,source:null,stack:null}),s=Rh(n,s,r)}else if(ye||da(n,s,r,!1),v=(r&n.childLanes)!==0,ye||v){if(v=Xt,v!==null&&(u=ip(v,r),u!==0&&u!==D.retryLane))throw D.retryLane=u,Ss(n,u),Xe(v,n,u),Sh;od(T)||Hl(),s=Rh(n,s,r)}else od(T)?(s.flags|=192,s.child=n.child,s=null):(n=D.treeContext,Jt=wn(T.nextSibling),De=s,Nt=!0,Bi=null,vn=!1,n!==null&&Jp(s,n),s=Ch(s,u.children),s.flags|=4096);return s}return p?(Gi(),T=u.fallback,p=s.mode,D=n.child,F=D.sibling,u=ii(D,{mode:"hidden",children:u.children}),u.subtreeFlags=D.subtreeFlags&65011712,F!==null?T=ii(F,T):(T=_s(T,p,r,null),T.flags|=2),T.return=s,u.return=s,u.sibling=T,s.child=u,Br(null,u),u=s.child,T=n.child.memoizedState,T===null?T=Eh(r):(p=T.cachePool,p!==null?(D=me._currentValue,p=p.parent!==D?{parent:D,pool:D}:p):p=am(),T={baseLanes:T.baseLanes|r,cachePool:p}),u.memoizedState=T,u.childLanes=Th(n,v,r),s.memoizedState=xh,Br(n.child,u)):(Vi(s),r=n.child,n=r.sibling,r=ii(r,{mode:"visible",children:u.children}),r.return=s,r.sibling=null,n!==null&&(v=s.deletions,v===null?(s.deletions=[n],s.flags|=16):v.push(n)),s.child=r,s.memoizedState=null,r)}function Ch(n,s){return s=Ol({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Ol(n,s){return n=nn(22,n,null,s),n.lanes=0,n}function Rh(n,s,r){return Ms(s,n.child,null,r),n=Ch(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function bg(n,s,r){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Vu(n.return,s,r)}function Dh(n,s,r,u,p,g){var v=n.memoizedState;v===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:r,tailMode:p,treeForkCount:g}:(v.isBackwards=s,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=r,v.tailMode=p,v.treeForkCount=g)}function vg(n,s,r){var u=s.pendingProps,p=u.revealOrder,g=u.tail;u=u.children;var v=he.current,T=(v&2)!==0;if(T?(v=v&1|2,s.flags|=128):v&=1,W(he,v),Ne(n,s,u,r),u=Nt?xr:0,!T&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&bg(n,r,s);else if(n.tag===19)bg(n,r,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(r=s.child,p=null;r!==null;)n=r.alternate,n!==null&&wl(n)===null&&(p=r),r=r.sibling;r=p,r===null?(p=s.child,s.child=null):(p=r.sibling,r.sibling=null),Dh(s,!1,p,r,g,u);break;case"backwards":case"unstable_legacy-backwards":for(r=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&wl(n)===null){s.child=p;break}n=p.sibling,p.sibling=r,r=p,p=n}Dh(s,!0,r,null,g,u);break;case"together":Dh(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function ci(n,s,r){if(n!==null&&(s.dependencies=n.dependencies),Xi|=s.lanes,(r&s.childLanes)===0)if(n!==null){if(da(n,s,r,!1),(r&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,r=ii(n,n.pendingProps),s.child=r,r.return=s;n.sibling!==null;)n=n.sibling,r=r.sibling=ii(n,n.pendingProps),r.return=s;r.sibling=null}return s.child}function Mh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&fl(n)))}function $w(n,s,r){switch(s.tag){case 3:Kt(s,s.stateNode.containerInfo),Ui(s,me,n.memoizedState.cache),xs();break;case 27:case 5:Qn(s);break;case 4:Kt(s,s.stateNode.containerInfo);break;case 10:Ui(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,eh(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Vi(s),s.flags|=128,null):(r&s.child.childLanes)!==0?yg(n,s,r):(Vi(s),n=ci(n,s,r),n!==null?n.sibling:null);Vi(s);break;case 19:var p=(n.flags&128)!==0;if(u=(r&s.childLanes)!==0,u||(da(n,s,r,!1),u=(r&s.childLanes)!==0),p){if(u)return vg(n,s,r);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),W(he,he.current),u)break;return null;case 22:return s.lanes=0,hg(n,s,r,s.pendingProps);case 24:Ui(s,me,n.memoizedState.cache)}return ci(n,s,r)}function Ag(n,s,r){if(n!==null)if(n.memoizedProps!==s.pendingProps)ye=!0;else{if(!Mh(n,r)&&(s.flags&128)===0)return ye=!1,$w(n,s,r);ye=(n.flags&131072)!==0}else ye=!1,Nt&&(s.flags&1048576)!==0&&Zp(s,xr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=Rs(s.elementType),s.type=n,typeof n=="function")Iu(n)?(u=ks(n,u),s.tag=1,s=mg(null,s,n,u,r)):(s.tag=0,s=_h(null,s,n,u,r));else{if(n!=null){var p=n.$$typeof;if(p===k){s.tag=11,s=lg(null,s,n,u,r);break t}else if(p===B){s.tag=14,s=cg(null,s,n,u,r);break t}}throw s=at(n)||n,Error(i(306,s,""))}}return s;case 0:return _h(n,s,s.type,s.pendingProps,r);case 1:return u=s.type,p=ks(u,s.pendingProps),mg(n,s,u,p,r);case 3:t:{if(Kt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;p=g.element,Ku(n,s),kr(s,u,null,r);var v=s.memoizedState;if(u=v.cache,Ui(s,me,u),u!==g.cache&&Gu(s,[me],r,!0),Nr(),u=v.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=gg(n,s,u,r);break t}else if(u!==p){p=gn(Error(i(424)),s),Er(p),s=gg(n,s,u,r);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Jt=wn(n.firstChild),De=s,Nt=!0,Bi=null,vn=!0,r=hm(s,null,u,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xs(),u===p){s=ci(n,s,r);break t}Ne(n,s,u,r)}s=s.child}return s;case 26:return kl(n,s),n===null?(r=Ny(s.type,null,s.pendingProps,null))?s.memoizedState=r:Nt||(r=s.type,n=s.pendingProps,u=Wl(gt.current).createElement(r),u[Re]=s,u[ze]=n,ke(u,r,n),_e(u),s.stateNode=u):s.memoizedState=Ny(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Qn(s),n===null&&Nt&&(u=s.stateNode=Ry(s.type,s.pendingProps,gt.current),De=s,vn=!0,p=Jt,Zi(s.type)?(cd=p,Jt=wn(u.firstChild)):Jt=p),Ne(n,s,s.pendingProps.children,r),kl(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Nt&&((p=u=Jt)&&(u=SS(u,s.type,s.pendingProps,vn),u!==null?(s.stateNode=u,De=s,Jt=wn(u.firstChild),vn=!1,p=!0):p=!1),p||ji(s)),Qn(s),p=s.type,g=s.pendingProps,v=n!==null?n.memoizedProps:null,u=g.children,sd(p,g)?u=null:v!==null&&sd(p,v)&&(s.flags|=32),s.memoizedState!==null&&(p=ih(n,s,Bw,null,null,r),Zr._currentValue=p),kl(n,s),Ne(n,s,u,r),s.child;case 6:return n===null&&Nt&&((n=r=Jt)&&(r=_S(r,s.pendingProps,vn),r!==null?(s.stateNode=r,De=s,Jt=null,n=!0):n=!1),n||ji(s)),null;case 13:return yg(n,s,r);case 4:return Kt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ms(s,null,u,r):Ne(n,s,u,r),s.child;case 11:return lg(n,s,s.type,s.pendingProps,r);case 7:return Ne(n,s,s.pendingProps,r),s.child;case 8:return Ne(n,s,s.pendingProps.children,r),s.child;case 12:return Ne(n,s,s.pendingProps.children,r),s.child;case 10:return u=s.pendingProps,Ui(s,s.type,u.value),Ne(n,s,u.children,r),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,Ts(s),p=Me(p),u=u(p),s.flags|=1,Ne(n,s,u,r),s.child;case 14:return cg(n,s,s.type,s.pendingProps,r);case 15:return ug(n,s,s.type,s.pendingProps,r);case 19:return vg(n,s,r);case 31:return qw(n,s,r);case 22:return hg(n,s,r,s.pendingProps);case 24:return Ts(s),u=Me(me),n===null?(p=Xu(),p===null&&(p=Xt,g=qu(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=r),p=g),s.memoizedState={parent:u,cache:p},Wu(s),Ui(s,me,p)):((n.lanes&r)!==0&&(Ku(n,s),kr(s,null,null,r),Nr()),p=n.memoizedState,g=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Ui(s,me,u)):(u=g.cache,Ui(s,me,u),u!==p.cache&&Gu(s,[me],r,!0))),Ne(n,s,s.pendingProps.children,r),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ui(n){n.flags|=4}function Nh(n,s,r,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(Xg())n.flags|=8192;else throw Ds=yl,Yu}else n.flags&=-16777217}function wg(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Py(s))if(Xg())n.flags|=8192;else throw Ds=yl,Yu}function Ll(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?tp():536870912,n.lanes|=s,xa|=s)}function jr(n,s){if(!Nt)switch(n.tailMode){case"hidden":s=n.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var u=null;r!==null;)r.alternate!==null&&(u=r),r=r.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function te(n){var s=n.alternate!==null&&n.alternate.child===n.child,r=0,u=0;if(s)for(var p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)r|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=r,s}function Xw(n,s,r){var u=s.pendingProps;switch(Uu(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return te(s),null;case 1:return te(s),null;case 3:return r=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ri(me),jt(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(ha(s)?ui(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,zu())),te(s),null;case 26:var p=s.type,g=s.memoizedState;return n===null?(ui(s),g!==null?(te(s),wg(s,g)):(te(s),Nh(s,p,null,u,r))):g?g!==n.memoizedState?(ui(s),te(s),wg(s,g)):(te(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&ui(s),te(s),Nh(s,p,n,u,r)),null;case 27:if(In(s),r=gt.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return te(s),null}n=et.current,ha(s)?tm(s):(n=Ry(p,u,r),s.stateNode=n,ui(s))}return te(s),null;case 5:if(In(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return te(s),null}if(g=et.current,ha(s))tm(s);else{var v=Wl(gt.current);switch(g){case 1:g=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=v.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?v.createElement(p,{is:u.is}):v.createElement(p)}}g[Re]=s,g[ze]=u;t:for(v=s.child;v!==null;){if(v.tag===5||v.tag===6)g.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===s)break t;for(;v.sibling===null;){if(v.return===null||v.return===s)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}s.stateNode=g;t:switch(ke(g,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&ui(s)}}return te(s),Nh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,r),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&ui(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=gt.current,ha(s)){if(n=s.stateNode,r=s.memoizedProps,u=null,p=De,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[Re]=s,n=!!(n.nodeValue===r||u!==null&&u.suppressHydrationWarning===!0||yy(n.nodeValue,r)),n||ji(s,!0)}else n=Wl(n).createTextNode(u),n[Re]=s,s.stateNode=n}return te(s),null;case 31:if(r=s.memoizedState,n===null||n.memoizedState!==null){if(u=ha(s),r!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Re]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;te(s),n=!1}else r=zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return s.flags&256?(an(s),s):(an(s),null);if((s.flags&128)!==0)throw Error(i(558))}return te(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=ha(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Re]=s}else xs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;te(s),p=!1}else p=zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(an(s),s):(an(s),null)}return an(s),(s.flags&128)!==0?(s.lanes=r,s):(r=u!==null,n=n!==null&&n.memoizedState!==null,r&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==p&&(u.flags|=2048)),r!==n&&r&&(s.child.flags|=8192),Ll(s,s.updateQueue),te(s),null);case 4:return jt(),n===null&&Jh(s.stateNode.containerInfo),te(s),null;case 10:return ri(s.type),te(s),null;case 19:if(V(he),u=s.memoizedState,u===null)return te(s),null;if(p=(s.flags&128)!==0,g=u.rendering,g===null)if(p)jr(u,!1);else{if(ue!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=wl(n),g!==null){for(s.flags|=128,jr(u,!1),n=g.updateQueue,s.updateQueue=n,Ll(s,n),s.subtreeFlags=0,n=r,r=s.child;r!==null;)Wp(r,n),r=r.sibling;return W(he,he.current&1|2),Nt&&si(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&ut()>Ul&&(s.flags|=128,p=!0,jr(u,!1),s.lanes=4194304)}else{if(!p)if(n=wl(g),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,Ll(s,n),jr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!Nt)return te(s),null}else 2*ut()-u.renderingStartTime>Ul&&r!==536870912&&(s.flags|=128,p=!0,jr(u,!1),s.lanes=4194304);u.isBackwards?(g.sibling=s.child,s.child=g):(n=u.last,n!==null?n.sibling=g:s.child=g,u.last=g)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=ut(),n.sibling=null,r=he.current,W(he,p?r&1|2:r&1),Nt&&si(s,u.treeForkCount),n):(te(s),null);case 22:case 23:return an(s),th(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(r&536870912)!==0&&(s.flags&128)===0&&(te(s),s.subtreeFlags&6&&(s.flags|=8192)):te(s),r=s.updateQueue,r!==null&&Ll(s,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==r&&(s.flags|=2048),n!==null&&V(Cs),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),s.memoizedState.cache!==r&&(s.flags|=2048),ri(me),te(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Yw(n,s){switch(Uu(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ri(me),jt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return In(s),null;case 31:if(s.memoizedState!==null){if(an(s),s.alternate===null)throw Error(i(340));xs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(an(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));xs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return V(he),null;case 4:return jt(),null;case 10:return ri(s.type),null;case 22:case 23:return an(s),th(),n!==null&&V(Cs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ri(me),null;case 25:return null;default:return null}}function Sg(n,s){switch(Uu(s),s.tag){case 3:ri(me),jt();break;case 26:case 27:case 5:In(s);break;case 4:jt();break;case 31:s.memoizedState!==null&&an(s);break;case 13:an(s);break;case 19:V(he);break;case 10:ri(s.type);break;case 22:case 23:an(s),th(),n!==null&&V(Cs);break;case 24:ri(me)}}function Ur(n,s){try{var r=s.updateQueue,u=r!==null?r.lastEffect:null;if(u!==null){var p=u.next;r=p;do{if((r.tag&n)===n){u=void 0;var g=r.create,v=r.inst;u=g(),v.destroy=u}r=r.next}while(r!==p)}}catch(T){Ft(s,s.return,T)}}function qi(n,s,r){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var g=p.next;u=g;do{if((u.tag&n)===n){var v=u.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,p=s;var D=r,F=T;try{F()}catch(q){Ft(p,D,q)}}}u=u.next}while(u!==g)}}catch(q){Ft(s,s.return,q)}}function _g(n){var s=n.updateQueue;if(s!==null){var r=n.stateNode;try{fm(s,r)}catch(u){Ft(n,n.return,u)}}}function xg(n,s,r){r.props=ks(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(u){Ft(n,s,u)}}function Fr(n,s){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof r=="function"?n.refCleanup=r(u):r.current=u}}catch(p){Ft(n,s,p)}}function jn(n,s){var r=n.ref,u=n.refCleanup;if(r!==null)if(typeof u=="function")try{u()}catch(p){Ft(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(p){Ft(n,s,p)}else r.current=null}function Eg(n){var s=n.type,r=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":r.autoFocus&&u.focus();break t;case"img":r.src?u.src=r.src:r.srcSet&&(u.srcset=r.srcSet)}}catch(p){Ft(n,n.return,p)}}function kh(n,s,r){try{var u=n.stateNode;gS(u,n.type,r,s),u[ze]=s}catch(p){Ft(n,n.return,p)}}function Tg(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Zi(n.type)||n.tag===4}function Oh(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Tg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Zi(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lh(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,s):(s=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,s.appendChild(n),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=ei));else if(u!==4&&(u===27&&Zi(n.type)&&(r=n.stateNode,s=null),n=n.child,n!==null))for(Lh(n,s,r),n=n.sibling;n!==null;)Lh(n,s,r),n=n.sibling}function Il(n,s,r){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?r.insertBefore(n,s):r.appendChild(n);else if(u!==4&&(u===27&&Zi(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Il(n,s,r),n=n.sibling;n!==null;)Il(n,s,r),n=n.sibling}function Cg(n){var s=n.stateNode,r=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);ke(s,u,r),s[Re]=n,s[ze]=r}catch(g){Ft(n,n.return,g)}}var hi=!1,be=!1,Ih=!1,Rg=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Ww(n,s){if(n=n.containerInfo,nd=nc,n=Fp(n),Ru(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else t:{r=(r=n.ownerDocument)&&r.defaultView||window;var u=r.getSelection&&r.getSelection();if(u&&u.rangeCount!==0){r=u.anchorNode;var p=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break t}var v=0,T=-1,D=-1,F=0,q=0,X=n,z=null;e:for(;;){for(var G;X!==r||p!==0&&X.nodeType!==3||(T=v+p),X!==g||u!==0&&X.nodeType!==3||(D=v+u),X.nodeType===3&&(v+=X.nodeValue.length),(G=X.firstChild)!==null;)z=X,X=G;for(;;){if(X===n)break e;if(z===r&&++F===p&&(T=v),z===g&&++q===u&&(D=v),(G=X.nextSibling)!==null)break;X=z,z=X.parentNode}X=G}r=T===-1||D===-1?null:{start:T,end:D}}else r=null}r=r||{start:0,end:0}}else r=null;for(id={focusedElem:n,selectionRange:r},nc=!1,xe=s;xe!==null;)if(s=xe,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,xe=n;else for(;xe!==null;){switch(s=xe,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)p=n[r],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,r=s,p=g.memoizedProps,g=g.memoizedState,u=r.stateNode;try{var st=ks(r.type,p);n=u.getSnapshotBeforeUpdate(st,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(mt){Ft(r,r.return,mt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,r=n.nodeType,r===9)rd(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":rd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,xe=n;break}xe=s.return}}function Dg(n,s,r){var u=r.flags;switch(r.tag){case 0:case 11:case 15:fi(n,r),u&4&&Ur(5,r);break;case 1:if(fi(n,r),u&4)if(n=r.stateNode,s===null)try{n.componentDidMount()}catch(v){Ft(r,r.return,v)}else{var p=ks(r.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(v){Ft(r,r.return,v)}}u&64&&_g(r),u&512&&Fr(r,r.return);break;case 3:if(fi(n,r),u&64&&(n=r.updateQueue,n!==null)){if(s=null,r.child!==null)switch(r.child.tag){case 27:case 5:s=r.child.stateNode;break;case 1:s=r.child.stateNode}try{fm(n,s)}catch(v){Ft(r,r.return,v)}}break;case 27:s===null&&u&4&&Cg(r);case 26:case 5:fi(n,r),s===null&&u&4&&Eg(r),u&512&&Fr(r,r.return);break;case 12:fi(n,r);break;case 31:fi(n,r),u&4&&kg(n,r);break;case 13:fi(n,r),u&4&&Og(n,r),u&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=sS.bind(null,r),xS(n,r))));break;case 22:if(u=r.memoizedState!==null||hi,!u){s=s!==null&&s.memoizedState!==null||be,p=hi;var g=be;hi=u,(be=s)&&!g?pi(n,r,(r.subtreeFlags&8772)!==0):fi(n,r),hi=p,be=g}break;case 30:break;default:fi(n,r)}}function Mg(n){var s=n.alternate;s!==null&&(n.alternate=null,Mg(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&hu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ee=null,Ve=!1;function di(n,s,r){for(r=r.child;r!==null;)Ng(n,s,r),r=r.sibling}function Ng(n,s,r){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(ur,r)}catch{}switch(r.tag){case 26:be||jn(r,s),di(n,s,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:be||jn(r,s);var u=ee,p=Ve;Zi(r.type)&&(ee=r.stateNode,Ve=!1),di(n,s,r),Wr(r.stateNode),ee=u,Ve=p;break;case 5:be||jn(r,s);case 6:if(u=ee,p=Ve,ee=null,di(n,s,r),ee=u,Ve=p,ee!==null)if(Ve)try{(ee.nodeType===9?ee.body:ee.nodeName==="HTML"?ee.ownerDocument.body:ee).removeChild(r.stateNode)}catch(g){Ft(r,s,g)}else try{ee.removeChild(r.stateNode)}catch(g){Ft(r,s,g)}break;case 18:ee!==null&&(Ve?(n=ee,_y(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),ka(n)):_y(ee,r.stateNode));break;case 4:u=ee,p=Ve,ee=r.stateNode.containerInfo,Ve=!0,di(n,s,r),ee=u,Ve=p;break;case 0:case 11:case 14:case 15:qi(2,r,s),be||qi(4,r,s),di(n,s,r);break;case 1:be||(jn(r,s),u=r.stateNode,typeof u.componentWillUnmount=="function"&&xg(r,s,u)),di(n,s,r);break;case 21:di(n,s,r);break;case 22:be=(u=be)||r.memoizedState!==null,di(n,s,r),be=u;break;default:di(n,s,r)}}function kg(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ka(n)}catch(r){Ft(s,s.return,r)}}}function Og(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ka(n)}catch(r){Ft(s,s.return,r)}}function Kw(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new Rg),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new Rg),s;default:throw Error(i(435,n.tag))}}function Pl(n,s){var r=Kw(n);s.forEach(function(u){if(!r.has(u)){r.add(u);var p=aS.bind(null,n,u);u.then(p,p)}})}function Ge(n,s){var r=s.deletions;if(r!==null)for(var u=0;u<r.length;u++){var p=r[u],g=n,v=s,T=v;t:for(;T!==null;){switch(T.tag){case 27:if(Zi(T.type)){ee=T.stateNode,Ve=!1;break t}break;case 5:ee=T.stateNode,Ve=!1;break t;case 3:case 4:ee=T.stateNode.containerInfo,Ve=!0;break t}T=T.return}if(ee===null)throw Error(i(160));Ng(g,v,p),ee=null,Ve=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Lg(s,n),s=s.sibling}var Rn=null;function Lg(n,s){var r=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ge(s,n),qe(n),u&4&&(qi(3,n,n.return),Ur(3,n),qi(5,n,n.return));break;case 1:Ge(s,n),qe(n),u&512&&(be||r===null||jn(r,r.return)),u&64&&hi&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?u:r.concat(u))));break;case 26:var p=Rn;if(Ge(s,n),qe(n),u&512&&(be||r===null||jn(r,r.return)),u&4){var g=r!==null?r.memoizedState:null;if(u=n.memoizedState,r===null)if(u===null)if(n.stateNode===null){t:{u=n.type,r=n.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":g=p.getElementsByTagName("title")[0],(!g||g[fr]||g[Re]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(u),p.head.insertBefore(g,p.querySelector("head > title"))),ke(g,u,r),g[Re]=n,_e(g),u=g;break t;case"link":var v=Ly("link","href",p).get(u+(r.href||""));if(v){for(var T=0;T<v.length;T++)if(g=v[T],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){v.splice(T,1);break e}}g=p.createElement(u),ke(g,u,r),p.head.appendChild(g);break;case"meta":if(v=Ly("meta","content",p).get(u+(r.content||""))){for(T=0;T<v.length;T++)if(g=v[T],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){v.splice(T,1);break e}}g=p.createElement(u),ke(g,u,r),p.head.appendChild(g);break;default:throw Error(i(468,u))}g[Re]=n,_e(g),u=g}n.stateNode=u}else Iy(p,n.type,n.stateNode);else n.stateNode=Oy(p,u,n.memoizedProps);else g!==u?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,u===null?Iy(p,n.type,n.stateNode):Oy(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&kh(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ge(s,n),qe(n),u&512&&(be||r===null||jn(r,r.return)),r!==null&&u&4&&kh(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ge(s,n),qe(n),u&512&&(be||r===null||jn(r,r.return)),n.flags&32){p=n.stateNode;try{ea(p,"")}catch(st){Ft(n,n.return,st)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,kh(n,p,r!==null?r.memoizedProps:p)),u&1024&&(Ih=!0);break;case 6:if(Ge(s,n),qe(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,r=n.stateNode;try{r.nodeValue=u}catch(st){Ft(n,n.return,st)}}break;case 3:if(Zl=null,p=Rn,Rn=Kl(s.containerInfo),Ge(s,n),Rn=p,qe(n),u&4&&r!==null&&r.memoizedState.isDehydrated)try{ka(s.containerInfo)}catch(st){Ft(n,n.return,st)}Ih&&(Ih=!1,Ig(n));break;case 4:u=Rn,Rn=Kl(n.stateNode.containerInfo),Ge(s,n),qe(n),Rn=u;break;case 12:Ge(s,n),qe(n);break;case 31:Ge(s,n),qe(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pl(n,u)));break;case 13:Ge(s,n),qe(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(jl=ut()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pl(n,u)));break;case 22:p=n.memoizedState!==null;var D=r!==null&&r.memoizedState!==null,F=hi,q=be;if(hi=F||p,be=q||D,Ge(s,n),be=q,hi=F,qe(n),u&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(r===null||D||hi||be||Os(n)),r=null,s=n;;){if(s.tag===5||s.tag===26){if(r===null){D=r=s;try{if(g=D.stateNode,p)v=g.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=D.stateNode;var X=D.memoizedProps.style,z=X!=null&&X.hasOwnProperty("display")?X.display:null;T.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(st){Ft(D,D.return,st)}}}else if(s.tag===6){if(r===null){D=s;try{D.stateNode.nodeValue=p?"":D.memoizedProps}catch(st){Ft(D,D.return,st)}}}else if(s.tag===18){if(r===null){D=s;try{var G=D.stateNode;p?xy(G,!0):xy(D.stateNode,!1)}catch(st){Ft(D,D.return,st)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;r===s&&(r=null),s=s.return}r===s&&(r=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(r=u.retryQueue,r!==null&&(u.retryQueue=null,Pl(n,r))));break;case 19:Ge(s,n),qe(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pl(n,u)));break;case 30:break;case 21:break;default:Ge(s,n),qe(n)}}function qe(n){var s=n.flags;if(s&2){try{for(var r,u=n.return;u!==null;){if(Tg(u)){r=u;break}u=u.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var p=r.stateNode,g=Oh(n);Il(n,g,p);break;case 5:var v=r.stateNode;r.flags&32&&(ea(v,""),r.flags&=-33);var T=Oh(n);Il(n,T,v);break;case 3:case 4:var D=r.stateNode.containerInfo,F=Oh(n);Lh(n,F,D);break;default:throw Error(i(161))}}catch(q){Ft(n,n.return,q)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function Ig(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;Ig(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function fi(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Dg(n,s.alternate,s),s=s.sibling}function Os(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:qi(4,s,s.return),Os(s);break;case 1:jn(s,s.return);var r=s.stateNode;typeof r.componentWillUnmount=="function"&&xg(s,s.return,r),Os(s);break;case 27:Wr(s.stateNode);case 26:case 5:jn(s,s.return),Os(s);break;case 22:s.memoizedState===null&&Os(s);break;case 30:Os(s);break;default:Os(s)}n=n.sibling}}function pi(n,s,r){for(r=r&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,g=s,v=g.flags;switch(g.tag){case 0:case 11:case 15:pi(p,g,r),Ur(4,g);break;case 1:if(pi(p,g,r),u=g,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(F){Ft(u,u.return,F)}if(u=g,p=u.updateQueue,p!==null){var T=u.stateNode;try{var D=p.shared.hiddenCallbacks;if(D!==null)for(p.shared.hiddenCallbacks=null,p=0;p<D.length;p++)dm(D[p],T)}catch(F){Ft(u,u.return,F)}}r&&v&64&&_g(g),Fr(g,g.return);break;case 27:Cg(g);case 26:case 5:pi(p,g,r),r&&u===null&&v&4&&Eg(g),Fr(g,g.return);break;case 12:pi(p,g,r);break;case 31:pi(p,g,r),r&&v&4&&kg(p,g);break;case 13:pi(p,g,r),r&&v&4&&Og(p,g);break;case 22:g.memoizedState===null&&pi(p,g,r),Fr(g,g.return);break;case 30:break;default:pi(p,g,r)}s=s.sibling}}function Ph(n,s){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Tr(r))}function Bh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Tr(n))}function Dn(n,s,r,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Pg(n,s,r,u),s=s.sibling}function Pg(n,s,r,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Dn(n,s,r,u),p&2048&&Ur(9,s);break;case 1:Dn(n,s,r,u);break;case 3:Dn(n,s,r,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Tr(n)));break;case 12:if(p&2048){Dn(n,s,r,u),n=s.stateNode;try{var g=s.memoizedProps,v=g.id,T=g.onPostCommit;typeof T=="function"&&T(v,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Ft(s,s.return,D)}}else Dn(n,s,r,u);break;case 31:Dn(n,s,r,u);break;case 13:Dn(n,s,r,u);break;case 23:break;case 22:g=s.stateNode,v=s.alternate,s.memoizedState!==null?g._visibility&2?Dn(n,s,r,u):zr(n,s):g._visibility&2?Dn(n,s,r,u):(g._visibility|=2,wa(n,s,r,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&Ph(v,s);break;case 24:Dn(n,s,r,u),p&2048&&Bh(s.alternate,s);break;default:Dn(n,s,r,u)}}function wa(n,s,r,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,v=s,T=r,D=u,F=v.flags;switch(v.tag){case 0:case 11:case 15:wa(g,v,T,D,p),Ur(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?wa(g,v,T,D,p):zr(g,v):(q._visibility|=2,wa(g,v,T,D,p)),p&&F&2048&&Ph(v.alternate,v);break;case 24:wa(g,v,T,D,p),p&&F&2048&&Bh(v.alternate,v);break;default:wa(g,v,T,D,p)}s=s.sibling}}function zr(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var r=n,u=s,p=u.flags;switch(u.tag){case 22:zr(r,u),p&2048&&Ph(u.alternate,u);break;case 24:zr(r,u),p&2048&&Bh(u.alternate,u);break;default:zr(r,u)}s=s.sibling}}var Hr=8192;function Sa(n,s,r){if(n.subtreeFlags&Hr)for(n=n.child;n!==null;)Bg(n,s,r),n=n.sibling}function Bg(n,s,r){switch(n.tag){case 26:Sa(n,s,r),n.flags&Hr&&n.memoizedState!==null&&PS(r,Rn,n.memoizedState,n.memoizedProps);break;case 5:Sa(n,s,r);break;case 3:case 4:var u=Rn;Rn=Kl(n.stateNode.containerInfo),Sa(n,s,r),Rn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=Hr,Hr=16777216,Sa(n,s,r),Hr=u):Sa(n,s,r));break;default:Sa(n,s,r)}}function jg(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function Vr(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];xe=u,Fg(u,n)}jg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ug(n),n=n.sibling}function Ug(n){switch(n.tag){case 0:case 11:case 15:Vr(n),n.flags&2048&&qi(9,n,n.return);break;case 3:Vr(n);break;case 12:Vr(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Bl(n)):Vr(n);break;default:Vr(n)}}function Bl(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var r=0;r<s.length;r++){var u=s[r];xe=u,Fg(u,n)}jg(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:qi(8,s,s.return),Bl(s);break;case 22:r=s.stateNode,r._visibility&2&&(r._visibility&=-3,Bl(s));break;default:Bl(s)}n=n.sibling}}function Fg(n,s){for(;xe!==null;){var r=xe;switch(r.tag){case 0:case 11:case 15:qi(8,r,s);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var u=r.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Tr(r.memoizedState.cache)}if(u=r.child,u!==null)u.return=r,xe=u;else t:for(r=n;xe!==null;){u=xe;var p=u.sibling,g=u.return;if(Mg(u),u===r){xe=null;break t}if(p!==null){p.return=g,xe=p;break t}xe=g}}}var Qw={getCacheForType:function(n){var s=Me(me),r=s.data.get(n);return r===void 0&&(r=n(),s.data.set(n,r)),r},cacheSignal:function(){return Me(me).controller.signal}},Zw=typeof WeakMap=="function"?WeakMap:Map,It=0,Xt=null,Tt=null,Rt=0,Ut=0,rn=null,$i=!1,_a=!1,jh=!1,mi=0,ue=0,Xi=0,Ls=0,Uh=0,on=0,xa=0,Gr=null,$e=null,Fh=!1,jl=0,zg=0,Ul=1/0,Fl=null,Yi=null,we=0,Wi=null,Ea=null,gi=0,zh=0,Hh=null,Hg=null,qr=0,Vh=null;function ln(){return(It&2)!==0&&Rt!==0?Rt&-Rt:L.T!==null?Wh():sp()}function Vg(){if(on===0)if((Rt&536870912)===0||Nt){var n=Yo;Yo<<=1,(Yo&3932160)===0&&(Yo=262144),on=n}else on=536870912;return n=sn.current,n!==null&&(n.flags|=32),on}function Xe(n,s,r){(n===Xt&&(Ut===2||Ut===9)||n.cancelPendingCommit!==null)&&(Ta(n,0),Ki(n,Rt,on,!1)),dr(n,r),((It&2)===0||n!==Xt)&&(n===Xt&&((It&2)===0&&(Ls|=r),ue===4&&Ki(n,Rt,on,!1)),Un(n))}function Gg(n,s,r){if((It&6)!==0)throw Error(i(327));var u=!r&&(s&127)===0&&(s&n.expiredLanes)===0||hr(n,s),p=u?eS(n,s):qh(n,s,!0),g=u;do{if(p===0){_a&&!u&&Ki(n,s,0,!1);break}else{if(r=n.current.alternate,g&&!Jw(r)){p=qh(n,s,!1),g=!1;continue}if(p===2){if(g=s,n.errorRecoveryDisabledLanes&g)var v=0;else v=n.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;t:{var T=n;p=Gr;var D=T.current.memoizedState.isDehydrated;if(D&&(Ta(T,v).flags|=256),v=qh(T,v,!1),v!==2){if(jh&&!D){T.errorRecoveryDisabledLanes|=g,Ls|=g,p=4;break t}g=$e,$e=p,g!==null&&($e===null?$e=g:$e.push.apply($e,g))}p=v}if(g=!1,p!==2)continue}}if(p===1){Ta(n,0),Ki(n,s,0,!0);break}t:{switch(u=n,g=p,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Ki(u,s,on,!$i);break t;case 2:$e=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=jl+300-ut(),10<p)){if(Ki(u,s,on,!$i),Ko(u,0,!0)!==0)break t;gi=s,u.timeoutHandle=wy(qg.bind(null,u,r,$e,Fl,Fh,s,on,Ls,xa,$i,g,"Throttled",-0,0),p);break t}qg(u,r,$e,Fl,Fh,s,on,Ls,xa,$i,g,null,-0,0)}}break}while(!0);Un(n)}function qg(n,s,r,u,p,g,v,T,D,F,q,X,z,G){if(n.timeoutHandle=-1,X=s.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ei},Bg(s,g,X);var st=(g&62914560)===g?jl-ut():(g&4194048)===g?zg-ut():0;if(st=BS(X,st),st!==null){gi=g,n.cancelPendingCommit=st(Jg.bind(null,n,s,g,r,u,p,v,T,D,q,X,null,z,G)),Ki(n,g,v,!F);return}}Jg(n,s,g,r,u,p,v,T,D)}function Jw(n){for(var s=n;;){var r=s.tag;if((r===0||r===11||r===15)&&s.flags&16384&&(r=s.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var u=0;u<r.length;u++){var p=r[u],g=p.getSnapshot;p=p.value;try{if(!en(g(),p))return!1}catch{return!1}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ki(n,s,r,u){s&=~Uh,s&=~Ls,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var g=31-tn(p),v=1<<g;u[g]=-1,p&=~v}r!==0&&ep(n,r,s)}function zl(){return(It&6)===0?($r(0),!1):!0}function Gh(){if(Tt!==null){if(Ut===0)var n=Tt.return;else n=Tt,ai=Es=null,rh(n),ga=null,Rr=0,n=Tt;for(;n!==null;)Sg(n.alternate,n),n=n.return;Tt=null}}function Ta(n,s){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,vS(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),gi=0,Gh(),Xt=n,Tt=r=ii(n.current,null),Rt=s,Ut=0,rn=null,$i=!1,_a=hr(n,s),jh=!1,xa=on=Uh=Ls=Xi=ue=0,$e=Gr=null,Fh=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-tn(u),g=1<<p;s|=n[p],u&=~g}return mi=s,ll(),r}function $g(n,s){xt=null,L.H=Pr,s===ma||s===gl?(s=lm(),Ut=3):s===Yu?(s=lm(),Ut=4):Ut=s===Sh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,rn=s,Tt===null&&(ue=1,Ml(n,gn(s,n.current)))}function Xg(){var n=sn.current;return n===null?!0:(Rt&4194048)===Rt?An===null:(Rt&62914560)===Rt||(Rt&536870912)!==0?n===An:!1}function Yg(){var n=L.H;return L.H=Pr,n===null?Pr:n}function Wg(){var n=L.A;return L.A=Qw,n}function Hl(){ue=4,$i||(Rt&4194048)!==Rt&&sn.current!==null||(_a=!0),(Xi&134217727)===0&&(Ls&134217727)===0||Xt===null||Ki(Xt,Rt,on,!1)}function qh(n,s,r){var u=It;It|=2;var p=Yg(),g=Wg();(Xt!==n||Rt!==s)&&(Fl=null,Ta(n,s)),s=!1;var v=ue;t:do try{if(Ut!==0&&Tt!==null){var T=Tt,D=rn;switch(Ut){case 8:Gh(),v=6;break t;case 3:case 2:case 9:case 6:sn.current===null&&(s=!0);var F=Ut;if(Ut=0,rn=null,Ca(n,T,D,F),r&&_a){v=0;break t}break;default:F=Ut,Ut=0,rn=null,Ca(n,T,D,F)}}tS(),v=ue;break}catch(q){$g(n,q)}while(!0);return s&&n.shellSuspendCounter++,ai=Es=null,It=u,L.H=p,L.A=g,Tt===null&&(Xt=null,Rt=0,ll()),v}function tS(){for(;Tt!==null;)Kg(Tt)}function eS(n,s){var r=It;It|=2;var u=Yg(),p=Wg();Xt!==n||Rt!==s?(Fl=null,Ul=ut()+500,Ta(n,s)):_a=hr(n,s);t:do try{if(Ut!==0&&Tt!==null){s=Tt;var g=rn;e:switch(Ut){case 1:Ut=0,rn=null,Ca(n,s,g,1);break;case 2:case 9:if(rm(g)){Ut=0,rn=null,Qg(s);break}s=function(){Ut!==2&&Ut!==9||Xt!==n||(Ut=7),Un(n)},g.then(s,s);break t;case 3:Ut=7;break t;case 4:Ut=5;break t;case 7:rm(g)?(Ut=0,rn=null,Qg(s)):(Ut=0,rn=null,Ca(n,s,g,7));break;case 5:var v=null;switch(Tt.tag){case 26:v=Tt.memoizedState;case 5:case 27:var T=Tt;if(v?Py(v):T.stateNode.complete){Ut=0,rn=null;var D=T.sibling;if(D!==null)Tt=D;else{var F=T.return;F!==null?(Tt=F,Vl(F)):Tt=null}break e}}Ut=0,rn=null,Ca(n,s,g,5);break;case 6:Ut=0,rn=null,Ca(n,s,g,6);break;case 8:Gh(),ue=6;break t;default:throw Error(i(462))}}nS();break}catch(q){$g(n,q)}while(!0);return ai=Es=null,L.H=u,L.A=p,It=r,Tt!==null?0:(Xt=null,Rt=0,ll(),ue)}function nS(){for(;Tt!==null&&!au();)Kg(Tt)}function Kg(n){var s=Ag(n.alternate,n,mi);n.memoizedProps=n.pendingProps,s===null?Vl(n):Tt=s}function Qg(n){var s=n,r=s.alternate;switch(s.tag){case 15:case 0:s=pg(r,s,s.pendingProps,s.type,void 0,Rt);break;case 11:s=pg(r,s,s.pendingProps,s.type.render,s.ref,Rt);break;case 5:rh(s);default:Sg(r,s),s=Tt=Wp(s,mi),s=Ag(r,s,mi)}n.memoizedProps=n.pendingProps,s===null?Vl(n):Tt=s}function Ca(n,s,r,u){ai=Es=null,rh(s),ga=null,Rr=0;var p=s.return;try{if(Gw(n,p,s,r,Rt)){ue=1,Ml(n,gn(r,n.current)),Tt=null;return}}catch(g){if(p!==null)throw Tt=p,g;ue=1,Ml(n,gn(r,n.current)),Tt=null;return}s.flags&32768?(Nt||u===1?n=!0:_a||(Rt&536870912)!==0?n=!1:($i=n=!0,(u===2||u===9||u===3||u===6)&&(u=sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Zg(s,n)):Vl(s)}function Vl(n){var s=n;do{if((s.flags&32768)!==0){Zg(s,$i);return}n=s.return;var r=Xw(s.alternate,s,mi);if(r!==null){Tt=r;return}if(s=s.sibling,s!==null){Tt=s;return}Tt=s=n}while(s!==null);ue===0&&(ue=5)}function Zg(n,s){do{var r=Yw(n.alternate,n);if(r!==null){r.flags&=32767,Tt=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!s&&(n=n.sibling,n!==null)){Tt=n;return}Tt=n=r}while(n!==null);ue=6,Tt=null}function Jg(n,s,r,u,p,g,v,T,D){n.cancelPendingCommit=null;do Gl();while(we!==0);if((It&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Ou,IA(n,r,g,v,T,D),n===Xt&&(Tt=Xt=null,Rt=0),Ea=s,Wi=n,gi=r,zh=g,Hh=p,Hg=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rS(zt,function(){return sy(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,p=H.p,H.p=2,v=It,It|=4;try{Ww(n,s,r)}finally{It=v,H.p=p,L.T=u}}we=1,ty(),ey(),ny()}}function ty(){if(we===1){we=0;var n=Wi,s=Ea,r=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var u=H.p;H.p=2;var p=It;It|=4;try{Lg(s,n);var g=id,v=Fp(n.containerInfo),T=g.focusedElem,D=g.selectionRange;if(v!==T&&T&&T.ownerDocument&&Up(T.ownerDocument.documentElement,T)){if(D!==null&&Ru(T)){var F=D.start,q=D.end;if(q===void 0&&(q=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(q,T.value.length);else{var X=T.ownerDocument||document,z=X&&X.defaultView||window;if(z.getSelection){var G=z.getSelection(),st=T.textContent.length,mt=Math.min(D.start,st),Gt=D.end===void 0?mt:Math.min(D.end,st);!G.extend&&mt>Gt&&(v=Gt,Gt=mt,mt=v);var P=jp(T,mt),N=jp(T,Gt);if(P&&N&&(G.rangeCount!==1||G.anchorNode!==P.node||G.anchorOffset!==P.offset||G.focusNode!==N.node||G.focusOffset!==N.offset)){var U=X.createRange();U.setStart(P.node,P.offset),G.removeAllRanges(),mt>Gt?(G.addRange(U),G.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),G.addRange(U))}}}}for(X=[],G=T;G=G.parentNode;)G.nodeType===1&&X.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<X.length;T++){var $=X[T];$.element.scrollLeft=$.left,$.element.scrollTop=$.top}}nc=!!nd,id=nd=null}finally{It=p,H.p=u,L.T=r}}n.current=s,we=2}}function ey(){if(we===2){we=0;var n=Wi,s=Ea,r=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var u=H.p;H.p=2;var p=It;It|=4;try{Dg(n,s.alternate,s)}finally{It=p,H.p=u,L.T=r}}we=3}}function ny(){if(we===4||we===3){we=0,lt();var n=Wi,s=Ea,r=gi,u=Hg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?we=5:(we=0,Ea=Wi=null,iy(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(Yi=null),cu(r),s=s.stateNode,Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(ur,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=L.T,p=H.p,H.p=2,L.T=null;try{for(var g=n.onRecoverableError,v=0;v<u.length;v++){var T=u[v];g(T.value,{componentStack:T.stack})}}finally{L.T=s,H.p=p}}(gi&3)!==0&&Gl(),Un(n),p=n.pendingLanes,(r&261930)!==0&&(p&42)!==0?n===Vh?qr++:(qr=0,Vh=n):qr=0,$r(0)}}function iy(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Tr(s)))}function Gl(){return ty(),ey(),ny(),sy()}function sy(){if(we!==5)return!1;var n=Wi,s=zh;zh=0;var r=cu(gi),u=L.T,p=H.p;try{H.p=32>r?32:r,L.T=null,r=Hh,Hh=null;var g=Wi,v=gi;if(we=0,Ea=Wi=null,gi=0,(It&6)!==0)throw Error(i(331));var T=It;if(It|=4,Ug(g.current),Pg(g,g.current,v,r),It=T,$r(0,!1),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(ur,g)}catch{}return!0}finally{H.p=p,L.T=u,iy(n,s)}}function ay(n,s,r){s=gn(r,s),s=wh(n.stateNode,s,2),n=Hi(n,s,2),n!==null&&(dr(n,2),Un(n))}function Ft(n,s,r){if(n.tag===3)ay(n,n,r);else for(;s!==null;){if(s.tag===3){ay(s,n,r);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Yi===null||!Yi.has(u))){n=gn(r,n),r=rg(2),u=Hi(s,r,2),u!==null&&(og(r,u,s,n),dr(u,2),Un(u));break}}s=s.return}}function $h(n,s,r){var u=n.pingCache;if(u===null){u=n.pingCache=new Zw;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(r)||(jh=!0,p.add(r),n=iS.bind(null,n,s,r),s.then(n,n))}function iS(n,s,r){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,Xt===n&&(Rt&r)===r&&(ue===4||ue===3&&(Rt&62914560)===Rt&&300>ut()-jl?(It&2)===0&&Ta(n,0):Uh|=r,xa===Rt&&(xa=0)),Un(n)}function ry(n,s){s===0&&(s=tp()),n=Ss(n,s),n!==null&&(dr(n,s),Un(n))}function sS(n){var s=n.memoizedState,r=0;s!==null&&(r=s.retryLane),ry(n,r)}function aS(n,s){var r=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(r=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),ry(n,r)}function rS(n,s){return lr(n,s)}var ql=null,Ra=null,Xh=!1,$l=!1,Yh=!1,Qi=0;function Un(n){n!==Ra&&n.next===null&&(Ra===null?ql=Ra=n:Ra=Ra.next=n),$l=!0,Xh||(Xh=!0,lS())}function $r(n,s){if(!Yh&&$l){Yh=!0;do for(var r=!1,u=ql;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var g=0;else{var v=u.suspendedLanes,T=u.pingedLanes;g=(1<<31-tn(42|n)+1)-1,g&=p&~(v&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,uy(u,g))}else g=Rt,g=Ko(u,u===Xt?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||hr(u,g)||(r=!0,uy(u,g));u=u.next}while(r);Yh=!1}}function oS(){oy()}function oy(){$l=Xh=!1;var n=0;Qi!==0&&bS()&&(n=Qi);for(var s=ut(),r=null,u=ql;u!==null;){var p=u.next,g=ly(u,s);g===0?(u.next=null,r===null?ql=p:r.next=p,p===null&&(Ra=r)):(r=u,(n!==0||(g&3)!==0)&&($l=!0)),u=p}we!==0&&we!==5||$r(n),Qi!==0&&(Qi=0)}function ly(n,s){for(var r=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var v=31-tn(g),T=1<<v,D=p[v];D===-1?((T&r)===0||(T&u)!==0)&&(p[v]=LA(T,s)):D<=s&&(n.expiredLanes|=T),g&=~T}if(s=Xt,r=Rt,r=Ko(n,n===s?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,r===0||n===s&&(Ut===2||Ut===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&cr(u),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||hr(n,r)){if(s=r&-r,s===n.callbackPriority)return s;switch(u!==null&&cr(u),cu(r)){case 2:case 8:r=Zt;break;case 32:r=zt;break;case 268435456:r=Jn;break;default:r=zt}return u=cy.bind(null,n),r=lr(r,u),n.callbackPriority=s,n.callbackNode=r,s}return u!==null&&u!==null&&cr(u),n.callbackPriority=2,n.callbackNode=null,2}function cy(n,s){if(we!==0&&we!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Gl()&&n.callbackNode!==r)return null;var u=Rt;return u=Ko(n,n===Xt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Gg(n,u,s),ly(n,ut()),n.callbackNode!=null&&n.callbackNode===r?cy.bind(null,n):null)}function uy(n,s){if(Gl())return null;Gg(n,s,!0)}function lS(){AS(function(){(It&6)!==0?lr(Qt,oS):oy()})}function Wh(){if(Qi===0){var n=fa;n===0&&(n=Xo,Xo<<=1,(Xo&261888)===0&&(Xo=256)),Qi=n}return Qi}function hy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:tl(""+n)}function dy(n,s){var r=s.ownerDocument.createElement("input");return r.name=s.name,r.value=s.value,n.id&&r.setAttribute("form",n.id),s.parentNode.insertBefore(r,s),n=new FormData(n),r.parentNode.removeChild(r),n}function cS(n,s,r,u,p){if(s==="submit"&&r&&r.stateNode===p){var g=hy((p[ze]||null).action),v=u.submitter;v&&(s=(s=v[ze]||null)?hy(s.formAction):v.getAttribute("formAction"),s!==null&&(g=s,v=null));var T=new sl("action","action",null,u,p);n.push({event:T,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Qi!==0){var D=v?dy(p,v):new FormData(p);mh(r,{pending:!0,data:D,method:p.method,action:g},null,D)}}else typeof g=="function"&&(T.preventDefault(),D=v?dy(p,v):new FormData(p),mh(r,{pending:!0,data:D,method:p.method,action:g},g,D))},currentTarget:p}]})}}for(var Kh=0;Kh<ku.length;Kh++){var Qh=ku[Kh],uS=Qh.toLowerCase(),hS=Qh[0].toUpperCase()+Qh.slice(1);Cn(uS,"on"+hS)}Cn(Vp,"onAnimationEnd"),Cn(Gp,"onAnimationIteration"),Cn(qp,"onAnimationStart"),Cn("dblclick","onDoubleClick"),Cn("focusin","onFocus"),Cn("focusout","onBlur"),Cn(Cw,"onTransitionRun"),Cn(Rw,"onTransitionStart"),Cn(Dw,"onTransitionCancel"),Cn($p,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),bs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bs("onBeforeInput",["compositionend","keypress","textInput","paste"]),bs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xr));function fy(n,s){s=(s&4)!==0;for(var r=0;r<n.length;r++){var u=n[r],p=u.event;u=u.listeners;t:{var g=void 0;if(s)for(var v=u.length-1;0<=v;v--){var T=u[v],D=T.instance,F=T.currentTarget;if(T=T.listener,D!==g&&p.isPropagationStopped())break t;g=T,p.currentTarget=F;try{g(p)}catch(q){ol(q)}p.currentTarget=null,g=D}else for(v=0;v<u.length;v++){if(T=u[v],D=T.instance,F=T.currentTarget,T=T.listener,D!==g&&p.isPropagationStopped())break t;g=T,p.currentTarget=F;try{g(p)}catch(q){ol(q)}p.currentTarget=null,g=D}}}}function Ct(n,s){var r=s[uu];r===void 0&&(r=s[uu]=new Set);var u=n+"__bubble";r.has(u)||(py(s,n,2,!1),r.add(u))}function Zh(n,s,r){var u=0;s&&(u|=4),py(r,n,u,s)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Jh(n){if(!n[Xl]){n[Xl]=!0,op.forEach(function(r){r!=="selectionchange"&&(dS.has(r)||Zh(r,!1,n),Zh(r,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Xl]||(s[Xl]=!0,Zh("selectionchange",!1,s))}}function py(n,s,r,u){switch(Vy(s)){case 2:var p=FS;break;case 8:p=zS;break;default:p=pd}r=p.bind(null,s,r,n),p=void 0,!vu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,r,{capture:!0,passive:p}):n.addEventListener(s,r,!0):p!==void 0?n.addEventListener(s,r,{passive:p}):n.addEventListener(s,r,!1)}function td(n,s,r,u,p){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var T=u.stateNode.containerInfo;if(T===p)break;if(v===4)for(v=u.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===p)return;v=v.return}for(;T!==null;){if(v=Ks(T),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){u=g=v;continue t}T=T.parentNode}}u=u.return}vp(function(){var F=g,q=yu(r),X=[];t:{var z=Xp.get(n);if(z!==void 0){var G=sl,st=n;switch(n){case"keypress":if(nl(r)===0)break t;case"keydown":case"keyup":G=aw;break;case"focusin":st="focus",G=_u;break;case"focusout":st="blur",G=_u;break;case"beforeblur":case"afterblur":G=_u;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=XA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=lw;break;case Vp:case Gp:case qp:G=KA;break;case $p:G=uw;break;case"scroll":case"scrollend":G=qA;break;case"wheel":G=dw;break;case"copy":case"cut":case"paste":G=ZA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=xp;break;case"toggle":case"beforetoggle":G=pw}var mt=(s&4)!==0,Gt=!mt&&(n==="scroll"||n==="scrollend"),P=mt?z!==null?z+"Capture":null:z;mt=[];for(var N=F,U;N!==null;){var $=N;if(U=$.stateNode,$=$.tag,$!==5&&$!==26&&$!==27||U===null||P===null||($=mr(N,P),$!=null&&mt.push(Yr(N,$,U))),Gt)break;N=N.return}0<mt.length&&(z=new G(z,st,null,r,q),X.push({event:z,listeners:mt}))}}if((s&7)===0){t:{if(z=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",z&&r!==gu&&(st=r.relatedTarget||r.fromElement)&&(Ks(st)||st[Ws]))break t;if((G||z)&&(z=q.window===q?q:(z=q.ownerDocument)?z.defaultView||z.parentWindow:window,G?(st=r.relatedTarget||r.toElement,G=F,st=st?Ks(st):null,st!==null&&(Gt=l(st),mt=st.tag,st!==Gt||mt!==5&&mt!==27&&mt!==6)&&(st=null)):(G=null,st=F),G!==st)){if(mt=Sp,$="onMouseLeave",P="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(mt=xp,$="onPointerLeave",P="onPointerEnter",N="pointer"),Gt=G==null?z:pr(G),U=st==null?z:pr(st),z=new mt($,N+"leave",G,r,q),z.target=Gt,z.relatedTarget=U,$=null,Ks(q)===F&&(mt=new mt(P,N+"enter",st,r,q),mt.target=U,mt.relatedTarget=Gt,$=mt),Gt=$,G&&st)e:{for(mt=fS,P=G,N=st,U=0,$=P;$;$=mt($))U++;$=0;for(var ht=N;ht;ht=mt(ht))$++;for(;0<U-$;)P=mt(P),U--;for(;0<$-U;)N=mt(N),$--;for(;U--;){if(P===N||N!==null&&P===N.alternate){mt=P;break e}P=mt(P),N=mt(N)}mt=null}else mt=null;G!==null&&my(X,z,G,mt,!1),st!==null&&Gt!==null&&my(X,Gt,st,mt,!0)}}t:{if(z=F?pr(F):window,G=z.nodeName&&z.nodeName.toLowerCase(),G==="select"||G==="input"&&z.type==="file")var Ot=kp;else if(Mp(z))if(Op)Ot=xw;else{Ot=Sw;var ot=ww}else G=z.nodeName,!G||G.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?F&&mu(F.elementType)&&(Ot=kp):Ot=_w;if(Ot&&(Ot=Ot(n,F))){Np(X,Ot,r,q);break t}ot&&ot(n,z,F),n==="focusout"&&F&&z.type==="number"&&F.memoizedProps.value!=null&&pu(z,"number",z.value)}switch(ot=F?pr(F):window,n){case"focusin":(Mp(ot)||ot.contentEditable==="true")&&(aa=ot,Du=F,_r=null);break;case"focusout":_r=Du=aa=null;break;case"mousedown":Mu=!0;break;case"contextmenu":case"mouseup":case"dragend":Mu=!1,zp(X,r,q);break;case"selectionchange":if(Tw)break;case"keydown":case"keyup":zp(X,r,q)}var Et;if(Eu)t:{switch(n){case"compositionstart":var Dt="onCompositionStart";break t;case"compositionend":Dt="onCompositionEnd";break t;case"compositionupdate":Dt="onCompositionUpdate";break t}Dt=void 0}else sa?Rp(n,r)&&(Dt="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(Dt="onCompositionStart");Dt&&(Ep&&r.locale!=="ko"&&(sa||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&sa&&(Et=Ap()):(Ii=q,Au="value"in Ii?Ii.value:Ii.textContent,sa=!0)),ot=Yl(F,Dt),0<ot.length&&(Dt=new _p(Dt,n,null,r,q),X.push({event:Dt,listeners:ot}),Et?Dt.data=Et:(Et=Dp(r),Et!==null&&(Dt.data=Et)))),(Et=gw?yw(n,r):bw(n,r))&&(Dt=Yl(F,"onBeforeInput"),0<Dt.length&&(ot=new _p("onBeforeInput","beforeinput",null,r,q),X.push({event:ot,listeners:Dt}),ot.data=Et)),cS(X,n,F,r,q)}fy(X,s)})}function Yr(n,s,r){return{instance:n,listener:s,currentTarget:r}}function Yl(n,s){for(var r=s+"Capture",u=[];n!==null;){var p=n,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=mr(n,r),p!=null&&u.unshift(Yr(n,p,g)),p=mr(n,s),p!=null&&u.push(Yr(n,p,g))),n.tag===3)return u;n=n.return}return[]}function fS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function my(n,s,r,u,p){for(var g=s._reactName,v=[];r!==null&&r!==u;){var T=r,D=T.alternate,F=T.stateNode;if(T=T.tag,D!==null&&D===u)break;T!==5&&T!==26&&T!==27||F===null||(D=F,p?(F=mr(r,g),F!=null&&v.unshift(Yr(r,F,D))):p||(F=mr(r,g),F!=null&&v.push(Yr(r,F,D)))),r=r.return}v.length!==0&&n.push({event:s,listeners:v})}var pS=/\r\n?/g,mS=/\u0000|\uFFFD/g;function gy(n){return(typeof n=="string"?n:""+n).replace(pS,`
`).replace(mS,"")}function yy(n,s){return s=gy(s),gy(n)===s}function Vt(n,s,r,u,p,g){switch(r){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||ea(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&ea(n,""+u);break;case"className":Zo(n,"class",u);break;case"tabIndex":Zo(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Zo(n,r,u);break;case"style":yp(n,u,g);break;case"data":if(s!=="object"){Zo(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||r!=="href")){n.removeAttribute(r);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=tl(""+u),n.setAttribute(r,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(s!=="input"&&Vt(n,s,"name",p.name,p,null),Vt(n,s,"formEncType",p.formEncType,p,null),Vt(n,s,"formMethod",p.formMethod,p,null),Vt(n,s,"formTarget",p.formTarget,p,null)):(Vt(n,s,"encType",p.encType,p,null),Vt(n,s,"method",p.method,p,null),Vt(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(r);break}u=tl(""+u),n.setAttribute(r,u);break;case"onClick":u!=null&&(n.onclick=ei);break;case"onScroll":u!=null&&Ct("scroll",n);break;case"onScrollEnd":u!=null&&Ct("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}r=tl(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""+u):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":u===!0?n.setAttribute(r,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(r,u):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(r,u):n.removeAttribute(r);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(r):n.setAttribute(r,u);break;case"popover":Ct("beforetoggle",n),Ct("toggle",n),Qo(n,"popover",u);break;case"xlinkActuate":ti(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ti(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ti(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ti(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ti(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ti(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ti(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ti(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ti(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Qo(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=VA.get(r)||r,Qo(n,r,u))}}function ed(n,s,r,u,p,g){switch(r){case"style":yp(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(r=u.__html,r!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof u=="string"?ea(n,u):(typeof u=="number"||typeof u=="bigint")&&ea(n,""+u);break;case"onScroll":u!=null&&Ct("scroll",n);break;case"onScrollEnd":u!=null&&Ct("scrollend",n);break;case"onClick":u!=null&&(n.onclick=ei);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lp.hasOwnProperty(r))t:{if(r[0]==="o"&&r[1]==="n"&&(p=r.endsWith("Capture"),s=r.slice(2,p?r.length-7:void 0),g=n[ze]||null,g=g!=null?g[r]:null,typeof g=="function"&&n.removeEventListener(s,g,p),typeof u=="function")){typeof g!="function"&&g!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(s,u,p);break t}r in n?n[r]=u:u===!0?n.setAttribute(r,""):Qo(n,r,u)}}}function ke(n,s,r){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ct("error",n),Ct("load",n);var u=!1,p=!1,g;for(g in r)if(r.hasOwnProperty(g)){var v=r[g];if(v!=null)switch(g){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Vt(n,s,g,v,r,null)}}p&&Vt(n,s,"srcSet",r.srcSet,r,null),u&&Vt(n,s,"src",r.src,r,null);return;case"input":Ct("invalid",n);var T=g=v=p=null,D=null,F=null;for(u in r)if(r.hasOwnProperty(u)){var q=r[u];if(q!=null)switch(u){case"name":p=q;break;case"type":v=q;break;case"checked":D=q;break;case"defaultChecked":F=q;break;case"value":g=q;break;case"defaultValue":T=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(i(137,s));break;default:Vt(n,s,u,q,r,null)}}fp(n,g,T,D,F,v,p,!1);return;case"select":Ct("invalid",n),u=v=g=null;for(p in r)if(r.hasOwnProperty(p)&&(T=r[p],T!=null))switch(p){case"value":g=T;break;case"defaultValue":v=T;break;case"multiple":u=T;default:Vt(n,s,p,T,r,null)}s=g,r=v,n.multiple=!!u,s!=null?ta(n,!!u,s,!1):r!=null&&ta(n,!!u,r,!0);return;case"textarea":Ct("invalid",n),g=p=u=null;for(v in r)if(r.hasOwnProperty(v)&&(T=r[v],T!=null))switch(v){case"value":u=T;break;case"defaultValue":p=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Vt(n,s,v,T,r,null)}mp(n,u,p,g);return;case"option":for(D in r)r.hasOwnProperty(D)&&(u=r[D],u!=null)&&(D==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":Vt(n,s,D,u,r,null));return;case"dialog":Ct("beforetoggle",n),Ct("toggle",n),Ct("cancel",n),Ct("close",n);break;case"iframe":case"object":Ct("load",n);break;case"video":case"audio":for(u=0;u<Xr.length;u++)Ct(Xr[u],n);break;case"image":Ct("error",n),Ct("load",n);break;case"details":Ct("toggle",n);break;case"embed":case"source":case"link":Ct("error",n),Ct("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in r)if(r.hasOwnProperty(F)&&(u=r[F],u!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:Vt(n,s,F,u,r,null)}return;default:if(mu(s)){for(q in r)r.hasOwnProperty(q)&&(u=r[q],u!==void 0&&ed(n,s,q,u,r,void 0));return}}for(T in r)r.hasOwnProperty(T)&&(u=r[T],u!=null&&Vt(n,s,T,u,r,null))}function gS(n,s,r,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,v=null,T=null,D=null,F=null,q=null;for(G in r){var X=r[G];if(r.hasOwnProperty(G)&&X!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":D=X;default:u.hasOwnProperty(G)||Vt(n,s,G,null,u,X)}}for(var z in u){var G=u[z];if(X=r[z],u.hasOwnProperty(z)&&(G!=null||X!=null))switch(z){case"type":g=G;break;case"name":p=G;break;case"checked":F=G;break;case"defaultChecked":q=G;break;case"value":v=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==X&&Vt(n,s,z,G,u,X)}}fu(n,v,T,D,F,q,g,p);return;case"select":G=v=T=z=null;for(g in r)if(D=r[g],r.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":G=D;default:u.hasOwnProperty(g)||Vt(n,s,g,null,u,D)}for(p in u)if(g=u[p],D=r[p],u.hasOwnProperty(p)&&(g!=null||D!=null))switch(p){case"value":z=g;break;case"defaultValue":T=g;break;case"multiple":v=g;default:g!==D&&Vt(n,s,p,g,u,D)}s=T,r=v,u=G,z!=null?ta(n,!!r,z,!1):!!u!=!!r&&(s!=null?ta(n,!!r,s,!0):ta(n,!!r,r?[]:"",!1));return;case"textarea":G=z=null;for(T in r)if(p=r[T],r.hasOwnProperty(T)&&p!=null&&!u.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Vt(n,s,T,null,u,p)}for(v in u)if(p=u[v],g=r[v],u.hasOwnProperty(v)&&(p!=null||g!=null))switch(v){case"value":z=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==g&&Vt(n,s,v,p,u,g)}pp(n,z,G);return;case"option":for(var st in r)z=r[st],r.hasOwnProperty(st)&&z!=null&&!u.hasOwnProperty(st)&&(st==="selected"?n.selected=!1:Vt(n,s,st,null,u,z));for(D in u)z=u[D],G=r[D],u.hasOwnProperty(D)&&z!==G&&(z!=null||G!=null)&&(D==="selected"?n.selected=z&&typeof z!="function"&&typeof z!="symbol":Vt(n,s,D,z,u,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in r)z=r[mt],r.hasOwnProperty(mt)&&z!=null&&!u.hasOwnProperty(mt)&&Vt(n,s,mt,null,u,z);for(F in u)if(z=u[F],G=r[F],u.hasOwnProperty(F)&&z!==G&&(z!=null||G!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:Vt(n,s,F,z,u,G)}return;default:if(mu(s)){for(var Gt in r)z=r[Gt],r.hasOwnProperty(Gt)&&z!==void 0&&!u.hasOwnProperty(Gt)&&ed(n,s,Gt,void 0,u,z);for(q in u)z=u[q],G=r[q],!u.hasOwnProperty(q)||z===G||z===void 0&&G===void 0||ed(n,s,q,z,u,G);return}}for(var P in r)z=r[P],r.hasOwnProperty(P)&&z!=null&&!u.hasOwnProperty(P)&&Vt(n,s,P,null,u,z);for(X in u)z=u[X],G=r[X],!u.hasOwnProperty(X)||z===G||z==null&&G==null||Vt(n,s,X,z,u,G)}function by(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function yS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,r=performance.getEntriesByType("resource"),u=0;u<r.length;u++){var p=r[u],g=p.transferSize,v=p.initiatorType,T=p.duration;if(g&&T&&by(v)){for(v=0,T=p.responseEnd,u+=1;u<r.length;u++){var D=r[u],F=D.startTime;if(F>T)break;var q=D.transferSize,X=D.initiatorType;q&&by(X)&&(D=D.responseEnd,v+=q*(D<T?1:(T-F)/(D-F)))}if(--u,s+=8*(g+v)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var nd=null,id=null;function Wl(n){return n.nodeType===9?n:n.ownerDocument}function vy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ay(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function sd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ad=null;function bS(){var n=window.event;return n&&n.type==="popstate"?n===ad?!1:(ad=n,!0):(ad=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,AS=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(n){return Sy.resolve(null).then(n).catch(wS)}:wy;function wS(n){setTimeout(function(){throw n})}function Zi(n){return n==="head"}function _y(n,s){var r=s,u=0;do{var p=r.nextSibling;if(n.removeChild(r),p&&p.nodeType===8)if(r=p.data,r==="/$"||r==="/&"){if(u===0){n.removeChild(p),ka(s);return}u--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")u++;else if(r==="html")Wr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,Wr(r);for(var g=r.firstChild;g;){var v=g.nextSibling,T=g.nodeName;g[fr]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=v}}else r==="body"&&Wr(n.ownerDocument.body);r=p}while(r);ka(s)}function xy(n,s){var r=n;n=0;do{var u=r.nextSibling;if(r.nodeType===1?s?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(s?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=u}while(r)}function rd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var r=s;switch(s=s.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":rd(r),hu(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function SS(n,s,r,u){for(;n.nodeType===1;){var p=r;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[fr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=wn(n.nextSibling),n===null)break}return null}function _S(n,s,r){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=wn(n.nextSibling),n===null))return null;return n}function Ey(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=wn(n.nextSibling),n===null))return null;return n}function od(n){return n.data==="$?"||n.data==="$~"}function ld(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function xS(n,s){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||r.readyState!=="loading")s();else{var u=function(){s(),r.removeEventListener("DOMContentLoaded",u)};r.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function wn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var cd=null;function Ty(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(s===0)return wn(n.nextSibling);s--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||s++}n=n.nextSibling}return null}function Cy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(s===0)return n;s--}else r!=="/$"&&r!=="/&"||s++}n=n.previousSibling}return null}function Ry(n,s,r){switch(s=Wl(r),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function Wr(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);hu(n)}var Sn=new Map,Dy=new Set;function Kl(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var yi=H.d;H.d={f:ES,r:TS,D:CS,C:RS,L:DS,m:MS,X:kS,S:NS,M:OS};function ES(){var n=yi.f(),s=zl();return n||s}function TS(n){var s=Qs(n);s!==null&&s.tag===5&&s.type==="form"?$m(s):yi.r(n)}var Da=typeof document>"u"?null:document;function My(n,s,r){var u=Da;if(u&&typeof s=="string"&&s){var p=pn(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof r=="string"&&(p+='[crossorigin="'+r+'"]'),Dy.has(p)||(Dy.add(p),n={rel:n,crossOrigin:r,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),ke(s,"link",n),_e(s),u.head.appendChild(s)))}}function CS(n){yi.D(n),My("dns-prefetch",n,null)}function RS(n,s){yi.C(n,s),My("preconnect",n,s)}function DS(n,s,r){yi.L(n,s,r);var u=Da;if(u&&n&&s){var p='link[rel="preload"][as="'+pn(s)+'"]';s==="image"&&r&&r.imageSrcSet?(p+='[imagesrcset="'+pn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(p+='[imagesizes="'+pn(r.imageSizes)+'"]')):p+='[href="'+pn(n)+'"]';var g=p;switch(s){case"style":g=Ma(n);break;case"script":g=Na(n)}Sn.has(g)||(n=y({rel:"preload",href:s==="image"&&r&&r.imageSrcSet?void 0:n,as:s},r),Sn.set(g,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(Kr(g))||s==="script"&&u.querySelector(Qr(g))||(s=u.createElement("link"),ke(s,"link",n),_e(s),u.head.appendChild(s)))}}function MS(n,s){yi.m(n,s);var r=Da;if(r&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+pn(u)+'"][href="'+pn(n)+'"]',g=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Na(n)}if(!Sn.has(g)&&(n=y({rel:"modulepreload",href:n},s),Sn.set(g,n),r.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Qr(g)))return}u=r.createElement("link"),ke(u,"link",n),_e(u),r.head.appendChild(u)}}}function NS(n,s,r){yi.S(n,s,r);var u=Da;if(u&&n){var p=Zs(u).hoistableStyles,g=Ma(n);s=s||"default";var v=p.get(g);if(!v){var T={loading:0,preload:null};if(v=u.querySelector(Kr(g)))T.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":s},r),(r=Sn.get(g))&&ud(n,r);var D=v=u.createElement("link");_e(D),ke(D,"link",n),D._p=new Promise(function(F,q){D.onload=F,D.onerror=q}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Ql(v,s,u)}v={type:"stylesheet",instance:v,count:1,state:T},p.set(g,v)}}}function kS(n,s){yi.X(n,s);var r=Da;if(r&&n){var u=Zs(r).hoistableScripts,p=Na(n),g=u.get(p);g||(g=r.querySelector(Qr(p)),g||(n=y({src:n,async:!0},s),(s=Sn.get(p))&&hd(n,s),g=r.createElement("script"),_e(g),ke(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function OS(n,s){yi.M(n,s);var r=Da;if(r&&n){var u=Zs(r).hoistableScripts,p=Na(n),g=u.get(p);g||(g=r.querySelector(Qr(p)),g||(n=y({src:n,async:!0,type:"module"},s),(s=Sn.get(p))&&hd(n,s),g=r.createElement("script"),_e(g),ke(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(p,g))}}function Ny(n,s,r,u){var p=(p=gt.current)?Kl(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(s=Ma(r.href),r=Zs(p).hoistableStyles,u=r.get(s),u||(u={type:"style",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=Ma(r.href);var g=Zs(p).hoistableStyles,v=g.get(n);if(v||(p=p.ownerDocument||p,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,v),(g=p.querySelector(Kr(n)))&&!g._p&&(v.instance=g,v.state.loading=5),Sn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Sn.set(n,r),g||LS(p,n,r,v.state))),s&&u===null)throw Error(i(528,""));return v}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=r.async,r=r.src,typeof r=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Na(r),r=Zs(p).hoistableScripts,u=r.get(s),u||(u={type:"script",instance:null,count:0,state:null},r.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ma(n){return'href="'+pn(n)+'"'}function Kr(n){return'link[rel="stylesheet"]['+n+"]"}function ky(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function LS(n,s,r,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),ke(s,"link",r),_e(s),n.head.appendChild(s))}function Na(n){return'[src="'+pn(n)+'"]'}function Qr(n){return"script[async]"+n}function Oy(n,s,r){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+pn(r.href)+'"]');if(u)return s.instance=u,_e(u),u;var p=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),_e(u),ke(u,"style",p),Ql(u,r.precedence,n),s.instance=u;case"stylesheet":p=Ma(r.href);var g=n.querySelector(Kr(p));if(g)return s.state.loading|=4,s.instance=g,_e(g),g;u=ky(r),(p=Sn.get(p))&&ud(u,p),g=(n.ownerDocument||n).createElement("link"),_e(g);var v=g;return v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),ke(g,"link",u),s.state.loading|=4,Ql(g,r.precedence,n),s.instance=g;case"script":return g=Na(r.src),(p=n.querySelector(Qr(g)))?(s.instance=p,_e(p),p):(u=r,(p=Sn.get(g))&&(u=y({},r),hd(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),_e(p),ke(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ql(u,r.precedence,n));return s.instance}function Ql(n,s,r){for(var u=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,g=p,v=0;v<u.length;v++){var T=u[v];if(T.dataset.precedence===s)g=T;else if(g!==p)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=r.nodeType===9?r.head:r,s.insertBefore(n,s.firstChild))}function ud(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function hd(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Zl=null;function Ly(n,s,r){if(Zl===null){var u=new Map,p=Zl=new Map;p.set(r,u)}else p=Zl,u=p.get(r),u||(u=new Map,p.set(r,u));if(u.has(n))return u;for(u.set(n,null),r=r.getElementsByTagName(n),p=0;p<r.length;p++){var g=r[p];if(!(g[fr]||g[Re]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var v=g.getAttribute(s)||"";v=n+v;var T=u.get(v);T?T.push(g):u.set(v,[g])}}return u}function Iy(n,s,r){n=n.ownerDocument||n,n.head.insertBefore(r,s==="title"?n.querySelector("head > title"):null)}function IS(n,s,r){if(r===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Py(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function PS(n,s,r,u){if(r.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var p=Ma(u.href),g=s.querySelector(Kr(p));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Jl.bind(n),s.then(n,n)),r.state.loading|=4,r.instance=g,_e(g);return}g=s.ownerDocument||s,u=ky(u),(p=Sn.get(p))&&ud(u,p),g=g.createElement("link"),_e(g);var v=g;v._p=new Promise(function(T,D){v.onload=T,v.onerror=D}),ke(g,"link",u),r.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,s),(s=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=Jl.bind(n),s.addEventListener("load",r),s.addEventListener("error",r))}}var dd=0;function BS(n,s){return n.stylesheets&&n.count===0&&ec(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var u=setTimeout(function(){if(n.stylesheets&&ec(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&dd===0&&(dd=62500*yS());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ec(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>dd?50:800)+s);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Jl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ec(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var tc=null;function ec(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,tc=new Map,s.forEach(jS,n),tc=null,Jl.call(n))}function jS(n,s){if(!(s.state.loading&4)){var r=tc.get(n);if(r)var u=r.get(null);else{r=new Map,tc.set(n,r);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var v=p[g];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(r.set(v.dataset.precedence,v),u=v)}u&&r.set(null,u)}p=s.instance,v=p.getAttribute("data-precedence"),g=r.get(v)||u,g===u&&r.set(null,p),r.set(v,p),this.count++,u=Jl.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),g?g.parentNode.insertBefore(p,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var Zr={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function US(n,s,r,u,p,g,v,T,D){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ou(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ou(0),this.hiddenUpdates=ou(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function By(n,s,r,u,p,g,v,T,D,F,q,X){return n=new US(n,s,r,v,D,F,q,X,T),s=1,g===!0&&(s|=24),g=nn(3,null,null,s),n.current=g,g.stateNode=n,s=qu(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:r,cache:s},Wu(g),n}function jy(n){return n?(n=la,n):la}function Uy(n,s,r,u,p,g){p=jy(p),u.context===null?u.context=p:u.pendingContext=p,u=zi(s),u.payload={element:r},g=g===void 0?null:g,g!==null&&(u.callback=g),r=Hi(n,u,s),r!==null&&(Xe(r,n,s),Mr(r,n,s))}function Fy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<s?r:s}}function fd(n,s){Fy(n,s),(n=n.alternate)&&Fy(n,s)}function zy(n){if(n.tag===13||n.tag===31){var s=Ss(n,67108864);s!==null&&Xe(s,n,67108864),fd(n,67108864)}}function Hy(n){if(n.tag===13||n.tag===31){var s=ln();s=lu(s);var r=Ss(n,s);r!==null&&Xe(r,n,s),fd(n,s)}}var nc=!0;function FS(n,s,r,u){var p=L.T;L.T=null;var g=H.p;try{H.p=2,pd(n,s,r,u)}finally{H.p=g,L.T=p}}function zS(n,s,r,u){var p=L.T;L.T=null;var g=H.p;try{H.p=8,pd(n,s,r,u)}finally{H.p=g,L.T=p}}function pd(n,s,r,u){if(nc){var p=md(u);if(p===null)td(n,s,u,ic,r),Gy(n,u);else if(VS(p,n,s,r,u))u.stopPropagation();else if(Gy(n,u),s&4&&-1<HS.indexOf(n)){for(;p!==null;){var g=Qs(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var v=ys(g.pendingLanes);if(v!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var D=1<<31-tn(v);T.entanglements[1]|=D,v&=~D}Un(g),(It&6)===0&&(Ul=ut()+500,$r(0))}}break;case 31:case 13:T=Ss(g,2),T!==null&&Xe(T,g,2),zl(),fd(g,2)}if(g=md(u),g===null&&td(n,s,u,ic,r),g===p)break;p=g}p!==null&&u.stopPropagation()}else td(n,s,u,null,r)}}function md(n){return n=yu(n),gd(n)}var ic=null;function gd(n){if(ic=null,n=Ks(n),n!==null){var s=l(n);if(s===null)n=null;else{var r=s.tag;if(r===13){if(n=c(s),n!==null)return n;n=null}else if(r===31){if(n=h(s),n!==null)return n;n=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ic=n,null}function Vy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($t()){case Qt:return 2;case Zt:return 8;case zt:case se:return 32;case Jn:return 268435456;default:return 32}default:return 32}}var yd=!1,Ji=null,ts=null,es=null,Jr=new Map,to=new Map,ns=[],HS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gy(n,s){switch(n){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":ts=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":to.delete(s.pointerId)}}function eo(n,s,r,u,p,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:r,eventSystemFlags:u,nativeEvent:g,targetContainers:[p]},s!==null&&(s=Qs(s),s!==null&&zy(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function VS(n,s,r,u,p){switch(s){case"focusin":return Ji=eo(Ji,n,s,r,u,p),!0;case"dragenter":return ts=eo(ts,n,s,r,u,p),!0;case"mouseover":return es=eo(es,n,s,r,u,p),!0;case"pointerover":var g=p.pointerId;return Jr.set(g,eo(Jr.get(g)||null,n,s,r,u,p)),!0;case"gotpointercapture":return g=p.pointerId,to.set(g,eo(to.get(g)||null,n,s,r,u,p)),!0}return!1}function qy(n){var s=Ks(n.target);if(s!==null){var r=l(s);if(r!==null){if(s=r.tag,s===13){if(s=c(r),s!==null){n.blockedOn=s,ap(n.priority,function(){Hy(r)});return}}else if(s===31){if(s=h(r),s!==null){n.blockedOn=s,ap(n.priority,function(){Hy(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function sc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var r=md(n.nativeEvent);if(r===null){r=n.nativeEvent;var u=new r.constructor(r.type,r);gu=u,r.target.dispatchEvent(u),gu=null}else return s=Qs(r),s!==null&&zy(s),n.blockedOn=r,!1;s.shift()}return!0}function $y(n,s,r){sc(n)&&r.delete(s)}function GS(){yd=!1,Ji!==null&&sc(Ji)&&(Ji=null),ts!==null&&sc(ts)&&(ts=null),es!==null&&sc(es)&&(es=null),Jr.forEach($y),to.forEach($y)}function ac(n,s){n.blockedOn===s&&(n.blockedOn=null,yd||(yd=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,GS)))}var rc=null;function Xy(n){rc!==n&&(rc=n,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){rc===n&&(rc=null);for(var s=0;s<n.length;s+=3){var r=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(gd(u||r)===null)continue;break}var g=Qs(r);g!==null&&(n.splice(s,3),s-=3,mh(g,{pending:!0,data:p,method:r.method,action:u},u,p))}}))}function ka(n){function s(D){return ac(D,n)}Ji!==null&&ac(Ji,n),ts!==null&&ac(ts,n),es!==null&&ac(es,n),Jr.forEach(s),to.forEach(s);for(var r=0;r<ns.length;r++){var u=ns[r];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ns.length&&(r=ns[0],r.blockedOn===null);)qy(r),r.blockedOn===null&&ns.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(u=0;u<r.length;u+=3){var p=r[u],g=r[u+1],v=p[ze]||null;if(typeof g=="function")v||Xy(r);else if(v){var T=null;if(g&&g.hasAttribute("formAction")){if(p=g,v=g[ze]||null)T=v.formAction;else if(gd(p)!==null)continue}else T=v.action;typeof T=="function"?r[u+1]=T:(r.splice(u,3),u-=3),Xy(r)}}}function Yy(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(v){return p=v})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(r,20)}function r(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(r,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function bd(n){this._internalRoot=n}oc.prototype.render=bd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var r=s.current,u=ln();Uy(r,u,n,s,null,null)},oc.prototype.unmount=bd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Uy(n.current,2,null,n,null,null),zl(),s[Ws]=null}};function oc(n){this._internalRoot=n}oc.prototype.unstable_scheduleHydration=function(n){if(n){var s=sp();n={blockedOn:null,target:n,priority:s};for(var r=0;r<ns.length&&s!==0&&s<ns[r].priority;r++);ns.splice(r,0,n),r===0&&qy(n)}};var Wy=t.version;if(Wy!=="19.2.4")throw Error(i(527,Wy,"19.2.4"));H.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?m(n):null,n=n===null?null:n.stateNode,n};var qS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{ur=lc.inject(qS),Je=lc}catch{}}return io.createRoot=function(n,s){if(!a(n))throw Error(i(299));var r=!1,u="",p=ng,g=ig,v=sg;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=By(n,1,!1,null,null,r,u,null,p,g,v,Yy),n[Ws]=s.current,Jh(n),new bd(s)},io.hydrateRoot=function(n,s,r){if(!a(n))throw Error(i(299));var u=!1,p="",g=ng,v=ig,T=sg,D=null;return r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(p=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(v=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.formState!==void 0&&(D=r.formState)),s=By(n,1,!0,s,r??null,u,p,D,g,v,T,Yy),s.context=jy(null),r=s.current,u=ln(),u=lu(u),p=zi(u),p.callback=null,Hi(r,p,u),r=u,s.current.lanes=r,dr(s,r),Un(s),n[Ws]=s.current,Jh(n),new oc(s)},io.version="19.2.4",io}var ob;function e_(){if(ob)return Sd.exports;ob=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(t){console.error(t)}}return o(),Sd.exports=t_(),Sd.exports}var n_=e_();const i_=E0(n_);var lb="popstate";function s_(o={}){function t(i,a){let{pathname:l,search:c,hash:h}=i.location;return $d("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Ao(a)}return r_(t,e,null,o)}function oe(o,t){if(o===!1||o===null||typeof o>"u")throw new Error(t)}function Wn(o,t){if(!o){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function a_(){return Math.random().toString(36).substring(2,10)}function cb(o,t){return{usr:o.state,key:o.key,idx:t}}function $d(o,t,e=null,i){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof t=="string"?Za(t):t,state:e,key:t&&t.key||i||a_()}}function Ao({pathname:o="/",search:t="",hash:e=""}){return t&&t!=="?"&&(o+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(o+=e.charAt(0)==="#"?e:"#"+e),o}function Za(o){let t={};if(o){let e=o.indexOf("#");e>=0&&(t.hash=o.substring(e),o=o.substring(0,e));let i=o.indexOf("?");i>=0&&(t.search=o.substring(i),o=o.substring(0,i)),o&&(t.pathname=o)}return t}function r_(o,t,e,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,h="POP",d=null,f=m();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function m(){return(c.state||{idx:null}).idx}function y(){h="POP";let x=m(),E=x==null?null:x-f;f=x,d&&d({action:h,location:S.location,delta:E})}function b(x,E){h="PUSH";let C=$d(S.location,x,E);f=m()+1;let R=cb(C,f),k=S.createHref(C);try{c.pushState(R,"",k)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;a.location.assign(k)}l&&d&&d({action:h,location:S.location,delta:1})}function A(x,E){h="REPLACE";let C=$d(S.location,x,E);f=m();let R=cb(C,f),k=S.createHref(C);c.replaceState(R,"",k),l&&d&&d({action:h,location:S.location,delta:0})}function _(x){return o_(x)}let S={get action(){return h},get location(){return o(a,c)},listen(x){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(lb,y),d=x,()=>{a.removeEventListener(lb,y),d=null}},createHref(x){return t(a,x)},createURL:_,encodeLocation(x){let E=_(x);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:b,replace:A,go(x){return c.go(x)}};return S}function o_(o,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),oe(e,"No window.location.(origin|href) available to create URL");let i=typeof o=="string"?o:Ao(o);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function T0(o,t,e="/"){return l_(o,t,e,!1)}function l_(o,t,e,i){let a=typeof t=="string"?Za(t):t,l=xi(a.pathname||"/",e);if(l==null)return null;let c=C0(o);c_(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=A_(l);h=b_(c[d],f,i)}return h}function C0(o,t=[],e=[],i="",a=!1){let l=(c,h,d=a,f)=>{let m={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&d)return;oe(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let y=_i([i,m.relativePath]),b=e.concat(m);c.children&&c.children.length>0&&(oe(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),C0(c.children,t,b,y,d)),!(c.path==null&&!c.index)&&t.push({path:y,score:g_(y,c.index),routesMeta:b})};return o.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let d of R0(c.path))l(c,h,!0,d)}),t}function R0(o){let t=o.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=R0(i.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...c),h.map(d=>o.startsWith("/")&&d===""?"/":d)}function c_(o){o.sort((t,e)=>t.score!==e.score?e.score-t.score:y_(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var u_=/^:[\w-]+$/,h_=3,d_=2,f_=1,p_=10,m_=-2,ub=o=>o==="*";function g_(o,t){let e=o.split("/"),i=e.length;return e.some(ub)&&(i+=m_),t&&(i+=d_),e.filter(a=>!ub(a)).reduce((a,l)=>a+(u_.test(l)?h_:l===""?f_:p_),i)}function y_(o,t){return o.length===t.length&&o.slice(0,-1).every((i,a)=>i===t[a])?o[o.length-1]-t[t.length-1]:0}function b_(o,t,e=!1){let{routesMeta:i}=o,a={},l="/",c=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,m=l==="/"?t:t.slice(l.length)||"/",y=Dc({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},m),b=d.route;if(!y&&f&&e&&!i[i.length-1].route.index&&(y=Dc({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},m)),!y)return null;Object.assign(a,y.params),c.push({params:a,pathname:_i([l,y.pathname]),pathnameBase:x_(_i([l,y.pathnameBase])),route:b}),y.pathnameBase!=="/"&&(l=_i([l,y.pathnameBase]))}return c}function Dc(o,t){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[e,i]=v_(o.path,o.caseSensitive,o.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((f,{paramName:m,isOptional:y},b)=>{if(m==="*"){let _=h[b]||"";c=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const A=h[b];return y&&!A?f[m]=void 0:f[m]=(A||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:o}}function v_(o,t=!1,e=!0){Wn(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let i=[],a="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return o.endsWith("*")?(i.push({paramName:"*"}),a+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":o!==""&&o!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function A_(o){try{return o.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Wn(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),o}}function xi(o,t){if(t==="/")return o;if(!o.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=o.charAt(e);return i&&i!=="/"?null:o.slice(e)||"/"}var w_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function S_(o,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof o=="string"?Za(o):o,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=hb(e.substring(1),"/"):l=hb(e,t)):l=t,{pathname:l,search:E_(i),hash:T_(a)}}function hb(o,t){let e=t.replace(/\/+$/,"").split("/");return o.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Td(o,t,e,i){return`Cannot include a '${o}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function __(o){return o.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function D0(o){let t=__(o);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function M0(o,t,e,i=!1){let a;typeof o=="string"?a=Za(o):(a={...o},oe(!a.pathname||!a.pathname.includes("?"),Td("?","pathname","search",a)),oe(!a.pathname||!a.pathname.includes("#"),Td("#","pathname","hash",a)),oe(!a.search||!a.search.includes("#"),Td("#","search","hash",a)));let l=o===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=e;else{let y=t.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),y-=1;a.pathname=b.join("/")}h=y>=0?t[y]:"/"}let d=S_(a,h),f=c&&c!=="/"&&c.endsWith("/"),m=(l||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||m)&&(d.pathname+="/"),d}var _i=o=>o.join("/").replace(/\/\/+/g,"/"),x_=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),E_=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,T_=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o,C_=class{constructor(o,t,e,i=!1){this.status=o,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function R_(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}function D_(o){return o.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var N0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function k0(o,t){let e=o;if(typeof e!="string"||!w_.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,a=!1;if(N0)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),h=xi(c.pathname,t);c.origin===l.origin&&h!=null?e=h+c.search+c.hash:a=!0}catch{Wn(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var O0=["POST","PUT","PATCH","DELETE"];new Set(O0);var M_=["GET",...O0];new Set(M_);var Ja=j.createContext(null);Ja.displayName="DataRouter";var Vc=j.createContext(null);Vc.displayName="DataRouterState";var N_=j.createContext(!1),L0=j.createContext({isTransitioning:!1});L0.displayName="ViewTransition";var k_=j.createContext(new Map);k_.displayName="Fetchers";var O_=j.createContext(null);O_.displayName="Await";var En=j.createContext(null);En.displayName="Navigation";var Do=j.createContext(null);Do.displayName="Location";var Kn=j.createContext({outlet:null,matches:[],isDataRoute:!1});Kn.displayName="Route";var bf=j.createContext(null);bf.displayName="RouteError";var I0="REACT_ROUTER_ERROR",L_="REDIRECT",I_="ROUTE_ERROR_RESPONSE";function P_(o){if(o.startsWith(`${I0}:${L_}:{`))try{let t=JSON.parse(o.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function B_(o){if(o.startsWith(`${I0}:${I_}:{`))try{let t=JSON.parse(o.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new C_(t.status,t.statusText,t.data)}catch{}}function j_(o,{relative:t}={}){oe(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=j.useContext(En),{hash:a,pathname:l,search:c}=No(o,{relative:t}),h=l;return e!=="/"&&(h=l==="/"?e:_i([e,l])),i.createHref({pathname:h,search:c,hash:a})}function Mo(){return j.useContext(Do)!=null}function Mi(){return oe(Mo(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Do).location}var P0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function B0(o){j.useContext(En).static||j.useLayoutEffect(o)}function Gc(){let{isDataRoute:o}=j.useContext(Kn);return o?Q_():U_()}function U_(){oe(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let o=j.useContext(Ja),{basename:t,navigator:e}=j.useContext(En),{matches:i}=j.useContext(Kn),{pathname:a}=Mi(),l=JSON.stringify(D0(i)),c=j.useRef(!1);return B0(()=>{c.current=!0}),j.useCallback((d,f={})=>{if(Wn(c.current,P0),!c.current)return;if(typeof d=="number"){e.go(d);return}let m=M0(d,JSON.parse(l),a,f.relative==="path");o==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:_i([t,m.pathname])),(f.replace?e.replace:e.push)(m,f.state,f)},[t,e,l,a,o])}j.createContext(null);function j0(){let{matches:o}=j.useContext(Kn),t=o[o.length-1];return t?t.params:{}}function No(o,{relative:t}={}){let{matches:e}=j.useContext(Kn),{pathname:i}=Mi(),a=JSON.stringify(D0(e));return j.useMemo(()=>M0(o,JSON.parse(a),i,t==="path"),[o,a,i,t])}function F_(o,t){return U0(o,t)}function U0(o,t,e,i,a){oe(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(En),{matches:c}=j.useContext(Kn),h=c[c.length-1],d=h?h.params:{},f=h?h.pathname:"/",m=h?h.pathnameBase:"/",y=h&&h.route;{let C=y&&y.path||"";z0(f,!y||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let b=Mi(),A;if(t){let C=typeof t=="string"?Za(t):t;oe(m==="/"||C.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${C.pathname}" was given in the \`location\` prop.`),A=C}else A=b;let _=A.pathname||"/",S=_;if(m!=="/"){let C=m.replace(/^\//,"").split("/");S="/"+_.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=T0(o,{pathname:S});Wn(y||x!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Wn(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=q_(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},d,C.params),pathname:_i([m,l.encodeLocation?l.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?m:_i([m,l.encodeLocation?l.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),c,e,i,a);return t&&E?j.createElement(Do.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},E):E}function z_(){let o=K_(),t=R_(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),e=o instanceof Error?o.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",o),c=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),e?j.createElement("pre",{style:a},e):null,c)}var H_=j.createElement(z_,null),F0=class extends j.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,t){return t.location!==o.location||t.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:t.error,location:t.location,revalidation:o.revalidation||t.revalidation}}componentDidCatch(o,t){this.props.onError?this.props.onError(o,t):console.error("React Router caught the following error during render",o)}render(){let o=this.state.error;if(this.context&&typeof o=="object"&&o&&"digest"in o&&typeof o.digest=="string"){const e=B_(o.digest);e&&(o=e)}let t=o!==void 0?j.createElement(Kn.Provider,{value:this.props.routeContext},j.createElement(bf.Provider,{value:o,children:this.props.component})):this.props.children;return this.context?j.createElement(V_,{error:o},t):t}};F0.contextType=N_;var Cd=new WeakMap;function V_({children:o,error:t}){let{basename:e}=j.useContext(En);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=P_(t.digest);if(i){let a=Cd.get(t);if(a)throw a;let l=k0(i.location,e);if(N0&&!Cd.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Cd.set(t,c),c}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return o}function G_({routeContext:o,match:t,children:e}){let i=j.useContext(Ja);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Kn.Provider,{value:o},e)}function q_(o,t=[],e=null,i=null,a=null){if(o==null){if(!e)return null;if(e.errors)o=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)o=e.matches;else return null}let l=o,c=e?.errors;if(c!=null){let m=l.findIndex(y=>y.route.id&&c?.[y.route.id]!==void 0);oe(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,m+1))}let h=!1,d=-1;if(e)for(let m=0;m<l.length;m++){let y=l[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=m),y.route.id){let{loaderData:b,errors:A}=e,_=y.route.loader&&!b.hasOwnProperty(y.route.id)&&(!A||A[y.route.id]===void 0);if(y.route.lazy||_){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let f=e&&i?(m,y)=>{i(m,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:D_(e.matches),errorInfo:y})}:void 0;return l.reduceRight((m,y,b)=>{let A,_=!1,S=null,x=null;e&&(A=c&&y.route.id?c[y.route.id]:void 0,S=y.route.errorElement||H_,h&&(d<0&&b===0?(z0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,x=null):d===b&&(_=!0,x=y.route.hydrateFallbackElement||null)));let E=t.concat(l.slice(0,b+1)),C=()=>{let R;return A?R=S:_?R=x:y.route.Component?R=j.createElement(y.route.Component,null):y.route.element?R=y.route.element:R=m,j.createElement(G_,{match:y,routeContext:{outlet:m,matches:E,isDataRoute:e!=null},children:R})};return e&&(y.route.ErrorBoundary||y.route.errorElement||b===0)?j.createElement(F0,{location:e.location,revalidation:e.revalidation,component:S,error:A,children:C(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):C()},null)}function vf(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $_(o){let t=j.useContext(Ja);return oe(t,vf(o)),t}function X_(o){let t=j.useContext(Vc);return oe(t,vf(o)),t}function Y_(o){let t=j.useContext(Kn);return oe(t,vf(o)),t}function Af(o){let t=Y_(o),e=t.matches[t.matches.length-1];return oe(e.route.id,`${o} can only be used on routes that contain a unique "id"`),e.route.id}function W_(){return Af("useRouteId")}function K_(){let o=j.useContext(bf),t=X_("useRouteError"),e=Af("useRouteError");return o!==void 0?o:t.errors?.[e]}function Q_(){let{router:o}=$_("useNavigate"),t=Af("useNavigate"),e=j.useRef(!1);return B0(()=>{e.current=!0}),j.useCallback(async(a,l={})=>{Wn(e.current,P0),e.current&&(typeof a=="number"?await o.navigate(a):await o.navigate(a,{fromRouteId:t,...l}))},[o,t])}var db={};function z0(o,t,e){!t&&!db[o]&&(db[o]=!0,Wn(!1,e))}j.memo(Z_);function Z_({routes:o,future:t,state:e,onError:i}){return U0(o,void 0,e,i,t)}function Mn(o){oe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function J_({basename:o="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){oe(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=o.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[h,a,l,c]);typeof e=="string"&&(e=Za(e));let{pathname:f="/",search:m="",hash:y="",state:b=null,key:A="default"}=e,_=j.useMemo(()=>{let S=xi(f,h);return S==null?null:{location:{pathname:S,search:m,hash:y,state:b,key:A},navigationType:i}},[h,f,m,y,b,A,i]);return Wn(_!=null,`<Router basename="${h}"> is not able to match the URL "${f}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:j.createElement(En.Provider,{value:d},j.createElement(Do.Provider,{children:t,value:_}))}function tx({children:o,location:t}){return F_(Xd(o),t)}function Xd(o,t=[]){let e=[];return j.Children.forEach(o,(i,a)=>{if(!j.isValidElement(i))return;let l=[...t,a];if(i.type===j.Fragment){e.push.apply(e,Xd(i.props.children,l));return}oe(i.type===Mn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),oe(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Xd(i.props.children,l)),e.push(c)}),e}var wc="get",Sc="application/x-www-form-urlencoded";function qc(o){return typeof HTMLElement<"u"&&o instanceof HTMLElement}function ex(o){return qc(o)&&o.tagName.toLowerCase()==="button"}function nx(o){return qc(o)&&o.tagName.toLowerCase()==="form"}function ix(o){return qc(o)&&o.tagName.toLowerCase()==="input"}function sx(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function ax(o,t){return o.button===0&&(!t||t==="_self")&&!sx(o)}var cc=null;function rx(){if(cc===null)try{new FormData(document.createElement("form"),0),cc=!1}catch{cc=!0}return cc}var ox=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rd(o){return o!=null&&!ox.has(o)?(Wn(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sc}"`),null):o}function lx(o,t){let e,i,a,l,c;if(nx(o)){let h=o.getAttribute("action");i=h?xi(h,t):null,e=o.getAttribute("method")||wc,a=Rd(o.getAttribute("enctype"))||Sc,l=new FormData(o)}else if(ex(o)||ix(o)&&(o.type==="submit"||o.type==="image")){let h=o.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=o.getAttribute("formaction")||h.getAttribute("action");if(i=d?xi(d,t):null,e=o.getAttribute("formmethod")||h.getAttribute("method")||wc,a=Rd(o.getAttribute("formenctype"))||Rd(h.getAttribute("enctype"))||Sc,l=new FormData(h,o),!rx()){let{name:f,type:m,value:y}=o;if(m==="image"){let b=f?`${f}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else f&&l.append(f,y)}}else{if(qc(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=wc,i=null,a=Sc,c=o}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wf(o,t){if(o===!1||o===null||typeof o>"u")throw new Error(t)}function cx(o,t,e,i){let a=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&xi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function ux(o,t){if(o.id in t)return t[o.id];try{let e=await import(o.module);return t[o.id]=e,e}catch(e){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function hx(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function dx(o,t,e){let i=await Promise.all(o.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await ux(l,e);return c.links?c.links():[]}return[]}));return gx(i.flat(1).filter(hx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function fb(o,t,e,i,a,l){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,h=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,f)=>c(d,f)||h(d,f)):l==="data"?t.filter((d,f)=>{let m=i.routes[d.route.id];if(!m||!m.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let y=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(o,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function fx(o,t,{includeHydrateFallback:e}={}){return px(o.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function px(o){return[...new Set(o)]}function mx(o){let t={},e=Object.keys(o).sort();for(let i of e)t[i]=o[i];return t}function gx(o,t){let e=new Set;return new Set(t),o.reduce((i,a)=>{let l=JSON.stringify(mx(a));return e.has(l)||(e.add(l),i.push({key:l,link:a})),i},[])}function H0(){let o=j.useContext(Ja);return wf(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function yx(){let o=j.useContext(Vc);return wf(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var Sf=j.createContext(void 0);Sf.displayName="FrameworkContext";function V0(){let o=j.useContext(Sf);return wf(o,"You must render this element inside a <HydratedRouter> element"),o}function bx(o,t){let e=j.useContext(Sf),[i,a]=j.useState(!1),[l,c]=j.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:m,onTouchStart:y}=t,b=j.useRef(null);j.useEffect(()=>{if(o==="render"&&c(!0),o==="viewport"){let S=E=>{E.forEach(C=>{c(C.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return b.current&&x.observe(b.current),()=>{x.disconnect()}}},[o]),j.useEffect(()=>{if(i){let S=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(S)}}},[i]);let A=()=>{a(!0)},_=()=>{a(!1),c(!1)};return e?o!=="intent"?[l,b,{}]:[l,b,{onFocus:so(h,A),onBlur:so(d,_),onMouseEnter:so(f,A),onMouseLeave:so(m,_),onTouchStart:so(y,A)}]:[!1,b,{}]}function so(o,t){return e=>{o&&o(e),e.defaultPrevented||t(e)}}function vx({page:o,...t}){let{router:e}=H0(),i=j.useMemo(()=>T0(e.routes,o,e.basename),[e.routes,o,e.basename]);return i?j.createElement(wx,{page:o,matches:i,...t}):null}function Ax(o){let{manifest:t,routeModules:e}=V0(),[i,a]=j.useState([]);return j.useEffect(()=>{let l=!1;return dx(o,t,e).then(c=>{l||a(c)}),()=>{l=!0}},[o,t,e]),i}function wx({page:o,matches:t,...e}){let i=Mi(),{future:a,manifest:l,routeModules:c}=V0(),{basename:h}=H0(),{loaderData:d,matches:f}=yx(),m=j.useMemo(()=>fb(o,t,f,l,i,"data"),[o,t,f,l,i]),y=j.useMemo(()=>fb(o,t,f,l,i,"assets"),[o,t,f,l,i]),b=j.useMemo(()=>{if(o===i.pathname+i.search+i.hash)return[];let S=new Set,x=!1;if(t.forEach(C=>{let R=l.routes[C.route.id];!R||!R.hasLoader||(!m.some(k=>k.route.id===C.route.id)&&C.route.id in d&&c[C.route.id]?.shouldRevalidate||R.hasClientLoader?x=!0:S.add(C.route.id))}),S.size===0)return[];let E=cx(o,h,a.unstable_trailingSlashAwareDataRequests,"data");return x&&S.size>0&&E.searchParams.set("_routes",t.filter(C=>S.has(C.route.id)).map(C=>C.route.id).join(",")),[E.pathname+E.search]},[h,a.unstable_trailingSlashAwareDataRequests,d,i,l,m,t,o,c]),A=j.useMemo(()=>fx(y,l),[y,l]),_=Ax(y);return j.createElement(j.Fragment,null,b.map(S=>j.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...e})),A.map(S=>j.createElement("link",{key:S,rel:"modulepreload",href:S,...e})),_.map(({key:S,link:x})=>j.createElement("link",{key:S,nonce:e.nonce,...x,crossOrigin:x.crossOrigin??e.crossOrigin})))}function Sx(...o){return t=>{o.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var _x=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_x&&(window.__reactRouterVersion="7.13.0")}catch{}function xx({basename:o,children:t,unstable_useTransitions:e,window:i}){let a=j.useRef();a.current==null&&(a.current=s_({window:i,v5Compat:!0}));let l=a.current,[c,h]=j.useState({action:l.action,location:l.location}),d=j.useCallback(f=>{e===!1?h(f):j.startTransition(()=>h(f))},[e]);return j.useLayoutEffect(()=>l.listen(d),[l,d]),j.createElement(J_,{basename:o,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var G0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=j.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:h,target:d,to:f,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},_){let{basename:S,unstable_useTransitions:x}=j.useContext(En),E=typeof f=="string"&&G0.test(f),C=k0(f,S);f=C.to;let R=j_(f,{relative:a}),[k,O,I]=bx(i,A),B=Rx(f,{replace:c,state:h,target:d,preventScrollReset:m,relative:a,viewTransition:y,unstable_defaultShouldRevalidate:b,unstable_useTransitions:x});function Y(tt){t&&t(tt),tt.defaultPrevented||B(tt)}let K=j.createElement("a",{...A,...I,href:C.absoluteURL||R,onClick:C.isExternal||l?t:Y,ref:Sx(_,O),target:d,"data-discover":!E&&e==="render"?"true":void 0});return k&&!E?j.createElement(j.Fragment,null,K,j.createElement(vx,{page:R})):K});Le.displayName="Link";var Ex=j.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:h,children:d,...f},m){let y=No(c,{relative:f.relative}),b=Mi(),A=j.useContext(Vc),{navigator:_,basename:S}=j.useContext(En),x=A!=null&&Ox(y)&&h===!0,E=_.encodeLocation?_.encodeLocation(y).pathname:y.pathname,C=b.pathname,R=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;e||(C=C.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&S&&(R=xi(R,S)||R);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let O=C===E||!a&&C.startsWith(E)&&C.charAt(k)==="/",I=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),B={isActive:O,isPending:I,isTransitioning:x},Y=O?t:void 0,K;typeof i=="function"?K=i(B):K=[i,O?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let tt=typeof l=="function"?l(B):l;return j.createElement(Le,{...f,"aria-current":Y,className:K,ref:m,style:tt,to:c,viewTransition:h},typeof d=="function"?d(B):d)});Ex.displayName="NavLink";var Tx=j.forwardRef(({discover:o="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:l,method:c=wc,action:h,onSubmit:d,relative:f,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:b,...A},_)=>{let{unstable_useTransitions:S}=j.useContext(En),x=Nx(),E=kx(h,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",R=typeof h=="string"&&G0.test(h),k=O=>{if(d&&d(O),O.defaultPrevented)return;O.preventDefault();let I=O.nativeEvent.submitter,B=I?.getAttribute("formmethod")||c,Y=()=>x(I||O.currentTarget,{fetcherKey:t,method:B,navigate:e,replace:a,state:l,relative:f,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:b});S&&e!==!1?j.startTransition(()=>Y()):Y()};return j.createElement("form",{ref:_,method:C,action:E,onSubmit:i?d:k,...A,"data-discover":!R&&o==="render"?"true":void 0})});Tx.displayName="Form";function Cx(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(o){let t=j.useContext(Ja);return oe(t,Cx(o)),t}function Rx(o,{target:t,replace:e,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let f=Gc(),m=Mi(),y=No(o,{relative:l});return j.useCallback(b=>{if(ax(b,t)){b.preventDefault();let A=e!==void 0?e:Ao(m)===Ao(y),_=()=>f(o,{replace:A,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?j.startTransition(()=>_()):_()}},[m,f,y,e,i,t,o,a,l,c,h,d])}var Dx=0,Mx=()=>`__${String(++Dx)}__`;function Nx(){let{router:o}=q0("useSubmit"),{basename:t}=j.useContext(En),e=W_(),i=o.fetch,a=o.navigate;return j.useCallback(async(l,c={})=>{let{action:h,method:d,encType:f,formData:m,body:y}=lx(l,t);if(c.navigate===!1){let b=c.fetcherKey||Mx();await i(b,e,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:m,body:y,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:m,body:y,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,t,e])}function kx(o,{relative:t}={}){let{basename:e}=j.useContext(En),i=j.useContext(Kn);oe(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...No(o||".",{relative:t})},c=Mi();if(o==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(m=>m==="")){h.delete("index"),d.filter(y=>y).forEach(y=>h.append("index",y));let m=h.toString();l.search=m?`?${m}`:""}}return(!o||o===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:_i([e,l.pathname])),Ao(l)}function Ox(o,{relative:t}={}){let e=j.useContext(L0);oe(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=q0("useViewTransitionState"),a=No(o,{relative:t});if(!e.isTransitioning)return!1;let l=xi(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=xi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return Dc(a.pathname,c)!=null||Dc(a.pathname,l)!=null}const $0="data:image/svg+xml,%3csvg%20width='630'%20height='718'%20viewBox='0%200%20630%20718'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M507.588%20467.968V382.194L437.065%20422.437V508.279L507.588%20467.968Z'%20fill='%2315D6E3'/%3e%3cpath%20d='M507.588%20247.995L434.559%20206.201L315.313%20274.417L196.068%20206.201L123.038%20247.995V323.966L244.293%20393.349V537.261L315.313%20577.888L386.334%20537.261V393.349L507.588%20323.966V247.995Z'%20fill='%233A36FF'/%3e%3cpath%20d='M630.006%20254.748V178.525L557.185%20136.592L486.298%20177.354L559.119%20219.288V295.511L630.006%20254.748Z'%20fill='%233A36FF'/%3e%3cpath%20d='M71.5074%20295.511V219.288L144.328%20177.354L73.4419%20136.592L0.620972%20178.525V254.748L71.5074%20295.511Z'%20fill='%233A36FF'/%3e%3cpath%20d='M123.038%20467.968L193.561%20508.279V422.437L123.038%20382.194V467.968Z'%20fill='%233998FF'/%3e%3cpath%20d='M386.502%20594.962L315.313%20635.677L244.125%20594.962V676.392L315.313%20717.107L386.502%20676.392V594.962Z'%20fill='%233A36FF'/%3e%3cpath%20d='M383.84%20177.307L315.313%20137.905L246.786%20177.307L315.313%20216.708L383.84%20177.307Z'%20fill='%238A88FF'/%3e%3cpath%20d='M558.695%20353.18V496.979L437.065%20566.307V647.497L630.006%20537.574V312.585L558.695%20353.18Z'%20fill='%2315D7E3'/%3e%3cpath%20d='M193.561%20566.307L71.931%20496.979V353.18L0.620972%20312.585V537.574L193.561%20647.497V566.307Z'%20fill='%233998FF'/%3e%3cpath%20d='M195.686%20148.412L315.313%2080.7477L434.94%20148.412L506.258%20108.072L315.313%200L124.369%20108.072L195.686%20148.412Z'%20fill='%238A88FF'/%3e%3c/svg%3e",Lx=["Northwind Legal","Acme Ventures","Solaris Health","Beacon Realty","Atlas Finance","Bluebird Energy"],Ix=[{label:"Docs decoded",value:"42k+"},{label:"Average time saved",value:"3.4 hrs"},{label:"Risk flags identified",value:"128k+"}],Px=[{title:"Upload or open a PDF",description:"Drop in a contract, policy, or report. No setup required."},{title:"Decode with AI",description:"We translate the text, highlight obligations, and surface risks."},{title:"Act with clarity",description:"Export notes or send for signature only when you are ready."}],Bx=[{title:"Plain-language summaries",description:"Every section is rewritten into clear, actionable language."},{title:"Risk and obligation flags",description:"Spot penalties, expiry traps, and one-sided clauses fast."},{title:"Side-by-side evidence",description:"See the original text next to the AI explanation."},{title:"Shareable decision reports",description:"Create a clean, board-ready summary in one click."},{title:"Structured highlights",description:"Tag sections as financial, legal, or operational."},{title:"Secure by design",description:"Free mode never stores files. Pro adds private vaults."}],jx=[{title:"Procurement teams",description:"Speed up vendor reviews without missing hidden liabilities."},{title:"Startup founders",description:"Understand term sheets and SaaS agreements fast."},{title:"HR & people ops",description:"Review contracts, handbooks, and compliance updates with confidence."},{title:"Property managers",description:"Decode leases, maintenance agreements, and building policies."}],Ux=[{name:"Starter",description:"For occasional checks and quick clarity.",monthlyPrice:0,annualPrice:0,cta:"Start free",highlights:["3 document decodes / month","No storage (privacy-first)","Basic risk flags"]},{name:"Pro",description:"For teams reviewing docs weekly.",monthlyPrice:29,annualPrice:24,cta:"Upgrade to Pro",isPopular:!0,highlights:["Unlimited document decodes","Private doc vaults","Advanced risk mapping","Shareable reports"]},{name:"Enterprise",description:"For regulated or high-volume workflows.",monthlyPrice:79,annualPrice:65,cta:"Talk to sales",highlights:["Custom AI workflows","Dedicated security review","SSO & audit logs","Priority support"]}],Fx=[{question:"Can I use DecoDocs without uploading a file?",answer:"Yes. The free workflow lets you open a PDF locally with no storage."},{question:"Do you replace legal advice?",answer:"No. We provide clarity, risk highlighting, and summaries to speed review."},{question:"What happens to my documents?",answer:"Free mode does not store files. Pro stores documents in a private vault you control."},{question:"Can I export my insights?",answer:"Yes. Pro exports a summary report and key obligations list."}],Dd={product:[{label:"How it works",href:"#how-it-works"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",href:"#pricing"}],company:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"}],legal:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"}]},zx="0.1.0+e329d4d-2026-01-31T23:53:11.377Z",Hx=()=>w.jsx("footer",{className:"border-t border-slate-200 bg-white px-6 py-12",children:w.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-10 md:grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr]",children:[w.jsxs("div",{className:"flex flex-col gap-4",children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("img",{src:$0,alt:"DecoDocs",className:"h-10 w-10"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-base font-semibold text-slate-900",children:"DecoDocs"}),w.jsx("p",{className:"text-xs text-slate-500",children:"Understand documents before you sign"})]})]}),w.jsx("p",{className:"text-sm text-slate-600",children:"Privacy-first document understanding by Snap Sign Pty Ltd."}),w.jsxs("p",{className:"text-xs text-slate-500",children:[" ",new Date().getFullYear()," Snap Sign Pty Ltd. All rights reserved."]}),w.jsxs("p",{className:"text-xs text-slate-400",children:["Version: ",zx]})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Product"}),w.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Dd.product.map(o=>w.jsx("li",{className:"m-0",children:w.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:o.href,children:o.label})},o.label))})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Company"}),w.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Dd.company.map(o=>w.jsx("li",{className:"m-0",children:w.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:o.href,children:o.label})},o.label))})]}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Legal"}),w.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Dd.legal.map(o=>w.jsx("li",{className:"m-0",children:w.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:o.href,children:o.label})},o.label))})]})]})}),$c=({onOpenPdf:o,children:t})=>w.jsx("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900",children:w.jsxs("div",{className:"relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[w.jsx("div",{className:"absolute -top-32 -right-20 h-72 w-72 rounded-full bg-[#d8e6ff] blur-3xl opacity-60 animate-float-slow"}),w.jsx("div",{className:"absolute top-40 -left-24 h-72 w-72 rounded-full bg-[#fde4c7] blur-3xl opacity-50 animate-float-slow"})]}),w.jsx("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4",children:[w.jsxs(Le,{to:"/",className:"flex items-center gap-3 text-lg font-semibold",children:[w.jsx("img",{src:$0,alt:"DecoDocs",className:"h-9 w-9"}),"DecoDocs"]}),w.jsxs("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:[w.jsx("a",{className:"hover:text-slate-900 transition",href:"#how-it-works",children:"How it works"}),w.jsx("a",{className:"hover:text-slate-900 transition",href:"#features",children:"Features"}),w.jsx("a",{className:"hover:text-slate-900 transition",href:"#use-cases",children:"Use cases"}),w.jsx("a",{className:"hover:text-slate-900 transition",href:"#pricing",children:"Pricing"})]}),w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(Le,{to:"/view",className:"hidden rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:border-slate-300 md:inline-flex",children:"Launch app"}),w.jsx("button",{type:"button",onClick:o,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:-translate-y-0.5",children:"Open PDF"})]})]})}),w.jsx("main",{className:"relative z-10",children:t}),w.jsx(Hx,{})]})}),Vx=({onOpenPdf:o})=>w.jsx("section",{className:"px-6 pt-20 pb-16",children:w.jsxs("div",{className:"mx-auto grid w-full max-w-6xl items-center gap-12 lg:grid-cols-[1.1fr_0.9fr]",children:[w.jsxs("div",{className:"flex flex-col gap-6",children:[w.jsx("span",{className:"w-fit rounded-full border border-slate-200 bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Modern document intelligence"}),w.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-slate-900 md:text-5xl",children:"Decode documents before you sign them."}),w.jsx("p",{className:"text-lg text-slate-600",children:"DecoDocs turns dense PDFs into clear decisions with AI summaries, risk flags, and evidence-backed explanations."}),w.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[w.jsx("button",{type:"button",onClick:o,className:"rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-slate-900/25 transition hover:-translate-y-0.5",children:"Open a PDF"}),w.jsx(Le,{to:"/view",className:"rounded-full border border-slate-300 bg-white px-6 py-3 text-sm font-semibold text-slate-700 shadow-sm",children:"View the app"})]}),w.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Free mode never stores files"]}),w.jsxs("span",{className:"flex items-center gap-2",children:[w.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-900"}),"Pro adds private vaults"]})]})]}),w.jsxs("div",{className:"relative",children:[w.jsx("div",{className:"absolute -left-6 top-6 h-24 w-24 rounded-2xl bg-[#fbd1b7] opacity-70"}),w.jsxs("div",{className:"relative rounded-3xl border border-white/60 bg-white/90 p-6 shadow-2xl shadow-slate-900/10",children:[w.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[w.jsx("span",{children:"Contract Review"}),w.jsx("span",{children:"12 pages"})]}),w.jsxs("div",{className:"mt-6 space-y-4",children:[w.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:w.jsxs("p",{className:"text-sm text-slate-800",children:[w.jsx("span",{className:"font-semibold",children:"Risk flagged:"})," Termination clause requires 90-day notice and carries a 3x fee."]})}),w.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white p-4",children:w.jsx("p",{className:"text-sm text-slate-600",children:"Plain language: You must give three months notice or pay a penalty equal to three months of fees."})}),w.jsx("div",{className:"rounded-2xl bg-slate-900 p-4 text-white",children:w.jsx("p",{className:"text-sm",children:"Suggested action: renegotiate the termination period or cap the penalty."})})]}),w.jsxs("div",{className:"mt-6 flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-3 text-xs text-slate-500",children:[w.jsx("span",{children:"AI decode complete"}),w.jsx("span",{className:"font-semibold text-slate-900",children:"Ready to review"})]})]})]})]})}),tr=({eyebrow:o,title:t,description:e,align:i="center"})=>{const a=i==="left"?"items-start text-left":"items-center text-center";return w.jsxs("div",{className:`flex flex-col gap-3 ${a}`,children:[o?w.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:o}):null,w.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:t}),e?w.jsx("p",{className:"text-base md:text-lg text-slate-600 max-w-2xl",children:e}):null]})},Gx=()=>w.jsx("section",{className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsx(tr,{eyebrow:"Trusted teams",title:"Teams use DecoDocs to review faster",description:"From startups to procurement teams, we help busy leaders move faster without missing critical terms."}),w.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Ix.map(o=>w.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-lg shadow-slate-900/5",children:[w.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:o.value}),w.jsx("p",{className:"mt-2 text-sm text-slate-500",children:o.label})]},o.label))}),w.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-5 text-xs uppercase tracking-[0.2em] text-slate-400",children:Lx.map(o=>w.jsx("span",{children:o},o))})]})}),qx=()=>w.jsx("section",{id:"how-it-works",className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsx(tr,{eyebrow:"How it works",title:"Three steps to clarity",description:"No onboarding, no templates. Drop in a document and get structured insights within seconds.",align:"left"}),w.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:Px.map((o,t)=>w.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",t+1]}),w.jsx("span",{className:"text-xl",children:String(t+1).padStart(2,"0")})]}),w.jsx("h3",{className:"mt-6 text-xl font-semibold text-slate-900",children:o.title}),w.jsx("p",{className:"mt-3 text-sm text-slate-600",children:o.description})]},o.title))})]})}),$x=()=>w.jsx("section",{id:"features",className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsx(tr,{eyebrow:"Product",title:"Every insight you need to move faster",description:"Built for modern teams that need clarity, speed, and secure workflows."}),w.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Bx.map(o=>w.jsxs("div",{className:"group rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5 transition hover:-translate-y-1",children:[w.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white",children:w.jsx("span",{className:"text-xs font-semibold",children:"AI"})}),w.jsx("h3",{className:"mt-5 text-lg font-semibold text-slate-900",children:o.title}),w.jsx("p",{className:"mt-3 text-sm text-slate-600",children:o.description})]},o.title))})]})}),Xx=()=>w.jsx("section",{id:"use-cases",className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsx(tr,{eyebrow:"Use cases",title:"Built for high-stakes decisions",description:"DecoDocs supports every team that needs clean answers before signing or committing.",align:"left"}),w.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:jx.map((o,t)=>w.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[w.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[w.jsx("span",{children:"Use case"}),w.jsx("span",{children:String(t+1).padStart(2,"0")})]}),w.jsx("h3",{className:"mt-5 text-xl font-semibold text-slate-900",children:o.title}),w.jsx("p",{className:"mt-3 text-sm text-slate-600",children:o.description})]},o.title))})]})}),pb=o=>o===0?"Free":`$${o}`,Yx=()=>{const[o,t]=j.useState("monthly"),e=j.useMemo(()=>Ux.map(i=>{const a=o==="monthly"?i.monthlyPrice:i.annualPrice;return{...i,price:a,label:o==="monthly"?`${pb(a)}/mo`:`${pb(a)}/mo`}}),[o]);return w.jsx("section",{id:"pricing",className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsxs("div",{className:"flex flex-col items-center justify-between gap-6 md:flex-row",children:[w.jsx(tr,{eyebrow:"Pricing",title:"Simple plans that scale with your review workload",description:"Switch between monthly and annual billing. Annual plans include a discount for teams reviewing weekly.",align:"left"}),w.jsxs("div",{className:"flex items-center rounded-full border border-slate-200 bg-white p-1",children:[w.jsx("button",{type:"button",onClick:()=>t("monthly"),className:`rounded-full px-4 py-2 text-sm font-semibold ${o==="monthly"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Monthly"}),w.jsx("button",{type:"button",onClick:()=>t("annual"),className:`rounded-full px-4 py-2 text-sm font-semibold ${o==="annual"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Annual"})]})]}),w.jsx("div",{className:"grid gap-6 lg:grid-cols-3",children:e.map(i=>w.jsxs("div",{className:`relative flex h-full flex-col rounded-3xl border p-6 shadow-xl shadow-slate-900/5 ${i.isPopular?"border-slate-900 bg-slate-900 text-white":"border-slate-100 bg-white"}`,children:[i.isPopular?w.jsx("span",{className:"absolute -top-4 left-6 rounded-full bg-white px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-900",children:"Most popular"}):null,w.jsx("h3",{className:"text-xl font-semibold",children:i.name}),w.jsx("p",{className:`mt-2 text-sm ${i.isPopular?"text-white/80":"text-slate-500"}`,children:i.description}),w.jsxs("div",{className:"mt-6",children:[w.jsxs("div",{className:"flex items-end gap-2",children:[w.jsx("span",{className:"text-3xl font-semibold",children:i.label}),i.price>0?w.jsxs("span",{className:`text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:["billed ",o]}):null]}),o==="annual"&&i.price>0?w.jsx("p",{className:`mt-2 text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:"Save 20% with annual billing"}):null]}),w.jsx("ul",{className:"mt-6 space-y-3 text-sm",children:i.highlights.map(a=>w.jsxs("li",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-current"}),w.jsx("span",{children:a})]},a))}),w.jsx("button",{type:"button",className:`mt-8 w-full rounded-full px-4 py-3 text-sm font-semibold ${i.isPopular?"bg-white text-slate-900":"bg-slate-900 text-white"}`,children:i.cta})]},i.name))})]})})},Wx=()=>{const[o,t]=j.useState(0);return w.jsx("section",{className:"px-6 py-16",children:w.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[w.jsx(tr,{eyebrow:"FAQ",title:"Answers before you start",description:"Everything you need to know about privacy, storage, and how DecoDocs helps you decode faster.",align:"left"}),w.jsx("div",{className:"grid gap-4",children:Fx.map((e,i)=>{const a=o===i;return w.jsxs("button",{type:"button",onClick:()=>t(a?-1:i),className:"rounded-3xl border border-slate-100 bg-white p-6 text-left shadow-lg shadow-slate-900/5",children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsx("span",{className:"text-base font-semibold text-slate-900",children:e.question}),w.jsx("span",{className:"text-xl text-slate-500",children:a?"-":"+"})]}),a?w.jsx("p",{className:"mt-4 text-sm text-slate-600",children:e.answer}):null]},e.question)})})]})})},mb=()=>{const o=Gc(),t=j.useRef(null),e=()=>{t.current&&t.current.click()},i=a=>{const l=a.target.files?.[0];if(l){if(l.type!=="application/pdf"){alert("Please select a valid PDF file"),a.target.value="";return}window.gtag&&window.gtag("event","home_open_pdf_click",{event_category:"engagement",event_label:"landing_open_pdf"}),o("/view",{state:{document:{id:Date.now()+Math.random(),name:l.name,size:l.size,type:l.type,file:l}}}),a.target.value=""}};return w.jsxs($c,{onOpenPdf:e,children:[w.jsx("input",{ref:t,type:"file",accept:".pdf,application/pdf",onChange:i,style:{display:"none"}}),w.jsx(Vx,{onOpenPdf:e}),w.jsx(Gx,{}),w.jsx(qx,{}),w.jsx($x,{}),w.jsx(Xx,{}),w.jsx(Yx,{}),w.jsx(Wx,{})]})},Kx="modulepreload",Qx=function(o){return"/"+o},gb={},Zx=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){let d=function(f){return Promise.all(f.map(m=>Promise.resolve(m).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");a=d(e.map(f=>{if(f=Qx(f),f in gb)return;gb[f]=!0;const m=f.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":Kx,m||(b.as="script"),b.crossOrigin="",b.href=f,h&&b.setAttribute("nonce",h),document.head.appendChild(b),m)return new Promise((A,_)=>{b.addEventListener("load",A),b.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})},Jx=()=>{};var yb={};const X0=function(o){const t=[];let e=0;for(let i=0;i<o.length;i++){let a=o.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<o.length&&(o.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(o.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},tE=function(o){const t=[];let e=0,i=0;for(;e<o.length;){const a=o[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=o[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=o[e++],c=o[e++],h=o[e++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const l=o[e++],c=o[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},Y0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(o,t){if(!Array.isArray(o))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<o.length;a+=3){const l=o[a],c=a+1<o.length,h=c?o[a+1]:0,d=a+2<o.length,f=d?o[a+2]:0,m=l>>2,y=(l&3)<<4|h>>4;let b=(h&15)<<2|f>>6,A=f&63;d||(A=64,c||(b=64)),i.push(e[m],e[y],e[b],e[A])}return i.join("")},encodeString(o,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(o):this.encodeByteArray(X0(o),t)},decodeString(o,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(o):tE(this.decodeStringToByteArray(o,t))},decodeStringToByteArray(o,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<o.length;){const l=e[o.charAt(a++)],h=a<o.length?e[o.charAt(a)]:0;++a;const f=a<o.length?e[o.charAt(a)]:64;++a;const y=a<o.length?e[o.charAt(a)]:64;if(++a,l==null||h==null||f==null||y==null)throw new eE;const b=l<<2|h>>4;if(i.push(b),f!==64){const A=h<<4&240|f>>2;if(i.push(A),y!==64){const _=f<<6&192|y;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let o=0;o<this.ENCODED_VALS.length;o++)this.byteToCharMap_[o]=this.ENCODED_VALS.charAt(o),this.charToByteMap_[this.byteToCharMap_[o]]=o,this.byteToCharMapWebSafe_[o]=this.ENCODED_VALS_WEBSAFE.charAt(o),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[o]]=o,o>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(o)]=o,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(o)]=o)}}};class eE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nE=function(o){const t=X0(o);return Y0.encodeByteArray(t,!0)},W0=function(o){return nE(o).replace(/\./g,"")},K0=function(o){try{return Y0.decodeString(o,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function iE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const sE=()=>iE().__FIREBASE_DEFAULTS__,aE=()=>{if(typeof process>"u"||typeof yb>"u")return;const o=yb.__FIREBASE_DEFAULTS__;if(o)return JSON.parse(o)},rE=()=>{if(typeof document>"u")return;let o;try{o=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=o&&K0(o[1]);return t&&JSON.parse(t)},_f=()=>{try{return Jx()||sE()||aE()||rE()}catch(o){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${o}`);return}},Q0=o=>_f()?.emulatorHosts?.[o],oE=o=>{const t=Q0(o);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Z0=()=>_f()?.config,J0=o=>_f()?.[`_${o}`];class lE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function er(o){try{return(o.startsWith("http://")||o.startsWith("https://")?new URL(o).hostname:o).endsWith(".cloudworkstations.dev")}catch{return!1}}async function tv(o){return(await fetch(o,{credentials:"include"})).ok}const mo={};function cE(){const o={prod:[],emulator:[]};for(const t of Object.keys(mo))mo[t]?o.emulator.push(t):o.prod.push(t);return o}function uE(o){let t=document.getElementById(o),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",o),e=!0),{created:e,element:t}}let bb=!1;function ev(o,t){if(typeof window>"u"||typeof document>"u"||!er(window.location.host)||mo[o]===t||mo[o]||bb)return;mo[o]=t;function e(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=cE().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function h(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function f(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{bb=!0,c()},b}function m(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function y(){const b=uE(i),A=e("text"),_=document.getElementById(A)||document.createElement("span"),S=e("learnmore"),x=document.getElementById(S)||document.createElement("a"),E=e("preprendIcon"),C=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const R=b.element;h(R),m(x,S);const k=f();d(C,E),R.append(C,_,x,k),document.body.appendChild(R)}l?(_.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}function Fe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function dE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fE(){const o=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof o=="object"&&o.id!==void 0}function pE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mE(){const o=Fe();return o.indexOf("MSIE ")>=0||o.indexOf("Trident/")>=0}function gE(){try{return typeof indexedDB=="object"}catch{return!1}}function yE(){return new Promise((o,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),o(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}const bE="FirebaseError";class Ni extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=bE,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ko.prototype.create)}}class ko{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?vE(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Ni(a,h,i)}}function vE(o,t){return o.replace(AE,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const AE=/\{\$([^}]+)}/g;function wE(o){for(const t in o)if(Object.prototype.hasOwnProperty.call(o,t))return!1;return!0}function Xa(o,t){if(o===t)return!0;const e=Object.keys(o),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=o[a],c=t[a];if(vb(l)&&vb(c)){if(!Xa(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function vb(o){return o!==null&&typeof o=="object"}function Oo(o){const t=[];for(const[e,i]of Object.entries(o))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function SE(o,t){const e=new _E(o,t);return e.subscribe.bind(e)}class _E{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");xE(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=Md),a.error===void 0&&(a.error=Md),a.complete===void 0&&(a.complete=Md);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xE(o,t){if(typeof o!="object"||o===null)return!1;for(const e of t)if(e in o&&typeof o[e]=="function")return!0;return!1}function Md(){}function ki(o){return o&&o._delegate?o._delegate:o}class Hs{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Is="[DEFAULT]";class EE{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new lE;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(CE(t))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=Is){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Is){return this.instances.has(t)}getOptions(t=Is){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&t(l,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TE(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Is){return this.component?this.component.multipleInstances?t:Is:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TE(o){return o===Is?void 0:o}function CE(o){return o.instantiationMode==="EAGER"}class RE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new EE(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Yt;(function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"})(Yt||(Yt={}));const DE={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},ME=Yt.INFO,NE={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},kE=(o,t,...e)=>{if(t<o.logLevel)return;const i=new Date().toISOString(),a=NE[t];if(a)console[a](`[${i}]  ${o.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nv{constructor(t){this.name=t,this._logLevel=ME,this._logHandler=kE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Yt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...t),this._logHandler(this,Yt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...t),this._logHandler(this,Yt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...t),this._logHandler(this,Yt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...t),this._logHandler(this,Yt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...t),this._logHandler(this,Yt.ERROR,...t)}}const OE=(o,t)=>t.some(e=>o instanceof e);let Ab,wb;function LE(){return Ab||(Ab=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IE(){return wb||(wb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iv=new WeakMap,Yd=new WeakMap,sv=new WeakMap,Nd=new WeakMap,xf=new WeakMap;function PE(o){const t=new Promise((e,i)=>{const a=()=>{o.removeEventListener("success",l),o.removeEventListener("error",c)},l=()=>{e(us(o.result)),a()},c=()=>{i(o.error),a()};o.addEventListener("success",l),o.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&iv.set(e,o)}).catch(()=>{}),xf.set(t,o),t}function BE(o){if(Yd.has(o))return;const t=new Promise((e,i)=>{const a=()=>{o.removeEventListener("complete",l),o.removeEventListener("error",c),o.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(o.error||new DOMException("AbortError","AbortError")),a()};o.addEventListener("complete",l),o.addEventListener("error",c),o.addEventListener("abort",c)});Yd.set(o,t)}let Wd={get(o,t,e){if(o instanceof IDBTransaction){if(t==="done")return Yd.get(o);if(t==="objectStoreNames")return o.objectStoreNames||sv.get(o);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return us(o[t])},set(o,t,e){return o[t]=e,!0},has(o,t){return o instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in o}};function jE(o){Wd=o(Wd)}function UE(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=o.call(kd(this),t,...e);return sv.set(i,t.sort?t.sort():[t]),us(i)}:IE().includes(o)?function(...t){return o.apply(kd(this),t),us(iv.get(this))}:function(...t){return us(o.apply(kd(this),t))}}function FE(o){return typeof o=="function"?UE(o):(o instanceof IDBTransaction&&BE(o),OE(o,LE())?new Proxy(o,Wd):o)}function us(o){if(o instanceof IDBRequest)return PE(o);if(Nd.has(o))return Nd.get(o);const t=FE(o);return t!==o&&(Nd.set(o,t),xf.set(t,o)),t}const kd=o=>xf.get(o);function zE(o,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(o,t),h=us(c);return i&&c.addEventListener("upgradeneeded",d=>{i(us(c.result),d.oldVersion,d.newVersion,us(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const HE=["get","getKey","getAll","getAllKeys","count"],VE=["put","add","delete","clear"],Od=new Map;function Sb(o,t){if(!(o instanceof IDBDatabase&&!(t in o)&&typeof t=="string"))return;if(Od.get(t))return Od.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=VE.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||HE.includes(e)))return;const l=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[e](...h),a&&d.done]))[0]};return Od.set(t,l),l}jE(o=>({...o,get:(t,e,i)=>Sb(t,e)||o.get(t,e,i),has:(t,e)=>!!Sb(t,e)||o.has(t,e)}));class GE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(qE(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function qE(o){return o.getComponent()?.type==="VERSION"}const Kd="@firebase/app",_b="0.14.7";const Ei=new nv("@firebase/app"),$E="@firebase/app-compat",XE="@firebase/analytics-compat",YE="@firebase/analytics",WE="@firebase/app-check-compat",KE="@firebase/app-check",QE="@firebase/auth",ZE="@firebase/auth-compat",JE="@firebase/database",t1="@firebase/data-connect",e1="@firebase/database-compat",n1="@firebase/functions",i1="@firebase/functions-compat",s1="@firebase/installations",a1="@firebase/installations-compat",r1="@firebase/messaging",o1="@firebase/messaging-compat",l1="@firebase/performance",c1="@firebase/performance-compat",u1="@firebase/remote-config",h1="@firebase/remote-config-compat",d1="@firebase/storage",f1="@firebase/storage-compat",p1="@firebase/firestore",m1="@firebase/ai",g1="@firebase/firestore-compat",y1="firebase",b1="12.8.0";const Qd="[DEFAULT]",v1={[Kd]:"fire-core",[$E]:"fire-core-compat",[YE]:"fire-analytics",[XE]:"fire-analytics-compat",[KE]:"fire-app-check",[WE]:"fire-app-check-compat",[QE]:"fire-auth",[ZE]:"fire-auth-compat",[JE]:"fire-rtdb",[t1]:"fire-data-connect",[e1]:"fire-rtdb-compat",[n1]:"fire-fn",[i1]:"fire-fn-compat",[s1]:"fire-iid",[a1]:"fire-iid-compat",[r1]:"fire-fcm",[o1]:"fire-fcm-compat",[l1]:"fire-perf",[c1]:"fire-perf-compat",[u1]:"fire-rc",[h1]:"fire-rc-compat",[d1]:"fire-gcs",[f1]:"fire-gcs-compat",[p1]:"fire-fst",[g1]:"fire-fst-compat",[m1]:"fire-vertex","fire-js":"fire-js",[y1]:"fire-js-all"};const wo=new Map,A1=new Map,Zd=new Map;function xb(o,t){try{o.container.addComponent(t)}catch(e){Ei.debug(`Component ${t.name} failed to register with FirebaseApp ${o.name}`,e)}}function Ya(o){const t=o.name;if(Zd.has(t))return Ei.debug(`There were multiple attempts to register component ${t}.`),!1;Zd.set(t,o);for(const e of wo.values())xb(e,o);for(const e of A1.values())xb(e,o);return!0}function Ef(o,t){const e=o.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),o.container.getProvider(t)}function kn(o){return o==null?!1:o.settings!==void 0}const w1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hs=new ko("app","Firebase",w1);class S1{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw hs.create("app-deleted",{appName:this._name})}}const Lo=b1;function av(o,t={}){let e=o;typeof t!="object"&&(t={name:t});const i={name:Qd,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw hs.create("bad-app-name",{appName:String(a)});if(e||(e=Z0()),!e)throw hs.create("no-options");const l=wo.get(a);if(l){if(Xa(e,l.options)&&Xa(i,l.config))return l;throw hs.create("duplicate-app",{appName:a})}const c=new RE(a);for(const d of Zd.values())c.addComponent(d);const h=new S1(e,i,c);return wo.set(a,h),h}function Tf(o=Qd){const t=wo.get(o);if(!t&&o===Qd&&Z0())return av();if(!t)throw hs.create("no-app",{appName:o});return t}function _1(){return Array.from(wo.values())}function ds(o,t,e){let i=v1[o]??o;e&&(i+=`-${e}`);const a=i.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ei.warn(c.join(" "));return}Ya(new Hs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const x1="firebase-heartbeat-database",E1=1,So="firebase-heartbeat-store";let Ld=null;function rv(){return Ld||(Ld=zE(x1,E1,{upgrade:(o,t)=>{switch(t){case 0:try{o.createObjectStore(So)}catch(e){console.warn(e)}}}}).catch(o=>{throw hs.create("idb-open",{originalErrorMessage:o.message})})),Ld}async function T1(o){try{const e=(await rv()).transaction(So),i=await e.objectStore(So).get(ov(o));return await e.done,i}catch(t){if(t instanceof Ni)Ei.warn(t.message);else{const e=hs.create("idb-get",{originalErrorMessage:t?.message});Ei.warn(e.message)}}}async function Eb(o,t){try{const i=(await rv()).transaction(So,"readwrite");await i.objectStore(So).put(t,ov(o)),await i.done}catch(e){if(e instanceof Ni)Ei.warn(e.message);else{const i=hs.create("idb-set",{originalErrorMessage:e?.message});Ei.warn(i.message)}}}function ov(o){return`${o.name}!${o.options.appId}`}const C1=1024,R1=30;class D1{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new N1(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>R1){const a=k1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ei.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Tb(),{heartbeatsToSend:e,unsentEntries:i}=M1(this._heartbeatsCache.heartbeats),a=W0(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ei.warn(t),""}}}function Tb(){return new Date().toISOString().substring(0,10)}function M1(o,t=C1){const e=[];let i=o.slice();for(const a of o){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Cb(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Cb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class N1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gE()?yE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await T1(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Eb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Cb(o){return W0(JSON.stringify({version:2,heartbeats:o})).length}function k1(o){if(o.length===0)return-1;let t=0,e=o[0].date;for(let i=1;i<o.length;i++)o[i].date<e&&(e=o[i].date,t=i);return t}function O1(o){Ya(new Hs("platform-logger",t=>new GE(t),"PRIVATE")),Ya(new Hs("heartbeat",t=>new D1(t),"PRIVATE")),ds(Kd,_b,o),ds(Kd,_b,"esm2020"),ds("fire-js","")}O1("");function lv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L1=lv,cv=new ko("auth","Firebase",lv());const Mc=new nv("@firebase/auth");function I1(o,...t){Mc.logLevel<=Yt.WARN&&Mc.warn(`Auth (${Lo}): ${o}`,...t)}function _c(o,...t){Mc.logLevel<=Yt.ERROR&&Mc.error(`Auth (${Lo}): ${o}`,...t)}function Ti(o,...t){throw Cf(o,...t)}function Xn(o,...t){return Cf(o,...t)}function uv(o,t,e){const i={...L1(),[t]:e};return new ko("auth","Firebase",i).create(t,{appName:o.name})}function fs(o){return uv(o,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cf(o,...t){if(typeof o!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=o.name),o._errorFactory.create(e,...i)}return cv.create(o,...t)}function yt(o,t,...e){if(!o)throw Cf(t,...e)}function wi(o){const t="INTERNAL ASSERTION FAILED: "+o;throw _c(t),new Error(t)}function Ci(o,t){o||wi(t)}function Jd(){return typeof self<"u"&&self.location?.href||""}function P1(){return Rb()==="http:"||Rb()==="https:"}function Rb(){return typeof self<"u"&&self.location?.protocol||null}function B1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(P1()||fE()||"connection"in navigator)?navigator.onLine:!0}function j1(){if(typeof navigator>"u")return null;const o=navigator;return o.languages&&o.languages[0]||o.language||null}class Io{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ci(e>t,"Short delay should be less than long delay!"),this.isMobile=hE()||pE()}get(){return B1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rf(o,t){Ci(o.emulator,"Emulator should always be set here");const{url:e}=o.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class hv{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const U1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const F1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z1=new Io(3e4,6e4);function Xc(o,t){return o.tenantId&&!t.tenantId?{...t,tenantId:o.tenantId}:t}async function nr(o,t,e,i,a={}){return dv(o,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const h=Oo({key:o.config.apiKey,...c}).slice(1),d=await o._getAdditionalHeaders();d["Content-Type"]="application/json",o.languageCode&&(d["X-Firebase-Locale"]=o.languageCode);const f={method:t,headers:d,...l};return dE()||(f.referrerPolicy="no-referrer"),o.emulatorConfig&&er(o.emulatorConfig.host)&&(f.credentials="include"),hv.fetch()(await pv(o,o.config.apiHost,e,h),f)})}async function dv(o,t,e){o._canInitEmulator=!1;const i={...U1,...t};try{const a=new H1(o),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw uc(o,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(o,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw uc(o,"email-already-in-use",c);if(d==="USER_DISABLED")throw uc(o,"user-disabled",c);const m=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw uv(o,m,f);Ti(o,m)}}catch(a){if(a instanceof Ni)throw a;Ti(o,"network-request-failed",{message:String(a)})}}async function fv(o,t,e,i,a={}){const l=await nr(o,t,e,i,a);return"mfaPendingCredential"in l&&Ti(o,"multi-factor-auth-required",{_serverResponse:l}),l}async function pv(o,t,e,i){const a=`${t}${e}?${i}`,l=o,c=l.config.emulator?Rf(o.config,a):`${o.config.apiScheme}://${a}`;return F1.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class H1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),z1.get())})}}function uc(o,t,e){const i={appName:o.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Xn(o,t,i);return a.customData._tokenResponse=e,a}async function V1(o,t){return nr(o,"POST","/v1/accounts:delete",t)}async function Nc(o,t){return nr(o,"POST","/v1/accounts:lookup",t)}function go(o){if(o)try{const t=new Date(Number(o));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function G1(o,t=!1){const e=ki(o),i=await e.getIdToken(t),a=Df(i);yt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:go(Id(a.auth_time)),issuedAtTime:go(Id(a.iat)),expirationTime:go(Id(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Id(o){return Number(o)*1e3}function Df(o){const[t,e,i]=o.split(".");if(t===void 0||e===void 0||i===void 0)return _c("JWT malformed, contained fewer than 3 sections"),null;try{const a=K0(e);return a?JSON.parse(a):(_c("Failed to decode base64 JWT payload"),null)}catch(a){return _c("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Db(o){const t=Df(o);return yt(t,"internal-error"),yt(typeof t.exp<"u","internal-error"),yt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function _o(o,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Ni&&q1(i)&&o.auth.currentUser===o&&await o.auth.signOut(),i}}function q1({code:o}){return o==="auth/user-disabled"||o==="auth/user-token-expired"}class $1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class tf{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kc(o){const t=o.auth,e=await o.getIdToken(),i=await _o(o,Nc(t,{idToken:e}));yt(i?.users.length,t,"internal-error");const a=i.users[0];o._notifyReloadListener(a);const l=a.providerUserInfo?.length?mv(a.providerUserInfo):[],c=Y1(o.providerData,l),h=o.isAnonymous,d=!(o.email&&a.passwordHash)&&!c?.length,f=h?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new tf(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(o,m)}async function X1(o){const t=ki(o);await kc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Y1(o,t){return[...o.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function mv(o){return o.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function W1(o,t){const e=await dv(o,{},async()=>{const i=Oo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=o.config,c=await pv(o,a,"/v1/token",`key=${l}`),h=await o._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return o.emulatorConfig&&er(o.emulatorConfig.host)&&(d.credentials="include"),hv.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function K1(o,t){return nr(o,"POST","/v2/accounts:revokeToken",Xc(o,t))}class Fa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){yt(t.idToken,"internal-error"),yt(typeof t.idToken<"u","internal-error"),yt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Db(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){yt(t.length!==0,"internal-error");const e=Db(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(yt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await W1(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new Fa;return i&&(yt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(yt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(yt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Fa,this.toJSON())}_performRefresh(){return wi("not implemented")}}function ss(o,t){yt(typeof o=="string"||typeof o>"u","internal-error",{appName:t})}class On{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new $1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new tf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await _o(this,this.stsTokenManager.getToken(this.auth,t));return yt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return G1(this,t)}reload(){return X1(this)}_assign(t){this!==t&&(yt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new On({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await kc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(fs(this.auth));const t=await this.getIdToken();return await _o(this,V1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,f=e.createdAt??void 0,m=e.lastLoginAt??void 0,{uid:y,emailVerified:b,isAnonymous:A,providerData:_,stsTokenManager:S}=e;yt(y&&S,t,"internal-error");const x=Fa.fromJSON(this.name,S);yt(typeof y=="string",t,"internal-error"),ss(i,t.name),ss(a,t.name),yt(typeof b=="boolean",t,"internal-error"),yt(typeof A=="boolean",t,"internal-error"),ss(l,t.name),ss(c,t.name),ss(h,t.name),ss(d,t.name),ss(f,t.name),ss(m,t.name);const E=new On({uid:y,auth:t,email:a,emailVerified:b,displayName:i,isAnonymous:A,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:x,createdAt:f,lastLoginAt:m});return _&&Array.isArray(_)&&(E.providerData=_.map(C=>({...C}))),d&&(E._redirectEventId=d),E}static async _fromIdTokenResponse(t,e,i=!1){const a=new Fa;a.updateFromServerResponse(e);const l=new On({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await kc(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];yt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?mv(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new Fa;h.updateFromIdToken(i);const d=new On({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new tf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,f),d}}const Mb=new Map;function Si(o){Ci(o instanceof Function,"Expected a class definition");let t=Mb.get(o);return t?(Ci(t instanceof o,"Instance stored in cache mismatched with class"),t):(t=new o,Mb.set(o,t),t)}class gv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}gv.type="NONE";const Nb=gv;function xc(o,t,e){return`firebase:${o}:${t}:${e}`}class za{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=xc(this.userKey,a.apiKey,l),this.fullPersistenceKey=xc("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await Nc(this.auth,{idToken:t}).catch(()=>{});return e?On._fromGetAccountInfoResponse(this.auth,e,t):null}return On._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new za(Si(Nb),t,i);const a=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Si(Nb);const c=xc(i,t.config.apiKey,t.name);let h=null;for(const f of e)try{const m=await f._get(c);if(m){let y;if(typeof m=="string"){const b=await Nc(t,{idToken:m}).catch(()=>{});if(!b)break;y=await On._fromGetAccountInfoResponse(t,b,m)}else y=On._fromJSON(t,m);f!==l&&(h=y),l=f;break}}catch{}const d=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new za(l,t,i):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(e.map(async f=>{if(f!==l)try{await f._remove(c)}catch{}})),new za(l,t,i))}}function kb(o){const t=o.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Av(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(yv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Sv(t))return"Blackberry";if(_v(t))return"Webos";if(bv(t))return"Safari";if((t.includes("chrome/")||vv(t))&&!t.includes("edge/"))return"Chrome";if(wv(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=o.match(e);if(i?.length===2)return i[1]}return"Other"}function yv(o=Fe()){return/firefox\//i.test(o)}function bv(o=Fe()){const t=o.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function vv(o=Fe()){return/crios\//i.test(o)}function Av(o=Fe()){return/iemobile/i.test(o)}function wv(o=Fe()){return/android/i.test(o)}function Sv(o=Fe()){return/blackberry/i.test(o)}function _v(o=Fe()){return/webos/i.test(o)}function Mf(o=Fe()){return/iphone|ipad|ipod/i.test(o)||/macintosh/i.test(o)&&/mobile/i.test(o)}function Q1(o=Fe()){return Mf(o)&&!!window.navigator?.standalone}function Z1(){return mE()&&document.documentMode===10}function xv(o=Fe()){return Mf(o)||wv(o)||_v(o)||Sv(o)||/windows phone/i.test(o)||Av(o)}function Ev(o,t=[]){let e;switch(o){case"Browser":e=kb(Fe());break;case"Worker":e=`${kb(Fe())}-${o}`;break;default:e=o}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${Lo}/${i}`}class J1{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,h)=>{try{const d=t(l);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function tT(o,t={}){return nr(o,"GET","/v2/passwordPolicy",Xc(o,t))}const eT=6;class nT{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??eT,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class iT{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ob(this),this.idTokenSubscription=new Ob(this),this.beforeStateQueue=new J1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Si(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await za.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await Nc(this,{idToken:t}),i=await On._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!l||l===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await kc(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=j1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kn(this.app))return Promise.reject(fs(this));const e=t?ki(t):null;return e&&yt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&yt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kn(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await tT(this),e=new nT(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ko("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await K1(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Si(t)||this._popupRedirectResolver;yt(e,this,"argument-error"),this.redirectPersistenceManager=await za.create(this,[Si(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ev(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&I1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Yc(o){return ki(o)}class Ob{constructor(t){this.auth=t,this.observer=null,this.addObserver=SE(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Nf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sT(o){Nf=o}function aT(o){return Nf.loadJS(o)}function rT(){return Nf.gapiScript}function oT(o){return`__${o}${Math.floor(Math.random()*1e6)}`}function lT(o,t){const e=Ef(o,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(Xa(l,t??{}))return a;Ti(a,"already-initialized")}return e.initialize({options:t})}function cT(o,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Si);t?.errorMap&&o._updateErrorMap(t.errorMap),o._initializeWithPersistence(i,t?.popupRedirectResolver)}function Tv(o,t,e){const i=Yc(o);yt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!!e?.disableWarnings,l=Cv(t),{host:c,port:h}=uT(t),d=h===null?"":`:${h}`,f={url:`${l}//${c}${d}/`},m=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){yt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),yt(Xa(f,i.config.emulator)&&Xa(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,er(c)?(tv(`${l}//${c}${d}`),ev("Auth",!0)):a||hT()}function Cv(o){const t=o.indexOf(":");return t<0?"":o.substr(0,t+1)}function uT(o){const t=Cv(o),e=/(\/\/)?([^?#/]+)/.exec(o.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:Lb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Lb(c)}}}function Lb(o){if(!o)return null;const t=Number(o);return isNaN(t)?null:t}function hT(){function o(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",o):o())}class Rv{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return wi("not implemented")}_getIdTokenResponse(t){return wi("not implemented")}_linkToIdToken(t,e){return wi("not implemented")}_getReauthenticationResolver(t){return wi("not implemented")}}async function Ha(o,t){return fv(o,"POST","/v1/accounts:signInWithIdp",Xc(o,t))}const dT="http://localhost";class Vs extends Rv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Vs(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):Ti("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...l}=e;if(!i||!a)return null;const c=new Vs(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return Ha(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,Ha(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Ha(t,e)}buildRequest(){const t={requestUri:dT,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Oo(e)}return t}}class Dv{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Po extends Dv{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class as extends Po{constructor(){super("facebook.com")}static credential(t){return Vs._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return as.credentialFromTaggedObject(t)}static credentialFromError(t){return as.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return as.credential(t.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";class rs extends Po{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Vs._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return rs.credentialFromTaggedObject(t)}static credentialFromError(t){return rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return rs.credential(e,i)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";class os extends Po{constructor(){super("github.com")}static credential(t){return Vs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return os.credentialFromTaggedObject(t)}static credentialFromError(t){return os.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return os.credential(t.oauthAccessToken)}catch{return null}}}os.GITHUB_SIGN_IN_METHOD="github.com";os.PROVIDER_ID="github.com";class ls extends Po{constructor(){super("twitter.com")}static credential(t,e){return Vs._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return ls.credentialFromTaggedObject(t)}static credentialFromError(t){return ls.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return ls.credential(e,i)}catch{return null}}}ls.TWITTER_SIGN_IN_METHOD="twitter.com";ls.PROVIDER_ID="twitter.com";async function fT(o,t){return fv(o,"POST","/v1/accounts:signUp",Xc(o,t))}class ps{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await On._fromIdTokenResponse(t,i,a),c=Ib(i);return new ps({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=Ib(i);return new ps({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function Ib(o){return o.providerId?o.providerId:"phoneNumber"in o?"phone":null}async function pT(o){if(kn(o.app))return Promise.reject(fs(o));const t=Yc(o);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new ps({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await fT(t,{returnSecureToken:!0}),i=await ps._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class Oc extends Ni{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new Oc(t,e,i,a)}}function Mv(o,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(o):e._getIdTokenResponse(o)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Oc._fromErrorAndOperation(o,l,t,i):l})}async function mT(o,t,e=!1){const i=await _o(o,t._linkToIdToken(o.auth,await o.getIdToken()),e);return ps._forOperation(o,"link",i)}async function gT(o,t,e=!1){const{auth:i}=o;if(kn(i.app))return Promise.reject(fs(i));const a="reauthenticate";try{const l=await _o(o,Mv(i,a,t,o),e);yt(l.idToken,i,"internal-error");const c=Df(l.idToken);yt(c,i,"internal-error");const{sub:h}=c;return yt(o.uid===h,i,"user-mismatch"),ps._forOperation(o,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ti(i,"user-mismatch"),l}}async function yT(o,t,e=!1){if(kn(o.app))return Promise.reject(fs(o));const i="signIn",a=await Mv(o,i,t),l=await ps._fromIdTokenResponse(o,i,a);return e||await o._updateCurrentUser(l.user),l}function bT(o,t,e,i){return ki(o).onIdTokenChanged(t,e,i)}function vT(o,t,e){return ki(o).beforeAuthStateChanged(t,e)}const Lc="__sak";class Nv{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(Lc,"1"),this.storage.removeItem(Lc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const AT=1e3,wT=10;class kv extends Nv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);Z1()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,wT):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},AT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}kv.type="LOCAL";const ST=kv;class Ov extends Nv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Ov.type="SESSION";const Lv=Ov;function _T(o){return Promise.all(o.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class Wc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new Wc(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async f=>f(e.origin,l)),d=await _T(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];function kf(o="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return o+e}class xT{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const f=kf("",20);a.port1.start();const m=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(y){const b=y;if(b.data.eventId===f)switch(b.data.status){case"ack":clearTimeout(m),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(b.data.response);break;default:clearTimeout(m),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function Yn(){return window}function ET(o){Yn().location.href=o}function Iv(){return typeof Yn().WorkerGlobalScope<"u"&&typeof Yn().importScripts=="function"}async function TT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CT(){return navigator?.serviceWorker?.controller||null}function RT(){return Iv()?self:null}const Pv="firebaseLocalStorageDb",DT=1,Ic="firebaseLocalStorage",Bv="fbase_key";class Bo{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function Kc(o,t){return o.transaction([Ic],t?"readwrite":"readonly").objectStore(Ic)}function MT(){const o=indexedDB.deleteDatabase(Pv);return new Bo(o).toPromise()}function ef(){const o=indexedDB.open(Pv,DT);return new Promise((t,e)=>{o.addEventListener("error",()=>{e(o.error)}),o.addEventListener("upgradeneeded",()=>{const i=o.result;try{i.createObjectStore(Ic,{keyPath:Bv})}catch(a){e(a)}}),o.addEventListener("success",async()=>{const i=o.result;i.objectStoreNames.contains(Ic)?t(i):(i.close(),await MT(),t(await ef()))})})}async function Pb(o,t,e){const i=Kc(o,!0).put({[Bv]:t,value:e});return new Bo(i).toPromise()}async function NT(o,t){const e=Kc(o,!1).get(t),i=await new Bo(e).toPromise();return i===void 0?null:i.value}function Bb(o,t){const e=Kc(o,!0).delete(t);return new Bo(e).toPromise()}const kT=800,OT=3;class jv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>OT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Iv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(RT()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await TT(),!this.activeServiceWorker)return;this.sender=new xT(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||CT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ef();return await Pb(t,Lc,"1"),await Bb(t,Lc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>Pb(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>NT(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>Bb(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=Kc(a,!1).getAll();return new Bo(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jv.type="LOCAL";const LT=jv;new Io(3e4,6e4);function IT(o,t){return t?Si(t):(yt(o._popupRedirectResolver,o,"argument-error"),o._popupRedirectResolver)}class Of extends Rv{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ha(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Ha(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Ha(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function PT(o){return yT(o.auth,new Of(o),o.bypassAuthState)}function BT(o){const{auth:t,user:e}=o;return yt(e,t,"internal-error"),gT(e,new Of(o),o.bypassAuthState)}async function jT(o){const{auth:t,user:e}=o;return yt(e,t,"internal-error"),mT(e,new Of(o),o.bypassAuthState)}class Uv{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PT;case"linkViaPopup":case"linkViaRedirect":return jT;case"reauthViaPopup":case"reauthViaRedirect":return BT;default:Ti(this.auth,"internal-error")}}resolve(t){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const UT=new Io(2e3,1e4);class Pa extends Uv{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return yt(t,this.auth,"internal-error"),t}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const t=kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,UT.get())};t()}}Pa.currentPopupAction=null;const FT="pendingRedirect",Ec=new Map;class zT extends Uv{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Ec.get(this.auth._key());if(!t){try{const i=await HT(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Ec.set(this.auth._key(),t)}return this.bypassAuthState||Ec.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HT(o,t){const e=qT(t),i=GT(o);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function VT(o,t){Ec.set(o._key(),t)}function GT(o){return Si(o._redirectPersistence)}function qT(o){return xc(FT,o.config.apiKey,o.name)}async function $T(o,t,e=!1){if(kn(o.app))return Promise.reject(fs(o));const i=Yc(o),a=IT(i,t),c=await new zT(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const XT=600*1e3;class YT{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WT(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!Fv(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Xn(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=XT&&this.cachedEventUids.clear(),this.cachedEventUids.has(jb(t))}saveEventToCache(t){this.cachedEventUids.add(jb(t)),this.lastProcessedEventTime=Date.now()}}function jb(o){return[o.type,o.eventId,o.sessionId,o.tenantId].filter(t=>t).join("-")}function Fv({type:o,error:t}){return o==="unknown"&&t?.code==="auth/no-auth-event"}function WT(o){switch(o.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fv(o);default:return!1}}async function KT(o,t={}){return nr(o,"GET","/v1/projects",t)}const QT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZT=/^https?/;async function JT(o){if(o.config.emulator)return;const{authorizedDomains:t}=await KT(o);for(const e of t)try{if(tC(e))return}catch{}Ti(o,"unauthorized-domain")}function tC(o){const t=Jd(),{protocol:e,hostname:i}=new URL(t);if(o.startsWith("chrome-extension://")){const c=new URL(o);return c.hostname===""&&i===""?e==="chrome-extension:"&&o.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!ZT.test(e))return!1;if(QT.test(o))return i===o;const a=o.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const eC=new Io(3e4,6e4);function Ub(){const o=Yn().___jsl;if(o?.H){for(const t of Object.keys(o.H))if(o.H[t].r=o.H[t].r||[],o.H[t].L=o.H[t].L||[],o.H[t].r=[...o.H[t].L],o.CP)for(let e=0;e<o.CP.length;e++)o.CP[e]=null}}function nC(o){return new Promise((t,e)=>{function i(){Ub(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ub(),e(Xn(o,"network-request-failed"))},timeout:eC.get()})}if(Yn().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(Yn().gapi?.load)i();else{const a=oT("iframefcb");return Yn()[a]=()=>{gapi.load?i():e(Xn(o,"network-request-failed"))},aT(`${rT()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Tc=null,t})}let Tc=null;function iC(o){return Tc=Tc||nC(o),Tc}const sC=new Io(5e3,15e3),aC="__/auth/iframe",rC="emulator/auth/iframe",oC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cC(o){const t=o.config;yt(t.authDomain,o,"auth-domain-config-required");const e=t.emulator?Rf(t,rC):`https://${o.config.authDomain}/${aC}`,i={apiKey:t.apiKey,appName:o.name,v:Lo},a=lC.get(o.config.apiHost);a&&(i.eid=a);const l=o._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${Oo(i).slice(1)}`}async function uC(o){const t=await iC(o),e=Yn().gapi;return yt(e,o,"internal-error"),t.open({where:document.body,url:cC(o),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oC,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Xn(o,"network-request-failed"),h=Yn().setTimeout(()=>{l(c)},sC.get());function d(){Yn().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{l(c)})}))}const hC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dC=500,fC=600,pC="_blank",mC="http://localhost";class Fb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gC(o,t,e,i=dC,a=fC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...hC,width:i.toString(),height:a.toString(),top:l,left:c},f=Fe().toLowerCase();e&&(h=vv(f)?pC:e),yv(f)&&(t=t||mC,d.scrollbars="yes");const m=Object.entries(d).reduce((b,[A,_])=>`${b}${A}=${_},`,"");if(Q1(f)&&h!=="_self")return yC(t||"",h),new Fb(null);const y=window.open(t||"",h,m);yt(y,o,"popup-blocked");try{y.focus()}catch{}return new Fb(y)}function yC(o,t){const e=document.createElement("a");e.href=o,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const bC="__/auth/handler",vC="emulator/auth/handler",AC=encodeURIComponent("fac");async function zb(o,t,e,i,a,l){yt(o.config.authDomain,o,"auth-domain-config-required"),yt(o.config.apiKey,o,"invalid-api-key");const c={apiKey:o.config.apiKey,appName:o.name,authType:e,redirectUrl:i,v:Lo,eventId:a};if(t instanceof Dv){t.setDefaultLanguage(o.languageCode),c.providerId=t.providerId||"",wE(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[m,y]of Object.entries({}))c[m]=y}if(t instanceof Po){const m=t.getScopes().filter(y=>y!=="");m.length>0&&(c.scopes=m.join(","))}o.tenantId&&(c.tid=o.tenantId);const h=c;for(const m of Object.keys(h))h[m]===void 0&&delete h[m];const d=await o._getAppCheckToken(),f=d?`#${AC}=${encodeURIComponent(d)}`:"";return`${wC(o)}?${Oo(h).slice(1)}${f}`}function wC({config:o}){return o.emulator?Rf(o,vC):`https://${o.authDomain}/${bC}`}const Pd="webStorageSupport";class SC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Lv,this._completeRedirectFn=$T,this._overrideRedirectResult=VT}async _openPopup(t,e,i,a){Ci(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const l=await zb(t,e,i,Jd(),a);return gC(t,l,kf())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await zb(t,e,i,Jd(),a);return ET(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(Ci(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await uC(t),i=new YT(t);return e.register("authEvent",a=>(yt(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(Pd,{type:Pd},a=>{const l=a?.[0]?.[Pd];l!==void 0&&e(!!l),Ti(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=JT(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return xv()||bv()||Mf()}}const _C=SC;var Hb="@firebase/auth",Vb="1.12.0";class xC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function EC(o){switch(o){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TC(o){Ya(new Hs("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;yt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:o,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ev(o)},f=new iT(i,a,l,d);return cT(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ya(new Hs("auth-internal",t=>{const e=Yc(t.getProvider("auth").getImmediate());return(i=>new xC(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),ds(Hb,Vb,EC(o)),ds(Hb,Vb,"esm2020")}const CC=300,RC=J0("authIdTokenMaxAge")||CC;let Gb=null;const DC=o=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>RC)return;const a=e?.token;Gb!==a&&(Gb=a,await fetch(o,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function MC(o=Tf()){const t=Ef(o,"auth");if(t.isInitialized())return t.getImmediate();const e=lT(o,{popupRedirectResolver:_C,persistence:[LT,ST,Lv]}),i=J0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=DC(l.toString());vT(e,c,()=>c(e.currentUser)),bT(e,h=>c(h))}}const a=Q0("auth");return a&&Tv(e,`http://${a}`),e}function NC(){return document.getElementsByTagName("head")?.[0]??document}sT({loadJS(o){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",o),i.onload=t,i.onerror=a=>{const l=Xn("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",NC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TC("Browser");const kC="type.googleapis.com/google.protobuf.Int64Value",OC="type.googleapis.com/google.protobuf.UInt64Value";function zv(o,t){const e={};for(const i in o)o.hasOwnProperty(i)&&(e[i]=t(o[i]));return e}function Pc(o){if(o==null)return null;if(o instanceof Number&&(o=o.valueOf()),typeof o=="number"&&isFinite(o)||o===!0||o===!1||Object.prototype.toString.call(o)==="[object String]")return o;if(o instanceof Date)return o.toISOString();if(Array.isArray(o))return o.map(t=>Pc(t));if(typeof o=="function"||typeof o=="object")return zv(o,t=>Pc(t));throw new Error("Data cannot be encoded in JSON: "+o)}function Wa(o){if(o==null)return o;if(o["@type"])switch(o["@type"]){case kC:case OC:{const t=Number(o.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+o);return t}default:throw new Error("Data cannot be decoded from JSON: "+o)}return Array.isArray(o)?o.map(t=>Wa(t)):typeof o=="function"||typeof o=="object"?zv(o,t=>Wa(t)):o}const Lf="functions";const qb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ze extends Ni{constructor(t,e,i){super(`${Lf}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,Ze.prototype)}}function LC(o){if(o>=200&&o<300)return"ok";switch(o){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Bc(o,t){let e=LC(o),i=e,a;try{const l=t&&t.error;if(l){const c=l.status;if(typeof c=="string"){if(!qb[c])return new Ze("internal","internal");e=qb[c],i=c}const h=l.message;typeof h=="string"&&(i=h),a=l.details,a!==void 0&&(a=Wa(a))}}catch{}return e==="ok"?null:new Ze(e,i,a)}class IC{constructor(t,e,i,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,kn(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:a}}}const nf="us-central1",PC=/^data: (.*?)(?:\n|$)/;function BC(o){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new Ze("deadline-exceeded","deadline-exceeded"))},o)}),cancel:()=>{t&&clearTimeout(t)}}}class jC{constructor(t,e,i,a,l=nf,c=(...h)=>fetch(...h)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new IC(t,e,i,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=nf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}function UC(o,t,e){const i=er(t);o.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(tv(o.emulatorOrigin+"/backends"),ev("Functions",!0))}function FC(o,t,e){const i=a=>HC(o,t,a,{});return i.stream=(a,l)=>GC(o,t,a,l),i}function Hv(o){return o.emulatorOrigin&&er(o.emulatorOrigin)?"include":void 0}async function zC(o,t,e,i,a){e["Content-Type"]="application/json";let l;try{l=await i(o,{method:"POST",body:JSON.stringify(t),headers:e,credentials:Hv(a)})}catch{return{status:0,json:null}}let c=null;try{c=await l.json()}catch{}return{status:l.status,json:c}}async function Vv(o,t){const e={},i=await o.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function HC(o,t,e,i){const a=o._url(t);return VC(o,a,e,i)}async function VC(o,t,e,i){e=Pc(e);const a={data:e},l=await Vv(o,i),c=i.timeout||7e4,h=BC(c),d=await Promise.race([zC(t,a,l,o.fetchImpl,o),h.promise,o.cancelAllRequests]);if(h.cancel(),!d)throw new Ze("cancelled","Firebase Functions instance was deleted.");const f=Bc(d.status,d.json);if(f)throw f;if(!d.json)throw new Ze("internal","Response is not valid JSON object.");let m=d.json.data;if(typeof m>"u"&&(m=d.json.result),typeof m>"u")throw new Ze("internal","Response is missing data field.");return{data:Wa(m)}}function GC(o,t,e,i){const a=o._url(t);return qC(o,a,e,i||{})}async function qC(o,t,e,i){e=Pc(e);const a={data:e},l=await Vv(o,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await o.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:l,signal:i?.signal,credentials:Hv(o)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const _=new Ze("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const A=Bc(0,null);return{data:Promise.reject(A),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(A)}}}}}}let h,d;const f=new Promise((b,A)=>{h=b,d=A});i?.signal?.addEventListener("abort",()=>{const b=new Ze("cancelled","Request was cancelled.");d(b)});const m=c.body.getReader(),y=$C(m,h,d,i?.signal);return{stream:{[Symbol.asyncIterator](){const b=y.getReader();return{async next(){const{value:A,done:_}=await b.read();return{value:A,done:_}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:f}}function $C(o,t,e,i){const a=(c,h)=>{const d=c.match(PC);if(!d)return;const f=d[1];try{const m=JSON.parse(f);if("result"in m){t(Wa(m.result));return}if("message"in m){h.enqueue(Wa(m.message));return}if("error"in m){const y=Bc(0,m);h.error(y),e(y);return}}catch(m){if(m instanceof Ze){h.error(m),e(m);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return d();async function d(){if(i?.aborted){const f=new Ze("cancelled","Request was cancelled");return c.error(f),e(f),Promise.resolve()}try{const{value:f,done:m}=await o.read();if(m){h.trim()&&a(h.trim(),c),c.close();return}if(i?.aborted){const b=new Ze("cancelled","Request was cancelled");c.error(b),e(b),await o.cancel();return}h+=l.decode(f,{stream:!0});const y=h.split(`
`);h=y.pop()||"";for(const b of y)b.trim()&&a(b.trim(),c);return d()}catch(f){const m=f instanceof Ze?f:Bc(0,null);c.error(m),e(m)}}},cancel(){return o.cancel()}})}const $b="@firebase/functions",Xb="0.13.1";const XC="auth-internal",YC="app-check-internal",WC="messaging-internal";function KC(o){const t=(e,{instanceIdentifier:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider(XC),c=e.getProvider(WC),h=e.getProvider(YC);return new jC(a,l,c,h,i)};Ya(new Hs(Lf,t,"PUBLIC").setMultipleInstances(!0)),ds($b,Xb,o),ds($b,Xb,"esm2020")}function QC(o=Tf(),t=nf){const i=Ef(ki(o),Lf).getImmediate({identifier:t}),a=oE("functions");return a&&ZC(i,...a),i}function ZC(o,t,e){UC(ki(o),t,e)}function ao(o,t,e){return FC(ki(o),t)}KC();var JC="firebase",tR="12.8.0";ds(JC,tR,"app");const Gv=j.createContext();let hc={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"};const Yb=o=>{if(!o||typeof o!="string")return!0;const t=o.trim();return t===""||t.includes("your_")||t.includes("replace_me")||t.includes("changeme")};let sf=null,yo=null,Wb=!1;try{if(window.MOCK_AUTH)Yb(hc.apiKey)&&(console.log("Using dummy Firebase config for MOCK_AUTH mode"),hc={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"});else if(Yb(hc.apiKey))throw new Error("Missing/placeholder Firebase API key. This should not happen in production. For local dev you can set VITE_FIREBASE_API_KEY or enable the Auth emulator.");sf=_1().length===0?av(hc):Tf(),yo=MC(sf),"".toLowerCase()==="true"&&!Wb&&(Tv(yo,"http://localhost:9099",{disableWarnings:!0}),Wb=!0)}catch(o){console.error("Failed to initialize Firebase:",o)}const eR=({children:o})=>{const[t,e]=j.useState({status:"pending",user:null,error:null});return j.useEffect(()=>{(async()=>{if(window.MOCK_AUTH){const a=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;e({status:a?"authenticated":"unauthenticated",user:a,error:null});return}if(!yo){e({status:"error",user:null,error:new Error("Firebase Auth not available")}),console.error("Firebase Auth not available");return}try{const a=await pT(yo);e({status:"authenticated",user:a.user,error:null})}catch(a){console.error("Authentication error:",a),e({status:"error",user:null,error:a})}})()},[]),w.jsx(Gv.Provider,{value:{authState:t,app:sf,auth:yo},children:o})},If=()=>{const o=j.useContext(Gv);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},nR=({children:o,showHeader:t=!0,showFooter:e=!0})=>{const{authState:i}=If(),a=i.status==="error"?i.error?.message:null;return w.jsxs("div",{className:"min-h-screen flex flex-col",children:[t&&w.jsx("header",{className:"bg-gray-800 text-white px-5 py-4 flex-shrink-0",children:w.jsxs(Le,{to:"/",className:"no-underline text-white",children:[w.jsx("h1",{className:"text-3xl font-bold inline-block mr-5 m-0",children:"DecoDocs"}),w.jsx("p",{className:"inline-block m-0",children:w.jsx("strong",{className:"text-cyan-400 text-base",children:"Decode documents. Act with confidence."})})]})}),w.jsx("div",{className:`px-5 py-2.5 text-center font-medium text-sm border-b flex-shrink-0 ${i.status==="authenticated"?"bg-green-50 text-green-800 border-green-300":"bg-yellow-50 text-yellow-800 border-yellow-300"}`,children:i.status==="authenticated"?" Firebase authenticated - AI features available":a?` AI calls disabled: "${a}". Document viewing features remain available.`:" Authenticating with Firebase..."}),w.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:o}),e&&w.jsx("footer",{className:"text-center py-5 px-5 text-gray-600 border-t flex-shrink-0 bg-gray-50",children:w.jsxs("div",{className:"max-w-6xl mx-auto flex flex-col items-center gap-2.5",children:[w.jsx("p",{className:"m-0 text-gray-600 text-sm",children:" SnapSign Pty Ltd"}),w.jsx("p",{className:"m-0 text-gray-600 text-sm",children:"ABN 72 679 570 757"}),w.jsxs("div",{className:"flex gap-6 flex-wrap justify-center",children:[w.jsx(Le,{to:"/about",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"About"}),w.jsx(Le,{to:"/privacy",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Privacy Policy"}),w.jsx(Le,{to:"/terms",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Terms of Service"}),w.jsx(Le,{to:"/contact",className:"text-gray-600 no-underline text-sm hover:text-gray-800 transition-colors",children:"Contact"})]})]})})]})},iR=({onFileSelect:o,onEdit:t,currentFileName:e,pageNumber:i,numPages:a,pageScale:l,onPreviousPage:c,onNextPage:h,onZoomIn:d,onZoomOut:f,fileInputRef:m})=>w.jsxs("div",{className:"flex gap-4 mb-4 items-center flex-wrap",children:[w.jsx("button",{onClick:()=>m.current?.click(),className:"bg-blue-500 text-white px-4 py-2 text-sm rounded hover:bg-blue-600 transition-colors",children:"Open Different PDF"}),w.jsx("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 text-sm rounded hover:bg-green-700 transition-colors",children:"Edit & Sign"}),e&&w.jsxs("span",{className:"text-sm text-gray-600 flex-1 text-left break-all",children:["Current: ",e]}),w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("button",{onClick:c,disabled:i<=1,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:" Prev"}),w.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",i," of ",a||0]}),w.jsx("button",{onClick:h,disabled:i>=a,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Next "})]}),w.jsxs("div",{className:"flex gap-2 items-center",children:[w.jsx("button",{onClick:f,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom Out"}),w.jsxs("span",{className:"text-sm text-gray-700 min-w-[60px] text-center",children:[Math.round(l*100),"%"]}),w.jsx("button",{onClick:d,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom In"})]}),w.jsx("input",{type:"file",ref:m,accept:".pdf",onChange:o,className:"hidden"})]}),sR=({pdfDoc:o,isLoading:t,loadingMessage:e,canvasRef:i,textLayerRef:a,annotationsRef:l})=>t?w.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),w.jsx("p",{children:e||"Loading PDF..."})]})}):o?w.jsx("div",{className:"flex-1 border border-gray-300 rounded overflow-hidden relative bg-gray-100 h-[calc(100vh-200px)] overflow-auto",children:w.jsxs("div",{className:"relative mx-auto w-fit",children:[w.jsx("canvas",{ref:i,className:"block max-w-full max-h-full bg-white shadow-lg"}),w.jsx("div",{ref:a,className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-0 leading-none"}),w.jsx("div",{ref:l,className:"absolute top-0 left-0 w-full h-full pointer-events-none"})]})}):w.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:w.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})}),aR=({onAnalyzeDocument:o,onExplainSelection:t,onHighlightRisks:e,onTranslateToPlainEnglish:i,isLoading:a,isAuthenticated:l,hasDocument:c})=>{const h=!c||!l||a;return w.jsxs("div",{className:"w-[350px] p-5 bg-gray-50 border-l border-gray-300 flex flex-col overflow-y-auto",children:[w.jsx("h3",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2.5",children:"Document Analysis Tools"}),w.jsxs("div",{className:"flex flex-col gap-2.5 mb-5",children:[w.jsx("button",{onClick:o,disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:a?"Analyzing...":"Analyze Document"}),w.jsx("button",{onClick:t,disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Explain Selection"}),w.jsx("button",{onClick:e,disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Highlight Risks"}),w.jsx("button",{onClick:i,disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Translate to Plain English"}),w.jsx("button",{disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Summarize Key Points"}),w.jsx("button",{disabled:h,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Suggest Improvements"})]})]})},rR=({risk:o})=>{const t=i=>{switch(i){case"high":return"bg-red-600";case"medium":return"bg-orange-500";case"low":return"bg-yellow-500";default:return"bg-gray-500"}},e=i=>{switch(i){case"high":return"border-l-red-600";case"medium":return"border-l-orange-500";case"low":return"border-l-yellow-500";default:return"border-l-gray-500"}};return w.jsxs("div",{className:`mb-3 border border-gray-300 rounded overflow-hidden ${e(o.riskLevel)}`,children:[w.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-50",children:[w.jsx("h6",{className:"m-0 text-gray-700 font-semibold",children:o.clause}),w.jsx("span",{className:`px-2 py-0.5 rounded-xl text-xs font-bold text-white ${t(o.riskLevel)}`,children:o.riskLevel.toUpperCase()})]}),w.jsxs("div",{className:"p-2.5 bg-white",children:[w.jsxs("p",{className:"mb-2",children:[w.jsx("strong",{children:"Risk:"})," ",o.description]}),w.jsxs("p",{className:"m-0",children:[w.jsx("strong",{children:"Plain Language:"})," ",o.explanation]})]})]})},oR=({analysis:o})=>o?w.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[w.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),w.jsxs("div",{className:"mb-4",children:[w.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Document Summary"}),w.jsx("p",{className:"text-gray-700",children:o.summary})]}),o.risks&&o.risks.length>0&&w.jsxs("div",{className:"mb-4",children:[w.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Identified Risks"}),o.risks.map(t=>w.jsx(rR,{risk:t},t.id))]}),o.recommendations&&o.recommendations.length>0&&w.jsxs("div",{children:[w.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Recommendations"}),w.jsx("ul",{className:"list-none p-0",children:o.recommendations.map((t,e)=>w.jsx("li",{className:"mb-4 p-2.5 border border-gray-300 rounded",children:w.jsx("div",{className:"text-gray-700",children:t})},e))})]})]}):null,lR=(o,t)=>{const e=j.useRef(null),i=j.useRef(null),a=j.useRef(null),l=m=>{alert(`Clause: ${m.text}

${m.details||"No details available."}`)},c=m=>{alert(`Risk: ${m.description}

${m.explanation||"No explanation available."}`)},h=j.useCallback(async(m,y)=>{if(i.current){i.current.innerHTML="";try{const A=(await m.getTextContent()).items,_=y.transform;for(const S of A){const x=document.createElement("span");x.textContent=S.str,x.style.position="absolute",x.style.color="transparent",x.style.whiteSpace="pre",x.style.fontSize=`${S.height}px`,x.style.fontFamily="sans-serif",x.style.lineHeight="1";const E=_[0]*S.transform[4]+_[2]*S.transform[5]+_[4],C=_[1]*S.transform[4]+_[3]*S.transform[5]+_[5];x.style.left=`${E}px`,x.style.top=`${C}px`,x.style.width=`${S.width*_[0]}px`,x.style.height=`${S.height*_[3]}px`,i.current.appendChild(x)}}catch(b){console.error("Error rendering text layer:",b)}}},[]),d=j.useCallback((m,y,b,A,_)=>{a.current&&(a.current.innerHTML="",b.filter(S=>S.pageNum===m).forEach(S=>{const x=document.createElement("div");x.className="highlight-overlay",x.style.position="absolute",x.style.backgroundColor="rgba(255, 255, 0, 0.3)",x.style.border="1px solid rgba(255, 255, 0, 0.5)",x.style.left=`${S.x}px`,x.style.top=`${S.y}px`,x.style.width=`${S.width}px`,x.style.height=`${S.height}px`,x.style.pointerEvents="none",x.dataset.page=m,a.current.appendChild(x)}),A.filter(S=>S.pageNum===m).forEach(S=>{const x=document.createElement("div");x.className="clause-marker",x.style.position="absolute",x.style.left=`${S.x}px`,x.style.top=`${S.y}px`,x.style.width="20px",x.style.height="20px",x.style.borderRadius="50%",x.style.backgroundColor="rgba(0, 123, 255, 0.7)",x.style.cursor="pointer",x.style.zIndex="10",x.title=S.text,x.onclick=()=>l(S),a.current.appendChild(x)}),_.filter(S=>S.pageNum===m).forEach(S=>{const x=document.createElement("div");x.className="risk-badge",x.style.position="absolute",x.style.left=`${S.x}px`,x.style.top=`${S.y}px`,x.style.padding="2px 6px",x.style.borderRadius="10px",x.style.fontSize="12px",x.style.fontWeight="bold",x.style.color="white",x.style.backgroundColor=S.level==="high"?"#dc3545":S.level==="medium"?"#fd7e14":"#ffc107",x.style.cursor="pointer",x.style.zIndex="10",x.title=S.description,x.onclick=()=>c(S),x.textContent=S.level.toUpperCase(),a.current.appendChild(x)}))},[]),f=j.useCallback(async(m,y=[],b=[],A=[])=>{if(!(!o||!e.current))try{const _=await o.getPage(m),S=e.current,x=S.getContext("2d"),E=t,C=_.getViewport({scale:E});S.height=C.height,S.width=C.width,x.clearRect(0,0,S.width,S.height);const R={canvasContext:x,viewport:C};await _.render(R).promise,await h(_,C),d(m,C,y,b,A)}catch(_){console.error("Error rendering page:",_)}},[o,t,h,d]);return{canvasRef:e,textLayerRef:i,annotationsRef:a,renderPage:f}},je=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),af=[.001,0,0,.001,0,0],Bd=1.35,cn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Ai={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xo="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},qv={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},rf={TRIANGLES:1,LATTICE:2},Se={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},fe={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},La={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},jo={ERRORS:0,WARNINGS:1,INFOS:5},Ka={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ro={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},$v={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Qc=jo.WARNINGS;function cR(o){Number.isInteger(o)&&(Qc=o)}function uR(){return Qc}function Zc(o){Qc>=jo.INFOS&&console.info(`Info: ${o}`)}function wt(o){Qc>=jo.WARNINGS&&console.warn(`Warning: ${o}`)}function Wt(o){throw new Error(o)}function kt(o,t){o||Wt(t)}function hR(o){switch(o?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Pf(o,t=null,e=null){if(!o)return null;if(e&&typeof o=="string"&&(e.addDefaultProtocol&&o.startsWith("www.")&&o.match(/\./g)?.length>=2&&(o=`http://${o}`),e.tryConvertEncoding))try{o=gR(o)}catch{}const i=t?URL.parse(o,t):URL.parse(o);return hR(i)?i:null}function Bf(o,t,e=!1){const i=URL.parse(o);return i?(i.hash=t,i.href):e&&Pf(o,"http://example.com")?o.split("#",1)[0]+`${t?`#${t}`:""}`:""}function bt(o,t,e,i=!1){return Object.defineProperty(o,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const $s=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class Kb extends $s{constructor(t,e){super(t,"PasswordException"),this.code=e}}class jd extends $s{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class jc extends $s{constructor(t){super(t,"InvalidPDFException")}}class Eo extends $s{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class dR extends $s{constructor(t){super(t,"FormatError")}}class Ri extends $s{constructor(t){super(t,"AbortException")}}function Xv(o){(typeof o!="object"||o?.length===void 0)&&Wt("Invalid argument for bytesToString");const t=o.length,e=8192;if(t<e)return String.fromCharCode.apply(null,o);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=o.subarray(a,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function Uo(o){typeof o!="string"&&Wt("Invalid argument for stringToBytes");const t=o.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=o.charCodeAt(i)&255;return e}function fR(o){return String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255)}function pR(){const o=new Uint8Array(4);return o[0]=1,new Uint32Array(o.buffer,0,1)[0]===1}function mR(){try{return new Function(""),!0}catch{return!1}}class Ae{static get isLittleEndian(){return bt(this,"isLittleEndian",pR())}static get isEvalSupported(){return bt(this,"isEvalSupported",mR())}static get isOffscreenCanvasSupported(){return bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return bt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return bt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return bt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return bt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Ud=Array.from(Array(256).keys(),o=>o.toString(16).padStart(2,"0"));class nt{static makeHexColor(t,e,i){return`#${Ud[t]}${Ud[e]}${Ud[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5];for(let m=0;m<6;m+=2){const y=t[i+m],b=t[i+m+1];t[i+m]=y*a+b*c+d,t[i+m+1]=y*l+b*h+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5],m=t[0],y=t[1],b=t[2],A=t[3];let _=a*m+d,S=_,x=a*b+d,E=x,C=h*y+f,R=C,k=h*A+f,O=k;if(l!==0||c!==0){const I=l*m,B=l*b,Y=c*y,K=c*A;_+=Y,E+=Y,x+=K,S+=K,C+=I,O+=I,k+=B,R+=B}i[0]=Math.min(i[0],_,x,S,E),i[1]=Math.min(i[1],C,k,R,O),i[2]=Math.max(i[2],_,x,S,E),i[3]=Math.max(i[3],C,k,R,O)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],c=t[3],h=i**2+a**2,d=i*l+a*c,f=l**2+c**2,m=(h+f)/2,y=Math.sqrt(m**2-(h*f-d**2));e[0]=Math.sqrt(m+y||1),e[1]=Math.sqrt(m-y||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,c,h,d,f,m){if(f<=0||f>=1)return;const y=1-f,b=f*f,A=b*f,_=y*(y*(y*t+3*f*e)+3*b*i)+A*a,S=y*(y*(y*l+3*f*c)+3*b*h)+A*d;m[0]=Math.min(m[0],_),m[1]=Math.min(m[1],S),m[2]=Math.max(m[2],_),m[3]=Math.max(m[3],S)}static#e(t,e,i,a,l,c,h,d,f,m,y,b){if(Math.abs(f)<1e-12){Math.abs(m)>=1e-12&&this.#t(t,e,i,a,l,c,h,d,-y/m,b);return}const A=m**2-4*y*f;if(A<0)return;const _=Math.sqrt(A),S=2*f;this.#t(t,e,i,a,l,c,h,d,(-m+_)/S,b),this.#t(t,e,i,a,l,c,h,d,(-m-_)/S,b)}static bezierBoundingBox(t,e,i,a,l,c,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,i,l,h,e,a,c,d,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),f),this.#e(t,i,l,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function gR(o){return decodeURIComponent(escape(o))}let Fd=null,Qb=null;function Yv(o){return Fd||(Fd=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Qb=new Map([["","t"]])),o.replaceAll(Fd,(t,e,i)=>e?e.normalize("NFKC"):Qb.get(i))}function jf(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const o=new Uint8Array(32);return crypto.getRandomValues(o),Xv(o)}const Ba="pdfjs_internal_id_";function yR(o,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!o(i)&&!Number.isInteger(i)||!t(a))return!1;const c=l.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Pe(o,t,e){return Math.min(Math.max(o,t),e)}function Wv(o){return Uint8Array.prototype.toBase64?o.toBase64():btoa(Xv(o))}function bR(o){return Uint8Array.fromBase64?Uint8Array.fromBase64(o):Uo(atob(o))}typeof Promise.try!="function"&&(Promise.try=function(o,...t){return new Promise(e=>{e(o(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(o){return o.reduce((t,e)=>t+e,0)});class To{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(To.shouldBuildText(h))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class Uf{static setupStorage(t,e,i,a,l){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of i.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:i});const h=l!=="richText",d=t.div;if(d.append(c),t.viewport){const y=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=y}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const y=document.createTextNode(a.value);c.append(y),h&&To.shouldBuildText(a.name)&&f.push(y)}return{textDivs:f}}const m=[[a,-1,c]];for(;m.length>0;){const[y,b,A]=m.at(-1);if(b+1===y.children.length){m.pop();continue}const _=y.children[++m.at(-1)[1]];if(_===null)continue;const{name:S}=_;if(S==="#text"){const E=document.createTextNode(_.value);f.push(E),A.append(E);continue}const x=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,S):document.createElement(S);if(A.append(x),_.attributes&&this.setAttributes({html:x,element:_,storage:e,intent:l,linkService:i}),_.children?.length>0)m.push([_,-1,x]);else if(_.value){const E=document.createTextNode(_.value);h&&To.shouldBuildText(S)&&f.push(E),x.append(E)}}for(const y of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))y.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const bi="http://www.w3.org/2000/svg";class Gs{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function ir(o,t="text"){if(ho(o,document.baseURI)){const e=await fetch(o);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class Fo{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let m,y,b,A;switch(a%=360,a<0&&(a+=360),a){case 180:m=-1,y=0,b=0,A=1;break;case 90:m=0,y=1,b=1,A=0;break;case 270:m=0,y=-1,b=-1,A=0;break;case 0:m=1,y=0,b=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(b=-b,A=-A);let _,S,x,E;m===0?(_=Math.abs(f-t[1])*i+l,S=Math.abs(d-t[0])*i+c,x=(t[3]-t[1])*i,E=(t[2]-t[0])*i):(_=Math.abs(d-t[0])*i+l,S=Math.abs(f-t[1])*i+c,x=(t[2]-t[0])*i,E=(t[3]-t[1])*i),this.transform=[m*i,y*i,b*i,A*i,_-m*i*d-b*i*f,S-y*i*d-A*i*f],this.width=x,this.height=E}get rawDims(){const t=this.viewBox;return bt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new Fo({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return nt.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];nt.applyTransform(e,this.transform);const i=[t[2],t[3]];return nt.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return nt.applyInverseTransform(i,this.transform),i}}class Jc extends $s{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function zo(o){const t=o.length;let e=0;for(;e<t&&o[e].trim()==="";)e++;return o.substring(e,e+5).toLowerCase()==="data:"}function tu(o){return typeof o=="string"&&/\.pdf$/i.test(o)}function Kv(o){return[o]=o.split(/[#?]/,1),o.substring(o.lastIndexOf("/")+1)}function Qv(o,t="document.pdf"){if(typeof o!="string")return t;if(zo(o))return wt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(o);if(!i)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return a(c);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const f of h)if(l.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class Zb{started=Object.create(null);times=[];time(t){t in this.started&&wt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||wt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function ho(o,t){const e=t?URL.parse(o,t):URL.parse(o);return e?.protocol==="http:"||e?.protocol==="https:"}function dn(o){o.preventDefault()}function re(o){o.preventDefault(),o.stopPropagation()}function vR(o){console.log("Deprecated API usage: "+o)}class Uc{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let m=parseInt(e[8],10);m=m>=0&&m<=23?m:0;let y=parseInt(e[9],10)||0;return y=y>=0&&y<=59?y:0,f==="-"?(c+=m,h+=y):f==="+"&&(c-=m,h-=y),new Date(Date.UTC(i,a,l,c,h,d))}}function Zv(o,{scale:t=1,rotation:e=0}){const{width:i,height:a}=o.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new Fo({viewBox:l,userUnit:1,scale:t,rotation:e})}function sr(o){if(o.startsWith("#")){const t=parseInt(o.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return o.startsWith("rgb(")?o.slice(4,-1).split(",").map(t=>parseInt(t)):o.startsWith("rgba(")?o.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(wt(`Not a valid color format: "${o}"`),[0,0,0])}function AR(o){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of o.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;o.set(e,sr(i))}t.remove()}function ae(o){const{a:t,b:e,c:i,d:a,e:l,f:c}=o.getTransform();return[t,e,i,a,l,c]}function Hn(o){const{a:t,b:e,c:i,d:a,e:l,f:c}=o.getTransform().invertSelf();return[t,e,i,a,l,c]}function ms(o,t,e=!1,i=!0){if(t instanceof Fo){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=o,h=Ae.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,m=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,y=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=m,c.height=y):(c.width=y,c.height=m)}i&&o.setAttribute("data-main-rotation",t.rotation)}class Ln{constructor(){const{pixelRatio:t}=Ln;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let c=1/0,h=1/0,d=1/0;i=Ln.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(c,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const Fc=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class wR{static get isDarkMode(){return bt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Jv{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),bt(this,"commentForegroundColor",sr(i))}}function tA(o,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return o=Math.round(o*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[o,t,e]}function Jb(o,t){const e=o[0]/255,i=o[1]/255,a=o[2]/255,l=Math.max(e,i,a),c=Math.min(e,i,a),h=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const d=l-c;switch(t[1]=h<.5?d/(l+c):d/(2-l-c),l){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=h}function of(o,t){const e=o[0],i=o[1],a=o[2],l=(1-Math.abs(2*a-1))*i,c=l*(1-Math.abs(e/60%2-1)),h=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=l+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=c+h;break}}function t0(o){return o<=.03928?o/12.92:((o+.055)/1.055)**2.4}function e0(o,t,e){of(o,e),e.map(t0);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];of(t,e),e.map(t0);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const n0=new Map;function eA(o,t){const e=o[0]+o[1]*256+o[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=n0.get(e);if(i)return i;const a=new Float32Array(9),l=a.subarray(0,3),c=a.subarray(3,6);Jb(o,c);const h=a.subarray(6,9);Jb(t,h);const d=h[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),e0(c,h,l)<f){let m,y;d?(m=c[2],y=1):(m=0,y=c[2]);const b=.005;for(;y-m>b;){const A=c[2]=(m+y)/2;d===e0(c,h,l)<f?m=A:y=A}c[2]=d?y:m}return of(c,l),i=nt.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),n0.set(e,i),i}function Ff({html:o,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof o=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=o.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const f=c[h];l.append(document.createTextNode(f)),h<d-1&&l.append(document.createElement("br"))}a.append(l)}else Uf.render({xfaHtml:o,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),i.append(a)}function nA(o){const t=new Path2D;if(!o)return t;for(let e=0,i=o.length;e<i;)switch(o[e++]){case ro.moveTo:t.moveTo(o[e++],o[e++]);break;case ro.lineTo:t.lineTo(o[e++],o[e++]);break;case ro.curveTo:t.bezierCurveTo(o[e++],o[e++],o[e++],o[e++],o[e++],o[e++]);break;case ro.quadraticCurveTo:t.quadraticCurveTo(o[e++],o[e++],o[e++],o[e++]);break;case ro.closePath:t.closePath();break;default:wt(`Unrecognized drawing path operator: ${o[e-1]}`);break}return t}class vo{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,vo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",dn,{signal:e}),t.addEventListener("pointerdown",vo.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:l}=t,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,re(t)}#h(t){this.#i._focusEventsAllowed=!0,re(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",dn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",vo.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#g(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#g),this.#r=t}addComment(t,e=null){if(this.#a)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#s=this.#g;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#g)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#g)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class SR{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",dn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,a=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const h=l.x+(e?l.width:0);if(c>i){a=h,i=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#r(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,i,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",dn,{signal:h}),l.addEventListener("click",a,{signal:h})),this.#t.append(l)}}function iA(o,t,e){for(const i of e)t.addEventListener(i,o[i].bind(o))}class Bt{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(Bt.#e||=new Set).add(t)}static setPointer(t,e){Bt.#t||=e,Bt.#n??=t}static setTimeStamp(t){Bt.#i=t}static isSamePointerId(t){return Bt.#t===t}static isSamePointerIdOrRemove(t){return Bt.#t===t?!0:(Bt.#e?.delete(t),!1)}static isSamePointerType(t){return Bt.#n===t}static isInitializedAndDifferentPointerType(t){return Bt.#n!==null&&!Bt.isSamePointerType(t)}static isSameTimeStamp(t){return Bt.#i===t}static isUsingMultiplePointers(){return Bt.#e?.size>=1}static clearPointerType(){Bt.#n=null}static clearPointerIds(){Bt.#t=NaN,Bt.#e=null}static clearTimeStamp(){Bt.#i=NaN}}class _R{#t=0;get id(){return`${xo}${this.#t++}`}}class zf{#t=jf();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return bt(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await ir(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=zf._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((f,m)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,f()},c.onload=async()=>{const y=i.svgUrl=c.result;h.src=await l?`${y}#svgView(preserveAspectRatio(none))`:y},h.onerror=c.onerror=m});c.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){wt(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#n(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class xR{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===l){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class Ho{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ae.platform;for(const[i,a,l={}]of t)for(const c of i){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:h=null}}=i;h&&!h(t,e)||(a.bind(t,...c,e)(),l||re(e))}}class Hf{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return AR(t),bt(this,"_colors",t)}convert(t){const e=sr(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,c)=>l===e[c]))return Hf._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?nt.makeHexColor(...e):t}}class Di{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new xR;#l=null;#d=null;#h=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#_=null;#w=null;#C=null;#A=!1;#x=null;#M=new _R;#R=!1;#D=!1;#B=!1;#k=null;#L=null;#j=null;#I=null;#G=null;#T=At.NONE;#S=new Set;#O=null;#U=null;#z=null;#X=null;#$=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#q=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Di.prototype,e=c=>c.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return bt(this,"_keyboardManager",new Ho([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,c,h,d,f,m,y,b,A,_,S,x){const E=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=i,this.#a=a,this.#l=l,this.#U=c,this.#$=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:E}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),h._on("setpreference",this.onSetPreference.bind(this),{signal:E}),h._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#E=d.filterFactory,this.#z=f,this.#C=m||null,this.#y=y,this.#v=b,this.#b=A,this.#G=_||null,this.viewParameters={realScale:Gs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=x!==!1,l?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#e=null,this.#S.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#x?.hide(),this.#x=null,this.#j?.destroy(),this.#j=null,this.#i=null,this.#_&&(clearTimeout(this.#_),this.#_=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return bt(this,"hcmFilter",this.#z?this.#E.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return bt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return bt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return bt(this,"highlightColors",null);const e=new Map,i=!!this.#z;for(const[a,l]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),l);continue}!i&&!c&&e.set(a,l)}return bt(this,"highlightColors",e)}get highlightColorNames(){return bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#j=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:a,y:l,width:c,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+h)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Gs.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h}=i,d=i.toString(),m=this.#Q(i).closest(".textLayer"),y=this.getSelectionBoxes(m);if(!y)return;i.empty();const b=this.#tt(m),A=this.#T===At.NONE,_=()=>{const S=b?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:y,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h,text:d});A&&this.showAllEditors("highlight",!0,!0),e&&S?.editComment()};if(A){this.switchToMode(At.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#x||=new SR(this),this.#x.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${xo}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#O&&(this.#x?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#O)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#O&&(this.#x?.hide(),this.#O=null,this.#N({hasSelectedText:!1}));return}if(this.#x?.hide(),this.#O=e,this.#N({hasSelectedText:!0}),!(this.#T!==At.HIGHLIGHT&&this.#T!==At.NONE)&&(this.#T===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===At.HIGHLIGHT?this.#tt(a):null;if(l?.toggleDrawing(),this.#D){const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#w)return;this.#w=new AbortController;const t=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#S)if(e.div.contains(t)){this.#L=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,e]=this.#L;this.#L=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#k)return;this.#k=new AbortController;const t=this.combinedSignal(this.#k);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#k?.abort(),this.#k=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#S){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){wt(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;l.push(f)}const c=()=>{for(const d of l)this.#nt(d);this.#it(l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){wt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==At.NONE&&!this.isEditorHandlingKeyboard&&Di._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#N(t){Object.entries(t).some(([i,a])=>this.#Y[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,t)}),this.#T===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#V([[Mt.HIGHLIGHT_FREE,!0]]))}#V(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#N({isEditing:this.#T!==At.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#N({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#V(e.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,l=!1,c=!1){if(this.#T!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===At.NONE){this.setEditingState(!1),this.#pt();for(const h of this.#n.values())h.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const h of this.#n.values())h.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#U?.loadSignatures(),i&&Bt.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const h of this.#r.values())h.updateMode(t);if(t===At.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const h=new Set,d=[];for(const f of this.#n.values()){const{annotationElementId:m,hasComment:y,deleted:b}=f;m&&h.add(m),y&&!b&&d.push(f.getData())}for(const f of this.#i){const{id:m,popupRef:y,contentsObj:b}=f;y&&b?.str&&!h.has(m)&&!this.#g.has(m)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){a&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const h of this.#n.values())h.uid===e?(this.setSelected(h),c?h.editComment():l?h.enterInEditMode():h.focus()):h.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(e);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#n.values())l.editorType===t&&l.show(e);(this.#X?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#V([[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#B!==t){this.#B=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#_&&clearTimeout(this.#_),this.#_=setTimeout(()=>{this.focusMainContainer(),this.#_=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#g.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#g.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#g.has(t)}removeDeletedAnnotationElement(t){this.#g.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#V(t.propertiesToUpdate))}get#mt(){let t=null;for(t of this.#S);return t}updateUI(t){this.#mt===t&&this.#V(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#V(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#S.has(t)){this.#S.delete(t),t.unselect(),this.#N({hasSelectedEditor:this.hasSelection});return}this.#S.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#S)e!==t&&e.unselect();this.#S.clear(),this.#S.add(t),t.select(),this.#V(t.propertiesToUpdate),this.#N({hasSelectedEditor:!0})}isSelected(t){return this.#S.has(t)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(t){t.unselect(),this.#S.delete(t),this.#N({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#N({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#N({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#S],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#nt(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#S)e.unselect();this.#S.clear();for(const e of t)e.isEmpty()||(this.#S.add(e),e.select());this.#N({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#S)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#S)t.unselect();this.#S.clear(),this.#N({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,l]=this.#H,c=[...this.#S],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},h);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const t of this.#S)this.#m.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const t=this.#m;this.#m=null;let e=!1;for(const[{x:a,y:l,pageIndex:c},h]of t)h.newX=a,h.newY=l,h.newPageIndex=c,e||=a!==h.savedX||l!==h.savedY||c!==h.savedPageIndex;if(!e)return!1;const i=(a,l,c,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,l,c):(a.pageIndex=h,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:h}]of t)i(a,l,c,h)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:h}]of t)i(a,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#m)for(const i of this.#m.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==At.NONE}get imageManager(){return bt(this,"imageManager",new zf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,m=e.rangeCount;f<m;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,m,y,b)=>({x:(m-a)/c,y:1-(f+y-i)/l,width:b/c,height:y/l});break;case"180":h=(f,m,y,b)=>({x:1-(f+y-i)/l,y:1-(m+b-a)/c,width:y/l,height:b/c});break;case"270":h=(f,m,y,b)=>({x:1-(m+b-a)/c,y:(f-i)/l,width:b/c,height:y/l});break;default:h=(f,m,y,b)=>({x:(f-i)/l,y:(m-a)/c,width:y/l,height:b/c});break}const d=[];for(let f=0,m=e.rangeCount;f<m;f++){const y=e.getRangeAt(f);if(!y.collapsed)for(const{x:b,y:A,width:_,height:S}of y.getClientRects())_===0||S===0||d.push(h(b,A,_,S))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#T===At.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#I?.get(t);a&&(a.setCanvas(e,i),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class qn{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,qn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){qn._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",qn.#f.missing),e.setAttribute("data-l10n-id",qn.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",dn,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,a(l))},{signal:i}),await this.#m(),t}get#g(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await qn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#m())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#m())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",qn.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",qn.#f[`${this.#g}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class dc{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/c,(e+i-l)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",dn,{signal:i}),e&&(t.addEventListener("focusin",l=>{this.#n._focusEventsAllowed=!1,re(l)},{capture:!0,signal:i}),t.addEventListener("focusout",l=>{this.#n._focusEventsAllowed=!0,re(l)},{capture:!0,signal:i})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#i=!0,a(l))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:m,height:y,x:b,y:A}=this.#n;i=b+i*m,a=A+a*y}const l=this.#n.parent.boundingClientRect,{x:c,y:h,width:d,height:f}=l;this.#n._uiManager.editComment(this.#n,c+i*d,h+a*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Vo{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#i=i,this.#n=e,this.#r=a,this.#a=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Ln.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,l=AbortSignal.any([this.#c,a.signal]),c=this.#t,h={capture:!0,signal:l,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(re(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#g.bind(this),c);const h=this.#m.bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",re,c),l.addEventListener("pointermove",re,c),l.addEventListener("pointercancel",re,c),l.addEventListener("pointerup",re,c),this.#r?.()}if(re(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(t){if(!this.#l||t.touches.length!==2)return;re(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:h}=i,d=this.#l,{touch0X:f,touch0Y:m,touch1X:y,touch1Y:b}=d,A=y-f,_=b-m,S=c-a,x=h-l,E=Math.hypot(S,x)||1,C=Math.hypot(A,_)||1;if(!this.#e&&Math.abs(C-E)<=Vo.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=c,d.touch1Y=h,!this.#e){this.#e=!0;return}const R=[(a+c)/2,(l+h)/2];this.#a?.(R,C,E)}#m(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(re(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class dt{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#E=0;#_=0;#w=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#x=dt._zIndex++;static _borderLineWidth=-1;static _colorManager=new Hf;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=dt.prototype._resizeWithKeyboard,e=Di.TRANSLATE_SMALL,i=Di.TRANSLATE_BIG;return bt(this,"_resizerKeyboardManager",new Ho([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],dt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new ER({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(dt._l10n??=t,dt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),dt._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);dt._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Wt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(t){this.#A=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#x}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#M([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#M(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:b}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,b)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,f]=this.getBaseTranslation();c+=d,h+=f;const{style:m}=i;m.left=`${(100*c).toFixed(2)}%`,m.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=dt,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:c,width:h,height:d}=this;if(h*=i,d*=a,l*=i,c*=a,this._mustFixPosition)switch(t){case 0:l=Pe(l,0,i-h),c=Pe(c,0,a-d);break;case 90:l=Pe(l,0,i-d),c=Pe(c,h,a);break;case 180:l=Pe(l,h,i),c=Pe(c,d,a);break;case 270:l=Pe(l,d,i),c=Pe(c,0,a-h);break}this.x=l/=i,this.y=c/=a;const[f,m]=this.getBaseTranslation();l+=f,c+=m,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return dt.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return dt.#R(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#k.bind(this,i),{signal:e}),a.addEventListener("contextmenu",dn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#k(t,e){e.preventDefault();const{isMac:i}=Ae.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",re,{passive:!1,signal:c}),window.addEventListener("contextmenu",dn,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#j()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#L(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#j(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const l=this.x,c=this.y,h=this.width,d=this.height;l===t&&c===e&&h===i&&d===a||this.addCommands({cmd:this.#L.bind(this,l,c,h,d),undo:this.#L.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#I(t,e){const[i,a]=this.parentDimensions,l=this.x,c=this.y,h=this.width,d=this.height,f=dt.MIN_SIZE/i,m=dt.MIN_SIZE/a,y=this.#D(this.rotation),b=(L,H)=>[y[0]*L+y[2]*H,y[1]*L+y[3]*H],A=this.#D(360-this.rotation),_=(L,H)=>[A[0]*L+A[2]*H,A[1]*L+A[3]*H];let S,x,E=!1,C=!1;switch(t){case"topLeft":E=!0,S=(L,H)=>[0,0],x=(L,H)=>[L,H];break;case"topMiddle":S=(L,H)=>[L/2,0],x=(L,H)=>[L/2,H];break;case"topRight":E=!0,S=(L,H)=>[L,0],x=(L,H)=>[0,H];break;case"middleRight":C=!0,S=(L,H)=>[L,H/2],x=(L,H)=>[0,H/2];break;case"bottomRight":E=!0,S=(L,H)=>[L,H],x=(L,H)=>[0,0];break;case"bottomMiddle":S=(L,H)=>[L/2,H],x=(L,H)=>[L/2,0];break;case"bottomLeft":E=!0,S=(L,H)=>[0,H],x=(L,H)=>[L,0];break;case"middleLeft":C=!0,S=(L,H)=>[0,H/2],x=(L,H)=>[L,H/2];break}const R=S(h,d),k=x(h,d);let O=b(...k);const I=dt._round(l+O[0]),B=dt._round(c+O[1]);let Y=1,K=1,tt,Z;if(e.fromKeyboard)({deltaX:tt,deltaY:Z}=e);else{const{screenX:L,screenY:H}=e,[J,St]=this.#l;[tt,Z]=this.screenToPageTranslation(L-J,H-St),this.#l[0]=L,this.#l[1]=H}if([tt,Z]=_(tt/i,Z/a),E){const L=Math.hypot(h,d);Y=K=Math.max(Math.min(Math.hypot(k[0]-R[0]-tt,k[1]-R[1]-Z)/L,1/h,1/d),f/h,m/d)}else C?Y=Pe(Math.abs(k[0]-R[0]-tt),f,1)/h:K=Pe(Math.abs(k[1]-R[1]-Z),m,1)/d;const rt=dt._round(h*Y),Q=dt._round(d*K);O=b(...x(rt,Q));const at=I-O[0],ct=B-O[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=rt,this.height=Q,this.x=at,this.y=ct,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new vo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(qn.initialize(dt._l10n),this.#i=new qn(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new dc(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new dc(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new dc(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new dc(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),iA(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new Vo({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#D(this.rotation),h=(I,B)=>[c[0]*I+c[2]*B,c[1]*I+c[3]*B],[d,f]=this.parentDimensions,m=this.x,y=this.y,b=this.width,A=this.height,_=dt.MIN_SIZE/d,S=dt.MIN_SIZE/f;l=Math.max(Math.min(l,1/b,1/A),_/b,S/A);const x=dt._round(b*l),E=dt._round(A*l);if(x===b&&E===A)return;this.#u||=[m,y,b,A];const C=h(b/2,A/2),R=dt._round(m+C[0]),k=dt._round(y+C[1]),O=h(x/2,E/2);this.x=R-O[0],this.y=k-O[1],this.width=x,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#j()}pointerdown(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(t);return}this.#O(t)}#O(t){const{isMac:e}=Ae.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},h=f=>{a.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#O(f),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#_=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:m,clientY:y,pointerId:b}=f;if(b!==this.#s){re(f);return}const[A,_]=this.screenToPageTranslation(m-this.#E,y-this.#_);this.#E=m,this.#_=y,this._uiManager.dragSelectedEditors(A,_)},c),window.addEventListener("touchmove",re,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&h(f),re(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){h(f);return}re(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,m=e/a,y=this.x*l,b=this.y*c,A=this.width*l,_=this.height*c;switch(i){case 0:return[y+f+h,c-b-m-_+d,y+f+A+h,c-b-m+d];case 90:return[y+m+h,c-b+f+d,y+m+_+h,c-b+f+A+d];case 180:return[y-f-A+h,c-b+m+d,y-f+h,c-b+m+_+d];case 270:return[y-m-_+h,c-b-f-A+d,y-m+h,c-b-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,c]=t,h=l-i,d=c-a;switch(this.rotation){case 0:return[i,e-c,h,d];case 90:return[i,e-a,d,h];case 180:return[l,e-a,h,d];case 270:return[l,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:l,richText:c},uid:h,pageIndex:d,creationDate:f,modificationDate:m}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:i||m,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[h,d,f,m]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/l,a.y=d/c,a.width=f/l,a.height=m/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#w){for(const t of this.#w.values())clearTimeout(t);this.#w=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,l,c]=this.getPDFRect();return[dt._round(i+(l-i)*t),dt._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#X.bind(this),h=this.#$.bind(this),d=this._uiManager._signal;for(const f of this.#e){const m=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#Y.bind(this,m),{signal:d}),f.setAttribute("data-l10n-id",dt._l10nResizer[m])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)this.#c.append(this.#c.firstElementChild);else if(l>a)for(let h=0;h<l-a;h++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const h of e){const f=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",dt._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){dt._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#Y(t){this.#g=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#I(this.#g,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#j()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#w||=new Map;const{action:i}=t;let a=this.#w.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},dt._telemetryTimeout),this.#w.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class ER extends dt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const i0=3285377520,_n=4294901760,Vn=65535;class sA{constructor(t){this.h1=t?t&4294967295:i0,this.h2=t?t&4294967295:i0}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let S=0,x=t.length;S<x;S++){const E=t.charCodeAt(S);E<=255?e[i++]=E:(e[i++]=E>>>8,e[i++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,m=this.h2;const y=3432918353,b=461845907,A=y&Vn,_=b&Vn;for(let S=0;S<a;S++)S&1?(h=c[S],h=h*y&_n|h*A&Vn,h=h<<15|h>>>17,h=h*b&_n|h*_&Vn,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[S],d=d*y&_n|d*A&Vn,d=d<<15|d>>>17,d=d*b&_n|d*_&Vn,m^=d,m=m<<13|m>>>19,m=m*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*y&_n|h*A&Vn,h=h<<15|h>>>17,h=h*b&_n|h*_&Vn,a&1?f^=h:m^=h}this.h1=f,this.h2=m}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&_n|t*36045&Vn,e=e*4283543511&_n|((e<<16|t>>>16)*2950163797&_n)>>>16,t^=e>>>1,t=t*444984403&_n|t*60499&Vn,e=e*3301882366&_n|((e<<16|t>>>16)*3120437893&_n)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const lf=Object.freeze({map:null,hash:"",transfer:void 0});class Vf{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof dt&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof dt)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(a=!0,i[l]=c);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof dt&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new aA(this)}get serializable(){if(this.#n.size===0)return lf;const t=new Map,e=new sA,i=[],a=Object.create(null);let l=!1;for(const[c,h]of this.#n){const d=h instanceof dt?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:lf}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const l of this.#n.values()){if(!(l instanceof dt)){l.popup&&(l.popup.deleted?a+=1:i+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(i+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,m]of Object.entries(c)){if(f==="type")continue;let y=d.get(f);y||(y=new Map,d.set(f,y));const b=y.get(m)??0;y.set(m,b+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class aA extends Vf{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){Wt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return bt(this,"modifiedIds",{ids:new Set,hash:""})}}class TR{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(kt(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,h=new FontFace(a,l,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{wt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Wt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw wt(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return bt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return bt(this,"isSyncFontLoadingSupported",je||Ae.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(kt(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return bt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(k,O){return k.charCodeAt(O)<<24|k.charCodeAt(O+1)<<16|k.charCodeAt(O+2)<<8|k.charCodeAt(O+3)&255}function a(k,O,I,B){const Y=k.substring(0,O),K=k.substring(O+I);return Y+B+K}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function m(k,O){if(++f>30){wt("Load test font never loaded."),O();return}if(d.font="30px "+k,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(m.bind(null,k,O))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let b=this._loadTestFont;b=a(b,976,y.length,y);const _=16,S=1482184792;let x=i(b,_);for(l=0,c=y.length-3;l<c;l+=4)x=x-S+i(y,l)|0;l<y.length&&(x=x-S+i(y+"XXX",l)|0),b=a(b,_,4,fR(x));const E=`url(data:font/opentype;base64,${btoa(b)});`,C=`@font-face {font-family:"${y}";src:${E}}`;this.insertRule(C);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const k of[t.loadedName,y]){const O=this._document.createElement("span");O.textContent="Hi",O.style.fontFamily=k,R.append(O)}this._document.body.append(R),m(y,()=>{R.remove(),e.complete()})}}class CR{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${Wv(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){wt(`getPathGenerator - ignoring character: "${c}".`)}const l=nA(a?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){bt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){bt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class Va{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of Va.strings){const m=e.encode(t[f]);i[f]=m,a+=4+m.length}const l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let d=0;for(const f of Va.strings){const m=i[f],y=m.length;h.setUint32(d,y),c.set(m,d+4),d+=4+y}return kt(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){kt(t<Va.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Ga{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const b of Ga.strings){const A=e.encode(t[b]);i[b]=A,a+=4+A.length}a+=4;let l,c,h=1+a;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+l.length+4+c.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let y=0;m.setUint8(y++,t.guessFallback?1:0),m.setUint32(y,0),y+=4,a=0;for(const b of Ga.strings){const A=i[b],_=A.length;a+=4+_,m.setUint32(y,_),f.set(A,y+4),y+=4+_}return m.setUint32(y-a-4,a),t.style&&(m.setUint32(y,l.length),f.set(l,y+4),y+=4+l.length,m.setUint32(y,c.length),f.set(c,y+4),y+=4+c.length),kt(y<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(y)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){kt(t<Ga.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),l=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:l}}}class qt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){kt(t<qt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return kt(t<qt.numbers.length,"Invalid number index"),this.#o.getFloat64(qt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=qt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=qt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=qt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){kt(t<qt.strings.length,"Invalid string index");let e=qt.#r+4;for(let l=0;l<t;l++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,e+4,i)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#a,t+4,l)}clearData(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(this.#a,t+4,a)),new Va(l.buffer)}get systemFontInfo(){let t=qt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,t+4,i)),new Ga(a.buffer)}static write(t){const e=t.systemFontInfo?Ga.write(t.systemFontInfo):null,i=t.cssFontInfo?Va.write(t.cssFontInfo):null,a=new TextEncoder,l={};let c=0;for(const S of qt.strings)l[S]=a.encode(t[S]),c+=4+l[S].length;const h=qt.#r+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),m=new DataView(d);let y=0;const b=qt.bools.length;let A=0,_=0;for(let S=0;S<b;S++){const x=t[qt.bools[S]];A|=(x===void 0?0:x?2:1)<<_,_+=2,(_===8||S===b-1)&&(m.setUint8(y++,A),A=0,_=0)}kt(y===qt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of qt.numbers)m.setFloat64(y,t[S]),y+=8;if(kt(y===qt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){m.setUint8(y++,4);for(const S of t.bbox)m.setInt16(y,S,!0),y+=2}else m.setUint8(y++,0),y+=8;if(kt(y===qt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){m.setUint8(y++,6);for(const S of t.fontMatrix)m.setFloat64(y,S,!0),y+=8}else m.setUint8(y++,0),y+=48;if(kt(y===qt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){m.setUint8(y++,1);for(const S of t.defaultVMetrics)m.setInt16(y,S,!0),y+=2}else m.setUint8(y++,0),y+=6;kt(y===qt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),m.setUint32(qt.#r,0),y+=4;for(const S of qt.strings){const x=l[S],E=x.length;m.setUint32(y,E),f.set(x,y+4),y+=4+E}if(m.setUint32(qt.#r,y-qt.#r-4),!e)m.setUint32(y,0),y+=4;else{const S=e.byteLength;m.setUint32(y,S),kt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),y+4),y+=4+S}if(!i)m.setUint32(y,0),y+=4;else{const S=i.byteLength;m.setUint32(y,S),kt(y+4+S<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),y+4),y+=4+S}return t.data===void 0?(m.setUint32(y,0),y+=4):(m.setUint32(y,t.data.length),f.set(t.data,y+4),y+=4+t.data.length),kt(y<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(y)}}class Ee{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,a=[],l=[],c=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],l=t[3],h=t[4]||[],i=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const m=Math.floor(a.length/2),y=Math.floor(l.length/3),b=c.length,A=h.length;let _=0;for(const O of h)_+=1,_=Math.ceil(_/4)*4,_+=4+O.coords.length*4,_+=4+O.colors.length*4,O.verticesPerRow!==void 0&&(_+=4);const S=20+m*8+y*3+b*8+(i?16:0)+(f?3:0)+_,x=new ArrayBuffer(S),E=new DataView(x),C=new Uint8Array(x);E.setUint8(Ee.#t,e),E.setUint8(Ee.#e,i?1:0),E.setUint8(Ee.#i,f?1:0),E.setUint8(Ee.#n,d),E.setUint32(Ee.#r,m,!0),E.setUint32(Ee.#a,y,!0),E.setUint32(Ee.#s,b,!0),E.setUint32(Ee.#o,A,!0);let R=20;new Float32Array(x,R,m*2).set(a),R+=m*8,C.set(l,R),R+=y*3;for(const[O,I]of c)E.setFloat32(R,O,!0),R+=4,E.setUint32(R,parseInt(I.slice(1),16),!0),R+=4;if(i)for(const O of i)E.setFloat32(R,O,!0),R+=4;f&&(C.set(f,R),R+=3);for(let O=0;O<h.length;O++){const I=h[O];E.setUint8(R,I.type),R+=1,R=Math.ceil(R/4)*4,E.setUint32(R,I.coords.length,!0),R+=4,new Int32Array(x,R,I.coords.length).set(I.coords),R+=I.coords.length*4,E.setUint32(R,I.colors.length,!0),R+=4,new Int32Array(x,R,I.colors.length).set(I.colors),R+=I.colors.length*4,I.verticesPerRow!==void 0&&(E.setUint32(R,I.verticesPerRow,!0),R+=4)}return x}getIR(){const t=this.view,e=this.data[Ee.#t],i=!!this.data[Ee.#e],a=!!this.data[Ee.#i],l=t.getUint32(Ee.#r,!0),c=t.getUint32(Ee.#a,!0),h=t.getUint32(Ee.#s,!0),d=t.getUint32(Ee.#o,!0);let f=20;const m=new Float32Array(this.buffer,f,l*2);f+=l*8;const y=new Uint8Array(this.buffer,f,c*3);f+=c*3;const b=[];for(let x=0;x<h;++x){const E=t.getFloat32(f,!0);f+=4;const C=t.getUint32(f,!0);f+=4,b.push([E,`#${C.toString(16).padStart(6,"0")}`])}let A=null;if(i){A=[];for(let x=0;x<4;++x)A.push(t.getFloat32(f,!0)),f+=4}let _=null;a&&(_=new Uint8Array(this.buffer,f,3),f+=3);const S=[];for(let x=0;x<d;++x){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const C=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,C);f+=C*4;const k=t.getUint32(f,!0);f+=4;const O=new Int32Array(this.buffer,f,k);f+=k*4;const I={type:E,coords:R,colors:O};E===rf.LATTICE&&(I.verticesPerRow=t.getUint32(f,!0),f+=4),S.push(I)}if(e===1)return["RadialAxial","axial",A,b,Array.from(m.slice(0,2)),Array.from(m.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",A,b,[m[0],m[1]],[m[3],m[4]],m[2],m[5]];if(e===3){const x=this.data[Ee.#n];let E=null;if(m.length>0){let C=m[0],R=m[0],k=m[1],O=m[1];for(let I=0;I<m.length;I+=2){const B=m[I],Y=m[I+1];C=C>B?B:C,k=k>Y?Y:k,R=R<B?B:R,O=O<Y?Y:O}E=[C,k,R,O]}return["Mesh",x,m,y,S,E,A,_]}throw new Error(`Unsupported pattern kind: ${e}`)}}class RR{static write(t){let e,i;return Ae.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#t;constructor(t){this.#t=t}get path(){return Ae.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function DR(o){if(o instanceof URL)return o.href;if(typeof o=="string"){if(je)return o;const t=URL.parse(o,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function MR(o){if(je&&typeof Buffer<"u"&&o instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength)return o;if(typeof o=="string")return Uo(o);if(o instanceof ArrayBuffer||ArrayBuffer.isView(o)||typeof o=="object"&&!isNaN(o?.length))return new Uint8Array(o);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function fc(o){if(typeof o!="string")return null;if(o.endsWith("/"))return o;throw new Error(`Invalid factory url: "${o}" must include trailing slash.`)}const cf=o=>typeof o=="object"&&Number.isInteger(o?.num)&&o.num>=0&&Number.isInteger(o?.gen)&&o.gen>=0,NR=o=>typeof o=="object"&&typeof o?.name=="string",rA=yR.bind(null,cf,NR);class kR{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){wt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const pc={DATA:1,ERROR:2},ve={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s0(){}function We(o){if(o instanceof Ri||o instanceof jc||o instanceof Kb||o instanceof Eo||o instanceof jd)return o;switch(o instanceof Error||typeof o=="object"&&o!==null||Wt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),o.name){case"AbortException":return new Ri(o.message);case"InvalidPDFException":return new jc(o.message);case"PasswordException":return new Kb(o.message,o.code);case"ResponseException":return new Eo(o.message,o.status,o.missing);case"UnknownErrorException":return new jd(o.message,o.details)}return new jd(o.message,o.toString())}class fo{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===pc.DATA)a.resolve(t.data);else if(t.callback===pc.ERROR)a.reject(We(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:a,callback:pc.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:a,callback:pc.ERROR,callbackId:t.callbackId,reason:We(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const m=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:m,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),m.promise},pull:f=>{const m=Promise.withResolvers();return this.streamControllers[l].pullCall=m,d.postMessage({sourceName:c,targetName:h,stream:ve.PULL,streamId:l,desiredSize:f.desiredSize}),m.promise},cancel:f=>{kt(f instanceof Error,"cancel must have a valid reason");const m=Promise.withResolvers();return this.streamControllers[l].cancelCall=m,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:ve.CANCEL,streamId:l,reason:We(f)}),m.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(f,m=1,y){if(this.isCancelled)return;const b=this.desiredSize;this.desiredSize-=m,b>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:ve.ENQUEUE,streamId:e,chunk:f},y)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:ve.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){kt(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:ve.ERROR,streamId:e,reason:We(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ve.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:ve.START_COMPLETE,streamId:e,reason:We(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case ve.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(We(t.reason));break;case ve.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(We(t.reason));break;case ve.PULL:if(!h){l.postMessage({sourceName:i,targetName:a,stream:ve.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||s0).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ve.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:ve.PULL_COMPLETE,streamId:e,reason:We(f)})});break;case ve.ENQUEUE:if(kt(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case ve.CLOSE:if(kt(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,e);break;case ve.ERROR:kt(c,"error should have stream controller"),c.controller.error(We(t.reason)),this.#r(c,e);break;case ve.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(We(t.reason)),this.#r(c,e);break;case ve.CANCEL:if(!h)break;const d=We(t.reason);Promise.try(h.onCancel||s0,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:ve.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:ve.CANCEL_COMPLETE,streamId:e,reason:We(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class oA{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Wt("Abstract method `_createCanvas` called.")}}class OR extends oA{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class lA{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class a0 extends lA{async _fetch(t){const e=await ir(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Uo(e)}}class cA{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class LR extends cA{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(bi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(bi,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let y=0;y<256;y++)f[y]=d[y]/255;const m=f.join(",");return[m,m,m]}const[e,i,a]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,h[d]=a[d]/255;return[l.join(","),c.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(zo(e)?wt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=Bf(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,l]=this.#d(t),c=t.length===1?i:`${i}${a}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#m(h);return this.#p(i,a,l,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#c.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#c.set(a,l)),!t||!e))return l.url;const c=this.#v(t);t=nt.makeHexColor(...c);const h=this.#v(e);if(e=nt.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let A=0;A<=255;A++){const _=A/255;d[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const f=d.join(","),m=`g_${this.#n}_hcm_filter`,y=l.filter=this.#m(m);this.#p(f,f,f,y),this.#g(y);const b=(A,_)=>{const S=c[A]/255,x=h[A]/255,E=new Array(_+1);for(let C=0;C<=_;C++)E[C]=S+C/_*(x-S);return E.join(",")};return this.#p(b(0,5),b(1,5),b(2,5),y),l.url=this.#h(m),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#m(l);return this.#y(i,h),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#m(l);return this.#f(h),t&&this.#y(i,h),c}addHighlightHCMFilter(t,e,i,a,l){const c=`${e}-${i}-${a}-${l}`;let h=this.#c.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#c.set(t,h)),!e||!i))return h.url;const[d,f]=[e,i].map(this.#v.bind(this));let m=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),y=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[b,A]=[a,l].map(this.#v.bind(this));y<m&&([m,y,b,A]=[y,m,A,b]),this.#l.style.color="";const _=(E,C,R)=>{const k=new Array(256),O=(y-m)/R,I=E/255,B=(C-E)/(255*R);let Y=0;for(let K=0;K<=R;K++){const tt=Math.round(m+K*O),Z=I+K*B;for(let rt=Y;rt<=tt;rt++)k[rt]=Z;Y=tt+1}for(let K=Y;K<256;K++)k[K]=k[Y-1];return k.join(",")},S=`g_${this.#n}_hcm_${t}_filter`,x=h.filter=this.#m(S);return this.#g(x),this.#p(_(b[0],A[0],5),_(b[1],A[1],5),_(b[2],A[2],5),x),h.url=this.#h(S),h.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(bi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(bi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#r.createElementNS(bi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#p(t,e,i,a){const l=this.#r.createElementNS(bi,"feComponentTransfer");a.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",e),this.#u(l,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(bi,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,sr(getComputedStyle(this.#l).getPropertyValue("color"))}}class uA{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class r0 extends uA{async _fetch(t){const e=await ir(t,"arraybuffer");return new Uint8Array(e)}}class hA{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Wt("Abstract method `_fetch` called.")}}class o0 extends hA{async _fetch(t){const e=await ir(t,"arraybuffer");return new Uint8Array(e)}}je&&wt("Please use the `legacy` build in Node.js environments.");async function Gf(o){const e=await process.getBuiltinModule("fs").promises.readFile(o);return new Uint8Array(e)}class IR extends cA{}class PR extends oA{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class BR extends lA{async _fetch(t){return Gf(t)}}class jR extends uA{async _fetch(t){return Gf(t)}}class UR extends hA{async _fetch(t){return Gf(t)}}const Oa="__forcedDependency",{floor:l0,ceil:c0}=Math;function mc(o,t,e,i,a,l){o[t*4+0]=Math.min(o[t*4+0],e),o[t*4+1]=Math.min(o[t*4+1],i),o[t*4+2]=Math.max(o[t*4+2],a),o[t*4+3]=Math.max(o[t*4+3],l)}const uf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class FR{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===uf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const gc=(o,t)=>{if(!o)return;let e=o.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},o.set(t,e)),e};class zR{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[Oa]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#g;#m;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#g=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(uf,e.length)):this.#u.fill(uf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[Oa]:{__proto__:this.#e[Oa]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(gc(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(gc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(gc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(nt.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Oa,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(Oa,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,l,c){const h=nt.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];nt.axialAlignedBoundingBox([i,l,a,c],h,d);const f=nt.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,a,l,c){const h=this.#s;if(h[0]===1/0)return this;const d=nt.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(h[0]===-1/0)return nt.axialAlignedBoundingBox([i,l,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return nt.axialAlignedBoundingBox([i,l,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,i,a=1,l=0,c=0,h){const d=i.bbox;let f,m;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(m=[0,0,0,0],nt.axialAlignedBoundingBox(d,i.fontMatrix,m),(a!==1||l!==0||c!==0)&&nt.scaleMinMax([a,0,0,-a,l,c],m),f)))return this.recordBBox(t,e,m[0],m[2],m[1],m[3]);if(!h)return this.recordFullPageBBox(t);const y=h();return d&&m&&f===void 0&&(f=m[0]<=l-y.actualBoundingBoxLeft&&m[2]>=l+y.actualBoundingBoxRight&&m[1]<=c-y.actualBoundingBoxAscent&&m[3]>=c+y.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,m[0],m[2],m[1],m[3]):this.recordBBox(t,e,l-y.actualBoundingBoxLeft,l+y.actualBoundingBoxRight,c-y.actualBoundingBoxAscent,c+y.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in l&&l[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[Oa]),this.#p){const i=gc(this.#p,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=l0(this.#o[0]*256/this.#f),a=l0(this.#o[1]*256/this.#g),l=c0(this.#o[2]*256/this.#f),c=c0(this.#o[3]*256/this.#g);mc(this.#m,t,i,a,l,c);for(const h of this.#l)h!==t&&mc(this.#m,h,i,a,l,c);for(const h of this.#n)h!==t&&mc(this.#m,h,i,a,l,c);for(const h of this.#r)h!==t&&mc(this.#m,h,i,a,l,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new FR(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class zc{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof zc&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,l,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,l,c),this}recordBBox(t,e,i,a,l,c){return this.#i||this.#t.recordBBox(this.#e,e,i,a,l,c),this}recordCharacterBBox(t,e,i,a,l,c,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,l,c,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const xn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Oe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function hf(o,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),o.clip(a)}class qf{isModifyingCurrentTransform(){return!1}getPattern(){Wt("Abstract method `getPattern` called.")}}class HR extends qf{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,a=this._p0,l=this._p1;if(e&&(a=a.slice(),l=l.slice(),nt.applyTransform(a,e),nt.applyTransform(l,e)),this._type==="axial")i=t.createLinearGradient(a[0],a[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,h=this._r1;if(e){const d=new Float32Array(2);nt.singularValueDecompose2dScale(e,d),c*=d[0],h*=d[0]}i=t.createRadialGradient(a[0],a[1],c,l[0],l[1],h)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(t,e,i,a){let l;if(a===Oe.STROKE||a===Oe.FILL){if(this.isOriginBased()){let b=nt.transform(i,e.baseTransform);this.matrix&&(b=nt.transform(b,this.matrix));const A=.001,_=Math.hypot(b[0],b[1]),S=Math.hypot(b[2],b[3]),x=(b[0]*b[2]+b[1]*b[3])/(_*S);if(Math.abs(x)<A)if(this.isRadial()){if(Math.abs(_-S)<A)return this._createGradient(t,b)}else return this._createGradient(t,b)}const c=e.current.getClippedPathBoundingBox(a,ae(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),m=f.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-c[0],-c[1]),i=nt.transform(i,[1,0,0,1,c[0],c[1]]),m.transform(...e.baseTransform),this.matrix&&m.transform(...this.matrix),hf(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),l=t.createPattern(f.canvas,"no-repeat");const y=new DOMMatrix(i);l.setTransform(y)}else hf(t,this._bbox),l=this._createGradient(t);return l}}function zd(o,t,e,i,a,l,c,h){const d=t.coords,f=t.colors,m=o.data,y=o.width*4;let b;d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b),d[i+1]>d[a+1]&&(b=i,i=a,a=b,b=c,c=h,h=b),d[e+1]>d[i+1]&&(b=e,e=i,i=b,b=l,l=c,c=b);const A=(d[e]+t.offsetX)*t.scaleX,_=(d[e+1]+t.offsetY)*t.scaleY,S=(d[i]+t.offsetX)*t.scaleX,x=(d[i+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,C=(d[a+1]+t.offsetY)*t.scaleY;if(_>=C)return;const R=f[l],k=f[l+1],O=f[l+2],I=f[c],B=f[c+1],Y=f[c+2],K=f[h],tt=f[h+1],Z=f[h+2],rt=Math.round(_),Q=Math.round(C);let at,ct,L,H,J,St,_t,M;for(let V=rt;V<=Q;V++){if(V<x){const pt=V<_?0:(_-V)/(_-x);at=A-(A-S)*pt,ct=R-(R-I)*pt,L=k-(k-B)*pt,H=O-(O-Y)*pt}else{let pt;V>C?pt=1:x===C?pt=0:pt=(x-V)/(x-C),at=S-(S-E)*pt,ct=I-(I-K)*pt,L=B-(B-tt)*pt,H=Y-(Y-Z)*pt}let W;V<_?W=0:V>C?W=1:W=(_-V)/(_-C),J=A-(A-E)*W,St=R-(R-K)*W,_t=k-(k-tt)*W,M=O-(O-Z)*W;const et=Math.round(Math.min(at,J)),ft=Math.round(Math.max(at,J));let gt=y*V+et*4;for(let pt=et;pt<=ft;pt++)W=(at-pt)/(at-J),W<0?W=0:W>1&&(W=1),m[gt++]=ct-(ct-St)*W|0,m[gt++]=L-(L-_t)*W|0,m[gt++]=H-(H-M)*W|0,m[gt++]=255}}function VR(o,t,e){const i=t.coords,a=t.colors;let l,c;switch(t.type){case rf.LATTICE:const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,f=h-1;for(l=0;l<d;l++){let m=l*h;for(let y=0;y<f;y++,m++)zd(o,e,i[m],i[m+1],i[m+h],a[m],a[m+1],a[m+h]),zd(o,e,i[m+h+1],i[m+1],i[m+h],a[m+h+1],a[m+1],a[m+h])}break;case rf.TRIANGLES:for(l=0,c=i.length;l<c;l+=3)zd(o,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class GR extends qf{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,m=Math.ceil(this._bounds[3])-d,y=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),b=Math.min(Math.ceil(Math.abs(m*t[1]*1.1)),3e3),A=f/y,_=m/b,S={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/A,scaleY:1/_},x=y+4,E=b+4,C=i.getCanvas("mesh",x,E),R=C.context,k=R.createImageData(y,b);if(e){const I=k.data;for(let B=0,Y=I.length;B<Y;B+=4)I[B]=e[0],I[B+1]=e[1],I[B+2]=e[2],I[B+3]=255}for(const I of this._figures)VR(k,I,S);return R.putImageData(k,2,2),{canvas:C.canvas,offsetX:h-2*A,offsetY:d-2*_,scaleX:A,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){hf(t,this._bbox);const l=new Float32Array(2);if(a===Oe.SHADING)nt.singularValueDecompose2dScale(ae(t),l);else if(this.matrix){nt.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;nt.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else nt.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===Oe.SHADING?null:this._background,e.cachedCanvases);return a!==Oe.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class qR extends qf{getPattern(){return"hotpink"}}function $R(o){switch(o[0]){case"RadialAxial":return new HR(o);case"Mesh":return new GR(o);case"Dummy":return new qR}throw new Error(`Unknown IR type: ${o[0]}`)}const u0={COLORED:1,UNCOLORED:2};class $f{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:l,tilingType:c,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:m}=this;f=Math.abs(f),m=Math.abs(m),Zc("TilingType: "+c);const y=i[0],b=i[1],A=i[2],_=i[3],S=A-y,x=_-b,E=new Float32Array(2);nt.singularValueDecompose2dScale(this.matrix,E);const[C,R]=E;nt.singularValueDecompose2dScale(this.baseTransform,E);const k=C*E[0],O=R*E[1];let I=S,B=x,Y=!1,K=!1;const tt=Math.ceil(f*k),Z=Math.ceil(m*O),rt=Math.ceil(S*k),Q=Math.ceil(x*O);tt>=rt?I=f:Y=!0,Z>=Q?B=m:K=!0;const at=this.getSizeAndScale(I,this.ctx.canvas.width,k),ct=this.getSizeAndScale(B,this.ctx.canvas.height,O),L=t.cachedCanvases.getCanvas("pattern",at.size,ct.size),H=L.context,J=d.createCanvasGraphics(H,e);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,l,h),H.translate(-at.scale*y,-ct.scale*b),J.transform(0,at.scale,0,0,ct.scale,0,0),H.save(),J.dependencyTracker?.save(),this.clipBbox(J,y,b,A,_),J.baseTransform=ae(J.ctx),J.executeOperatorList(a),J.endDrawing(),J.dependencyTracker?.restore(),H.restore(),Y||K){const St=L.canvas;Y&&(I=f),K&&(B=m);const _t=this.getSizeAndScale(I,this.ctx.canvas.width,k),M=this.getSizeAndScale(B,this.ctx.canvas.height,O),V=_t.size,W=M.size,et=t.cachedCanvases.getCanvas("pattern-workaround",V,W),ft=et.context,gt=Y?Math.floor(S/f):0,pt=K?Math.floor(x/m):0;for(let Kt=0;Kt<=gt;Kt++)for(let jt=0;jt<=pt;jt++)ft.drawImage(St,V*Kt,W*jt,V,W,0,0,V,W);return{canvas:et.canvas,scaleX:_t.scale,scaleY:M.scale,offsetX:y,offsetY:b}}return{canvas:L.canvas,scaleX:at.scale,scaleY:ct.scale,offsetX:y,offsetY:b}}getSizeAndScale(t,e,i){const a=Math.max($f.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const c=a-e,h=l-i;t.ctx.rect(e,i,c,h),nt.axialAlignedBoundingBox([e,i,a,l],ae(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case u0.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=h;break;case u0.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new dR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,l){let c=i;a!==Oe.SHADING&&(c=nt.transform(c,e.baseTransform),this.matrix&&(c=nt.transform(c,this.matrix)));const h=this.createPatternCanvas(e,l);let d=new DOMMatrix(c);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function XR({src:o,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=Ae.isLittleEndian?4278190080:255,[d,f]=c?[l,h]:[h,l],m=i>>3,y=i&7,b=o.length;e=new Uint32Array(e.buffer);let A=0;for(let _=0;_<a;_++){for(const x=t+m;t<x;t++){const E=t<b?o[t]:255;e[A++]=E&128?f:d,e[A++]=E&64?f:d,e[A++]=E&32?f:d,e[A++]=E&16?f:d,e[A++]=E&8?f:d,e[A++]=E&4?f:d,e[A++]=E&2?f:d,e[A++]=E&1?f:d}if(y===0)continue;const S=t<b?o[t++]:255;for(let x=0;x<y;x++)e[A++]=S&1<<7-x?f:d}return{srcPos:t,destPos:A}}const h0=16,d0=100,YR=15,f0=10,Ke=16,Hd=new DOMMatrix,hn=new Float32Array(2),ja=new Float32Array([1/0,1/0,-1/0,-1/0]);function WR(o,t){if(o._removeMirroring)throw new Error("Context is already forwarding operations.");o.__originalSave=o.save,o.__originalRestore=o.restore,o.__originalRotate=o.rotate,o.__originalScale=o.scale,o.__originalTranslate=o.translate,o.__originalTransform=o.transform,o.__originalSetTransform=o.setTransform,o.__originalResetTransform=o.resetTransform,o.__originalClip=o.clip,o.__originalMoveTo=o.moveTo,o.__originalLineTo=o.lineTo,o.__originalBezierCurveTo=o.bezierCurveTo,o.__originalRect=o.rect,o.__originalClosePath=o.closePath,o.__originalBeginPath=o.beginPath,o._removeMirroring=()=>{o.save=o.__originalSave,o.restore=o.__originalRestore,o.rotate=o.__originalRotate,o.scale=o.__originalScale,o.translate=o.__originalTranslate,o.transform=o.__originalTransform,o.setTransform=o.__originalSetTransform,o.resetTransform=o.__originalResetTransform,o.clip=o.__originalClip,o.moveTo=o.__originalMoveTo,o.lineTo=o.__originalLineTo,o.bezierCurveTo=o.__originalBezierCurveTo,o.rect=o.__originalRect,o.closePath=o.__originalClosePath,o.beginPath=o.__originalBeginPath,delete o._removeMirroring},o.save=function(){t.save(),this.__originalSave()},o.restore=function(){t.restore(),this.__originalRestore()},o.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},o.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},o.transform=function(e,i,a,l,c,h){t.transform(e,i,a,l,c,h),this.__originalTransform(e,i,a,l,c,h)},o.setTransform=function(e,i,a,l,c,h){t.setTransform(e,i,a,l,c,h),this.__originalSetTransform(e,i,a,l,c,h)},o.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},o.rotate=function(e){t.rotate(e),this.__originalRotate(e)},o.clip=function(e){t.clip(e),this.__originalClip(e)},o.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},o.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},o.bezierCurveTo=function(e,i,a,l,c,h){t.bezierCurveTo(e,i,a,l,c,h),this.__originalBezierCurveTo(e,i,a,l,c,h)},o.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},o.closePath=function(){t.closePath(),this.__originalClosePath()},o.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class KR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function yc(o,t,e,i,a,l,c,h,d,f){const[m,y,b,A,_,S]=ae(o);if(y===0&&b===0){const C=c*m+_,R=Math.round(C),k=h*A+S,O=Math.round(k),I=(c+d)*m+_,B=Math.abs(Math.round(I)-R)||1,Y=(h+f)*A+S,K=Math.abs(Math.round(Y)-O)||1;return o.setTransform(Math.sign(m),0,0,Math.sign(A),R,O),o.drawImage(t,e,i,a,l,0,0,B,K),o.setTransform(m,y,b,A,_,S),[B,K]}if(m===0&&A===0){const C=h*b+_,R=Math.round(C),k=c*y+S,O=Math.round(k),I=(h+f)*b+_,B=Math.abs(Math.round(I)-R)||1,Y=(c+d)*y+S,K=Math.abs(Math.round(Y)-O)||1;return o.setTransform(0,Math.sign(y),Math.sign(b),0,R,O),o.drawImage(t,e,i,a,l,0,0,K,B),o.setTransform(m,y,b,A,_,S),[K,B]}o.drawImage(t,e,i,a,l,c,h,d,f);const x=Math.hypot(m,y),E=Math.hypot(b,A);return[x*d,E*f]}class p0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=af;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Se.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ja.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Oe.FILL,e=null){const i=this.minMax.slice();if(t===Oe.STROKE){e||Wt("Stroke bounding box must include transform."),nt.singularValueDecompose2dScale(e,hn);const a=hn[0]*this.lineWidth/2,l=hn[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=nt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ja,0)}getClippedPathBoundingBox(t=Oe.FILL,e=null){return nt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function m0(o,t){if(t instanceof ImageData){o.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%Ke,l=(e-a)/Ke,c=a===0?l:l+1,h=o.createImageData(i,Ke);let d=0,f;const m=t.data,y=h.data;let b,A,_,S;if(t.kind===bo.GRAYSCALE_1BPP){const x=m.byteLength,E=new Uint32Array(y.buffer,0,y.byteLength>>2),C=E.length,R=i+7>>3,k=4294967295,O=Ae.isLittleEndian?4278190080:255;for(b=0;b<c;b++){for(_=b<l?Ke:a,f=0,A=0;A<_;A++){const I=x-d;let B=0;const Y=I>R?i:I*8-7,K=Y&-8;let tt=0,Z=0;for(;B<K;B+=8)Z=m[d++],E[f++]=Z&128?k:O,E[f++]=Z&64?k:O,E[f++]=Z&32?k:O,E[f++]=Z&16?k:O,E[f++]=Z&8?k:O,E[f++]=Z&4?k:O,E[f++]=Z&2?k:O,E[f++]=Z&1?k:O;for(;B<Y;B++)tt===0&&(Z=m[d++],tt=128),E[f++]=Z&tt?k:O,tt>>=1}for(;f<C;)E[f++]=0;o.putImageData(h,0,b*Ke)}}else if(t.kind===bo.RGBA_32BPP){for(A=0,S=i*Ke*4,b=0;b<l;b++)y.set(m.subarray(d,d+S)),d+=S,o.putImageData(h,0,A),A+=Ke;b<c&&(S=i*a*4,y.set(m.subarray(d,d+S)),o.putImageData(h,0,A))}else if(t.kind===bo.RGB_24BPP)for(_=Ke,S=i*_,b=0;b<c;b++){for(b>=l&&(_=a,S=i*_),f=0,A=S;A--;)y[f++]=m[d++],y[f++]=m[d++],y[f++]=m[d++],y[f++]=255;o.putImageData(h,0,b*Ke)}else throw new Error(`bad image kind: ${t.kind}`)}function g0(o,t){if(t.bitmap){o.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%Ke,l=(e-a)/Ke,c=a===0?l:l+1,h=o.createImageData(i,Ke);let d=0;const f=t.data,m=h.data;for(let y=0;y<c;y++){const b=y<l?Ke:a;({srcPos:d}=XR({src:f,srcPos:d,dest:m,width:i,height:b,nonBlackColor:0})),o.putImageData(h,0,y*Ke)}}function oo(o,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)o[i]!==void 0&&(t[i]=o[i]);o.setLineDash!==void 0&&(t.setLineDash(o.getLineDash()),t.lineDashOffset=o.lineDashOffset)}function bc(o){o.strokeStyle=o.fillStyle="#000000",o.fillRule="nonzero",o.globalAlpha=1,o.lineWidth=1,o.lineCap="butt",o.lineJoin="miter",o.miterLimit=10,o.globalCompositeOperation="source-over",o.font="10px sans-serif",o.setLineDash!==void 0&&(o.setLineDash([]),o.lineDashOffset=0);const{filter:t}=o;t!=="none"&&t!==""&&(o.filter="none")}function y0(o,t){if(t)return!0;nt.singularValueDecompose2dScale(o,hn);const e=Math.fround(Ln.pixelRatio*Gs.PDF_TO_CSS_UNITS);return hn[0]<=e&&hn[1]<=e}const QR=["butt","round","square"],ZR=["miter","round","bevel"],JR={},b0={};class qa{constructor(t,e,i,a,l,{optionalContentConfig:c,markedContentStack:h=null},d,f,m){this.ctx=t,this.current=new p0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new KR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=m??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ae(this.compositeCtx))}this.ctx.save(),bc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ae(this.ctx)}executeOperatorList(t,e,i,a,l){const c=t.argsArray,h=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const m=f-d>f0&&typeof i=="function",y=m?Date.now()+YR:0;let b=0;const A=this.commonObjs,_=this.objs;let S,x;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!l||l(d))if(S=h[d],x=c[d]??null,S!==Ka.dependency)x===null?this[S](d):this[S](d,...x);else for(const E of x){this.dependencyTracker?.recordNamedData(E,d);const C=E.startsWith("g_")?A:_;if(!C.has(E))return C.get(E,i),d}if(d++,d===f)return d;if(m&&++b>f0){if(Date.now()>y)return i(),d;b=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=a,f="prescale1",m,y;for(;l>2&&h>1||c>2&&d>1;){let b=h,A=d;l>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/b),c>2&&d>1&&(A=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/A),m=this.cachedCanvases.getCanvas(f,b,A),y=m.context,y.clearRect(0,0,b,A),y.drawImage(t,0,0,h,d,0,0,b,A),t=m.canvas,h=b,d=A,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,d=ae(i);let f,m,y,b;if((e.bitmap||e.data)&&e.count>1){const tt=e.bitmap||e.data.buffer;m=JSON.stringify(h?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(tt),f||(f=new Map,this._cachedBitmapsMap.set(tt,f));const Z=f.get(m);if(Z&&!h){const rt=Math.round(Math.min(d[0],d[2])+d[4]),Q=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,xn.transformAndFill),{canvas:Z,offsetX:rt,offsetY:Q}}y=Z}y||(b=this.cachedCanvases.getCanvas("maskCanvas",a,l),g0(b.context,e));let A=nt.transform(d,[1/a,0,0,-1/l,0,0]);A=nt.transform(A,[1,0,0,1,0,-l]);const _=ja.slice();nt.axialAlignedBoundingBox([0,0,a,l],A,_);const[S,x,E,C]=_,R=Math.round(E-S)||1,k=Math.round(C-x)||1,O=this.cachedCanvases.getCanvas("fillCanvas",R,k),I=O.context,B=S,Y=x;I.translate(-B,-Y),I.transform(...A),y||(y=this._scaleImage(b.canvas,Hn(I)),y=y.img,f&&h&&f.set(m,y)),I.imageSmoothingEnabled=y0(ae(I),e.interpolate),yc(I,y,0,0,y.width,y.height,0,0,a,l),I.globalCompositeOperation="source-in";const K=nt.transform(Hn(I),[1,0,0,1,-B,-Y]);return I.fillStyle=h?c.getPattern(i,this,K,Oe.FILL,t):c,I.fillRect(0,0,a,l),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(m,O.canvas)),this.dependencyTracker?.recordDependencies(t,xn.transformAndFill),{canvas:O.canvas,offsetX:Math.round(B),offsetY:Math.round(Y)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=QR[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=ZR[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),oo(this.suspendedCtx,c),WR(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),oo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],c=a[1],h=a[2]-l,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,c,h,d,f,m,y){let b=t.canvas,A=d-m,_=f-y;if(c)if(A<0||_<0||A+i>b.width||_+a>b.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,a),E=x.context;E.drawImage(b,-A,-_),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,i,a),E.globalCompositeOperation="source-over",b=x.canvas,A=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(A,_,i,a),t.clip(x),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(A,_,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const S=new Path2D;S.rect(d,f,i,a),e.clip(S),e.globalCompositeOperation="destination-in",e.drawImage(b,A,_,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&oo(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&oo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,c,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[l]=i;if(!a){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===Ka.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=i[0]=nA(l)),nt.axialAlignedBoundingBox(a,ae(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,Hn(a),Oe.STROKE,t),c){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,xn.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Oe.STROKE,ae(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const f=l.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=l.getPattern(a,this,Hn(a),Oe.FILL,t),f){const m=new Path2D;m.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=m}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,xn.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,xn.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=JR}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=b0}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:f,path:m}of e)m&&a.addPath(m,new DOMMatrix(c).preMultiplySelf(l).translate(h,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||af,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&wt("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let m=i;i<h0?m=h0:i>d0&&(m=d0),this.current.fontSizeScale=i/m,this.ctx.font=`${f} ${d} ${m}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l,c){const h=this.ctx,d=this.current,f=d.font,m=d.textRenderingMode,y=d.fontSize/d.fontSizeScale,b=m&Se.FILL_STROKE_MASK,A=!!(m&Se.ADD_TO_PATH_FLAG),_=d.patternFill&&!f.missingFile,S=d.patternStroke&&!f.missingFile;let x;if((f.disableFontFace||A||_||S)&&!f.missingFile&&(x=f.getPathGenerator(this.commonObjs,e)),x&&(f.disableFontFace||_||S)){h.save(),h.translate(i,a),h.scale(y,-y),this.dependencyTracker?.recordCharacterBBox(t,h,f);let E;if(b===Se.FILL||b===Se.FILL_STROKE)if(l){E=h.getTransform(),h.setTransform(...l);const C=this.#i(x,E,l);h.fill(C)}else h.fill(x);if(b===Se.STROKE||b===Se.FILL_STROKE)if(c){E||=h.getTransform(),h.setTransform(...c);const{a:C,b:R,c:k,d:O}=E,I=nt.inverseTransform(c),B=nt.transform([C,R,k,O,0,0],I);nt.singularValueDecompose2dScale(B,hn),h.lineWidth*=Math.max(hn[0],hn[1])/y,h.stroke(this.#i(x,E,c))}else h.lineWidth/=y,h.stroke(x);h.restore()}else(b===Se.FILL||b===Se.FILL_STROKE)&&(h.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e))),(b===Se.STROKE||b===Se.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a,()=>h.measureText(e)).recordDependencies(t,xn.stroke),h.strokeText(e,i,a));A&&((this.pendingTextPaths||=[]).push({transform:ae(h),x:i,y:a,fontSize:y,path:x}),this.dependencyTracker?.recordCharacterBBox(t,h,f,y,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return bt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,xn.showText).resetBBox(t),this.current.textRenderingMode&Se.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,h=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,m=i.fontDirection,y=i.textHScale*m,b=e.length,A=a.vertical,_=A?1:-1,S=a.defaultVMetrics,x=l*i.fontMatrix[0],E=i.textRenderingMode===Se.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),m>0?c.scale(y,-1):c.scale(y,1);let C,R;const k=i.textRenderingMode&Se.FILL_STROKE_MASK,O=k===Se.FILL||k===Se.FILL_STROKE,I=k===Se.STROKE||k===Se.FILL_STROKE;if(O&&i.patternFill){c.save();const Z=i.fillColor.getPattern(c,this,Hn(c),Oe.FILL,t);C=ae(c),c.restore(),c.fillStyle=Z}if(I&&i.patternStroke){c.save();const Z=i.strokeColor.getPattern(c,this,Hn(c),Oe.STROKE,t);R=ae(c),c.restore(),c.strokeStyle=Z}let B=i.lineWidth;const Y=i.textMatrixScale;if(Y===0||B===0?I&&(B=this.getSinglePixelWidth()):B/=Y,h!==1&&(c.scale(h,h),B/=h),c.lineWidth=B,a.isInvalidPDFjsFont){const Z=[];let rt=0;for(const at of e)Z.push(at.unicode),rt+=at.width;const Q=Z.join("");if(c.fillText(Q,0,0),this.dependencyTracker!==null){const at=c.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-at.actualBoundingBoxLeft,at.actualBoundingBoxRight,-at.actualBoundingBoxAscent,at.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=rt*x*y,c.restore(),this.compose();return}let K=0,tt;for(tt=0;tt<b;++tt){const Z=e[tt];if(typeof Z=="number"){K+=_*Z*l/1e3;continue}let rt=!1;const Q=(Z.isSpace?f:0)+d,at=Z.fontChar,ct=Z.accent;let L,H,J=Z.width;if(A){const M=Z.vmetric||S,V=-(Z.vmetric?M[1]:J*.5)*x,W=M[2]*x;J=M?-M[0]:J,L=V/h,H=(K+W)/h}else L=K/h,H=0;let St;if(a.remeasure&&J>0){St=c.measureText(at);const M=St.width*1e3/l*h;if(J<M&&this.isFontSubpixelAAEnabled){const V=J/M;rt=!0,c.save(),c.scale(V,1),L/=V}else J!==M&&(L+=(J-M)/2e3*l/h)}if(this.contentVisible&&(Z.isInFont||a.missingFile)){if(E&&!ct)c.fillText(at,L,H),this.dependencyTracker?.recordCharacterBBox(t,c,St?{bbox:null}:a,l/h,L,H,()=>St??c.measureText(at));else if(this.paintChar(t,at,L,H,C,R),ct){const M=L+l*ct.offset.x/h,V=H-l*ct.offset.y/h;this.paintChar(t,ct.fontChar,M,V,C,R)}}const _t=A?J*x-Q*m:J*x+Q*m;K+=_t,rt&&c.restore()}A?i.y-=K:i.x+=K*y,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,l=a.font,c=a.fontSize,h=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,m=a.wordSpacing,y=a.textHScale*h,b=a.fontMatrix||af,A=e.length,_=a.textRenderingMode===Se.INVISIBLE;let S,x,E,C;if(_||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(y,h);const R=this.dependencyTracker;for(this.dependencyTracker=R?new zc(R,t):null,S=0;S<A;++S){if(x=e[S],typeof x=="number"){C=d*x*c/1e3,this.ctx.translate(C,0),a.x+=C*y;continue}const k=(x.isSpace?m:0)+f,O=l.charProcOperatorList[x.operatorListId];O?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...b),this.executeOperatorList(O),this.restore()):wt(`Type3 character "${x.operatorListId}" is not available.`);const I=[x.width,0];nt.applyTransform(I,b),E=I[0]*c+k,i.translate(E,0),a.x+=E*y}i.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,l,c,h){const d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,l,h).recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||ae(this.ctx),l={createCanvasGraphics:(c,h)=>new qa(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new zc(this.dependencyTracker,h,!0):null)};i=new $f(e,this.ctx,l,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=$R(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,Hn(i),Oe.SHADING,t);const l=Hn(i);if(l){const{width:c,height:h}=i.canvas,d=ja.slice();nt.axialAlignedBoundingBox([0,0,c,h],l,d);const[f,m,y,b]=d;this.ctx.fillRect(f,m,y-f,b-m)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,xn.transform).recordDependencies(t,xn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Wt("Should not call beginInlineImage")}beginImageData(){Wt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ae(this.ctx),i)){nt.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,l,c,h]=i,d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||Zc("TODO: Support non-isolated groups."),e.knockout&&wt("Knockout groups not supported.");const a=ae(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=ja.slice();nt.axialAlignedBoundingBox(e.bbox,ae(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=nt.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-h,1),m=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,m]);let y="groupAt"+this.groupLevel;e.smask&&(y+="_smask_"+this.smaskCounter++%2);const b=this.cachedCanvases.getCanvas(y,f,m),A=b.context;A.translate(-h,-d),A.transform(...a);let _=new Path2D;const[S,x,E,C]=e.bbox;if(_.rect(S,x,E-S,C-x),e.matrix){const R=new Path2D;R.addPath(_,new DOMMatrix(e.matrix)),_=R}A.clip(_),e.smask&&this.smaskStack.push({canvas:b.canvas,context:A,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),oo(i,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=ae(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=ja.slice();nt.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,l,c){if(this.#t(),bc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,nt.singularValueDecompose2dScale(ae(this.ctx),hn);const{viewportScale:f}=this,m=Math.ceil(h*this.outputScaleX*f),y=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(m,y);const{canvas:b,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(e,b),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(hn[0],0,0,-hn[1],0,d*hn[1]),bc(this.ctx)}else{bc(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],h,d),this.ctx.clip(f)}}this.current=new p0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,l=0,c,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ae(d);d.transform(i,a,l,c,0,0);const m=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,m.offsetX-f[4],m.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let y=0,b=h.length;y<b;y+=2){const A=nt.transform(f,[i,a,l,c,h[y],h[y+1]]);d.drawImage(m.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+m.canvas.width,A[5],A[5]+m.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,xn.transformAndFill);for(const c of e){const{data:h,width:d,height:f,transform:m}=c,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),b=y.context;b.save();const A=this.getObject(t,h,c);g0(b,A),b.globalCompositeOperation="source-in",b.fillStyle=l?a.getPattern(b,this,Hn(i),Oe.FILL,t):a,b.fillRect(0,0,d,f),b.restore(),i.save(),i.transform(...m),i.scale(1,-1),yc(i,y.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){wt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){wt("Dependent image isn't ready yet");return}const h=c.width,d=c.height,f=[];for(let m=0,y=l.length;m<y;m+=2)f.push({transform:[i,0,0,a,l[m],l[m+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const m=this.cachedCanvases.getCanvas("inlineImage",i,a).context;m0(m,e),h=this.applyTransferMapsToCanvas(m)}const d=this._scaleImage(h,Hn(l));l.imageSmoothingEnabled=y0(ae(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-a,0).recordDependencies(t,xn.imageXObject).recordOperation(t),yc(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;m0(f,e),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),yc(a,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,xn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===b0?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ae(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let c,h;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)c=h=1/d;else{const m=d*t;c=h=m<1?1/m:1}else if(t===0)c=1/d,h=1/f;else{const m=d*t,y=f*t;c=m<1?1/m:1,h=y<1?1/y:1}}else{const d=Math.abs(e*l-i*a),f=Math.hypot(e,i),m=Math.hypot(a,l);if(t===0)c=m/d,h=f/d;else{const y=t*d;c=m>y?m/y:1,h=f>y?f/y:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(a||1)*l,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(l,c),Hd.a=1/l,Hd.d=1/c;const d=new Path2D;if(d.addPath(t,Hd),h.length>0){const f=Math.max(l,c);i.setLineDash(h.map(m=>m/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const o in Ka)qa.prototype[o]!==void 0&&(qa.prototype[Ka[o]]=qa.prototype[o]);class zs{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class tD{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const Ia=Symbol("INTERNAL");class eD{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&cn.DISPLAY),this.#e=!!(t&cn.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==Ia&&Wt("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class nD{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=cn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new eD(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(Ia,!1);for(const i of t.on)this.#e.get(i)._setVisible(Ia,!0);for(const i of t.off)this.#e.get(i)._setVisible(Ia,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return wt(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return Zc("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(wt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return wt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return wt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return wt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return wt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return wt(`Unknown optional content policy ${t.policy}.`),!0}return wt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){wt(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(Ia,!1,!0);a._setVisible(Ia,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new sA;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class iD{constructor(t,{disableRange:e=!1,disableStream:i=!1}){kt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});kt(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){kt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new sD(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new aD(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class sD{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=tu(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class aD{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function rD(o){let t=!0,e=i("filename\\*","i").exec(o);if(e){e=e[1];let m=h(e);return m=unescape(m),m=d(m),m=f(m),l(m)}if(e=c(o),e){const m=f(e);return l(m)}if(e=i("filename","i").exec(o),e){e=e[1];let m=h(e);return m=f(m),l(m)}function i(m,y){return new RegExp("(?:^|;)\\s*"+m+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function a(m,y){if(m){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const b=new TextDecoder(m,{fatal:!0}),A=Uo(y);y=b.decode(A),t=!1}catch{}}return y}function l(m){return t&&/[\x80-\xff]/.test(m)&&(m=a("utf-8",m),t&&(m=a("iso-8859-1",m))),m}function c(m){const y=[];let b;const A=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(b=A.exec(m))!==null;){let[,S,x,E]=b;if(S=parseInt(S,10),S in y){if(S===0)break;continue}y[S]=[x,E]}const _=[];for(let S=0;S<y.length&&S in y;++S){let[x,E]=y[S];E=h(E),x&&(E=unescape(E),S===0&&(E=d(E))),_.push(E)}return _.join("")}function h(m){if(m.startsWith('"')){const y=m.slice(1).split('\\"');for(let b=0;b<y.length;++b){const A=y[b].indexOf('"');A!==-1&&(y[b]=y[b].slice(0,A),y.length=b+1),y[b]=y[b].replaceAll(/\\(.)/g,"$1")}m=y.join('"')}return m}function d(m){const y=m.indexOf("'");if(y===-1)return m;const b=m.slice(0,y),_=m.slice(y+1).replace(/^[^']*'/,"");return a(b,_)}function f(m){return!m.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(m)?m:m.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,b,A,_){if(A==="q"||A==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,x){return String.fromCharCode(parseInt(x,16))}),a(b,_);try{_=atob(_)}catch{}return a(b,_)})}return""}function dA(o,t){const e=new Headers;if(!o||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function eu(o){return URL.parse(o)?.origin??null}function fA({responseHeaders:o,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(o.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||o.get("Accept-Ranges")!=="bytes"||(o.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function pA(o){const t=o.get("Content-Disposition");if(t){let e=rD(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(tu(e))return e}return null}function Go(o,t){return new Eo(`Unexpected server response (${o}) while retrieving PDF "${t}".`,o,o===404||o===0&&t.startsWith("file:"))}function mA(o){return o===200||o===206}function gA(o,t,e){return{method:"GET",headers:o,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function yA(o){return o instanceof Uint8Array?o.buffer:o instanceof ArrayBuffer?o:(wt(`getArrayBuffer - unexpected data format: ${o}`),new Uint8Array(o).buffer)}class oD{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=dA(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return kt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new cD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class lD{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,gA(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=eu(l.url),!mA(l.status))throw Go(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:d}=fA({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=pA(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Ri("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:yA(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class cD{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const c=a.url;fetch(c,gA(l,this._withCredentials,this._abortController)).then(h=>{const d=eu(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!mA(h.status))throw Go(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:yA(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Vd=200,Gd=206;function uD(o){const t=o.response;return typeof t!="string"?t:Uo(t).buffer}class hD{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=dA(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=Gd):a.expectedStatus=Vd,e.responseType="arraybuffer",kt(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const l=a.status||Vd;if(!(l===Vd&&i.expectedStatus===Gd)&&l!==i.expectedStatus){i.onError(a.status);return}const h=uD(a);if(l===Gd){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:h}):(wt('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class dD{constructor(t){this._source=t,this._manager=new hD(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return kt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fD(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new pD(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class fD{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=eu(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=fA({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=pA(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Go(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class pD{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=eu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Go(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const mD=/^[a-z][a-z0-9\-+.]+:/i;function gD(o){if(mD.test(o))return new URL(o);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(o))}class yD{constructor(t){this.source=t,this.url=gD(t.url),kt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return kt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new bD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new vD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class bD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=Go(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Ri("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class vD{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const lo=Symbol("INITIAL_DATA");class bA{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:lo}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===lo)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==lo}delete(t){const e=this.#t[t];return!e||e.data===lo?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==lo&&(yield[t,e])}}}const AD=1e5,v0=30;class Qe{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#_=null;static#w=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#m=t;else if(typeof t=="object")this.#m=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*Ln.pixelRatio,this.#d=i.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:c,pageY:h}=i.rawDims;this.#y=[1,0,0,-1,-c,h+l],this.#o=a,this.#s=l,Qe.#D(),e.style.setProperty("--min-font-size",Qe.#_),ms(e,i),this.#t.promise.finally(()=>{Qe.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ae.platform;return bt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#m.getReader(),Qe.#w.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*Ln.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,ms(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const l={div:null,properties:null,ctx:Qe.#M(this.#r)};for(const c of this.#u)l.properties=this.#p.get(c),l.div=c,this.#x(l)}}cancel(){const t=new Ri("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(t){if(this.#i)return;this.#a.ctx??=Qe.#M(this.#r);const e=this.#u,i=this.#g;for(const a of t){if(e.length>AD){wt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#A(a)}}#A(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=nt.transform(this.#y,t.transform);let l=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let h=this.#n&&c.fontSubstitution||c.fontFamily;h=Qe.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*Qe.#B(h,c,this.#r);let m,y;l===0?(m=a[4],y=a[5]-f):(m=a[4]+f*Math.sin(l),y=a[5]-f*Math.cos(l));const b=e.style;b.left=`${(100*m/this.#o).toFixed(2)}%`,b.top=`${(100*y/this.#s).toFixed(2)}%`,b.setProperty("--font-height",`${d.toFixed(2)}px`),b.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let A=!1;if(t.str.length>1)A=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);_!==S&&Math.max(_,S)/Math.min(_,S)>1.5&&(A=!0)}if(A&&(i.canvasWidth=c.vertical?t.height:t.width),this.#p.set(e,i),this.#a.div=e,this.#a.properties=i,this.#x(this.#a),i.hasText&&this.#e.append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#x(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=l,{canvasWidth:h,fontSize:d}=i;Qe.#R(a,d*this.#h,c);const{width:f}=a.measureText(e.textContent);f>0&&l.setProperty("--scale-x",h*this.#h/f)}i.angle!==0&&l.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#M(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#E.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#D(){if(this.#_!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#_=t.getBoundingClientRect().height,t.remove()}static#B(t,e,i){const a=this.#v.get(t);if(a)return a;const l=this.#M(i);l.canvas.width=l.canvas.height=v0,this.#R(l,v0,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return h?f=h/(h+d):(Ae.platform.isFirefox&&wt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const wD=100;function vA(o={}){typeof o=="string"||o instanceof URL?o={url:o}:(o instanceof ArrayBuffer||ArrayBuffer.isView(o))&&(o={data:o});const t=new Xf,{docId:e}=t,i=o.url?DR(o.url):null,a=o.data?MR(o.data):null,l=o.httpHeaders||null,c=o.withCredentials===!0,h=o.password??null,d=o.range instanceof Yf?o.range:null,f=Number.isInteger(o.rangeChunkSize)&&o.rangeChunkSize>0?o.rangeChunkSize:2**16;let m=o.worker instanceof Qa?o.worker:null;const y=o.verbosity,b=typeof o.docBaseUrl=="string"&&!zo(o.docBaseUrl)?o.docBaseUrl:null,A=fc(o.cMapUrl),_=o.cMapPacked!==!1,S=o.CMapReaderFactory||(je?BR:a0),x=fc(o.iccUrl),E=fc(o.standardFontDataUrl),C=o.StandardFontDataFactory||(je?jR:r0),R=fc(o.wasmUrl),k=o.WasmFactory||(je?UR:o0),O=o.stopAtErrors!==!0,I=Number.isInteger(o.maxImageSize)&&o.maxImageSize>-1?o.maxImageSize:-1,B=o.isEvalSupported!==!1,Y=typeof o.isOffscreenCanvasSupported=="boolean"?o.isOffscreenCanvasSupported:!je,K=typeof o.isImageDecoderSupported=="boolean"?o.isImageDecoderSupported:!je&&(Ae.platform.isFirefox||!globalThis.chrome),tt=Number.isInteger(o.canvasMaxAreaInBytes)?o.canvasMaxAreaInBytes:-1,Z=typeof o.disableFontFace=="boolean"?o.disableFontFace:je,rt=o.fontExtraProperties===!0,Q=o.enableXfa===!0,at=o.ownerDocument||globalThis.document,ct=o.disableRange===!0,L=o.disableStream===!0,H=o.disableAutoFetch===!0,J=o.pdfBug===!0,St=o.CanvasFactory||(je?PR:OR),_t=o.FilterFactory||(je?IR:LR),M=o.enableHWA===!0,V=o.useWasm!==!1,W=d?d.length:o.length??NaN,et=typeof o.useSystemFonts=="boolean"?o.useSystemFonts:!je&&!Z,ft=typeof o.useWorkerFetch=="boolean"?o.useWorkerFetch:!!(S===a0&&C===r0&&k===o0&&A&&E&&R&&ho(A,document.baseURI)&&ho(E,document.baseURI)&&ho(R,document.baseURI)),gt=null;cR(y);const pt={canvasFactory:new St({ownerDocument:at,enableHWA:M}),filterFactory:new _t({docId:e,ownerDocument:at}),cMapReaderFactory:ft?null:new S({baseUrl:A,isCompressed:_}),standardFontDataFactory:ft?null:new C({baseUrl:E}),wasmFactory:ft?null:new k({baseUrl:R})};m||(m=Qa.create({verbosity:y,port:zs.workerPort}),t._worker=m);const Kt={docId:e,apiVersion:"5.4.530",data:a,password:h,disableAutoFetch:H,rangeChunkSize:f,length:W,docBaseUrl:b,enableXfa:Q,evaluatorOptions:{maxImageSize:I,disableFontFace:Z,ignoreErrors:O,isEvalSupported:B,isOffscreenCanvasSupported:Y,isImageDecoderSupported:K,canvasMaxAreaInBytes:tt,fontExtraProperties:rt,useSystemFonts:et,useWasm:V,useWorkerFetch:ft,cMapUrl:A,iccUrl:x,standardFontDataUrl:E,wasmUrl:R}},jt={ownerDocument:at,pdfBug:J,styleElement:gt,loadingParams:{disableAutoFetch:H,enableXfa:Q}};return m.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const Qn=m.messageHandler.sendWithPromise("GetDocRequest",Kt,a?[a.buffer]:null);let In;if(d)In=new iD(d,{disableRange:ct,disableStream:L});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Zn=ho(i)?oD:je?yD:dD;In=new Zn({url:i,length:W,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:ct,disableStream:L})}return Qn.then(Zn=>{if(t.destroyed)throw new Error("Loading aborted");if(m.destroyed)throw new Error("Worker was destroyed");const gs=new fo(e,Zn,m.port),Tn=new xD(gs,t,In,jt,pt,M);t._transport=Tn,gs.send("Ready",null)})}).catch(t._capability.reject),t}class Xf{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Xf.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Yf{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Wt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class SD{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class _D{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new Zb:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new bA,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new Fo({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:l=Ai.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:m=null,printAnnotationStorage:y=null,isEditing:b=!1,recordOperations:A=!1,operationsFilter:_=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(a,l,y,b),{renderingIntent:x,cacheKey:E}=S;this.#t=!1,d||=this._transport.getOptionalContentConfig(x);let C=this._intentStates.get(E);C||(C=Object.create(null),this._intentStates.set(E,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const R=!!(x&cn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const k=!!(this._pdfBug&&globalThis.StepperManager?.enabled),O=!this.recordedBBoxes&&(A||k),I=K=>{if(C.renderTasks.delete(B),O){const tt=B.gfx?.dependencyTracker.take();tt&&(B.stepper&&B.stepper.setOperatorBBoxes(tt,B.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=tt))}R&&(this.#t=!0),this.#e(),K?(B.capability.reject(K),this._abortOperatorList({intentState:C,reason:K instanceof Error?K:new Error(K)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new Ua({callback:I,params:{canvas:e,canvasContext:t,dependencyTracker:O?new zR(e,C.operatorList.length,k):null,viewport:i,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:m,enableHWA:this._transport.enableHWA,operationsFilter:_});(C.renderTasks||=new Set).add(B);const Y=B.task;return Promise.all([C.displayReadyCapability.promise,d]).then(([K,tt])=>{if(this.destroyed){I();return}if(this._stats?.time("Rendering"),!(tt.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:K,optionalContentConfig:tt}),B.operatorListChanged()}).catch(I),Y}getOperatorList({intent:t="display",annotationMode:e=Ai.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>To.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){c.read().then(function({value:d,done:f}){if(f){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new Zb),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const m=()=>{d.read().then(({value:y,done:b})=>{if(b){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,f),m())},y=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const b of f.renderTasks)b.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(y);else if(f.opListReadCapability)f.opListReadCapability.reject(y);else throw y}})};m()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Jc){let a=wD;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new Ri(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var cs,Nn,vi,js,Hc,Us,Fs,Ue,Cc,AA,wA,po,$a,Rc;const ie=class ie{constructor({name:t=null,port:e=null,verbosity:i=uR()}={}){Fn(this,Ue);Fn(this,cs,Promise.withResolvers());Fn(this,Nn,null);Fn(this,vi,null);Fn(this,js,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(ne(ie,Fs).has(e))throw new Error("Cannot use more than one PDFWorker per port.");ne(ie,Fs).set(e,this),zn(this,Ue,AA).call(this,e)}else zn(this,Ue,wA).call(this)}get promise(){return ne(this,cs).promise}get port(){return ne(this,vi)}get messageHandler(){return ne(this,Nn)}destroy(){this.destroyed=!0,ne(this,js)?.terminate(),Ye(this,js,null),ne(ie,Fs).delete(ne(this,vi)),Ye(this,vi,null),ne(this,Nn)?.destroy(),Ye(this,Nn,null)}static create(t){const e=ne(this,Fs).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new ie(t)}static get workerSrc(){if(zs.workerSrc)return zs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return bt(this,"_setupFakeWorkerGlobal",(async()=>ne(this,$a,Rc)?ne(this,$a,Rc):(await import(this.workerSrc)).WorkerMessageHandler)())}};cs=new WeakMap,Nn=new WeakMap,vi=new WeakMap,js=new WeakMap,Hc=new WeakMap,Us=new WeakMap,Fs=new WeakMap,Ue=new WeakSet,Cc=function(){ne(this,cs).resolve(),ne(this,Nn).send("configure",{verbosity:this.verbosity})},AA=function(t){Ye(this,vi,t),Ye(this,Nn,new fo("main","worker",t)),ne(this,Nn).on("ready",()=>{}),zn(this,Ue,Cc).call(this)},wA=function(){if(ne(ie,Us)||ne(ie,$a,Rc)){zn(this,Ue,po).call(this);return}let{workerSrc:t}=ie;try{ie._isSameOrigin(window.location,t)||(t=ie._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new fo("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?ne(this,cs).reject(new Error("Worker was destroyed")):zn(this,Ue,po).call(this)},l=new AbortController;e.addEventListener("error",()=>{ne(this,js)||a()},{signal:l.signal}),i.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}Ye(this,Nn,i),Ye(this,vi,e),Ye(this,js,e),zn(this,Ue,Cc).call(this)}),i.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{zn(this,Ue,po).call(this)}});const c=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};c();return}catch{Zc("The worker has been disabled.")}zn(this,Ue,po).call(this)},po=function(){ne(ie,Us)||(wt("Setting up fake worker."),Ye(ie,Us,!0)),ie._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ne(this,cs).reject(new Error("Worker was destroyed"));return}const e=new kR;Ye(this,vi,e);const i=`fake${Qy(ie,Hc)._++}`,a=new fo(i+"_worker",i,e);t.setup(a,e),Ye(this,Nn,new fo(i,i+"_worker",e)),zn(this,Ue,Cc).call(this)}).catch(t=>{ne(this,cs).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},$a=new WeakSet,Rc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fn(ie,$a),Fn(ie,Hc,0),Fn(ie,Us,!1),Fn(ie,Fs,new WeakMap),je&&(Ye(ie,Us,!0),zs.workerSrc||="./pdf.worker.mjs"),ie._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},ie._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},ie.fromPort=t=>{if(vR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return ie.create(t)};let Qa=ie;class xD{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,a,l,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new bA,this.fontLoader=new TR({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return bt(this,"annotationStorage",new Vf)}getRenderingIntent(t,e=Ai.ENABLE,i=null,a=!1,l=!1){let c=cn.DISPLAY,h=lf;switch(t){case"any":c=cn.ANY;break;case"display":break;case"print":c=cn.PRINT;break;default:wt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&cn.PRINT&&i instanceof aA?i:this.annotationStorage;switch(e){case Ai.DISABLE:c+=cn.ANNOTATIONS_DISABLE;break;case Ai.ENABLE:break;case Ai.ENABLE_FORMS:c+=cn.ANNOTATIONS_FORMS;break;case Ai.ENABLE_STORAGE:c+=cn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:wt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=cn.IS_EDITING),l&&(c+=cn.OPLIST);const{ids:f,hash:m}=d.modifiedIds,y=[c,h.hash,m];return{renderingIntent:c,cacheKey:y.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Qe.cleanup(),this._networkStream?.cancelAllRequests(new Ri("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{kt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){a.close();return}kt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this._fullReader;return(!a||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{kt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){a.close();return}kt(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new SD(i,this))}),t.on("DocException",i=>{e._capability.reject(We(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw We(i);const a=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const y=l.error;wt(`Error during font loading: ${y}`),this.commonObjs.resolve(i,y);break}const c=new qt(l),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(y,b)=>globalThis.FontInspector.fontAdded(y,b):null,d=new CR(c,h,l.extra,l.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=l;kt(f,"The imageRef must be defined.");for(const y of this.#e.values())for(const[,b]of y.objs)if(b?.ref===f)return b.dataLen?(this.commonObjs.resolve(i,structuredClone(b)),b.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new RR(l));break;case"Image":this.commonObjs.resolve(i,l);break;case"Pattern":const m=new Ee(l);this.commonObjs.resolve(i,m.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,c])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&wt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,t);const c=new _D(e,l,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#i.set(e,a),a}getPageIndex(t){return cf(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new nD(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new tD(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Qe.cleanup()}}cachedPageNumber(t){if(!cf(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class ED{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class Ua{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:m=!1,pdfBug:y=!1,pageColors:b=null,enableHWA:A=!1,operationsFilter:_=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=y,this.pageColors=b,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=m===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new ED(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=A,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(Ua.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ua.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new qa(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),Ua.#e.delete(this._canvas),t||=new Jc(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ua.#e.delete(this._canvas),this.callback())))}}const SA="5.4.530",_A="50cc4adac";class un{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return bt(this,"_keyboardManager",new Ho([[["Escape","mac+Escape"],un.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],un.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],un.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],un.prototype._moveToPrevious],[["Home","mac+Home"],un.prototype._moveToBeginning],[["End","mac+End"],un.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",un.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#m.bind(this),{signal:e}),t.addEventListener("keydown",this.#g.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",dn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",un.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===this.#i,l.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#g.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#m(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#m(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#m(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#m(t);return}this.#n.lastElementChild?.focus()}#g(t){un._keyboardManager.exec(this,t)}#m(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Co{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Co.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Co.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function A0(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}function co(o){return Math.max(0,Math.min(255,255*o))}class w0{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=co(t),[t,t,t]}static G_HTML([t]){const e=A0(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(co)}static RGB_HTML(t){return`#${t.map(A0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[co(1-Math.min(1,t+a)),co(1-Math.min(1,i+a)),co(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,c=1-i,h=Math.min(a,l,c);return["CMYK",a,l,c,h]}}class TD{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Wt("Abstract method `_createSVG` called.")}}class Ro extends TD{_createSVG(t){return document.createElementNS(bi,t)}}const CD=9,qs=new WeakSet,RD=new Date().getTimezoneOffset()*60*1e3;class qd{static create(t){switch(t.data.annotationType){case fe.LINK:return new Wf(t);case fe.TEXT:return new MD(t);case fe.WIDGET:switch(t.data.fieldType){case"Tx":return new ND(t);case"Btn":return t.data.radioButton?new xA(t):t.data.checkBox?new OD(t):new LD(t);case"Ch":return new ID(t);case"Sig":return new kD(t)}return new Xs(t);case fe.POPUP:return new df(t);case fe.FREETEXT:return new EA(t);case fe.LINE:return new BD(t);case fe.SQUARE:return new jD(t);case fe.CIRCLE:return new UD(t);case fe.POLYLINE:return new TA(t);case fe.CARET:return new zD(t);case fe.INK:return new Kf(t);case fe.POLYGON:return new FD(t);case fe.HIGHLIGHT:return new CA(t);case fe.UNDERLINE:return new HD(t);case fe.SQUIGGLY:return new VD(t);case fe.STRIKEOUT:return new GD(t);case fe.STAMP:return new RA(t);case fe.FILEATTACHMENT:return new qD(t);default:return new le(t)}}}class le{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return le._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let l=-1/0,c=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>c?(c=e[h+1],l=e[h+2]):e[h+1]===c&&(l=Math.max(l,e[h+2]));return[l,c]}if(i?.length>=1){for(const h of i)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>c?(c=h[d+1],l=h[d]):h[d+1]===c&&(l=Math.max(l,h[d]));if(l!==1/0)return[l,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${xo}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${xo}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof Xs)&&!(this instanceof Wf)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof df){const{rotation:S}=e;return!e.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const S=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(S>0||x>0){const C=`calc(${S}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof xA){const C=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=C}switch(e.borderStyle.style){case La.SOLID:c.borderStyle="solid";break;case La.DASHED:c.borderStyle="dashed";break;case La.BEVELED:wt("Unimplemented border style: beveled");break;case La.INSET:wt("Unimplemented border style: inset");break;case La.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,c.borderColor=nt.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=nt.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:m,pageHeight:y,pageX:b,pageY:A}=a.rawDims;c.left=`${100*(f[0]-b)/m}%`,c.top=`${100*(f[1]-A)/y}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(c.width=`${100*h/m}%`,c.height=`${100*d/y}%`):this.setRotation(_,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],c=l[0],h=l.slice(1);a.target.style[i]=w0[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:w0[`${c}_rgb`](h)})};return bt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const c=i[a];if(c){const h={detail:{[a]:l},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,x,E,C]=t.subarray(2,6);if(a===S&&l===x&&e===E&&i===C)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:S,borderWidth:x}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-i,{svgFactory:m}=this,y=m.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const b=m.createElement("defs");y.append(b);const A=m.createElement("clipPath"),_=`clippath_${this.data.id}`;A.setAttribute("id",_),A.setAttribute("clipPathUnits","objectBoundingBox"),b.append(A);for(let S=2,x=t.length;S<x;S+=8){const E=t[S],C=t[S+1],R=t[S+2],k=t[S+3],O=m.createElement("rect"),I=(R-e)/d,B=(l-C)/f,Y=(E-R)/d,K=(C-k)/f;O.setAttribute("x",I),O.setAttribute("y",B),O.setAttribute("width",Y),O.setAttribute("height",K),A.append(O),h?.push(`<rect vector-effect="non-scaling-stroke" x="${I}" y="${B}" width="${Y}" height="${K}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(y),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate),this.#i=new df({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Wt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:h}of a){if(l===-1||c===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!qs.has(f)){wt(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&qs.has(a)&&i.push({id:c,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class DD extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Wf extends le{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){wt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:c}=e,h=[];if(a.length!==0||l.length!==0){const m=new Set(l);for(const y of a){const b=this._fieldObjects[y]||[];for(const{id:A}of b)m.add(A)}for(const y of Object.values(this._fieldObjects))for(const b of y)m.has(b.id)===c&&h.push(b)}else for(const m of Object.values(this._fieldObjects))h.push(...m);const d=this.annotationStorage,f=[];for(const m of h){const{id:y}=m;switch(f.push(y),m.type){case"text":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}case"checkbox":case"radiobutton":{const A=m.defaultValue===m.exportValues;d.setValue(y,{value:A});break}case"combobox":case"listbox":{const A=m.defaultValue||"";d.setValue(y,{value:A});break}default:continue}const b=document.querySelector(`[data-element-id="${y}"]`);if(b){if(!qs.has(b)){wt(`_bindResetFormAction - element not allowed: ${y}`);continue}}else continue;b.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class MD extends le{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class Xs extends le{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ae.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}})})}_setEventListeners(t,e,i,a){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":nt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||CD,l=t.style;let c;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),m=Math.round(f/(Bd*a))||1,y=f/m;c=Math.min(a,d(y/Bd))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(f/Bd))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=nt.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class ND extends Xs{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),qs.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:m,timeStep:y}=this.data,b=!!m&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",_=>{t.setValue(e,{value:_.target.value}),this.setPropertyOnSiblings(i,"value",_.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",_=>{const S=this.data.defaultFieldValue??"";i.value=d.userValue=S,d.formattedValue=null});let A=_=>{const{formattedValue:S}=d;S!=null&&(_.target.value=S),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(d.focused)return;const{target:x}=S;if(b&&(x.type=m,y&&(x.step=y)),d.userValue){const E=d.userValue;if(b)if(m==="time"){const C=new Date(E),R=[C.getHours(),C.getMinutes(),C.getSeconds()];x.value=R.map(k=>k.toString().padStart(2,"0")).join(":")}else x.value=new Date(E-RD).toISOString().split(m==="date"?"T":".",1)[0];else x.value=E}d.lastCommittedValue=x.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(E){d.userValue=E.detail.value??"",b||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:C}=E.detail;d.formattedValue=C,C!=null&&E.target!==document.activeElement&&(E.target.value=C);const R={formattedValue:C};b&&(R.value=C),t.setValue(e,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:C}=E.detail,{target:R}=E;if(C===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",C);let k=d.userValue;!k||k.length<=C||(k=k.slice(0,C),R.value=d.userValue=k,t.setValue(e,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),i.addEventListener("keydown",S=>{d.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(d.commitKey=3),x===-1)return;const{value:E}=S.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const _=A;A=null,i.addEventListener("blur",S=>{if(!d.focused||!S.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:x}=S;let{value:E}=x;if(b){if(E&&m==="time"){const C=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),x.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();x.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),_(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{d.lastCommittedValue=null;const{data:x,target:E}=S,{value:C,selectionStart:R,selectionEnd:k}=E;let O=R,I=k;switch(S.inputType){case"deleteWordBackward":{const B=C.substring(0,R).match(/\w*[^\w]*$/);B&&(O-=B[0].length);break}case"deleteWordForward":{const B=C.substring(R).match(/^[^\w]*\w*/);B&&(I+=B[0].length);break}case"deleteContentBackward":R===k&&(O-=1);break;case"deleteContentForward":R===k&&(I+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,change:x||"",willCommit:!1,selStart:O,selEnd:I}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&i.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class kD extends Xs{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class OD extends Xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return qs.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i)){const m=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=m),t.setValue(f.id,{value:m})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class xA extends Xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(qs.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const m=c===f.detail.value;for(const y of this._getElementsByName(f.target.name)){const b=m&&y.id===i;y.domElement&&(y.domElement.checked=b),t.setValue(y.id,{value:b})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class LD extends Wf{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class ID extends Xs{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");qs.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",m=>{const y=this.data.defaultFieldValue;for(const b of a.options)b.selected=b.value===y});for(const m of this.data.options){const y=document.createElement("option");y.textContent=m.displayValue,y.value=m.exportValue,i.value.includes(m.exportValue)&&(y.setAttribute("selected",!0),l=!1),a.append(y)}let c=null;if(l){const m=document.createElement("option");m.value=" ",m.setAttribute("hidden",!0),m.setAttribute("selected",!0),a.prepend(m),c=()=>{m.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=m=>{const y=m?"value":"textContent",{options:b,multiple:A}=a;return A?Array.prototype.filter.call(b,_=>_.selected).map(_=>_[y]):b.selectedIndex===-1?null:b[b.selectedIndex][y]};let d=h(!1);const f=m=>{const y=m.target.options;return Array.prototype.map.call(y,b=>({displayValue:b.textContent,exportValue:b.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",m=>{const y={value(b){c?.();const A=b.detail.value,_=new Set(Array.isArray(A)?A:[A]);for(const S of a.options)S.selected=_.has(S.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(b){a.multiple=!0},remove(b){const A=a.options,_=b.detail.remove;A[_].selected=!1,a.remove(_),A.length>0&&Array.prototype.findIndex.call(A,x=>x.selected)===-1&&(A[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},clear(b){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(b){const{index:A,displayValue:_,exportValue:S}=b.detail.insert,x=a.children[A],E=document.createElement("option");E.textContent=_,E.value=S,x?x.before(E):a.append(E),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},items(b){const{items:A}=b.detail;for(;a.length!==0;)a.remove(0);for(const _ of A){const{displayValue:S,exportValue:x}=_,E=document.createElement("option");E.textContent=S,E.value=x,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(b)}),d=h(!1)},indices(b){const A=new Set(b.detail.indices);for(const _ of b.target.options)_.selected=A.has(_.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(b){b.target.disabled=!b.detail.editable}};this._dispatchEventFromSandbox(y,m)}),a.addEventListener("input",m=>{const y=h(!0),b=h(!1);t.setValue(e,{value:y}),m.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:b,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],m=>m.target.value)):a.addEventListener("input",function(m){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class df extends le{constructor(t){const{data:e,elements:i,parent:a}=t,l=!!a._commentManager;if(super(t,{isRenderable:!l&&le._hasPopupData(e)}),this.elements=i,l&&le._hasPopupData(e)){const c=this.popup=this.#t();for(const h of i)h.popup=c}else this.popup=null}#t(){return new PD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${Ba}${a}`).join(",")),this.container}}class PD{#t=null;#e=this.#G.bind(this);#i=this.#U.bind(this);#n=this.#O.bind(this);#r=this.#S.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#v=null;#b=null;#E=null;#_=null;#w=null;#C=!1;#A=null;#x=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:c,richText:h,parent:d,rect:f,parentRect:m,open:y,commentManager:b=null}){this.#s=t,this.#_=a,this.#o=c,this.#E=h,this.#d=d,this.#a=e,this.#b=f,this.#h=m,this.#l=i,this.#t=b,this.#A=i[0],this.#c=Uc.toDateObject(l),this.trigger=i.flatMap(A=>A.getElementsToTriggerPopup()),b||(this.#M(),this.#s.hidden=!0,y&&this.#S())}#M(){if(this.#m)return;this.#m=new AbortController;const{signal:t}=this.#m;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#A.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#m=new AbortController,e=this.#A.hasOwnCommentButton,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#A.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const h=this.#A.container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),h.after(c)}}#D(){if(this.#A.extraPopupElement&&!this.#A.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#B(){this.#A.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#A.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}=this.#A.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#x||=this.#A.commentText,this.#x}set comment(t){t!==this.comment&&(this.#A.commentText=this.#x=t)}focus(){this.#A.container?.focus()}get parentBoundingClientRect(){return this.#A.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#A.layer.getBoundingClientRect();return[(t-a)/c,(e+i-l)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:l,y:c,width:h,height:d}=a;this.#t.showDialog(null,this,l+e*h,c+i*d,{...t,parentDimensions:a})}render(){if(this.#g)return;const t=this.#g=document.createElement("div");if(t.className="popup",this.#a){const i=t.style.outlineColor=nt.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#_?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#_}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}Ff({html:this.#k||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#k(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#L(){return this.#k?.attributes?.style?.fontSize||0}get#j(){return this.#k?.attributes?.style?.color||null}#I(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#j,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#x=null):e&&(e.deleted?this.remove():(this.#B(),this.#x=e.text)),t&&(this.#y=null,this.#R(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#M(),this.#w||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#I(e.text),this.#c=Uc.toDateObject(e.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#E}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#d;let c=!!this.#h,h=c?this.#h:this.#b;for(const _ of this.#l)if(!h||nt.intersect(_.data.rect,h)!==null){h=_.data.rect,c=!0;break}const d=nt.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),m=c?h[2]-h[0]+5:0,y=d[0]+m,b=d[1];this.#u=[100*(y-a)/e,100*(b-l)/i];const{style:A}=this.#s;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#S(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#O(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#O(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#C&&(this.#g||this.#O(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class EA extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class BD extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class jD extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class UD extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class TA extends le{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:c}=this;if(!e)return this.container;const h=this.svgFactory.create(l,c,!0);let d=[];for(let m=0,y=e.length;m<y;m+=2){const b=e[m]-t[0],A=t[3]-e[m+1];d.push(`${b},${A}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class FD extends TA{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class zD extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Kf extends le{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:c,width:h,height:d}=this.#i(e,t),f=this.svgFactory.create(h,d,!0),m=this.#t=this.svgFactory.createElement("svg:g");f.append(m),m.setAttribute("stroke-width",a.width||1),m.setAttribute("stroke-linecap","round"),m.setAttribute("stroke-linejoin","round"),m.setAttribute("stroke-miterlimit",10),m.setAttribute("stroke","transparent"),m.setAttribute("fill","transparent"),m.setAttribute("transform",c);for(let y=0,b=i.length;y<b;y++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",i[y].join(",")),m.append(A)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:h,height:d}=this.#i(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class CA extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class HD extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class VD extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class GD extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class RA extends le{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class qD extends le{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Ae.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class nu{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:m}){this.div=t,this.#t=e,this.#e=i,this.#r=h||null,this.#a=f||null,this.#i=m||new Vf,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,i=this.div;ms(i,this.viewport);const a=new Map,l=[],c={data:null,layer:i,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Ro,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const d=h.annotationType===fe.POPUP;if(d){const y=a.get(h.id);if(!y)continue;if(!this._commentManager){l.push(h);continue}c.elements=y}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;c.data=h;const f=qd.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),h.popupRef)){const y=a.get(h.popupRef);y?y.push(f):a.set(h.popupRef,[f])}const m=f.render();h.hidden&&(m.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const h of l){const d=c.elements=a.get(h.id);c.data=h;const f=qd.create(c);if(!f.isRenderable)continue;const m=f.render();f.contentElement.id=`${Ba}${h.id}`,h.hidden&&(m.style.visibility="hidden"),d.at(-1).container.after(m)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#s){const l=i.id=`${Ba}${a}`;t.push(this.#r?.getAriaAttributes(l).then(c=>{if(c)for(const[h,d]of c)i.setAttribute(h,d)}))}}this.#s.sort(({data:{rect:[i,a,l,c]}},{data:{rect:[h,d,f,m]}})=>{if(i===l&&a===c)return 1;if(h===f&&d===m)return-1;const y=c,b=a,A=(a+c)/2,_=m,S=d,x=(d+m)/2;if(A>=_&&x<=b)return-1;if(x>=y&&A<=S)return 1;const E=(i+l)/2,C=(h+f)/2;return E-C});const e=document.createDocumentFragment();for(const i of this.#s)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const i of this.#s)this.#t.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Ro,parent:this};for(const i of t){i.borderStyle||=nu._defaultBorderStyle,e.data=i;const a=qd.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${Ba}${i.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,ms(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,l=new DD({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return l.render(),l.contentElement.id=`${Ba}${i}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const e=this.#s.findIndex(a=>a.data.id===t);if(e<0)return;const[i]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return bt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:La.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const vc=/\r\n?|\n/g;class Te extends dt{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Te.prototype,e=l=>l.isEmpty(),i=Di.TRANSLATE_SMALL,a=Di.TRANSLATE_BIG;return bt(this,"_keyboardManager",new Ho([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Te._defaultColor||dt._defaultLineColor,this.#n=t.fontSize||Te._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){dt.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Mt.FREETEXT_SIZE:Te._defaultFontSize=e;break;case Mt.FREETEXT_COLOR:Te._defaultColor=e;break}}updateParams(t,e){switch(t){case Mt.FREETEXT_SIZE:this.#r(e);break;case Mt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,Te._defaultFontSize],[Mt.FREETEXT_COLOR,Te._defaultColor||dt._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#n],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Co(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Te._internalPadding*t,-(Te._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Te.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Te._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,m]=this.pageDimensions,[y,b]=this.pageTranslation;let A,_;switch(this.rotation){case 0:A=t+(c[0]-y)/f,_=e+this.height-(c[1]-b)/m;break;case 90:A=t+(c[0]-y)/f,_=e-(c[1]-b)/m,[h,d]=[d,-h];break;case 180:A=t-this.width+(c[0]-y)/f,_=e-(c[1]-b)/m,[h,d]=[-h,-d];break;case 270:A=t+(c[0]-y-this.height*m)/f,_=e+(c[1]-b-this.width*f)/m,[h,d]=[-d,h];break}this.setAt(A*a,_*l,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(vc,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=Te.#h(e.getData("text")||"").replaceAll(vc,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,f=[],m=[];if(h.nodeType===Node.TEXT_NODE){const A=h.parentElement;if(m.push(h.nodeValue.slice(d).replaceAll(vc,"")),A!==this.editorDiv){let _=f;for(const S of this.editorDiv.childNodes){if(S===A){_=m;continue}_.push(Te.#c(S))}}f.push(h.nodeValue.slice(0,d).replaceAll(vc,""))}else if(h===this.editorDiv){let A=f,_=0;for(const S of this.editorDiv.childNodes)_++===d&&(A=m),A.push(Te.#c(S))}this.#t=`${f.join(`
`)}${a}${m.join(`
`)}`,this.#l();const y=new Range;let b=Math.sumPrecise(f.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const _=A.nodeValue.length;if(b<=_){y.setStart(A,b),y.setEnd(A,b);break}b-=_}l.removeAllRanges(),l.addRange(y)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Te._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof EA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:f,id:m,popupRef:y,richText:b,contentsObj:A,creationDate:_,modificationDate:S},textContent:x,textPosition:E,parent:{page:{pageNumber:C}}}=t;if(!x||x.length===0)return null;a=t={annotationType:At.FREETEXT,color:Array.from(h),fontSize:c,value:x.join(`
`),position:E,pageIndex:C-1,rect:d.slice(0),rotation:f,annotationElementId:m,id:m,deleted:!1,popupRef:y,comment:A?.str||null,richText:b,creationDate:_,modificationDate:S}}const l=await super.deserialize(t,e,i);return l.#n=t.fontSize,l.color=nt.makeHexColor(...t.color),l.#t=Te.#h(t.value),l._initialData=a,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=dt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,h)=>c!==a[h])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class it{static PRECISION=1e-4;toSVGPath(){Wt("Abstract method `toSVGPath` must be implemented.")}get box(){Wt("Abstract getter `box` must be implemented.")}serialize(t,e){Wt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*a,c[h+1]=i+t[h+1]*l;return c}static _rescaleAndSwap(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*a,c[h+1]=i+t[h]*l;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+c)/6,(i+l)/2,(a+c)/2]}}class Bs{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#g=8;static#m=2;static#u=Bs.#g+Bs.#m;constructor({x:t,y:e},i,a,l,c,h=0){this.#t=i,this.#h=l*a,this.#n=c,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=Bs.#g*a,this.#c=Bs.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[i,a,l,c]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-a)/c,(this.#s+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,a,l,c]=this.#t;let[h,d,f,m]=this.#a.subarray(8,12);const y=t-f,b=e-m,A=Math.hypot(y,b);if(A<this.#c)return!1;const _=A-this.#l,S=_/A,x=S*y,E=S*b;let C=h,R=d;h=f,d=m,f+=x,m+=E,this.#f?.push(t,e);const k=-E/_,O=x/_,I=k*this.#h,B=O*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+I,m+B],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-I,m-B],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([h+I,d+B],2),this.#r.push(NaN,NaN,NaN,NaN,(h+I-i)/l,(d+B-a)/c),this.#a.set([h-I,d-B],14),this.#e.push(NaN,NaN,NaN,NaN,(h-I-i)/l,(d-B-a)/c)),this.#a.set([C,R,h,d,f,m],6),!this.isEmpty()):(this.#a.set([C,R,h,d,f,m],6),Math.abs(Math.atan2(R-d,C-h)-Math.atan2(E,x))<Math.PI/2?([h,d,f,m]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-i)/l,((d+m)/2-a)/c),[h,d,C,R]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((C+h)/2-i)/l,((R+d)/2-a)/c),!0):([C,R,h,d,f,m]=this.#a.subarray(0,6),this.#r.push(((C+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+m)/6-a)/c,((h+f)/2-i)/l,((d+m)/2-a)/c),[f,m,h,d,C,R]=this.#a.subarray(12,18),this.#e.push(((C+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+m)/6-a)/c,((h+f)/2-i)/l,((d+m)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[l,c,h,d]=this.#p();return`M${(this.#a[2]-t)/i} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/i} ${(this.#a[5]-e)/a} L${l} ${c} L${h} ${d} L${(this.#a[16]-t)/i} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/i} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,a,l]=this.#t,c=this.#a.subarray(4,6),h=this.#a.subarray(16,18),[d,f,m,y]=this.#p();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/l} L${d} ${f} L${m} ${y} L${(h[0]-e)/a} ${(h[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,c){return new DA(t,e,i,a,l,c)}getOutlines(){const t=this.#r,e=this.#e,i=this.#a,[a,l,c,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let y=0,b=d.length-2;y<b;y+=2)d[y]=(this.#f[y]-a)/c,d[y+1]=(this.#f[y+1]-l)/h;if(d[d.length-2]=(this.#s-a)/c,d[d.length-1]=(this.#o-l)/h,isNaN(i[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let m=t.length;for(let y=0;y<m;y+=2){if(isNaN(t[y])){f[y]=f[y+1]=NaN;continue}f[y]=t[y],f[y+1]=t[y+1]}m=this.#w(f,m);for(let y=e.length-6;y>=6;y-=6)for(let b=0;b<6;b+=2){if(isNaN(e[y+b])){f[m]=f[m+1]=NaN,m+=2;continue}f[m]=e[y+b],f[m+1]=e[y+b+1],m+=2}return this.#_(f,m),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#a,[i,a,l,c]=this.#t,[h,d,f,m]=this.#p(),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(y,t,this.#t,this.#d,this.#i,this.#n)}#_(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#w(t,e){const i=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[l,c,h,d]=this.#t,[f,m,y,b]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/h,(i[1]-c)/d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,y,b,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-c)/d],e),e+=24}}class DA extends it{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,i,a,l,c){super(),this.#s=t,this.#r=e,this.#t=i,this.#a=a,this.#i=l,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[h,d,f,m]=this.#e;for(let y=0,b=t.length;y<b;y+=2)t[y]=(t[y]-h)/f,t[y+1]=(t[y+1]-d)/m;for(let y=0,b=e.length;y<b;y+=2)e[y]=(e[y]-h)/f,e[y+1]=(e[y+1]-d)/m}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const c=i-t,h=a-e;let d,f;switch(l){case 0:d=it._rescale(this.#s,t,a,c,-h),f=it._rescale(this.#r,t,a,c,-h);break;case 90:d=it._rescaleAndSwap(this.#s,t,e,c,h),f=it._rescaleAndSwap(this.#r,t,e,c,h);break;case 180:d=it._rescale(this.#s,i,e,-c,h),f=it._rescale(this.#r,i,e,-c,h);break;case 270:d=it._rescaleAndSwap(this.#s,i,a,-c,-h),f=it._rescaleAndSwap(this.#r,i,a,-c,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],a=e[5];const l=[i,a,i,a];let c=i,h=a,d=i,f=a;const m=t?Math.max:Math.min,y=new Float32Array(4);for(let A=6,_=e.length;A<_;A+=6){const S=e[A+4],x=e[A+5];isNaN(e[A])?(nt.pointBoundingBox(S,x,l),h>x?(c=S,h=x):h===x&&(c=m(c,S)),f<x?(d=S,f=x):f===x&&(d=m(d,S))):(y[0]=y[1]=1/0,y[2]=y[3]=-1/0,nt.bezierBoundingBox(i,a,...e.slice(A,A+6),y),nt.rectBoundingBox(y[0],y[1],y[2],y[3],l),h>y[1]?(c=y[0],h=y[1]):h===y[1]&&(c=m(c,y[0])),f<y[3]?(d=y[2],f=y[3]):f===y[3]&&(d=m(d,y[2]))),i=S,a=x}const b=this.#e;b[0]=l[0]-this.#i,b[1]=l[1]-this.#i,b[2]=l[2]-l[0]+2*this.#i,b[3]=l[3]-l[1]+2*this.#i,this.firstPoint=[c,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,l,c=0){return new Bs(t,e,i,a,l,c)}getNewOutline(t,e){const[i,a,l,c]=this.#e,[h,d,f,m]=this.#t,y=l*f,b=c*m,A=i*f+h,_=a*m+d,S=this.newOutliner({x:this.#r[0]*y+A,y:this.#r[1]*b+_},this.#t,this.#a,t,this.#n,e??this.#i);for(let x=2;x<this.#r.length;x+=2)S.add({x:this.#r[x]*y+A,y:this.#r[x+1]*b+_});return S.getOutlines()}}class ff{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:S,y:x,width:E,height:C}of t){const R=Math.floor((S-e)/c)*c,k=Math.ceil((S+E+e)/c)*c,O=Math.floor((x-e)/c)*c,I=Math.ceil((x+C+e)/c)*c,B=[R,O,I,!0],Y=[k,O,I,!1];this.#n.push(B,Y),nt.rectBoundingBox(R,O,k,I,l)}const h=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,f=l[0]-i,m=l[1]-i;let y=a?-1/0:1/0,b=1/0;const A=this.#n.at(a?-1:-2),_=[A[0],A[2]];for(const S of this.#n){const[x,E,C,R]=S;!R&&a?E<b?(b=E,y=x):E===b&&(y=Math.max(y,x)):R&&!a&&(E<b?(b=E,y=x):E===b&&(y=Math.min(y,x))),S[0]=(x-f)/h,S[1]=(E-m)/d,S[2]=(C-m)/d}this.#t=new Float32Array([f,m,h,d]),this.#e=[y,b],this.#i=_}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const c of t){const[h,d,f]=c;e.push([h,d,c],[h,f,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let l;for(;i.size>0;){const c=i.values().next().value;let[h,d,f,m,y]=c;i.delete(c);let b=h,A=d;for(l=[h,f],a.push(l);;){let _;if(i.has(m))_=m;else if(i.has(y))_=y;else break;i.delete(_),[h,d,f,m,y]=_,b!==h&&(l.push(b,A,h,A===d?d:f),b=h),A=A===d?f:d}l.push(b,A)}return new $D(a,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:a=l-1}return a+1}#o([,t,e]){const i=this.#s(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let a=i;a<this.#r.length;a++){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}}#l(t){const[e,i,a]=t,l=[[e,i,a]],c=this.#s(a);for(let h=0;h<c;h++){const[d,f]=this.#r[h];for(let m=0,y=l.length;m<y;m++){const[,b,A]=l[m];if(!(f<=b||A<=d)){if(b>=d){if(A>f)l[m][1]=f;else{if(y===1)return[];l.splice(m,1),m--,y--}continue}l[m][2]=d,A>f&&l.push([e,f,A])}}}return l}}class $D extends it{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const c=e[l],h=e[l+1];c===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const c=[],h=i-t,d=a-e;for(const f of this.#e){const m=new Array(f.length);for(let y=0;y<f.length;y+=2)m[y]=t+f[y]*h,m[y+1]=a-f[y+1]*d;c.push(m)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class pf extends Bs{newFreeDrawOutline(t,e,i,a,l,c){return new XD(t,e,i,a,l,c)}}class XD extends DA{newOutliner(t,e,i,a,l,c=0){return new pf(t,e,i,a,l,c)}}class pe extends dt{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=pe.prototype;return bt(this,"_keyboardManager",new Ho([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||pe._defaultColor,this.#p=t.thickness||pe._defaultThickness,this.opacity=t.opacity||pe._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#A()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#A(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new ff(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new ff(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#p/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:pe.#x(this.#l.box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:pe.#x(this.#a.box,y),path:{d:this.#a.toSVGPath()}})}const[l,c,h,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=h,this.height=d;break;case 90:{const[y,b]=this.parentDimensions;this.x=c,this.y=1-l,this.width=h*b/y,this.height=d*y/b;break}case 180:this.x=1-l,this.y=1-c,this.width=h,this.height=d;break;case 270:{const[y,b]=this.parentDimensions;this.x=1-c,this.y=l,this.width=h*b/y,this.height=d*y/b;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/h,(f[1]-c)/d];const{lastPoint:m}=this.#a;this.#g=[(m[0]-l)/h,(m[1]-c)/d]}static initialize(t,e){dt.initialize(t,e),pe._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:pe._defaultColor=e;break;case Mt.HIGHLIGHT_THICKNESS:pe._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:this.#E(e);break;case Mt.HIGHLIGHT_THICKNESS:this.#_(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,pe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,pe._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||pe._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||pe._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,pe._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#_(t){const e=this.#p,i=a=>{this.#p=a,this.#w(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new un({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#A(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#A(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#w(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#A(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#x([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=pe.#x(this.#l.box,t)):i=pe.#x([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#m,{bbox:pe.#x(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),iA(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#M(t){pe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#i,c=new Float32Array(l.length*8);let h=0;for(const{x:d,y:f,width:m,height:y}of l){const b=d*t+i,A=(1-f)*e+a;c[h]=c[h+4]=b,c[h+1]=c[h+3]=A,c[h+2]=c[h+6]=b+m*t,c[h+5]=c[h+7]=A-y*e,h+=8}return c}#k(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:c,y:h,width:d,height:f}=i.getBoundingClientRect(),m=new AbortController,y=t.combinedSignal(m),b=A=>{m.abort(),this.#j(t,A)};window.addEventListener("blur",b,{signal:y}),window.addEventListener("pointerup",b,{signal:y}),window.addEventListener("pointerdown",re,{capture:!0,passive:!1,signal:y}),window.addEventListener("contextmenu",dn,{signal:y}),i.addEventListener("pointermove",this.#L.bind(this,t),{signal:y}),this._freeHighlight=new pf({x:a,y:l},[c,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#j(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof CA){const{data:{quadPoints:_,rect:S,rotation:x,id:E,color:C,opacity:R,popupRef:k,richText:O,contentsObj:I,creationDate:B,modificationDate:Y},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(C),opacity:R,quadPoints:_,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:O,comment:I?.str||null,creationDate:B,modificationDate:Y}}else if(t instanceof Kf){const{data:{inkLists:_,rect:S,rotation:x,id:E,color:C,borderStyle:{rawWidth:R},popupRef:k,richText:O,contentsObj:I,creationDate:B,modificationDate:Y},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(C),thickness:R,inkLists:_,boxes:null,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:O,comment:I?.str||null,creationDate:B,modificationDate:Y}}const{color:l,quadPoints:c,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=nt.makeHexColor(...l),f.opacity=d||1,h&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[m,y]=f.pageDimensions,[b,A]=f.pageTranslation;if(c){const _=f.#i=[];for(let S=0;S<c.length;S+=8)_.push({x:(c[S]-b)/m,y:1-(c[S+1]-A)/y,width:(c[S+2]-c[S])/m,height:(c[S+1]-c[S+5])/y});f.#v(),f.#A(),f.rotate(f.rotation)}else if(h){f.#h=!0;const _=h[0],S={x:_[0]-b,y:y-(_[1]-A)},x=new pf(S,[0,0,m,y],1,f.#p/2,!0,.001);for(let R=0,k=_.length;R<k;R+=2)S.x=_[R]-b,S.y=y-(_[R+1]-A),x.add(S);const{id:E,clipPathId:C}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);f.#b({highlightOutlines:x.getOutlines(),highlightId:E,clipPathId:C}),f.#A(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=dt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#B(),outlines:this.#k(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class MA{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Wt("Not implemented")}}class Pt extends dt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:i}=e.drawLayer.draw(Pt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){Wt("Not implemented")}static get typesMap(){Wt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(Pt.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],c=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,i,a]){const{parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(c/l),a*(l/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/l),a*(l/c)];default:return[t,e,i,a]}}#d(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(l/c),a*(c/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/c),a*(c/l)];default:return[t,e,i,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:c,parentDimensions:[h,d]}=this;switch((l*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(h/d),a*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-a*(d/h),i*(h/d),a*(d/h)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/h),e,a*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-a*(d/h),i*(h/d),a*(d/h)];case 14:return[1-t,1-e-i*(h/d),a*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),a*(d/h)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Pt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){Wt("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:c,offsetY:h,pointerId:d,pointerType:f}=a;if(Bt.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:m}}=t,{width:y,height:b}=l.getBoundingClientRect(),A=Pt.#n=new AbortController,_=t.combinedSignal(A);if(Bt.setPointer(f,d),window.addEventListener("pointerup",S=>{Bt.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:_}),window.addEventListener("pointercancel",S=>{Bt.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:_}),window.addEventListener("pointerdown",S=>{Bt.isSamePointerType(S.pointerType)&&(Bt.initializeAndAddPointerId(S.pointerId),Pt.#i.isCancellable()&&(Pt.#i.removeLastElement(),Pt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",dn,{signal:_}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),l.addEventListener("touchmove",S=>{Bt.isSameTimeStamp(S.timeStamp)&&re(S)},{signal:_}),t.toggleDrawing(),e._editorUndoBar?.hide(),Pt.#i){t.drawLayer.updateProperties(this._currentDrawId,Pt.#i.startNew(c,h,y,b,m));return}e.updateUIForDefaultProperties(this),Pt.#i=this.createDrawerInstance(c,h,y,b,m),Pt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(Pt.#r.toSVGProperties(),Pt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Bt.isSameTimeStamp(t.timeStamp),!Pt.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(Bt.isSamePointerId(a)){if(Bt.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Pt.#i.add(e,i)),Bt.setTimeStamp(t.timeStamp),re(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,Pt.#i=null,Pt.#r=null,Bt.clearTimeStamp()),Pt.#n&&(Pt.#n.abort(),Pt.#n=null,Bt.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,Pt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=Pt.#i,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Mt.DRAW_STEP),!Pt.#i.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Pt.#i.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:Pt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,c){Wt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}=e.viewport,d=this.deserializeDraw(c,h,a,l,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class YD{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new qo;#l;#d;constructor(t,e,i,a,l,c){this.#l=i,this.#d=a,this.#n=l,this.#r=c,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:h,points:this.#a}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return it._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,l,c]=this.#t.subarray(2,6),h=t-l,d=e-c;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,c,t,e],0),this.#e.push(...it.createBezierPoints(i,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#l=i,this.#d=a,this.#n=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=it.svgRound(this.#e[4]),e=it.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const a=it.svgRound(this.#e[10]),l=it.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${l}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,l=this.#e.length;a<l;a+=6){const[c,h,d,f,m,y]=this.#e.slice(a,a+6).map(it.svgRound);i.push(`C${c} ${h} ${d} ${f} ${m} ${y}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,a){const l=this.#i.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class qo extends it{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,i,a,l,c,h){this.#r=e,this.#a=i,this.#s=a,this.#o=l,this.#c=c,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${it.svgRound(e[4])} ${it.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${it.svgRound(e[10])} ${it.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,c,h,d,f,m]=e.subarray(i,i+6).map(it.svgRound);t.push(`C${l} ${c} ${h} ${d} ${f} ${m}`)}}return t.join("")}serialize([t,e,i,a],l){const c=[],h=[],[d,f,m,y]=this.#d();let b,A,_,S,x,E,C,R,k;switch(this.#o){case 0:k=it._rescale,b=t,A=e+a,_=i,S=-a,x=t+d*i,E=e+(1-f-y)*a,C=t+(d+m)*i,R=e+(1-f)*a;break;case 90:k=it._rescaleAndSwap,b=t,A=e,_=i,S=a,x=t+f*i,E=e+d*a,C=t+(f+y)*i,R=e+(d+m)*a;break;case 180:k=it._rescale,b=t+i,A=e,_=-i,S=a,x=t+(1-d-m)*i,E=e+f*a,C=t+(1-d)*i,R=e+(f+y)*a;break;case 270:k=it._rescaleAndSwap,b=t+i,A=e+a,_=-i,S=-a,x=t+(1-f-y)*i,E=e+(1-d-m)*a,C=t+(1-f)*i,R=e+(1-d)*a;break}for(const{line:O,points:I}of this.#n)c.push(k(O,b,A,_,S,l?new Array(O.length):null)),h.push(k(I,b,A,_,S,l?new Array(I.length):null));return{lines:c,points:h,rect:[x,E,C,R]}}static deserialize(t,e,i,a,l,{paths:{lines:c,points:h},rotation:d,thickness:f}){const m=[];let y,b,A,_,S;switch(d){case 0:S=it._rescale,y=-t/i,b=e/a+1,A=1/i,_=-1/a;break;case 90:S=it._rescaleAndSwap,y=-e/a,b=-t/i,A=1/a,_=1/i;break;case 180:S=it._rescale,y=t/i+1,b=-e/a,A=-1/i,_=1/a;break;case 270:S=it._rescaleAndSwap,y=e/a+1,b=t/i+1,A=-1/a,_=-1/i;break}if(!c){c=[];for(const E of h){const C=E.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(C-2));c.push(R);let[k,O,I,B]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,k,O],0);for(let Y=4;Y<C;Y+=2){const K=E[Y],tt=E[Y+1];R.set(it.createBezierPoints(k,O,I,B,K,tt),(Y-2)*3),[k,O,I,B]=[I,B,K,tt]}}}for(let E=0,C=c.length;E<C;E++)m.push({line:S(c[E].map(R=>R??NaN),y,b,A,_),points:S(h[E].map(R=>R??NaN),y,b,A,_)});const x=new this.prototype.constructor;return x.build(m,i,a,1,d,f,l),x}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,i,a]=this.#t,[l,c]=this.#l(0);return[t+l,e+c,i-2*l,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)nt.pointBoundingBox(a[h],a[h+1],t);continue}let l=a[4],c=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,m,y,b,A,_]=a.subarray(h,h+6);nt.bezierBoundingBox(l,c,f,m,y,b,A,_,t),l=A,c=_}}const[e,i]=this.#l();t[0]=Pe(t[0]-e,0,1),t[1]=Pe(t[1]-i,0,1),t[2]=Pe(t[2]+e,0,1),t[3]=Pe(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,l]=this.#l(),[c,h]=[a-e,l-i],d=this.#t;return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[a,l]=this.#l();this.#r=t,this.#a=e,this.#s=i;const[c,h]=this.#l(),d=c-a,f=h-l,m=this.#t;return m[0]-=d,m[1]-=f,m[2]+=2*d,m[3]+=2*f,m}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(it.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,c=0,h=0,d=0;switch(this.#e){case 90:a=e/t,l=-t/e,h=t;break;case 180:i=-1,c=-1,h=t,d=e;break;case 270:a=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${l} ${c} ${it.svgRound(h)} ${it.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,c]=this.#l(),[h,d,f,m]=this.#t;if(Math.abs(f-l)<=it.PRECISION||Math.abs(m-c)<=it.PRECISION){const S=t+i/2-(h+f/2),x=e+a/2-(d+m/2);return{path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:`${this.rotationTransform} translate(${S} ${x})`}}}const y=(i-2*l)/(f-2*l),b=(a-2*c)/(m-2*c),A=f/i,_=m/a;return{path:{"transform-origin":`${it.svgRound(h)} ${it.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${_}) translate(${it.svgRound(l)} ${it.svgRound(c)}) scale(${y} ${b}) translate(${it.svgRound(-l)} ${it.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,c]=this.#l(),h=this.#t,[d,f,m,y]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=a,Math.abs(m-l)<=it.PRECISION||Math.abs(y-c)<=it.PRECISION){const x=t+i/2-(d+m/2),E=e+a/2-(f+y/2);for(const{line:C,points:R}of this.#n)it._translate(C,x,E,C),it._translate(R,x,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const b=(i-2*l)/(m-2*l),A=(a-2*c)/(y-2*c),_=-b*(d+l)+t+l,S=-A*(f+c)+e+c;if(b!==1||A!==1||_!==0||S!==0)for(const{line:x,points:E}of this.#n)it._rescale(x,_,S,b,A,x),it._rescale(E,_,S,b,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,c=this.#t,h=t-c[0],d=e-c[1];if(this.#r===a&&this.#a===l)for(const{line:f,points:m}of this.#n)it._translate(f,h,d,f),it._translate(m,h,d,m);else{const f=this.#r/a,m=this.#a/l;this.#r=a,this.#a=l;for(const{line:y,points:b}of this.#n)it._rescale(y,h,d,f,m,y),it._rescale(b,h,d,f,m,b);c[2]*=f,c[3]*=m}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t)} ${it.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${it.svgRound(t[0])} ${it.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class iu extends MA{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:dt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new iu(this._viewParameters);return t.updateAll(this),t}}class Qf extends Pt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new iu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return bt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new YD(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,c){return qo.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){let a=null;if(t instanceof Kf){const{data:{inkLists:c,rect:h,rotation:d,id:f,color:m,opacity:y,borderStyle:{rawWidth:b},popupRef:A,richText:_,contentsObj:S,creationDate:x,modificationDate:E},parent:{page:{pageNumber:C}}}=t;a=t={annotationType:At.INK,color:Array.from(m),thickness:b,opacity:y,paths:{points:c},boxes:null,pageIndex:C-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:A,richText:_,comment:S?.str||null,creationDate:x,modificationDate:E}}const l=await super.deserialize(t,e,i);return l._initialData=a,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new Co(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Qf.getDefaultDrawingOptions({stroke:nt.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h=Object.assign(super.serialize(t),{color:dt._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:i}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==e[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class mf extends qo{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Ac=8,uo=3;class Ps{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const m=(-f+d-h+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(a+b)]!==0)return m}return-1}static#r(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const m=(f+d+h+16)%8,y=this.#i[2*m],b=this.#i[2*m+1];if(t[(i+y)*e+(a+b)]!==0)return m}return-1}static#a(t,e,i,a){const l=t.length,c=new Int32Array(l);for(let m=0;m<l;m++)c[m]=t[m]<=a?1:0;for(let m=1;m<i-1;m++)c[m*e]=c[m*e+e-1]=0;for(let m=0;m<e;m++)c[m]=c[e*i-1-m]=0;let h=1,d;const f=[];for(let m=1;m<i-1;m++){d=1;for(let y=1;y<e-1;y++){const b=m*e+y,A=c[b];if(A===0)continue;let _=m,S=y;if(A===1&&c[b-1]===0)h+=1,S-=1;else if(A>=1&&c[b+1]===0)h+=1,S+=1,A>1&&(d=A);else{A!==1&&(d=Math.abs(A));continue}const x=[y,m],E=S===y+1,C={isHole:E,points:x,id:h,parent:0};f.push(C);let R;for(const Z of f)if(Z.id===d){R=Z;break}R?R.isHole?C.parent=E?R.parent:d:C.parent=E?d:R.parent:C.parent=E?d:0;const k=this.#n(c,e,m,y,_,S,0);if(k===-1){c[b]=-h,c[b]!==1&&(d=Math.abs(c[b]));continue}let O=this.#i[2*k],I=this.#i[2*k+1];const B=m+O,Y=y+I;_=B,S=Y;let K=m,tt=y;for(;;){const Z=this.#r(c,e,K,tt,_,S,1);O=this.#i[2*Z],I=this.#i[2*Z+1];const rt=K+O,Q=tt+I;x.push(Q,rt);const at=K*e+tt;if(c[at+1]===0?c[at]=-h:c[at]===1&&(c[at]=h),rt===m&&Q===y&&K===B&&tt===Y){c[b]!==1&&(d=Math.abs(c[b]));break}else _=K,S=tt,K=rt,tt=Q}}}return f}static#s(t,e,i,a){if(i-e<=4){for(let B=e;B<i-2;B+=2)a.push(t[B],t[B+1]);return}const l=t[e],c=t[e+1],h=t[i-4]-l,d=t[i-3]-c,f=Math.hypot(h,d),m=h/f,y=d/f,b=m*c-y*l,A=d/h,_=1/f,S=Math.atan(A),x=Math.cos(S),E=Math.sin(S),C=_*(Math.abs(x)+Math.abs(E)),R=_*(1-C+C**2),k=Math.max(Math.atan(Math.abs(E+x)*R),Math.atan(Math.abs(E-x)*R));let O=0,I=e;for(let B=e+2;B<i-2;B+=2){const Y=Math.abs(b-m*t[B+1]+y*t[B]);Y>O&&(I=B,O=Y)}O>(f*k)**2?(this.#s(t,e,I+2,a),this.#s(t,I,i,a)):a.push(l,c)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,l,c){const h=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let S=0;S<c;S++){const x=(S-f)**2;for(let E=0;E<c;E++)h[S*c+E]=Math.exp((x+(E-f)**2)/d)}const m=new Float32Array(256),y=-2*l**2;for(let S=0;S<256;S++)m[S]=Math.exp(S**2/y);const b=t.length,A=new Uint8Array(b),_=new Uint32Array(256);for(let S=0;S<i;S++)for(let x=0;x<e;x++){const E=S*e+x,C=t[E];let R=0,k=0;for(let I=0;I<c;I++){const B=S+I-f;if(!(B<0||B>=i))for(let Y=0;Y<c;Y++){const K=x+Y-f;if(K<0||K>=e)continue;const tt=t[B*e+K],Z=h[I*c+Y]*m[Math.abs(tt-C)];R+=tt*Z,k+=Z}}const O=A[E]=Math.round(R/k);_[O]++}return[A,_]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,d=i.length;h<d;h++){const f=i[h]=t[h<<2];a=Math.max(a,f),l=Math.min(l,f)}const c=255/(a-l);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-l)*c;return i}static#h(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let c=l,h=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>a&&(a=e-c,h=e-1),i=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let c=i,h=a;if(i>l||a>l){let b=i,A=a,_=Math.log2(Math.max(i,a)/l);const S=Math.floor(_);_=_===S?S-1:S;for(let E=0;E<_;E++){c=Math.ceil(b/2),h=Math.ceil(A/2);const C=new OffscreenCanvas(c,h);C.getContext("2d").drawImage(t,0,0,b,A,0,0,c,h),b=c,A=h,t!==e&&t.close(),t=C.transferToImageBitmap()}const x=Math.min(l/c,l/h);c=Math.round(c*x),h=Math.round(h*x)}const f=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,h);const m=f.getImageData(0,0,c,h).data;return[this.#d(m),c,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,c,h,d){let f=new OffscreenCanvas(1,1),m=f.getContext("2d",{alpha:!1});const y=200,b=m.font=`${i} ${a} ${y}px ${e}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:_,actualBoundingBoxAscent:S,actualBoundingBoxDescent:x,fontBoundingBoxAscent:E,fontBoundingBoxDescent:C,width:R}=m.measureText(t),k=1.5,O=Math.ceil(Math.max(Math.abs(A)+Math.abs(_)||0,R)*k),I=Math.ceil(Math.max(Math.abs(S)+Math.abs(x)||y,Math.abs(E)+Math.abs(C)||y)*k);f=new OffscreenCanvas(O,I),m=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),m.font=b,m.filter="grayscale(1)",m.fillStyle="white",m.fillRect(0,0,O,I),m.fillStyle="black",m.fillText(t,O*(k-1)/2,I*(3-k)/2);const B=this.#d(m.getImageData(0,0,O,I).data),Y=this.#l(B),K=this.#h(Y),tt=this.#a(B,O,I,K);return this.processDrawnLines({lines:{curves:tt,width:O,height:I},pageWidth:l,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[c,h,d]=this.#f(t),[f,m]=this.#c(c,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),y=this.#h(m),b=this.#a(f,h,d,y);return this.processDrawnLines({lines:{curves:b,width:h,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:c,areContours:h}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:m}=t,y=t.thickness??0,b=[],A=Math.min(e/f,i/m),_=A/e,S=A/i,x=[];for(const{points:C}of d){const R=c?this.#o(C):C;if(!R)continue;x.push(R);const k=R.length,O=new Float32Array(k),I=new Float32Array(3*(k===2?2:k-2));if(b.push({line:I,points:O}),k===2){O[0]=R[0]*_,O[1]=R[1]*S,I.set([NaN,NaN,NaN,NaN,O[0],O[1]],0);continue}let[B,Y,K,tt]=R;B*=_,Y*=S,K*=_,tt*=S,O.set([B,Y,K,tt],0),I.set([NaN,NaN,NaN,NaN,B,Y],0);for(let Z=4;Z<k;Z+=2){const rt=O[Z]=R[Z]*_,Q=O[Z+1]=R[Z+1]*S;I.set(it.createBezierPoints(B,Y,K,tt,rt,Q),(Z-2)*3),[B,Y,K,tt]=[K,tt,rt,Q]}}if(b.length===0)return null;const E=h?new mf:new qo;return E.build(b,e,i,1,a,h?0:y,l),{outline:E,newCurves:x,areContours:h,thickness:y,width:f,height:m}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let c=1/0,h=-1/0,d=0;for(const R of t){d+=R.length;for(let k=2,O=R.length;k<O;k++){const I=R[k]-R[k-2];c=Math.min(c,I),h=Math.max(h,I)}}let f;c>=-128&&h<=127?f=Int8Array:c>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const m=t.length,y=Ac+uo*m,b=new Uint32Array(y);let A=0;b[A++]=y*Uint32Array.BYTES_PER_ELEMENT+(d-2*m)*f.BYTES_PER_ELEMENT,b[A++]=0,b[A++]=a,b[A++]=l,b[A++]=e?0:1,b[A++]=Math.max(0,Math.floor(i??0)),b[A++]=m,b[A++]=f.BYTES_PER_ELEMENT;for(const R of t)b[A++]=R.length-2,b[A++]=R[0],b[A++]=R[1];const _=new CompressionStream("deflate-raw"),S=_.writable.getWriter();await S.ready,S.write(b);const x=f.prototype.constructor;for(const R of t){const k=new x(R.length-2);for(let O=2,I=R.length;O<I;O++)k[O-2]=R[O]-R[O-2];S.write(k)}S.close();const E=await new Response(_.readable).arrayBuffer(),C=new Uint8Array(E);return Wv(C)}static async decompressSignature(t){try{const e=bR(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const R of i)c||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),c.set(R,h),h+=R.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const m=d[2],y=d[3],b=d[4]===0,A=d[5],_=d[6],S=d[7],x=[],E=(Ac+uo*_)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(S){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,E);break}h=0;for(let R=0;R<_;R++){const k=d[uo*R+Ac],O=new Float32Array(k+2);x.push(O);for(let I=0;I<uo-1;I++)O[I]=d[uo*R+Ac+I+1];for(let I=0;I<k;I++)O[I+2]=O[I]+C[h++]}return{areContours:b,thickness:A,outlines:x,width:m,height:y}}catch(e){return wt(`decompressSignature: ${e}`),null}}}class Zf extends MA{constructor(){super(),super.updateProperties({fill:dt._defaultLineColor,"stroke-width":0})}clone(){const t=new Zf;return t.updateAll(this),t}}class Jf extends iu{constructor(t){super(t),super.updateProperties({stroke:dt._defaultLineColor,"stroke-width":1})}clone(){const t=new Jf(this._viewParameters);return t.updateAll(this),t}}class Gn extends Pt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){dt.initialize(t,e),this._defaultDrawingOptions=new Zf,this._defaultDrawnSignatureOptions=new Jf(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return bt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:l,areContours:c,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:m,pageHeight:y},rotation:b}=this.parent.viewport,A=Ps.processDrawnLines({lines:a,pageWidth:m,pageHeight:y,rotation:b,innerMargin:Gn._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(A,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#i,c=Math.max(a,l),h=Ps.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:c}=this,{outline:h}=this.#i=t;this.#t=h instanceof mf,this.description=i;let d;this.#t?d=Gn.getDefaultDrawingOptions():(d=Gn._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let m=e/f;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Ps.process(t,e,i,a,Gn._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return Ps.extractContoursFromText(t,e,i,a,l,Gn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return Ps.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:Gn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=Gn.getDefaultDrawingOptions():(this._drawingOptions=Gn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#n,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,a,l,c){return c.areContours?mf.deserialize(t,e,i,a,l,c):qo.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class WD extends dt{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){dt.initialize(t,e)}static isHandlingMimeForPasting(t){return Fc.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#g(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Fc.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#g();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#m(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>c*a||i>c*l){const d=Math.min(c*a/e,c*l/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const h=this.#s=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/a,this.height=i/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,c=new Ln;let h=this.#t,d=a,f=l,m=null;if(e){if(a>e||l>e){const I=Math.min(e/a,e/l);d=Math.floor(a*I),f=Math.floor(l*I)}m=document.createElement("canvas");const b=m.width=Math.ceil(d*c.sx),A=m.height=Math.ceil(f*c.sy);this.#l||(h=this.#u(b,A));const _=m.getContext("2d");_.filter=this._uiManager.hcmFilter;let S="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":wR.isDarkMode&&(S="#8f8f9d",x="#42414d");const E=15,C=E*c.sx,R=E*c.sy,k=new OffscreenCanvas(C*2,R*2),O=k.getContext("2d");O.fillStyle=S,O.fillRect(0,0,C*2,R*2),O.fillStyle=x,O.fillRect(0,0,C,R),O.fillRect(C,R,C,R),_.fillStyle=_.createPattern(k,"repeat"),_.fillRect(0,0,b,A),_.drawImage(h,0,0,h.width,h.height,0,0,b,A)}let y=null;if(i){let b,A;if(c.symmetric&&h.width<t&&h.height<t)b=h.width,A=h.height;else if(h=this.#t,a>t||l>t){const x=Math.min(t/a,t/l);b=Math.floor(a*x),A=Math.floor(l*x),this.#l||(h=this.#u(b,A))}const S=new OffscreenCanvas(b,A).getContext("2d",{willReadFrequently:!0});S.drawImage(h,0,0,h.width,h.height,0,0,b,A),y={width:b,height:A,data:S.getImageData(0,0,b,A).data}}return{canvas:m,width:d,height:f,imageData:y}}#u(t,e){const{width:i,height:a}=this.#t;let l=i,c=a,h=this.#t;for(;l>2*t||c>2*e;){const d=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const m=new OffscreenCanvas(l,c);m.getContext("2d").drawImage(h,0,0,d,f,0,0,l,c),h=m.transferToImageBitmap()}return h}#p(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new Ln,c=Math.ceil(i*t*l.sx),h=Math.ceil(a*e*l.sy),d=this.#s;if(!d||d.width===c&&d.height===h)return;d.width=c,d.height=h;const f=this.#l?this.#t:this.#u(c,h),m=d.getContext("2d");m.filter=this._uiManager.hcmFilter,m.drawImage(f,0,0,f.width,f.height,0,0,c,h)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*Gs.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*Gs.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof RA){const{data:{rect:S,rotation:x,id:E,structParent:C,popupRef:R,richText:k,contentsObj:O,creationDate:I,modificationDate:B},container:Y,parent:{page:{pageNumber:K}},canvas:tt}=t;let Z,rt;tt?(delete t.canvas,{id:Z,bitmap:rt}=i.imageManager.getFromCanvas(Y.id,tt),tt.remove()):(l=!0,t._hasNoCanvas=!0);const Q=(await e._structTree.getAriaAttributes(`${Ba}${E}`))?.get("aria-label")||"";a=t={annotationType:At.STAMP,bitmapId:Z,bitmap:rt,pageIndex:K-1,rect:S.slice(0),rotation:x,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:C,popupRef:R,richText:k,comment:O?.str||null,creationDate:I,modificationDate:B}}const c=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:m,isSvg:y,accessibilityData:b}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):m&&i.imageManager.isValidId(m)?(c.#e=m,d&&(c.#t=d)):c.#n=f,c.#l=y;const[A,_]=c.pageDimensions;return c.width=(h[2]-h[0])/A,c.height=(h[3]-h[1])/_,b&&(c.altTextData=b),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=this.#v(i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class $n{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([Te,Qf,WD,pe,Gn].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:d,viewport:f,l10n:m}){const y=[...$n.#p.values()];if(!$n._initialized){$n._initialized=!0;for(const b of y)b.initialize(m,t)}t.registerEditorTypes(y),this.#u=t,this.pageIndex=e,this.div=i,this.#t=l,this.#i=c,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#w(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of $n.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#g){this.#g=new AbortController;const a=this.#u.combinedSignal(this.#g);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:d,timeStamp:f}=l,m=this.#m;if(f-m>500){this.#m=f;return}this.#m=-1;const{classList:y}=this.div;y.toggle("getElements",!0);const b=document.elementsFromPoint(h,d);if(y.toggle("getElements",!1),!this.div.contains(b[0]))return;let A;const _=new RegExp(`^${xo}[0-9]+$`);for(const x of b)if(_.test(x.id)){A=x.id;break}if(!A)return;const S=this.#a.get(A);S?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),S.dblclick(l))},{signal:a,capture:!0})}const t=this.#i,e=[];if(t){const a=new Map,l=new Map;for(const h of this.#y){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);this.getEditableAnnotation(h.annotationElementId)?.show(),h.remove()}const c=t.getEditableAnnotations();for(const h of c){const{id:d}=h.data;if(this.#u.isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let f=l.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(h)&&f.show(!1)),h.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of $n.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Ae.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),pe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),dt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return $n.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#_(),l=this.getNextId(),c=this.#E({parent:this,id:l,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await $n.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#E({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#_(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(l+h)/2-t,m=(c+d)/2-e,[y,b]=this.viewport.rotation%180===0?[f,m]:[m,f];return{offsetX:y,offsetY:b}}addNewEditor(t={}){this.createAndAddNewEditor(this.#_(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===At.STAMP||i===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Ae.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#w(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ms(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#w();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,ms(this.div,{rotation:i}),e!==i)for(const a of this.#a.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Ce{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return bt(this,"_svgFactory",new Ro)}static#r(t,[e,i,a,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`}#a(){const t=Ce._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=Ce._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=Ce._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Ce.#n++,l=this.#a(),c=Ce._svgFactory.createElement("defs");l.append(c);const h=Ce._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,h);const f=i?this.#s(c,d):null,m=Ce._svgFactory.createElement("use");return l.append(m),m.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Ce.#n++,a=this.#a(),l=Ce._svgFactory.createElement("defs");a.append(l);const c=Ce._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const y=Ce._svgFactory.createElement("mask");l.append(y),d=`mask_p${this.pageIndex}_${i}`,y.setAttribute("id",d),y.setAttribute("maskUnits","objectBoundingBox");const b=Ce._svgFactory.createElement("rect");y.append(b),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("fill","white");const A=Ce._svgFactory.createElement("use");y.append(A),A.setAttribute("href",`#${h}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const f=Ce._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const m=f.cloneNode();return a.append(m),f.classList.add("mainOutline"),m.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:c}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),a&&Ce.#r(h,a),l){const{classList:d}=h;for(const[f,m]of Object.entries(l))d.toggle(f,m)}if(c){const f=h.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ff};globalThis.pdfjsLib={AbortException:Ri,AnnotationEditorLayer:$n,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:Di,AnnotationLayer:nu,AnnotationMode:Ai,AnnotationType:fe,applyOpacity:tA,build:_A,ColorPicker:un,createValidAbsoluteUrl:Pf,CSSConstants:Jv,DOMSVGFactory:Ro,DrawLayer:Ce,FeatureTest:Ae,fetchData:ir,findContrastColor:eA,getDocument:vA,getFilenameFromUrl:Kv,getPdfFilenameFromUrl:Qv,getRGB:sr,getUuid:jf,getXfaPageViewport:Zv,GlobalWorkerOptions:zs,ImageKind:bo,InvalidPDFException:jc,isDataScheme:zo,isPdfFile:tu,isValidExplicitDest:rA,MathClamp:Pe,noContextMenu:dn,normalizeUnicode:Yv,OPS:Ka,OutputScale:Ln,PasswordResponses:$v,PDFDataRangeTransport:Yf,PDFDateString:Uc,PDFWorker:Qa,PermissionFlag:qv,PixelsPerInch:Gs,RenderingCancelledException:Jc,renderRichText:Ff,ResponseException:Eo,setLayerDimensions:ms,shadow:bt,SignatureExtractor:Ps,stopEvent:re,SupportedImageMimeTypes:Fc,TextLayer:Qe,TouchManager:Vo,updateUrlHash:Bf,Util:nt,VerbosityLevel:jo,version:SA,XfaLayer:Uf};const KD=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Ri,AnnotationEditorLayer:$n,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:Di,AnnotationLayer:nu,AnnotationMode:Ai,AnnotationType:fe,CSSConstants:Jv,ColorPicker:un,DOMSVGFactory:Ro,DrawLayer:Ce,FeatureTest:Ae,GlobalWorkerOptions:zs,ImageKind:bo,InvalidPDFException:jc,MathClamp:Pe,OPS:Ka,OutputScale:Ln,PDFDataRangeTransport:Yf,PDFDateString:Uc,PDFWorker:Qa,PasswordResponses:$v,PermissionFlag:qv,PixelsPerInch:Gs,RenderingCancelledException:Jc,ResponseException:Eo,SignatureExtractor:Ps,SupportedImageMimeTypes:Fc,TextLayer:Qe,TouchManager:Vo,Util:nt,VerbosityLevel:jo,XfaLayer:Uf,applyOpacity:tA,build:_A,createValidAbsoluteUrl:Pf,fetchData:ir,findContrastColor:eA,getDocument:vA,getFilenameFromUrl:Kv,getPdfFilenameFromUrl:Qv,getRGB:sr,getUuid:jf,getXfaPageViewport:Zv,isDataScheme:zo,isPdfFile:tu,isValidExplicitDest:rA,noContextMenu:dn,normalizeUnicode:Yv,renderRichText:Ff,setLayerDimensions:ms,shadow:bt,stopEvent:re,updateUrlHash:Bf,version:SA},Symbol.toStringTag,{value:"Module"}));zs.workerPort=new Worker(new URL("/assets/pdf.worker.min-BHtGh23B.js",import.meta.url),{type:"module"});const S0=async(o,t)=>{try{return(await(await o.getPage(t)).getTextContent()).items.map(a=>a.str).join(" ")}catch(e){throw console.error("Error extracting text from PDF:",e),e}},_0=async o=>{let t;if(typeof o=="string")t=new TextEncoder().encode(o);else if(o instanceof ArrayBuffer)t=new Uint8Array(o);else if(o instanceof Uint8Array)t=o;else throw new Error("computeSHA256: unsupported input type");const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(a=>a.toString(16).padStart(2,"0")).join("")},x0=()=>{const{authState:o,app:t,auth:e}=If(),i=typeof window<"u"&&window.MOCK_AUTH,[a,l]=j.useState(null),[c,h]=j.useState({}),[d,f]=j.useState(!1),[m,y]=j.useState(null),[b,A]=j.useState(null),[_,S]=j.useState(1),[x,E]=j.useState(1.5),[C,R]=j.useState(null),[k,O]=j.useState(""),[I,B]=j.useState([]),[Y,K]=j.useState([]),[tt,Z]=j.useState([]),[rt,Q]=j.useState(null),[at,ct]=j.useState(""),[L,H]=j.useState(!1),J=j.useRef(null),{documentId:St,fileName:_t}=j0(),M=Mi(),V=Gc(),W=t?QC(t):null,{canvasRef:et,textLayerRef:ft,annotationsRef:gt,renderPage:pt}=lR(m,x);j.useEffect(()=>{o.status==="error"&&o.error?l(o.error.message||"Firebase authentication error"):t||l("Firebase not initialized properly")},[o,t]);const Kt=()=>i&&o.status==="authenticated"?!0:t&&W&&o.status==="authenticated";j.useEffect(()=>{(async()=>{const ut=await Zx(()=>Promise.resolve().then(()=>KD),[]);window.pdfjsLib=ut,H(!0),_t&&await Qn(_t)})()},[_t]),j.useEffect(()=>{M.state?.document&&!_t&&L&&(R(M.state.document),jt(M.state.document.file))},[M,_t,L]),j.useEffect(()=>{m&&_&&pt(_,I,Y,tt)},[m,_,x,I,Y,tt]);const jt=async lt=>{if(!(!window.pdfjsLib||!lt))try{f(!0);const ut=lt.name||"document";ct(`Loading ${ut}...`);const $t=await lt.arrayBuffer();console.log("PDF Buffer Size:",$t.byteLength);const Qt=await _0($t);Q(Qt);const zt=await window.pdfjsLib.getDocument({data:$t,onProgress:Jn=>{const Ys=Math.round(Jn.loaded/Jn.total*100);ct(`Loading ${ut}: ${Ys}%`)}}).promise;y(zt),A(zt.numPages),ct(`Extracting text from ${ut}...`);const se=await S0(zt);O(se),S(1),ct("")}catch(ut){console.error("Error loading PDF from blob:",ut),console.error(ut.stack),ct("")}finally{f(!1)}},Qn=async lt=>{if(window.pdfjsLib)try{f(!0),ct(`Loading ${lt}...`);const ut=`/test-docs/${lt}`,$t=await fetch(ut);if(!$t.ok)throw new Error(`Failed to fetch PDF: ${$t.statusText}`);const Qt=await $t.arrayBuffer(),Zt=await _0(Qt);Q(Zt);const se=await window.pdfjsLib.getDocument({data:Qt,onProgress:Ys=>{const ru=Math.round(Ys.loaded/Ys.total*100);ct(`Loading ${lt}: ${ru}%`)}}).promise;y(se),A(se.numPages),R({id:lt,name:lt,size:Qt.byteLength,type:"application/pdf",file:null}),ct(`Extracting text from ${lt}...`);const Jn=await S0(se);O(Jn),S(1),ct("")}catch(ut){console.error("Error loading test PDF:",ut),ct(""),typeof window<"u"&&window.alert&&window.alert(`Error loading test PDF: ${ut.message}`)}finally{f(!1)}},In=()=>{_<=1||S(_-1)},Zn=()=>{_>=b||S(_+1)},gs=()=>{E(lt=>Math.min(lt+.2,3))},Tn=()=>{E(lt=>Math.max(lt-.2,.5))},ar=lt=>{const $t=Array.from(lt.target.files).filter(Qt=>Qt.type==="application/pdf");if($t.length>0){const Qt=$t[0],Zt={id:Date.now()+Math.random(),name:Qt.name,size:Qt.size,type:Qt.type,file:Qt};R(Zt),V("/view",{state:{document:Zt}})}},rr=async()=>{if(!k||!b)return{ok:!0,classification:"FREE_OK"};if(i)return{ok:!0,classification:"FREE_OK"};if(!W)return console.error("Firebase functions not available. Returning default response."),{ok:!0,classification:"FREE_OK"};try{const lt=k.split("\f"),ut=lt.map(zt=>zt.length),$t=lt.reduce((zt,se)=>zt+se.length,0);return(await ao(W,"preflightCheck")({docHash:rt,stats:{pageCount:b,charsPerPage:ut,totalChars:$t,pdfSizeBytes:C?.size||0}})).data}catch(lt){return console.error("Preflight check error:",lt),{ok:!0,classification:"FREE_OK"}}},su=async()=>{if(!(!C||!k||!rt)){if(!Kt()){console.warn("Document analysis unavailable: Firebase services not accessible.");return}f(!0);try{const lt=await rr();if(!lt.ok)if(lt.code==="SCAN_DETECTED_PRO_REQUIRED"||lt.code==="AI_BUDGET_EXCEEDED_PRO_REQUIRED"){alert(`This document requires deeper analysis, available on Pro. ${lt.message}`);return}else throw console.error("Preflight check failed:",lt),new Error(lt.message||"Preflight check failed");if(lt.classification!=="FREE_OK"){alert(`This document requires deeper analysis, available on Pro. ${lt.reasons?.map(zt=>zt.message).join(", ")||""}`);return}const ut=k.split("\f"),$t=ut.map(zt=>zt.length),Qt=ut.reduce((zt,se)=>zt+se.length,0);let Zt;if(i?Zt={data:await(await fetch("/analyzeText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:rt,stats:{pageCount:b,charsPerPage:$t,totalChars:Qt,languageHint:"en"},text:{format:"paged",value:k},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}})})).json()}:Zt=await ao(W,"analyzeText")({docHash:rt,stats:{pageCount:b,charsPerPage:$t,totalChars:Qt,languageHint:"en"},text:{format:"paged",value:k,pageTextIndex:ut.map((se,Jn)=>({page:Jn+1,start:0,end:se.length}))},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}}),Zt.data.ok){const zt={summary:Zt.data.result.plainExplanation,keyPoints:[],risks:Zt.data.result.risks.map(se=>({id:se.id,clause:se.title,riskLevel:se.severity,description:se.whyItMatters,explanation:se.whatToCheck.join("; ")})),recommendations:Zt.data.result.risks.flatMap(se=>se.whatToCheck||[])};h(se=>({...se,[C.id]:zt})),$o(zt)}else if(Zt.data.code==="SCAN_DETECTED_PRO_REQUIRED"||Zt.data.code==="AI_BUDGET_EXCEEDED_PRO_REQUIRED")alert(`This document requires deeper analysis, available on Pro. ${Zt.data.message}`);else throw console.error("Analysis failed:",Zt.data),new Error(Zt.data.message||"Analysis failed")}catch(lt){throw console.error("Error analyzing document:",lt),lt}finally{f(!1)}}},$o=lt=>{const ut=[],$t=[],Qt=[];lt.risks&&lt.risks.length>0&&lt.risks.forEach((Zt,zt)=>{Qt.push({id:zt,pageNum:1,x:100+zt*50,y:100+zt*40,level:Zt.riskLevel,description:Zt.description,explanation:Zt.explanation})}),B(ut),K($t),Z(Qt)},or=async()=>{if(!C||!rt)return;if(!Kt()){console.warn("Explain selection unavailable: Firebase services not accessible.");return}const lt="Limitation of liability clause";try{let ut;if(i?ut={data:await(await fetch("/explainSelection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:rt,selection:lt,documentContext:k})})).json()}:ut=await ao(W,"explainSelection")({docHash:rt,selection:lt,documentContext:k}),ut.data.success)alert(`Explanation: ${ut.data.explanation.plainExplanation}`);else throw console.error("Explanation failed:",ut.data),new Error(ut.data.error||"Explanation failed")}catch(ut){throw console.error("Error explaining selection:",ut),ut}},lr=async()=>{if(!(!C||!rt)){if(!Kt()){console.warn("Risk highlighting unavailable: Firebase services not accessible.");return}f(!0);try{let lt;if(i?lt={data:await(await fetch("/highlightRisks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:rt,documentText:k,documentType:"contract"})})).json()}:lt=await ao(W,"highlightRisks")({docHash:rt,documentText:k,documentType:"contract"}),lt.data.success){alert(`Found ${lt.data.risks.summary.totalRisks} risks in the document.`);const ut=lt.data.risks.items?.map(($t,Qt)=>({id:Qt,pageNum:1,x:150+Qt*40,y:150+Qt*35,level:$t.riskLevel,description:$t.description,explanation:$t.explanation}))||[];Z(ut)}else throw console.error("Risk highlighting failed:",lt.data),new Error(lt.data.error||"Risk highlighting failed")}catch(lt){throw console.error("Error highlighting risks:",lt),lt}finally{f(!1)}}},cr=async()=>{if(!(!C||!rt)){if(!Kt()){console.warn("Translation unavailable: Firebase services not accessible.");return}try{const lt=k.substring(0,500);let ut;if(i?ut={data:await(await fetch("/translateToPlainEnglish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:rt,legalText:lt})})).json()}:ut=await ao(W,"translateToPlainEnglish")({docHash:rt,legalText:lt}),ut.data.success)alert(`Original: ${ut.data.translation.originalText}

Plain English: ${ut.data.translation.plainEnglishTranslation}`);else throw console.error("Translation failed:",ut.data),new Error(ut.data.error||"Translation failed")}catch(lt){throw console.error("Error translating to plain English:",lt),lt}}},au=()=>{C&&V(`/edit/${C.id}`,{state:{document:C}})};return j.useEffect(()=>()=>{m&&m.destroy()},[m]),w.jsx(nR,{children:w.jsxs("div",{className:"flex flex-1 min-h-0 h-[calc(100vh-120px)]",children:[w.jsxs("div",{className:"flex-1 flex flex-col p-5 border-r border-gray-300 min-w-0",children:[w.jsx(iR,{onFileSelect:ar,onEdit:au,currentFileName:C?.name,pageNumber:_,numPages:b,pageScale:x,onPreviousPage:In,onNextPage:Zn,onZoomIn:gs,onZoomOut:Tn,fileInputRef:J}),w.jsx(sR,{pdfDoc:m,isLoading:d,loadingMessage:at,canvasRef:et,textLayerRef:ft,annotationsRef:gt})]}),w.jsxs("div",{className:"flex flex-col",children:[w.jsx(aR,{onAnalyzeDocument:su,onExplainSelection:or,onHighlightRisks:lr,onTranslateToPlainEnglish:cr,isLoading:d,isAuthenticated:o.status==="authenticated",hasDocument:!!C}),c[C?.id]&&w.jsx("div",{className:"w-[350px] p-5 bg-gray-50 border-l border-gray-300 overflow-y-auto",children:w.jsx(oR,{analysis:c[C.id]})})]})]})})},QD=()=>{const[o,t]=j.useState(null),[e,i]=j.useState(null),[a,l]=j.useState(!1),[c,h]=j.useState([]),[d,f]=j.useState([]),[m,y]=j.useState(null),[b,A]=j.useState({width:150,height:50}),_=j.useRef(null);j.useRef(null);const{documentId:S}=j0(),x=Mi(),E=Gc();j.useEffect(()=>{if(x.state?.document){i(x.state.document);const Q=URL.createObjectURL(x.state.document.file);t(Q)}else if(S){const Q={id:S,name:`Document_${S}.pdf`,size:102400,type:"application/pdf",file:null};i(Q)}},[S,x]);const C=Q=>{const ct=Array.from(Q.target.files).filter(L=>L.type==="application/pdf");if(ct.length>0){const L={id:Date.now()+Math.random(),name:ct[0].name,size:ct[0].size,type:ct[0].type,file:ct[0]},H=URL.createObjectURL(L.file);i(L),t(H),E(`/edit/${L.id}`,{state:{document:L}})}},R=()=>{alert("Document saved successfully!")},k=()=>{alert("Download functionality would be implemented here.")},O=()=>{alert("Print functionality would be implemented here.")},I=()=>{l(!a)},B=Q=>{if(!a)return;const at=Q.currentTarget.getBoundingClientRect(),ct=Q.clientX-at.left,L=Q.clientY-at.top,H={id:Date.now(),x:ct,y:L,width:b.width,height:b.height,text:"John Doe",date:new Date().toLocaleDateString()};h([...c,H])},Y=Q=>{if(!a)return;const at=Q.currentTarget.getBoundingClientRect(),ct=Q.clientX-at.left,L=Q.clientY-at.top,H={id:Date.now(),x:ct,y:L,text:"Important note"};f([...d,H])},K=Q=>{if(!a)return;const at=Q.currentTarget.getBoundingClientRect(),ct=Q.clientX-at.left,L=Q.clientY-at.top,H={id:Date.now(),x:ct,y:L,width:50,height:25,text:"JD"};h([...c,H])},tt=Q=>{if(!a)return;const at=Q.currentTarget.getBoundingClientRect(),ct=Q.clientX-at.left,L=Q.clientY-at.top,H={id:Date.now(),x:ct,y:L,width:100,height:25,text:new Date().toLocaleDateString()};h([...c,H])},Z=(Q,at)=>{A(ct=>({...ct,[Q]:parseInt(at)}))},rt=()=>{e&&E(`/view/${e.id}`,{state:{document:e}})};return w.jsxs(w.Fragment,{children:[w.jsx("header",{className:"App-header",children:w.jsxs(Le,{to:"/",style:{textDecoration:"none",color:"white"},children:[w.jsx("h1",{children:"DecoDocs"}),w.jsx("p",{children:w.jsx("strong",{children:"Decode documents. Act with confidence."})})]})}),w.jsxs("div",{className:"pdf-editor-layout",children:[w.jsxs("div",{className:"pdf-editor-container",children:[w.jsxs("div",{className:"pdf-controls",children:[w.jsx("button",{onClick:()=>_.current?.click(),className:"open-pdf-btn",children:"Open Different PDF"}),w.jsx("button",{onClick:rt,className:"view-pdf-btn",children:"View Document"}),w.jsx("button",{onClick:I,className:`sign-mode-btn ${a?"active":""}`,children:a?"Exit Sign Mode":"Enter Sign Mode"}),e&&w.jsxs("span",{className:"current-file",children:["Current: ",e.name]}),w.jsx("input",{type:"file",ref:_,accept:".pdf",multiple:!0,onChange:C,style:{display:"none"}})]}),o?w.jsxs("div",{className:"pdf-display",onClick:a?B:void 0,children:[w.jsx("iframe",{src:o,title:"PDF Editor",width:"100%",height:"calc(100vh - 200px)",type:"application/pdf"}),a&&w.jsxs(w.Fragment,{children:[c.map(Q=>w.jsx("div",{className:"signature-element",style:{position:"absolute",left:`${Q.x}px`,top:`${Q.y}px`,width:`${Q.width}px`,height:`${Q.height}px`,border:"1px solid #007acc",backgroundColor:"rgba(0, 122, 204, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#007acc",zIndex:1e3},children:Q.text},Q.id)),d.map(Q=>w.jsx("div",{className:"annotation-element",style:{position:"absolute",left:`${Q.x}px`,top:`${Q.y}px`,padding:"5px",backgroundColor:"yellow",border:"1px solid black",fontSize:"12px",zIndex:1e3},children:Q.text},Q.id))]})]}):w.jsx("div",{className:"pdf-placeholder",children:w.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})})]}),w.jsxs("div",{className:"editor-toolbox-section",children:[w.jsxs("div",{className:"editor-controls",children:[w.jsx("h4",{children:"Editor Controls"}),w.jsxs("div",{className:"editor-buttons",children:[w.jsx("button",{onClick:R,className:"save-btn",children:"Save Document"}),w.jsx("button",{onClick:k,className:"download-btn",children:"Download"}),w.jsx("button",{onClick:O,className:"print-btn",children:"Print"})]})]}),w.jsxs("div",{className:"signing-tools",children:[w.jsx("h4",{children:"Signing Tools"}),w.jsxs("div",{className:"signing-buttons",children:[w.jsx("button",{onClick:Q=>{Q.preventDefault(),B(Q)},className:"add-signature-btn",disabled:!a,children:"Add Signature"}),w.jsx("button",{onClick:Q=>{Q.preventDefault(),Y(Q)},className:"add-annotation-btn",disabled:!a,children:"Add Annotation"}),w.jsx("button",{onClick:Q=>{Q.preventDefault(),K(Q)},className:"add-initial-btn",disabled:!a,children:"Add Initials"}),w.jsx("button",{onClick:Q=>{Q.preventDefault(),tt(Q)},className:"add-date-btn",disabled:!a,children:"Add Date"})]}),w.jsxs("div",{className:"signature-preview",children:[w.jsx("h4",{children:"Signature Settings"}),w.jsxs("div",{className:"signature-dimensions",children:[w.jsxs("label",{children:["Width:",w.jsx("input",{type:"number",value:b.width,onChange:Q=>Z("width",Q.target.value),min:"50",max:"300"})]}),w.jsxs("label",{children:["Height:",w.jsx("input",{type:"number",value:b.height,onChange:Q=>Z("height",Q.target.value),min:"25",max:"100"})]})]})]})]}),w.jsxs("div",{className:"editing-tools",children:[w.jsx("h4",{children:"Editing Options"}),w.jsxs("div",{className:"editing-options",children:[w.jsxs("div",{className:"tool-option",children:[w.jsx("input",{type:"checkbox",id:"enable-comments",checked:a,onChange:I}),w.jsx("label",{htmlFor:"enable-comments",children:"Enable Signing Tools"})]}),w.jsxs("div",{className:"tool-option",children:[w.jsx("input",{type:"checkbox",id:"lock-document",disabled:!0}),w.jsx("label",{htmlFor:"lock-document",children:"Lock Document (Coming Soon)"})]})]})]}),w.jsxs("div",{className:"document-info",children:[w.jsx("h4",{children:"Document Info"}),w.jsxs("ul",{children:[w.jsxs("li",{children:[w.jsx("strong",{children:"Name:"})," ",e?.name||"None selected"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Size:"})," ",(e?.size/1024).toFixed(2)," KB"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Type:"})," ",e?.type||"N/A"]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Signatures:"})," ",c.length]}),w.jsxs("li",{children:[w.jsx("strong",{children:"Annotations:"})," ",d.length]})]})]})]})]}),w.jsx("footer",{className:"standard-footer",children:w.jsxs("div",{className:"footer-content",children:[w.jsx("p",{children:" SnapSign Pty Ltd"}),w.jsx("p",{children:"ABN 72 679 570 757"}),w.jsxs("div",{className:"footer-links",children:[w.jsx(Le,{to:"/about",children:"About"}),w.jsx("a",{href:"#privacy",children:"Privacy Policy"}),w.jsx("a",{href:"#terms",children:"Terms of Service"}),w.jsx("a",{href:"#contact",children:"Contact"})]})]})})]})},ZD=()=>w.jsxs("div",{className:"about-page",children:[w.jsx("header",{className:"App-header",children:w.jsxs(Le,{to:"/",style:{textDecoration:"none",color:"white"},children:[w.jsx("h1",{children:"DecoDocs"}),w.jsx("p",{children:w.jsx("strong",{children:"Understand documents before you sign."})})]})}),w.jsx("main",{className:"about-main",children:w.jsxs("div",{className:"about-container",children:[w.jsxs("section",{className:"about-header",children:[w.jsx("h1",{children:"About DecoDocs"}),w.jsx("p",{children:"DecoDocs is a document intelligence product designed to help people understand what they are about to sign. Before any signature, DecoDocs explains documents in plain language, highlights caveats and unfair conditions, flags logical inconsistencies, and provides translations when needed. Our focus is clarity before commitment."})]}),w.jsxs("section",{className:"product-philosophy",children:[w.jsx("h2",{children:"What We Believe"}),w.jsxs("ul",{className:"philosophy-list",children:[w.jsx("li",{children:"Documents should be understood before being signed"}),w.jsx("li",{children:"AI should reduce information asymmetry, not introduce new ones"}),w.jsx("li",{children:"Free users deserve real value, not crippled features"}),w.jsx("li",{children:"We charge only for real costs: deeper analysis and storage"}),w.jsx("li",{children:"Documents belong to users, not platforms"})]})]}),w.jsxs("section",{className:"scope-definition",children:[w.jsx("h2",{children:"What DecoDocs Is  and Is Not"}),w.jsxs("div",{className:"scope-columns",children:[w.jsxs("div",{className:"scope-column",children:[w.jsx("h3",{children:"Is"}),w.jsxs("ul",{children:[w.jsx("li",{children:"Pre-signature document analysis"}),w.jsx("li",{children:"Plain-language explanation"}),w.jsx("li",{children:"Caveat and unfair-condition detection"}),w.jsx("li",{children:"Logical inconsistency checks"}),w.jsx("li",{children:"Ephemeral processing by default"})]})]}),w.jsxs("div",{className:"scope-column",children:[w.jsx("h3",{children:"Is Not"}),w.jsxs("ul",{children:[w.jsx("li",{children:"A document editor"}),w.jsx("li",{children:"A document management system"}),w.jsx("li",{children:'A "sign now, think later" tool'}),w.jsx("li",{children:"A storage-first SaaS"}),w.jsx("li",{children:"A replacement for legal advice"})]})]})]})]}),w.jsxs("section",{className:"decodocs-clarification",children:[w.jsx("h2",{children:"How It Relates To SnapSign"}),w.jsx("p",{children:"Snap Sign Pty Ltd builds DecoDocs. SnapSign is the company brand and broader product family; DecoDocs is the document understanding and analysis product in that family."})]}),w.jsxs("section",{className:"team-company",children:[w.jsx("h2",{children:"Company"}),w.jsx("p",{children:"SnapSign is built by a small, focused team with backgrounds in software engineering, automation, and privacy-first systems. We prioritize correctness, transparency, and long-term maintainability."}),w.jsxs("div",{className:"legal-block",children:[w.jsx("p",{children:"SnapSign Pty Ltd"}),w.jsx("p",{children:"ABN 72 679 570 757"}),w.jsx("p",{children:"Australia"})]})]}),w.jsxs("section",{className:"collaboration-contact",children:[w.jsx("h2",{children:"Collaboration"}),w.jsx("p",{children:"We welcome serious collaboration and partnership enquiries. For certain discussions, a Non-Disclosure Agreement (NDA) may be required before sharing internal details."}),w.jsx("div",{className:"contact-info",children:w.jsxs("p",{children:["Email: ",w.jsx("a",{href:"mailto:partnerships@snapsign.com.au",children:"partnerships@snapsign.com.au"})]})})]})]})}),w.jsx("footer",{className:"about-footer",children:w.jsxs("div",{className:"footer-content",children:[w.jsx("p",{children:" SnapSign Pty Ltd"}),w.jsx("p",{children:"ABN 72 679 570 757"}),w.jsxs("div",{className:"footer-links",children:[w.jsx(Le,{to:"/about",children:"About"}),w.jsx(Le,{to:"/privacy",children:"Privacy Policy"}),w.jsx(Le,{to:"/terms",children:"Terms of Service"}),w.jsx(Le,{to:"/contact",children:"Contact"})]})]})})]}),JD=()=>w.jsx($c,{onOpenPdf:()=>{},children:w.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[w.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Privacy Policy"}),w.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),w.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[w.jsx("p",{children:'DecoDocs ("we", "us") is built by Snap Sign Pty Ltd. This policy explains what data is processed when you use DecoDocs, what is stored, and what choices you have.'}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"What we process"}),w.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[w.jsx("li",{children:"PDF file metadata (filename, size) and content needed to render and analyze the document."}),w.jsx("li",{children:"Extracted text used to generate summaries, explanations, and risk highlights."}),w.jsx("li",{children:"Basic usage events (e.g. button clicks) to understand product performance."})]}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Storage (Free vs Pro)"}),w.jsxs("p",{children:[w.jsx("strong",{children:"Free:"})," we aim to avoid storing your files. Documents are opened for viewing and analysis without persistent storage."]}),w.jsxs("p",{children:[w.jsx("strong",{children:"Pro (optional):"})," secure storage may be available for users who explicitly choose to save documents for later access."]}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Retention"}),w.jsx("p",{children:"We retain only what is necessary to operate the service. Where storage is enabled (e.g. Pro), retention and deletion controls will be provided."}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your controls"}),w.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[w.jsx("li",{children:"You can choose whether to use free (no-storage) workflows or paid storage features when available."}),w.jsx("li",{children:"You can contact us to request deletion or export of stored data where applicable."})]}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),w.jsxs("p",{children:["Questions or requests: ",w.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]})}),t2=()=>w.jsx($c,{onOpenPdf:()=>{},children:w.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[w.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Terms of Service"}),w.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),w.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[w.jsx("p",{children:"These terms govern use of DecoDocs provided by Snap Sign Pty Ltd. By using the service, you agree to these terms."}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Not legal advice"}),w.jsx("p",{children:"DecoDocs provides informational analysis and is not legal advice. For legal decisions, consult a qualified professional."}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Acceptable use"}),w.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[w.jsx("li",{children:"Do not upload content you do not have the right to process."}),w.jsx("li",{children:"Do not attempt to abuse, probe, or disrupt the service."}),w.jsx("li",{children:"Do not use the service for illegal activity."})]}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Availability and changes"}),w.jsx("p",{children:"The service may change over time. We may add, modify, or remove features. We may suspend access to protect the service or comply with law."}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Limitation of liability"}),w.jsx("p",{children:"To the maximum extent permitted by law, Snap Sign Pty Ltd is not liable for indirect or consequential losses arising from use of the service."}),w.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),w.jsxs("p",{children:["Questions: ",w.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]})}),e2=()=>{const o="mailto:contact@snapsign.com?subject="+encodeURIComponent("DecoDocs signing waitlist");return w.jsx($c,{onOpenPdf:()=>{},children:w.jsxs("section",{className:"mx-auto w-full max-w-3xl px-6 py-16",children:[w.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Contact"}),w.jsxs("p",{className:"mt-4 text-slate-700",children:["For support, partnerships, or product feedback, email us at"," ",w.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"}),"."]}),w.jsxs("div",{className:"mt-10 rounded-2xl border border-slate-200 bg-white p-6",children:[w.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Signing waitlist"}),w.jsx("p",{className:"mt-2 text-slate-700",children:"Want the signing workflow? Join the waitlist and tell us your use case."}),w.jsx("a",{className:"mt-4 inline-flex rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",href:o,children:"Join the waitlist"})]})]})})};class n2 extends yf.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.error("ErrorBoundary caught an error:",t,e),this.setState({error:t,errorInfo:e})}render(){return this.state.hasError?w.jsxs("div",{style:{padding:"2rem",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[w.jsx("h1",{children:"Oops! Something went wrong"}),w.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"We encountered an unexpected error. Please try refreshing the page."}),!1,w.jsx("button",{onClick:()=>window.location.href="/",style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Home"})]}):this.props.children}}const i2=()=>{const{authState:o}=If(),[t,e]=yf.useState(!1);return o.status!=="error"||t?null:w.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"1rem",maxWidth:"400px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontFamily:"sans-serif"},role:"alert",children:w.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[w.jsxs("div",{children:[w.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"Authentication Unavailable"}),w.jsxs("p",{style:{margin:"0",color:"#856404",fontSize:"0.9rem"},children:["Some features may be limited, but you can still view documents.",o.error&&w.jsxs("details",{style:{marginTop:"0.5rem"},children:[w.jsx("summary",{style:{cursor:"pointer"},children:"Error details"}),w.jsx("code",{style:{display:"block",marginTop:"0.5rem",fontSize:"0.8rem"},children:o.error.message})]})]})]}),w.jsx("button",{onClick:()=>e(!0),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#856404",padding:0,marginLeft:"1rem",flexShrink:0},"aria-label":"Dismiss notification",children:""})]})})},s2=()=>w.jsxs("div",{style:{padding:"2rem",textAlign:"center"},children:[w.jsx("h1",{children:"Sign PDF"}),w.jsx("p",{children:"Sign any PDF with DecoDocs"}),w.jsx("p",{children:"This feature is coming soon. Please check back later."}),w.jsx("button",{onClick:()=>window.history.back(),style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Go Back"})]});function a2(){return w.jsx(n2,{children:w.jsxs(eR,{children:[w.jsx(i2,{}),w.jsx(xx,{children:w.jsxs(tx,{children:[w.jsx(Mn,{path:"/",element:w.jsx(mb,{})}),w.jsx(Mn,{path:"/app",element:w.jsx(mb,{})}),w.jsx(Mn,{path:"/sign",element:w.jsx("div",{className:"App",children:w.jsx(s2,{})})}),w.jsx(Mn,{path:"/about",element:w.jsx("div",{className:"App",children:w.jsx(ZD,{})})}),w.jsx(Mn,{path:"/privacy",element:w.jsx("div",{className:"App",children:w.jsx(JD,{})})}),w.jsx(Mn,{path:"/terms",element:w.jsx("div",{className:"App",children:w.jsx(t2,{})})}),w.jsx(Mn,{path:"/contact",element:w.jsx("div",{className:"App",children:w.jsx(e2,{})})}),w.jsx(Mn,{path:"/view/:documentId?",element:w.jsx("div",{className:"App",children:w.jsx(x0,{})})}),w.jsx(Mn,{path:"/view/test-docs/:fileName",element:w.jsx("div",{className:"App",children:w.jsx(x0,{})})}),w.jsx(Mn,{path:"/edit/:documentId?",element:w.jsx("div",{className:"App",children:w.jsx(QD,{})})})]})})]})})}i_.createRoot(document.getElementById("root")).render(w.jsx(yf.StrictMode,{children:w.jsx(a2,{})}));

var Gy=r=>{throw TypeError(r)};var Qh=(r,e,t)=>e.has(r)||Gy("Cannot "+t);var et=(r,e,t)=>(Qh(r,e,"read from private field"),t?t.call(r):e.get(r)),si=(r,e,t)=>e.has(r)?Gy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),sn=(r,e,t,i)=>(Qh(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),ai=(r,e,t)=>(Qh(r,e,"access private method"),t);var $y=(r,e,t,i)=>({set _(a){sn(r,e,a,t)},get _(){return et(r,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function N1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Zh={exports:{}},Eo={};var qy;function SS(){if(qy)return Eo;qy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:o}}return Eo.Fragment=e,Eo.jsx=t,Eo.jsxs=t,Eo}var Yy;function ES(){return Yy||(Yy=1,Zh.exports=SS()),Zh.exports}var y=ES(),Jh={exports:{}},xe={};var Wy;function _S(){if(Wy)return xe;Wy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(L){return L===null||typeof L!="object"?null:(L=v&&L[v]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function _(L,H,Z){this.props=L,this.context=H,this.refs=E,this.updater=Z||S}_.prototype.isReactComponent={},_.prototype.setState=function(L,H){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,H,"setState")},_.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function R(){}R.prototype=_.prototype;function T(L,H,Z){this.props=L,this.context=H,this.refs=E,this.updater=Z||S}var N=T.prototype=new R;N.constructor=T,w(N,_.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function O(){}var j={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function W(L,H,Z){var te=Z.ref;return{$$typeof:r,type:L,key:H,ref:te!==void 0?te:null,props:Z}}function $(L,H){return W(L.type,H,L.props)}function q(L){return typeof L=="object"&&L!==null&&L.$$typeof===r}function J(L){var H={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Z){return H[Z]})}var re=/\/+/g;function oe(L,H){return typeof L=="object"&&L!==null&&L.key!=null?J(""+L.key):H.toString(36)}function me(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(O,O):(L.status="pending",L.then(function(H){L.status==="pending"&&(L.status="fulfilled",L.value=H)},function(H){L.status==="pending"&&(L.status="rejected",L.reason=H)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,H,Z,te,ue){var ye=typeof L;(ye==="undefined"||ye==="boolean")&&(L=null);var de=!1;if(L===null)de=!0;else switch(ye){case"bigint":case"string":case"number":de=!0;break;case"object":switch(L.$$typeof){case r:case e:de=!0;break;case p:return de=L._init,P(de(L._payload),H,Z,te,ue)}}if(de)return ue=ue(L),de=te===""?"."+oe(L,0):te,D(ue)?(Z="",de!=null&&(Z=de.replace(re,"$&/")+"/"),P(ue,H,Z,"",function(Kn){return Kn})):ue!=null&&(q(ue)&&(ue=$(ue,Z+(ue.key==null||L&&L.key===ue.key?"":(""+ue.key).replace(re,"$&/")+"/")+de)),H.push(ue)),1;de=0;var ot=te===""?".":te+":";if(D(L))for(var He=0;He<L.length;He++)te=L[He],ye=ot+oe(te,He),de+=P(te,H,Z,ye,ue);else if(He=x(L),typeof He=="function")for(L=He.call(L),He=0;!(te=L.next()).done;)te=te.value,ye=ot+oe(te,He++),de+=P(te,H,Z,ye,ue);else if(ye==="object"){if(typeof L.then=="function")return P(me(L),H,Z,te,ue);throw H=String(L),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return de}function G(L,H,Z){if(L==null)return L;var te=[],ue=0;return P(L,te,"","",function(ye){return H.call(Z,ye,ue++)}),te}function ee(L){if(L._status===-1){var H=L._result;H=H(),H.then(function(Z){(L._status===0||L._status===-1)&&(L._status=1,L._result=Z)},function(Z){(L._status===0||L._status===-1)&&(L._status=2,L._result=Z)}),L._status===-1&&(L._status=0,L._result=H)}if(L._status===1)return L._result.default;throw L._result}var ge=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},_e={map:G,forEach:function(L,H,Z){G(L,function(){H.apply(this,arguments)},Z)},count:function(L){var H=0;return G(L,function(){H++}),H},toArray:function(L){return G(L,function(H){return H})||[]},only:function(L){if(!q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return xe.Activity=g,xe.Children=_e,xe.Component=_,xe.Fragment=t,xe.Profiler=a,xe.PureComponent=T,xe.StrictMode=i,xe.Suspense=h,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,xe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return j.H.useMemoCache(L)}},xe.cache=function(L){return function(){return L.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(L,H,Z){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var te=w({},L.props),ue=L.key;if(H!=null)for(ye in H.key!==void 0&&(ue=""+H.key),H)!Y.call(H,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&H.ref===void 0||(te[ye]=H[ye]);var ye=arguments.length-2;if(ye===1)te.children=Z;else if(1<ye){for(var de=Array(ye),ot=0;ot<ye;ot++)de[ot]=arguments[ot+2];te.children=de}return W(L.type,ue,te)},xe.createContext=function(L){return L={$$typeof:c,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},xe.createElement=function(L,H,Z){var te,ue={},ye=null;if(H!=null)for(te in H.key!==void 0&&(ye=""+H.key),H)Y.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=H[te]);var de=arguments.length-2;if(de===1)ue.children=Z;else if(1<de){for(var ot=Array(de),He=0;He<de;He++)ot[He]=arguments[He+2];ue.children=ot}if(L&&L.defaultProps)for(te in de=L.defaultProps,de)ue[te]===void 0&&(ue[te]=de[te]);return W(L,ye,ue)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(L){return{$$typeof:u,render:L}},xe.isValidElement=q,xe.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:ee}},xe.memo=function(L,H){return{$$typeof:f,type:L,compare:H===void 0?null:H}},xe.startTransition=function(L){var H=j.T,Z={};j.T=Z;try{var te=L(),ue=j.S;ue!==null&&ue(Z,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(O,ge)}catch(ye){ge(ye)}finally{H!==null&&Z.types!==null&&(H.types=Z.types),j.T=H}},xe.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},xe.use=function(L){return j.H.use(L)},xe.useActionState=function(L,H,Z){return j.H.useActionState(L,H,Z)},xe.useCallback=function(L,H){return j.H.useCallback(L,H)},xe.useContext=function(L){return j.H.useContext(L)},xe.useDebugValue=function(){},xe.useDeferredValue=function(L,H){return j.H.useDeferredValue(L,H)},xe.useEffect=function(L,H){return j.H.useEffect(L,H)},xe.useEffectEvent=function(L){return j.H.useEffectEvent(L)},xe.useId=function(){return j.H.useId()},xe.useImperativeHandle=function(L,H,Z){return j.H.useImperativeHandle(L,H,Z)},xe.useInsertionEffect=function(L,H){return j.H.useInsertionEffect(L,H)},xe.useLayoutEffect=function(L,H){return j.H.useLayoutEffect(L,H)},xe.useMemo=function(L,H){return j.H.useMemo(L,H)},xe.useOptimistic=function(L,H){return j.H.useOptimistic(L,H)},xe.useReducer=function(L,H,Z){return j.H.useReducer(L,H,Z)},xe.useRef=function(L){return j.H.useRef(L)},xe.useState=function(L){return j.H.useState(L)},xe.useSyncExternalStore=function(L,H,Z){return j.H.useSyncExternalStore(L,H,Z)},xe.useTransition=function(){return j.H.useTransition()},xe.version="19.2.4",xe}var Xy;function ip(){return Xy||(Xy=1,Jh.exports=_S()),Jh.exports}var M=ip();const wn=N1(M);var ef={exports:{}},_o={},tf={exports:{}},nf={};var Ky;function TS(){return Ky||(Ky=1,(function(r){function e(P,G){var ee=P.length;P.push(G);e:for(;0<ee;){var ge=ee-1>>>1,_e=P[ge];if(0<a(_e,G))P[ge]=G,P[ee]=_e,ee=ge;else break e}}function t(P){return P.length===0?null:P[0]}function i(P){if(P.length===0)return null;var G=P[0],ee=P.pop();if(ee!==G){P[0]=ee;e:for(var ge=0,_e=P.length,L=_e>>>1;ge<L;){var H=2*(ge+1)-1,Z=P[H],te=H+1,ue=P[te];if(0>a(Z,ee))te<_e&&0>a(ue,Z)?(P[ge]=ue,P[te]=ee,ge=te):(P[ge]=Z,P[H]=ee,ge=H);else if(te<_e&&0>a(ue,ee))P[ge]=ue,P[te]=ee,ge=te;else break e}}return G}function a(P,G){var ee=P.sortIndex-G.sortIndex;return ee!==0?ee:P.id-G.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,g=null,v=3,x=!1,S=!1,w=!1,E=!1,_=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(P){for(var G=t(f);G!==null;){if(G.callback===null)i(f);else if(G.startTime<=P)i(f),G.sortIndex=G.expirationTime,e(h,G);else break;G=t(f)}}function D(P){if(w=!1,N(P),!S)if(t(h)!==null)S=!0,O||(O=!0,J());else{var G=t(f);G!==null&&me(D,G.startTime-P)}}var O=!1,j=-1,Y=5,W=-1;function $(){return E?!0:!(r.unstable_now()-W<Y)}function q(){if(E=!1,O){var P=r.unstable_now();W=P;var G=!0;try{e:{S=!1,w&&(w=!1,R(j),j=-1),x=!0;var ee=v;try{t:{for(N(P),g=t(h);g!==null&&!(g.expirationTime>P&&$());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,v=g.priorityLevel;var _e=ge(g.expirationTime<=P);if(P=r.unstable_now(),typeof _e=="function"){g.callback=_e,N(P),G=!0;break t}g===t(h)&&i(h),N(P)}else i(h);g=t(h)}if(g!==null)G=!0;else{var L=t(f);L!==null&&me(D,L.startTime-P),G=!1}}break e}finally{g=null,v=ee,x=!1}G=void 0}}finally{G?J():O=!1}}}var J;if(typeof T=="function")J=function(){T(q)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,oe=re.port2;re.port1.onmessage=q,J=function(){oe.postMessage(null)}}else J=function(){_(q,0)};function me(P,G){j=_(function(){P(r.unstable_now())},G)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(P){P.callback=null},r.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<P?Math.floor(1e3/P):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(P){switch(v){case 1:case 2:case 3:var G=3;break;default:G=v}var ee=v;v=G;try{return P()}finally{v=ee}},r.unstable_requestPaint=function(){E=!0},r.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var ee=v;v=P;try{return G()}finally{v=ee}},r.unstable_scheduleCallback=function(P,G,ee){var ge=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ge+ee:ge):ee=ge,P){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ee+_e,P={id:p++,callback:G,priorityLevel:P,startTime:ee,expirationTime:_e,sortIndex:-1},ee>ge?(P.sortIndex=ee,e(f,P),t(h)===null&&P===t(f)&&(w?(R(j),j=-1):w=!0,me(D,ee-ge))):(P.sortIndex=_e,e(h,P),S||x||(S=!0,O||(O=!0,J()))),P},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(P){var G=v;return function(){var ee=v;v=G;try{return P.apply(this,arguments)}finally{v=ee}}}})(nf)),nf}var Qy;function CS(){return Qy||(Qy=1,tf.exports=TS()),tf.exports}var sf={exports:{}},Ft={};var Zy;function RS(){if(Zy)return Ft;Zy=1;var r=ip();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ft.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},Ft.flushSync=function(h){var f=c.T,p=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=p,i.d.f()}},Ft.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Ft.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Ft.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):p==="script"&&i.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ft.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Ft.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ft.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Ft.requestFormReset=function(h){i.d.r(h)},Ft.unstable_batchedUpdates=function(h,f){return h(f)},Ft.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Ft.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ft.version="19.2.4",Ft}var Jy;function NS(){if(Jy)return sf.exports;Jy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),sf.exports=RS(),sf.exports}var eb;function DS(){if(eb)return _o;eb=1;var r=CS(),e=ip(),t=NS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,d=s;;){var m=l.return;if(m===null)break;var b=m.alternate;if(b===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===l)return h(m),n;if(b===d)return h(m),s;b=b.sibling}throw Error(i(188))}if(l.return!==d.return)l=m,d=b;else{for(var A=!1,C=m.child;C;){if(C===l){A=!0,l=m,d=b;break}if(C===d){A=!0,d=m,l=b;break}C=C.sibling}if(!A){for(C=b.child;C;){if(C===l){A=!0,l=b,d=m;break}if(C===d){A=!0,d=b,l=m;break}C=C.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function J(n){return n===null||typeof n!="object"?null:(n=q&&n[q]||n["@@iterator"],typeof n=="function"?n:null)}var re=Symbol.for("react.client.reference");function oe(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===re?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case O:return"SuspenseList";case W:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case S:return"Portal";case T:return n.displayName||"Context";case R:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return s=n.displayName||null,s!==null?s:oe(n.type)||"Memo";case Y:s=n._payload,n=n._init;try{return oe(n(s))}catch{}}return null}var me=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ge=[],_e=-1;function L(n){return{current:n}}function H(n){0>_e||(n.current=ge[_e],ge[_e]=null,_e--)}function Z(n,s){_e++,ge[_e]=n.current,n.current=s}var te=L(null),ue=L(null),ye=L(null),de=L(null);function ot(n,s){switch(Z(ye,s),Z(ue,n),Z(te,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?fy(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=fy(s),n=py(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}H(te),Z(te,n)}function He(){H(te),H(ue),H(ye)}function Kn(n){n.memoizedState!==null&&Z(de,n);var s=te.current,l=py(s,n.type);s!==l&&(Z(ue,n),Z(te,l))}function Qn(n){ue.current===n&&(H(te),H(ue)),de.current===n&&(H(de),xo._currentValue=ee)}var Bn,ha;function Zn(n){if(Bn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Bn=s&&s[1]||"",ha=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+n+ha}var fa=!1;function Rr(n,s){if(!n||fa)return"";fa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(V){var z=V}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(V){z=V}n.call(Q.prototype)}}else{try{throw Error()}catch(V){z=V}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(V){if(V&&z&&typeof V.stack=="string")return[V.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],C=b[1];if(A&&C){var k=A.split(`
`),F=C.split(`
`);for(m=d=0;d<k.length&&!k[d].includes("DetermineComponentFrameRoot");)d++;for(;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;if(d===k.length||m===F.length)for(d=k.length-1,m=F.length-1;1<=d&&0<=m&&k[d]!==F[m];)m--;for(;1<=d&&0<=m;d--,m--)if(k[d]!==F[m]){if(d!==1||m!==1)do if(d--,m--,0>m||k[d]!==F[m]){var X=`
`+k[d].replace(" at new "," at ");return n.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",n.displayName)),X}while(1<=d&&0<=m);break}}}finally{fa=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Zn(l):""}function zt(n,s){switch(n.tag){case 26:case 27:case 5:return Zn(n.type);case 16:return Zn("Lazy");case 13:return n.child!==s&&s!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Rr(n.type,!1);case 11:return Rr(n.type.render,!1);case 1:return Rr(n.type,!0);case 31:return Zn("Activity");default:return""}}function Ht(n){try{var s="",l=null;do s+=zt(n,l),l=n,n=n.return;while(n);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Nr=Object.prototype.hasOwnProperty,Dr=r.unstable_scheduleCallback,kr=r.unstable_cancelCallback,pa=r.unstable_shouldYield,Lu=r.unstable_requestPaint,Bt=r.unstable_now,Ls=r.unstable_getCurrentPriorityLevel,fl=r.unstable_ImmediatePriority,Mr=r.unstable_UserBlockingPriority,ma=r.unstable_NormalPriority,pl=r.unstable_LowPriority,Ou=r.unstable_IdlePriority,ml=r.log,Iu=r.unstable_setDisableYieldValue,Os=null,Vt=null;function Jn(n){if(typeof ml=="function"&&Iu(n),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(Os,n)}catch{}}var Ut=Math.clz32?Math.clz32:Bu,Pu=Math.log,ju=Math.LN2;function Bu(n){return n>>>=0,n===0?32:31-(Pu(n)/ju|0)|0}var ga=256,Ae=262144,fe=4194304;function Le(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _t(n,s,l){var d=n.pendingLanes;if(d===0)return 0;var m=0,b=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var C=d&134217727;return C!==0?(d=C&~b,d!==0?m=Le(d):(A&=C,A!==0?m=Le(A):l||(l=C&~n,l!==0&&(m=Le(l))))):(C=d&~b,C!==0?m=Le(C):A!==0?m=Le(A):l||(l=d&~n,l!==0&&(m=Le(l)))),m===0?0:s!==0&&s!==m&&(s&b)===0&&(b=m&-m,l=s&-s,b>=l||b===32&&(l&4194048)!==0)?s:m}function Xt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Is(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function En(){var n=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),n}function Uu(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Lr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function dw(n,s,l,d,m,b){var A=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var C=n.entanglements,k=n.expirationTimes,F=n.hiddenUpdates;for(l=A&~l;0<l;){var X=31-Ut(l),Q=1<<X;C[X]=0,k[X]=-1;var z=F[X];if(z!==null)for(F[X]=null,X=0;X<z.length;X++){var V=z[X];V!==null&&(V.lane&=-536870913)}l&=~Q}d!==0&&Xp(n,d,0),b!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=b&~(A&~s))}function Xp(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-Ut(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|l&261930}function Kp(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var d=31-Ut(l),m=1<<d;m&s|n[d]&s&&(n[d]|=s),l&=~m}}function Qp(n,s){var l=s&-s;return l=(l&42)!==0?1:Fu(l),(l&(n.suspendedLanes|s))!==0?0:l}function Fu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Zp(){var n=G.p;return n!==0?n:(n=window.event,n===void 0?32:jy(n.type))}function Jp(n,s){var l=G.p;try{return G.p=n,s()}finally{G.p=l}}var Zi=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Zi,Kt="__reactProps$"+Zi,ya="__reactContainer$"+Zi,Hu="__reactEvents$"+Zi,hw="__reactListeners$"+Zi,fw="__reactHandles$"+Zi,em="__reactResources$"+Zi,Or="__reactMarker$"+Zi;function Vu(n){delete n[Mt],delete n[Kt],delete n[Hu],delete n[hw],delete n[fw]}function ba(n){var s=n[Mt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ya]||l[Mt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=wy(n);n!==null;){if(l=n[Mt])return l;n=wy(n)}return s}n=l,l=n.parentNode}return null}function va(n){if(n=n[Mt]||n[ya]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ir(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function xa(n){var s=n[em];return s||(s=n[em]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(n){n[Or]=!0}var tm=new Set,nm={};function Ps(n,s){wa(n,s),wa(n+"Capture",s)}function wa(n,s){for(nm[n]=s,n=0;n<s.length;n++)tm.add(s[n])}var pw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),im={},sm={};function mw(n){return Nr.call(sm,n)?!0:Nr.call(im,n)?!1:pw.test(n)?sm[n]=!0:(im[n]=!0,!1)}function gl(n,s,l){if(mw(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function yl(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function yi(n,s,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+d)}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function am(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gw(n,s,l){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,b=d.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(A){l=""+A,b.call(this,A)}}),Object.defineProperty(n,s,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Gu(n){if(!n._valueTracker){var s=am(n)?"checked":"value";n._valueTracker=gw(n,s,""+n[s])}}function rm(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return n&&(d=am(n)?n.checked?"true":"false":n.value),n=d,n!==l?(s.setValue(n),!0):!1}function bl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var yw=/[\n"\\]/g;function Tn(n){return n.replace(yw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function $u(n,s,l,d,m,b,A,C){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),s!=null?A==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+_n(s)):n.value!==""+_n(s)&&(n.value=""+_n(s)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),s!=null?qu(n,A,_n(s)):l!=null?qu(n,A,_n(l)):d!=null&&n.removeAttribute("value"),m==null&&b!=null&&(n.defaultChecked=!!b),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+_n(C):n.removeAttribute("name")}function om(n,s,l,d,m,b,A,C){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),s!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){Gu(n);return}l=l!=null?""+_n(l):"",s=s!=null?""+_n(s):l,C||s===n.value||(n.value=s),n.defaultValue=s}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=C?n.checked:!!d,n.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),Gu(n)}function qu(n,s,l){s==="number"&&bl(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Aa(n,s,l,d){if(n=n.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=s.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+_n(l),s=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function lm(n,s,l){if(s!=null&&(s=""+_n(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+_n(l):""}function cm(n,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(me(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=_n(s),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d),Gu(n)}function Sa(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var bw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function um(n,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,l):typeof l!="number"||l===0||bw.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function dm(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var m in s)d=s[m],s.hasOwnProperty(m)&&l[m]!==d&&um(n,m,d)}else for(var b in s)s.hasOwnProperty(b)&&um(n,b,s[b])}function Yu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vl(n){return xw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function bi(){}var Wu=null;function Xu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ea=null,_a=null;function hm(n){var s=va(n);if(s&&(n=s.stateNode)){var l=n[Kt]||null;e:switch(n=s.stateNode,s.type){case"input":if($u(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==n&&d.form===n.form){var m=d[Kt]||null;if(!m)throw Error(i(90));$u(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===n.form&&rm(d)}break e;case"textarea":lm(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Aa(n,!!l.multiple,s,!1)}}}var Ku=!1;function fm(n,s,l){if(Ku)return n(s,l);Ku=!0;try{var d=n(s);return d}finally{if(Ku=!1,(Ea!==null||_a!==null)&&(rc(),Ea&&(s=Ea,n=_a,_a=Ea=null,hm(s),n)))for(s=0;s<n.length;s++)hm(n[s])}}function Pr(n,s){var l=n.stateNode;if(l===null)return null;var d=l[Kt]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qu=!1;if(vi)try{var jr={};Object.defineProperty(jr,"passive",{get:function(){Qu=!0}}),window.addEventListener("test",jr,jr),window.removeEventListener("test",jr,jr)}catch{Qu=!1}var Ji=null,Zu=null,xl=null;function pm(){if(xl)return xl;var n,s=Zu,l=s.length,d,m="value"in Ji?Ji.value:Ji.textContent,b=m.length;for(n=0;n<l&&s[n]===m[n];n++);var A=l-n;for(d=1;d<=A&&s[l-d]===m[b-d];d++);return xl=m.slice(n,1<d?1-d:void 0)}function wl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Al(){return!0}function mm(){return!1}function Qt(n){function s(l,d,m,b,A){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(l=n[C],this[C]=l?l(b):b[C]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Al:mm,this.isPropagationStopped=mm,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),s}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sl=Qt(js),Br=g({},js,{view:0,detail:0}),ww=Qt(Br),Ju,ed,Ur,El=g({},Br,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Ju=n.screenX-Ur.screenX,ed=n.screenY-Ur.screenY):ed=Ju=0,Ur=n),Ju)},movementY:function(n){return"movementY"in n?n.movementY:ed}}),gm=Qt(El),Aw=g({},El,{dataTransfer:0}),Sw=Qt(Aw),Ew=g({},Br,{relatedTarget:0}),td=Qt(Ew),_w=g({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Tw=Qt(_w),Cw=g({},js,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Rw=Qt(Cw),Nw=g({},js,{data:0}),ym=Qt(Nw),Dw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lw(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Mw[n])?!!s[n]:!1}function nd(){return Lw}var Ow=g({},Br,{key:function(n){if(n.key){var s=Dw[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=wl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?kw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nd,charCode:function(n){return n.type==="keypress"?wl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?wl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Iw=Qt(Ow),Pw=g({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bm=Qt(Pw),jw=g({},Br,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nd}),Bw=Qt(jw),Uw=g({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fw=Qt(Uw),zw=g({},El,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Hw=Qt(zw),Vw=g({},js,{newState:0,oldState:0}),Gw=Qt(Vw),$w=[9,13,27,32],id=vi&&"CompositionEvent"in window,Fr=null;vi&&"documentMode"in document&&(Fr=document.documentMode);var qw=vi&&"TextEvent"in window&&!Fr,vm=vi&&(!id||Fr&&8<Fr&&11>=Fr),xm=" ",wm=!1;function Am(n,s){switch(n){case"keyup":return $w.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sm(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ta=!1;function Yw(n,s){switch(n){case"compositionend":return Sm(s);case"keypress":return s.which!==32?null:(wm=!0,xm);case"textInput":return n=s.data,n===xm&&wm?null:n;default:return null}}function Ww(n,s){if(Ta)return n==="compositionend"||!id&&Am(n,s)?(n=pm(),xl=Zu=Ji=null,Ta=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return vm&&s.locale!=="ko"?null:s.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Em(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Xw[n.type]:s==="textarea"}function _m(n,s,l,d){Ea?_a?_a.push(d):_a=[d]:Ea=d,s=fc(s,"onChange"),0<s.length&&(l=new Sl("onChange","change",null,l,d),n.push({event:l,listeners:s}))}var zr=null,Hr=null;function Kw(n){oy(n,0)}function _l(n){var s=Ir(n);if(rm(s))return n}function Tm(n,s){if(n==="change")return s}var Cm=!1;if(vi){var sd;if(vi){var ad="oninput"in document;if(!ad){var Rm=document.createElement("div");Rm.setAttribute("oninput","return;"),ad=typeof Rm.oninput=="function"}sd=ad}else sd=!1;Cm=sd&&(!document.documentMode||9<document.documentMode)}function Nm(){zr&&(zr.detachEvent("onpropertychange",Dm),Hr=zr=null)}function Dm(n){if(n.propertyName==="value"&&_l(Hr)){var s=[];_m(s,Hr,n,Xu(n)),fm(Kw,s)}}function Qw(n,s,l){n==="focusin"?(Nm(),zr=s,Hr=l,zr.attachEvent("onpropertychange",Dm)):n==="focusout"&&Nm()}function Zw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return _l(Hr)}function Jw(n,s){if(n==="click")return _l(s)}function eA(n,s){if(n==="input"||n==="change")return _l(s)}function tA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var dn=typeof Object.is=="function"?Object.is:tA;function Vr(n,s){if(dn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!Nr.call(s,m)||!dn(n[m],s[m]))return!1}return!0}function km(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Mm(n,s){var l=km(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=s&&d>=s)return{node:l,offset:s-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=km(l)}}function Lm(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Lm(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Om(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=bl(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=bl(n.document)}return s}function rd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var nA=vi&&"documentMode"in document&&11>=document.documentMode,Ca=null,od=null,Gr=null,ld=!1;function Im(n,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ld||Ca==null||Ca!==bl(d)||(d=Ca,"selectionStart"in d&&rd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Gr&&Vr(Gr,d)||(Gr=d,d=fc(od,"onSelect"),0<d.length&&(s=new Sl("onSelect","select",null,s,l),n.push({event:s,listeners:d}),s.target=Ca)))}function Bs(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Ra={animationend:Bs("Animation","AnimationEnd"),animationiteration:Bs("Animation","AnimationIteration"),animationstart:Bs("Animation","AnimationStart"),transitionrun:Bs("Transition","TransitionRun"),transitionstart:Bs("Transition","TransitionStart"),transitioncancel:Bs("Transition","TransitionCancel"),transitionend:Bs("Transition","TransitionEnd")},cd={},Pm={};vi&&(Pm=document.createElement("div").style,"AnimationEvent"in window||(delete Ra.animationend.animation,delete Ra.animationiteration.animation,delete Ra.animationstart.animation),"TransitionEvent"in window||delete Ra.transitionend.transition);function Us(n){if(cd[n])return cd[n];if(!Ra[n])return n;var s=Ra[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Pm)return cd[n]=s[l];return n}var jm=Us("animationend"),Bm=Us("animationiteration"),Um=Us("animationstart"),iA=Us("transitionrun"),sA=Us("transitionstart"),aA=Us("transitioncancel"),Fm=Us("transitionend"),zm=new Map,ud="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ud.push("scrollEnd");function Un(n,s){zm.set(n,s),Ps(s,[n])}var Tl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Cn=[],Na=0,dd=0;function Cl(){for(var n=Na,s=dd=Na=0;s<n;){var l=Cn[s];Cn[s++]=null;var d=Cn[s];Cn[s++]=null;var m=Cn[s];Cn[s++]=null;var b=Cn[s];if(Cn[s++]=null,d!==null&&m!==null){var A=d.pending;A===null?m.next=m:(m.next=A.next,A.next=m),d.pending=m}b!==0&&Hm(l,m,b)}}function Rl(n,s,l,d){Cn[Na++]=n,Cn[Na++]=s,Cn[Na++]=l,Cn[Na++]=d,dd|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function hd(n,s,l,d){return Rl(n,s,l,d),Nl(n)}function Fs(n,s){return Rl(n,null,null,s),Nl(n)}function Hm(n,s,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var m=!1,b=n.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(m=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,m&&s!==null&&(m=31-Ut(l),n=b.hiddenUpdates,d=n[m],d===null?n[m]=[s]:d.push(s),s.lane=l|536870912),b):null}function Nl(n){if(50<fo)throw fo=0,wh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Da={};function rA(n,s,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,s,l,d){return new rA(n,s,l,d)}function fd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xi(n,s){var l=n.alternate;return l===null?(l=hn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function Vm(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Dl(n,s,l,d,m,b){var A=0;if(d=n,typeof n=="function")fd(n)&&(A=1);else if(typeof n=="string")A=dS(n,l,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case W:return n=hn(31,l,s,m),n.elementType=W,n.lanes=b,n;case w:return zs(l.children,m,b,s);case E:A=8,m|=24;break;case _:return n=hn(12,l,s,m|2),n.elementType=_,n.lanes=b,n;case D:return n=hn(13,l,s,m),n.elementType=D,n.lanes=b,n;case O:return n=hn(19,l,s,m),n.elementType=O,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:A=10;break e;case R:A=9;break e;case N:A=11;break e;case j:A=14;break e;case Y:A=16,d=null;break e}A=29,l=Error(i(130,n===null?"null":typeof n,"")),d=null}return s=hn(A,l,s,m),s.elementType=n,s.type=d,s.lanes=b,s}function zs(n,s,l,d){return n=hn(7,n,d,s),n.lanes=l,n}function pd(n,s,l){return n=hn(6,n,null,s),n.lanes=l,n}function Gm(n){var s=hn(18,null,null,0);return s.stateNode=n,s}function md(n,s,l){return s=hn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var $m=new WeakMap;function Rn(n,s){if(typeof n=="object"&&n!==null){var l=$m.get(n);return l!==void 0?l:(s={value:n,source:s,stack:Ht(s)},$m.set(n,s),s)}return{value:n,source:s,stack:Ht(s)}}var ka=[],Ma=0,kl=null,$r=0,Nn=[],Dn=0,es=null,ei=1,ti="";function wi(n,s){ka[Ma++]=$r,ka[Ma++]=kl,kl=n,$r=s}function qm(n,s,l){Nn[Dn++]=ei,Nn[Dn++]=ti,Nn[Dn++]=es,es=n;var d=ei;n=ti;var m=32-Ut(d)-1;d&=~(1<<m),l+=1;var b=32-Ut(s)+m;if(30<b){var A=m-m%5;b=(d&(1<<A)-1).toString(32),d>>=A,m-=A,ei=1<<32-Ut(s)+m|l<<m|d,ti=b+n}else ei=1<<b|l<<m|d,ti=n}function gd(n){n.return!==null&&(wi(n,1),qm(n,1,0))}function yd(n){for(;n===kl;)kl=ka[--Ma],ka[Ma]=null,$r=ka[--Ma],ka[Ma]=null;for(;n===es;)es=Nn[--Dn],Nn[Dn]=null,ti=Nn[--Dn],Nn[Dn]=null,ei=Nn[--Dn],Nn[Dn]=null}function Ym(n,s){Nn[Dn++]=ei,Nn[Dn++]=ti,Nn[Dn++]=es,ei=s.id,ti=s.overflow,es=n}var Lt=null,Qe=null,Me=!1,ts=null,kn=!1,bd=Error(i(519));function ns(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qr(Rn(s,n)),bd}function Wm(n){var s=n.stateNode,l=n.type,d=n.memoizedProps;switch(s[Mt]=n,s[Kt]=d,l){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(l=0;l<mo.length;l++)Re(mo[l],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":Re("invalid",s),om(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Re("invalid",s);break;case"textarea":Re("invalid",s),cm(s,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||dy(s.textContent,l)?(d.popover!=null&&(Re("beforetoggle",s),Re("toggle",s)),d.onScroll!=null&&Re("scroll",s),d.onScrollEnd!=null&&Re("scrollend",s),d.onClick!=null&&(s.onclick=bi),s=!0):s=!1,s||ns(n,!0)}function Xm(n){for(Lt=n.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Lt=Lt.return}}function La(n){if(n!==Lt)return!1;if(!Me)return Xm(n),Me=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Ph(n.type,n.memoizedProps)),l=!l),l&&Qe&&ns(n),Xm(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Qe=xy(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Qe=xy(n)}else s===27?(s=Qe,gs(n.type)?(n=zh,zh=null,Qe=n):Qe=s):Qe=Lt?Ln(n.stateNode.nextSibling):null;return!0}function Hs(){Qe=Lt=null,Me=!1}function vd(){var n=ts;return n!==null&&(tn===null?tn=n:tn.push.apply(tn,n),ts=null),n}function qr(n){ts===null?ts=[n]:ts.push(n)}var xd=L(null),Vs=null,Ai=null;function is(n,s,l){Z(xd,s._currentValue),s._currentValue=l}function Si(n){n._currentValue=xd.current,H(xd)}function wd(n,s,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===l)break;n=n.return}}function Ad(n,s,l,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var b=m.dependencies;if(b!==null){var A=m.child;b=b.firstContext;e:for(;b!==null;){var C=b;b=m;for(var k=0;k<s.length;k++)if(C.context===s[k]){b.lanes|=l,C=b.alternate,C!==null&&(C.lanes|=l),wd(b.return,l,n),d||(A=null);break e}b=C.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(i(341));A.lanes|=l,b=A.alternate,b!==null&&(b.lanes|=l),wd(A,l,n),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===n){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function Oa(n,s,l,d){n=null;for(var m=s,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var C=m.type;dn(m.pendingProps.value,A.value)||(n!==null?n.push(C):n=[C])}}else if(m===de.current){if(A=m.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(xo):n=[xo])}m=m.return}n!==null&&Ad(s,n,l,d),s.flags|=262144}function Ml(n){for(n=n.firstContext;n!==null;){if(!dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Gs(n){Vs=n,Ai=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ot(n){return Km(Vs,n)}function Ll(n,s){return Vs===null&&Gs(n),Km(n,s)}function Km(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Ai===null){if(n===null)throw Error(i(308));Ai=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Ai=Ai.next=s;return l}var oA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},lA=r.unstable_scheduleCallback,cA=r.unstable_NormalPriority,mt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Sd(){return{controller:new oA,data:new Map,refCount:0}}function Yr(n){n.refCount--,n.refCount===0&&lA(cA,function(){n.controller.abort()})}var Wr=null,Ed=0,Ia=0,Pa=null;function uA(n,s){if(Wr===null){var l=Wr=[];Ed=0,Ia=Ch(),Pa={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Ed++,s.then(Qm,Qm),s}function Qm(){if(--Ed===0&&Wr!==null){Pa!==null&&(Pa.status="fulfilled");var n=Wr;Wr=null,Ia=0,Pa=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function dA(n,s){var l=[],d={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(d.status="rejected",d.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),d}var Zm=P.S;P.S=function(n,s){I0=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&uA(n,s),Zm!==null&&Zm(n,s)};var $s=L(null);function _d(){var n=$s.current;return n!==null?n:Xe.pooledCache}function Ol(n,s){s===null?Z($s,$s.current):Z($s,s.pool)}function Jm(){var n=_d();return n===null?null:{parent:mt._currentValue,pool:n}}var ja=Error(i(460)),Td=Error(i(474)),Il=Error(i(542)),Pl={then:function(){}};function eg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function tg(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(bi,bi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ig(n),n;default:if(typeof s.status=="string")s.then(bi,bi);else{if(n=Xe,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=d}},function(d){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ig(n),n}throw Ys=s,ja}}function qs(n){try{var s=n._init;return s(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ys=l,ja):l}}var Ys=null;function ng(){if(Ys===null)throw Error(i(459));var n=Ys;return Ys=null,n}function ig(n){if(n===ja||n===Il)throw Error(i(483))}var Ba=null,Xr=0;function jl(n){var s=Xr;return Xr+=1,Ba===null&&(Ba=[]),tg(Ba,n,s)}function Kr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Bl(n,s){throw s.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function sg(n){function s(B,I){if(n){var U=B.deletions;U===null?(B.deletions=[I],B.flags|=16):U.push(I)}}function l(B,I){if(!n)return null;for(;I!==null;)s(B,I),I=I.sibling;return null}function d(B){for(var I=new Map;B!==null;)B.key!==null?I.set(B.key,B):I.set(B.index,B),B=B.sibling;return I}function m(B,I){return B=xi(B,I),B.index=0,B.sibling=null,B}function b(B,I,U){return B.index=U,n?(U=B.alternate,U!==null?(U=U.index,U<I?(B.flags|=67108866,I):U):(B.flags|=67108866,I)):(B.flags|=1048576,I)}function A(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function C(B,I,U,K){return I===null||I.tag!==6?(I=pd(U,B.mode,K),I.return=B,I):(I=m(I,U),I.return=B,I)}function k(B,I,U,K){var le=U.type;return le===w?X(B,I,U.props.children,K,U.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Y&&qs(le)===I.type)?(I=m(I,U.props),Kr(I,U),I.return=B,I):(I=Dl(U.type,U.key,U.props,null,B.mode,K),Kr(I,U),I.return=B,I)}function F(B,I,U,K){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=md(U,B.mode,K),I.return=B,I):(I=m(I,U.children||[]),I.return=B,I)}function X(B,I,U,K,le){return I===null||I.tag!==7?(I=zs(U,B.mode,K,le),I.return=B,I):(I=m(I,U),I.return=B,I)}function Q(B,I,U){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=pd(""+I,B.mode,U),I.return=B,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return U=Dl(I.type,I.key,I.props,null,B.mode,U),Kr(U,I),U.return=B,U;case S:return I=md(I,B.mode,U),I.return=B,I;case Y:return I=qs(I),Q(B,I,U)}if(me(I)||J(I))return I=zs(I,B.mode,U,null),I.return=B,I;if(typeof I.then=="function")return Q(B,jl(I),U);if(I.$$typeof===T)return Q(B,Ll(B,I),U);Bl(B,I)}return null}function z(B,I,U,K){var le=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return le!==null?null:C(B,I,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===le?k(B,I,U,K):null;case S:return U.key===le?F(B,I,U,K):null;case Y:return U=qs(U),z(B,I,U,K)}if(me(U)||J(U))return le!==null?null:X(B,I,U,K,null);if(typeof U.then=="function")return z(B,I,jl(U),K);if(U.$$typeof===T)return z(B,I,Ll(B,U),K);Bl(B,U)}return null}function V(B,I,U,K,le){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return B=B.get(U)||null,C(I,B,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return B=B.get(K.key===null?U:K.key)||null,k(I,B,K,le);case S:return B=B.get(K.key===null?U:K.key)||null,F(I,B,K,le);case Y:return K=qs(K),V(B,I,U,K,le)}if(me(K)||J(K))return B=B.get(U)||null,X(I,B,K,le,null);if(typeof K.then=="function")return V(B,I,U,jl(K),le);if(K.$$typeof===T)return V(B,I,U,Ll(I,K),le);Bl(I,K)}return null}function se(B,I,U,K){for(var le=null,Oe=null,ae=I,Ee=I=0,De=null;ae!==null&&Ee<U.length;Ee++){ae.index>Ee?(De=ae,ae=null):De=ae.sibling;var Ie=z(B,ae,U[Ee],K);if(Ie===null){ae===null&&(ae=De);break}n&&ae&&Ie.alternate===null&&s(B,ae),I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie,ae=De}if(Ee===U.length)return l(B,ae),Me&&wi(B,Ee),le;if(ae===null){for(;Ee<U.length;Ee++)ae=Q(B,U[Ee],K),ae!==null&&(I=b(ae,I,Ee),Oe===null?le=ae:Oe.sibling=ae,Oe=ae);return Me&&wi(B,Ee),le}for(ae=d(ae);Ee<U.length;Ee++)De=V(ae,B,Ee,U[Ee],K),De!==null&&(n&&De.alternate!==null&&ae.delete(De.key===null?Ee:De.key),I=b(De,I,Ee),Oe===null?le=De:Oe.sibling=De,Oe=De);return n&&ae.forEach(function(ws){return s(B,ws)}),Me&&wi(B,Ee),le}function pe(B,I,U,K){if(U==null)throw Error(i(151));for(var le=null,Oe=null,ae=I,Ee=I=0,De=null,Ie=U.next();ae!==null&&!Ie.done;Ee++,Ie=U.next()){ae.index>Ee?(De=ae,ae=null):De=ae.sibling;var ws=z(B,ae,Ie.value,K);if(ws===null){ae===null&&(ae=De);break}n&&ae&&ws.alternate===null&&s(B,ae),I=b(ws,I,Ee),Oe===null?le=ws:Oe.sibling=ws,Oe=ws,ae=De}if(Ie.done)return l(B,ae),Me&&wi(B,Ee),le;if(ae===null){for(;!Ie.done;Ee++,Ie=U.next())Ie=Q(B,Ie.value,K),Ie!==null&&(I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie);return Me&&wi(B,Ee),le}for(ae=d(ae);!Ie.done;Ee++,Ie=U.next())Ie=V(ae,B,Ee,Ie.value,K),Ie!==null&&(n&&Ie.alternate!==null&&ae.delete(Ie.key===null?Ee:Ie.key),I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie);return n&&ae.forEach(function(AS){return s(B,AS)}),Me&&wi(B,Ee),le}function Ye(B,I,U,K){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var le=U.key;I!==null;){if(I.key===le){if(le=U.type,le===w){if(I.tag===7){l(B,I.sibling),K=m(I,U.props.children),K.return=B,B=K;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===Y&&qs(le)===I.type){l(B,I.sibling),K=m(I,U.props),Kr(K,U),K.return=B,B=K;break e}l(B,I);break}else s(B,I);I=I.sibling}U.type===w?(K=zs(U.props.children,B.mode,K,U.key),K.return=B,B=K):(K=Dl(U.type,U.key,U.props,null,B.mode,K),Kr(K,U),K.return=B,B=K)}return A(B);case S:e:{for(le=U.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){l(B,I.sibling),K=m(I,U.children||[]),K.return=B,B=K;break e}else{l(B,I);break}else s(B,I);I=I.sibling}K=md(U,B.mode,K),K.return=B,B=K}return A(B);case Y:return U=qs(U),Ye(B,I,U,K)}if(me(U))return se(B,I,U,K);if(J(U)){if(le=J(U),typeof le!="function")throw Error(i(150));return U=le.call(U),pe(B,I,U,K)}if(typeof U.then=="function")return Ye(B,I,jl(U),K);if(U.$$typeof===T)return Ye(B,I,Ll(B,U),K);Bl(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,I!==null&&I.tag===6?(l(B,I.sibling),K=m(I,U),K.return=B,B=K):(l(B,I),K=pd(U,B.mode,K),K.return=B,B=K),A(B)):l(B,I)}return function(B,I,U,K){try{Xr=0;var le=Ye(B,I,U,K);return Ba=null,le}catch(ae){if(ae===ja||ae===Il)throw ae;var Oe=hn(29,ae,null,B.mode);return Oe.lanes=K,Oe.return=B,Oe}}}var Ws=sg(!0),ag=sg(!1),ss=!1;function Cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function as(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function rs(n,s,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(je&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,s=Nl(n),Hm(n,null,l),s}return Rl(n,d,s,l),Nl(n)}function Qr(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,Kp(n,l)}}function Nd(n,s){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?m=b=A:b=b.next=A,l=l.next}while(l!==null);b===null?m=b=s:b=b.next=s}else m=b=s;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Dd=!1;function Zr(){if(Dd){var n=Pa;if(n!==null)throw n}}function Jr(n,s,l,d){Dd=!1;var m=n.updateQueue;ss=!1;var b=m.firstBaseUpdate,A=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var k=C,F=k.next;k.next=null,A===null?b=F:A.next=F,A=k;var X=n.alternate;X!==null&&(X=X.updateQueue,C=X.lastBaseUpdate,C!==A&&(C===null?X.firstBaseUpdate=F:C.next=F,X.lastBaseUpdate=k))}if(b!==null){var Q=m.baseState;A=0,X=F=k=null,C=b;do{var z=C.lane&-536870913,V=z!==C.lane;if(V?(Ne&z)===z:(d&z)===z){z!==0&&z===Ia&&(Dd=!0),X!==null&&(X=X.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var se=n,pe=C;z=s;var Ye=l;switch(pe.tag){case 1:if(se=pe.payload,typeof se=="function"){Q=se.call(Ye,Q,z);break e}Q=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=pe.payload,z=typeof se=="function"?se.call(Ye,Q,z):se,z==null)break e;Q=g({},Q,z);break e;case 2:ss=!0}}z=C.callback,z!==null&&(n.flags|=64,V&&(n.flags|=8192),V=m.callbacks,V===null?m.callbacks=[z]:V.push(z))}else V={lane:z,tag:C.tag,payload:C.payload,callback:C.callback,next:null},X===null?(F=X=V,k=Q):X=X.next=V,A|=z;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;V=C,C=V.next,V.next=null,m.lastBaseUpdate=V,m.shared.pending=null}}while(!0);X===null&&(k=Q),m.baseState=k,m.firstBaseUpdate=F,m.lastBaseUpdate=X,b===null&&(m.shared.lanes=0),ds|=A,n.lanes=A,n.memoizedState=Q}}function rg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function og(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)rg(l[n],s)}var Ua=L(null),Ul=L(0);function lg(n,s){n=Mi,Z(Ul,n),Z(Ua,s),Mi=n|s.baseLanes}function kd(){Z(Ul,Mi),Z(Ua,Ua.current)}function Md(){Mi=Ul.current,H(Ua),H(Ul)}var fn=L(null),Mn=null;function os(n){var s=n.alternate;Z(dt,dt.current&1),Z(fn,n),Mn===null&&(s===null||Ua.current!==null||s.memoizedState!==null)&&(Mn=n)}function Ld(n){Z(dt,dt.current),Z(fn,n),Mn===null&&(Mn=n)}function cg(n){n.tag===22?(Z(dt,dt.current),Z(fn,n),Mn===null&&(Mn=n)):ls()}function ls(){Z(dt,dt.current),Z(fn,fn.current)}function pn(n){H(fn),Mn===n&&(Mn=null),H(dt)}var dt=L(0);function Fl(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Uh(l)||Fh(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Ei=0,Se=null,$e=null,gt=null,zl=!1,Fa=!1,Xs=!1,Hl=0,eo=0,za=null,hA=0;function lt(){throw Error(i(321))}function Od(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!dn(n[l],s[l]))return!1;return!0}function Id(n,s,l,d,m,b){return Ei=b,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=n===null||n.memoizedState===null?qg:Kd,Xs=!1,b=l(d,m),Xs=!1,Fa&&(b=dg(s,l,d,m)),ug(n),b}function ug(n){P.H=io;var s=$e!==null&&$e.next!==null;if(Ei=0,gt=$e=Se=null,zl=!1,eo=0,za=null,s)throw Error(i(300));n===null||yt||(n=n.dependencies,n!==null&&Ml(n)&&(yt=!0))}function dg(n,s,l,d){Se=n;var m=0;do{if(Fa&&(za=null),eo=0,Fa=!1,25<=m)throw Error(i(301));if(m+=1,gt=$e=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=Yg,b=s(l,d)}while(Fa);return b}function fA(){var n=P.H,s=n.useState()[0];return s=typeof s.then=="function"?to(s):s,n=n.useState()[0],($e!==null?$e.memoizedState:null)!==n&&(Se.flags|=1024),s}function Pd(){var n=Hl!==0;return Hl=0,n}function jd(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Bd(n){if(zl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}zl=!1}Ei=0,gt=$e=Se=null,Fa=!1,eo=Hl=0,za=null}function Gt(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Se.memoizedState=gt=n:gt=gt.next=n,gt}function ht(){if($e===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=$e.next;var s=gt===null?Se.memoizedState:gt.next;if(s!==null)gt=s,$e=n;else{if(n===null)throw Se.alternate===null?Error(i(467)):Error(i(310));$e=n,n={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},gt===null?Se.memoizedState=gt=n:gt=gt.next=n}return gt}function Vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(n){var s=eo;return eo+=1,za===null&&(za=[]),n=tg(za,n,s),s=Se,(gt===null?s.memoizedState:gt.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?qg:Kd),n}function Gl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return to(n);if(n.$$typeof===T)return Ot(n)}throw Error(i(438,String(n)))}function Ud(n){var s=null,l=Se.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=Se.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Vl(),Se.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),d=0;d<n;d++)l[d]=$;return s.index++,l}function _i(n,s){return typeof s=="function"?s(n):s}function $l(n){var s=ht();return Fd(s,$e,n)}function Fd(n,s,l){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var m=n.baseQueue,b=d.pending;if(b!==null){if(m!==null){var A=m.next;m.next=b.next,b.next=A}s.baseQueue=m=b,d.pending=null}if(b=n.baseState,m===null)n.memoizedState=b;else{s=m.next;var C=A=null,k=null,F=s,X=!1;do{var Q=F.lane&-536870913;if(Q!==F.lane?(Ne&Q)===Q:(Ei&Q)===Q){var z=F.revertLane;if(z===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Q===Ia&&(X=!0);else if((Ei&z)===z){F=F.next,z===Ia&&(X=!0);continue}else Q={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(C=k=Q,A=b):k=k.next=Q,Se.lanes|=z,ds|=z;Q=F.action,Xs&&l(b,Q),b=F.hasEagerState?F.eagerState:l(b,Q)}else z={lane:Q,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},k===null?(C=k=z,A=b):k=k.next=z,Se.lanes|=Q,ds|=Q;F=F.next}while(F!==null&&F!==s);if(k===null?A=b:k.next=C,!dn(b,n.memoizedState)&&(yt=!0,X&&(l=Pa,l!==null)))throw l;n.memoizedState=b,n.baseState=A,n.baseQueue=k,d.lastRenderedState=b}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function zd(n){var s=ht(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,b=s.memoizedState;if(m!==null){l.pending=null;var A=m=m.next;do b=n(b,A.action),A=A.next;while(A!==m);dn(b,s.memoizedState)||(yt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),l.lastRenderedState=b}return[b,d]}function hg(n,s,l){var d=Se,m=ht(),b=Me;if(b){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!dn(($e||m).memoizedState,l);if(A&&(m.memoizedState=l,yt=!0),m=m.queue,Gd(mg.bind(null,d,m,n),[n]),m.getSnapshot!==s||A||gt!==null&&gt.memoizedState.tag&1){if(d.flags|=2048,Ha(9,{destroy:void 0},pg.bind(null,d,m,l,s),null),Xe===null)throw Error(i(349));b||(Ei&127)!==0||fg(d,s,l)}return l}function fg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Se.updateQueue,s===null?(s=Vl(),Se.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function pg(n,s,l,d){s.value=l,s.getSnapshot=d,gg(s)&&yg(n)}function mg(n,s,l){return l(function(){gg(s)&&yg(n)})}function gg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!dn(n,l)}catch{return!0}}function yg(n){var s=Fs(n,2);s!==null&&nn(s,n,2)}function Hd(n){var s=Gt();if(typeof n=="function"){var l=n;if(n=l(),Xs){Jn(!0);try{l()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:n},s}function bg(n,s,l,d){return n.baseState=l,Fd(n,$e,typeof d=="function"?d:_i)}function pA(n,s,l,d,m){if(Wl(n))throw Error(i(485));if(n=s.action,n!==null){var b={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};P.T!==null?l(!0):b.isTransition=!1,d(b),l=s.pending,l===null?(b.next=s.pending=b,vg(s,b)):(b.next=l.next,s.pending=l.next=b)}}function vg(n,s){var l=s.action,d=s.payload,m=n.state;if(s.isTransition){var b=P.T,A={};P.T=A;try{var C=l(m,d),k=P.S;k!==null&&k(A,C),xg(n,s,C)}catch(F){Vd(n,s,F)}finally{b!==null&&A.types!==null&&(b.types=A.types),P.T=b}}else try{b=l(m,d),xg(n,s,b)}catch(F){Vd(n,s,F)}}function xg(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){wg(n,s,d)},function(d){return Vd(n,s,d)}):wg(n,s,l)}function wg(n,s,l){s.status="fulfilled",s.value=l,Ag(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,vg(n,l)))}function Vd(n,s,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Ag(s),s=s.next;while(s!==d)}n.action=null}function Ag(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function Sg(n,s){return s}function Eg(n,s){if(Me){var l=Xe.formState;if(l!==null){e:{var d=Se;if(Me){if(Qe){t:{for(var m=Qe,b=kn;m.nodeType!==8;){if(!b){m=null;break t}if(m=Ln(m.nextSibling),m===null){m=null;break t}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){Qe=Ln(m.nextSibling),d=m.data==="F!";break e}}ns(d)}d=!1}d&&(s=l[0])}}return l=Gt(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sg,lastRenderedState:s},l.queue=d,l=Vg.bind(null,Se,d),d.dispatch=l,d=Hd(!1),b=Xd.bind(null,Se,!1,d.queue),d=Gt(),m={state:s,dispatch:null,action:n,pending:null},d.queue=m,l=pA.bind(null,Se,m,b,l),m.dispatch=l,d.memoizedState=n,[s,l,!1]}function _g(n){var s=ht();return Tg(s,$e,n)}function Tg(n,s,l){if(s=Fd(n,s,Sg)[0],n=$l(_i)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=to(s)}catch(A){throw A===ja?Il:A}else d=s;s=ht();var m=s.queue,b=m.dispatch;return l!==s.memoizedState&&(Se.flags|=2048,Ha(9,{destroy:void 0},mA.bind(null,m,l),null)),[d,b,n]}function mA(n,s){n.action=s}function Cg(n){var s=ht(),l=$e;if(l!==null)return Tg(s,l,n);ht(),s=s.memoizedState,l=ht();var d=l.queue.dispatch;return l.memoizedState=n,[s,d,!1]}function Ha(n,s,l,d){return n={tag:n,create:l,deps:d,inst:s,next:null},s=Se.updateQueue,s===null&&(s=Vl(),Se.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,s.lastEffect=n),n}function Rg(){return ht().memoizedState}function ql(n,s,l,d){var m=Gt();Se.flags|=n,m.memoizedState=Ha(1|s,{destroy:void 0},l,d===void 0?null:d)}function Yl(n,s,l,d){var m=ht();d=d===void 0?null:d;var b=m.memoizedState.inst;$e!==null&&d!==null&&Od(d,$e.memoizedState.deps)?m.memoizedState=Ha(s,b,l,d):(Se.flags|=n,m.memoizedState=Ha(1|s,b,l,d))}function Ng(n,s){ql(8390656,8,n,s)}function Gd(n,s){Yl(2048,8,n,s)}function gA(n){Se.flags|=4;var s=Se.updateQueue;if(s===null)s=Vl(),Se.updateQueue=s,s.events=[n];else{var l=s.events;l===null?s.events=[n]:l.push(n)}}function Dg(n){var s=ht().memoizedState;return gA({ref:s,nextImpl:n}),function(){if((je&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function kg(n,s){return Yl(4,2,n,s)}function Mg(n,s){return Yl(4,4,n,s)}function Lg(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Og(n,s,l){l=l!=null?l.concat([n]):null,Yl(4,4,Lg.bind(null,s,n),l)}function $d(){}function Ig(n,s){var l=ht();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&Od(s,d[1])?d[0]:(l.memoizedState=[n,s],n)}function Pg(n,s){var l=ht();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&Od(s,d[1]))return d[0];if(d=n(),Xs){Jn(!0);try{n()}finally{Jn(!1)}}return l.memoizedState=[d,s],d}function qd(n,s,l){return l===void 0||(Ei&1073741824)!==0&&(Ne&261930)===0?n.memoizedState=s:(n.memoizedState=l,n=j0(),Se.lanes|=n,ds|=n,l)}function jg(n,s,l,d){return dn(l,s)?l:Ua.current!==null?(n=qd(n,l,d),dn(n,s)||(yt=!0),n):(Ei&42)===0||(Ei&1073741824)!==0&&(Ne&261930)===0?(yt=!0,n.memoizedState=l):(n=j0(),Se.lanes|=n,ds|=n,s)}function Bg(n,s,l,d,m){var b=G.p;G.p=b!==0&&8>b?b:8;var A=P.T,C={};P.T=C,Xd(n,!1,s,l);try{var k=m(),F=P.S;if(F!==null&&F(C,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var X=dA(k,d);no(n,s,X,yn(n))}else no(n,s,d,yn(n))}catch(Q){no(n,s,{then:function(){},status:"rejected",reason:Q},yn())}finally{G.p=b,A!==null&&C.types!==null&&(A.types=C.types),P.T=A}}function yA(){}function Yd(n,s,l,d){if(n.tag!==5)throw Error(i(476));var m=Ug(n).queue;Bg(n,m,s,ee,l===null?yA:function(){return Fg(n),l(d)})}function Ug(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_i,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Fg(n){var s=Ug(n);s.next===null&&(s=n.alternate.memoizedState),no(n,s.next.queue,{},yn())}function Wd(){return Ot(xo)}function zg(){return ht().memoizedState}function Hg(){return ht().memoizedState}function bA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=yn();n=as(l);var d=rs(s,n,l);d!==null&&(nn(d,s,l),Qr(d,s,l)),s={cache:Sd()},n.payload=s;return}s=s.return}}function vA(n,s,l){var d=yn();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Wl(n)?Gg(s,l):(l=hd(n,s,l,d),l!==null&&(nn(l,n,d),$g(l,s,d)))}function Vg(n,s,l){var d=yn();no(n,s,l,d)}function no(n,s,l,d){var m={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Wl(n))Gg(s,m);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var A=s.lastRenderedState,C=b(A,l);if(m.hasEagerState=!0,m.eagerState=C,dn(C,A))return Rl(n,s,m,0),Xe===null&&Cl(),!1}catch{}if(l=hd(n,s,m,d),l!==null)return nn(l,n,d),$g(l,s,d),!0}return!1}function Xd(n,s,l,d){if(d={lane:2,revertLane:Ch(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Wl(n)){if(s)throw Error(i(479))}else s=hd(n,l,d,2),s!==null&&nn(s,n,2)}function Wl(n){var s=n.alternate;return n===Se||s!==null&&s===Se}function Gg(n,s){Fa=zl=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function $g(n,s,l){if((l&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,Kp(n,l)}}var io={readContext:Ot,use:Gl,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useLayoutEffect:lt,useInsertionEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useSyncExternalStore:lt,useId:lt,useHostTransitionStatus:lt,useFormState:lt,useActionState:lt,useOptimistic:lt,useMemoCache:lt,useCacheRefresh:lt};io.useEffectEvent=lt;var qg={readContext:Ot,use:Gl,useCallback:function(n,s){return Gt().memoizedState=[n,s===void 0?null:s],n},useContext:Ot,useEffect:Ng,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,ql(4194308,4,Lg.bind(null,s,n),l)},useLayoutEffect:function(n,s){return ql(4194308,4,n,s)},useInsertionEffect:function(n,s){ql(4,2,n,s)},useMemo:function(n,s){var l=Gt();s=s===void 0?null:s;var d=n();if(Xs){Jn(!0);try{n()}finally{Jn(!1)}}return l.memoizedState=[d,s],d},useReducer:function(n,s,l){var d=Gt();if(l!==void 0){var m=l(s);if(Xs){Jn(!0);try{l(s)}finally{Jn(!1)}}}else m=s;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=vA.bind(null,Se,n),[d.memoizedState,n]},useRef:function(n){var s=Gt();return n={current:n},s.memoizedState=n},useState:function(n){n=Hd(n);var s=n.queue,l=Vg.bind(null,Se,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:$d,useDeferredValue:function(n,s){var l=Gt();return qd(l,n,s)},useTransition:function(){var n=Hd(!1);return n=Bg.bind(null,Se,n.queue,!0,!1),Gt().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var d=Se,m=Gt();if(Me){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Xe===null)throw Error(i(349));(Ne&127)!==0||fg(d,s,l)}m.memoizedState=l;var b={value:l,getSnapshot:s};return m.queue=b,Ng(mg.bind(null,d,b,n),[n]),d.flags|=2048,Ha(9,{destroy:void 0},pg.bind(null,d,b,l,s),null),l},useId:function(){var n=Gt(),s=Xe.identifierPrefix;if(Me){var l=ti,d=ei;l=(d&~(1<<32-Ut(d)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Hl++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=hA++,s="_"+s+"r_"+l.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Wd,useFormState:Eg,useActionState:Eg,useOptimistic:function(n){var s=Gt();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Xd.bind(null,Se,!0,l),l.dispatch=s,[n,s]},useMemoCache:Ud,useCacheRefresh:function(){return Gt().memoizedState=bA.bind(null,Se)},useEffectEvent:function(n){var s=Gt(),l={impl:n};return s.memoizedState=l,function(){if((je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Kd={readContext:Ot,use:Gl,useCallback:Ig,useContext:Ot,useEffect:Gd,useImperativeHandle:Og,useInsertionEffect:kg,useLayoutEffect:Mg,useMemo:Pg,useReducer:$l,useRef:Rg,useState:function(){return $l(_i)},useDebugValue:$d,useDeferredValue:function(n,s){var l=ht();return jg(l,$e.memoizedState,n,s)},useTransition:function(){var n=$l(_i)[0],s=ht().memoizedState;return[typeof n=="boolean"?n:to(n),s]},useSyncExternalStore:hg,useId:zg,useHostTransitionStatus:Wd,useFormState:_g,useActionState:_g,useOptimistic:function(n,s){var l=ht();return bg(l,$e,n,s)},useMemoCache:Ud,useCacheRefresh:Hg};Kd.useEffectEvent=Dg;var Yg={readContext:Ot,use:Gl,useCallback:Ig,useContext:Ot,useEffect:Gd,useImperativeHandle:Og,useInsertionEffect:kg,useLayoutEffect:Mg,useMemo:Pg,useReducer:zd,useRef:Rg,useState:function(){return zd(_i)},useDebugValue:$d,useDeferredValue:function(n,s){var l=ht();return $e===null?qd(l,n,s):jg(l,$e.memoizedState,n,s)},useTransition:function(){var n=zd(_i)[0],s=ht().memoizedState;return[typeof n=="boolean"?n:to(n),s]},useSyncExternalStore:hg,useId:zg,useHostTransitionStatus:Wd,useFormState:Cg,useActionState:Cg,useOptimistic:function(n,s){var l=ht();return $e!==null?bg(l,$e,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Ud,useCacheRefresh:Hg};Yg.useEffectEvent=Dg;function Qd(n,s,l,d){s=n.memoizedState,l=l(d,s),l=l==null?s:g({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Zd={enqueueSetState:function(n,s,l){n=n._reactInternals;var d=yn(),m=as(d);m.payload=s,l!=null&&(m.callback=l),s=rs(n,m,d),s!==null&&(nn(s,n,d),Qr(s,n,d))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var d=yn(),m=as(d);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=rs(n,m,d),s!==null&&(nn(s,n,d),Qr(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=yn(),d=as(l);d.tag=2,s!=null&&(d.callback=s),s=rs(n,d,l),s!==null&&(nn(s,n,l),Qr(s,n,l))}};function Wg(n,s,l,d,m,b,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,b,A):s.prototype&&s.prototype.isPureReactComponent?!Vr(l,d)||!Vr(m,b):!0}function Xg(n,s,l,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==n&&Zd.enqueueReplaceState(s,s.state,null)}function Ks(n,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(n=n.defaultProps){l===s&&(l=g({},l));for(var m in n)l[m]===void 0&&(l[m]=n[m])}return l}function Kg(n){Tl(n)}function Qg(n){console.error(n)}function Zg(n){Tl(n)}function Xl(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function Jg(n,s,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Jd(n,s,l){return l=as(l),l.tag=3,l.payload={element:null},l.callback=function(){Xl(n,s)},l}function e0(n){return n=as(n),n.tag=3,n}function t0(n,s,l,d){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var b=d.value;n.payload=function(){return m(b)},n.callback=function(){Jg(s,l,d)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){Jg(s,l,d),typeof m!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var C=d.stack;this.componentDidCatch(d.value,{componentStack:C!==null?C:""})})}function xA(n,s,l,d,m){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&Oa(s,l,m,!0),l=fn.current,l!==null){switch(l.tag){case 31:case 13:return Mn===null?oc():l.alternate===null&&ct===0&&(ct=3),l.flags&=-257,l.flags|=65536,l.lanes=m,d===Pl?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),Eh(n,d,m)),!1;case 22:return l.flags|=65536,d===Pl?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),Eh(n,d,m)),!1}throw Error(i(435,l.tag))}return Eh(n,d,m),oc(),!1}if(Me)return s=fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,d!==bd&&(n=Error(i(422),{cause:d}),qr(Rn(n,l)))):(d!==bd&&(s=Error(i(423),{cause:d}),qr(Rn(s,l))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=Rn(d,l),m=Jd(n.stateNode,d,m),Nd(n,m),ct!==4&&(ct=2)),!1;var b=Error(i(520),{cause:d});if(b=Rn(b,l),ho===null?ho=[b]:ho.push(b),ct!==4&&(ct=2),s===null)return!0;d=Rn(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=m&-m,l.lanes|=n,n=Jd(l.stateNode,d,n),Nd(l,n),!1;case 1:if(s=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(hs===null||!hs.has(b))))return l.flags|=65536,m&=-m,l.lanes|=m,m=e0(m),t0(m,n,l,d),Nd(l,m),!1}l=l.return}while(l!==null);return!1}var eh=Error(i(461)),yt=!1;function It(n,s,l,d){s.child=n===null?ag(s,null,l,d):Ws(s,n.child,l,d)}function n0(n,s,l,d,m){l=l.render;var b=s.ref;if("ref"in d){var A={};for(var C in d)C!=="ref"&&(A[C]=d[C])}else A=d;return Gs(s),d=Id(n,s,l,A,b,m),C=Pd(),n!==null&&!yt?(jd(n,s,m),Ti(n,s,m)):(Me&&C&&gd(s),s.flags|=1,It(n,s,d,m),s.child)}function i0(n,s,l,d,m){if(n===null){var b=l.type;return typeof b=="function"&&!fd(b)&&b.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=b,s0(n,s,b,d,m)):(n=Dl(l.type,null,d,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(b=n.child,!lh(n,m)){var A=b.memoizedProps;if(l=l.compare,l=l!==null?l:Vr,l(A,d)&&n.ref===s.ref)return Ti(n,s,m)}return s.flags|=1,n=xi(b,d),n.ref=s.ref,n.return=s,s.child=n}function s0(n,s,l,d,m){if(n!==null){var b=n.memoizedProps;if(Vr(b,d)&&n.ref===s.ref)if(yt=!1,s.pendingProps=d=b,lh(n,m))(n.flags&131072)!==0&&(yt=!0);else return s.lanes=n.lanes,Ti(n,s,m)}return th(n,s,l,d,m)}function a0(n,s,l,d){var m=d.children,b=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,n!==null){for(d=s.child=n.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~b}else d=0,s.child=null;return r0(n,s,b,l,d)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ol(s,b!==null?b.cachePool:null),b!==null?lg(s,b):kd(),cg(s);else return d=s.lanes=536870912,r0(n,s,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Ol(s,b.cachePool),lg(s,b),ls(),s.memoizedState=null):(n!==null&&Ol(s,null),kd(),ls());return It(n,s,m,l),s.child}function so(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function r0(n,s,l,d,m){var b=_d();return b=b===null?null:{parent:mt._currentValue,pool:b},s.memoizedState={baseLanes:l,cachePool:b},n!==null&&Ol(s,null),kd(),cg(s),n!==null&&Oa(n,s,d,!0),s.childLanes=m,null}function Kl(n,s){return s=Zl({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function o0(n,s,l){return Ws(s,n.child,null,l),n=Kl(s,s.pendingProps),n.flags|=2,pn(s),s.memoizedState=null,n}function wA(n,s,l){var d=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(d.mode==="hidden")return n=Kl(s,d),s.lanes=536870912,so(null,n);if(Ld(s),(n=Qe)?(n=vy(n,kn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:es!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},l=Gm(n),l.return=s,s.child=l,Lt=s,Qe=null)):n=null,n===null)throw ns(s);return s.lanes=536870912,null}return Kl(s,d)}var b=n.memoizedState;if(b!==null){var A=b.dehydrated;if(Ld(s),m)if(s.flags&256)s.flags&=-257,s=o0(n,s,l);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(yt||Oa(n,s,l,!1),m=(l&n.childLanes)!==0,yt||m){if(d=Xe,d!==null&&(A=Qp(d,l),A!==0&&A!==b.retryLane))throw b.retryLane=A,Fs(n,A),nn(d,n,A),eh;oc(),s=o0(n,s,l)}else n=b.treeContext,Qe=Ln(A.nextSibling),Lt=s,Me=!0,ts=null,kn=!1,n!==null&&Ym(s,n),s=Kl(s,d),s.flags|=4096;return s}return n=xi(n.child,{mode:d.mode,children:d.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Ql(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function th(n,s,l,d,m){return Gs(s),l=Id(n,s,l,d,void 0,m),d=Pd(),n!==null&&!yt?(jd(n,s,m),Ti(n,s,m)):(Me&&d&&gd(s),s.flags|=1,It(n,s,l,m),s.child)}function l0(n,s,l,d,m,b){return Gs(s),s.updateQueue=null,l=dg(s,d,l,m),ug(n),d=Pd(),n!==null&&!yt?(jd(n,s,b),Ti(n,s,b)):(Me&&d&&gd(s),s.flags|=1,It(n,s,l,b),s.child)}function c0(n,s,l,d,m){if(Gs(s),s.stateNode===null){var b=Da,A=l.contextType;typeof A=="object"&&A!==null&&(b=Ot(A)),b=new l(d,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Zd,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=d,b.state=s.memoizedState,b.refs={},Cd(s),A=l.contextType,b.context=typeof A=="object"&&A!==null?Ot(A):Da,b.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Qd(s,l,A,d),b.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&Zd.enqueueReplaceState(b,b.state,null),Jr(s,d,b,m),Zr(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){b=s.stateNode;var C=s.memoizedProps,k=Ks(l,C);b.props=k;var F=b.context,X=l.contextType;A=Da,typeof X=="object"&&X!==null&&(A=Ot(X));var Q=l.getDerivedStateFromProps;X=typeof Q=="function"||typeof b.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,X||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(C||F!==A)&&Xg(s,b,d,A),ss=!1;var z=s.memoizedState;b.state=z,Jr(s,d,b,m),Zr(),F=s.memoizedState,C||z!==F||ss?(typeof Q=="function"&&(Qd(s,l,Q,d),F=s.memoizedState),(k=ss||Wg(s,l,k,d,z,F,A))?(X||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=F),b.props=d,b.state=F,b.context=A,d=k):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{b=s.stateNode,Rd(n,s),A=s.memoizedProps,X=Ks(l,A),b.props=X,Q=s.pendingProps,z=b.context,F=l.contextType,k=Da,typeof F=="object"&&F!==null&&(k=Ot(F)),C=l.getDerivedStateFromProps,(F=typeof C=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==Q||z!==k)&&Xg(s,b,d,k),ss=!1,z=s.memoizedState,b.state=z,Jr(s,d,b,m),Zr();var V=s.memoizedState;A!==Q||z!==V||ss||n!==null&&n.dependencies!==null&&Ml(n.dependencies)?(typeof C=="function"&&(Qd(s,l,C,d),V=s.memoizedState),(X=ss||Wg(s,l,X,d,z,V,k)||n!==null&&n.dependencies!==null&&Ml(n.dependencies))?(F||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,V,k),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,V,k)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=V),b.props=d,b.state=V,b.context=k,d=X):(typeof b.componentDidUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),d=!1)}return b=d,Ql(n,s),d=(s.flags&128)!==0,b||d?(b=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,n!==null&&d?(s.child=Ws(s,n.child,null,m),s.child=Ws(s,null,l,m)):It(n,s,l,m),s.memoizedState=b.state,n=s.child):n=Ti(n,s,m),n}function u0(n,s,l,d){return Hs(),s.flags|=256,It(n,s,l,d),s.child}var nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ih(n){return{baseLanes:n,cachePool:Jm()}}function sh(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=gn),n}function d0(n,s,l){var d=s.pendingProps,m=!1,b=(s.flags&128)!==0,A;if((A=b)||(A=n!==null&&n.memoizedState===null?!1:(dt.current&2)!==0),A&&(m=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(m?os(s):ls(),(n=Qe)?(n=vy(n,kn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:es!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},l=Gm(n),l.return=s,s.child=l,Lt=s,Qe=null)):n=null,n===null)throw ns(s);return Fh(n)?s.lanes=32:s.lanes=536870912,null}var C=d.children;return d=d.fallback,m?(ls(),m=s.mode,C=Zl({mode:"hidden",children:C},m),d=zs(d,m,l,null),C.return=s,d.return=s,C.sibling=d,s.child=C,d=s.child,d.memoizedState=ih(l),d.childLanes=sh(n,A,l),s.memoizedState=nh,so(null,d)):(os(s),ah(s,C))}var k=n.memoizedState;if(k!==null&&(C=k.dehydrated,C!==null)){if(b)s.flags&256?(os(s),s.flags&=-257,s=rh(n,s,l)):s.memoizedState!==null?(ls(),s.child=n.child,s.flags|=128,s=null):(ls(),C=d.fallback,m=s.mode,d=Zl({mode:"visible",children:d.children},m),C=zs(C,m,l,null),C.flags|=2,d.return=s,C.return=s,d.sibling=C,s.child=d,Ws(s,n.child,null,l),d=s.child,d.memoizedState=ih(l),d.childLanes=sh(n,A,l),s.memoizedState=nh,s=so(null,d));else if(os(s),Fh(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var F=A.dgst;A=F,d=Error(i(419)),d.stack="",d.digest=A,qr({value:d,source:null,stack:null}),s=rh(n,s,l)}else if(yt||Oa(n,s,l,!1),A=(l&n.childLanes)!==0,yt||A){if(A=Xe,A!==null&&(d=Qp(A,l),d!==0&&d!==k.retryLane))throw k.retryLane=d,Fs(n,d),nn(A,n,d),eh;Uh(C)||oc(),s=rh(n,s,l)}else Uh(C)?(s.flags|=192,s.child=n.child,s=null):(n=k.treeContext,Qe=Ln(C.nextSibling),Lt=s,Me=!0,ts=null,kn=!1,n!==null&&Ym(s,n),s=ah(s,d.children),s.flags|=4096);return s}return m?(ls(),C=d.fallback,m=s.mode,k=n.child,F=k.sibling,d=xi(k,{mode:"hidden",children:d.children}),d.subtreeFlags=k.subtreeFlags&65011712,F!==null?C=xi(F,C):(C=zs(C,m,l,null),C.flags|=2),C.return=s,d.return=s,d.sibling=C,s.child=d,so(null,d),d=s.child,C=n.child.memoizedState,C===null?C=ih(l):(m=C.cachePool,m!==null?(k=mt._currentValue,m=m.parent!==k?{parent:k,pool:k}:m):m=Jm(),C={baseLanes:C.baseLanes|l,cachePool:m}),d.memoizedState=C,d.childLanes=sh(n,A,l),s.memoizedState=nh,so(n.child,d)):(os(s),l=n.child,n=l.sibling,l=xi(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,n!==null&&(A=s.deletions,A===null?(s.deletions=[n],s.flags|=16):A.push(n)),s.child=l,s.memoizedState=null,l)}function ah(n,s){return s=Zl({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Zl(n,s){return n=hn(22,n,null,s),n.lanes=0,n}function rh(n,s,l){return Ws(s,n.child,null,l),n=ah(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function h0(n,s,l){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),wd(n.return,s,l)}function oh(n,s,l,d,m,b){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m,treeForkCount:b}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=l,A.tailMode=m,A.treeForkCount=b)}function f0(n,s,l){var d=s.pendingProps,m=d.revealOrder,b=d.tail;d=d.children;var A=dt.current,C=(A&2)!==0;if(C?(A=A&1|2,s.flags|=128):A&=1,Z(dt,A),It(n,s,d,l),d=Me?$r:0,!C&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&h0(n,l,s);else if(n.tag===19)h0(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(l=s.child,m=null;l!==null;)n=l.alternate,n!==null&&Fl(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),oh(s,!1,m,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Fl(n)===null){s.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}oh(s,!0,l,null,b,d);break;case"together":oh(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Ti(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),ds|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(Oa(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=xi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=xi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function lh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ml(n)))}function AA(n,s,l){switch(s.tag){case 3:ot(s,s.stateNode.containerInfo),is(s,mt,n.memoizedState.cache),Hs();break;case 27:case 5:Kn(s);break;case 4:ot(s,s.stateNode.containerInfo);break;case 10:is(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Ld(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(os(s),s.flags|=128,null):(l&s.child.childLanes)!==0?d0(n,s,l):(os(s),n=Ti(n,s,l),n!==null?n.sibling:null);os(s);break;case 19:var m=(n.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(Oa(n,s,l,!1),d=(l&s.childLanes)!==0),m){if(d)return f0(n,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Z(dt,dt.current),d)break;return null;case 22:return s.lanes=0,a0(n,s,l,s.pendingProps);case 24:is(s,mt,n.memoizedState.cache)}return Ti(n,s,l)}function p0(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)yt=!0;else{if(!lh(n,l)&&(s.flags&128)===0)return yt=!1,AA(n,s,l);yt=(n.flags&131072)!==0}else yt=!1,Me&&(s.flags&1048576)!==0&&qm(s,$r,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(n=qs(s.elementType),s.type=n,typeof n=="function")fd(n)?(d=Ks(n,d),s.tag=1,s=c0(null,s,n,d,l)):(s.tag=0,s=th(null,s,n,d,l));else{if(n!=null){var m=n.$$typeof;if(m===N){s.tag=11,s=n0(null,s,n,d,l);break e}else if(m===j){s.tag=14,s=i0(null,s,n,d,l);break e}}throw s=oe(n)||n,Error(i(306,s,""))}}return s;case 0:return th(n,s,s.type,s.pendingProps,l);case 1:return d=s.type,m=Ks(d,s.pendingProps),c0(n,s,d,m,l);case 3:e:{if(ot(s,s.stateNode.containerInfo),n===null)throw Error(i(387));d=s.pendingProps;var b=s.memoizedState;m=b.element,Rd(n,s),Jr(s,d,null,l);var A=s.memoizedState;if(d=A.cache,is(s,mt,d),d!==b.cache&&Ad(s,[mt],l,!0),Zr(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=u0(n,s,d,l);break e}else if(d!==m){m=Rn(Error(i(424)),s),qr(m),s=u0(n,s,d,l);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Qe=Ln(n.firstChild),Lt=s,Me=!0,ts=null,kn=!0,l=ag(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Hs(),d===m){s=Ti(n,s,l);break e}It(n,s,d,l)}s=s.child}return s;case 26:return Ql(n,s),n===null?(l=_y(s.type,null,s.pendingProps,null))?s.memoizedState=l:Me||(l=s.type,n=s.pendingProps,d=pc(ye.current).createElement(l),d[Mt]=s,d[Kt]=n,Pt(d,l,n),Tt(d),s.stateNode=d):s.memoizedState=_y(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Kn(s),n===null&&Me&&(d=s.stateNode=Ay(s.type,s.pendingProps,ye.current),Lt=s,kn=!0,m=Qe,gs(s.type)?(zh=m,Qe=Ln(d.firstChild)):Qe=m),It(n,s,s.pendingProps.children,l),Ql(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((m=d=Qe)&&(d=ZA(d,s.type,s.pendingProps,kn),d!==null?(s.stateNode=d,Lt=s,Qe=Ln(d.firstChild),kn=!1,m=!0):m=!1),m||ns(s)),Kn(s),m=s.type,b=s.pendingProps,A=n!==null?n.memoizedProps:null,d=b.children,Ph(m,b)?d=null:A!==null&&Ph(m,A)&&(s.flags|=32),s.memoizedState!==null&&(m=Id(n,s,fA,null,null,l),xo._currentValue=m),Ql(n,s),It(n,s,d,l),s.child;case 6:return n===null&&Me&&((n=l=Qe)&&(l=JA(l,s.pendingProps,kn),l!==null?(s.stateNode=l,Lt=s,Qe=null,n=!0):n=!1),n||ns(s)),null;case 13:return d0(n,s,l);case 4:return ot(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Ws(s,null,d,l):It(n,s,d,l),s.child;case 11:return n0(n,s,s.type,s.pendingProps,l);case 7:return It(n,s,s.pendingProps,l),s.child;case 8:return It(n,s,s.pendingProps.children,l),s.child;case 12:return It(n,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,is(s,s.type,d.value),It(n,s,d.children,l),s.child;case 9:return m=s.type._context,d=s.pendingProps.children,Gs(s),m=Ot(m),d=d(m),s.flags|=1,It(n,s,d,l),s.child;case 14:return i0(n,s,s.type,s.pendingProps,l);case 15:return s0(n,s,s.type,s.pendingProps,l);case 19:return f0(n,s,l);case 31:return wA(n,s,l);case 22:return a0(n,s,l,s.pendingProps);case 24:return Gs(s),d=Ot(mt),n===null?(m=_d(),m===null&&(m=Xe,b=Sd(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=l),m=b),s.memoizedState={parent:d,cache:m},Cd(s),is(s,mt,m)):((n.lanes&l)!==0&&(Rd(n,s),Jr(s,null,null,l),Zr()),m=n.memoizedState,b=s.memoizedState,m.parent!==d?(m={parent:d,cache:d},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),is(s,mt,d)):(d=b.cache,is(s,mt,d),d!==m.cache&&Ad(s,[mt],l,!0))),It(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ci(n){n.flags|=4}function ch(n,s,l,d,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(z0())n.flags|=8192;else throw Ys=Pl,Td}else n.flags&=-16777217}function m0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Dy(s))if(z0())n.flags|=8192;else throw Ys=Pl,Td}function Jl(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?En():536870912,n.lanes|=s,qa|=s)}function ao(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ze(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(s)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,s}function SA(n,s,l){var d=s.pendingProps;switch(yd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return Ze(s),null;case 3:return l=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Si(mt),He(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(La(s)?Ci(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vd())),Ze(s),null;case 26:var m=s.type,b=s.memoizedState;return n===null?(Ci(s),b!==null?(Ze(s),m0(s,b)):(Ze(s),ch(s,m,null,d,l))):b?b!==n.memoizedState?(Ci(s),Ze(s),m0(s,b)):(Ze(s),s.flags&=-16777217):(n=n.memoizedProps,n!==d&&Ci(s),Ze(s),ch(s,m,n,d,l)),null;case 27:if(Qn(s),l=ye.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ci(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ze(s),null}n=te.current,La(s)?Wm(s):(n=Ay(m,d,l),s.stateNode=n,Ci(s))}return Ze(s),null;case 5:if(Qn(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ci(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ze(s),null}if(b=te.current,La(s))Wm(s);else{var A=pc(ye.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?A.createElement(m,{is:d.is}):A.createElement(m)}}b[Mt]=s,b[Kt]=d;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=b;e:switch(Pt(b,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ci(s)}}return Ze(s),ch(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,l),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Ci(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(n=ye.current,La(s)){if(n=s.stateNode,l=s.memoizedProps,d=null,m=Lt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}n[Mt]=s,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||dy(n.nodeValue,l)),n||ns(s,!0)}else n=pc(n).createTextNode(d),n[Mt]=s,s.stateNode=n}return Ze(s),null;case 31:if(l=s.memoizedState,n===null||n.memoizedState!==null){if(d=La(s),l!==null){if(n===null){if(!d)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Mt]=s}else Hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),n=!1}else l=vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return s.flags&256?(pn(s),s):(pn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ze(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=La(s),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Mt]=s}else Hs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),m=!1}else m=vd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(pn(s),s):(pn(s),null)}return pn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=d!==null,n=n!==null&&n.memoizedState!==null,l&&(d=s.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==m&&(d.flags|=2048)),l!==n&&l&&(s.child.flags|=8192),Jl(s,s.updateQueue),Ze(s),null);case 4:return He(),n===null&&kh(s.stateNode.containerInfo),Ze(s),null;case 10:return Si(s.type),Ze(s),null;case 19:if(H(dt),d=s.memoizedState,d===null)return Ze(s),null;if(m=(s.flags&128)!==0,b=d.rendering,b===null)if(m)ao(d,!1);else{if(ct!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(b=Fl(n),b!==null){for(s.flags|=128,ao(d,!1),n=b.updateQueue,s.updateQueue=n,Jl(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)Vm(l,n),l=l.sibling;return Z(dt,dt.current&1|2),Me&&wi(s,d.treeForkCount),s.child}n=n.sibling}d.tail!==null&&Bt()>sc&&(s.flags|=128,m=!0,ao(d,!1),s.lanes=4194304)}else{if(!m)if(n=Fl(b),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,Jl(s,n),ao(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Me)return Ze(s),null}else 2*Bt()-d.renderingStartTime>sc&&l!==536870912&&(s.flags|=128,m=!0,ao(d,!1),s.lanes=4194304);d.isBackwards?(b.sibling=s.child,s.child=b):(n=d.last,n!==null?n.sibling=b:s.child=b,d.last=b)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Bt(),n.sibling=null,l=dt.current,Z(dt,m?l&1|2:l&1),Me&&wi(s,d.treeForkCount),n):(Ze(s),null);case 22:case 23:return pn(s),Md(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),l=s.updateQueue,l!==null&&Jl(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),n!==null&&H($s),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Si(mt),Ze(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function EA(n,s){switch(yd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Si(mt),He(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Qn(s),null;case 31:if(s.memoizedState!==null){if(pn(s),s.alternate===null)throw Error(i(340));Hs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Hs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return H(dt),null;case 4:return He(),null;case 10:return Si(s.type),null;case 22:case 23:return pn(s),Md(),n!==null&&H($s),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Si(mt),null;case 25:return null;default:return null}}function g0(n,s){switch(yd(s),s.tag){case 3:Si(mt),He();break;case 26:case 27:case 5:Qn(s);break;case 4:He();break;case 31:s.memoizedState!==null&&pn(s);break;case 13:pn(s);break;case 19:H(dt);break;case 10:Si(s.type);break;case 22:case 23:pn(s),Md(),n!==null&&H($s);break;case 24:Si(mt)}}function ro(n,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&n)===n){d=void 0;var b=l.create,A=l.inst;d=b(),A.destroy=d}l=l.next}while(l!==m)}}catch(C){Ge(s,s.return,C)}}function cs(n,s,l){try{var d=s.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&n)===n){var A=d.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,m=s;var k=l,F=C;try{F()}catch(X){Ge(m,k,X)}}}d=d.next}while(d!==b)}}catch(X){Ge(s,s.return,X)}}function y0(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{og(s,l)}catch(d){Ge(n,n.return,d)}}}function b0(n,s,l){l.props=Ks(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Ge(n,s,d)}}function oo(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(m){Ge(n,s,m)}}function ni(n,s){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(m){Ge(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ge(n,s,m)}else l.current=null}function v0(n){var s=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(m){Ge(n,n.return,m)}}function uh(n,s,l){try{var d=n.stateNode;qA(d,n.type,l,s),d[Kt]=s}catch(m){Ge(n,n.return,m)}}function x0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&gs(n.type)||n.tag===4}function dh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||x0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&gs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function hh(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=bi));else if(d!==4&&(d===27&&gs(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(hh(n,s,l),n=n.sibling;n!==null;)hh(n,s,l),n=n.sibling}function ec(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(d!==4&&(d===27&&gs(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(ec(n,s,l),n=n.sibling;n!==null;)ec(n,s,l),n=n.sibling}function w0(n){var s=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Pt(s,d,l),s[Mt]=n,s[Kt]=l}catch(b){Ge(n,n.return,b)}}var Ri=!1,bt=!1,fh=!1,A0=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function _A(n,s){if(n=n.containerInfo,Oh=wc,n=Om(n),rd(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var A=0,C=-1,k=-1,F=0,X=0,Q=n,z=null;t:for(;;){for(var V;Q!==l||m!==0&&Q.nodeType!==3||(C=A+m),Q!==b||d!==0&&Q.nodeType!==3||(k=A+d),Q.nodeType===3&&(A+=Q.nodeValue.length),(V=Q.firstChild)!==null;)z=Q,Q=V;for(;;){if(Q===n)break t;if(z===l&&++F===m&&(C=A),z===b&&++X===d&&(k=A),(V=Q.nextSibling)!==null)break;Q=z,z=Q.parentNode}Q=V}l=C===-1||k===-1?null:{start:C,end:k}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ih={focusedElem:n,selectionRange:l},wc=!1,Ct=s;Ct!==null;)if(s=Ct,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ct=n;else for(;Ct!==null;){switch(s=Ct,b=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)m=n[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,l=s,m=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var se=Ks(l.type,m);n=d.getSnapshotBeforeUpdate(se,b),d.__reactInternalSnapshotBeforeUpdate=n}catch(pe){Ge(l,l.return,pe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Bh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Bh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ct=n;break}Ct=s.return}}function S0(n,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Di(n,l),d&4&&ro(5,l);break;case 1:if(Di(n,l),d&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(A){Ge(l,l.return,A)}else{var m=Ks(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Ge(l,l.return,A)}}d&64&&y0(l),d&512&&oo(l,l.return);break;case 3:if(Di(n,l),d&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{og(n,s)}catch(A){Ge(l,l.return,A)}}break;case 27:s===null&&d&4&&w0(l);case 26:case 5:Di(n,l),s===null&&d&4&&v0(l),d&512&&oo(l,l.return);break;case 12:Di(n,l);break;case 31:Di(n,l),d&4&&T0(n,l);break;case 13:Di(n,l),d&4&&C0(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=OA.bind(null,l),eS(n,l))));break;case 22:if(d=l.memoizedState!==null||Ri,!d){s=s!==null&&s.memoizedState!==null||bt,m=Ri;var b=bt;Ri=d,(bt=s)&&!b?ki(n,l,(l.subtreeFlags&8772)!==0):Di(n,l),Ri=m,bt=b}break;case 30:break;default:Di(n,l)}}function E0(n){var s=n.alternate;s!==null&&(n.alternate=null,E0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Vu(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Je=null,Zt=!1;function Ni(n,s,l){for(l=l.child;l!==null;)_0(n,s,l),l=l.sibling}function _0(n,s,l){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(Os,l)}catch{}switch(l.tag){case 26:bt||ni(l,s),Ni(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bt||ni(l,s);var d=Je,m=Zt;gs(l.type)&&(Je=l.stateNode,Zt=!1),Ni(n,s,l),yo(l.stateNode),Je=d,Zt=m;break;case 5:bt||ni(l,s);case 6:if(d=Je,m=Zt,Je=null,Ni(n,s,l),Je=d,Zt=m,Je!==null)if(Zt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(l.stateNode)}catch(b){Ge(l,s,b)}else try{Je.removeChild(l.stateNode)}catch(b){Ge(l,s,b)}break;case 18:Je!==null&&(Zt?(n=Je,yy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),er(n)):yy(Je,l.stateNode));break;case 4:d=Je,m=Zt,Je=l.stateNode.containerInfo,Zt=!0,Ni(n,s,l),Je=d,Zt=m;break;case 0:case 11:case 14:case 15:cs(2,l,s),bt||cs(4,l,s),Ni(n,s,l);break;case 1:bt||(ni(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&b0(l,s,d)),Ni(n,s,l);break;case 21:Ni(n,s,l);break;case 22:bt=(d=bt)||l.memoizedState!==null,Ni(n,s,l),bt=d;break;default:Ni(n,s,l)}}function T0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{er(n)}catch(l){Ge(s,s.return,l)}}}function C0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{er(n)}catch(l){Ge(s,s.return,l)}}function TA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new A0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new A0),s;default:throw Error(i(435,n.tag))}}function tc(n,s){var l=TA(n);s.forEach(function(d){if(!l.has(d)){l.add(d);var m=IA.bind(null,n,d);d.then(m,m)}})}function Jt(n,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d],b=n,A=s,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(gs(C.type)){Je=C.stateNode,Zt=!1;break e}break;case 5:Je=C.stateNode,Zt=!1;break e;case 3:case 4:Je=C.stateNode.containerInfo,Zt=!0;break e}C=C.return}if(Je===null)throw Error(i(160));_0(b,A,m),Je=null,Zt=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)R0(s,n),s=s.sibling}var Fn=null;function R0(n,s){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Jt(s,n),en(n),d&4&&(cs(3,n,n.return),ro(3,n),cs(5,n,n.return));break;case 1:Jt(s,n),en(n),d&512&&(bt||l===null||ni(l,l.return)),d&64&&Ri&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var m=Fn;if(Jt(s,n),en(n),d&512&&(bt||l===null||ni(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":b=m.getElementsByTagName("title")[0],(!b||b[Or]||b[Mt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(d),m.head.insertBefore(b,m.querySelector("head > title"))),Pt(b,d,l),b[Mt]=n,Tt(b),d=b;break e;case"link":var A=Ry("link","href",m).get(d+(l.href||""));if(A){for(var C=0;C<A.length;C++)if(b=A[C],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(C,1);break t}}b=m.createElement(d),Pt(b,d,l),m.head.appendChild(b);break;case"meta":if(A=Ry("meta","content",m).get(d+(l.content||""))){for(C=0;C<A.length;C++)if(b=A[C],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(C,1);break t}}b=m.createElement(d),Pt(b,d,l),m.head.appendChild(b);break;default:throw Error(i(468,d))}b[Mt]=n,Tt(b),d=b}n.stateNode=d}else Ny(m,n.type,n.stateNode);else n.stateNode=Cy(m,d,n.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?Ny(m,n.type,n.stateNode):Cy(m,d,n.memoizedProps)):d===null&&n.stateNode!==null&&uh(n,n.memoizedProps,l.memoizedProps)}break;case 27:Jt(s,n),en(n),d&512&&(bt||l===null||ni(l,l.return)),l!==null&&d&4&&uh(n,n.memoizedProps,l.memoizedProps);break;case 5:if(Jt(s,n),en(n),d&512&&(bt||l===null||ni(l,l.return)),n.flags&32){m=n.stateNode;try{Sa(m,"")}catch(se){Ge(n,n.return,se)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,uh(n,m,l!==null?l.memoizedProps:m)),d&1024&&(fh=!0);break;case 6:if(Jt(s,n),en(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch(se){Ge(n,n.return,se)}}break;case 3:if(yc=null,m=Fn,Fn=mc(s.containerInfo),Jt(s,n),Fn=m,en(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{er(s.containerInfo)}catch(se){Ge(n,n.return,se)}fh&&(fh=!1,N0(n));break;case 4:d=Fn,Fn=mc(n.stateNode.containerInfo),Jt(s,n),en(n),Fn=d;break;case 12:Jt(s,n),en(n);break;case 31:Jt(s,n),en(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,tc(n,d)));break;case 13:Jt(s,n),en(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ic=Bt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,tc(n,d)));break;case 22:m=n.memoizedState!==null;var k=l!==null&&l.memoizedState!==null,F=Ri,X=bt;if(Ri=F||m,bt=X||k,Jt(s,n),bt=X,Ri=F,en(n),d&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||k||Ri||bt||Qs(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){k=l=s;try{if(b=k.stateNode,m)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=k.stateNode;var Q=k.memoizedProps.style,z=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;C.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(se){Ge(k,k.return,se)}}}else if(s.tag===6){if(l===null){k=s;try{k.stateNode.nodeValue=m?"":k.memoizedProps}catch(se){Ge(k,k.return,se)}}}else if(s.tag===18){if(l===null){k=s;try{var V=k.stateNode;m?by(V,!0):by(k.stateNode,!1)}catch(se){Ge(k,k.return,se)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,tc(n,l))));break;case 19:Jt(s,n),en(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,tc(n,d)));break;case 30:break;case 21:break;default:Jt(s,n),en(n)}}function en(n){var s=n.flags;if(s&2){try{for(var l,d=n.return;d!==null;){if(x0(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,b=dh(n);ec(n,b,m);break;case 5:var A=l.stateNode;l.flags&32&&(Sa(A,""),l.flags&=-33);var C=dh(n);ec(n,C,A);break;case 3:case 4:var k=l.stateNode.containerInfo,F=dh(n);hh(n,F,k);break;default:throw Error(i(161))}}catch(X){Ge(n,n.return,X)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function N0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;N0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Di(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)S0(n,s.alternate,s),s=s.sibling}function Qs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:cs(4,s,s.return),Qs(s);break;case 1:ni(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&b0(s,s.return,l),Qs(s);break;case 27:yo(s.stateNode);case 26:case 5:ni(s,s.return),Qs(s);break;case 22:s.memoizedState===null&&Qs(s);break;case 30:Qs(s);break;default:Qs(s)}n=n.sibling}}function ki(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,m=n,b=s,A=b.flags;switch(b.tag){case 0:case 11:case 15:ki(m,b,l),ro(4,b);break;case 1:if(ki(m,b,l),d=b,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(F){Ge(d,d.return,F)}if(d=b,m=d.updateQueue,m!==null){var C=d.stateNode;try{var k=m.shared.hiddenCallbacks;if(k!==null)for(m.shared.hiddenCallbacks=null,m=0;m<k.length;m++)rg(k[m],C)}catch(F){Ge(d,d.return,F)}}l&&A&64&&y0(b),oo(b,b.return);break;case 27:w0(b);case 26:case 5:ki(m,b,l),l&&d===null&&A&4&&v0(b),oo(b,b.return);break;case 12:ki(m,b,l);break;case 31:ki(m,b,l),l&&A&4&&T0(m,b);break;case 13:ki(m,b,l),l&&A&4&&C0(m,b);break;case 22:b.memoizedState===null&&ki(m,b,l),oo(b,b.return);break;case 30:break;default:ki(m,b,l)}s=s.sibling}}function ph(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Yr(l))}function mh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Yr(n))}function zn(n,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)D0(n,s,l,d),s=s.sibling}function D0(n,s,l,d){var m=s.flags;switch(s.tag){case 0:case 11:case 15:zn(n,s,l,d),m&2048&&ro(9,s);break;case 1:zn(n,s,l,d);break;case 3:zn(n,s,l,d),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Yr(n)));break;case 12:if(m&2048){zn(n,s,l,d),n=s.stateNode;try{var b=s.memoizedProps,A=b.id,C=b.onPostCommit;typeof C=="function"&&C(A,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(k){Ge(s,s.return,k)}}else zn(n,s,l,d);break;case 31:zn(n,s,l,d);break;case 13:zn(n,s,l,d);break;case 23:break;case 22:b=s.stateNode,A=s.alternate,s.memoizedState!==null?b._visibility&2?zn(n,s,l,d):lo(n,s):b._visibility&2?zn(n,s,l,d):(b._visibility|=2,Va(n,s,l,d,(s.subtreeFlags&10256)!==0||!1)),m&2048&&ph(A,s);break;case 24:zn(n,s,l,d),m&2048&&mh(s.alternate,s);break;default:zn(n,s,l,d)}}function Va(n,s,l,d,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=n,A=s,C=l,k=d,F=A.flags;switch(A.tag){case 0:case 11:case 15:Va(b,A,C,k,m),ro(8,A);break;case 23:break;case 22:var X=A.stateNode;A.memoizedState!==null?X._visibility&2?Va(b,A,C,k,m):lo(b,A):(X._visibility|=2,Va(b,A,C,k,m)),m&&F&2048&&ph(A.alternate,A);break;case 24:Va(b,A,C,k,m),m&&F&2048&&mh(A.alternate,A);break;default:Va(b,A,C,k,m)}s=s.sibling}}function lo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,d=s,m=d.flags;switch(d.tag){case 22:lo(l,d),m&2048&&ph(d.alternate,d);break;case 24:lo(l,d),m&2048&&mh(d.alternate,d);break;default:lo(l,d)}s=s.sibling}}var co=8192;function Ga(n,s,l){if(n.subtreeFlags&co)for(n=n.child;n!==null;)k0(n,s,l),n=n.sibling}function k0(n,s,l){switch(n.tag){case 26:Ga(n,s,l),n.flags&co&&n.memoizedState!==null&&hS(l,Fn,n.memoizedState,n.memoizedProps);break;case 5:Ga(n,s,l);break;case 3:case 4:var d=Fn;Fn=mc(n.stateNode.containerInfo),Ga(n,s,l),Fn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=co,co=16777216,Ga(n,s,l),co=d):Ga(n,s,l));break;default:Ga(n,s,l)}}function M0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function uo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Ct=d,O0(d,n)}M0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)L0(n),n=n.sibling}function L0(n){switch(n.tag){case 0:case 11:case 15:uo(n),n.flags&2048&&cs(9,n,n.return);break;case 3:uo(n);break;case 12:uo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,nc(n)):uo(n);break;default:uo(n)}}function nc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Ct=d,O0(d,n)}M0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:cs(8,s,s.return),nc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,nc(s));break;default:nc(s)}n=n.sibling}}function O0(n,s){for(;Ct!==null;){var l=Ct;switch(l.tag){case 0:case 11:case 15:cs(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Yr(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Ct=d;else e:for(l=n;Ct!==null;){d=Ct;var m=d.sibling,b=d.return;if(E0(d),d===l){Ct=null;break e}if(m!==null){m.return=b,Ct=m;break e}Ct=b}}}var CA={getCacheForType:function(n){var s=Ot(mt),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l},cacheSignal:function(){return Ot(mt).controller.signal}},RA=typeof WeakMap=="function"?WeakMap:Map,je=0,Xe=null,Ce=null,Ne=0,Ve=0,mn=null,us=!1,$a=!1,gh=!1,Mi=0,ct=0,ds=0,Zs=0,yh=0,gn=0,qa=0,ho=null,tn=null,bh=!1,ic=0,I0=0,sc=1/0,ac=null,hs=null,At=0,fs=null,Ya=null,Li=0,vh=0,xh=null,P0=null,fo=0,wh=null;function yn(){return(je&2)!==0&&Ne!==0?Ne&-Ne:P.T!==null?Ch():Zp()}function j0(){if(gn===0)if((Ne&536870912)===0||Me){var n=Ae;Ae<<=1,(Ae&3932160)===0&&(Ae=262144),gn=n}else gn=536870912;return n=fn.current,n!==null&&(n.flags|=32),gn}function nn(n,s,l){(n===Xe&&(Ve===2||Ve===9)||n.cancelPendingCommit!==null)&&(Wa(n,0),ps(n,Ne,gn,!1)),Lr(n,l),((je&2)===0||n!==Xe)&&(n===Xe&&((je&2)===0&&(Zs|=l),ct===4&&ps(n,Ne,gn,!1)),ii(n))}function B0(n,s,l){if((je&6)!==0)throw Error(i(327));var d=!l&&(s&127)===0&&(s&n.expiredLanes)===0||Xt(n,s),m=d?kA(n,s):Sh(n,s,!0),b=d;do{if(m===0){$a&&!d&&ps(n,s,0,!1);break}else{if(l=n.current.alternate,b&&!NA(l)){m=Sh(n,s,!1),b=!1;continue}if(m===2){if(b=s,n.errorRecoveryDisabledLanes&b)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var C=n;m=ho;var k=C.current.memoizedState.isDehydrated;if(k&&(Wa(C,A).flags|=256),A=Sh(C,A,!1),A!==2){if(gh&&!k){C.errorRecoveryDisabledLanes|=b,Zs|=b,m=4;break e}b=tn,tn=m,b!==null&&(tn===null?tn=b:tn.push.apply(tn,b))}m=A}if(b=!1,m!==2)continue}}if(m===1){Wa(n,0),ps(n,s,0,!0);break}e:{switch(d=n,b=m,b){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ps(d,s,gn,!us);break e;case 2:tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=ic+300-Bt(),10<m)){if(ps(d,s,gn,!us),_t(d,0,!0)!==0)break e;Li=s,d.timeoutHandle=my(U0.bind(null,d,l,tn,ac,bh,s,gn,Zs,qa,us,b,"Throttled",-0,0),m);break e}U0(d,l,tn,ac,bh,s,gn,Zs,qa,us,b,null,-0,0)}}break}while(!0);ii(n)}function U0(n,s,l,d,m,b,A,C,k,F,X,Q,z,V){if(n.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bi},k0(s,b,Q);var se=(b&62914560)===b?ic-Bt():(b&4194048)===b?I0-Bt():0;if(se=fS(Q,se),se!==null){Li=b,n.cancelPendingCommit=se(Y0.bind(null,n,s,b,l,d,m,A,C,k,X,Q,null,z,V)),ps(n,b,A,!F);return}}Y0(n,s,b,l,d,m,A,C,k)}function NA(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var m=l[d],b=m.getSnapshot;m=m.value;try{if(!dn(b(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s,l,d){s&=~yh,s&=~Zs,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var m=s;0<m;){var b=31-Ut(m),A=1<<b;d[b]=-1,m&=~A}l!==0&&Xp(n,l,s)}function rc(){return(je&6)===0?(po(0),!1):!0}function Ah(){if(Ce!==null){if(Ve===0)var n=Ce.return;else n=Ce,Ai=Vs=null,Bd(n),Ba=null,Xr=0,n=Ce;for(;n!==null;)g0(n.alternate,n),n=n.return;Ce=null}}function Wa(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,XA(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Li=0,Ah(),Xe=n,Ce=l=xi(n.current,null),Ne=s,Ve=0,mn=null,us=!1,$a=Xt(n,s),gh=!1,qa=gn=yh=Zs=ds=ct=0,tn=ho=null,bh=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var m=31-Ut(d),b=1<<m;s|=n[m],d&=~b}return Mi=s,Cl(),l}function F0(n,s){Se=null,P.H=io,s===ja||s===Il?(s=ng(),Ve=3):s===Td?(s=ng(),Ve=4):Ve=s===eh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mn=s,Ce===null&&(ct=1,Xl(n,Rn(s,n.current)))}function z0(){var n=fn.current;return n===null?!0:(Ne&4194048)===Ne?Mn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?n===Mn:!1}function H0(){var n=P.H;return P.H=io,n===null?io:n}function V0(){var n=P.A;return P.A=CA,n}function oc(){ct=4,us||(Ne&4194048)!==Ne&&fn.current!==null||($a=!0),(ds&134217727)===0&&(Zs&134217727)===0||Xe===null||ps(Xe,Ne,gn,!1)}function Sh(n,s,l){var d=je;je|=2;var m=H0(),b=V0();(Xe!==n||Ne!==s)&&(ac=null,Wa(n,s)),s=!1;var A=ct;e:do try{if(Ve!==0&&Ce!==null){var C=Ce,k=mn;switch(Ve){case 8:Ah(),A=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(s=!0);var F=Ve;if(Ve=0,mn=null,Xa(n,C,k,F),l&&$a){A=0;break e}break;default:F=Ve,Ve=0,mn=null,Xa(n,C,k,F)}}DA(),A=ct;break}catch(X){F0(n,X)}while(!0);return s&&n.shellSuspendCounter++,Ai=Vs=null,je=d,P.H=m,P.A=b,Ce===null&&(Xe=null,Ne=0,Cl()),A}function DA(){for(;Ce!==null;)G0(Ce)}function kA(n,s){var l=je;je|=2;var d=H0(),m=V0();Xe!==n||Ne!==s?(ac=null,sc=Bt()+500,Wa(n,s)):$a=Xt(n,s);e:do try{if(Ve!==0&&Ce!==null){s=Ce;var b=mn;t:switch(Ve){case 1:Ve=0,mn=null,Xa(n,s,b,1);break;case 2:case 9:if(eg(b)){Ve=0,mn=null,$0(s);break}s=function(){Ve!==2&&Ve!==9||Xe!==n||(Ve=7),ii(n)},b.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:eg(b)?(Ve=0,mn=null,$0(s)):(Ve=0,mn=null,Xa(n,s,b,7));break;case 5:var A=null;switch(Ce.tag){case 26:A=Ce.memoizedState;case 5:case 27:var C=Ce;if(A?Dy(A):C.stateNode.complete){Ve=0,mn=null;var k=C.sibling;if(k!==null)Ce=k;else{var F=C.return;F!==null?(Ce=F,lc(F)):Ce=null}break t}}Ve=0,mn=null,Xa(n,s,b,5);break;case 6:Ve=0,mn=null,Xa(n,s,b,6);break;case 8:Ah(),ct=6;break e;default:throw Error(i(462))}}MA();break}catch(X){F0(n,X)}while(!0);return Ai=Vs=null,P.H=d,P.A=m,je=l,Ce!==null?0:(Xe=null,Ne=0,Cl(),ct)}function MA(){for(;Ce!==null&&!pa();)G0(Ce)}function G0(n){var s=p0(n.alternate,n,Mi);n.memoizedProps=n.pendingProps,s===null?lc(n):Ce=s}function $0(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=l0(l,s,s.pendingProps,s.type,void 0,Ne);break;case 11:s=l0(l,s,s.pendingProps,s.type.render,s.ref,Ne);break;case 5:Bd(s);default:g0(l,s),s=Ce=Vm(s,Mi),s=p0(l,s,Mi)}n.memoizedProps=n.pendingProps,s===null?lc(n):Ce=s}function Xa(n,s,l,d){Ai=Vs=null,Bd(s),Ba=null,Xr=0;var m=s.return;try{if(xA(n,m,s,l,Ne)){ct=1,Xl(n,Rn(l,n.current)),Ce=null;return}}catch(b){if(m!==null)throw Ce=m,b;ct=1,Xl(n,Rn(l,n.current)),Ce=null;return}s.flags&32768?(Me||d===1?n=!0:$a||(Ne&536870912)!==0?n=!1:(us=n=!0,(d===2||d===9||d===3||d===6)&&(d=fn.current,d!==null&&d.tag===13&&(d.flags|=16384))),q0(s,n)):lc(s)}function lc(n){var s=n;do{if((s.flags&32768)!==0){q0(s,us);return}n=s.return;var l=SA(s.alternate,s,Mi);if(l!==null){Ce=l;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=n}while(s!==null);ct===0&&(ct=5)}function q0(n,s){do{var l=EA(n.alternate,n);if(l!==null){l.flags&=32767,Ce=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Ce=n;return}Ce=n=l}while(n!==null);ct=6,Ce=null}function Y0(n,s,l,d,m,b,A,C,k){n.cancelPendingCommit=null;do cc();while(At!==0);if((je&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(b=s.lanes|s.childLanes,b|=dd,dw(n,l,b,A,C,k),n===Xe&&(Ce=Xe=null,Ne=0),Ya=s,fs=n,Li=l,vh=b,xh=m,P0=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,PA(ma,function(){return Z0(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,m=G.p,G.p=2,A=je,je|=4;try{_A(n,s,l)}finally{je=A,G.p=m,P.T=d}}At=1,W0(),X0(),K0()}}function W0(){if(At===1){At=0;var n=fs,s=Ya,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=P.T,P.T=null;var d=G.p;G.p=2;var m=je;je|=4;try{R0(s,n);var b=Ih,A=Om(n.containerInfo),C=b.focusedElem,k=b.selectionRange;if(A!==C&&C&&C.ownerDocument&&Lm(C.ownerDocument.documentElement,C)){if(k!==null&&rd(C)){var F=k.start,X=k.end;if(X===void 0&&(X=F),"selectionStart"in C)C.selectionStart=F,C.selectionEnd=Math.min(X,C.value.length);else{var Q=C.ownerDocument||document,z=Q&&Q.defaultView||window;if(z.getSelection){var V=z.getSelection(),se=C.textContent.length,pe=Math.min(k.start,se),Ye=k.end===void 0?pe:Math.min(k.end,se);!V.extend&&pe>Ye&&(A=Ye,Ye=pe,pe=A);var B=Mm(C,pe),I=Mm(C,Ye);if(B&&I&&(V.rangeCount!==1||V.anchorNode!==B.node||V.anchorOffset!==B.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var U=Q.createRange();U.setStart(B.node,B.offset),V.removeAllRanges(),pe>Ye?(V.addRange(U),V.extend(I.node,I.offset)):(U.setEnd(I.node,I.offset),V.addRange(U))}}}}for(Q=[],V=C;V=V.parentNode;)V.nodeType===1&&Q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<Q.length;C++){var K=Q[C];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}wc=!!Oh,Ih=Oh=null}finally{je=m,G.p=d,P.T=l}}n.current=s,At=2}}function X0(){if(At===2){At=0;var n=fs,s=Ya,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=P.T,P.T=null;var d=G.p;G.p=2;var m=je;je|=4;try{S0(n,s.alternate,s)}finally{je=m,G.p=d,P.T=l}}At=3}}function K0(){if(At===4||At===3){At=0,Lu();var n=fs,s=Ya,l=Li,d=P0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?At=5:(At=0,Ya=fs=null,Q0(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(hs=null),zu(l),s=s.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(Os,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=P.T,m=G.p,G.p=2,P.T=null;try{for(var b=n.onRecoverableError,A=0;A<d.length;A++){var C=d[A];b(C.value,{componentStack:C.stack})}}finally{P.T=s,G.p=m}}(Li&3)!==0&&cc(),ii(n),m=n.pendingLanes,(l&261930)!==0&&(m&42)!==0?n===wh?fo++:(fo=0,wh=n):fo=0,po(0)}}function Q0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Yr(s)))}function cc(){return W0(),X0(),K0(),Z0()}function Z0(){if(At!==5)return!1;var n=fs,s=vh;vh=0;var l=zu(Li),d=P.T,m=G.p;try{G.p=32>l?32:l,P.T=null,l=xh,xh=null;var b=fs,A=Li;if(At=0,Ya=fs=null,Li=0,(je&6)!==0)throw Error(i(331));var C=je;if(je|=4,L0(b.current),D0(b,b.current,A,l),je=C,po(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(Os,b)}catch{}return!0}finally{G.p=m,P.T=d,Q0(n,s)}}function J0(n,s,l){s=Rn(l,s),s=Jd(n.stateNode,s,2),n=rs(n,s,2),n!==null&&(Lr(n,2),ii(n))}function Ge(n,s,l){if(n.tag===3)J0(n,n,l);else for(;s!==null;){if(s.tag===3){J0(s,n,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(hs===null||!hs.has(d))){n=Rn(l,n),l=e0(2),d=rs(s,l,2),d!==null&&(t0(l,d,s,n),Lr(d,2),ii(d));break}}s=s.return}}function Eh(n,s,l){var d=n.pingCache;if(d===null){d=n.pingCache=new RA;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(l)||(gh=!0,m.add(l),n=LA.bind(null,n,s,l),s.then(n,n))}function LA(n,s,l){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Xe===n&&(Ne&l)===l&&(ct===4||ct===3&&(Ne&62914560)===Ne&&300>Bt()-ic?(je&2)===0&&Wa(n,0):yh|=l,qa===Ne&&(qa=0)),ii(n)}function ey(n,s){s===0&&(s=En()),n=Fs(n,s),n!==null&&(Lr(n,s),ii(n))}function OA(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),ey(n,l)}function IA(n,s){var l=0;switch(n.tag){case 31:case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),ey(n,l)}function PA(n,s){return Dr(n,s)}var uc=null,Ka=null,_h=!1,dc=!1,Th=!1,ms=0;function ii(n){n!==Ka&&n.next===null&&(Ka===null?uc=Ka=n:Ka=Ka.next=n),dc=!0,_h||(_h=!0,BA())}function po(n,s){if(!Th&&dc){Th=!0;do for(var l=!1,d=uc;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var b=0;else{var A=d.suspendedLanes,C=d.pingedLanes;b=(1<<31-Ut(42|n)+1)-1,b&=m&~(A&~C),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,sy(d,b))}else b=Ne,b=_t(d,d===Xe?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Xt(d,b)||(l=!0,sy(d,b));d=d.next}while(l);Th=!1}}function jA(){ty()}function ty(){dc=_h=!1;var n=0;ms!==0&&WA()&&(n=ms);for(var s=Bt(),l=null,d=uc;d!==null;){var m=d.next,b=ny(d,s);b===0?(d.next=null,l===null?uc=m:l.next=m,m===null&&(Ka=l)):(l=d,(n!==0||(b&3)!==0)&&(dc=!0)),d=m}At!==0&&At!==5||po(n),ms!==0&&(ms=0)}function ny(n,s){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var A=31-Ut(b),C=1<<A,k=m[A];k===-1?((C&l)===0||(C&d)!==0)&&(m[A]=Is(C,s)):k<=s&&(n.expiredLanes|=C),b&=~C}if(s=Xe,l=Ne,l=_t(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===s&&(Ve===2||Ve===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&kr(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Xt(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(d!==null&&kr(d),zu(l)){case 2:case 8:l=Mr;break;case 32:l=ma;break;case 268435456:l=Ou;break;default:l=ma}return d=iy.bind(null,n),l=Dr(l,d),n.callbackPriority=s,n.callbackNode=l,s}return d!==null&&d!==null&&kr(d),n.callbackPriority=2,n.callbackNode=null,2}function iy(n,s){if(At!==0&&At!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(cc()&&n.callbackNode!==l)return null;var d=Ne;return d=_t(n,n===Xe?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(B0(n,d,s),ny(n,Bt()),n.callbackNode!=null&&n.callbackNode===l?iy.bind(null,n):null)}function sy(n,s){if(cc())return null;B0(n,s,!0)}function BA(){KA(function(){(je&6)!==0?Dr(fl,jA):ty()})}function Ch(){if(ms===0){var n=Ia;n===0&&(n=ga,ga<<=1,(ga&261888)===0&&(ga=256)),ms=n}return ms}function ay(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:vl(""+n)}function ry(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function UA(n,s,l,d,m){if(s==="submit"&&l&&l.stateNode===m){var b=ay((m[Kt]||null).action),A=d.submitter;A&&(s=(s=A[Kt]||null)?ay(s.formAction):A.getAttribute("formAction"),s!==null&&(b=s,A=null));var C=new Sl("action","action",null,d,m);n.push({event:C,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ms!==0){var k=A?ry(m,A):new FormData(m);Yd(l,{pending:!0,data:k,method:m.method,action:b},null,k)}}else typeof b=="function"&&(C.preventDefault(),k=A?ry(m,A):new FormData(m),Yd(l,{pending:!0,data:k,method:m.method,action:b},b,k))},currentTarget:m}]})}}for(var Rh=0;Rh<ud.length;Rh++){var Nh=ud[Rh],FA=Nh.toLowerCase(),zA=Nh[0].toUpperCase()+Nh.slice(1);Un(FA,"on"+zA)}Un(jm,"onAnimationEnd"),Un(Bm,"onAnimationIteration"),Un(Um,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(iA,"onTransitionRun"),Un(sA,"onTransitionStart"),Un(aA,"onTransitionCancel"),Un(Fm,"onTransitionEnd"),wa("onMouseEnter",["mouseout","mouseover"]),wa("onMouseLeave",["mouseout","mouseover"]),wa("onPointerEnter",["pointerout","pointerover"]),wa("onPointerLeave",["pointerout","pointerover"]),Ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ps("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mo));function oy(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var b=void 0;if(s)for(var A=d.length-1;0<=A;A--){var C=d[A],k=C.instance,F=C.currentTarget;if(C=C.listener,k!==b&&m.isPropagationStopped())break e;b=C,m.currentTarget=F;try{b(m)}catch(X){Tl(X)}m.currentTarget=null,b=k}else for(A=0;A<d.length;A++){if(C=d[A],k=C.instance,F=C.currentTarget,C=C.listener,k!==b&&m.isPropagationStopped())break e;b=C,m.currentTarget=F;try{b(m)}catch(X){Tl(X)}m.currentTarget=null,b=k}}}}function Re(n,s){var l=s[Hu];l===void 0&&(l=s[Hu]=new Set);var d=n+"__bubble";l.has(d)||(ly(s,n,2,!1),l.add(d))}function Dh(n,s,l){var d=0;s&&(d|=4),ly(l,n,d,s)}var hc="_reactListening"+Math.random().toString(36).slice(2);function kh(n){if(!n[hc]){n[hc]=!0,tm.forEach(function(l){l!=="selectionchange"&&(HA.has(l)||Dh(l,!1,n),Dh(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[hc]||(s[hc]=!0,Dh("selectionchange",!1,s))}}function ly(n,s,l,d){switch(jy(s)){case 2:var m=gS;break;case 8:m=yS;break;default:m=qh}l=m.bind(null,s,l,n),m=void 0,!Qu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(s,l,{capture:!0,passive:m}):n.addEventListener(s,l,!0):m!==void 0?n.addEventListener(s,l,{passive:m}):n.addEventListener(s,l,!1)}function Mh(n,s,l,d,m){var b=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var C=d.stateNode.containerInfo;if(C===m)break;if(A===4)for(A=d.return;A!==null;){var k=A.tag;if((k===3||k===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;C!==null;){if(A=ba(C),A===null)return;if(k=A.tag,k===5||k===6||k===26||k===27){d=b=A;continue e}C=C.parentNode}}d=d.return}fm(function(){var F=b,X=Xu(l),Q=[];e:{var z=zm.get(n);if(z!==void 0){var V=Sl,se=n;switch(n){case"keypress":if(wl(l)===0)break e;case"keydown":case"keyup":V=Iw;break;case"focusin":se="focus",V=td;break;case"focusout":se="blur",V=td;break;case"beforeblur":case"afterblur":V=td;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=gm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Sw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Bw;break;case jm:case Bm:case Um:V=Tw;break;case Fm:V=Fw;break;case"scroll":case"scrollend":V=ww;break;case"wheel":V=Hw;break;case"copy":case"cut":case"paste":V=Rw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=bm;break;case"toggle":case"beforetoggle":V=Gw}var pe=(s&4)!==0,Ye=!pe&&(n==="scroll"||n==="scrollend"),B=pe?z!==null?z+"Capture":null:z;pe=[];for(var I=F,U;I!==null;){var K=I;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||B===null||(K=Pr(I,B),K!=null&&pe.push(go(I,K,U))),Ye)break;I=I.return}0<pe.length&&(z=new V(z,se,null,l,X),Q.push({event:z,listeners:pe}))}}if((s&7)===0){e:{if(z=n==="mouseover"||n==="pointerover",V=n==="mouseout"||n==="pointerout",z&&l!==Wu&&(se=l.relatedTarget||l.fromElement)&&(ba(se)||se[ya]))break e;if((V||z)&&(z=X.window===X?X:(z=X.ownerDocument)?z.defaultView||z.parentWindow:window,V?(se=l.relatedTarget||l.toElement,V=F,se=se?ba(se):null,se!==null&&(Ye=o(se),pe=se.tag,se!==Ye||pe!==5&&pe!==27&&pe!==6)&&(se=null)):(V=null,se=F),V!==se)){if(pe=gm,K="onMouseLeave",B="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(pe=bm,K="onPointerLeave",B="onPointerEnter",I="pointer"),Ye=V==null?z:Ir(V),U=se==null?z:Ir(se),z=new pe(K,I+"leave",V,l,X),z.target=Ye,z.relatedTarget=U,K=null,ba(X)===F&&(pe=new pe(B,I+"enter",se,l,X),pe.target=U,pe.relatedTarget=Ye,K=pe),Ye=K,V&&se)t:{for(pe=VA,B=V,I=se,U=0,K=B;K;K=pe(K))U++;K=0;for(var le=I;le;le=pe(le))K++;for(;0<U-K;)B=pe(B),U--;for(;0<K-U;)I=pe(I),K--;for(;U--;){if(B===I||I!==null&&B===I.alternate){pe=B;break t}B=pe(B),I=pe(I)}pe=null}else pe=null;V!==null&&cy(Q,z,V,pe,!1),se!==null&&Ye!==null&&cy(Q,Ye,se,pe,!0)}}e:{if(z=F?Ir(F):window,V=z.nodeName&&z.nodeName.toLowerCase(),V==="select"||V==="input"&&z.type==="file")var Oe=Tm;else if(Em(z))if(Cm)Oe=eA;else{Oe=Zw;var ae=Qw}else V=z.nodeName,!V||V.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?F&&Yu(F.elementType)&&(Oe=Tm):Oe=Jw;if(Oe&&(Oe=Oe(n,F))){_m(Q,Oe,l,X);break e}ae&&ae(n,z,F),n==="focusout"&&F&&z.type==="number"&&F.memoizedProps.value!=null&&qu(z,"number",z.value)}switch(ae=F?Ir(F):window,n){case"focusin":(Em(ae)||ae.contentEditable==="true")&&(Ca=ae,od=F,Gr=null);break;case"focusout":Gr=od=Ca=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,Im(Q,l,X);break;case"selectionchange":if(nA)break;case"keydown":case"keyup":Im(Q,l,X)}var Ee;if(id)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ta?Am(n,l)&&(De="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(vm&&l.locale!=="ko"&&(Ta||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ta&&(Ee=pm()):(Ji=X,Zu="value"in Ji?Ji.value:Ji.textContent,Ta=!0)),ae=fc(F,De),0<ae.length&&(De=new ym(De,n,null,l,X),Q.push({event:De,listeners:ae}),Ee?De.data=Ee:(Ee=Sm(l),Ee!==null&&(De.data=Ee)))),(Ee=qw?Yw(n,l):Ww(n,l))&&(De=fc(F,"onBeforeInput"),0<De.length&&(ae=new ym("onBeforeInput","beforeinput",null,l,X),Q.push({event:ae,listeners:De}),ae.data=Ee)),UA(Q,n,F,l,X)}oy(Q,s)})}function go(n,s,l){return{instance:n,listener:s,currentTarget:l}}function fc(n,s){for(var l=s+"Capture",d=[];n!==null;){var m=n,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=Pr(n,l),m!=null&&d.unshift(go(n,m,b)),m=Pr(n,s),m!=null&&d.push(go(n,m,b))),n.tag===3)return d;n=n.return}return[]}function VA(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function cy(n,s,l,d,m){for(var b=s._reactName,A=[];l!==null&&l!==d;){var C=l,k=C.alternate,F=C.stateNode;if(C=C.tag,k!==null&&k===d)break;C!==5&&C!==26&&C!==27||F===null||(k=F,m?(F=Pr(l,b),F!=null&&A.unshift(go(l,F,k))):m||(F=Pr(l,b),F!=null&&A.push(go(l,F,k)))),l=l.return}A.length!==0&&n.push({event:s,listeners:A})}var GA=/\r\n?/g,$A=/\u0000|\uFFFD/g;function uy(n){return(typeof n=="string"?n:""+n).replace(GA,`
`).replace($A,"")}function dy(n,s){return s=uy(s),uy(n)===s}function qe(n,s,l,d,m,b){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Sa(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Sa(n,""+d);break;case"className":yl(n,"class",d);break;case"tabIndex":yl(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":yl(n,l,d);break;case"style":dm(n,d,b);break;case"data":if(s!=="object"){yl(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=vl(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(s!=="input"&&qe(n,s,"name",m.name,m,null),qe(n,s,"formEncType",m.formEncType,m,null),qe(n,s,"formMethod",m.formMethod,m,null),qe(n,s,"formTarget",m.formTarget,m,null)):(qe(n,s,"encType",m.encType,m,null),qe(n,s,"method",m.method,m,null),qe(n,s,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=vl(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=bi);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=vl(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":Re("beforetoggle",n),Re("toggle",n),gl(n,"popover",d);break;case"xlinkActuate":yi(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":yi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":yi(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":yi(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":yi(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":yi(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":yi(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":yi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":yi(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":gl(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vw.get(l)||l,gl(n,l,d))}}function Lh(n,s,l,d,m,b){switch(l){case"style":dm(n,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof d=="string"?Sa(n,d):(typeof d=="number"||typeof d=="bigint")&&Sa(n,""+d);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"onClick":d!=null&&(n.onclick=bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nm.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),b=n[Kt]||null,b=b!=null?b[l]:null,typeof b=="function"&&n.removeEventListener(s,b,m),typeof d=="function")){typeof b!="function"&&b!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,d,m);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):gl(n,l,d)}}}function Pt(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",n),Re("load",n);var d=!1,m=!1,b;for(b in l)if(l.hasOwnProperty(b)){var A=l[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(n,s,b,A,l,null)}}m&&qe(n,s,"srcSet",l.srcSet,l,null),d&&qe(n,s,"src",l.src,l,null);return;case"input":Re("invalid",n);var C=b=A=m=null,k=null,F=null;for(d in l)if(l.hasOwnProperty(d)){var X=l[d];if(X!=null)switch(d){case"name":m=X;break;case"type":A=X;break;case"checked":k=X;break;case"defaultChecked":F=X;break;case"value":b=X;break;case"defaultValue":C=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:qe(n,s,d,X,l,null)}}om(n,b,C,k,F,A,m,!1);return;case"select":Re("invalid",n),d=A=b=null;for(m in l)if(l.hasOwnProperty(m)&&(C=l[m],C!=null))switch(m){case"value":b=C;break;case"defaultValue":A=C;break;case"multiple":d=C;default:qe(n,s,m,C,l,null)}s=b,l=A,n.multiple=!!d,s!=null?Aa(n,!!d,s,!1):l!=null&&Aa(n,!!d,l,!0);return;case"textarea":Re("invalid",n),b=m=d=null;for(A in l)if(l.hasOwnProperty(A)&&(C=l[A],C!=null))switch(A){case"value":d=C;break;case"defaultValue":m=C;break;case"children":b=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:qe(n,s,A,C,l,null)}cm(n,d,m,b);return;case"option":for(k in l)l.hasOwnProperty(k)&&(d=l[k],d!=null)&&(k==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":qe(n,s,k,d,l,null));return;case"dialog":Re("beforetoggle",n),Re("toggle",n),Re("cancel",n),Re("close",n);break;case"iframe":case"object":Re("load",n);break;case"video":case"audio":for(d=0;d<mo.length;d++)Re(mo[d],n);break;case"image":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"embed":case"source":case"link":Re("error",n),Re("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(d=l[F],d!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(n,s,F,d,l,null)}return;default:if(Yu(s)){for(X in l)l.hasOwnProperty(X)&&(d=l[X],d!==void 0&&Lh(n,s,X,d,l,void 0));return}}for(C in l)l.hasOwnProperty(C)&&(d=l[C],d!=null&&qe(n,s,C,d,l,null))}function qA(n,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,A=null,C=null,k=null,F=null,X=null;for(V in l){var Q=l[V];if(l.hasOwnProperty(V)&&Q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":k=Q;default:d.hasOwnProperty(V)||qe(n,s,V,null,d,Q)}}for(var z in d){var V=d[z];if(Q=l[z],d.hasOwnProperty(z)&&(V!=null||Q!=null))switch(z){case"type":b=V;break;case"name":m=V;break;case"checked":F=V;break;case"defaultChecked":X=V;break;case"value":A=V;break;case"defaultValue":C=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,s));break;default:V!==Q&&qe(n,s,z,V,d,Q)}}$u(n,A,C,k,F,X,b,m);return;case"select":V=A=C=z=null;for(b in l)if(k=l[b],l.hasOwnProperty(b)&&k!=null)switch(b){case"value":break;case"multiple":V=k;default:d.hasOwnProperty(b)||qe(n,s,b,null,d,k)}for(m in d)if(b=d[m],k=l[m],d.hasOwnProperty(m)&&(b!=null||k!=null))switch(m){case"value":z=b;break;case"defaultValue":C=b;break;case"multiple":A=b;default:b!==k&&qe(n,s,m,b,d,k)}s=C,l=A,d=V,z!=null?Aa(n,!!l,z,!1):!!d!=!!l&&(s!=null?Aa(n,!!l,s,!0):Aa(n,!!l,l?[]:"",!1));return;case"textarea":V=z=null;for(C in l)if(m=l[C],l.hasOwnProperty(C)&&m!=null&&!d.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:qe(n,s,C,null,d,m)}for(A in d)if(m=d[A],b=l[A],d.hasOwnProperty(A)&&(m!=null||b!=null))switch(A){case"value":z=m;break;case"defaultValue":V=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==b&&qe(n,s,A,m,d,b)}lm(n,z,V);return;case"option":for(var se in l)z=l[se],l.hasOwnProperty(se)&&z!=null&&!d.hasOwnProperty(se)&&(se==="selected"?n.selected=!1:qe(n,s,se,null,d,z));for(k in d)z=d[k],V=l[k],d.hasOwnProperty(k)&&z!==V&&(z!=null||V!=null)&&(k==="selected"?n.selected=z&&typeof z!="function"&&typeof z!="symbol":qe(n,s,k,z,d,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in l)z=l[pe],l.hasOwnProperty(pe)&&z!=null&&!d.hasOwnProperty(pe)&&qe(n,s,pe,null,d,z);for(F in d)if(z=d[F],V=l[F],d.hasOwnProperty(F)&&z!==V&&(z!=null||V!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:qe(n,s,F,z,d,V)}return;default:if(Yu(s)){for(var Ye in l)z=l[Ye],l.hasOwnProperty(Ye)&&z!==void 0&&!d.hasOwnProperty(Ye)&&Lh(n,s,Ye,void 0,d,z);for(X in d)z=d[X],V=l[X],!d.hasOwnProperty(X)||z===V||z===void 0&&V===void 0||Lh(n,s,X,z,d,V);return}}for(var B in l)z=l[B],l.hasOwnProperty(B)&&z!=null&&!d.hasOwnProperty(B)&&qe(n,s,B,null,d,z);for(Q in d)z=d[Q],V=l[Q],!d.hasOwnProperty(Q)||z===V||z==null&&V==null||qe(n,s,Q,z,d,V)}function hy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var m=l[d],b=m.transferSize,A=m.initiatorType,C=m.duration;if(b&&C&&hy(A)){for(A=0,C=m.responseEnd,d+=1;d<l.length;d++){var k=l[d],F=k.startTime;if(F>C)break;var X=k.transferSize,Q=k.initiatorType;X&&hy(Q)&&(k=k.responseEnd,A+=X*(k<C?1:(C-F)/(k-F)))}if(--d,s+=8*(b+A)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Oh=null,Ih=null;function pc(n){return n.nodeType===9?n:n.ownerDocument}function fy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function py(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ph(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var jh=null;function WA(){var n=window.event;return n&&n.type==="popstate"?n===jh?!1:(jh=n,!0):(jh=null,!1)}var my=typeof setTimeout=="function"?setTimeout:void 0,XA=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,KA=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(n){return gy.resolve(null).then(n).catch(QA)}:my;function QA(n){setTimeout(function(){throw n})}function gs(n){return n==="head"}function yy(n,s){var l=s,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(d===0){n.removeChild(m),er(s);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")yo(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,yo(l);for(var b=l.firstChild;b;){var A=b.nextSibling,C=b.nodeName;b[Or]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=A}}else l==="body"&&yo(n.ownerDocument.body);l=m}while(l);er(s)}function by(n,s){var l=n;n=0;do{var d=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=d}while(l)}function Bh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Bh(l),Vu(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function ZA(n,s,l,d){for(;n.nodeType===1;){var m=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Or])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=Ln(n.nextSibling),n===null)break}return null}function JA(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ln(n.nextSibling),n===null))return null;return n}function vy(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ln(n.nextSibling),n===null))return null;return n}function Uh(n){return n.data==="$?"||n.data==="$~"}function Fh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function eS(n,s){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||l.readyState!=="loading")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function Ln(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var zh=null;function xy(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(s===0)return Ln(n.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}n=n.nextSibling}return null}function wy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return n;s--}else l!=="/$"&&l!=="/&"||s++}n=n.previousSibling}return null}function Ay(n,s,l){switch(s=pc(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function yo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Vu(n)}var On=new Map,Sy=new Set;function mc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Oi=G.d;G.d={f:tS,r:nS,D:iS,C:sS,L:aS,m:rS,X:lS,S:oS,M:cS};function tS(){var n=Oi.f(),s=rc();return n||s}function nS(n){var s=va(n);s!==null&&s.tag===5&&s.type==="form"?Fg(s):Oi.r(n)}var Qa=typeof document>"u"?null:document;function Ey(n,s,l){var d=Qa;if(d&&typeof s=="string"&&s){var m=Tn(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Sy.has(m)||(Sy.add(m),n={rel:n,crossOrigin:l,href:s},d.querySelector(m)===null&&(s=d.createElement("link"),Pt(s,"link",n),Tt(s),d.head.appendChild(s)))}}function iS(n){Oi.D(n),Ey("dns-prefetch",n,null)}function sS(n,s){Oi.C(n,s),Ey("preconnect",n,s)}function aS(n,s,l){Oi.L(n,s,l);var d=Qa;if(d&&n&&s){var m='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Tn(l.imageSizes)+'"]')):m+='[href="'+Tn(n)+'"]';var b=m;switch(s){case"style":b=Za(n);break;case"script":b=Ja(n)}On.has(b)||(n=g({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),On.set(b,n),d.querySelector(m)!==null||s==="style"&&d.querySelector(bo(b))||s==="script"&&d.querySelector(vo(b))||(s=d.createElement("link"),Pt(s,"link",n),Tt(s),d.head.appendChild(s)))}}function rS(n,s){Oi.m(n,s);var l=Qa;if(l&&n){var d=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(n)+'"]',b=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Ja(n)}if(!On.has(b)&&(n=g({rel:"modulepreload",href:n},s),On.set(b,n),l.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(vo(b)))return}d=l.createElement("link"),Pt(d,"link",n),Tt(d),l.head.appendChild(d)}}}function oS(n,s,l){Oi.S(n,s,l);var d=Qa;if(d&&n){var m=xa(d).hoistableStyles,b=Za(n);s=s||"default";var A=m.get(b);if(!A){var C={loading:0,preload:null};if(A=d.querySelector(bo(b)))C.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":s},l),(l=On.get(b))&&Hh(n,l);var k=A=d.createElement("link");Tt(k),Pt(k,"link",n),k._p=new Promise(function(F,X){k.onload=F,k.onerror=X}),k.addEventListener("load",function(){C.loading|=1}),k.addEventListener("error",function(){C.loading|=2}),C.loading|=4,gc(A,s,d)}A={type:"stylesheet",instance:A,count:1,state:C},m.set(b,A)}}}function lS(n,s){Oi.X(n,s);var l=Qa;if(l&&n){var d=xa(l).hoistableScripts,m=Ja(n),b=d.get(m);b||(b=l.querySelector(vo(m)),b||(n=g({src:n,async:!0},s),(s=On.get(m))&&Vh(n,s),b=l.createElement("script"),Tt(b),Pt(b,"link",n),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function cS(n,s){Oi.M(n,s);var l=Qa;if(l&&n){var d=xa(l).hoistableScripts,m=Ja(n),b=d.get(m);b||(b=l.querySelector(vo(m)),b||(n=g({src:n,async:!0,type:"module"},s),(s=On.get(m))&&Vh(n,s),b=l.createElement("script"),Tt(b),Pt(b,"link",n),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function _y(n,s,l,d){var m=(m=ye.current)?mc(m):null;if(!m)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Za(l.href),l=xa(m).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Za(l.href);var b=xa(m).hoistableStyles,A=b.get(n);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,A),(b=m.querySelector(bo(n)))&&!b._p&&(A.instance=b,A.state.loading=5),On.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},On.set(n,l),b||uS(m,n,l,A.state))),s&&d===null)throw Error(i(528,""));return A}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ja(l),l=xa(m).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Za(n){return'href="'+Tn(n)+'"'}function bo(n){return'link[rel="stylesheet"]['+n+"]"}function Ty(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function uS(n,s,l,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Pt(s,"link",l),Tt(s),n.head.appendChild(s))}function Ja(n){return'[src="'+Tn(n)+'"]'}function vo(n){return"script[async]"+n}function Cy(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(d)return s.instance=d,Tt(d),d;var m=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Tt(d),Pt(d,"style",m),gc(d,l.precedence,n),s.instance=d;case"stylesheet":m=Za(l.href);var b=n.querySelector(bo(m));if(b)return s.state.loading|=4,s.instance=b,Tt(b),b;d=Ty(l),(m=On.get(m))&&Hh(d,m),b=(n.ownerDocument||n).createElement("link"),Tt(b);var A=b;return A._p=new Promise(function(C,k){A.onload=C,A.onerror=k}),Pt(b,"link",d),s.state.loading|=4,gc(b,l.precedence,n),s.instance=b;case"script":return b=Ja(l.src),(m=n.querySelector(vo(b)))?(s.instance=m,Tt(m),m):(d=l,(m=On.get(b))&&(d=g({},l),Vh(d,m)),n=n.ownerDocument||n,m=n.createElement("script"),Tt(m),Pt(m,"link",d),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,gc(d,l.precedence,n));return s.instance}function gc(n,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,b=m,A=0;A<d.length;A++){var C=d[A];if(C.dataset.precedence===s)b=C;else if(b!==m)break}b?b.parentNode.insertBefore(n,b.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function Hh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Vh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var yc=null;function Ry(n,s,l){if(yc===null){var d=new Map,m=yc=new Map;m.set(l,d)}else m=yc,d=m.get(l),d||(d=new Map,m.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),m=0;m<l.length;m++){var b=l[m];if(!(b[Or]||b[Mt]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(s)||"";A=n+A;var C=d.get(A);C?C.push(b):d.set(A,[b])}}return d}function Ny(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function dS(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Dy(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function hS(n,s,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Za(d.href),b=s.querySelector(bo(m));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=bc.bind(n),s.then(n,n)),l.state.loading|=4,l.instance=b,Tt(b);return}b=s.ownerDocument||s,d=Ty(d),(m=On.get(m))&&Hh(d,m),b=b.createElement("link"),Tt(b);var A=b;A._p=new Promise(function(C,k){A.onload=C,A.onerror=k}),Pt(b,"link",d),l.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=bc.bind(n),s.addEventListener("load",l),s.addEventListener("error",l))}}var Gh=0;function fS(n,s){return n.stylesheets&&n.count===0&&xc(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var d=setTimeout(function(){if(n.stylesheets&&xc(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+s);0<n.imgBytes&&Gh===0&&(Gh=62500*YA());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&xc(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>Gh?50:800)+s);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)xc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var vc=null;function xc(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,vc=new Map,s.forEach(pS,n),vc=null,bc.call(n))}function pS(n,s){if(!(s.state.loading&4)){var l=vc.get(n);if(l)var d=l.get(null);else{l=new Map,vc.set(n,l);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var A=m[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),d=A)}d&&l.set(null,d)}m=s.instance,A=m.getAttribute("data-precedence"),b=l.get(A)||d,b===d&&l.set(null,m),l.set(A,m),this.count++,d=bc.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),b?b.parentNode.insertBefore(m,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var xo={$$typeof:T,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function mS(n,s,l,d,m,b,A,C,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.hiddenUpdates=Uu(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function ky(n,s,l,d,m,b,A,C,k,F,X,Q){return n=new mS(n,s,l,A,k,F,X,Q,C),s=1,b===!0&&(s|=24),b=hn(3,null,null,s),n.current=b,b.stateNode=n,s=Sd(),s.refCount++,n.pooledCache=s,s.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:s},Cd(b),n}function My(n){return n?(n=Da,n):Da}function Ly(n,s,l,d,m,b){m=My(m),d.context===null?d.context=m:d.pendingContext=m,d=as(s),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=rs(n,d,s),l!==null&&(nn(l,n,s),Qr(l,n,s))}function Oy(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function $h(n,s){Oy(n,s),(n=n.alternate)&&Oy(n,s)}function Iy(n){if(n.tag===13||n.tag===31){var s=Fs(n,67108864);s!==null&&nn(s,n,67108864),$h(n,67108864)}}function Py(n){if(n.tag===13||n.tag===31){var s=yn();s=Fu(s);var l=Fs(n,s);l!==null&&nn(l,n,s),$h(n,s)}}var wc=!0;function gS(n,s,l,d){var m=P.T;P.T=null;var b=G.p;try{G.p=2,qh(n,s,l,d)}finally{G.p=b,P.T=m}}function yS(n,s,l,d){var m=P.T;P.T=null;var b=G.p;try{G.p=8,qh(n,s,l,d)}finally{G.p=b,P.T=m}}function qh(n,s,l,d){if(wc){var m=Yh(d);if(m===null)Mh(n,s,d,Ac,l),By(n,d);else if(vS(m,n,s,l,d))d.stopPropagation();else if(By(n,d),s&4&&-1<bS.indexOf(n)){for(;m!==null;){var b=va(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=Le(b.pendingLanes);if(A!==0){var C=b;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var k=1<<31-Ut(A);C.entanglements[1]|=k,A&=~k}ii(b),(je&6)===0&&(sc=Bt()+500,po(0))}}break;case 31:case 13:C=Fs(b,2),C!==null&&nn(C,b,2),rc(),$h(b,2)}if(b=Yh(d),b===null&&Mh(n,s,d,Ac,l),b===m)break;m=b}m!==null&&d.stopPropagation()}else Mh(n,s,d,null,l)}}function Yh(n){return n=Xu(n),Wh(n)}var Ac=null;function Wh(n){if(Ac=null,n=ba(n),n!==null){var s=o(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=c(s),n!==null)return n;n=null}else if(l===31){if(n=u(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ac=n,null}function jy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ls()){case fl:return 2;case Mr:return 8;case ma:case pl:return 32;case Ou:return 268435456;default:return 32}default:return 32}}var Xh=!1,ys=null,bs=null,vs=null,wo=new Map,Ao=new Map,xs=[],bS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(n,s){switch(n){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":wo.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ao.delete(s.pointerId)}}function So(n,s,l,d,m,b){return n===null||n.nativeEvent!==b?(n={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[m]},s!==null&&(s=va(s),s!==null&&Iy(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function vS(n,s,l,d,m){switch(s){case"focusin":return ys=So(ys,n,s,l,d,m),!0;case"dragenter":return bs=So(bs,n,s,l,d,m),!0;case"mouseover":return vs=So(vs,n,s,l,d,m),!0;case"pointerover":var b=m.pointerId;return wo.set(b,So(wo.get(b)||null,n,s,l,d,m)),!0;case"gotpointercapture":return b=m.pointerId,Ao.set(b,So(Ao.get(b)||null,n,s,l,d,m)),!0}return!1}function Uy(n){var s=ba(n.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){n.blockedOn=s,Jp(n.priority,function(){Py(l)});return}}else if(s===31){if(s=u(l),s!==null){n.blockedOn=s,Jp(n.priority,function(){Py(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Sc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Yh(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Wu=d,l.target.dispatchEvent(d),Wu=null}else return s=va(l),s!==null&&Iy(s),n.blockedOn=l,!1;s.shift()}return!0}function Fy(n,s,l){Sc(n)&&l.delete(s)}function xS(){Xh=!1,ys!==null&&Sc(ys)&&(ys=null),bs!==null&&Sc(bs)&&(bs=null),vs!==null&&Sc(vs)&&(vs=null),wo.forEach(Fy),Ao.forEach(Fy)}function Ec(n,s){n.blockedOn===s&&(n.blockedOn=null,Xh||(Xh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,xS)))}var _c=null;function zy(n){_c!==n&&(_c=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_c===n&&(_c=null);for(var s=0;s<n.length;s+=3){var l=n[s],d=n[s+1],m=n[s+2];if(typeof d!="function"){if(Wh(d||l)===null)continue;break}var b=va(l);b!==null&&(n.splice(s,3),s-=3,Yd(b,{pending:!0,data:m,method:l.method,action:d},d,m))}}))}function er(n){function s(k){return Ec(k,n)}ys!==null&&Ec(ys,n),bs!==null&&Ec(bs,n),vs!==null&&Ec(vs,n),wo.forEach(s),Ao.forEach(s);for(var l=0;l<xs.length;l++){var d=xs[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<xs.length&&(l=xs[0],l.blockedOn===null);)Uy(l),l.blockedOn===null&&xs.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var m=l[d],b=l[d+1],A=m[Kt]||null;if(typeof b=="function")A||zy(l);else if(A){var C=null;if(b&&b.hasAttribute("formAction")){if(m=b,A=b[Kt]||null)C=A.formAction;else if(Wh(m)!==null)continue}else C=A.action;typeof C=="function"?l[d+1]=C:(l.splice(d,3),d-=3),zy(l)}}}function Hy(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Kh(n){this._internalRoot=n}Tc.prototype.render=Kh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=yn();Ly(l,d,n,s,null,null)},Tc.prototype.unmount=Kh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Ly(n.current,2,null,n,null,null),rc(),s[ya]=null}};function Tc(n){this._internalRoot=n}Tc.prototype.unstable_scheduleHydration=function(n){if(n){var s=Zp();n={blockedOn:null,target:n,priority:s};for(var l=0;l<xs.length&&s!==0&&s<xs[l].priority;l++);xs.splice(l,0,n),l===0&&Uy(n)}};var Vy=e.version;if(Vy!=="19.2.4")throw Error(i(527,Vy,"19.2.4"));G.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var wS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{Os=Cc.inject(wS),Vt=Cc}catch{}}return _o.createRoot=function(n,s){if(!a(n))throw Error(i(299));var l=!1,d="",m=Kg,b=Qg,A=Zg;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=ky(n,1,!1,null,null,l,d,null,m,b,A,Hy),n[ya]=s.current,kh(n),new Kh(s)},_o.hydrateRoot=function(n,s,l){if(!a(n))throw Error(i(299));var d=!1,m="",b=Kg,A=Qg,C=Zg,k=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(C=l.onRecoverableError),l.formState!==void 0&&(k=l.formState)),s=ky(n,1,!0,s,l??null,d,m,k,b,A,C,Hy),s.context=My(null),l=s.current,d=yn(),d=Fu(d),m=as(d),m.callback=null,rs(l,m,d),l=d,s.current.lanes=l,Lr(s,l),ii(s),n[ya]=s.current,kh(n),new Tc(s)},_o.version="19.2.4",_o}var tb;function kS(){if(tb)return ef.exports;tb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ef.exports=DS(),ef.exports}var MS=kS();const LS=N1(MS);var nb="popstate";function OS(r={}){function e(i,a){let{pathname:o,search:c,hash:u}=i.location;return Df("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Ho(a)}return PS(e,t,null,r)}function nt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IS(){return Math.random().toString(36).substring(2,10)}function ib(r,e){return{usr:r.state,key:r.key,idx:e}}function Df(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?xr(e):e,state:t,key:e&&e.key||i||IS()}}function Ho({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function xr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function PS(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,u="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let E=p(),_=E==null?null:E-f;f=E,h&&h({action:u,location:w.location,delta:_})}function v(E,_){u="PUSH";let R=Df(w.location,E,_);f=p()+1;let T=ib(R,f),N=w.createHref(R);try{c.pushState(T,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(N)}o&&h&&h({action:u,location:w.location,delta:1})}function x(E,_){u="REPLACE";let R=Df(w.location,E,_);f=p();let T=ib(R,f),N=w.createHref(R);c.replaceState(T,"",N),o&&h&&h({action:u,location:w.location,delta:0})}function S(E){return jS(E)}let w={get action(){return u},get location(){return r(a,c)},listen(E){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(nb,g),h=E,()=>{a.removeEventListener(nb,g),h=null}},createHref(E){return e(a,E)},createURL:S,encodeLocation(E){let _=S(E);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:x,go(E){return c.go(E)}};return w}function jS(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),nt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Ho(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function D1(r,e,t="/"){return BS(r,e,t,!1)}function BS(r,e,t,i){let a=typeof e=="string"?xr(e):e,o=zi(a.pathname||"/",t);if(o==null)return null;let c=k1(r);US(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=KS(o);u=WS(c[h],f,i)}return u}function k1(r,e=[],t=[],i="",a=!1){let o=(c,u,h=a,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&h)return;nt(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let g=Fi([i,p.relativePath]),v=t.concat(p);c.children&&c.children.length>0&&(nt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),k1(c.children,e,v,g,h)),!(c.path==null&&!c.index)&&e.push({path:g,score:qS(g,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of M1(c.path))o(c,u,!0,h)}),e}function M1(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=M1(i.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...c),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function US(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:YS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var FS=/^:[\w-]+$/,zS=3,HS=2,VS=1,GS=10,$S=-2,sb=r=>r==="*";function qS(r,e){let t=r.split("/"),i=t.length;return t.some(sb)&&(i+=$S),e&&(i+=HS),t.filter(a=>!sb(a)).reduce((a,o)=>a+(FS.test(o)?zS:o===""?VS:GS),i)}function YS(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function WS(r,e,t=!1){let{routesMeta:i}=r,a={},o="/",c=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=Kc({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!g&&f&&t&&!i[i.length-1].route.index&&(g=Kc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:Fi([o,g.pathname]),pathnameBase:e2(Fi([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=Fi([o,g.pathnameBase]))}return c}function Kc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=XS(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let S=u[v]||"";c=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const x=u[v];return g&&!x?f[p]=void 0:f[p]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function XS(r,e=!1,t=!0){Yn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function KS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function zi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var QS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function ZS(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?xr(r):r,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=ab(t.substring(1),"/"):o=ab(t,e)):o=e,{pathname:o,search:t2(i),hash:n2(a)}}function ab(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function af(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JS(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sp(r){let e=JS(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ap(r,e,t,i=!1){let a;typeof r=="string"?a=xr(r):(a={...r},nt(!a.pathname||!a.pathname.includes("?"),af("?","pathname","search",a)),nt(!a.pathname||!a.pathname.includes("#"),af("#","pathname","hash",a)),nt(!a.search||!a.search.includes("#"),af("#","search","hash",a)));let o=r===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=t;else{let g=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;a.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=ZS(a,u),f=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var Fi=r=>r.join("/").replace(/\/\/+/g,"/"),e2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),t2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,n2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,i2=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function s2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function a2(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var L1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function O1(r,e){let t=r;if(typeof t!="string"||!QS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(L1)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),u=zi(c.pathname,e);c.origin===o.origin&&u!=null?t=u+c.search+c.hash:a=!0}catch{Yn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I1=["POST","PUT","PATCH","DELETE"];new Set(I1);var r2=["GET",...I1];new Set(r2);var wr=M.createContext(null);wr.displayName="DataRouter";var fu=M.createContext(null);fu.displayName="DataRouterState";var o2=M.createContext(!1),P1=M.createContext({isTransitioning:!1});P1.displayName="ViewTransition";var l2=M.createContext(new Map);l2.displayName="Fetchers";var c2=M.createContext(null);c2.displayName="Await";var Sn=M.createContext(null);Sn.displayName="Navigation";var Jo=M.createContext(null);Jo.displayName="Location";var Xn=M.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var rp=M.createContext(null);rp.displayName="RouteError";var j1="REACT_ROUTER_ERROR",u2="REDIRECT",d2="ROUTE_ERROR_RESPONSE";function h2(r){if(r.startsWith(`${j1}:${u2}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function f2(r){if(r.startsWith(`${j1}:${d2}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new i2(e.status,e.statusText,e.data)}catch{}}function p2(r,{relative:e}={}){nt(Ar(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=M.useContext(Sn),{hash:a,pathname:o,search:c}=el(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:Fi([t,o])),i.createHref({pathname:u,search:c,hash:a})}function Ar(){return M.useContext(Jo)!=null}function cn(){return nt(Ar(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Jo).location}var B1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U1(r){M.useContext(Sn).static||M.useLayoutEffect(r)}function Wi(){let{isDataRoute:r}=M.useContext(Xn);return r?C2():m2()}function m2(){nt(Ar(),"useNavigate() may be used only in the context of a <Router> component.");let r=M.useContext(wr),{basename:e,navigator:t}=M.useContext(Sn),{matches:i}=M.useContext(Xn),{pathname:a}=cn(),o=JSON.stringify(sp(i)),c=M.useRef(!1);return U1(()=>{c.current=!0}),M.useCallback((h,f={})=>{if(Yn(c.current,B1),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=ap(h,JSON.parse(o),a,f.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Fi([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,o,a,r])}M.createContext(null);function op(){let{matches:r}=M.useContext(Xn),e=r[r.length-1];return e?e.params:{}}function el(r,{relative:e}={}){let{matches:t}=M.useContext(Xn),{pathname:i}=cn(),a=JSON.stringify(sp(t));return M.useMemo(()=>ap(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function g2(r,e){return F1(r,e)}function F1(r,e,t,i,a){nt(Ar(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=M.useContext(Sn),{matches:c}=M.useContext(Xn),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let R=g&&g.path||"";H1(f,!g||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=cn(),x;if(e){let R=typeof e=="string"?xr(e):e;nt(p==="/"||R.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),x=R}else x=v;let S=x.pathname||"/",w=S;if(p!=="/"){let R=p.replace(/^\//,"").split("/");w="/"+S.replace(/^\//,"").split("/").slice(R.length).join("/")}let E=D1(r,{pathname:w});Yn(g||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Yn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=w2(E&&E.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Fi([p,o.encodeLocation?o.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:Fi([p,o.encodeLocation?o.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),c,t,i,a);return e&&_?M.createElement(Jo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function y2(){let r=T2(),e=s2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:a},t):null,c)}var b2=M.createElement(y2,null),z1=class extends M.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=f2(r.digest);t&&(r=t)}let e=r!==void 0?M.createElement(Xn.Provider,{value:this.props.routeContext},M.createElement(rp.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?M.createElement(v2,{error:r},e):e}};z1.contextType=o2;var rf=new WeakMap;function v2({children:r,error:e}){let{basename:t}=M.useContext(Sn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=h2(e.digest);if(i){let a=rf.get(e);if(a)throw a;let o=O1(i.location,t);if(L1&&!rf.get(e))if(o.isExternal||i.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:i.replace}));throw rf.set(e,c),c}return M.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return r}function x2({routeContext:r,match:e,children:t}){let i=M.useContext(wr);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Xn.Provider,{value:r},t)}function w2(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let p=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);nt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:x}=t,S=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||S){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=t&&i?(p,g)=>{i(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:a2(t.matches),errorInfo:g})}:void 0;return o.reduceRight((p,g,v)=>{let x,S=!1,w=null,E=null;t&&(x=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||b2,u&&(h<0&&v===0?(H1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,E=null):h===v&&(S=!0,E=g.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,v+1)),R=()=>{let T;return x?T=w:S?T=E:g.route.Component?T=M.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,M.createElement(x2,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:t!=null},children:T})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?M.createElement(z1,{location:t.location,revalidation:t.revalidation,component:w,error:x,children:R(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):R()},null)}function lp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function A2(r){let e=M.useContext(wr);return nt(e,lp(r)),e}function S2(r){let e=M.useContext(fu);return nt(e,lp(r)),e}function E2(r){let e=M.useContext(Xn);return nt(e,lp(r)),e}function cp(r){let e=E2(r),t=e.matches[e.matches.length-1];return nt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function _2(){return cp("useRouteId")}function T2(){let r=M.useContext(rp),e=S2("useRouteError"),t=cp("useRouteError");return r!==void 0?r:e.errors?.[t]}function C2(){let{router:r}=A2("useNavigate"),e=cp("useNavigate"),t=M.useRef(!1);return U1(()=>{t.current=!0}),M.useCallback(async(a,o={})=>{Yn(t.current,B1),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...o}))},[r,e])}var rb={};function H1(r,e,t){!e&&!rb[r]&&(rb[r]=!0,Yn(!1,t))}M.memo(R2);function R2({routes:r,future:e,state:t,onError:i}){return F1(r,void 0,t,i,e)}function kf({to:r,replace:e,state:t,relative:i}){nt(Ar(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=M.useContext(Sn);Yn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(Xn),{pathname:c}=cn(),u=Wi(),h=ap(r,sp(o),c,i==="path"),f=JSON.stringify(h);return M.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:i})},[u,f,i,e,t]),null}function St(r){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N2({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){nt(!Ar(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=M.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[u,a,o,c]);typeof t=="string"&&(t=xr(t));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:x="default"}=t,S=M.useMemo(()=>{let w=zi(f,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:v,key:x},navigationType:i}},[u,f,p,g,v,x,i]);return Yn(S!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:M.createElement(Sn.Provider,{value:h},M.createElement(Jo.Provider,{children:e,value:S}))}function D2({children:r,location:e}){return g2(Mf(r),e)}function Mf(r,e=[]){let t=[];return M.Children.forEach(r,(i,a)=>{if(!M.isValidElement(i))return;let o=[...e,a];if(i.type===M.Fragment){t.push.apply(t,Mf(i.props.children,o));return}nt(i.type===St,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Mf(i.props.children,o)),t.push(c)}),t}var zc="get",Hc="application/x-www-form-urlencoded";function pu(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function k2(r){return pu(r)&&r.tagName.toLowerCase()==="button"}function M2(r){return pu(r)&&r.tagName.toLowerCase()==="form"}function L2(r){return pu(r)&&r.tagName.toLowerCase()==="input"}function O2(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function I2(r,e){return r.button===0&&(!e||e==="_self")&&!O2(r)}var Rc=null;function P2(){if(Rc===null)try{new FormData(document.createElement("form"),0),Rc=!1}catch{Rc=!0}return Rc}var j2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function of(r){return r!=null&&!j2.has(r)?(Yn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hc}"`),null):r}function B2(r,e){let t,i,a,o,c;if(M2(r)){let u=r.getAttribute("action");i=u?zi(u,e):null,t=r.getAttribute("method")||zc,a=of(r.getAttribute("enctype"))||Hc,o=new FormData(r)}else if(k2(r)||L2(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(i=h?zi(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||zc,a=of(r.getAttribute("formenctype"))||of(u.getAttribute("enctype"))||Hc,o=new FormData(u,r),!P2()){let{name:f,type:p,value:g}=r;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(pu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zc,i=null,a=Hc,c=r}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function up(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function U2(r,e,t,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&zi(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function F2(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function z2(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function H2(r,e,t){let i=await Promise.all(r.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await F2(o,t);return c.links?c.links():[]}return[]}));return q2(i.flat(1).filter(z2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ob(r,e,t,i,a,o){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||u(h,f)):o==="data"?e.filter((h,f)=>{let p=i.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function V2(r,e,{includeHydrateFallback:t}={}){return G2(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function G2(r){return[...new Set(r)]}function $2(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function q2(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let o=JSON.stringify($2(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function V1(){let r=M.useContext(wr);return up(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Y2(){let r=M.useContext(fu);return up(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var dp=M.createContext(void 0);dp.displayName="FrameworkContext";function G1(){let r=M.useContext(dp);return up(r,"You must render this element inside a <HydratedRouter> element"),r}function W2(r,e){let t=M.useContext(dp),[i,a]=M.useState(!1),[o,c]=M.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,v=M.useRef(null);M.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let w=_=>{_.forEach(R=>{c(R.isIntersecting)})},E=new IntersectionObserver(w,{threshold:.5});return v.current&&E.observe(v.current),()=>{E.disconnect()}}},[r]),M.useEffect(()=>{if(i){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[i]);let x=()=>{a(!0)},S=()=>{a(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:To(u,x),onBlur:To(h,S),onMouseEnter:To(f,x),onMouseLeave:To(p,S),onTouchStart:To(g,x)}]:[!1,v,{}]}function To(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function X2({page:r,...e}){let{router:t}=V1(),i=M.useMemo(()=>D1(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?M.createElement(Q2,{page:r,matches:i,...e}):null}function K2(r){let{manifest:e,routeModules:t}=G1(),[i,a]=M.useState([]);return M.useEffect(()=>{let o=!1;return H2(r,e,t).then(c=>{o||a(c)}),()=>{o=!0}},[r,e,t]),i}function Q2({page:r,matches:e,...t}){let i=cn(),{future:a,manifest:o,routeModules:c}=G1(),{basename:u}=V1(),{loaderData:h,matches:f}=Y2(),p=M.useMemo(()=>ob(r,e,f,o,i,"data"),[r,e,f,o,i]),g=M.useMemo(()=>ob(r,e,f,o,i,"assets"),[r,e,f,o,i]),v=M.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let w=new Set,E=!1;if(e.forEach(R=>{let T=o.routes[R.route.id];!T||!T.hasLoader||(!p.some(N=>N.route.id===R.route.id)&&R.route.id in h&&c[R.route.id]?.shouldRevalidate||T.hasClientLoader?E=!0:w.add(R.route.id))}),w.size===0)return[];let _=U2(r,u,a.unstable_trailingSlashAwareDataRequests,"data");return E&&w.size>0&&_.searchParams.set("_routes",e.filter(R=>w.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[u,a.unstable_trailingSlashAwareDataRequests,h,i,o,p,e,r,c]),x=M.useMemo(()=>V2(g,o),[g,o]),S=K2(g);return M.createElement(M.Fragment,null,v.map(w=>M.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>M.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),S.map(({key:w,link:E})=>M.createElement("link",{key:w,nonce:t.nonce,...E,crossOrigin:E.crossOrigin??t.crossOrigin})))}function Z2(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var J2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{J2&&(window.__reactRouterVersion="7.13.0")}catch{}function eE({basename:r,children:e,unstable_useTransitions:t,window:i}){let a=M.useRef();a.current==null&&(a.current=OS({window:i,v5Compat:!0}));let o=a.current,[c,u]=M.useState({action:o.action,location:o.location}),h=M.useCallback(f=>{t===!1?u(f):M.startTransition(()=>u(f))},[t]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.createElement(N2,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var $1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ut=M.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},S){let{basename:w,unstable_useTransitions:E}=M.useContext(Sn),_=typeof f=="string"&&$1.test(f),R=O1(f,w);f=R.to;let T=p2(f,{relative:a}),[N,D,O]=W2(i,x),j=sE(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:E});function Y($){e&&e($),$.defaultPrevented||j($)}let W=M.createElement("a",{...x,...O,href:R.absoluteURL||T,onClick:R.isExternal||o?e:Y,ref:Z2(S,D),target:h,"data-discover":!_&&t==="render"?"true":void 0});return N&&!_?M.createElement(M.Fragment,null,W,M.createElement(X2,{page:T})):W});ut.displayName="Link";var tE=M.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:u,children:h,...f},p){let g=el(c,{relative:f.relative}),v=cn(),x=M.useContext(fu),{navigator:S,basename:w}=M.useContext(Sn),E=x!=null&&cE(g)&&u===!0,_=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,R=v.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(R=R.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&w&&(T=zi(T,w)||T);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=R===_||!a&&R.startsWith(_)&&R.charAt(N)==="/",O=T!=null&&(T===_||!a&&T.startsWith(_)&&T.charAt(_.length)==="/"),j={isActive:D,isPending:O,isTransitioning:E},Y=D?e:void 0,W;typeof i=="function"?W=i(j):W=[i,D?"active":null,O?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(j):o;return M.createElement(ut,{...f,"aria-current":Y,className:W,ref:p,style:$,to:c,viewTransition:u},typeof h=="function"?h(j):h)});tE.displayName="NavLink";var nE=M.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:c=zc,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},S)=>{let{unstable_useTransitions:w}=M.useContext(Sn),E=oE(),_=lE(u,{relative:f}),R=c.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&$1.test(u),N=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let O=D.nativeEvent.submitter,j=O?.getAttribute("formmethod")||c,Y=()=>E(O||D.currentTarget,{fetcherKey:e,method:j,navigate:t,replace:a,state:o,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v});w&&t!==!1?M.startTransition(()=>Y()):Y()};return M.createElement("form",{ref:S,method:R,action:_,onSubmit:i?h:N,...x,"data-discover":!T&&r==="render"?"true":void 0})});nE.displayName="Form";function iE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q1(r){let e=M.useContext(wr);return nt(e,iE(r)),e}function sE(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=Wi(),p=cn(),g=el(r,{relative:o});return M.useCallback(v=>{if(I2(v,e)){v.preventDefault();let x=t!==void 0?t:Ho(p)===Ho(g),S=()=>f(r,{replace:x,state:i,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u});h?M.startTransition(()=>S()):S()}},[p,f,g,t,i,e,r,a,o,c,u,h])}var aE=0,rE=()=>`__${String(++aE)}__`;function oE(){let{router:r}=q1("useSubmit"),{basename:e}=M.useContext(Sn),t=_2(),i=r.fetch,a=r.navigate;return M.useCallback(async(o,c={})=>{let{action:u,method:h,encType:f,formData:p,body:g}=B2(o,e);if(c.navigate===!1){let v=c.fetcherKey||rE();await i(v,t,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function lE(r,{relative:e}={}){let{basename:t}=M.useContext(Sn),i=M.useContext(Xn);nt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...el(r||".",{relative:e})},c=cn();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();o.search=p?`?${p}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Fi([t,o.pathname])),Ho(o)}function cE(r,{relative:e}={}){let t=M.useContext(P1);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=q1("useViewTransitionState"),a=el(r,{relative:e});if(!t.isTransitioning)return!1;let o=zi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=zi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Kc(a.pathname,c)!=null||Kc(a.pathname,o)!=null}const uE=["Northwind Legal","Acme Ventures","Solaris Health","Beacon Realty","Atlas Finance","Bluebird Energy"],dE=[{label:"Docs decoded",value:"42k+"},{label:"Average time saved",value:"3.4 hrs"},{label:"Risk flags identified",value:"128k+"}],hE=[{title:"Upload or open a PDF",description:"Drop in a contract, policy, or report. No setup required."},{title:"Decode with AI",description:"We translate the text, highlight obligations, and surface risks."},{title:"Act with clarity",description:"Export notes or send for signature only when you are ready."}],fE=[{title:"Plain-language summaries",description:"Every section is rewritten into clear, actionable language."},{title:"Risk and obligation flags",description:"Spot penalties, expiry traps, and one-sided clauses fast."},{title:"Side-by-side evidence",description:"See the original text next to the AI explanation."},{title:"Shareable decision reports",description:"Create a clean, board-ready summary in one click."},{title:"Structured highlights",description:"Tag sections as financial, legal, or operational."},{title:"Secure by design",description:"Free mode never stores files. Pro adds private vaults."}],Vc=[{slug:"procurement-teams",title:"Procurement teams",description:"Speed up vendor reviews without missing hidden liabilities.",audience:"Procurement",heroTitle:"Review supplier contracts with less back-and-forth",heroDescription:"Get clear obligations, risk hotspots, and negotiation points before legal and finance sign-off.",documentTypes:["Master service agreements","Order forms and pricing schedules","Security and data processing addenda","Renewal and termination terms"],painPoints:["Commercial terms are spread across annexes and riders.","Auto-renewal and notice periods are easy to miss.","Risk language is hard to summarize for non-legal stakeholders.","Vendor redlines can hide one-sided liabilities."],workflow:[{step:"Collect the vendor packet",detail:"Open the MSA, order form, and policy addenda in one review flow."},{step:"Surface obligations by category",detail:"Map payment, liability, security, and termination clauses into clear buckets."},{step:"Export a negotiation brief",detail:"Share key risks, fallback language, and decision notes with legal and budget owners."}],deliverables:["Clause-level summary for internal approvals","Priority list of terms to negotiate","Renewal and notice-date watchlist","Decision-ready brief for leadership"],highlights:[{label:"Main outcome",value:"Faster contract triage"},{label:"Best for",value:"High-volume vendor intake"},{label:"Team fit",value:"Procurement + Legal + Finance"}],cta:{primaryLabel:"Open procurement review",primaryTo:"/view",secondaryLabel:"Talk to the team",secondaryTo:"/contact"}},{slug:"startup-founders",title:"Startup founders",description:"Understand term sheets and SaaS agreements fast.",audience:"Founders",heroTitle:"Get investor and vendor terms into plain language quickly",heroDescription:"Move faster in fundraising and operations without signing unclear clauses under pressure.",documentTypes:["SAFE notes and term sheets","SaaS contracts and procurement agreements","Partnership and channel agreements","Advisory and contractor contracts"],painPoints:["Legal wording slows decisions during fundraising windows.","Operational agreements include hidden lock-ins.","Founders need to brief co-founders and advisors quickly.","Critical downside terms are buried in dense clauses."],workflow:[{step:"Open the latest draft",detail:"Load investor or vendor documents without changing your existing process."},{step:"Identify non-standard terms",detail:"Highlight liquidation preferences, assignment terms, and exclusivity language."},{step:"Prepare founder decision notes",detail:"Capture what to accept, what to renegotiate, and what needs external counsel."}],deliverables:["Executive summary for co-founders","Negotiation checklist before signature","Risk flags with source text evidence","Clear list of terms requiring legal review"],highlights:[{label:"Main outcome",value:"Higher decision confidence"},{label:"Best for",value:"Lean teams with limited legal bandwidth"},{label:"Team fit",value:"Founders + Advisors"}],cta:{primaryLabel:"Open founder workflow",primaryTo:"/view",secondaryLabel:"Ask a question",secondaryTo:"/contact"}},{slug:"hr-people-ops",title:"HR & people ops",description:"Review contracts, handbooks, and compliance updates with confidence.",audience:"People Ops",heroTitle:"Reduce people-risk in employment documentation",heroDescription:"Keep employment terms consistent and understandable across contracts, policies, and updates.",documentTypes:["Employment contracts and offer letters","Employee handbook updates","Workplace policy and compliance notices","Contractor and consultant agreements"],painPoints:["Policy updates are difficult to compare release to release.","Employment terms can drift across templates and locations.","Managers need concise summaries for practical application.","Risk language must be tracked before rollout."],workflow:[{step:"Review policy or contract drafts",detail:"Analyze updates before distribution or employee signature."},{step:"Spot inconsistencies and edge cases",detail:"Flag conflicting obligations, unclear wording, and potential compliance risk."},{step:"Ship a manager-friendly summary",detail:"Provide plain-language guidance for leaders and HR business partners."}],deliverables:["Policy change summary in plain language","Inconsistency and ambiguity report","Manager communication draft points","Pre-release checklist for HR approval"],highlights:[{label:"Main outcome",value:"More consistent policy rollouts"},{label:"Best for",value:"Distributed teams and frequent updates"},{label:"Team fit",value:"HR + Legal + Operations"}],cta:{primaryLabel:"Open HR review flow",primaryTo:"/view",secondaryLabel:"Contact us",secondaryTo:"/contact"}},{slug:"property-managers",title:"Property managers",description:"Decode leases, maintenance agreements, and building policies.",audience:"Property",heroTitle:"Handle lease and building terms with fewer surprises",heroDescription:"Understand obligations across tenants, vendors, and owners before commitments become operational issues.",documentTypes:["Commercial and residential lease agreements","Maintenance and service contracts","Building compliance and policy documents","Owner and tenant amendments"],painPoints:["Obligations vary by lease template and special conditions.","Maintenance responsibility language is often ambiguous.","Penalty and default terms are hard to track at scale.","Team handoffs create context loss between operations and legal."],workflow:[{step:"Open lease and service agreements",detail:"Review clauses that directly impact operations, timelines, and cost."},{step:"Map obligations by stakeholder",detail:"Separate owner, tenant, and vendor responsibilities into clear action items."},{step:"Create an operational handoff",detail:"Export key terms for facilities, finance, and portfolio managers."}],deliverables:["Responsibility matrix by party","Critical date and notice summary","Risk flags for penalties and defaults","Operations-ready implementation notes"],highlights:[{label:"Main outcome",value:"Clearer cross-team execution"},{label:"Best for",value:"Multi-site lease portfolios"},{label:"Team fit",value:"Property + Facilities + Finance"}],cta:{primaryLabel:"Open lease review",primaryTo:"/view",secondaryLabel:"Discuss your workflow",secondaryTo:"/contact"}},{slug:"legal-teams",title:"Legal teams",description:"Review NDAs, IP agreements, and litigation documents.",audience:"Legal",heroTitle:"Accelerate first-pass review without sacrificing control",heroDescription:"Triage high-volume legal documents so counsel can focus on strategy, exceptions, and negotiation.",documentTypes:["NDAs and confidentiality agreements","IP assignment and license contracts","Supplier and customer agreements","Pre-litigation and dispute documentation"],painPoints:["Document volume delays turnaround for business teams.","Standard clauses still require repetitive first-pass checks.","Counsel time is consumed by low-value extraction work.","Stakeholders need evidence-backed summaries, not guesses."],workflow:[{step:"Run first-pass analysis",detail:"Extract obligations, carve-outs, and unusual terms across drafts."},{step:"Prioritize legal attention",detail:"Escalate clauses by materiality so counsel focuses where judgment is required."},{step:"Deliver stakeholder brief",detail:"Share concise legal findings with commercial and operational owners."}],deliverables:["First-pass clause extraction pack","Material-risk escalation shortlist","Source-linked summary for business partners","Review trail for team collaboration"],highlights:[{label:"Main outcome",value:"Better legal throughput"},{label:"Best for",value:"High-volume contract teams"},{label:"Team fit",value:"Legal + Procurement + Sales Ops"}],cta:{primaryLabel:"Open legal review",primaryTo:"/view",secondaryLabel:"Contact legal support",secondaryTo:"/contact"}},{slug:"finance-teams",title:"Finance teams",description:"Analyze investment docs, loan agreements, and financial contracts.",audience:"Finance",heroTitle:"Understand financial obligations before they hit your model",heroDescription:"Turn dense agreements into structured obligations that finance teams can validate and plan against.",documentTypes:["Loan and debt agreements","Investment and shareholder documents","Revenue-share and pricing contracts","Guarantee and covenant schedules"],painPoints:["Covenants and triggers are hard to map into planning cycles.","Fee and penalty terms are easy to underestimate.","Finance needs clear inputs from legal language.","Decision deadlines are tight when documents are complex."],workflow:[{step:"Analyze obligations and covenants",detail:"Highlight repayment terms, reporting duties, and breach triggers."},{step:"Convert clauses into finance inputs",detail:"Translate legal language into assumptions your team can model."},{step:"Share a risk-aware decision memo",detail:"Align CFO, legal, and leadership on impact before acceptance."}],deliverables:["Covenant and trigger register","Financial risk summary with evidence","Decision memo for leadership review","Checklist for post-signature monitoring"],highlights:[{label:"Main outcome",value:"Cleaner planning inputs"},{label:"Best for",value:"Debt and investment document review"},{label:"Team fit",value:"Finance + Legal + Executive"}],cta:{primaryLabel:"Open finance review",primaryTo:"/view",secondaryLabel:"Talk to us",secondaryTo:"/contact"}}],lf={product:[{label:"How it works",href:"#how-it-works"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",href:"/pricing"},{label:"Open viewer",href:"/view"}],company:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"}],legal:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"}]},Y1="data:image/svg+xml,%3csvg%20width='630'%20height='718'%20viewBox='0%200%20630%20718'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M507.588%20467.968V382.194L437.065%20422.437V508.279L507.588%20467.968Z'%20fill='%2315D6E3'/%3e%3cpath%20d='M507.588%20247.995L434.559%20206.201L315.313%20274.417L196.068%20206.201L123.038%20247.995V323.966L244.293%20393.349V537.261L315.313%20577.888L386.334%20537.261V393.349L507.588%20323.966V247.995Z'%20fill='%233A36FF'/%3e%3cpath%20d='M630.006%20254.748V178.525L557.185%20136.592L486.298%20177.354L559.119%20219.288V295.511L630.006%20254.748Z'%20fill='%233A36FF'/%3e%3cpath%20d='M71.5074%20295.511V219.288L144.328%20177.354L73.4419%20136.592L0.620972%20178.525V254.748L71.5074%20295.511Z'%20fill='%233A36FF'/%3e%3cpath%20d='M123.038%20467.968L193.561%20508.279V422.437L123.038%20382.194V467.968Z'%20fill='%233998FF'/%3e%3cpath%20d='M386.502%20594.962L315.313%20635.677L244.125%20594.962V676.392L315.313%20717.107L386.502%20676.392V594.962Z'%20fill='%233A36FF'/%3e%3cpath%20d='M383.84%20177.307L315.313%20137.905L246.786%20177.307L315.313%20216.708L383.84%20177.307Z'%20fill='%238A88FF'/%3e%3cpath%20d='M558.695%20353.18V496.979L437.065%20566.307V647.497L630.006%20537.574V312.585L558.695%20353.18Z'%20fill='%2315D7E3'/%3e%3cpath%20d='M193.561%20566.307L71.931%20496.979V353.18L0.620972%20312.585V537.574L193.561%20647.497V566.307Z'%20fill='%233998FF'/%3e%3cpath%20d='M195.686%20148.412L315.313%2080.7477L434.94%20148.412L506.258%20108.072L315.313%200L124.369%20108.072L195.686%20148.412Z'%20fill='%238A88FF'/%3e%3c/svg%3e",pE="0.1.0+61646fc-2026-02-12T00:20:37.773Z",cf=({href:r,children:e})=>{const t=typeof r=="string"&&/^https?:\/\//.test(r),i=typeof r=="string"&&r.startsWith("#");return t?y.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r,children:e}):i?y.jsx(ut,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:{pathname:"/",hash:r},children:e}):y.jsx(ut,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:r,children:e})},W1=()=>{const e=cn().pathname==="/";return y.jsx("footer",{className:"border-t border-slate-200 bg-white px-6 py-12",children:y.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-10 md:grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr]",children:[y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:Y1,alt:"DecoDocs",className:"h-10 w-10"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-base font-semibold text-slate-900",children:"DecoDocs"}),y.jsx("p",{className:"text-xs text-slate-500",children:"Understand documents before you sign"})]})]}),y.jsx("p",{className:"text-sm text-slate-600",children:"Privacy-first document understanding by Snap Sign Pty Ltd."}),y.jsxs("p",{className:"text-xs text-slate-500",children:[" ",new Date().getFullYear()," Snap Sign Pty Ltd. All rights reserved."]}),y.jsxs("p",{className:"text-xs text-slate-400",children:["Version: ",pE]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Product"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:lf.product.map(t=>y.jsx("li",{className:"m-0",children:e&&typeof t.href=="string"&&t.href.startsWith("#")?y.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:t.href,children:t.label}):y.jsx(cf,{href:t.href,children:t.label})},t.label))})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Company"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:lf.company.map(t=>y.jsx("li",{className:"m-0",children:y.jsx(cf,{href:t.href,children:t.label})},t.label))})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Legal"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:lf.legal.map(t=>y.jsx("li",{className:"m-0",children:y.jsx(cf,{href:t.href,children:t.label})},t.label))})]})]})})},mE=()=>{};var lb={};const X1=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},gE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=r[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=r[t++],c=r[t++],u=r[t++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},K1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const o=r[a],c=a+1<r.length,u=c?r[a+1]:0,h=a+2<r.length,f=h?r[a+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,x=f&63;h||(x=64,c||(v=64)),i.push(t[p],t[g],t[v],t[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(X1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):gE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const o=t[r.charAt(a++)],u=a<r.length?t[r.charAt(a)]:0;++a;const f=a<r.length?t[r.charAt(a)]:64;++a;const g=a<r.length?t[r.charAt(a)]:64;if(++a,o==null||u==null||f==null||g==null)throw new yE;const v=o<<2|u>>4;if(i.push(v),f!==64){const x=u<<4&240|f>>2;if(i.push(x),g!==64){const S=f<<6&192|g;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class yE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bE=function(r){const e=X1(r);return K1.encodeByteArray(e,!0)},Q1=function(r){return bE(r).replace(/\./g,"")},Z1=function(r){try{return K1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const xE=()=>vE().__FIREBASE_DEFAULTS__,wE=()=>{if(typeof process>"u"||typeof lb>"u")return;const r=lb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},AE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Z1(r[1]);return e&&JSON.parse(e)},hp=()=>{try{return mE()||xE()||wE()||AE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},J1=r=>hp()?.emulatorHosts?.[r],SE=r=>{const e=J1(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ev=()=>hp()?.config,tv=r=>hp()?.[`_${r}`];class EE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Sr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function nv(r){return(await fetch(r,{credentials:"include"})).ok}const Bo={};function _E(){const r={prod:[],emulator:[]};for(const e of Object.keys(Bo))Bo[e]?r.emulator.push(e):r.prod.push(e);return r}function TE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let cb=!1;function iv(r,e){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||Bo[r]===e||Bo[r]||cb)return;Bo[r]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=_E().prod.length>0;function c(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{cb=!0,c()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=TE(i),x=t("text"),S=document.getElementById(x)||document.createElement("span"),w=t("learnmore"),E=document.getElementById(w)||document.createElement("a"),_=t("preprendIcon"),R=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const T=v.element;u(T),p(E,w);const N=f();h(R,_),T.append(R,S,E,N),document.body.appendChild(T)}o?(S.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wt())}function RE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kE(){const r=Wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function ME(){try{return typeof indexedDB=="object"}catch{return!1}}function LE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const OE="FirebaseError";class Xi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=OE,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tl.prototype.create)}}class tl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?IE(o,i):"Error",u=`${this.serviceName}: ${c} (${a}).`;return new Xi(a,u,i)}}function IE(r,e){return r.replace(PE,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const PE=/\{\$([^}]+)}/g;function jE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function mr(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=r[a],c=e[a];if(ub(o)&&ub(c)){if(!mr(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function ub(r){return r!==null&&typeof r=="object"}function nl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Lo(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Oo(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function BE(r,e){const t=new UE(r,e);return t.subscribe.bind(t)}class UE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");FE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=uf),a.error===void 0&&(a.error=uf),a.complete===void 0&&(a.complete=uf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function FE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function uf(){}function un(r){return r&&r._delegate?r._delegate:r}class oa{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Js="[DEFAULT]";class zE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new EE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VE(e))try{this.getOrInitializeService({instanceIdentifier:Js})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=Js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Js){return this.instances.has(e)}getOptions(e=Js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:HE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Js){return this.component?this.component.multipleInstances?e:Js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function HE(r){return r===Js?void 0:r}function VE(r){return r.instantiationMode==="EAGER"}class GE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new zE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const $E={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},qE=Ke.INFO,YE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},WE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=YE[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sv{constructor(e){this.name=e,this._logLevel=qE,this._logHandler=WE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$E[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const XE=(r,e)=>e.some(t=>r instanceof t);let db,hb;function KE(){return db||(db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QE(){return hb||(hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const av=new WeakMap,Lf=new WeakMap,rv=new WeakMap,df=new WeakMap,fp=new WeakMap;function ZE(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(Rs(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&av.set(t,r)}).catch(()=>{}),fp.set(e,r),e}function JE(r){if(Lf.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});Lf.set(r,e)}let Of={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Lf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||rv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function e_(r){Of=r(Of)}function t_(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(hf(this),e,...t);return rv.set(i,e.sort?e.sort():[e]),Rs(i)}:QE().includes(r)?function(...e){return r.apply(hf(this),e),Rs(av.get(this))}:function(...e){return Rs(r.apply(hf(this),e))}}function n_(r){return typeof r=="function"?t_(r):(r instanceof IDBTransaction&&JE(r),XE(r,KE())?new Proxy(r,Of):r)}function Rs(r){if(r instanceof IDBRequest)return ZE(r);if(df.has(r))return df.get(r);const e=n_(r);return e!==r&&(df.set(r,e),fp.set(e,r)),e}const hf=r=>fp.get(r);function i_(r,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(r,e),u=Rs(c);return i&&c.addEventListener("upgradeneeded",h=>{i(Rs(c.result),h.oldVersion,h.newVersion,Rs(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const s_=["get","getKey","getAll","getAllKeys","count"],a_=["put","add","delete","clear"],ff=new Map;function fb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=a_.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||s_.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),a&&h.done]))[0]};return ff.set(e,o),o}e_(r=>({...r,get:(e,t,i)=>fb(e,t)||r.get(e,t,i),has:(e,t)=>!!fb(e,t)||r.has(e,t)}));class r_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(o_(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function o_(r){return r.getComponent()?.type==="VERSION"}const If="@firebase/app",pb="0.14.8";const Hi=new sv("@firebase/app"),l_="@firebase/app-compat",c_="@firebase/analytics-compat",u_="@firebase/analytics",d_="@firebase/app-check-compat",h_="@firebase/app-check",f_="@firebase/auth",p_="@firebase/auth-compat",m_="@firebase/database",g_="@firebase/data-connect",y_="@firebase/database-compat",b_="@firebase/functions",v_="@firebase/functions-compat",x_="@firebase/installations",w_="@firebase/installations-compat",A_="@firebase/messaging",S_="@firebase/messaging-compat",E_="@firebase/performance",__="@firebase/performance-compat",T_="@firebase/remote-config",C_="@firebase/remote-config-compat",R_="@firebase/storage",N_="@firebase/storage-compat",D_="@firebase/firestore",k_="@firebase/ai",M_="@firebase/firestore-compat",L_="firebase",O_="12.9.0";const Pf="[DEFAULT]",I_={[If]:"fire-core",[l_]:"fire-core-compat",[u_]:"fire-analytics",[c_]:"fire-analytics-compat",[h_]:"fire-app-check",[d_]:"fire-app-check-compat",[f_]:"fire-auth",[p_]:"fire-auth-compat",[m_]:"fire-rtdb",[g_]:"fire-data-connect",[y_]:"fire-rtdb-compat",[b_]:"fire-fn",[v_]:"fire-fn-compat",[x_]:"fire-iid",[w_]:"fire-iid-compat",[A_]:"fire-fcm",[S_]:"fire-fcm-compat",[E_]:"fire-perf",[__]:"fire-perf-compat",[T_]:"fire-rc",[C_]:"fire-rc-compat",[R_]:"fire-gcs",[N_]:"fire-gcs-compat",[D_]:"fire-fst",[M_]:"fire-fst-compat",[k_]:"fire-vertex","fire-js":"fire-js",[L_]:"fire-js-all"};const Vo=new Map,P_=new Map,jf=new Map;function mb(r,e){try{r.container.addComponent(e)}catch(t){Hi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function gr(r){const e=r.name;if(jf.has(e))return Hi.debug(`There were multiple attempts to register component ${e}.`),!1;jf.set(e,r);for(const t of Vo.values())mb(t,r);for(const t of P_.values())mb(t,r);return!0}function pp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ln(r){return r==null?!1:r.settings!==void 0}const j_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ns=new tl("app","Firebase",j_);class B_{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ns.create("app-deleted",{appName:this._name})}}const il=O_;function ov(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Pf,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ns.create("bad-app-name",{appName:String(a)});if(t||(t=ev()),!t)throw Ns.create("no-options");const o=Vo.get(a);if(o){if(mr(t,o.options)&&mr(i,o.config))return o;throw Ns.create("duplicate-app",{appName:a})}const c=new GE(a);for(const h of jf.values())c.addComponent(h);const u=new B_(t,i,c);return Vo.set(a,u),u}function mp(r=Pf){const e=Vo.get(r);if(!e&&r===Pf&&ev())return ov();if(!e)throw Ns.create("no-app",{appName:r});return e}function U_(){return Array.from(Vo.values())}function Ds(r,e,t){let i=I_[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hi.warn(c.join(" "));return}gr(new oa(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const F_="firebase-heartbeat-database",z_=1,Go="firebase-heartbeat-store";let pf=null;function lv(){return pf||(pf=i_(F_,z_,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Go)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ns.create("idb-open",{originalErrorMessage:r.message})})),pf}async function H_(r){try{const t=(await lv()).transaction(Go),i=await t.objectStore(Go).get(cv(r));return await t.done,i}catch(e){if(e instanceof Xi)Hi.warn(e.message);else{const t=Ns.create("idb-get",{originalErrorMessage:e?.message});Hi.warn(t.message)}}}async function gb(r,e){try{const i=(await lv()).transaction(Go,"readwrite");await i.objectStore(Go).put(e,cv(r)),await i.done}catch(t){if(t instanceof Xi)Hi.warn(t.message);else{const i=Ns.create("idb-set",{originalErrorMessage:t?.message});Hi.warn(i.message)}}}function cv(r){return`${r.name}!${r.options.appId}`}const V_=1024,G_=30;class $_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Y_(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=yb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>G_){const a=W_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Hi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yb(),{heartbeatsToSend:t,unsentEntries:i}=q_(this._heartbeatsCache.heartbeats),a=Q1(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Hi.warn(e),""}}}function yb(){return new Date().toISOString().substring(0,10)}function q_(r,e=V_){const t=[];let i=r.slice();for(const a of r){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),bb(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),bb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Y_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ME()?LE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await H_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return gb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function bb(r){return Q1(JSON.stringify({version:2,heartbeats:r})).length}function W_(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function X_(r){gr(new oa("platform-logger",e=>new r_(e),"PRIVATE")),gr(new oa("heartbeat",e=>new $_(e),"PRIVATE")),Ds(If,pb,r),Ds(If,pb,"esm2020"),Ds("fire-js","")}X_("");function uv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const K_=uv,dv=new tl("auth","Firebase",uv());const Qc=new sv("@firebase/auth");function Q_(r,...e){Qc.logLevel<=Ke.WARN&&Qc.warn(`Auth (${il}): ${r}`,...e)}function Gc(r,...e){Qc.logLevel<=Ke.ERROR&&Qc.error(`Auth (${il}): ${r}`,...e)}function jn(r,...e){throw yp(r,...e)}function qn(r,...e){return yp(r,...e)}function gp(r,e,t){const i={...K_(),[e]:t};return new tl("auth","Firebase",i).create(e,{appName:r.name})}function di(r){return gp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hv(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&jn(r,"argument-error"),gp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return dv.create(r,...e)}function he(r,e,...t){if(!r)throw yp(e,...t)}function Bi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gc(e),new Error(e)}function Vi(r,e){r||Bi(e)}function Bf(){return typeof self<"u"&&self.location?.href||""}function Z_(){return vb()==="http:"||vb()==="https:"}function vb(){return typeof self<"u"&&self.location?.protocol||null}function J_(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Z_()||NE()||"connection"in navigator)?navigator.onLine:!0}function eT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class sl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Vi(t>e,"Short delay should be less than long delay!"),this.isMobile=CE()||DE()}get(){return J_()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function bp(r,e){Vi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class fv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const tT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const nT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iT=new sl(3e4,6e4);function Ki(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Qi(r,e,t,i,a={}){return pv(r,a,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const u=nl({key:r.config.apiKey,...c}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:h,...o};return RE()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Sr(r.emulatorConfig.host)&&(f.credentials="include"),fv.fetch()(await mv(r,r.config.apiHost,t,u),f)})}async function pv(r,e,t){r._canInitEmulator=!1;const i={...tT,...e};try{const a=new aT(r),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Nc(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nc(r,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Nc(r,"email-already-in-use",c);if(h==="USER_DISABLED")throw Nc(r,"user-disabled",c);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gp(r,p,f);jn(r,p)}}catch(a){if(a instanceof Xi)throw a;jn(r,"network-request-failed",{message:String(a)})}}async function al(r,e,t,i,a={}){const o=await Qi(r,e,t,i,a);return"mfaPendingCredential"in o&&jn(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function mv(r,e,t,i){const a=`${e}${t}?${i}`,o=r,c=o.config.emulator?bp(r.config,a):`${r.config.apiScheme}://${a}`;return nT.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function sT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class aT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(qn(this.auth,"network-request-failed")),iT.get())})}}function Nc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=qn(r,e,i);return a.customData._tokenResponse=t,a}function xb(r){return r!==void 0&&r.enterprise!==void 0}class rT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return sT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function oT(r,e){return Qi(r,"GET","/v2/recaptchaConfig",Ki(r,e))}async function lT(r,e){return Qi(r,"POST","/v1/accounts:delete",e)}async function Zc(r,e){return Qi(r,"POST","/v1/accounts:lookup",e)}function Uo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cT(r,e=!1){const t=un(r),i=await t.getIdToken(e),a=vp(i);he(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:Uo(mf(a.auth_time)),issuedAtTime:Uo(mf(a.iat)),expirationTime:Uo(mf(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function mf(r){return Number(r)*1e3}function vp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Gc("JWT malformed, contained fewer than 3 sections"),null;try{const a=Z1(t);return a?JSON.parse(a):(Gc("Failed to decode base64 JWT payload"),null)}catch(a){return Gc("Caught error parsing JWT payload as JSON",a?.toString()),null}}function wb(r){const e=vp(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function $o(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Xi&&uT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function uT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class dT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Uf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uo(this.lastLoginAt),this.creationTime=Uo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function qo(r){const e=r.auth,t=await r.getIdToken(),i=await $o(r,Zc(e,{idToken:t}));he(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const o=a.providerUserInfo?.length?gv(a.providerUserInfo):[],c=fT(r.providerData,o),u=r.isAnonymous,h=!(r.email&&a.passwordHash)&&!c?.length,f=u?h:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(r,p)}async function hT(r){const e=un(r);await qo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fT(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function gv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function pT(r,e){const t=await pv(r,{},async()=>{const i=nl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=r.config,c=await mv(r,a,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return r.emulatorConfig&&Sr(r.emulatorConfig.host)&&(h.credentials="include"),fv.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mT(r,e){return Qi(r,"POST","/v2/accounts:revokeToken",Ki(r,e))}class lr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=wb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await pT(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,c=new lr;return i&&(he(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(he(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(he(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lr,this.toJSON())}_performRefresh(){return Bi("not implemented")}}function As(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new dT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Uf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await $o(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return cT(this,e)}reload(){return hT(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await qo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(di(this.auth));const e=await this.getIdToken();return await $o(this,lT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:x,providerData:S,stsTokenManager:w}=t;he(g&&w,e,"internal-error");const E=lr.fromJSON(this.name,w);he(typeof g=="string",e,"internal-error"),As(i,e.name),As(a,e.name),he(typeof v=="boolean",e,"internal-error"),he(typeof x=="boolean",e,"internal-error"),As(o,e.name),As(c,e.name),As(u,e.name),As(h,e.name),As(f,e.name),As(p,e.name);const _=new $n({uid:g,auth:e,email:a,emailVerified:v,displayName:i,isAnonymous:x,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:E,createdAt:f,lastLoginAt:p});return S&&Array.isArray(S)&&(_.providerData=S.map(R=>({...R}))),h&&(_._redirectEventId=h),_}static async _fromIdTokenResponse(e,t,i=!1){const a=new lr;a.updateFromServerResponse(t);const o=new $n({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await qo(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];he(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?gv(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,u=new lr;u.updateFromIdToken(i);const h=new $n({uid:a.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Uf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const Ab=new Map;function Ui(r){Vi(r instanceof Function,"Expected a class definition");let e=Ab.get(r);return e?(Vi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Ab.set(r,e),e)}class yv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yv.type="NONE";const Sb=yv;function $c(r,e,t){return`firebase:${r}:${e}:${t}`}class cr{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=$c(this.userKey,a.apiKey,o),this.fullPersistenceKey=$c("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zc(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new cr(Ui(Sb),e,i);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||Ui(Sb);const c=$c(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(c);if(p){let g;if(typeof p=="string"){const v=await Zc(e,{idToken:p}).catch(()=>{});if(!v)break;g=await $n._fromGetAccountInfoResponse(e,v,p)}else g=$n._fromJSON(e,p);f!==o&&(u=g),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new cr(o,e,i):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new cr(o,e,i))}}function Eb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sv(e))return"Blackberry";if(Ev(e))return"Webos";if(vv(e))return"Safari";if((e.includes("chrome/")||xv(e))&&!e.includes("edge/"))return"Chrome";if(Av(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function bv(r=Wt()){return/firefox\//i.test(r)}function vv(r=Wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xv(r=Wt()){return/crios\//i.test(r)}function wv(r=Wt()){return/iemobile/i.test(r)}function Av(r=Wt()){return/android/i.test(r)}function Sv(r=Wt()){return/blackberry/i.test(r)}function Ev(r=Wt()){return/webos/i.test(r)}function xp(r=Wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function gT(r=Wt()){return xp(r)&&!!window.navigator?.standalone}function yT(){return kE()&&document.documentMode===10}function _v(r=Wt()){return xp(r)||Av(r)||Ev(r)||Sv(r)||/windows phone/i.test(r)||wv(r)}function Tv(r,e=[]){let t;switch(r){case"Browser":t=Eb(Wt());break;case"Worker":t=`${Eb(Wt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${il}/${i}`}class bT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function vT(r,e={}){return Qi(r,"GET","/v2/passwordPolicy",Ki(r,e))}const xT=6;class wT{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??xT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class AT{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _b(this),this.idTokenSubscription=new _b(this),this.beforeStateQueue=new bT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ui(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await cr.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zc(this,{idToken:e}),i=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(di(this));const t=e?un(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vT(this),t=new wT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new tl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await mT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ui(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await cr.create(this,[Ui(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,a);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Tv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Q_(`Error while retrieving App Check token: ${e.error}`),e?.token}}function mi(r){return un(r)}class _b{constructor(e){this.auth=e,this.observer=null,this.addObserver=BE(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let mu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ST(r){mu=r}function Cv(r){return mu.loadJS(r)}function ET(){return mu.recaptchaEnterpriseScript}function _T(){return mu.gapiScript}function TT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class CT{constructor(){this.enterprise=new RT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class RT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const NT="recaptcha-enterprise",Rv="NO_RECAPTCHA";class DT{constructor(e){this.type=NT,this.auth=mi(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{oT(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new rT(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function a(o,c,u){const h=window.grecaptcha;xb(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(Rv)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CT().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(u=>{if(!t&&xb(window.grecaptcha))a(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=ET();h.length!==0&&(h+=u),Cv(h).then(()=>{a(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Tb(r,e,t,i=!1,a=!1){const o=new DT(r);let c;if(a)c=Rv;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Jc(r,e,t,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Tb(r,e,t,t==="getOobCode");return i(r,o)}else return i(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Tb(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(o)})}function kT(r,e){const t=pp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(mr(o,e??{}))return a;jn(a,"already-initialized")}return t.initialize({options:e})}function MT(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ui);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function Nv(r,e,t){const i=mi(r);he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!!t?.disableWarnings,o=Dv(e),{host:c,port:u}=LT(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},p=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){he(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),he(mr(f,i.config.emulator)&&mr(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Sr(c)?(nv(`${o}//${c}${h}`),iv("Auth",!0)):a||OT()}function Dv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function LT(r){const e=Dv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:Cb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Cb(c)}}}function Cb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function OT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class wp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}async function IT(r,e){return Qi(r,"POST","/v1/accounts:signUp",e)}async function PT(r,e){return al(r,"POST","/v1/accounts:signInWithPassword",Ki(r,e))}async function jT(r,e){return Qi(r,"POST","/v1/accounts:sendOobCode",Ki(r,e))}async function BT(r,e){return jT(r,e)}async function UT(r,e){return al(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,e))}async function FT(r,e){return al(r,"POST","/v1/accounts:signInWithEmailLink",Ki(r,e))}class Yo extends wp{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Yo(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Yo(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jc(e,t,"signInWithPassword",PT);case"emailLink":return UT(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Jc(e,i,"signUpPassword",IT);case"emailLink":return FT(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ur(r,e){return al(r,"POST","/v1/accounts:signInWithIdp",Ki(r,e))}const zT="http://localhost";class Gi extends wp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Gi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...o}=t;if(!i||!a)return null;const c=new Gi(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ur(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ur(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ur(e,t)}buildRequest(){const e={requestUri:zT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nl(t)}return e}}function HT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VT(r){const e=Lo(Oo(r)).link,t=e?Lo(Oo(e)).deep_link_id:null,i=Lo(Oo(r)).deep_link_id;return(i?Lo(Oo(i)).link:null)||i||t||e||r}class Ap{constructor(e){const t=Lo(Oo(e)),i=t.apiKey??null,a=t.oobCode??null,o=HT(t.mode??null);he(i&&a&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=VT(e);try{return new Ap(t)}catch{return null}}}class Ms{constructor(){this.providerId=Ms.PROVIDER_ID}static credential(e,t){return Yo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ap.parseLink(t);return he(i,"argument-error"),Yo._fromEmailAndCode(e,i.code,i.tenantId)}}Ms.PROVIDER_ID="password";Ms.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ms.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class gu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Er extends gu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hi extends Er{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),Gi._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),Gi._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return hi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return hi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:o,nonce:c,providerId:u}=e;if(!i&&!a&&!t&&!o||!u)return null;try{return new hi(u)._credential({idToken:t,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class Ss extends Er{constructor(){super("facebook.com")}static credential(e){return Gi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";class Gn extends Er{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Gi._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Gn.credential(t,i)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";class Es extends Er{constructor(){super("github.com")}static credential(e){return Gi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.GITHUB_SIGN_IN_METHOD="github.com";Es.PROVIDER_ID="github.com";class _s extends Er{constructor(){super("twitter.com")}static credential(e,t){return Gi._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return _s.credential(t,i)}catch{return null}}}_s.TWITTER_SIGN_IN_METHOD="twitter.com";_s.PROVIDER_ID="twitter.com";async function kv(r,e){return al(r,"POST","/v1/accounts:signUp",Ki(r,e))}class $i{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await $n._fromIdTokenResponse(e,i,a),c=Rb(i);return new $i({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Rb(i);return new $i({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Rb(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function GT(r){if(ln(r.app))return Promise.reject(di(r));const e=mi(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new $i({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await kv(e,{returnSecureToken:!0}),i=await $i._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}class eu extends Xi{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new eu(e,t,i,a)}}function Mv(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?eu._fromErrorAndOperation(r,o,e,i):o})}function $T(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function Lv(r,e,t=!1){const i=await $o(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return $i._forOperation(r,"link",i)}async function qT(r,e,t){await qo(e);const i=$T(e.providerData);he(i.has(t)===r,e.auth,"provider-already-linked")}async function YT(r,e,t=!1){const{auth:i}=r;if(ln(i.app))return Promise.reject(di(i));const a="reauthenticate";try{const o=await $o(r,Mv(i,a,e,r),t);he(o.idToken,i,"internal-error");const c=vp(o.idToken);he(c,i,"internal-error");const{sub:u}=c;return he(r.uid===u,i,"user-mismatch"),$i._forOperation(r,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&jn(i,"user-mismatch"),o}}async function Ov(r,e,t=!1){if(ln(r.app))return Promise.reject(di(r));const i="signIn",a=await Mv(r,i,e),o=await $i._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(o.user),o}async function WT(r,e){return Ov(mi(r),e)}async function Iv(r,e){const t=un(r);return await qT(!1,t,e.providerId),Lv(t,e)}async function Pv(r){const e=mi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XT(r,e,t){const i=mi(r);await Jc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",BT)}async function KT(r,e,t){if(ln(r.app))return Promise.reject(di(r));const i=mi(r),c=await Jc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",kv).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Pv(r),h}),u=await $i._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(u.user),u}function QT(r,e,t){return ln(r.app)?Promise.reject(di(r)):WT(un(r),Ms.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Pv(r),i})}function ZT(r,e,t,i){return un(r).onIdTokenChanged(e,t,i)}function JT(r,e,t){return un(r).beforeAuthStateChanged(e,t)}function eC(r,e,t,i){return un(r).onAuthStateChanged(e,t,i)}function jv(r){return un(r).signOut()}const tu="__sak";class Bv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const tC=1e3,nC=10;class Uv extends Bv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_v(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);yT()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,nC):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},tC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uv.type="LOCAL";const iC=Uv;class Fv extends Bv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Fv.type="SESSION";const zv=Fv;function sC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class yu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new yu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const u=Array.from(c).map(async f=>f(t.origin,o)),h=await sC(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yu.receivers=[];function Sp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class aC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=Sp("",20);a.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function fi(){return window}function rC(r){fi().location.href=r}function Hv(){return typeof fi().WorkerGlobalScope<"u"&&typeof fi().importScripts=="function"}async function oC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lC(){return navigator?.serviceWorker?.controller||null}function cC(){return Hv()?self:null}const Vv="firebaseLocalStorageDb",uC=1,nu="firebaseLocalStorage",Gv="fbase_key";class rl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function bu(r,e){return r.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function dC(){const r=indexedDB.deleteDatabase(Vv);return new rl(r).toPromise()}function Ff(){const r=indexedDB.open(Vv,uC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(nu,{keyPath:Gv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(nu)?e(i):(i.close(),await dC(),e(await Ff()))})})}async function Nb(r,e,t){const i=bu(r,!0).put({[Gv]:e,value:t});return new rl(i).toPromise()}async function hC(r,e){const t=bu(r,!1).get(e),i=await new rl(t).toPromise();return i===void 0?null:i.value}function Db(r,e){const t=bu(r,!0).delete(e);return new rl(t).toPromise()}const fC=800,pC=3;class $v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>pC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Hv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yu._getInstance(cC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await oC(),!this.activeServiceWorker)return;this.sender=new aC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ff();return await Nb(e,tu,"1"),await Db(e,tu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Nb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>hC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Db(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=bu(a,!1).getAll();return new rl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$v.type="LOCAL";const mC=$v;new sl(3e4,6e4);function Ep(r,e){return e?Ui(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class _p extends wp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ur(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ur(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ur(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gC(r){return Ov(r.auth,new _p(r),r.bypassAuthState)}function yC(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),YT(t,new _p(r),r.bypassAuthState)}async function bC(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),Lv(t,new _p(r),r.bypassAuthState)}class qv{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gC;case"linkViaPopup":case"linkViaRedirect":return bC;case"reauthViaPopup":case"reauthViaRedirect":return yC;default:jn(this.auth,"internal-error")}}resolve(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Vi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vC=new sl(2e3,1e4);async function gf(r,e,t){if(ln(r.app))return Promise.reject(qn(r,"operation-not-supported-in-this-environment"));const i=mi(r);hv(r,e,gu);const a=Ep(i,t);return new Cs(i,"signInViaPopup",e,a).executeNotNull()}async function Yv(r,e,t){const i=un(r);hv(i.auth,e,gu);const a=Ep(i.auth,t);return new Cs(i.auth,"linkViaPopup",e,a,i).executeNotNull()}class Cs extends qv{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Vi(this.filter.length===1,"Popup operations only handle one event");const e=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,vC.get())};e()}}Cs.currentPopupAction=null;const xC="pendingRedirect",qc=new Map;class wC extends qv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=qc.get(this.auth._key());if(!e){try{const i=await AC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}qc.set(this.auth._key(),e)}return this.bypassAuthState||qc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AC(r,e){const t=_C(e),i=EC(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function SC(r,e){qc.set(r._key(),e)}function EC(r){return Ui(r._redirectPersistence)}function _C(r){return $c(xC,r.config.apiKey,r.name)}async function TC(r,e,t=!1){if(ln(r.app))return Promise.reject(di(r));const i=mi(r),a=Ep(i,e),c=await new wC(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const CC=600*1e3;class RC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Wv(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(qn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CC&&this.cachedEventUids.clear(),this.cachedEventUids.has(kb(e))}saveEventToCache(e){this.cachedEventUids.add(kb(e)),this.lastProcessedEventTime=Date.now()}}function kb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Wv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function NC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wv(r);default:return!1}}async function DC(r,e={}){return Qi(r,"GET","/v1/projects",e)}const kC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MC=/^https?/;async function LC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await DC(r);for(const t of e)try{if(OC(t))return}catch{}jn(r,"unauthorized-domain")}function OC(r){const e=Bf(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!MC.test(t))return!1;if(kC.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const IC=new sl(3e4,6e4);function Mb(){const r=fi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function PC(r){return new Promise((e,t)=>{function i(){Mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Mb(),t(qn(r,"network-request-failed"))},timeout:IC.get()})}if(fi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fi().gapi?.load)i();else{const a=TT("iframefcb");return fi()[a]=()=>{gapi.load?i():t(qn(r,"network-request-failed"))},Cv(`${_T()}?onload=${a}`).catch(o=>t(o))}}).catch(e=>{throw Yc=null,e})}let Yc=null;function jC(r){return Yc=Yc||PC(r),Yc}const BC=new sl(5e3,15e3),UC="__/auth/iframe",FC="emulator/auth/iframe",zC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VC(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?bp(e,FC):`https://${r.config.authDomain}/${UC}`,i={apiKey:e.apiKey,appName:r.name,v:il},a=HC.get(r.config.apiHost);a&&(i.eid=a);const o=r._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${nl(i).slice(1)}`}async function GC(r){const e=await jC(r),t=fi().gapi;return he(t,r,"internal-error"),e.open({where:document.body,url:VC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zC,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=qn(r,"network-request-failed"),u=fi().setTimeout(()=>{o(c)},BC.get());function h(){fi().clearTimeout(u),a(i)}i.ping(h).then(h,()=>{o(c)})}))}const $C={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},qC=500,YC=600,WC="_blank",XC="http://localhost";class Lb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(r,e,t,i=qC,a=YC){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...$C,width:i.toString(),height:a.toString(),top:o,left:c},f=Wt().toLowerCase();t&&(u=xv(f)?WC:t),bv(f)&&(e=e||XC,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[x,S])=>`${v}${x}=${S},`,"");if(gT(f)&&u!=="_self")return QC(e||"",u),new Lb(null);const g=window.open(e||"",u,p);he(g,r,"popup-blocked");try{g.focus()}catch{}return new Lb(g)}function QC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const ZC="__/auth/handler",JC="emulator/auth/handler",eR=encodeURIComponent("fac");async function Ob(r,e,t,i,a,o){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:il,eventId:a};if(e instanceof gu){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",jE(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof Er){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await r._getAppCheckToken(),f=h?`#${eR}=${encodeURIComponent(h)}`:"";return`${tR(r)}?${nl(u).slice(1)}${f}`}function tR({config:r}){return r.emulator?bp(r,JC):`https://${r.authDomain}/${ZC}`}const yf="webStorageSupport";class nR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zv,this._completeRedirectFn=TC,this._overrideRedirectResult=SC}async _openPopup(e,t,i,a){Vi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Ob(e,t,i,Bf(),a);return KC(e,o,Sp())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await Ob(e,t,i,Bf(),a);return rC(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Vi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await GC(e),i=new RC(e);return t.register("authEvent",a=>(he(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yf,{type:yf},a=>{const o=a?.[0]?.[yf];o!==void 0&&t(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=LC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _v()||vv()||xp()}}const iR=nR;var Ib="@firebase/auth",Pb="1.12.0";class sR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function aR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rR(r){gr(new oa("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;he(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Tv(r)},f=new AT(i,a,o,h);return MT(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),gr(new oa("auth-internal",e=>{const t=mi(e.getProvider("auth").getImmediate());return(i=>new sR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ds(Ib,Pb,aR(r)),Ds(Ib,Pb,"esm2020")}const oR=300,lR=tv("authIdTokenMaxAge")||oR;let jb=null;const cR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>lR)return;const a=t?.token;jb!==a&&(jb=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uR(r=mp()){const e=pp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=kT(r,{popupRedirectResolver:iR,persistence:[mC,iC,zv]}),i=tv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=cR(o.toString());JT(t,c,()=>c(t.currentUser)),ZT(t,u=>c(u))}}const a=J1("auth");return a&&Nv(t,`http://${a}`),t}function dR(){return document.getElementsByTagName("head")?.[0]??document}ST({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const o=qn("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",dR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rR("Browser");var hR="firebase",fR="12.9.0";Ds(hR,fR,"app");const Xv=M.createContext();let Dc={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"};const Bb=r=>{if(!r||typeof r!="string")return!0;const e=r.trim();return e===""||e.includes("your_")||e.includes("replace_me")||e.includes("changeme")};let zf=null,xt=null,Ub=!1;try{if(window.MOCK_AUTH)Bb(Dc.apiKey)&&(console.log("Using dummy Firebase config for MOCK_AUTH mode"),Dc={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"});else if(Bb(Dc.apiKey))throw new Error("Firebase client configuration is missing or invalid. Authentication will be unavailable.");zf=U_().length===0?ov(Dc):mp(),xt=uR(zf),"".toLowerCase()==="true"&&!Ub&&(Nv(xt,"http://localhost:9099",{disableWarnings:!0}),Ub=!0)}catch(r){console.error("Failed to initialize Firebase:",r)}const pR=({children:r})=>{const[e,t]=M.useState({status:"pending",user:null,error:null});M.useEffect(()=>{if(window.MOCK_AUTH){const g=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;t({status:!!g?"authenticated":"unauthenticated",user:g||null,error:null});return}if(!xt){t({status:"error",user:null,error:new Error("Firebase Auth not available")}),console.error("Firebase Auth not available");return}const p=eC(xt,async g=>{if(!g){try{const v=await GT(xt);t({status:"authenticated",user:v.user,error:null})}catch(v){console.error("Authentication error:",v),t({status:"error",user:null,error:v})}return}t({status:"authenticated",user:g,error:null})},g=>{console.error("Authentication observer error:",g),t({status:"error",user:null,error:g})});return()=>p()},[]);const i=async()=>{if(!xt)throw new Error("Auth is not available");return gf(xt,new Gn)},a=async()=>{if(!xt)throw new Error("Auth is not available");return gf(xt,new hi("microsoft.com"))},o=async()=>{if(!xt)throw new Error("Auth is not available");return gf(xt,new hi("apple.com"))},c=async(p,g)=>{if(!xt)throw new Error("Auth is not available");return QT(xt,p,g)},u=async(p,g)=>{if(!xt)throw new Error("Auth is not available");return KT(xt,p,g)},h=async p=>{if(!xt)throw new Error("Auth is not available");return XT(xt,p)},f=async()=>{xt&&await jv(xt)};return y.jsx(Xv.Provider,{value:{authState:e,app:zf,auth:xt,signInWithGoogle:i,signInWithMicrosoft:a,signInWithApple:o,signInWithEmail:c,signUpWithEmail:u,resetPassword:h,signOutUser:f},children:r})},gi=()=>{const r=M.useContext(Xv);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r};function mR(){const{authState:r,auth:e}=gi();return M.useRef(!1),M.useEffect(()=>{},[r?.status,r?.user?.isAnonymous,e]),null}var Kv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Fb=wn.createContext&&wn.createContext(Kv),gR=["attr","size","title"];function yR(r,e){if(r==null)return{};var t=bR(r,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(t[i]=r[i])}return t}function bR(r,e){if(r==null)return{};var t={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;t[i]=r[i]}return t}function iu(){return iu=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},iu.apply(this,arguments)}function zb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function su(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zb(Object(t),!0).forEach(function(i){vR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):zb(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function vR(r,e,t){return e=xR(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xR(r){var e=wR(r,"string");return typeof e=="symbol"?e:e+""}function wR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Qv(r){return r&&r.map((e,t)=>wn.createElement(e.tag,su({key:t},e.attr),Qv(e.child)))}function Te(r){return e=>wn.createElement(AR,iu({attr:su({},r.attr)},e),Qv(r.child))}function AR(r){var e=t=>{var{attr:i,size:a,title:o}=r,c=yR(r,gR),u=a||t.size||"1em",h;return t.className&&(h=t.className),r.className&&(h=(h?h+" ":"")+r.className),wn.createElement("svg",iu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:h,style:su(su({color:r.color||t.color},t.style),r.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&wn.createElement("title",null,o),r.children)};return Fb!==void 0?wn.createElement(Fb.Consumer,null,t=>e(t)):e(Kv)}function Zv(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(r)}function SR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function ER(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(r)}function Hf(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(r)}function _R(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function Jv(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function ex(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function tx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z"},child:[]},{tag:"path",attr:{d:"M9 13h2v5a1 1 0 11-2 0v-5z"},child:[]}]})(r)}function nx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.415 1.415l.707-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z",clipRule:"evenodd"},child:[]}]})(r)}function TR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z",clipRule:"evenodd"},child:[]}]})(r)}function Tp(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"},child:[]}]})(r)}function ix(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function sx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(r)}function CR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"},child:[]}]})(r)}function ax(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"},child:[]}]})(r)}function Cp(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(r)}function vu(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"},child:[]}]})(r)}function RR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"},child:[]}]})(r)}function rx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(r)}function NR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944zM11 14a1 1 0 11-2 0 1 1 0 012 0zm0-7a1 1 0 10-2 0v3a1 1 0 102 0V7z",clipRule:"evenodd"},child:[]}]})(r)}function xu(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"},child:[]}]})(r)}function DR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"},child:[]}]})(r)}function kR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},child:[]}]})(r)}function MR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},child:[]}]})(r)}function LR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578a18.87 18.87 0 01-1.724 4.78c.29.354.596.696.914 1.026a1 1 0 11-1.44 1.389c-.188-.196-.373-.396-.554-.6a19.098 19.098 0 01-3.107 3.567 1 1 0 01-1.334-1.49 17.087 17.087 0 003.13-3.733 18.992 18.992 0 01-1.487-2.494 1 1 0 111.79-.89c.234.47.489.928.764 1.372.417-.934.752-1.913.997-2.927H3a1 1 0 110-2h3V3a1 1 0 011-1zm6 6a1 1 0 01.894.553l2.991 5.982a.869.869 0 01.02.037l.99 1.98a1 1 0 11-1.79.895L15.383 16h-4.764l-.724 1.447a1 1 0 11-1.788-.894l.99-1.98.019-.038 2.99-5.982A1 1 0 0113 8zm-1.382 6h2.764L13 11.236 11.618 14z",clipRule:"evenodd"},child:[]}]})(r)}function ox(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(r)}function Rp(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function OR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(r)}function IR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function PR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5 8a1 1 0 011-1h1V6a1 1 0 012 0v1h1a1 1 0 110 2H9v1a1 1 0 11-2 0V9H6a1 1 0 01-1-1z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8zm6-4a4 4 0 100 8 4 4 0 000-8z",clipRule:"evenodd"},child:[]}]})(r)}function jR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M5 8a1 1 0 011-1h4a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(r)}const Hb={primary:"bg-slate-900 text-white border border-transparent hover:bg-slate-800 shadow-lg shadow-slate-900/20",secondary:"bg-white text-slate-900 border border-slate-200 hover:bg-slate-50 shadow-sm",outline:"bg-transparent text-slate-600 border border-slate-200 hover:border-slate-300 hover:text-slate-900",ghost:"bg-transparent text-slate-600 border border-transparent hover:bg-slate-100 hover:text-slate-900"},Vb={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-sm",lg:"px-8 py-4 text-base"},ta=({variant:r="primary",size:e="md",className:t="",href:i,to:a,onClick:o,children:c,type:u="button",...h})=>{const f="inline-flex items-center justify-center font-bold rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",p=Hb[r]||Hb.primary,g=Vb[e]||Vb.md,v=`${f} ${p} ${g} ${t}`;return a?y.jsx(ut,{to:a,className:v,...h,children:c}):i?y.jsx("a",{href:i,className:v,...h,children:c}):y.jsx("button",{type:u,onClick:o,className:v,...h,children:c})},Gb=[{label:"How it works",href:"#how-it-works"},{label:"Features",href:"#features"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",to:"/pricing"}],lx=({variant:r="marketing",onOpenPdf:e,children:t})=>{const i=cn(),{authState:a}=gi(),[o,c]=M.useState(!1),u=r==="app",h=i.pathname==="/"||i.pathname==="/app",f=i.pathname==="/sign-in"||i.pathname==="/sign-up",p=a?.status==="authenticated";M.useEffect(()=>{c(!1)},[i.pathname,i.hash]);const g=f?i.pathname==="/sign-in"?{label:"Sign Up",to:"/sign-up"}:{label:"Sign In",to:"/sign-in"}:e?{label:"Open PDF",onClick:e}:p?{label:"Profile",to:"/profile"}:{label:"Sign In",to:"/sign-in"},v=f?null:e?p?{label:"Profile",to:"/profile",variant:"outline"}:{label:"Sign In",to:"/sign-in",variant:"outline"}:null,x=()=>c(_=>!_),S=()=>c(!1),w=_=>{const R="hover:text-slate-900 transition-colors no-underline text-slate-600";return _.href&&_.href.startsWith("#")?h?y.jsx("a",{className:R,href:_.href,onClick:S,children:_.label}):y.jsx(ut,{className:R,to:{pathname:"/",hash:_.href},onClick:S,children:_.label}):y.jsx(ut,{className:R,to:_.to,onClick:S,children:_.label})},E=(_,R="")=>{if(!_)return null;const{label:T,to:N,onClick:D,variant:O="primary"}=_,j=D?()=>{S(),D()}:void 0;return y.jsx(ta,{variant:O,size:"sm",to:N,onClick:j,className:R,children:T})};return y.jsxs("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:[y.jsxs("div",{className:`mx-auto flex w-full items-center justify-between px-6 ${u?"h-14 py-2":"max-w-6xl py-4"}`,children:[y.jsxs(ut,{to:"/",className:"flex items-center gap-3 text-lg font-bold tracking-tight text-slate-900 no-underline",children:[y.jsx("img",{src:Y1,alt:"DecoDocs",className:"h-9 w-9"}),!u&&"DecoDocs"]}),!u&&y.jsx("nav",{className:"hidden items-center gap-8 text-sm font-semibold text-slate-600 md:flex",children:Gb.map(_=>y.jsx("span",{children:w(_)},_.label))}),y.jsxs("div",{className:"flex items-center gap-3",children:[!u&&y.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[E(v,"bg-white/50"),E(g)]}),u&&y.jsxs("div",{id:"header-app-actions",className:"flex items-center gap-2",children:[y.jsxs(ut,{to:"/pricing",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-full transition-colors no-underline border border-amber-200/60",children:[y.jsx(xu,{className:"w-3.5 h-3.5"}),"Upgrade"]}),y.jsx(ut,{to:"/profile",className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 transition-colors border border-slate-200/60",title:a?.user?.email||"Profile",children:a?.user?.photoURL?y.jsx("img",{src:a.user.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover"}):y.jsx(OR,{className:"w-4 h-4 text-slate-500"})})]}),!u&&y.jsxs("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-slate-200 bg-white/80 p-2 text-slate-700 shadow-sm transition hover:border-slate-300 md:hidden","aria-expanded":o,"aria-controls":"site-mobile-menu",onClick:x,children:[y.jsx("span",{className:"sr-only",children:"Toggle menu"}),o?y.jsxs("svg",{"aria-hidden":"true",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[y.jsx("path",{d:"M5 5L15 15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M15 5L5 15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]}):y.jsxs("svg",{"aria-hidden":"true",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[y.jsx("path",{d:"M3 5H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M3 10H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M3 15H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})]})]})]}),!u&&y.jsx("div",{id:"site-mobile-menu",className:`md:hidden ${o?"block":"hidden"}`,children:y.jsxs("div",{className:"px-6 pb-4 pt-2",children:[y.jsx("div",{className:"flex flex-col gap-3 text-sm font-semibold text-slate-700",children:Gb.map(_=>y.jsx("span",{children:w(_)},_.label))}),y.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[E(v,"w-full justify-center bg-white/60"),E(g,"w-full justify-center")]})]})}),t]})},Vf=({onOpenPdf:r=()=>{},children:e})=>y.jsxs("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900 font-sans",children:[y.jsx(mR,{}),y.jsxs("div",{className:"relative overflow-hidden",children:[y.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[y.jsx("div",{className:"absolute -top-32 -right-20 h-72 w-72 rounded-full bg-[#d8e6ff] blur-3xl opacity-60 animate-float-slow"}),y.jsx("div",{className:"absolute top-40 -left-24 h-72 w-72 rounded-full bg-[#fde4c7] blur-3xl opacity-50 animate-float-slow"})]}),y.jsx(lx,{onOpenPdf:r}),y.jsx("main",{className:"relative z-10",children:e}),y.jsx(W1,{})]})]}),BR=({onOpenPdf:r})=>y.jsx("section",{id:"hero",className:"px-6 pt-24 pb-20 lg:pt-32 lg:pb-24",children:y.jsxs("div",{className:"mx-auto grid w-full max-w-6xl items-center gap-16 lg:grid-cols-[1.1fr_0.9fr]",children:[y.jsxs("div",{className:"flex flex-col gap-8",children:[y.jsx("span",{className:"w-fit rounded-full border border-slate-200 bg-white px-4 py-1.5 text-xs font-bold uppercase tracking-wider text-slate-600 shadow-sm",children:"Modern document intelligence"}),y.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-slate-900 md:text-6xl leading-[1.1]",children:["Decode documents ",y.jsx("br",{className:"hidden lg:block"}),y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-900 to-slate-600",children:"before you sign."})]}),y.jsx("p",{className:"text-xl text-slate-600 leading-relaxed max-w-xl",children:"DecoDocs turns dense PDFs into clear decisions with AI summaries, risk flags, and evidence-backed explanations."}),y.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[y.jsx(ta,{variant:"primary",size:"lg",onClick:r,className:"w-full sm:w-auto",children:"Analyze a Document"}),y.jsx(ta,{variant:"secondary",size:"lg",to:"/view",className:"w-full sm:w-auto",children:"View Demo"})]}),y.jsxs("div",{className:"flex flex-wrap gap-6 text-sm font-medium text-slate-500 mt-2",children:[y.jsxs("span",{className:"flex items-center gap-2.5",children:[y.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),"Free mode never stores files"]}),y.jsxs("span",{className:"flex items-center gap-2.5",children:[y.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-slate-900"}),"Pro includes vaults & history"]})]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute -top-12 -right-12 h-64 w-64 rounded-full bg-purple-100 blur-3xl opacity-60 animate-float-slow"}),y.jsx("div",{className:"absolute -bottom-12 -left-12 h-64 w-64 rounded-full bg-amber-100 blur-3xl opacity-60 animate-float-slow",style:{animationDelay:"2s"}}),y.jsxs("div",{className:"relative rounded-3xl border border-white/60 bg-white/80 backdrop-blur-xl p-8 shadow-2xl shadow-slate-900/10 ring-1 ring-slate-900/5 transition-transform hover:scale-[1.01] duration-500",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:[y.jsx("span",{children:"Contract Review"}),y.jsx("span",{children:"12 pages"})]}),y.jsxs("div",{className:"space-y-5",children:[y.jsxs("div",{className:"rounded-2xl bg-amber-50 p-5 border border-amber-100/50",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 font-bold text-xs",children:"!"}),y.jsx("span",{className:"text-xs font-bold text-amber-700 uppercase tracking-wide pt-0.5",children:"Risk Flagged"})]}),y.jsx("p",{className:"text-base text-slate-800 leading-snug font-medium",children:"Termination clause requires 90-day notice and carries a 3x fee."})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 font-bold text-xs",children:"i"}),y.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide pt-0.5",children:"Plain English"})]}),y.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"You must give three months notice or pay a penalty equal to three months of fees."})]}),y.jsxs("div",{className:"rounded-2xl bg-slate-900 p-5 text-white shadow-lg shadow-slate-900/10",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-700 flex items-center justify-center text-white font-bold text-xs",children:""}),y.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide pt-0.5",children:"Recommendation"})]}),y.jsx("p",{className:"text-sm font-medium leading-relaxed",children:"Renegotiate the termination period to 30 days or cap the penalty at 1x fee."})]})]}),y.jsxs("div",{className:"mt-8 flex items-center justify-between rounded-2xl bg-slate-50 border border-slate-100 px-5 py-4 text-xs",children:[y.jsxs("span",{className:"flex items-center gap-2 text-slate-500",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"AI decode complete"]}),y.jsx("span",{className:"font-bold text-slate-900 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:"Ready to review"})]})]})]})]})}),_r=({eyebrow:r,title:e,description:t,align:i="center"})=>{const a=i==="left"?"items-start text-left":"items-center text-center";return y.jsxs("div",{className:`flex flex-col gap-3 ${a}`,children:[r?y.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:r}):null,y.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:e}),t?y.jsx("p",{className:"text-base md:text-lg text-slate-600 max-w-2xl",children:t}):null]})},UR=()=>y.jsx("section",{className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(_r,{eyebrow:"Trusted teams",title:"Teams use DecoDocs to review faster",description:"From startups to procurement teams, we help busy leaders move faster without missing critical terms."}),y.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:dE.map(r=>y.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-lg shadow-slate-900/5",children:[y.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:r.value}),y.jsx("p",{className:"mt-2 text-sm text-slate-500",children:r.label})]},r.label))}),y.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-5 text-xs uppercase tracking-[0.2em] text-slate-400",children:uE.map(r=>y.jsx("span",{children:r},r))})]})}),FR=()=>{const r=[Rp,xu,Hf];return y.jsx("section",{id:"how-it-works",className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(_r,{eyebrow:"How it works",title:"Three steps to clarity",description:"No onboarding, no templates. Drop in a document and get structured insights within seconds.",align:"left"}),y.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:hE.map((e,t)=>y.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",t+1]}),wn.createElement(r[t],{className:"w-6 h-6 text-slate-400"})]}),y.jsx("h3",{className:"mt-6 text-xl font-semibold text-slate-900",children:e.title}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:e.description})]},e.title))})]})})},zR=()=>{const r=[Tp,sx,DR,RR,kR,rx];return y.jsx("section",{id:"features",className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(_r,{eyebrow:"Product",title:"Every insight you need to move faster",description:"Built for modern teams that need clarity, speed, and secure workflows."}),y.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:fE.map((e,t)=>y.jsxs("div",{className:"group rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5 transition hover:-translate-y-1",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white",children:wn.createElement(r[t],{className:"w-5 h-5"})}),y.jsx("h3",{className:"mt-5 text-lg font-semibold text-slate-900",children:e.title}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:e.description})]},e.title))})]})})},HR=()=>{const r=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");return y.jsx("section",{id:"use-cases",className:"px-6 py-24 bg-slate-50",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-12",children:[y.jsx(_r,{eyebrow:"Use cases",title:"Built for high-stakes decisions",description:"DecoDocs supports every team that needs clean answers before signing or committing.",align:"left"}),y.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:Vc.map((e,t)=>y.jsxs("div",{className:"group relative flex flex-col rounded-3xl border border-slate-200 bg-white p-8 shadow-sm hover:shadow-xl hover:border-slate-300 transition-all duration-300",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs font-bold uppercase tracking-wider text-slate-400 mb-6 group-hover:text-slate-600 transition-colors",children:[y.jsx("span",{children:e.audience||"Use case"}),y.jsx("span",{children:String(t+1).padStart(2,"0")})]}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4 group-hover:text-amber-600 transition-colors",children:e.title}),y.jsx("p",{className:"text-base text-slate-600 leading-relaxed",children:e.description}),y.jsxs(ut,{to:`/use-cases/${e.slug||r(e.title)}`,className:"mt-8 pt-6 border-t border-slate-100 flex items-center text-sm font-bold text-slate-900 opacity-60 group-hover:opacity-100 transition-opacity no-underline hover:text-slate-900",children:[y.jsx("span",{children:"Learn more"}),y.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},e.title))})]})})};function VR(r){return Te({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.482 12.944c-0.942-0.235-1.466-0.984-1.468-2.095-0-0.355 0.025-0.525 0.114-0.754 0.217-0.56 0.793-0.982 1.55-1.138 0.377-0.077 0.493-0.16 0.493-0.353 0-0.060 0.045-0.24 0.1-0.399 0.249-0.724 0.71-1.327 1.202-1.573 0.515-0.258 0.776-0.316 1.399-0.313 0.886 0.005 1.327 0.197 1.945 0.846l0.34 0.357 0.304-0.105c1.473-0.51 2.942 0.358 3.061 1.809l0.032 0.397 0.29 0.104c0.829 0.297 1.218 0.92 1.148 1.837-0.046 0.599-0.326 1.078-0.77 1.315l-0.209 0.112-4.638 0.009c-3.564 0.007-4.697-0.006-4.893-0.055v0zM1.613 12.281c-0.565-0.142-1.164-0.67-1.445-1.273-0.159-0.342-0.168-0.393-0.168-0.998 0-0.576 0.014-0.668 0.14-0.954 0.267-0.603 0.78-1.038 1.422-1.21 0.136-0.036 0.263-0.094 0.283-0.128s0.043-0.221 0.050-0.415c0.045-1.206 0.794-2.269 1.839-2.61 0.565-0.184 1.306-0.202 1.92 0.058 0.195 0.082 0.173 0.1 0.585-0.471 0.244-0.338 0.705-0.695 1.108-0.909 0.435-0.231 0.887-0.337 1.428-0.336 1.512 0.004 2.815 1.003 3.297 2.529 0.154 0.487 0.146 0.624-0.035 0.628-0.079 0.002-0.306 0.048-0.505 0.102l-0.361 0.099-0.329-0.348c-0.928-0.98-2.441-1.192-3.728-0.522-0.514 0.268-0.927 0.652-1.239 1.153-0.222 0.357-0.506 1.024-0.506 1.189 0 0.117-0.090 0.176-0.474 0.309-1.189 0.412-1.883 1.364-1.882 2.582 0 0.443 0.108 0.986 0.258 1.296 0.057 0.117 0.088 0.228 0.070 0.247-0.046 0.049-1.525 0.032-1.73-0.019v0z"},child:[]}]})(r)}function GR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.959 5.523c-.54 0-.959.42-.959.899v7.549a4.59 4.59 0 004.613 4.494 4.717 4.717 0 004.135-2.457c.779 1.438 2.337 2.457 4.074 2.457 2.577 0 4.674-2.037 4.674-4.613.06-2.457-2.037-4.495-4.613-4.495-1.738 0-3.295.959-4.074 2.397-.78-1.438-2.338-2.397-4.135-2.397-1.079 0-2.038.36-2.817.899V6.422a.92.92 0 00-.898-.899zM17.602 9.26a.95.95 0 00-.704.158c-.36.3-.479.899-.18 1.318l2.397 3.116-2.396 3.115c-.3.42-.24.96.18 1.26.419.3 1.016.298 1.316-.122l2.039-2.636 2.096 2.697c.3.36.899.419 1.318.12.36-.3.42-.84.121-1.259l-2.338-3.115 2.338-3.057c.3-.419.298-1.018-.121-1.318-.48-.3-1.019-.24-1.318.18l-2.096 2.576-2.04-2.695c-.149-.18-.373-.3-.612-.338zM4.613 11.154c1.558 0 2.817 1.26 2.817 2.758 0 1.558-1.259 2.756-2.817 2.756-1.558 0-2.816-1.198-2.816-2.756 0-1.498 1.258-2.758 2.816-2.758zm8.27 0c1.558 0 2.816 1.26 2.816 2.758-.06 1.558-1.318 2.756-2.816 2.756-1.558 0-2.817-1.198-2.817-2.756 0-1.498 1.259-2.758 2.817-2.758Z"},child:[]}]})(r)}function $R(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 1.807L0 5.629l6 3.822 6.001-3.822L6 1.807zM18 1.807l-6 3.822 6 3.822 6-3.822-6-3.822zM0 13.274l6 3.822 6.001-3.822L6 9.452l-6 3.822zM18 9.452l-6 3.822 6 3.822 6-3.822-6-3.822zM6 18.371l6.001 3.822 6-3.822-6-3.822L6 18.371z"},child:[]}]})(r)}function qR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.01 1.485c-2.082 0-3.754.02-3.743.047.01.02 1.708 3.001 3.774 6.62l3.76 6.574h3.76c2.081 0 3.753-.02 3.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76 1.73a789.828 789.861 0 0 0-3.63 6.319L0 15.868l1.89 3.298 1.885 3.297 3.62-6.335 3.618-6.33-1.88-3.287C8.1 4.704 7.255 3.22 7.25 3.214zm2.259 12.653-.203.348c-.114.198-.96 1.672-1.88 3.287a423.93 423.948 0 0 1-1.698 2.97c-.01.026 3.24.042 7.222.042h7.244l1.796-3.157c.992-1.734 1.85-3.23 1.906-3.323l.104-.167h-7.249z"},child:[]}]})(r)}function YR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.164 7.93V5.084a2.198 2.198 0 001.267-1.978v-.067A2.2 2.2 0 0017.238.845h-.067a2.2 2.2 0 00-2.193 2.193v.067a2.196 2.196 0 001.252 1.973l.013.006v2.852a6.22 6.22 0 00-2.969 1.31l.012-.01-7.828-6.095A2.497 2.497 0 104.3 4.656l-.012.006 7.697 5.991a6.176 6.176 0 00-1.038 3.446c0 1.343.425 2.588 1.147 3.607l-.013-.02-2.342 2.343a1.968 1.968 0 00-.58-.095h-.002a2.033 2.033 0 102.033 2.033 1.978 1.978 0 00-.1-.595l.005.014 2.317-2.317a6.247 6.247 0 104.782-11.134l-.036-.005zm-.964 9.378a3.206 3.206 0 113.215-3.207v.002a3.206 3.206 0 01-3.207 3.207z"},child:[]}]})(r)}function WR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.762 4.29a6.51 6.51 0 0 0-5.669 3.332 3.571 3.571 0 0 0-1.558-.36 3.571 3.571 0 0 0-3.516 3A4.918 4.918 0 0 0 0 14.796a4.918 4.918 0 0 0 4.92 4.914 4.93 4.93 0 0 0 .617-.045h14.42c2.305-.272 4.041-2.258 4.043-4.589v-.009a4.594 4.594 0 0 0-3.727-4.508 6.51 6.51 0 0 0-6.511-6.27z"},child:[]}]})(r)}const XR=[{name:"Google Drive",icon:qR,color:"#4285F4"},{name:"Dropbox",icon:$R,color:"#0061FE"},{name:"OneDrive",icon:VR,color:"#0078D4"},{name:"iCloud",icon:WR,color:"#3693F3"},{name:"Box",icon:GR,color:"#0061D5"},{name:"HubSpot",icon:YR,color:"#FF7A59"}],KR=()=>y.jsx("section",{className:"px-6 py-24 bg-white",children:y.jsx("div",{className:"mx-auto w-full max-w-6xl",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-12",children:[y.jsxs("div",{className:"flex-1 space-y-8",children:[y.jsx(_r,{eyebrow:"Integrations",title:"Connects with your workflow in one click",description:"DecoDocs integrates seamlessly with the tools you already use. Analyze documents directly from your cloud storage or email.",align:"left"}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"Works with all file types"]}),y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"Secure OAuth connection"]}),y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"No file duplication"]})]})]}),y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-6",children:XR.map(r=>y.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-slate-50 border border-slate-100 rounded-2xl shadow-sm w-32 h-32 hover:shadow-md transition-shadow group",children:[y.jsx(r.icon,{size:40,color:r.color,className:"mb-3 transition-transform group-hover:scale-110"}),y.jsx("span",{className:"text-xs font-semibold text-slate-600",children:r.name})]},r.name))})})]})})}),QR=[{title:"Your data is never used for training",description:"We and our AI partners never use your documents to train models. Your data remains yours, contractually guaranteed.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})},{title:"Locked down, end-to-end",description:"Your data is encrypted at rest (AES-256) and in transit (TLS 1.3). Only you can access your documents.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{title:"Privacy-first architecture",description:"DecoDocs is built with privacy as a core principle. Anonymous mode never stores files on our servers.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})},{title:"Built for enterprise IT",description:"Single Sign-On (SSO), audit logs, and custom retention polices available for enterprise teams.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}],ZR=()=>y.jsx("section",{className:"px-6 py-24 bg-slate-50",children:y.jsxs("div",{className:"mx-auto w-full max-w-6xl flex flex-col gap-12",children:[y.jsx(_r,{eyebrow:"Security",title:"Secure by design. Trusted by teams.",description:"We take security seriously. Your documents are your business, keeping them safe is ours.",align:"center"}),y.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:QR.map(r=>y.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm flex flex-col gap-4 hover:shadow-md transition-shadow",children:[y.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center",children:r.icon}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:r.title}),y.jsx("p",{className:"text-slate-600 leading-relaxed",children:r.description})]})]},r.title))}),y.jsxs("div",{className:"mt-8 p-8 bg-slate-900 rounded-3xl text-white text-center",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Ready to start?"}),y.jsx("p",{className:"text-slate-300 mb-8 max-w-2xl mx-auto",children:"Join thousands of professionals who trust DecoDocs to understand their documents faster."}),y.jsx("div",{className:"flex justify-center gap-4",children:y.jsx("a",{href:"#hero",className:"inline-flex items-center justify-center font-bold rounded-full px-8 py-4 text-base bg-white text-slate-900 hover:bg-slate-100 transition-colors",children:"Get Started for Free"})})]})]})}),JR=()=>{const r=Wi(),e=M.useRef(null),t=()=>{e.current&&e.current.click()},i=a=>{const o=a.target.files?.[0];if(o){if(o.type!=="application/pdf"){alert("Please select a valid PDF file"),a.target.value="";return}window.gtag&&window.gtag("event","home_open_pdf_click",{event_category:"engagement",event_label:"landing_open_pdf"}),r("/view",{state:{document:{id:Date.now()+Math.random(),name:o.name,size:o.size,type:o.type,file:o}}}),a.target.value=""}};return y.jsxs(Vf,{onOpenPdf:t,children:[y.jsx("input",{ref:e,type:"file",accept:".pdf,application/pdf",onChange:i,style:{display:"none"}}),y.jsx(BR,{onOpenPdf:t}),y.jsx(UR,{}),y.jsx(FR,{}),y.jsx(KR,{}),y.jsx(zR,{}),y.jsx(HR,{}),y.jsx(ZR,{})]})};const eN="type.googleapis.com/google.protobuf.Int64Value",tN="type.googleapis.com/google.protobuf.UInt64Value";function cx(r,e){const t={};for(const i in r)r.hasOwnProperty(i)&&(t[i]=e(r[i]));return t}function au(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>au(e));if(typeof r=="function"||typeof r=="object")return cx(r,e=>au(e));throw new Error("Data cannot be encoded in JSON: "+r)}function yr(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case eN:case tN:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>yr(e)):typeof r=="function"||typeof r=="object"?cx(r,e=>yr(e)):r}const Np="functions";const $b={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qt extends Xi{constructor(e,t,i){super(`${Np}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,qt.prototype)}}function nN(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ru(r,e){let t=nN(r),i=t,a;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!$b[c])return new qt("internal","internal");t=$b[c],i=c}const u=o.message;typeof u=="string"&&(i=u),a=o.details,a!==void 0&&(a=yr(a))}}catch{}return t==="ok"?null:new qt(t,i,a)}class iN{constructor(e,t,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,ln(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||a?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:a}}}const Gf="us-central1",sN=/^data: (.*?)(?:\n|$)/;function aN(r){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new qt("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class rN{constructor(e,t,i,a,o=Gf,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new iN(e,t,i,a),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=Gf}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function oN(r,e,t){const i=Sr(e);r.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(nv(r.emulatorOrigin+"/backends"),iv("Functions",!0))}function lN(r,e,t){const i=a=>uN(r,e,a,t||{});return i.stream=(a,o)=>hN(r,e,a,o),i}function ux(r){return r.emulatorOrigin&&Sr(r.emulatorOrigin)?"include":void 0}async function cN(r,e,t,i,a){t["Content-Type"]="application/json";let o;try{o=await i(r,{method:"POST",body:JSON.stringify(e),headers:t,credentials:ux(a)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function dx(r,e){const t={},i=await r.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function uN(r,e,t,i){const a=r._url(e);return dN(r,a,t,i)}async function dN(r,e,t,i){t=au(t);const a={data:t},o=await dx(r,i),c=i.timeout||7e4,u=aN(c),h=await Promise.race([cN(e,a,o,r.fetchImpl,r),u.promise,r.cancelAllRequests]);if(u.cancel(),!h)throw new qt("cancelled","Firebase Functions instance was deleted.");const f=ru(h.status,h.json);if(f)throw f;if(!h.json)throw new qt("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new qt("internal","Response is missing data field.");return{data:yr(p)}}function hN(r,e,t,i){const a=r._url(e);return fN(r,a,t,i||{})}async function fN(r,e,t,i){t=au(t);const a={data:t},o=await dx(r,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await r.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:o,signal:i?.signal,credentials:ux(r)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const S=new qt("cancelled","Request was cancelled.");return{data:Promise.reject(S),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(S)}}}}}}const x=ru(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let u,h;const f=new Promise((v,x)=>{u=v,h=x});i?.signal?.addEventListener("abort",()=>{const v=new qt("cancelled","Request was cancelled.");h(v)});const p=c.body.getReader(),g=pN(p,u,h,i?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:x,done:S}=await v.read();return{value:x,done:S}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:f}}function pN(r,e,t,i){const a=(c,u)=>{const h=c.match(sN);if(!h)return;const f=h[1];try{const p=JSON.parse(f);if("result"in p){e(yr(p.result));return}if("message"in p){u.enqueue(yr(p.message));return}if("error"in p){const g=ru(0,p);u.error(g),t(g);return}}catch(p){if(p instanceof qt){u.error(p),t(p);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(i?.aborted){const f=new qt("cancelled","Request was cancelled");return c.error(f),t(f),Promise.resolve()}try{const{value:f,done:p}=await r.read();if(p){u.trim()&&a(u.trim(),c),c.close();return}if(i?.aborted){const v=new qt("cancelled","Request was cancelled");c.error(v),t(v),await r.cancel();return}u+=o.decode(f,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&a(v.trim(),c);return h()}catch(f){const p=f instanceof qt?f:ru(0,null);c.error(p),t(p)}}},cancel(){return r.cancel()}})}const qb="@firebase/functions",Yb="0.13.1";const mN="auth-internal",gN="app-check-internal",yN="messaging-internal";function bN(r){const e=(t,{instanceIdentifier:i})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider(mN),c=t.getProvider(yN),u=t.getProvider(gN);return new rN(a,o,c,u,i)};gr(new oa(Np,e,"PUBLIC").setMultipleInstances(!0)),Ds(qb,Yb,r),Ds(qb,Yb,"esm2020")}function hx(r=mp(),e=Gf){const i=pp(un(r),Np).getImmediate({identifier:e}),a=SE("functions");return a&&fx(i,...a),i}function fx(r,e,t){oN(un(r),e,t)}function pi(r,e,t){return lN(un(r),e,t)}bN();const px=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:qt,connectFunctionsEmulator:fx,getFunctions:hx,httpsCallable:pi},Symbol.toStringTag,{value:"Module"})),Hn=({children:r,showHeader:e=!0,showFooter:t=!0,variant:i="marketing"})=>{const{authState:a}=gi();a.status==="error"&&a.error?.message;const o=i==="app";return y.jsxs("div",{className:`min-h-screen bg-[#f7f6f2] text-slate-900 flex flex-col ${o?"h-screen overflow-hidden":""}`,children:[e&&y.jsx(lx,{variant:i}),y.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:r}),t?y.jsx(W1,{}):null]})},mx=({onFileSelect:r,onEdit:e,pageNumber:t,numPages:i,pageScale:a,onPreviousPage:o,onNextPage:c,onZoomIn:u,onZoomOut:h,fileInputRef:f})=>y.jsxs("div",{id:"viewer-page-controls",className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-slate-800/85 backdrop-blur-md px-3 py-1.5 rounded-full shadow-lg border border-white/10 z-30 text-white text-xs",children:[y.jsx("button",{onClick:()=>f.current?.click(),className:"p-1 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Open PDF",children:y.jsx(Rp,{className:"w-3.5 h-3.5"})}),y.jsx("div",{className:"w-px h-3.5 bg-white/20"}),y.jsx("button",{onClick:o,disabled:t<=1,className:"p-0.5 bg-transparent rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors text-white",children:y.jsx(Jv,{className:"w-3.5 h-3.5"})}),y.jsxs("span",{className:"font-medium text-white min-w-[3ch] text-center select-none tabular-nums",children:[t," ",y.jsxs("span",{className:"text-slate-400",children:["/ ",i||"-"]})]}),y.jsx("button",{onClick:c,disabled:t>=i,className:"p-0.5 bg-transparent rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors text-white",children:y.jsx(ex,{className:"w-3.5 h-3.5"})}),y.jsx("div",{className:"w-px h-3.5 bg-white/20"}),y.jsx("button",{onClick:h,className:"p-0.5 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Zoom Out",children:y.jsx(jR,{className:"w-3.5 h-3.5"})}),y.jsxs("span",{className:"font-medium text-slate-400 w-8 text-center select-none tabular-nums",children:[Math.round(a*100),"%"]}),y.jsx("button",{onClick:u,className:"p-0.5 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Zoom In",children:y.jsx(PR,{className:"w-3.5 h-3.5"})}),y.jsx("input",{type:"file",ref:f,accept:".pdf",onChange:r,className:"hidden"})]}),vN=(r,e)=>{const t=M.useRef(null),i=M.useRef(null),a=M.useRef(null),o=p=>{alert(`Clause: ${p.text}

${p.details||"No details available."}`)},c=p=>{alert(`Risk: ${p.description}

${p.explanation||"No explanation available."}`)},u=M.useCallback(async(p,g)=>{if(i.current){i.current.innerHTML="";try{const x=(await p.getTextContent()).items,S=g.transform;for(const w of x){const E=document.createElement("span");E.textContent=w.str,E.style.position="absolute",E.style.color="transparent",E.style.whiteSpace="pre",E.style.fontSize=`${w.height}px`,E.style.fontFamily="sans-serif",E.style.lineHeight="1";const _=S[0]*w.transform[4]+S[2]*w.transform[5]+S[4],R=S[1]*w.transform[4]+S[3]*w.transform[5]+S[5];E.style.left=`${_}px`,E.style.top=`${R}px`,E.style.width=`${w.width*S[0]}px`,E.style.height=`${w.height*S[3]}px`,i.current.appendChild(E)}}catch(v){console.error("Error rendering text layer:",v)}}},[]),h=M.useCallback((p,g,v,x,S)=>{a.current&&(a.current.innerHTML="",v.filter(w=>w.pageNum===p).forEach(w=>{const E=document.createElement("div");E.className="highlight-overlay",E.style.position="absolute",E.style.backgroundColor="rgba(255, 255, 0, 0.3)",E.style.border="1px solid rgba(255, 255, 0, 0.5)",E.style.left=`${w.x}px`,E.style.top=`${w.y}px`,E.style.width=`${w.width}px`,E.style.height=`${w.height}px`,E.style.pointerEvents="none",E.dataset.page=p,a.current.appendChild(E)}),x.filter(w=>w.pageNum===p).forEach(w=>{const E=document.createElement("div");E.className="clause-marker",E.style.position="absolute",E.style.left=`${w.x}px`,E.style.top=`${w.y}px`,E.style.width="20px",E.style.height="20px",E.style.borderRadius="50%",E.style.backgroundColor="rgba(0, 123, 255, 0.7)",E.style.cursor="pointer",E.style.zIndex="10",E.title=w.text,E.onclick=()=>o(w),a.current.appendChild(E)}),S.filter(w=>w.pageNum===p).forEach(w=>{const E=document.createElement("div");E.className="risk-badge",E.style.position="absolute",E.style.left=`${w.x}px`,E.style.top=`${w.y}px`,E.style.padding="2px 6px",E.style.borderRadius="10px",E.style.fontSize="12px",E.style.fontWeight="bold",E.style.color="white",E.style.backgroundColor=w.level==="high"?"#dc3545":w.level==="medium"?"#fd7e14":"#ffc107",E.style.cursor="pointer",E.style.zIndex="10",E.title=w.description,E.onclick=()=>c(w),E.textContent=w.level.toUpperCase(),a.current.appendChild(E)}))},[]),f=M.useCallback(async(p,g=[],v=[],x=[])=>{if(!(!r||!t.current))try{const S=await r.getPage(p),w=t.current,E=w.getContext("2d"),_=e,R=S.getViewport({scale:_});w.height=R.height,w.width=R.width,E.clearRect(0,0,w.width,w.height);const T={canvasContext:E,viewport:R};await S.render(T).promise,await u(S,R),h(p,R,g,v,x)}catch(S){console.error("Error rendering page:",S)}},[r,e,u,h]);return{canvasRef:t,textLayerRef:i,annotationsRef:a,renderPage:f}},xN=({pdfDoc:r,pageNum:e,scale:t,highlights:i=[],clauseMarkers:a=[],riskBadges:o=[],id:c,children:u})=>{const{canvasRef:h,textLayerRef:f,annotationsRef:p,renderPage:g}=vN(r,t);return M.useEffect(()=>{r&&e&&g(e,i,a,o)},[r,e,t,i,a,o,g]),y.jsxs("div",{id:c,className:"relative bg-white shadow-lg mb-8 transition-transform origin-top",style:{width:"fit-content",height:"fit-content"},children:[y.jsx("canvas",{ref:h,className:"block"}),y.jsx("div",{ref:f,className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-0 leading-none"}),y.jsx("div",{ref:p,className:"absolute top-0 left-0 w-full h-full pointer-events-none"}),u]})},gx=({pdfDoc:r,numPages:e,pageScale:t,isLoading:i,loadingMessage:a,onPageVisible:o,highlights:c=[],clauseMarkers:u=[],riskBadges:h=[],renderPageOverlay:f})=>{const p=M.useRef(null);return M.useEffect(()=>{if(!r||!p.current||!o)return;const g=new IntersectionObserver(x=>{x.forEach(S=>{if(S.isIntersecting){const w=parseInt(S.target.getAttribute("data-page-num"),10);o(w)}})},{root:p.current,threshold:.5});return p.current.querySelectorAll(".page-wrapper").forEach(x=>g.observe(x)),()=>g.disconnect()},[r,e,o]),i?y.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600 h-full",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),y.jsx("p",{children:a||"Loading PDF..."})]})}):r?y.jsx("div",{className:"flex flex-col items-center gap-8 py-8 w-full",children:Array.from({length:e},(g,v)=>v+1).map(g=>y.jsx("div",{className:"page-wrapper","data-page-num":g,children:y.jsx(xN,{id:`pdf-page-${g}`,pdfDoc:r,pageNum:g,scale:t,highlights:c,clauseMarkers:u,riskBadges:h,children:f?f(g):null})},g))}):null},yx=({onFileSelect:r})=>{const[e,t]=M.useState(!1),i=M.useRef(null),a=u=>{u.preventDefault(),t(!0)},o=u=>{u.preventDefault(),t(!1)},c=u=>{u.preventDefault(),t(!1),u.dataTransfer.files&&u.dataTransfer.files.length>0&&r({target:{files:u.dataTransfer.files}})};return y.jsxs("div",{className:`flex flex-col items-center justify-center w-full max-w-2xl mx-auto h-96 border-2 border-dashed rounded-3xl transition-all duration-300 ${e?"border-blue-500 bg-blue-50/50 scale-105 shadow-xl":"border-slate-300 bg-white/50 hover:border-blue-400 hover:bg-slate-50"}`,onDragOver:a,onDragLeave:o,onDrop:c,children:[y.jsx("div",{className:`p-6 rounded-full mb-6 transition-colors ${e?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400"}`,children:y.jsx(tx,{className:"w-16 h-16"})}),y.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Upload a PDF to start"}),y.jsx("p",{className:"text-slate-500 mb-8 text-center max-w-md px-4",children:"Drag and drop your file here, or click the button below to browse your computer."}),y.jsxs("button",{onClick:()=>i.current?.click(),className:"px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-600/20 transition-all hover:-translate-y-1 active:translate-y-0 flex items-center gap-3",children:[y.jsx(TR,{className:"w-6 h-6"}),"Choose File"]}),y.jsx("input",{type:"file",ref:i,onChange:r,accept:".pdf",className:"hidden"})]})},wN=({pdfDoc:r,pageNum:e,onClick:t,isActive:i})=>{const a=M.useRef(null);return M.useEffect(()=>{if(!r||!a.current)return;(async()=>{try{const c=await r.getPage(e),u=c.getViewport({scale:.15}),h=a.current,f=h.getContext("2d");h.height=u.height,h.width=u.width,await c.render({canvasContext:f,viewport:u}).promise}catch{}})()},[r,e]),y.jsxs("button",{id:`thumb-${e}`,onClick:t,className:`flex flex-col items-center gap-1 w-full rounded-md p-1 transition-all ${i?"bg-blue-50 ring-1 ring-blue-400":"hover:bg-slate-100"}`,children:[y.jsx("div",{className:"shadow-sm bg-white rounded-sm overflow-hidden",children:y.jsx("canvas",{ref:a,className:"block w-16 h-auto"})}),y.jsx("span",{className:`text-[10px] tabular-nums ${i?"text-blue-600 font-semibold":"text-slate-400"}`,children:e})]})},bx=({pdfDoc:r,numPages:e,currentPage:t,onPageClick:i})=>!r||!e?null:y.jsx("div",{id:"viewer-thumbnails",className:"w-24 bg-white/80 backdrop-blur-sm border-r border-slate-200/60 h-full overflow-y-auto py-2 px-1.5 flex flex-col gap-1",children:Array.from({length:e},(a,o)=>o+1).map(a=>y.jsx(wN,{pdfDoc:r,pageNum:a,isActive:t===a,onClick:()=>i(a)},a))}),AN=({risk:r})=>{const e=i=>{switch(i){case"high":return"bg-red-600";case"medium":return"bg-orange-500";case"low":return"bg-yellow-500";default:return"bg-gray-500"}},t=i=>{switch(i){case"high":return"border-l-red-600";case"medium":return"border-l-orange-500";case"low":return"border-l-yellow-500";default:return"border-l-gray-500"}};return y.jsxs("div",{className:`mb-3 border border-gray-300 rounded overflow-hidden ${t(r.riskLevel)}`,children:[y.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-50",children:[y.jsx("h6",{className:"m-0 text-gray-700 font-semibold",children:r.clause}),y.jsx("span",{className:`px-2 py-0.5 rounded-xl text-xs font-bold text-white ${e(r.riskLevel)}`,children:r.riskLevel.toUpperCase()})]}),y.jsxs("div",{className:"p-2.5 bg-white",children:[y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Risk:"})," ",r.description]}),y.jsxs("p",{className:"m-0",children:[y.jsx("strong",{children:"Plain Language:"})," ",r.explanation]})]})]})},SN=({analysis:r})=>{const e=r?._meta||{status:r?"success":"idle"};if(!r||e.status==="idle")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsx("p",{className:"text-gray-700 m-0",children:"No analysis yet. Run Type-specific analysis (recommended) to see results here."})]});if(e.status==="loading")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[y.jsx("div",{className:"w-5 h-5 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),y.jsx("div",{children:e.message||"Analyzing"})]})]});if(e.status==="error")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsxs("div",{className:"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-900",children:[y.jsx("div",{className:"font-semibold",children:"Analysis failed"}),y.jsx("div",{className:"mt-1",children:e.message||"Request failed."})]})]});const t=typeof r.summary=="string"&&r.summary.trim().length>0,i=Array.isArray(r.risks)&&r.risks.length>0,a=Array.isArray(r.recommendations)&&r.recommendations.length>0;return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),!t&&!r.typeSpecific?y.jsx("p",{className:"text-gray-700 m-0",children:"No results were returned yet."}):null,t&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Document Summary"}),y.jsx("p",{className:"text-gray-700",children:r.summary})]}),i&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Identified Risks"}),r.risks.map(o=>y.jsx(AN,{risk:o},o.id))]}),r.typeSpecific&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Type-specific (beta)"}),y.jsxs("div",{className:"text-gray-700",style:{whiteSpace:"pre-wrap"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"effectiveTypeId:"})," ",r.typeSpecific.effectiveTypeId||""]}),y.jsxs("div",{children:[y.jsx("strong",{children:"validationSlug:"})," ",r.typeSpecific.validationSlug||""]}),y.jsxs("div",{children:[y.jsx("strong",{children:"validationTitle:"})," ",r.typeSpecific.validationTitle||""]}),r.typeSpecific.result?.plainExplanation?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"explanation:"}),y.jsx("div",{children:r.typeSpecific.result.plainExplanation})]}):null,r.typeSpecific.usage?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"usage:"}),y.jsxs("div",{children:["estimatedTokens: ",r.typeSpecific.usage.estimatedTokens??"","  ","remainingTokens: ",r.typeSpecific.usage.remainingTokens??""]})]}):null,r.typeSpecific.ok===!1&&(r.typeSpecific.code||r.typeSpecific.requiredTier)?y.jsxs("div",{style:{marginTop:8,color:"#991b1b"},children:[y.jsx("strong",{children:"blocked:"})," ",r.typeSpecific.code||"",r.typeSpecific.requiredTier?` (required: ${r.typeSpecific.requiredTier})`:""]}):null,r.typeSpecific.result?.checks?.length?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"checks:"}),y.jsx("ul",{className:"list-none p-0",style:{marginTop:6},children:r.typeSpecific.result.checks.map(o=>y.jsx("li",{className:"mb-2 p-2 border border-gray-200 rounded",children:y.jsxs("div",{children:[y.jsxs("strong",{children:[o.ok?"OK":"FAIL",":"]})," ",o.message]})},o.id))})]}):null,r.typeSpecific.result?.extracted&&Object.keys(r.typeSpecific.result.extracted).length?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"extracted:"}),y.jsx("pre",{style:{marginTop:6,background:"#f8fafc",border:"1px solid #e2e8f0",padding:10,borderRadius:10,overflow:"auto"},children:JSON.stringify(r.typeSpecific.result.extracted,null,2)})]}):null,r.typeSpecific.message?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"message:"}),y.jsx("div",{children:r.typeSpecific.message})]}):null]})]}),a&&y.jsxs("div",{children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Recommendations"}),y.jsx("ul",{className:"list-none p-0",children:r.recommendations.map((o,c)=>y.jsx("li",{className:"mb-4 p-2.5 border border-gray-300 rounded",children:y.jsx("div",{className:"text-gray-700",children:o})},c))})]})]})},EN=({isOpen:r,onToggle:e,onAnalyzeDocument:t,onAnalyzeByType:i,onExplainSelection:a,onHighlightRisks:o,onTranslateToPlainEnglish:c,isLoading:u,isAuthenticated:h,hasDocument:f,selectedDocument:p,analysisResults:g})=>{const[v,x]=M.useState("tools");wn.useEffect(()=>{p&&g[p.id]&&x("results")},[g,p]);const S=!f||!h||u;return r?y.jsxs("div",{className:"w-[350px] bg-white border-l border-slate-200 flex flex-col h-full shadow-xl transition-all relative z-20",children:[y.jsxs("div",{className:"h-14 border-b border-slate-200 flex items-center justify-between px-4 bg-slate-50/50",children:[y.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[y.jsx(xu,{className:"text-purple-600"}),"AI Assistant"]}),y.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded",children:y.jsx(ex,{className:"w-5 h-5 text-slate-500"})})]}),y.jsxs("div",{className:"flex border-b border-slate-200",children:[y.jsx("button",{onClick:()=>x("tools"),className:`flex-1 py-3 text-sm font-medium transition-colors ${v==="tools"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:bg-slate-50"}`,children:"Tools"}),y.jsx("button",{onClick:()=>x("results"),disabled:!p||!g[p.id],className:`flex-1 py-3 text-sm font-medium transition-colors ${v==="results"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:"Results"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:v==="tools"?y.jsxs("div",{className:"flex flex-col gap-3",children:[!f&&y.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 text-center text-sm text-slate-500",children:"Open a document to use AI tools"}),f&&!h&&y.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-sm text-amber-800",children:"Sign in to use AI features."}),y.jsx(bf,{icon:CR,label:"Deep Analysis",sublabel:"Identify risks, obligations & summary",onClick:()=>{i(),x("results")},disabled:S,primary:!0}),y.jsx("div",{className:"h-px bg-slate-100 my-2"}),y.jsx(bf,{icon:NR,label:"Highlight Risks",onClick:o,disabled:S}),y.jsx(bf,{icon:LR,label:"Plain English",onClick:c,disabled:S})]}):y.jsx("div",{className:"prose prose-sm",children:p&&g[p.id]?y.jsx(SN,{analysis:g[p.id]}):y.jsx("div",{className:"text-center text-slate-500 mt-10",children:"No analysis results yet. Run a tool to see output here."})})})]}):y.jsx("button",{onClick:e,className:"absolute right-0 top-1/2 -translate-y-1/2 bg-white border border-slate-200 rounded-l-lg p-2 shadow-md hover:bg-slate-50 z-20",title:"Open AI Sidebar",children:y.jsx(Jv,{className:"w-5 h-5 text-slate-600"})})},bf=({icon:r,label:e,sublabel:t,onClick:i,disabled:a,primary:o})=>y.jsxs("button",{onClick:i,disabled:a,className:`w-full flex items-start gap-3 p-3 rounded-xl border text-left transition-all ${o?"bg-slate-900 border-slate-900 text-white hover:bg-slate-800 shadow-md":"bg-white border-slate-200 text-slate-700 hover:border-slate-300 hover:bg-slate-50"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[y.jsx("div",{className:`p-2 rounded-lg ${o?"bg-white/10":"bg-slate-100"} shrink-0`,children:y.jsx(r,{className:`w-5 h-5 ${o?"text-white":"text-slate-600"}`})}),y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold text-sm",children:e}),t&&y.jsx("div",{className:`text-xs mt-0.5 ${o?"text-slate-300":"text-slate-500"}`,children:t})]})]}),$f=[{id:"dancing-script",label:"Dancing Script",family:"'Dancing Script', cursive"},{id:"great-vibes",label:"Great Vibes",family:"'Great Vibes', cursive"},{id:"allura",label:"Allura",family:"'Allura', cursive"},{id:"parisienne",label:"Parisienne",family:"'Parisienne', cursive"},{id:"sacramento",label:"Sacramento",family:"'Sacramento', cursive"},{id:"alex-brush",label:"Alex Brush",family:"'Alex Brush', cursive"}];let Wb=!1;function _N(){if(Wb)return;Wb=!0;const r=$f.map(t=>t.label.replace(/ /g,"+")).join("&family="),e=document.createElement("link");e.rel="stylesheet",e.href=`https://fonts.googleapis.com/css2?family=${r}&display=swap`,document.head.appendChild(e)}function TN({displayName:r,font:e}){return{version:1,kind:"type",displayName:r,fontId:e.id,fontFamily:e.family,createdAt:new Date().toISOString()}}const CN=({onResult:r})=>{const e=M.useRef(null),[t,i]=M.useState(!1),[a,o]=M.useState(!1),c=()=>e.current?.getContext("2d"),u=M.useCallback(v=>{const x=c();if(!x)return;i(!0);const S=e.current.getBoundingClientRect(),w=(v.clientX??v.touches?.[0]?.clientX)-S.left,E=(v.clientY??v.touches?.[0]?.clientY)-S.top;x.beginPath(),x.moveTo(w,E)},[]),h=M.useCallback(v=>{if(!t)return;const x=c();if(!x)return;v.preventDefault();const S=e.current.getBoundingClientRect(),w=(v.clientX??v.touches?.[0]?.clientX)-S.left,E=(v.clientY??v.touches?.[0]?.clientY)-S.top;x.lineTo(w,E),x.stroke(),o(!0)},[t]),f=M.useCallback(()=>{i(!1)},[]),p=()=>{const v=c();v&&(v.clearRect(0,0,e.current.width,e.current.height),o(!1),r(null))},g=()=>{if(!a)return;const v=e.current.toDataURL("image/png");r({mode:"draw",dataUrl:v,width:200,height:60,persistence:{kind:"ephemeral-data-url",canPersist:!1,reason:"free-tier-no-server-storage"}})};return M.useEffect(()=>{const v=c();v&&(v.strokeStyle="#1e293b",v.lineWidth=2.5,v.lineCap="round",v.lineJoin="round")},[]),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("div",{className:"relative border border-slate-200 rounded-lg bg-white overflow-hidden",children:[y.jsx("canvas",{ref:e,width:440,height:140,className:"w-full cursor-crosshair touch-none",onMouseDown:u,onMouseMove:h,onMouseUp:f,onMouseLeave:f,onTouchStart:u,onTouchMove:h,onTouchEnd:f}),!a&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-300 text-sm pointer-events-none select-none",children:"Draw your signature here"}),y.jsx("div",{className:"absolute bottom-8 left-4 right-4 border-b border-dashed border-slate-200 pointer-events-none"})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[y.jsx(ox,{className:"w-3.5 h-3.5"})," Clear"]}),y.jsx("button",{onClick:g,disabled:!a,className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})]})]})},RN=({onResult:r})=>{const[e,t]=M.useState(""),[i,a]=M.useState($f[0]);M.useEffect(()=>{_N()},[]);const o=()=>{if(!e.trim())return;const c=e.trim();r({mode:"type",text:c,fontFamily:i.family,fontId:i.id,width:200,height:50,persistence:{kind:"candidate-profile",canPersist:!0,target:"firestore-signature-profiles"},profileDraft:TN({displayName:c,font:i})})};return y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Your name"}),y.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Full name",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",autoFocus:!0})]}),y.jsx("div",{className:"border border-slate-200 rounded-lg bg-white p-6 min-h-[90px] flex items-center justify-center",children:e.trim()?y.jsx("span",{className:"text-3xl text-slate-800 select-none",style:{fontFamily:i.family},children:e}):y.jsx("span",{className:"text-slate-300 text-sm",children:"Preview"})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Style"}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:$f.map(c=>y.jsxs("button",{onClick:()=>a(c),className:`px-3 py-2.5 rounded-lg border text-left transition-all ${i.id===c.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-400":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[y.jsx("span",{className:"text-lg text-slate-700 block truncate",style:{fontFamily:c.family},children:e.trim()||"Signature"}),y.jsx("span",{className:"text-[10px] text-slate-400 mt-0.5 block",children:c.label})]},c.id))})]}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:o,disabled:!e.trim(),className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})})]})},NN=({onResult:r})=>{const[e,t]=M.useState(null),[i,a]=M.useState(null),o=M.useRef(null),c=f=>{const p=f.target.files?.[0];if(!p||!p.type.startsWith("image/"))return;const g=new FileReader;g.onload=()=>{t(g.result),a({fileName:p.name,mimeType:p.type||null,sizeBytes:p.size||null})},g.readAsDataURL(p)},u=()=>{e&&r({mode:"upload",dataUrl:e,width:200,height:60,uploadMeta:i,persistence:{kind:"ephemeral-data-url",canPersist:!1,reason:"free-tier-no-server-storage"}})},h=()=>{t(null),a(null),o.current&&(o.current.value=""),r(null)};return y.jsxs("div",{className:"flex flex-col gap-3",children:[e?y.jsx("div",{className:"border border-slate-200 rounded-lg bg-white p-4 flex items-center justify-center min-h-[140px]",children:y.jsx("img",{src:e,alt:"Signature",className:"max-h-[120px] max-w-full object-contain"})}):y.jsxs("button",{onClick:()=>o.current?.click(),className:"border-2 border-dashed border-slate-300 rounded-lg bg-slate-50 hover:bg-slate-100 p-8 flex flex-col items-center gap-2 transition-colors cursor-pointer",children:[y.jsx(vu,{className:"w-8 h-8 text-slate-400"}),y.jsx("span",{className:"text-sm text-slate-500",children:"Click to upload signature image"}),y.jsx("span",{className:"text-[10px] text-slate-400",children:"PNG, JPG, or SVG  transparent background recommended"})]}),y.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:c,className:"hidden"}),y.jsxs("div",{className:"flex items-center justify-between",children:[e&&y.jsxs("button",{onClick:h,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[y.jsx(ox,{className:"w-3.5 h-3.5"})," Remove"]}),y.jsx("div",{className:"flex-1"}),y.jsx("button",{onClick:u,disabled:!e,className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})]})]})},DN=[{id:"draw",label:"Draw",icon:Cp},{id:"type",label:"Type",icon:Tp},{id:"upload",label:"Upload",icon:vu}],kN=({open:r,onClose:e,onAdopt:t,savedSignatures:i=[]})=>{const[a,o]=M.useState("draw");if(!r)return null;const c=u=>{u&&(t(u),e())};return y.jsx("div",{id:"signature-modal-backdrop",className:"fixed inset-0 bg-slate-900/40 flex items-center justify-center z-[2000] p-4",onClick:e,children:y.jsxs("div",{id:"signature-modal",className:"bg-white rounded-2xl border border-slate-200 shadow-2xl w-full max-w-[520px] max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[y.jsx("h2",{className:"text-base font-bold text-slate-900",children:"Create your signature"}),y.jsx("button",{onClick:e,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors",children:y.jsx(IR,{className:"w-5 h-5"})})]}),y.jsx("div",{className:"mx-5 mt-4 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] leading-relaxed text-amber-800",children:"Self-sign only in this version. No multi-party recipients, signee roles, or signing order are supported."}),y.jsx("div",{className:"flex border-b border-slate-100",children:DN.map(u=>{const h=u.icon,f=a===u.id;return y.jsxs("button",{onClick:()=>o(u.id),className:`flex-1 flex items-center justify-center gap-1.5 py-3 text-sm font-medium transition-colors ${f?"text-blue-600 border-b-2 border-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[y.jsx(h,{className:"w-4 h-4"}),u.label]},u.id)})}),y.jsxs("div",{className:"p-5",children:[a==="draw"&&y.jsx(CN,{onResult:c}),a==="type"&&y.jsx(RN,{onResult:c}),a==="upload"&&y.jsx(NN,{onResult:c})]}),y.jsx("div",{className:"px-5 pb-4 text-[11px] text-slate-400 leading-snug",children:"Consent: By adopting this signature, you confirm this is for your own self-sign use and that you are authorized to create and apply it."})]})})},it={UNREADABLE:"UNREADABLE",GENERAL:"GENERAL",BUSINESS_LEGAL:"BUSINESS_LEGAL"},MN=[{id:"unreadable_broken",label:"Unreadable / broken file",category:it.UNREADABLE,synonyms:["corrupt","broken","invalid pdf","cannot open","damaged"]},{id:"unreadable_encrypted",label:"Password-protected / encrypted",category:it.UNREADABLE,synonyms:["encrypted","password","protected"]},{id:"unreadable_empty",label:"Empty / blank document",category:it.UNREADABLE,synonyms:["blank","empty","no text"]},{id:"general_letter",label:"Letter (general / personal)",category:it.GENERAL,synonyms:["letter","correspondence","personal letter"]},{id:"general_police_letter",label:"Police letter / notice",category:it.GENERAL,synonyms:["police","notice","infringement","fine","offence"]},{id:"general_presentation",label:"Presentation / pitch deck",category:it.GENERAL,synonyms:["deck","slides","presentation","pitch"]},{id:"general_marketing",label:"Flyer / advertisement / marketing",category:it.GENERAL,synonyms:["flyer","ad","advertisement","brochure","marketing"]},{id:"general_book",label:"Book / long-form text",category:it.GENERAL,synonyms:["book","chapter","novel","story","longform"]},{id:"general_notes",label:"Notes / diary / journal",category:it.GENERAL,synonyms:["notes","diary","journal","private notes"]},{id:"general_schedule",label:"Schedule / timetable",category:it.GENERAL,synonyms:["schedule","timetable","calendar","rota"]},{id:"general_sop_procedure",label:"SOP / procedure",category:it.GENERAL,synonyms:["sop","procedure","runbook","work instruction","instructions","guide"],validationSlug:"sop-procedure"},{id:"general_resume_cv",label:"Resume / CV",category:it.GENERAL,synonyms:["resume","cv","curriculum vitae","work experience","education","skills"]},{id:"legal_job_offer",label:"Job offer / offer letter",category:it.BUSINESS_LEGAL,synonyms:["offer letter","job offer","employment offer","compensation","salary","starting date"],validationSlug:"job-offer"},{id:"legal_contract_generic",label:"Contract / agreement (general)",category:it.BUSINESS_LEGAL,synonyms:["agreement","contract","terms","conditions"]},{id:"legal_employment_contract",label:"Employment contract",category:it.BUSINESS_LEGAL,synonyms:["employment","employee","employer","salary","position"]},{id:"legal_nda",label:"NDA / confidentiality agreement",category:it.BUSINESS_LEGAL,synonyms:["nda","non-disclosure","confidentiality"]},{id:"legal_lease_residential",label:"Residential lease / tenancy agreement",category:it.BUSINESS_LEGAL,synonyms:["lease","tenancy","rent","bond","landlord","tenant"]},{id:"legal_lease_commercial",label:"Commercial lease",category:it.BUSINESS_LEGAL,synonyms:["commercial lease","premises","outgoings"]},{id:"business_invoice",label:"Invoice",category:it.BUSINESS_LEGAL,synonyms:["invoice","tax invoice","payment due"],validationSlug:"invoice"},{id:"business_purchase_order",label:"Purchase order",category:it.BUSINESS_LEGAL,synonyms:["purchase order","po","order"]},{id:"policy_privacy",label:"Privacy policy",category:it.BUSINESS_LEGAL,synonyms:["privacy policy","personal information","data collection"],validationSlug:"company-policy"},{id:"policy_terms",label:"Terms of service / website terms",category:it.BUSINESS_LEGAL,synonyms:["terms of service","terms","conditions","website terms"]}];function vx(){const[r,e]=M.useState(null);M.useEffect(()=>{let o=!1;return(async()=>{try{const u=await fetch("/classifications/document-types.index.json",{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to load document types: ${u.status}`);const h=await u.json(),f=Array.isArray(h?.types)?h.types:null;if(f)for(const p of f)"validationSlug"in p||(p.validationSlug=null);if(!f)throw new Error("Invalid document-types.index.json");o||e(f)}catch{o||e(null)}})(),()=>{o=!0}},[]);const t=M.useMemo(()=>Array.isArray(r)&&r.length?r:MN,[r]),i=M.useMemo(()=>o=>{const c=String(o||"").trim().toLowerCase();if(!c)return t;const u=h=>{const f=String(h.label||"").toLowerCase(),p=Array.isArray(h.synonyms)?h.synonyms.join(" ").toLowerCase():"";if(f.includes(c))return 100;if(p.includes(c))return 80;const g=c.split(/\s+/).filter(Boolean);return g.length&&g.every(v=>f.includes(v)||p.includes(v))?60:0};return t.map(h=>({t:h,s:u(h)})).filter(h=>h.s>0).sort((h,f)=>f.s-h.s).map(h=>h.t)},[t]);return{types:t,find:i,categories:it,source:Array.isArray(r)&&r.length?"remote":"bundled"}}const LN=(r,e)=>r===e.BUSINESS_LEGAL?"Business & legal":r===e.GENERAL?"General documents":r===e.UNREADABLE?"Unreadable / special cases":"Other";function ON({open:r,onClose:e,detectedType:t,onPick:i}){const[a,o]=M.useState(""),[c,u]=M.useState(0),h=M.useRef(null),{types:f,find:p,categories:g,source:v}=vx();M.useEffect(()=>{r&&(o(""),u(0),setTimeout(()=>h.current?.focus(),0))},[r]);const x=M.useMemo(()=>{const R=p(a);return a?R.slice(0,30):f.slice(0,25)},[a,p,f]),S=M.useMemo(()=>{const R=new Map;for(const T of x){const N=T.category;R.has(N)||R.set(N,[]),R.get(N).push(T)}return Array.from(R.entries())},[x]),w=M.useMemo(()=>x,[x]),E=R=>{const T=w[R];T&&i?.(T)},_=R=>{if(R.key==="Escape"){e?.();return}if(R.key==="ArrowDown"){R.preventDefault(),u(T=>Math.min(T+1,w.length-1));return}if(R.key==="ArrowUp"){R.preventDefault(),u(T=>Math.max(T-1,0));return}R.key==="Enter"&&(R.preventDefault(),E(c))};return r?y.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2500,padding:16},onClick:()=>e?.(),children:y.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:760,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:R=>R.stopPropagation(),onKeyDown:_,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"flex-start"},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Change document type"}),y.jsx("div",{style:{marginTop:6,color:"#475569",lineHeight:1.4},children:"We use this to decide which actions/checks to show. You can override the AI classification."}),t&&y.jsxs("div",{style:{marginTop:8,color:"#64748b",fontSize:13},children:["Detected: ",y.jsx("strong",{children:t.label})]})]}),y.jsx("button",{type:"button",onClick:()=>e?.(),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),y.jsx("input",{ref:h,value:a,onChange:R=>{o(R.target.value),u(0)},placeholder:"Start typing (e.g. lease, invoice, police letter)",style:{marginTop:14,width:"100%",padding:12,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsxs("div",{style:{marginTop:14,maxHeight:360,overflow:"auto"},children:[S.map(([R,T])=>y.jsxs("div",{style:{marginBottom:14},children:[y.jsxs("div",{style:{fontWeight:900,color:"#0f172a",fontSize:13,marginBottom:8},children:[LN(R,g),y.jsxs("span",{style:{marginLeft:8,color:"#94a3b8",fontWeight:800},children:["(",v,")"]})]}),y.jsx("div",{style:{display:"grid",gap:8},children:T.map(N=>{const D=w.findIndex(j=>j.id===N.id),O=D===c;return y.jsxs("button",{type:"button",onClick:()=>i?.(N),onMouseEnter:()=>u(D),style:{textAlign:"left",padding:"10px 12px",borderRadius:12,border:"1px solid "+(O?"#0f172a":"#e2e8f0"),background:O?"#f8fafc":"#fff",cursor:"pointer"},children:[y.jsx("div",{style:{fontWeight:900,color:"#0f172a"},children:N.label}),y.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:2},children:N.id})]},N.id)})})]},R)),!S.length&&y.jsx("div",{style:{color:"#64748b"},children:"No matches."})]})]})}):null}function IN(r){const[e,t]=M.useState({status:"idle",spec:null,error:null});return M.useEffect(()=>{if(!r){t({status:"idle",spec:null,error:null});return}let i=!1;return(async()=>{t({status:"loading",spec:null,error:null});try{const o=await fetch(`/classifications/validation/${r}.json`,{cache:"force-cache"});if(!o.ok)throw new Error(`Failed to load validation spec: ${o.status}`);const c=await o.json();i||t({status:"ready",spec:c,error:null})}catch(o){i||t({status:"error",spec:null,error:o})}})(),()=>{i=!0}},[r]),e}const PN="modulepreload",jN=function(r){return"/"+r},Xb={},Dp=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=h(t.map(f=>{if(f=jN(f),f in Xb)return;Xb[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":PN,p||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),p)return new Promise((x,S)=>{v.addEventListener("load",x),v.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},$t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),qf=[.001,0,0,.001,0,0],vf=1.35,bn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ji={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Wo="pdfjs_internal_editor_",we={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},xx={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Yf={TRIANGLES:1,LATTICE:2},Et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Fo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ir={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ol={ERRORS:0,WARNINGS:1,INFOS:5},br={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Co={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},wx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wu=ol.WARNINGS;function BN(r){Number.isInteger(r)&&(wu=r)}function UN(){return wu}function Au(r){wu>=ol.INFOS&&console.info(`Info: ${r}`)}function ve(r){wu>=ol.WARNINGS&&console.warn(`Warning: ${r}`)}function ze(r){throw new Error(r)}function Fe(r,e){r||ze(e)}function FN(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function kp(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=qN(r)}catch{}const i=e?URL.parse(r,e):URL.parse(r);return FN(i)?i:null}function Mp(r,e,t=!1){const i=URL.parse(r);return i?(i.hash=e,i.href):t&&kp(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function be(r,e,t,i=!1){return Object.defineProperty(r,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const ua=(function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class Kb extends ua{constructor(e,t){super(e,"PasswordException"),this.code=t}}class xf extends ua{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class ou extends ua{constructor(e){super(e,"InvalidPDFException")}}class Xo extends ua{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class zN extends ua{constructor(e){super(e,"FormatError")}}class qi extends ua{constructor(e){super(e,"AbortException")}}function HN(r){(typeof r!="object"||r?.length===void 0)&&ze("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<e;a+=t){const o=Math.min(a+t,e),c=r.subarray(a,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function Su(r){typeof r!="string"&&ze("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=r.charCodeAt(i)&255;return t}function VN(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function GN(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function $N(){try{return new Function(""),!0}catch{return!1}}class wt{static get isLittleEndian(){return be(this,"isLittleEndian",GN())}static get isEvalSupported(){return be(this,"isEvalSupported",$N())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return be(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return be(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return be(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return be(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return be(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const wf=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class ne{static makeHexColor(e,t,i){return`#${wf[e]}${wf[t]}${wf[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,i=0){const a=e[i],o=e[i+1];e[i]=a*t[0]+o*t[2]+t[4],e[i+1]=a*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const a=t[0],o=t[1],c=t[2],u=t[3],h=t[4],f=t[5];for(let p=0;p<6;p+=2){const g=e[i+p],v=e[i+p+1];e[i+p]=g*a+v*c+h,e[i+p+1]=g*o+v*u+f}}static applyInverseTransform(e,t){const i=e[0],a=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-a*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-i*t[1]+a*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,i){const a=t[0],o=t[1],c=t[2],u=t[3],h=t[4],f=t[5],p=e[0],g=e[1],v=e[2],x=e[3];let S=a*p+h,w=S,E=a*v+h,_=E,R=u*g+f,T=R,N=u*x+f,D=N;if(o!==0||c!==0){const O=o*p,j=o*v,Y=c*g,W=c*x;S+=Y,_+=Y,E+=W,w+=W,R+=O,D+=O,N+=j,T+=j}i[0]=Math.min(i[0],S,E,w,_),i[1]=Math.min(i[1],R,N,T,D),i[2]=Math.max(i[2],S,E,w,_),i[3]=Math.max(i[3],R,N,T,D)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],a=e[1],o=e[2],c=e[3],u=i**2+a**2,h=i*o+a*c,f=o**2+c**2,p=(u+f)/2,g=Math.sqrt(p**2-(u*f-h**2));t[0]=Math.sqrt(p+g||1),t[1]=Math.sqrt(p-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>a)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[i,o,a,c]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,a,o){o[0]=Math.min(o[0],e,i),o[1]=Math.min(o[1],t,a),o[2]=Math.max(o[2],e,i),o[3]=Math.max(o[3],t,a)}static#e(e,t,i,a,o,c,u,h,f,p){if(f<=0||f>=1)return;const g=1-f,v=f*f,x=v*f,S=g*(g*(g*e+3*f*t)+3*v*i)+x*a,w=g*(g*(g*o+3*f*c)+3*v*u)+x*h;p[0]=Math.min(p[0],S),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],S),p[3]=Math.max(p[3],w)}static#t(e,t,i,a,o,c,u,h,f,p,g,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,i,a,o,c,u,h,-g/p,v);return}const x=p**2-4*g*f;if(x<0)return;const S=Math.sqrt(x),w=2*f;this.#e(e,t,i,a,o,c,u,h,(-p+S)/w,v),this.#e(e,t,i,a,o,c,u,h,(-p-S)/w,v)}static bezierBoundingBox(e,t,i,a,o,c,u,h,f){f[0]=Math.min(f[0],e,u),f[1]=Math.min(f[1],t,h),f[2]=Math.max(f[2],e,u),f[3]=Math.max(f[3],t,h),this.#t(e,i,o,u,t,a,c,h,3*(-e+3*(i-o)+u),6*(e-2*i+o),3*(i-e),f),this.#t(e,i,o,u,t,a,c,h,3*(-t+3*(a-c)+h),6*(t-2*a+c),3*(a-t),f)}}function qN(r){return decodeURIComponent(escape(r))}let Af=null,Qb=null;function Ax(r){return Af||(Af=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Qb=new Map([["","t"]])),r.replaceAll(Af,(e,t,i)=>t?t.normalize("NFKC"):Qb.get(i))}function Lp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),HN(r)}const ar="pdfjs_internal_id_";function YN(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,a,...o]=t;if(!r(i)&&!Number.isInteger(i)||!e(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function kt(r,e,t){return Math.min(Math.max(r,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class Ko{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function a(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Ko.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const h of o.children)a(h)}return a(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Op{static setupStorage(e,t,i,a,o){const c=a.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",u=>{a.setValue(t,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{a.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",u=>{a.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;a.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:a,linkService:o}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&e.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,f)}u&&o.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,a=e.xfaHtml,o=e.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:i});const u=o!=="richText",h=e.div;if(h.append(c),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const g=document.createTextNode(a.value);c.append(g),u&&Ko.shouldBuildText(a.name)&&f.push(g)}return{textDivs:f}}const p=[[a,-1,c]];for(;p.length>0;){const[g,v,x]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const S=g.children[++p.at(-1)[1]];if(S===null)continue;const{name:w}=S;if(w==="#text"){const _=document.createTextNode(S.value);f.push(_),x.append(_);continue}const E=S?.attributes?.xmlns?document.createElementNS(S.attributes.xmlns,w):document.createElement(w);if(x.append(E),S.attributes&&this.setAttributes({html:E,element:S,storage:t,intent:o,linkService:i}),S.children?.length>0)p.push([S,-1,E]);else if(S.value){const _=document.createTextNode(S.value);u&&Ko.shouldBuildText(w)&&f.push(_),E.append(_)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Ii="http://www.w3.org/2000/svg";class la{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Tr(r,e="text"){if(Io(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=e,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(a.response);return}t(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class ll{constructor({viewBox:e,userUnit:t,scale:i,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=c,i*=t;const h=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,g,v,x;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,g=0,v=0,x=1;break;case 90:p=0,g=1,v=1,x=0;break;case 270:p=0,g=-1,v=-1,x=0;break;case 0:p=1,g=0,v=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,x=-x);let S,w,E,_;p===0?(S=Math.abs(f-e[1])*i+o,w=Math.abs(h-e[0])*i+c,E=(e[3]-e[1])*i,_=(e[2]-e[0])*i):(S=Math.abs(h-e[0])*i+o,w=Math.abs(f-e[1])*i+c,E=(e[2]-e[0])*i,_=(e[3]-e[1])*i),this.transform=[p*i,g*i,v*i,x*i,S-p*i*h-v*i*f,w-g*i*h-x*i*f],this.width=E,this.height=_}get rawDims(){const e=this.viewBox;return be(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new ll({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(e,t){const i=[e,t];return ne.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];ne.applyTransform(t,this.transform);const i=[e[2],e[3]];return ne.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return ne.applyInverseTransform(i,this.transform),i}}class Eu extends ua{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function cl(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function _u(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Sx(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Ex(r,e="document.pdf"){if(typeof r!="string")return e;if(cl(r))return ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return e;const a=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(o.test(c))return a(c);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const h=Array.from(i.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return a(f)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return a(h[0])}return e}class Zb{started=Object.create(null);times=[];time(e){e in this.started&&ve(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ve(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:a,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-a}ms
`);return e.join("")}}function Io(r,e){const t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function An(r){r.preventDefault()}function at(r){r.preventDefault(),r.stopPropagation()}function WN(r){console.log("Deprecated API usage: "+r)}class lu{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const f=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(c+=p,u+=g):f==="+"&&(c-=p,u-=g),new Date(Date.UTC(i,a,o,c,u,h))}}function _x(r,{scale:e=1,rotation:t=0}){const{width:i,height:a}=r.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new ll({viewBox:o,userUnit:1,scale:e,rotation:t})}function Cr(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ve(`Not a valid color format: "${r}"`),[0,0,0])}function XN(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;r.set(t,Cr(i))}e.remove()}function st(r){const{a:e,b:t,c:i,d:a,e:o,f:c}=r.getTransform();return[e,t,i,a,o,c]}function ri(r){const{a:e,b:t,c:i,d:a,e:o,f:c}=r.getTransform().invertSelf();return[e,t,i,a,o,c]}function ks(r,e,t=!1,i=!0){if(e instanceof ll){const{pageWidth:a,pageHeight:o}=e.rawDims,{style:c}=r,u=wt.isCSSRoundSupported,h=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(c.width=p,c.height=g):(c.width=g,c.height=p)}i&&r.setAttribute("data-main-rotation",e.rotation)}class Wn{constructor(){const{pixelRatio:e}=Wn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,a,o=-1){let c=1/0,u=1/0,h=1/0;i=Wn.capPixels(i,o),i>0&&(c=Math.sqrt(i/(e*t))),a!==-1&&(u=a/e,h=a/t);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const cu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class KN{static get isDarkMode(){return be(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Tx{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),be(this,"commentForegroundColor",Cr(i))}}function Cx(r,e,t,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return r=Math.round(r*i+a),e=Math.round(e*i+a),t=Math.round(t*i+a),[r,e,t]}function Jb(r,e){const t=r[0]/255,i=r[1]/255,a=r[2]/255,o=Math.max(t,i,a),c=Math.min(t,i,a),u=(o+c)/2;if(o===c)e[0]=e[1]=0;else{const h=o-c;switch(e[1]=u<.5?h/(o+c):h/(2-o-c),o){case t:e[0]=((i-a)/h+(i<a?6:0))*60;break;case i:e[0]=((a-t)/h+2)*60;break;case a:e[0]=((t-i)/h+4)*60;break}}e[2]=u}function Wf(r,e){const t=r[0],i=r[1],a=r[2],o=(1-Math.abs(2*a-1))*i,c=o*(1-Math.abs(t/60%2-1)),u=a-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+u,e[1]=c+u,e[2]=u;break;case 1:e[0]=c+u,e[1]=o+u,e[2]=u;break;case 2:e[0]=u,e[1]=o+u,e[2]=c+u;break;case 3:e[0]=u,e[1]=c+u,e[2]=o+u;break;case 4:e[0]=c+u,e[1]=u,e[2]=o+u;break;case 5:case 6:e[0]=o+u,e[1]=u,e[2]=c+u;break}}function e1(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function t1(r,e,t){Wf(r,t),t.map(e1);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];Wf(e,t),t.map(e1);const a=.2126*t[0]+.7152*t[1]+.0722*t[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const n1=new Map;function Rx(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=n1.get(t);if(i)return i;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);Jb(r,c);const u=a.subarray(6,9);Jb(e,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),t1(c,u,o)<f){let p,g;h?(p=c[2],g=1):(p=0,g=c[2]);const v=.005;for(;g-p>v;){const x=c[2]=(p+g)/2;h===t1(c,u,o)<f?p=x:g=x}c[2]=h?g:p}return Wf(c,o),i=ne.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),n1.set(t,i),i}function Ip({html:r,dir:e,className:t},i){const a=document.createDocumentFragment();if(typeof r=="string"){const o=document.createElement("p");o.dir=e||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}a.append(o)}else Op.render({xfaHtml:r,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",t),i.append(a)}function Nx(r){const e=new Path2D;if(!r)return e;for(let t=0,i=r.length;t<i;)switch(r[t++]){case Co.moveTo:e.moveTo(r[t++],r[t++]);break;case Co.lineTo:e.lineTo(r[t++],r[t++]);break;case Co.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Co.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Co.closePath:e.closePath();break;default:ve(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}class Pe{static#e=null;static#t=null;static#i=null;static#n=0;static#a=[];get pagesNumber(){return Pe.#n}set pagesNumber(e){Pe.#n!==e&&(Pe.#n=e,e===0&&(Pe.#t=null,Pe.#e=null))}addListener(e){Pe.#a.push(e)}removeListener(e){const t=Pe.#a.indexOf(e);t>=0&&Pe.#a.splice(t,1)}#r(){for(const e of Pe.#a)e()}#s(e){if(Pe.#t)return;const t=Pe.#n,i=new Uint32Array(3*t),a=Pe.#t=i.subarray(0,t),o=Pe.#e=i.subarray(t,2*t);if(e)for(let c=0;c<t;c++)a[c]=o[c]=c+1;Pe.#i=i.subarray(2*t)}movePages(e,t,i){this.#s(!0);const a=Pe.#t,o=Pe.#e;Pe.#i.set(o);const c=t.length,u=new Uint32Array(c);let h=0;for(let x=0;x<c;x++){const S=t[x]-1;u[x]=a[S],S<i&&(h+=1)}const f=Pe.#n;let p=i-h;const g=f-c;p=kt(p,0,g);for(let x=0,S=0;x<f;x++)e.has(x+1)||(a[S++]=a[x]);a.copyWithin(p+c,p,g),a.set(u,p);let v=!1;for(let x=0,S=f;x<S;x++){const w=a[x];v||=w!==x+1,o[w-1]=x+1}this.#r(),v||(this.pagesNumber=0)}hasBeenAltered(){return Pe.#t!==null}getPageMappingForSaving(){return{pageIndices:Pe.#e?Pe.#e.map(e=>e-1):null}}getPrevPageNumber(e){return Pe.#i[Pe.#t[e-1]-1]}getPageNumber(e){return Pe.#e?.[e-1]??e}getPageId(e){return Pe.#t?.[e-1]??e}static get instance(){return be(this,"instance",new Pe)}getMapping(){return Pe.#t.subarray(0,this.pagesNumber)}}class zo{#e=null;#t=null;#i;#n=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(e){this.#i=e,zo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",An,{signal:t}),e.addEventListener("pointerdown",zo.#l,{signal:t}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const a=this.#i.toolbarPosition;if(a){const{style:o}=e,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#i._focusEventsAllowed=!1,at(e)}#d(e){this.#i._focusEventsAllowed=!0,at(e)}#f(e){const t=this.#i._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",An,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",zo.#c[e]),this.#f(i)&&i.addEventListener("click",a=>{t.delete()},{signal:t._signal}),this.#n.append(i)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#a=e}addComment(e,t=null){if(this.#r)return;const i=e.renderForToolbar();if(!i)return;this.#f(i);const a=this.#s=this.#g;t?(this.#n.insertBefore(i,t),this.#n.insertBefore(a,t)):this.#n.append(i,a),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#i);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,i){if(!t&&e==="comment")return;const a=this.#n.querySelector(i);a&&e==="comment"&&this.addComment(t,a)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class QN{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#i._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",An,{signal:t});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,t){let i=0,a=0;for(const o of e){const c=o.y+o.height;if(c<i)continue;const u=o.x+(t?o.width:0);if(c>i){a=u,i=c;continue}t?u>a&&(a=u):u<a&&(a=u)}return[t?1-a:a,i]}show(e,t,i){const[a,o]=this.#a(t,i),{style:c}=this.#t||=this.#n();e.append(this.#t),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,i,a){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",An,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#e.append(o)}}function Dx(r,e,t){for(const i of t)e.addEventListener(i,r[i].bind(r))}class Ue{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(Ue.#t||=new Set).add(e)}static setPointer(e,t){Ue.#e||=t,Ue.#n??=e}static setTimeStamp(e){Ue.#i=e}static isSamePointerId(e){return Ue.#e===e}static isSamePointerIdOrRemove(e){return Ue.#e===e?!0:(Ue.#t?.delete(e),!1)}static isSamePointerType(e){return Ue.#n===e}static isInitializedAndDifferentPointerType(e){return Ue.#n!==null&&!Ue.isSamePointerType(e)}static isSameTimeStamp(e){return Ue.#i===e}static isUsingMultiplePointers(){return Ue.#t?.size>=1}static clearPointerType(){Ue.#n=null}static clearPointerIds(){Ue.#e=NaN,Ue.#t=null}static clearTimeStamp(){Ue.#i=NaN}}class ZN{#e=0;get id(){return`${Wo}${this.#e++}`}}class Pp{#e=Lp();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=e;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return be(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let a;if(typeof t=="string"?(i.url=t,a=await Tr(t,"blob")):t instanceof File?a=i.file=t:t instanceof Blob&&(a=t),a.type==="image/svg+xml"){const o=Pp._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},c.onload=async()=>{const g=i.svgUrl=c.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=c.onerror=p});c.readAsDataURL(a),await h}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){ve(a),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:t,name:i,size:a,type:o}=e;return this.#n(`${t}_${i}_${a}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const i=await t;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class JN{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&e(),this.#t)return;const h={cmd:e,undo:t,post:i,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(c&&this.#e[this.#n].type===o){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const f=this.#n+1;f===this.#i?this.#e.splice(0,1):(this.#n=f,f<this.#e.length&&this.#e.splice(f)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class ul{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wt.platform;for(const[i,a,o={}]of e)for(const c of i){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=i;u&&!u(e,t)||(a.bind(e,...c,t)(),o||at(t))}}class jp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return XN(e),be(this,"_colors",e)}convert(e){const t=Cr(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,a]of this._colors)if(a.every((o,c)=>o===t[c]))return jp._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ne.makeHexColor(...t):e}}class Yi{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new JN;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#_=null;#S=null;#w=null;#C=null;#x=!1;#E=null;#D=new ZN;#R=!1;#N=!1;#j=!1;#M=null;#O=null;#B=null;#I=null;#G=null;#T=we.NONE;#A=new Set;#L=null;#U=null;#z=null;#Y=null;#q=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#$=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Yi.prototype,t=c=>c.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return be(this,"_keyboardManager",new ul([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#$.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,i,a,o,c,u,h,f,p,g,v,x,S,w,E){const _=this._signal=this.#e.signal;this.#$=e,this.#Z=t,this.#J=i,this.#r=a,this.#l=o,this.#U=c,this.#q=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:_}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),u._on("setpreference",this.onSetPreference.bind(this),{signal:_}),u._on("switchannotationeditorparams",R=>this.updateParams(R.type,R.value),{signal:_}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:_}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:_}),this.#re(),this.#he(),this.#te(),this.#s=h.annotationStorage,this.#_=h.filterFactory,this.#z=f,this.#C=p||null,this.#y=g,this.#v=v,this.#b=x,this.#G=S||null,this.viewParameters={realScale:la.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=E!==!1,o?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#t=null,this.#A.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return be(this,"hcmFilter",this.#z?this.#_.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return be(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return be(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return be(this,"highlightColors",null);const t=new Map,i=!!this.#z;for(const[a,o]of e){const c=a.endsWith("_HCM");if(i&&c){t.set(a.replace("_HCM",""),o);continue}!i&&!c&&t.set(a,o)}return be(this,"highlightColors",t)}get highlightColorNames(){return be(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,i,a){this.#l?.showDialog(this,e,t,i,a)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}deleteComment(e,t){const i=()=>{e.comment=t},a=()=>{this._editorUndoBar?.show(i,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:a,undo:i,mustExec:!0})}toggleComment(e,t,i=void 0){this.#l?.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:i}=Promise.withResolvers(),a=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",a),t())};this._eventBus.on("editorsrendered",a),await i}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#b=t)}onPagesEdited({pagesMapper:e}){for(const a of this.#n.values())a.updatePageIndex(e.getPrevPageNumber(a.pageIndex+1)-1);const t=this.#a,i=this.#a=new Map;for(const[a,o]of t){const c=e.getPrevPageNumber(a+1)-1;if(c===-1){o.destroy();continue}i.set(c,o),o.updatePageIndex(c)}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#$.focus()}findParent(e,t){for(const i of this.#a.values()){const{x:a,y:o,width:c,height:u}=i.div.getBoundingClientRect();if(e>=a&&e<=a+c&&t>=o&&t<=o+u)return i}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*la.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of this.#a.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",t=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u}=i,h=i.toString(),p=this.#Q(i).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;i.empty();const v=this.#ee(p),x=this.#T===we.NONE,S=()=>{const w=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u,text:h});x&&this.showAllEditors("highlight",!0,!0),t&&w?.editComment()};if(x){this.switchToMode(we.HIGHLIGHT,S);return}S()}commentSelection(e=""){this.highlightSelection(e,!0)}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#Q(e).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#E||=new QN(this),this.#E.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#s)return null;const t=`${Wo}${e}`,i=this.#s.getRawValue(t);return i&&this.#s.remove(t),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,t=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#L)return;const a=this.#Q(e).closest(".textLayer");if(!a){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=t,this.#k({hasSelectedText:!0}),!(this.#T!==we.HIGHLIGHT&&this.#T!==we.NONE)&&(this.#T===we.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===we.HIGHLIGHT?this.#ee(a):null;if(o?.toggleDrawing(),this.#N){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===we.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#se()}#re(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#A)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#M)return;this.#M=new AbortController;const e=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#M?.abort(),this.#M=null}#ue(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#A){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){ve(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const h of i){const f=await a.deserialize(h);if(!f)return;o.push(f)}const c=()=>{for(const h of o)this.#ne(h);this.#ie(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){ve(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==we.NONE&&!this.isEditorHandlingKeyboard&&Yi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(e){Object.entries(e).some(([i,a])=>this.#W[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#T===we.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[ke.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ue(),this.#k({isEditing:this.#T!==we.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#R?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,i=!1,a=!1,o=!1,c=!1){if(this.#T!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===we.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===we.NONE){this.setEditingState(!1),this.#pe();for(const u of this.#n.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const u of this.#n.values())u.addStandaloneCommentButton();e===we.SIGNATURE&&await this.#U?.loadSignatures(),i&&Ue.clearPointerType(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const u of this.#a.values())u.updateMode(e);if(e===we.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:v}=f;p&&u.add(p),g&&!v&&h.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:g,contentsObj:v}=f;g&&v?.str&&!u.has(p)&&!this.#g.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!t){a&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const u of this.#n.values())u.uid===t?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case ke.CREATE:this.currentLayer.addNewEditor(t);return;case ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const i of this.#A)i.updateParams(e,t);else for(const i of this.#u)i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#Y?.get(ke.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#j!==e){this.#j=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#R){this.#R=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#R){this.#R=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#I?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#A);return e}updateUI(e){this.#me===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#A.has(e)){this.#A.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#A.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const t of this.#A)t!==e&&t.unselect();this.#A.clear(),this.#A.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#A.has(e)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(e){e.unselect(),this.#A.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#A],i=()=>{this._editorUndoBar?.show(a,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},a=()=>{for(const o of t)this.#ne(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#A)t.unselect();this.#A.clear();for(const t of e)t.isEmpty()||(this.#A.add(t),t.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#A)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==we.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#A)e.unselect();this.#A.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[a,o]=this.#H,c=[...this.#A],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#n.has(h.id)&&(h.translateInPage(a,o),h.translationDone())},undo:()=>{for(const h of c)this.#n.has(h.id)&&(h.translateInPage(-a,-o),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#A)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:a,y:o,pageIndex:c},u]of e)u.newX=a,u.newY=o,u.newPageIndex=c,t||=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const i=(a,o,c,u)=>{if(this.#n.has(a.id)){const h=this.#a.get(u);h?a._setParentAndPosition(h,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of e)i(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of e)i(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const i of this.#m.keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==we.NONE}get imageManager(){return be(this,"imageManager",new Pp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,p=t.rangeCount;f<p;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(f,p,g,v)=>({x:(p-a)/c,y:1-(f+g-i)/o,width:v/c,height:g/o});break;case"180":u=(f,p,g,v)=>({x:1-(f+g-i)/o,y:1-(p+v-a)/c,width:g/o,height:v/c});break;case"270":u=(f,p,g,v)=>({x:1-(p+v-a)/c,y:(f-i)/o,width:v/c,height:g/o});break;default:u=(f,p,g,v)=>({x:(f-i)/o,y:(p-a)/c,width:g/o,height:v/c});break}const h=[];for(let f=0,p=t.rangeCount;f<p;f++){const g=t.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:x,width:S,height:w}of g.getClientRects())S===0||w===0||h.push(u(v,x,S,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const i=this.#s.getRawValue(t);i&&(this.#T===we.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){const a=this.#I?.get(e);a&&(a.setCanvas(t,i),this.#I.delete(e))}addMissingCanvas(e,t){(this.#I||=new Map).set(e,t)}}class ci{#e=null;#t=!1;#i=null;#n=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,ci.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ci._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ci.#f.missing),t.setAttribute("data-l10n-id",ci.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;e.addEventListener("contextmenu",An,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",a,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:i}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ci._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#l=i,this.#h=a),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ci.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ci.#f[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class kc{#e=null;#t=null;#i=!1;#n=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:i}=this.#e.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#n.parent.boundingClientRect;return[(e-a)/c,(t+i-o)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",An,{signal:i}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,at(o)},{capture:!0,signal:i}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,at(o)},{capture:!0,signal:i})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",a,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const t=this.commentPopupPositionInLayer;let i,a;if(t)[i,a]=t;else{[i,a]=this.#n.commentButtonPosition;const{width:p,height:g,x:v,y:x}=this.#n;i=v+i*p,a=x+a*g}const o=this.#n.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=o;this.#n._uiManager.editComment(this.#n,c+i*h,u+a*f,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#s&&(this.#r=null),e===null){this.#s="",this.#c=!0;return}this.#s=e,this.#o=new Date,this.#c=!1}restoreData({text:e,richText:t,date:i}){this.#s=e,this.#r=t,this.#o=i,this.#c=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#s="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class dl{#e;#t=!1;#i=null;#n;#a;#r;#s;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#i=i,this.#n=t,this.#a=a,this.#r=o,this.#s=c,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),c=this.#e,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(at(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const a=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,c={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#m.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",at,c),o.addEventListener("pointermove",at,c),o.addEventListener("pointercancel",at,c),o.addEventListener("pointerup",at,c),this.#a?.()}if(at(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;at(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:a,screenY:o}=t,{screenX:c,screenY:u}=i,h=this.#l,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:v}=h,x=g-f,S=v-p,w=c-a,E=u-o,_=Math.hypot(w,E)||1,R=Math.hypot(x,S)||1;if(!this.#t&&Math.abs(R-_)<=dl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=a,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const T=[(a+c)/2,(o+u)/2];this.#r?.(T,R,_)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#s?.()),this.#l&&(at(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#_=0;#S=0;#w=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#E=ce._zIndex++;static _borderLineWidth=-1;static _colorManager=new jp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=ce.prototype._resizeWithKeyboard,t=Yi.TRANSLATE_SMALL,i=Yi.TRANSLATE_BIG;return be(this,"_resizerKeyboardManager",new ul([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],ce.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new eD({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ce._l10n??=e,ce._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ce._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ce._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(e){this.#x=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#P(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,a){const[o,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(e+i)/o,this.y=(t+a)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,a]=this.parentDimensions;this.setAt(e*i,t*a,this.width*i,this.height*a),this._onTranslated()}#D([e,t],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/e,this.y+=a/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#D(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=e/a,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:p}=i;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=ce,a=i/e,o=i/t;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,a]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=i,h*=a,o*=i,c*=a,this._mustFixPosition)switch(e){case 0:o=kt(o,0,i-u),c=kt(c,0,a-h);break;case 90:o=kt(o,0,i-h),c=kt(c,u,a);break;case 180:o=kt(o,u,i),c=kt(c,h,a);break;case 270:o=kt(o,h,i),c=kt(c,0,a-u);break}this.x=o/=i,this.y=c/=a;const[f,p]=this.getBaseTranslation();o+=f,c+=p,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return ce.#R(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ce.#R(e,t,360-this.parentRotation)}#N(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(){const{div:{style:e},width:t,height:i}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#M.bind(this,i),{signal:t}),a.addEventListener("contextmenu",An,{signal:t}),a.tabIndex=-1}this.div.prepend(this.#c)}#M(e,t){t.preventDefault();const{isMac:i}=wt.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",at,{passive:!1,signal:c}),window.addEventListener("contextmenu",An,{signal:c}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#O(e,t,i,a){this.width=i,this.height=a,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:a}=this.#h;this.#h=null;const o=this.x,c=this.y,u=this.width,h=this.height;o===e&&c===t&&u===i&&h===a||this.addCommands({cmd:this.#O.bind(this,o,c,u,h),undo:this.#O.bind(this,e,t,i,a),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#I(e,t){const[i,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,f=ce.MIN_SIZE/i,p=ce.MIN_SIZE/a,g=this.#N(this.rotation),v=(P,G)=>[g[0]*P+g[2]*G,g[1]*P+g[3]*G],x=this.#N(360-this.rotation),S=(P,G)=>[x[0]*P+x[2]*G,x[1]*P+x[3]*G];let w,E,_=!1,R=!1;switch(e){case"topLeft":_=!0,w=(P,G)=>[0,0],E=(P,G)=>[P,G];break;case"topMiddle":w=(P,G)=>[P/2,0],E=(P,G)=>[P/2,G];break;case"topRight":_=!0,w=(P,G)=>[P,0],E=(P,G)=>[0,G];break;case"middleRight":R=!0,w=(P,G)=>[P,G/2],E=(P,G)=>[0,G/2];break;case"bottomRight":_=!0,w=(P,G)=>[P,G],E=(P,G)=>[0,0];break;case"bottomMiddle":w=(P,G)=>[P/2,G],E=(P,G)=>[P/2,0];break;case"bottomLeft":_=!0,w=(P,G)=>[0,G],E=(P,G)=>[P,0];break;case"middleLeft":R=!0,w=(P,G)=>[0,G/2],E=(P,G)=>[P,G/2];break}const T=w(u,h),N=E(u,h);let D=v(...N);const O=ce._round(o+D[0]),j=ce._round(c+D[1]);let Y=1,W=1,$,q;if(t.fromKeyboard)({deltaX:$,deltaY:q}=t);else{const{screenX:P,screenY:G}=t,[ee,ge]=this.#l;[$,q]=this.screenToPageTranslation(P-ee,G-ge),this.#l[0]=P,this.#l[1]=G}if([$,q]=S($/i,q/a),_){const P=Math.hypot(u,h);Y=W=Math.max(Math.min(Math.hypot(N[0]-T[0]-$,N[1]-T[1]-q)/P,1/u,1/h),f/u,p/h)}else R?Y=kt(Math.abs(N[0]-T[0]-$),f,1)/u:W=kt(Math.abs(N[1]-T[1]-q),p,1)/h;const J=ce._round(u*Y),re=ce._round(h*W);D=v(...E(J,re));const oe=O-D[0],me=j-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=J,this.height=re,this.x=oe,this.y=me,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new zo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(ci.initialize(ce._l10n),this.#i=new ci(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new kc(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:e,text:t,date:i,deleted:a}}=this.#n;return{text:t,richText:e,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new kc(this),typeof e=="object"&&e!==null?this.#n.restoreData(e):this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:i}){if(!t||(this.#n||=new kc(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new kc(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,a]=e.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=a-100,f=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,a]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Dx(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new dl({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#G(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,i){let o=.7*(i/t)+1-.7;if(o===1)return;const c=this.#N(this.rotation),u=(O,j)=>[c[0]*O+c[2]*j,c[1]*O+c[3]*j],[h,f]=this.parentDimensions,p=this.x,g=this.y,v=this.width,x=this.height,S=ce.MIN_SIZE/h,w=ce.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/x),S/v,w/x);const E=ce._round(v*o),_=ce._round(x*o);if(E===v&&_===x)return;this.#u||=[p,g,v,x];const R=u(v/2,x/2),T=ce._round(p+R[0]),N=ce._round(g+R[1]),D=u(E/2,_/2);this.x=T-D[0],this.y=N-D[1],this.width=E,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(e);return}this.#L(e)}#L(e){const{isMac:t}=wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#L(f),i&&this._onStopDragging()};t&&(this.#_=e.clientX,this.#S=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=f;if(v!==this.#s){at(f);return}const[x,S]=this.screenToPageTranslation(p-this.#_,g-this.#S);this.#_=p,this.#S=g,this._uiManager.dragSelectedEditors(x,S)},c),window.addEventListener("touchmove",at,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),at(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}at(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=e/a,p=t/a,g=this.x*o,v=this.y*c,x=this.width*o,S=this.height*c;switch(i){case 0:return[g+f+u,c-v-p-S+h,g+f+x+u,c-v-p+h];case 90:return[g+p+u,c-v+f+h,g+p+S+u,c-v+f+x+h];case 180:return[g-f-x+u,c-v+p+h,g-f+u,c-v+p+S+h];case 270:return[g-p-S+u,c-v-f-x+h,g-p+u,c-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,a,o,c]=e,u=o-i,h=c-a;switch(this.rotation){case 0:return[i,t-c,u,h];case 90:return[i,t-a,h,u];case 180:return[o,t-a,u,h];case 270:return[o,t-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:i,opacity:a,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:e},creationDate:f,modificationDate:i||p,popupRef:!o,color:t,opacity:a}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return t<c&&a>0&&e<o&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,i){const a=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});a.rotation=e.rotation,a.#e=e.accessibilityData,a._isCopy=e.isCopy||!1;const[o,c]=a.pageDimensions,[u,h,f,p]=a.getRectInCurrentCoords(e.rect,c);return a.x=u/o,a.y=h/c,a.width=f/o,a.height=p/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[i,a,o,c]=this.getPDFRect();return[ce._round(i+(o-i)*e),ce._round(a+(c-a)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const c=this.#Y.bind(this),u=this.#q.bind(this),h=this._uiManager._signal;for(const f of this.#t){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#W.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",ce._l10nResizer[p])}}const i=this.#t[0];let a=0;for(const c of t){if(c===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of t){const f=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ce._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){ce._resizerKeyboardManager.exec(this,e)}#q(e){this.#v&&e.relatedTarget?.parentNode!==this.#c&&this.#P()}#W(e){this.#g=this.#v?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#v&&this.#I(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:i}=e;let a=this.#w.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},ce._telemetryTimeout),this.#w.set(i,a);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class eD extends ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const i1=3285377520,In=4294901760,oi=65535;class kx{constructor(e){this.h1=e?e&4294967295:i1,this.h2=e?e&4294967295:i1}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,E=e.length;w<E;w++){const _=e.charCodeAt(w);_<=255?t[i++]=_:(t[i++]=_>>>8,t[i++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,c=new Uint32Array(t.buffer,0,a);let u=0,h=0,f=this.h1,p=this.h2;const g=3432918353,v=461845907,x=g&oi,S=v&oi;for(let w=0;w<a;w++)w&1?(u=c[w],u=u*g&In|u*x&oi,u=u<<15|u>>>17,u=u*v&In|u*S&oi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[w],h=h*g&In|h*x&oi,h=h<<15|h>>>17,h=h*v&In|h*S&oi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=t[a*4+2]<<16;case 2:u^=t[a*4+1]<<8;case 1:u^=t[a*4],u=u*g&In|u*x&oi,u=u<<15|u>>>17,u=u*v&In|u*S&oi,a&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&In|e*36045&oi,t=t*4283543511&In|((t<<16|e>>>16)*2950163797&In)>>>16,e^=t>>>1,e=e*444984403&In|e*60499&oi,t=t*3301882366&In|((t<<16|e>>>16)*3120437893&In)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Xf=Object.freeze({map:null,hash:"",transfer:void 0});class Bp{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof ce&&this.#i.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof ce)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let a=!1;if(i!==void 0)for(const[o,c]of Object.entries(t))i[o]!==c&&(a=!0,i[o]=c);else a=!0,this.#n.set(e,t);a&&this.#a(),t instanceof ce&&((this.#i||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Mx(this)}get serializable(){if(this.#n.size===0)return Xf;const e=new Map,t=new kx,i=[],a=Object.create(null);let o=!1;for(const[c,u]of this.#n){const h=u instanceof ce?u.serialize(!1,a):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Xf}get editorStats(){let e=null;const t=new Map;let i=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ce)){o.popup&&(o.popup.deleted?a+=1:i+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(i+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;t.has(u)||t.set(u,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let g=h.get(f);g||(g=new Map,h.set(f,g));const v=g.get(p)??0;g.set(p,v+1)}}if((a>0||i>0)&&(e||=Object.create(null),e.comments={deleted:a,edited:i}),!e)return null;for(const[o,c]of t)e[o]=c.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const t of this.#i.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Mx extends Bp{#e;constructor(e){super();const{map:t,hash:i,transfer:a}=e.serializable,o=structuredClone(t,a?{transfer:a}:null);this.#e={map:o,hash:i,transfer:a}}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return be(this,"modifiedIds",{ids:new Set,hash:""})}}class tD{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(Fe(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=e,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(a),i?.(e)}catch{ve(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw ve(`Failed to load font '${i.family}': '${a}'.`),e.disableFontFace=!0,a}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,a)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return be(this,"isSyncFontLoadingSupported",$t||wt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Fe(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:t,callback:e};return i.push(a),a}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(N,D){return N.charCodeAt(D)<<24|N.charCodeAt(D+1)<<16|N.charCodeAt(D+2)<<8|N.charCodeAt(D+3)&255}function a(N,D,O,j){const Y=N.substring(0,D),W=N.substring(D+O);return Y+j+W}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(N,D){if(++f>30){ve("Load test font never loaded."),D();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,N,D))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,g.length,g);const S=16,w=1482184792;let E=i(v,S);for(o=0,c=g.length-3;o<c;o+=4)E=E-w+i(g,o)|0;o<g.length&&(E=E-w+i(g+"XXX",o)|0),v=a(v,S,4,VN(E));const _=`url(data:font/opentype;base64,${btoa(v)});`,R=`@font-face {font-family:"${g}";src:${_}}`;this.insertRule(R);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const N of[e.loadedName,g]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=N,T.append(D)}this._document.body.append(T),p(g,()=>{T.remove(),t.complete()})}}class nD{#e;constructor(e,t=null,i,a){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let a;try{a=e.get(i)}catch(c){ve(`getPathGenerator - ignoring character: "${c}".`)}const o=Nx(a?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){be(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){be(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class dr{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,i={};let a=0;for(const f of dr.strings){const p=t.encode(e[f]);i[f]=p,a+=4+p.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of dr.strings){const p=i[f],g=p.length;u.setUint32(h,g),c.set(p,h+4),h+=4+g}return Fe(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){Fe(e<dr.strings.length,"Invalid string index");let t=0;for(let a=0;a<e;a++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class hr{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,i={};let a=0;for(const v of hr.strings){const x=t.encode(e[v]);i[v]=x,a+=4+x.length}a+=4;let o,c,u=1+a;e.style&&(o=t.encode(e.style.style),c=t.encode(e.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,e.guessFallback?1:0),p.setUint32(g,0),g+=4,a=0;for(const v of hr.strings){const x=i[v],S=x.length;a+=4+S,p.setUint32(g,S),f.set(x,g+4),g+=4+S}return p.setUint32(g-a-4,a),e.style&&(p.setUint32(g,o.length),f.set(o,g+4),g+=4+o.length,p.setUint32(g,c.length),f.set(c,g+4),g+=4+c.length),Fe(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Fe(e<hr.strings.length,"Invalid string index");let t=5;for(let a=0;a<e;a++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const a=this.#t.getUint32(e),o=this.#i.decode(new Uint8Array(this.#e,e+4,a));return{style:i,weight:o}}}class We{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#r;#s;#o;constructor({data:e,extra:t}){this.#r=e,this.#s=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#c(e){Fe(e<We.bools.length,"Invalid boolean index");const t=Math.floor(e/4),i=e*2%8,a=this.#o.getUint8(t)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Fe(e<We.numbers.length,"Invalid number index"),this.#o.getFloat64(We.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=We.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=We.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=We.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#h(e){Fe(e<We.strings.length,"Invalid string index");let t=We.#a+4;for(let o=0;o<e;o++)t+=this.#o.getUint32(t)+4;const i=this.#o.getUint32(t),a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,t+4,i)),this.#s.decode(a)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);e+=4+a;const o=this.#o.getUint32(e);if(o!==0)return new Uint8Array(this.#r,e+4,o)}clearData(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);e+=4+a;const o=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,o).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#r,e+4,a)),new dr(o.buffer)}get systemFontInfo(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,e+4,i)),new hr(a.buffer)}static write(e){const t=e.systemFontInfo?hr.write(e.systemFontInfo):null,i=e.cssFontInfo?dr.write(e.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const w of We.strings)o[w]=a.encode(e[w]),c+=4+o[w].length;const u=We.#a+4+c+4+(t?t.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;const v=We.bools.length;let x=0,S=0;for(let w=0;w<v;w++){const E=e[We.bools[w]];x|=(E===void 0?0:E?2:1)<<S,S+=2,(S===8||w===v-1)&&(p.setUint8(g++,x),x=0,S=0)}Fe(g===We.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of We.numbers)p.setFloat64(g,e[w]),g+=8;if(Fe(g===We.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(g++,4);for(const w of e.bbox)p.setInt16(g,w,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Fe(g===We.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(g++,6);for(const w of e.fontMatrix)p.setFloat64(g,w,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Fe(g===We.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(g++,1);for(const w of e.defaultVMetrics)p.setInt16(g,w,!0),g+=2}else p.setUint8(g++,0),g+=6;Fe(g===We.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(We.#a,0),g+=4;for(const w of We.strings){const E=o[w],_=E.length;p.setUint32(g,_),f.set(E,g+4),g+=4+_}if(p.setUint32(We.#a,g-We.#a-4),!t)p.setUint32(g,0),g+=4;else{const w=t.byteLength;p.setUint32(g,w),Fe(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),g+4),g+=4+w}if(!i)p.setUint32(g,0),g+=4;else{const w=i.byteLength;p.setUint32(g,w),Fe(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),g+4),g+=4+w}return e.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,e.data.length),f.set(e.data,g+4),g+=4+e.data.length),Fe(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class Rt{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,i=null,a=[],o=[],c=[],u=[],h=null,f=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,i=e[2],c=e[3],t===1?a.push(...e[4],...e[5]):a.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,h=e[1],a=e[2],o=e[3],u=e[4]||[],i=e[6],f=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const p=Math.floor(a.length/2),g=Math.floor(o.length/3),v=c.length,x=u.length;let S=0;for(const D of u)S+=1,S=Math.ceil(S/4)*4,S+=4+D.coords.length*4,S+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(S+=4);const w=20+p*8+g*3+v*8+(i?16:0)+(f?3:0)+S,E=new ArrayBuffer(w),_=new DataView(E),R=new Uint8Array(E);_.setUint8(Rt.#e,t),_.setUint8(Rt.#t,i?1:0),_.setUint8(Rt.#i,f?1:0),_.setUint8(Rt.#n,h),_.setUint32(Rt.#a,p,!0),_.setUint32(Rt.#r,g,!0),_.setUint32(Rt.#s,v,!0),_.setUint32(Rt.#o,x,!0);let T=20;new Float32Array(E,T,p*2).set(a),T+=p*8,R.set(o,T),T+=g*3;for(const[D,O]of c)_.setFloat32(T,D,!0),T+=4,_.setUint32(T,parseInt(O.slice(1),16),!0),T+=4;if(i)for(const D of i)_.setFloat32(T,D,!0),T+=4;f&&(R.set(f,T),T+=3);for(let D=0;D<u.length;D++){const O=u[D];_.setUint8(T,O.type),T+=1,T=Math.ceil(T/4)*4,_.setUint32(T,O.coords.length,!0),T+=4,new Int32Array(E,T,O.coords.length).set(O.coords),T+=O.coords.length*4,_.setUint32(T,O.colors.length,!0),T+=4,new Int32Array(E,T,O.colors.length).set(O.colors),T+=O.colors.length*4,O.verticesPerRow!==void 0&&(_.setUint32(T,O.verticesPerRow,!0),T+=4)}return E}getIR(){const e=this.view,t=this.data[Rt.#e],i=!!this.data[Rt.#t],a=!!this.data[Rt.#i],o=e.getUint32(Rt.#a,!0),c=e.getUint32(Rt.#r,!0),u=e.getUint32(Rt.#s,!0),h=e.getUint32(Rt.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const g=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let E=0;E<u;++E){const _=e.getFloat32(f,!0);f+=4;const R=e.getUint32(f,!0);f+=4,v.push([_,`#${R.toString(16).padStart(6,"0")}`])}let x=null;if(i){x=[];for(let E=0;E<4;++E)x.push(e.getFloat32(f,!0)),f+=4}let S=null;a&&(S=new Uint8Array(this.buffer,f,3),f+=3);const w=[];for(let E=0;E<h;++E){const _=e.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const R=e.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,R);f+=R*4;const N=e.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,N);f+=N*4;const O={type:_,coords:T,colors:D};_===Yf.LATTICE&&(O.verticesPerRow=e.getUint32(f,!0),f+=4),w.push(O)}if(t===1)return["RadialAxial","axial",x,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",x,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(t===3){const E=this.data[Rt.#n];let _=null;if(p.length>0){let R=p[0],T=p[0],N=p[1],D=p[1];for(let O=0;O<p.length;O+=2){const j=p[O],Y=p[O+1];R=R>j?j:R,N=N>Y?Y:N,T=T<j?j:T,D=D<Y?Y:D}_=[R,N,T,D]}return["Mesh",E,p,g,w,_,x,S]}throw new Error(`Unsupported pattern kind: ${t}`)}}class iD{static write(e){let t,i;return wt.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),t=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),t=new Float32Array(i)),t.set(e),i}#e;constructor(e){this.#e=e}get path(){return wt.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function sD(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if($t)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function aD(r){if($t&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return Su(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Mc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Kf=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,rD=r=>typeof r=="object"&&typeof r?.name=="string",Lx=YN.bind(null,Kf,rD);class oD{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[a]of this.#e)a.call(this,i)})}addEventListener(e,t,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){ve("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#e.set(t,a)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Lc={DATA:1,ERROR:2},vt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s1(){}function an(r){if(r instanceof qi||r instanceof ou||r instanceof Kb||r instanceof Xo||r instanceof xf)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new qi(r.message);case"InvalidPDFException":return new ou(r.message);case"PasswordException":return new Kb(r.message,r.code);case"ResponseException":return new Xo(r.message,r.status,r.missing);case"UnknownErrorException":return new xf(r.message,r.details)}return new xf(r.message,r.toString())}class Po{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Lc.DATA)a.resolve(e.data);else if(e.callback===Lc.ERROR)a.reject(an(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,a=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(c){o.postMessage({sourceName:i,targetName:a,callback:Lc.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:i,targetName:a,callback:Lc.ERROR,callbackId:e.callbackId,reason:an(c)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:t},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,i,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:o,data:t,desiredSize:f.desiredSize},a),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:vt.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Fe(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:vt.CANCEL,streamId:o,reason:an(f)}),p.promise}},i)}#i(e){const t=e.streamId,i=this.sourceName,a=e.sourceName,o=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(f,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:vt.ENQUEUE,streamId:t,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:vt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(f){Fe(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:vt.ERROR,streamId:t,reason:an(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.START_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.START_COMPLETE,streamId:t,reason:an(f)})})}#n(e){const t=e.streamId,i=this.sourceName,a=e.sourceName,o=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case vt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(an(e.reason));break;case vt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(an(e.reason));break;case vt.PULL:if(!u){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||s1).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,reason:an(f)})});break;case vt.ENQUEUE:if(Fe(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case vt.CLOSE:if(Fe(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,t);break;case vt.ERROR:Fe(c,"error should have stream controller"),c.controller.error(an(e.reason)),this.#a(c,t);break;case vt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(an(e.reason)),this.#a(c,t);break;case vt.CANCEL:if(!u)break;const h=an(e.reason);Promise.try(u.onCancel||s1,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.CANCEL_COMPLETE,streamId:t,reason:an(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class Ox{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}}class lD extends Ox{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class Ix{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class a1 extends Ix{async _fetch(e){const t=await Tr(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):Su(t)}}class Px{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,a,o){return"none"}destroy(e=!1){}}class cD extends Px{#e;#t;#i;#n;#a;#r;#s=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#a.createElementNS(Ii,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(Ii,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#h(e){if(e.length===1){const h=e[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=h[g]/255;const p=f.join(",");return[p,p,p]}const[t,i,a]=e,o=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=t[h]/255,c[h]=i[h]/255,u[h]=a[h]/255;return[o.join(","),c.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(cl(t)?ve('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Mp(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[i,a,o]=this.#h(e),c=e.length===1?i:`${i}${a}${o}`;if(t=this.#o.get(c),t)return this.#o.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#s++}`,h=this.#d(u);this.#o.set(e,h),this.#o.set(c,h);const f=this.#m(u);return this.#p(i,a,o,f),h}addHCMFilter(e,t){const i=`${e}-${t}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!e||!t))return o.url;const c=this.#v(e);e=ne.makeHexColor(...c);const u=this.#v(t);if(t=ne.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const h=new Array(256);for(let x=0;x<=255;x++){const S=x/255;h[x]=S<=.03928?S/12.92:((S+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#n}_hcm_filter`,g=o.filter=this.#m(p);this.#p(f,f,f,g),this.#g(g);const v=(x,S)=>{const w=c[x]/255,E=u[x]/255,_=new Array(S+1);for(let R=0;R<=S;R++)_[R]=w+R/S*(E-w);return _.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),g),o.url=this.#d(p),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[i]=this.#h([e]),a=`alpha_${i}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#s++}`,c=this.#d(o);this.#o.set(e,c),this.#o.set(a,c);const u=this.#m(o);return this.#y(i,u),c}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let i,a;if(e?([i]=this.#h([e]),a=`luminosity_${i}`):a="luminosity",t=this.#o.get(a),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#s++}`,c=this.#d(o);this.#o.set(e,c),this.#o.set(a,c);const u=this.#m(o);return this.#f(u),e&&this.#y(i,u),c}addHighlightHCMFilter(e,t,i,a,o){const c=`${t}-${i}-${a}-${o}`;let u=this.#c.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(e,u)),!t||!i))return u.url;const[h,f]=[t,i].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,x]=[a,o].map(this.#v.bind(this));g<p&&([p,g,v,x]=[g,p,x,v]),this.#l.style.color="";const S=(_,R,T)=>{const N=new Array(256),D=(g-p)/T,O=_/255,j=(R-_)/(255*T);let Y=0;for(let W=0;W<=T;W++){const $=Math.round(p+W*D),q=O+W*j;for(let J=Y;J<=$;J++)N[J]=q;Y=$+1}for(let W=Y;W<256;W++)N[W]=N[Y-1];return N.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,E=u.filter=this.#m(w);return this.#g(E),this.#p(S(v[0],x[0],5),S(v[1],x[1],5),S(v[2],x[2],5),E),u.url=this.#d(w),u.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(e){const t=this.#a.createElementNS(Ii,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(Ii,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#a.createElementNS(Ii,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,i){const a=this.#a.createElementNS(Ii,t);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),e.append(a)}#p(e,t,i,a){const o=this.#a.createElementNS(Ii,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",i)}#y(e,t){const i=this.#a.createElementNS(Ii,"feComponentTransfer");t.append(i),this.#u(i,"feFuncA",e)}#v(e){return this.#l.style.color=e,Cr(getComputedStyle(this.#l).getPropertyValue("color"))}}class jx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class r1 extends jx{async _fetch(e){const t=await Tr(e,"arraybuffer");return new Uint8Array(t)}}class Bx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class o1 extends Bx{async _fetch(e){const t=await Tr(e,"arraybuffer");return new Uint8Array(t)}}$t&&ve("Please use the `legacy` build in Node.js environments.");async function Up(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class uD extends Px{}class dD extends Ox{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class hD extends Ix{async _fetch(e){return Up(e)}}class fD extends jx{async _fetch(e){return Up(e)}}class pD extends Bx{async _fetch(e){return Up(e)}}const tr="__forcedDependency",{floor:l1,ceil:c1}=Math;function Oc(r,e,t,i,a,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],i),r[e*4+2]=Math.max(r[e*4+2],a),r[e*4+3]=Math.max(r[e*4+3],o)}const Qf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class mD{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Qf}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const Ic=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};class gD{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[tr]:[]};#i=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,i=!1){this.#f=e.width,this.#g=e.height,this.#y(t),i&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const i=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),t&&t.length>0?(this.#u.set(t),this.#u.fill(Qf,t.length)):this.#u.fill(Qf)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[tr]:{__proto__:this.#t[tr]}},this.#s={__proto__:this.#s},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(Ic(this.#p,e)?.dependencies.add(i),this.#u[e]=this.#u[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(Ic(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(Ic(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#r.push(ne.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#i.set(e,t),this}recordSimpleDataFromNamed(e,t,i){this.#e[e]=this.#i.get(t)??i}recordFutureForcedDependency(e,t){return this.recordIncrementalData(tr,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(tr,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,i,a,o,c){const u=ne.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];ne.axialAlignedBoundingBox([i,o,a,c],u,h);const f=ne.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(e,t,i,a,o,c){const u=this.#s;if(u[0]===1/0)return this;const h=ne.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(u[0]===-1/0)return ne.axialAlignedBoundingBox([i,o,a,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return ne.axialAlignedBoundingBox([i,o,a,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(e,t,i,a=1,o=0,c=0,u){const h=i.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#d.get(i),f!==!1&&(p=[0,0,0,0],ne.axialAlignedBoundingBox(h,i.fontMatrix,p),(a!==1||o!==0||c!==0)&&ne.scaleMinMax([a,0,0,-a,o,c],p),f)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&p&&f===void 0&&(f=p[0]<=o-g.actualBoundingBoxLeft&&p[2]>=o+g.actualBoundingBoxRight&&p[1]<=c-g.actualBoundingBoxAscent&&p[3]>=c+g.actualBoundingBoxDescent,this.#d.set(i,f),f)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,c-g.actualBoundingBoxAscent,c+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const i=this.#l,a=this.#e,o=this.#t;for(const c of t)c in this.#e?i.add(a[c]):c in o&&o[c].forEach(i.add,i);return this}recordNamedDependency(e,t){return this.#i.has(t)&&this.#l.add(this.#i.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[tr]),this.#p){const i=Ic(this.#p,e),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#a.forEach(a.add,a),a.delete(e),i.isRenderingOperation=!0}if(this.#c===e){const i=l1(this.#o[0]*256/this.#f),a=l1(this.#o[1]*256/this.#g),o=c1(this.#o[2]*256/this.#f),c=c1(this.#o[3]*256/this.#g);Oc(this.#m,e,i,a,o,c);for(const u of this.#l)u!==e&&Oc(this.#m,u,i,a,o,c);for(const u of this.#n)u!==e&&Oc(this.#m,u,i,a,o,c);for(const u of this.#a)u!==e&&Oc(this.#m,u,i,a,o,c);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const i=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new mD(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class uu{#e;#t;#i;#n=0;#a=0;constructor(e,t,i){if(e instanceof uu&&e.#i===!!i)return e;this.#e=e,this.#t=t,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,i){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,i,a,o,c){return this.#i||this.#e.recordClipBox(this.#t,t,i,a,o,c),this}recordBBox(e,t,i,a,o,c){return this.#i||this.#e.recordBBox(this.#t,t,i,a,o,c),this}recordCharacterBBox(e,t,i,a,o,c,u){return this.#i||this.#e.recordCharacterBBox(this.#t,t,i,a,o,c,u),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Pn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},jt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Zf(r,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],t,i),r.clip(a)}class Fp{isModifyingCurrentTransform(){return!1}getPattern(){ze("Abstract method `getPattern` called.")}}class yD extends Fp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let i,a=this._p0,o=this._p1;if(t&&(a=a.slice(),o=o.slice(),ne.applyTransform(a,t),ne.applyTransform(o,t)),this._type==="axial")i=e.createLinearGradient(a[0],a[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(t){const h=new Float32Array(2);ne.singularValueDecompose2dScale(t,h),c*=h[0],u*=h[0]}i=e.createRadialGradient(a[0],a[1],c,o[0],o[1],u)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(e,t,i,a){let o;if(a===jt.STROKE||a===jt.FILL){if(this.isOriginBased()){let v=ne.transform(i,t.baseTransform);this.matrix&&(v=ne.transform(v,this.matrix));const x=.001,S=Math.hypot(v[0],v[1]),w=Math.hypot(v[2],v[3]),E=(v[0]*v[2]+v[1]*v[3])/(S*w);if(Math.abs(E)<x)if(this.isRadial()){if(Math.abs(S-w)<x)return this._createGradient(e,v)}else return this._createGradient(e,v)}const c=t.current.getClippedPathBoundingBox(a,st(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=t.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),i=ne.transform(i,[1,0,0,1,c[0],c[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),Zf(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=e.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(i);o.setTransform(g)}else Zf(e,this._bbox),o=this._createGradient(e);return o}}function Sf(r,e,t,i,a,o,c,u){const h=e.coords,f=e.colors,p=r.data,g=r.width*4;let v;h[t+1]>h[i+1]&&(v=t,t=i,i=v,v=o,o=c,c=v),h[i+1]>h[a+1]&&(v=i,i=a,a=v,v=c,c=u,u=v),h[t+1]>h[i+1]&&(v=t,t=i,i=v,v=o,o=c,c=v);const x=(h[t]+e.offsetX)*e.scaleX,S=(h[t+1]+e.offsetY)*e.scaleY,w=(h[i]+e.offsetX)*e.scaleX,E=(h[i+1]+e.offsetY)*e.scaleY,_=(h[a]+e.offsetX)*e.scaleX,R=(h[a+1]+e.offsetY)*e.scaleY;if(S>=R)return;const T=f[o],N=f[o+1],D=f[o+2],O=f[c],j=f[c+1],Y=f[c+2],W=f[u],$=f[u+1],q=f[u+2],J=Math.round(S),re=Math.round(R);let oe,me,P,G,ee,ge,_e,L;for(let H=J;H<=re;H++){if(H<E){const de=H<S?0:(S-H)/(S-E);oe=x-(x-w)*de,me=T-(T-O)*de,P=N-(N-j)*de,G=D-(D-Y)*de}else{let de;H>R?de=1:E===R?de=0:de=(E-H)/(E-R),oe=w-(w-_)*de,me=O-(O-W)*de,P=j-(j-$)*de,G=Y-(Y-q)*de}let Z;H<S?Z=0:H>R?Z=1:Z=(S-H)/(S-R),ee=x-(x-_)*Z,ge=T-(T-W)*Z,_e=N-(N-$)*Z,L=D-(D-q)*Z;const te=Math.round(Math.min(oe,ee)),ue=Math.round(Math.max(oe,ee));let ye=g*H+te*4;for(let de=te;de<=ue;de++)Z=(oe-de)/(oe-ee),Z<0?Z=0:Z>1&&(Z=1),p[ye++]=me-(me-ge)*Z|0,p[ye++]=P-(P-_e)*Z|0,p[ye++]=G-(G-L)*Z|0,p[ye++]=255}}function bD(r,e,t){const i=e.coords,a=e.colors;let o,c;switch(e.type){case Yf.LATTICE:const u=e.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let g=0;g<f;g++,p++)Sf(r,t,i[p],i[p+1],i[p+u],a[p],a[p+1],a[p+u]),Sf(r,t,i[p+u+1],i[p+1],i[p+u],a[p+u+1],a[p+1],a[p+u])}break;case Yf.TRIANGLES:for(o=0,c=i.length;o<c;o+=3)Sf(r,t,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class vD extends Fp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),x=f/g,S=p/v,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/x,scaleY:1/S},E=g+4,_=v+4,R=i.getCanvas("mesh",E,_),T=R.context,N=T.createImageData(g,v);if(t){const O=N.data;for(let j=0,Y=O.length;j<Y;j+=4)O[j]=t[0],O[j+1]=t[1],O[j+2]=t[2],O[j+3]=255}for(const O of this._figures)bD(N,O,w);return T.putImageData(N,2,2),{canvas:R.canvas,offsetX:u-2*x,offsetY:h-2*S,scaleX:x,scaleY:S}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,a){Zf(e,this._bbox);const o=new Float32Array(2);if(a===jt.SHADING)ne.singularValueDecompose2dScale(st(e),o);else if(this.matrix){ne.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;ne.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=u,o[1]*=h}else ne.singularValueDecompose2dScale(t.baseTransform,o);const c=this._createMeshCanvas(o,a===jt.SHADING?null:this._background,t.cachedCanvases);return a!==jt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class xD extends Fp{getPattern(){return"hotpink"}}function wD(r){switch(r[0]){case"RadialAxial":return new yD(r);case"Mesh":return new vD(r);case"Dummy":return new xD}throw new Error(`Unknown IR type: ${r[0]}`)}const u1={COLORED:1,UNCOLORED:2};class zp{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,a){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e,t){const{bbox:i,operatorList:a,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Au("TilingType: "+c);const g=i[0],v=i[1],x=i[2],S=i[3],w=x-g,E=S-v,_=new Float32Array(2);ne.singularValueDecompose2dScale(this.matrix,_);const[R,T]=_;ne.singularValueDecompose2dScale(this.baseTransform,_);const N=R*_[0],D=T*_[1];let O=w,j=E,Y=!1,W=!1;const $=Math.ceil(f*N),q=Math.ceil(p*D),J=Math.ceil(w*N),re=Math.ceil(E*D);$>=J?O=f:Y=!0,q>=re?j=p:W=!0;const oe=this.getSizeAndScale(O,this.ctx.canvas.width,N),me=this.getSizeAndScale(j,this.ctx.canvas.height,D),P=e.cachedCanvases.getCanvas("pattern",oe.size,me.size),G=P.context,ee=h.createCanvasGraphics(G,t);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,o,u),G.translate(-oe.scale*g,-me.scale*v),ee.transform(0,oe.scale,0,0,me.scale,0,0),G.save(),ee.dependencyTracker?.save(),this.clipBbox(ee,g,v,x,S),ee.baseTransform=st(ee.ctx),ee.executeOperatorList(a),ee.endDrawing(),ee.dependencyTracker?.restore(),G.restore(),Y||W){const ge=P.canvas;Y&&(O=f),W&&(j=p);const _e=this.getSizeAndScale(O,this.ctx.canvas.width,N),L=this.getSizeAndScale(j,this.ctx.canvas.height,D),H=_e.size,Z=L.size,te=e.cachedCanvases.getCanvas("pattern-workaround",H,Z),ue=te.context,ye=Y?Math.floor(w/f):0,de=W?Math.floor(E/p):0;for(let ot=0;ot<=ye;ot++)for(let He=0;He<=de;He++)ue.drawImage(ge,H*ot,Z*He,H,Z,0,0,H,Z);return{canvas:te.canvas,scaleX:_e.scale,scaleY:L.scale,offsetX:g,offsetY:v}}return{canvas:P.canvas,scaleX:oe.scale,scaleY:me.scale,offsetX:g,offsetY:v}}getSizeAndScale(e,t,i){const a=Math.max(zp.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=a?o=a:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,a,o){const c=a-t,u=o-i;e.ctx.rect(t,i,c,u),ne.axialAlignedBoundingBox([t,i,a,o],st(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const a=e.ctx,o=e.current;switch(t){case u1.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=u;break;case u1.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new zN(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,a,o){let c=i;a!==jt.SHADING&&(c=ne.transform(c,t.baseTransform),this.matrix&&(c=ne.transform(c,this.matrix)));const u=this.createPatternCanvas(t,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=e.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function AD({src:r,srcPos:e=0,dest:t,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=wt.isLittleEndian?4278190080:255,[h,f]=c?[o,u]:[u,o],p=i>>3,g=i&7,v=r.length;t=new Uint32Array(t.buffer);let x=0;for(let S=0;S<a;S++){for(const E=e+p;e<E;e++){const _=e<v?r[e]:255;t[x++]=_&128?f:h,t[x++]=_&64?f:h,t[x++]=_&32?f:h,t[x++]=_&16?f:h,t[x++]=_&8?f:h,t[x++]=_&4?f:h,t[x++]=_&2?f:h,t[x++]=_&1?f:h}if(g===0)continue;const w=e<v?r[e++]:255;for(let E=0;E<g;E++)t[x++]=w&1<<7-E?f:h}return{srcPos:e,destPos:x}}const d1=16,h1=100,SD=15,f1=10,rn=16,Ef=new DOMMatrix,xn=new Float32Array(2),rr=new Float32Array([1/0,1/0,-1/0,-1/0]);function ED(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},r.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},r.transform=function(t,i,a,o,c,u){e.transform(t,i,a,o,c,u),this.__originalTransform(t,i,a,o,c,u)},r.setTransform=function(t,i,a,o,c,u){e.setTransform(t,i,a,o,c,u),this.__originalSetTransform(t,i,a,o,c,u)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},r.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},r.bezierCurveTo=function(t,i,a,o,c,u){e.bezierCurveTo(t,i,a,o,c,u),this.__originalBezierCurveTo(t,i,a,o,c,u)},r.rect=function(t,i,a,o){e.rect(t,i,a,o),this.__originalRect(t,i,a,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class _D{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let a;return this.cache[e]!==void 0?(a=this.cache[e],this.canvasFactory.reset(a,t,i)):(a=this.canvasFactory.create(t,i),this.cache[e]=a),a}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Pc(r,e,t,i,a,o,c,u,h,f){const[p,g,v,x,S,w]=st(r);if(g===0&&v===0){const R=c*p+S,T=Math.round(R),N=u*x+w,D=Math.round(N),O=(c+h)*p+S,j=Math.abs(Math.round(O)-T)||1,Y=(u+f)*x+w,W=Math.abs(Math.round(Y)-D)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(x),T,D),r.drawImage(e,t,i,a,o,0,0,j,W),r.setTransform(p,g,v,x,S,w),[j,W]}if(p===0&&x===0){const R=u*v+S,T=Math.round(R),N=c*g+w,D=Math.round(N),O=(u+f)*v+S,j=Math.abs(Math.round(O)-T)||1,Y=(c+h)*g+w,W=Math.abs(Math.round(Y)-D)||1;return r.setTransform(0,Math.sign(g),Math.sign(v),0,T,D),r.drawImage(e,t,i,a,o,0,0,W,j),r.setTransform(p,g,v,x,S,w),[W,j]}r.drawImage(e,t,i,a,o,c,u,h,f);const E=Math.hypot(p,g),_=Math.hypot(v,x);return[E*h,_*f]}class p1{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=qf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Et.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,i){i?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=rr.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=jt.FILL,t=null){const i=this.minMax.slice();if(e===jt.STROKE){t||ze("Stroke bounding box must include transform."),ne.singularValueDecompose2dScale(t,xn);const a=xn[0]*this.lineWidth/2,o=xn[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const e=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(rr,0)}getClippedPathBoundingBox(e=jt.FILL,t=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function m1(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,i=e.width,a=t%rn,o=(t-a)/rn,c=a===0?o:o+1,u=r.createImageData(i,rn);let h=0,f;const p=e.data,g=u.data;let v,x,S,w;if(e.kind===Fo.GRAYSCALE_1BPP){const E=p.byteLength,_=new Uint32Array(g.buffer,0,g.byteLength>>2),R=_.length,T=i+7>>3,N=4294967295,D=wt.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(S=v<o?rn:a,f=0,x=0;x<S;x++){const O=E-h;let j=0;const Y=O>T?i:O*8-7,W=Y&-8;let $=0,q=0;for(;j<W;j+=8)q=p[h++],_[f++]=q&128?N:D,_[f++]=q&64?N:D,_[f++]=q&32?N:D,_[f++]=q&16?N:D,_[f++]=q&8?N:D,_[f++]=q&4?N:D,_[f++]=q&2?N:D,_[f++]=q&1?N:D;for(;j<Y;j++)$===0&&(q=p[h++],$=128),_[f++]=q&$?N:D,$>>=1}for(;f<R;)_[f++]=0;r.putImageData(u,0,v*rn)}}else if(e.kind===Fo.RGBA_32BPP){for(x=0,w=i*rn*4,v=0;v<o;v++)g.set(p.subarray(h,h+w)),h+=w,r.putImageData(u,0,x),x+=rn;v<c&&(w=i*a*4,g.set(p.subarray(h,h+w)),r.putImageData(u,0,x))}else if(e.kind===Fo.RGB_24BPP)for(S=rn,w=i*S,v=0;v<c;v++){for(v>=o&&(S=a,w=i*S),f=0,x=w;x--;)g[f++]=p[h++],g[f++]=p[h++],g[f++]=p[h++],g[f++]=255;r.putImageData(u,0,v*rn)}else throw new Error(`bad image kind: ${e.kind}`)}function g1(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,a=t%rn,o=(t-a)/rn,c=a===0?o:o+1,u=r.createImageData(i,rn);let h=0;const f=e.data,p=u.data;for(let g=0;g<c;g++){const v=g<o?rn:a;({srcPos:h}=AD({src:f,srcPos:h,dest:p,width:i,height:v,nonBlackColor:0})),r.putImageData(u,0,g*rn)}}function Ro(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)r[i]!==void 0&&(e[i]=r[i]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function jc(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function y1(r,e){if(e)return!0;ne.singularValueDecompose2dScale(r,xn);const t=Math.fround(Wn.pixelRatio*la.PDF_TO_CSS_UNITS);return xn[0]<=t&&xn[1]<=t}const TD=["butt","round","square"],CD=["miter","round","bevel"],RD={},b1={};class fr{constructor(e,t,i,a,o,{optionalContentConfig:c,markedContentStack:u=null},h,f,p){this.ctx=e,this.current=new p1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new _D(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,i=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):i}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...st(this.compositeCtx))}this.ctx.save(),jc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=st(this.ctx)}executeOperatorList(e,t,i,a,o){const c=e.argsArray,u=e.fnArray;let h=t||0;const f=c.length;if(f===h)return h;const p=f-h>f1&&typeof i=="function",g=p?Date.now()+SD:0;let v=0;const x=this.commonObjs,S=this.objs;let w,E;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,i),h;if(!o||o(h))if(w=u[h],E=c[h]??null,w!==br.dependency)E===null?this[w](h):this[w](h,...E);else for(const _ of E){this.dependencyTracker?.recordNamedData(_,h);const R=_.startsWith("g_")?x:S;if(!R.has(_))return R.get(_,i),h}if(h++,h===f)return h;if(p&&++v>f1){if(Date.now()>g)return i(),h;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,a=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=i,h=a,f="prescale1",p,g;for(;o>2&&u>1||c>2&&h>1;){let v=u,x=h;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&h>1&&(x=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/x),p=this.cachedCanvases.getCanvas(f,v,x),g=p.context,g.clearRect(0,0,v,x),g.drawImage(e,0,0,u,h,0,0,v,x),e=p.canvas,u=v,h=x,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const i=this.ctx,{width:a,height:o}=t,c=this.current.fillColor,u=this.current.patternFill,h=st(i);let f,p,g,v;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get($),f||(f=new Map,this._cachedBitmapsMap.set($,f));const q=f.get(p);if(q&&!u){const J=Math.round(Math.min(h[0],h[2])+h[4]),re=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,Pn.transformAndFill),{canvas:q,offsetX:J,offsetY:re}}g=q}g||(v=this.cachedCanvases.getCanvas("maskCanvas",a,o),g1(v.context,t));let x=ne.transform(h,[1/a,0,0,-1/o,0,0]);x=ne.transform(x,[1,0,0,1,0,-o]);const S=rr.slice();ne.axialAlignedBoundingBox([0,0,a,o],x,S);const[w,E,_,R]=S,T=Math.round(_-w)||1,N=Math.round(R-E)||1,D=this.cachedCanvases.getCanvas("fillCanvas",T,N),O=D.context,j=w,Y=E;O.translate(-j,-Y),O.transform(...x),g||(g=this._scaleImage(v.canvas,ri(O)),g=g.img,f&&u&&f.set(p,g)),O.imageSmoothingEnabled=y1(st(O),t.interpolate),Pc(O,g,0,0,g.width,g.height,0,0,a,o),O.globalCompositeOperation="source-in";const W=ne.transform(ri(O),[1,0,0,1,-j,-Y]);return O.fillStyle=u?c.getPattern(i,this,W,jt.FILL,e):c,O.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),this.dependencyTracker?.recordDependencies(e,Pn.transformAndFill),{canvas:D.canvas,offsetX:Math.round(j),offsetY:Math.round(Y)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=TD[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=CD[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,i){this.dependencyTracker?.recordSimpleData("dash",e);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(t),a.lineDashOffset=i)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[i,a]of t)switch(i){case"LW":this.setLineWidth(e,a);break;case"LC":this.setLineCap(e,a);break;case"LJ":this.setLineJoin(e,a);break;case"ML":this.setMiterLimit(e,a);break;case"D":this.setDash(e,a[0],a[1]);break;case"RI":this.setRenderingIntent(e,a);break;case"FL":this.setFlatness(e,a);break;case"Font":this.setFont(e,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,t,i);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),Ro(this.suspendedCtx,c),ED(c,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Ro(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,a){const o=a[0],c=a[1],u=a[2]-o,h=a[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,i,u,h,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,a,o,c,u,h,f,p,g){let v=e.canvas,x=h-p,S=f-g;if(c)if(x<0||S<0||x+i>v.width||S+a>v.height){const E=this.cachedCanvases.getCanvas("maskExtension",i,a),_=E.context;_.drawImage(v,-x,-S),_.globalCompositeOperation="destination-atop",_.fillStyle=c,_.fillRect(0,0,i,a),_.globalCompositeOperation="source-over",v=E.canvas,x=S=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(x,S,i,a),e.clip(E),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(x,S,i,a),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,f,i,a),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(v,x,S,i,a,h,f,i,a),t.restore()}save(e){this.inSMaskMode&&Ro(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Ro(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,a,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,i,a,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const c=t===br.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(e,["transform"])}o instanceof Path2D||(o=i[0]=Nx(o)),ne.axialAlignedBoundingBox(a,st(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,ri(a),jt.STROKE,e),c){const u=new Path2D;u.addPath(t,a.getTransform().invertSelf().multiplySelf(c)),t=u}this.rescaleAndStroke(t,!1),a.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Pn.stroke),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(jt.STROKE,st(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,i=!0){const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(e),a.save(),a.fillStyle=o.getPattern(a,this,ri(a),jt.FILL,e),f){const p=new Path2D;p.addPath(t,a.getTransform().invertSelf().multiplySelf(f)),t=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(a.fill(t,"evenodd"),this.pendingEOFill=!1):a.fill(t)),this.dependencyTracker?.recordDependencies(e,Pn.fill),u&&(a.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Pn.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=RD}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=b1}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;t!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",e),a.recordCloseMarker(e)}if(t!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:p}of t)p&&a.addPath(p,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const a=this.commonObjs.get(t),o=this.current;if(!a)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=a.fontMatrix||qf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&ve("Invalid font matrix for font "+t),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let h="normal";a.black?h="900":a.bold&&(h="bold");const f=a.italic?"italic":"normal";let p=i;i<d1?p=d1:i>h1&&(p=h1),this.current.fontSizeScale=i/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,t,i){this.setLeading(e,-i),this.moveText(e,t,i)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,t,i){const a=new Path2D;return a.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),a}paintChar(e,t,i,a,o,c){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,v=p&Et.FILL_STROKE_MASK,x=!!(p&Et.ADD_TO_PATH_FLAG),S=h.patternFill&&!f.missingFile,w=h.patternStroke&&!f.missingFile;let E;if((f.disableFontFace||x||S||w)&&!f.missingFile&&(E=f.getPathGenerator(this.commonObjs,t)),E&&(f.disableFontFace||S||w)){u.save(),u.translate(i,a),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,f);let _;if(v===Et.FILL||v===Et.FILL_STROKE)if(o){_=u.getTransform(),u.setTransform(...o);const R=this.#i(E,_,o);u.fill(R)}else u.fill(E);if(v===Et.STROKE||v===Et.FILL_STROKE)if(c){_||=u.getTransform(),u.setTransform(...c);const{a:R,b:T,c:N,d:D}=_,O=ne.inverseTransform(c),j=ne.transform([R,T,N,D,0,0],O);ne.singularValueDecompose2dScale(j,xn),u.lineWidth*=Math.max(xn[0],xn[1])/g,u.stroke(this.#i(E,_,c))}else u.lineWidth/=g,u.stroke(E);u.restore()}else(v===Et.FILL||v===Et.FILL_STROKE)&&(u.fillText(t,i,a),this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a,()=>u.measureText(t))),(v===Et.STROKE||v===Et.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a,()=>u.measureText(t)).recordDependencies(e,Pn.stroke),u.strokeText(t,i,a));x&&((this.pendingTextPaths||=[]).push({transform:st(u),x:i,y:a,fontSize:g,path:E}),this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){i=!0;break}return be(this,"isFontSubpixelAAEnabled",i)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Pn.showText).resetBBox(e),this.current.textRenderingMode&Et.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const c=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,p=i.fontDirection,g=i.textHScale*p,v=t.length,x=a.vertical,S=x?1:-1,w=a.defaultVMetrics,E=o*i.fontMatrix[0],_=i.textRenderingMode===Et.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),p>0?c.scale(g,-1):c.scale(g,1);let R,T;const N=i.textRenderingMode&Et.FILL_STROKE_MASK,D=N===Et.FILL||N===Et.FILL_STROKE,O=N===Et.STROKE||N===Et.FILL_STROKE;if(D&&i.patternFill){c.save();const q=i.fillColor.getPattern(c,this,ri(c),jt.FILL,e);R=st(c),c.restore(),c.fillStyle=q}if(O&&i.patternStroke){c.save();const q=i.strokeColor.getPattern(c,this,ri(c),jt.STROKE,e);T=st(c),c.restore(),c.strokeStyle=q}let j=i.lineWidth;const Y=i.textMatrixScale;if(Y===0||j===0?O&&(j=this.getSinglePixelWidth()):j/=Y,u!==1&&(c.scale(u,u),j/=u),c.lineWidth=j,a.isInvalidPDFjsFont){const q=[];let J=0;for(const oe of t)q.push(oe.unicode),J+=oe.width;const re=q.join("");if(c.fillText(re,0,0),this.dependencyTracker!==null){const oe=c.measureText(re);this.dependencyTracker.recordBBox(e,this.ctx,-oe.actualBoundingBoxLeft,oe.actualBoundingBoxRight,-oe.actualBoundingBoxAscent,oe.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=J*E*g,c.restore(),this.compose();return}let W=0,$;for($=0;$<v;++$){const q=t[$];if(typeof q=="number"){W+=S*q*o/1e3;continue}let J=!1;const re=(q.isSpace?f:0)+h,oe=q.fontChar,me=q.accent;let P,G,ee=q.width;if(x){const L=q.vmetric||w,H=-(q.vmetric?L[1]:ee*.5)*E,Z=L[2]*E;ee=L?-L[0]:ee,P=H/u,G=(W+Z)/u}else P=W/u,G=0;let ge;if(a.remeasure&&ee>0){ge=c.measureText(oe);const L=ge.width*1e3/o*u;if(ee<L&&this.isFontSubpixelAAEnabled){const H=ee/L;J=!0,c.save(),c.scale(H,1),P/=H}else ee!==L&&(P+=(ee-L)/2e3*o/u)}if(this.contentVisible&&(q.isInFont||a.missingFile)){if(_&&!me)c.fillText(oe,P,G),this.dependencyTracker?.recordCharacterBBox(e,c,ge?{bbox:null}:a,o/u,P,G,()=>ge??c.measureText(oe));else if(this.paintChar(e,oe,P,G,R,T),me){const L=P+o*me.offset.x/u,H=G-o*me.offset.y/u;this.paintChar(e,me.fontChar,L,H,R,T)}}const _e=x?ee*E-re*p:ee*E+re*p;W+=_e,J&&c.restore()}x?i.y-=W:i.x+=W*g,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const i=this.ctx,a=this.current,o=a.font,c=a.fontSize,u=a.fontDirection,h=o.vertical?1:-1,f=a.charSpacing,p=a.wordSpacing,g=a.textHScale*u,v=a.fontMatrix||qf,x=t.length,S=a.textRenderingMode===Et.INVISIBLE;let w,E,_,R;if(S||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(g,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new uu(T,e):null,w=0;w<x;++w){if(E=t[w],typeof E=="number"){R=h*E*c/1e3,this.ctx.translate(R,0),a.x+=R*g;continue}const N=(E.isSpace?p:0)+f,D=o.charProcOperatorList[E.operatorListId];D?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...v),this.executeOperatorList(D),this.restore()):ve(`Type3 character "${E.operatorListId}" is not available.`);const O=[E.width,0];ne.applyTransform(O,v),_=O[0]*c+N,i.translate(_,0),a.x+=_*g}i.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,i){}setCharWidthAndBounds(e,t,i,a,o,c,u){const h=new Path2D;h.rect(a,o,c-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,a,c,o,u).recordClipBox(e,this.ctx,a,c,o,u),this.endPath(e)}getColorN_Pattern(e,t){let i;if(t[0]==="TilingPattern"){const a=this.baseTransform||st(this.ctx),o={createCanvasGraphics:(c,u)=>new fr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new uu(this.dependencyTracker,u,!0):null)};i=new zp(t,this.ctx,o,a)}else i=this._getPattern(e,t[1],t[2]);return i}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,i=null){let a;return this.cachedPatterns.has(t)?a=this.cachedPatterns.get(t):(a=wD(this.getObject(e,t)),this.cachedPatterns.set(t,a)),i&&(a.matrix=i),a}shadingFill(e,t){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const a=this._getPattern(e,t);i.fillStyle=a.getPattern(i,this,ri(i),jt.SHADING,e);const o=ri(i);if(o){const{width:c,height:u}=i.canvas,h=rr.slice();ne.axialAlignedBoundingBox([0,0,c,u],o,h);const[f,p,g,v]=h;this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Pn.transform).recordDependencies(e,Pn.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=st(this.ctx),i)){ne.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,c,u]=i,h=new Path2D;h.rect(a,o,c-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,a,c,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Au("TODO: Support non-isolated groups."),t.knockout&&ve("Knockout groups not supported.");const a=st(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=rr.slice();ne.axialAlignedBoundingBox(t.bbox,st(i),o);const c=[0,0,i.canvas.width,i.canvas.height];o=ne.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,p),x=v.context;x.translate(-u,-h),x.transform(...a);let S=new Path2D;const[w,E,_,R]=t.bbox;if(S.rect(w,E,_-w,R-E),t.matrix){const T=new Path2D;T.addPath(S,new DOMMatrix(t.matrix)),S=T}x.clip(S),t.smask&&this.smaskStack.push({canvas:v.canvas,context:x,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),Ro(i,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=st(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const c=rr.slice();ne.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,i,a,o,c){if(this.#e(),jc(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,ne.singularValueDecompose2dScale(st(this.ctx),xn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:v,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(xn[0],0,0,-xn[1],0,h*xn[1]),jc(this.ctx)}else{jc(this.ctx),this.endPath(e);const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new p1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...a),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(e,t.data,t),t.count=i;const a=this.ctx,o=this._createMaskCanvas(e,t),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(e),a.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i,a=0,o=0,c,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const f=st(h);h.transform(i,a,o,c,0,0);const p=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,v=u.length;g<v;g+=2){const x=ne.transform(f,[i,a,o,c,u[g],u[g+1]]);h.drawImage(p.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(e,this.ctx,x[4],x[4]+p.canvas.width,x[5],x[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Pn.transformAndFill);for(const c of t){const{data:u,width:h,height:f,transform:p}=c,g=this.cachedCanvases.getCanvas("maskCanvas",h,f),v=g.context;v.save();const x=this.getObject(e,u,c);g1(v,x),v.globalCompositeOperation="source-in",v.fillStyle=o?a.getPattern(v,this,ri(i),jt.FILL,e):a,v.fillRect(0,0,h,f),v.restore(),i.save(),i.transform(...p),i.scale(1,-1),Pc(i,g.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,h,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const i=this.getObject(e,t);if(!i){ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,t,i,a,o){if(!this.contentVisible)return;const c=this.getObject(e,t);if(!c){ve("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let p=0,g=o.length;p<g;p+=2)f.push({transform:[i,0,0,a,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,c,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:a}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const i=t.width,a=t.height,o=this.ctx;this.save(e);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/i,-1/a);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,a).context;m1(p,t),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,ri(o));o.imageSmoothingEnabled=y1(st(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,i,-a,0).recordDependencies(e,Pn.imageXObject).recordOperation(e),Pc(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-a,i,a),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const c=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;m1(f,t),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(e);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),Pc(a,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Pn.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,i){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,i){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===b1?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=st(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),a=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:a,d:o}=this.ctx.getTransform();let c,u;if(i===0&&a===0){const h=Math.abs(t),f=Math.abs(o);if(h===f)if(e===0)c=u=1/h;else{const p=h*e;c=u=p<1?1/p:1}else if(e===0)c=1/h,u=1/f;else{const p=h*e,g=f*e;c=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(t*o-i*a),f=Math.hypot(t,i),p=Math.hypot(a,o);if(e===0)c=p/h,u=f/h;else{const g=e*h;c=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){i.lineWidth=(a||1)*o,i.stroke(e);return}const u=i.getLineDash();t&&i.save(),i.scale(o,c),Ef.a=1/o,Ef.d=1/c;const h=new Path2D;if(h.addPath(e,Ef),u.length>0){const f=Math.max(o,c);i.setLineDash(u.map(p=>p/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(h),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in br)fr.prototype[r]!==void 0&&(fr.prototype[br[r]]=fr.prototype[r]);class ra{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class ND{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const sr=Symbol("INTERNAL");class DD{#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:i,usage:a,rbGroups:o}){this.#e=!!(e&bn.DISPLAY),this.#t=!!(e&bn.PRINT),this.name=t,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==sr&&ze("Internal method `_setVisible` called."),this.#i=i,this.#n=t}}class kD{#e=null;#t=new Map;#i=null;#n=null;constructor(e,t=bn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new DD(t,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(sr,!1);for(const i of e.on)this.#t.get(i)._setVisible(sr,!0);for(const i of e.off)this.#t.get(i)._setVisible(sr,!1);this.#i=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let a=1;a<t;a++){const o=e[a];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#t.has(o))c=this.#t.get(o).visible;else return ve(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Au("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ve(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return ve(`Unknown optional content policy ${e.policy}.`),!0}return ve(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const a=this.#t.get(e);if(!a){ve(`Optional content group not found: ${e}`);return}if(i&&t&&a.rbGroups.length)for(const o of a.rbGroups)for(const c of o)c!==e&&this.#t.get(c)?._setVisible(sr,!1,!0);a._setVisible(sr,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let i;for(const a of e){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#t.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,t);break;case"OFF":this.setVisibility(a,!1,t);break;case"Toggle":this.setVisibility(a,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new kx;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class Tu{#e=null;#t=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(e,t,i){this._source=e,this.#e=t,this.#t=i}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Fe(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#e(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new this.#t(this,e,t);return this._rangeReaders.add(i),i}cancelAllRequests(e){this._fullReader?.cancel(e);for(const t of new Set(this._rangeReaders))t.cancel(e)}}class Cu{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(e){this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){ze("Abstract method `read` called")}cancel(e){ze("Abstract method `cancel` called")}}class Ru{_stream=null;constructor(e,t,i){this._stream=e}async read(){ze("Abstract method `read` called")}cancel(e){ze("Abstract method `cancel` called")}}function v1(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}class MD extends Tu{_progressiveDone=!1;_queuedChunks=[];constructor(e){super(e,LD,OD);const{pdfDataRangeTransport:t}=e,{initialData:i,progressiveDone:a}=t;if(i?.length>0){const o=v1(i);this._queuedChunks.push(o)}this._progressiveDone=a,t.addRangeListener((o,c)=>{this.#e(o,c)}),t.addProgressListener((o,c)=>{c!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:c})}),t.addProgressiveReadListener(o=>{this.#e(void 0,o)}),t.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),t.transportReady()}#e(e,t){const i=v1(t);if(e===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.keys().find(o=>o._begin===e);Fe(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(i)}}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(e,t)),i}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}class LD extends Cu{_done=!1;_queuedChunks=null;_requests=[];constructor(e){super(e);const{pdfDataRangeTransport:t,disableRange:i,disableStream:a}=e._source,{length:o,contentDispositionFilename:c}=t;this._queuedChunks=e._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=e._progressiveDone,this._contentLength=o,this._isStreamingSupported=!a,this._isRangeSupported=!i,_u(c)&&(this._filename=c),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class OD extends Ru{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(e,t,i){super(e,t,i),this._begin=t}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function ID(r){let e=!0,t=i("filename\\*","i").exec(r);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=f(p),o(p)}if(t=c(r),t){const p=f(t);return o(p)}if(t=i("filename","i").exec(r),t){t=t[1];let p=u(t);return p=f(p),o(p)}function i(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function a(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),x=Su(g);g=v.decode(x),e=!1}catch{}}return g}function o(p){return e&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),e&&(p=a("iso-8859-1",p))),p}function c(p){const g=[];let v;const x=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=x.exec(p))!==null;){let[,w,E,_]=v;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[E,_]}const S=[];for(let w=0;w<g.length&&w in g;++w){let[E,_]=g[w];_=u(_),E&&(_=unescape(_),w===0&&(_=h(_))),S.push(_)}return S.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const x=g[v].indexOf('"');x!==-1&&(g[v]=g[v].slice(0,x),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),S=p.slice(g+1).replace(/^[^']*'/,"");return a(v,S)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,x,S){if(x==="q"||x==="Q")return S=S.replaceAll("_"," "),S=S.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,E){return String.fromCharCode(parseInt(E,16))}),a(v,S);try{S=atob(S)}catch{}return a(v,S)})}return""}function Ux(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const i in e){const a=e[i];a!==void 0&&t.append(i,a)}return t}function Nu(r){return URL.parse(r)?.origin??null}function Fx({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*t)||i||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function zx(r){const e=r.get("Content-Disposition");if(e){let t=ID(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(_u(t))return t}return null}function Du(r,e){return new Xo(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function Hx(r,e){if(r!==e)throw new Error(`Expected range response-origin "${r}" to match "${e}".`)}function Vx(r,e,t,i){return fetch(r,{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function Gx(r,e){if(r!==200&&r!==206)throw Du(r,e)}function $x(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ve(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class PD extends Tu{_responseOrigin=null;constructor(e){super(e,jD,BD),this.isHttp=/^https?:/i.test(e.url),this.headers=Ux(this.isHttp,e.httpHeaders)}}class jD extends Cu{_abortController=new AbortController;_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:a,rangeChunkSize:o,url:c,withCredentials:u}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!t;const h=new Headers(e.headers);Vx(c,h,u,this._abortController).then(f=>{e._responseOrigin=Nu(f.url),Gx(f.status,c),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:g,suggestedLength:v}=Fx({responseHeaders:p,isHttp:e.isHttp,rangeChunkSize:o,disableRange:t});this._isRangeSupported=g,this._contentLength=v||this._contentLength,this._filename=zx(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qi("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:$x(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class BD extends Ru{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const{url:a,withCredentials:o}=e._source,c=new Headers(e.headers);c.append("Range",`bytes=${t}-${i-1}`),Vx(a,c,o,this._abortController).then(u=>{const h=Nu(u.url);Hx(h,e._responseOrigin),Gx(u.status,a),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:$x(e),done:!1}}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const _f=200,x1=206;function UD(r){return typeof r!="string"?r:Su(r).buffer}class FD extends Tu{#e=new WeakMap;_responseOrigin=null;constructor(e){super(e,zD,HD),this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=Ux(this.isHttp,e.httpHeaders)}_request(e){const t=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};this.#e.set(t,i),t.open("GET",this.url),t.withCredentials=this._source.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.validateStatus=a=>a===x1||a===_f):i.validateStatus=a=>a===_f,t.responseType="arraybuffer",Fe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>e.onError(t.status),t.onreadystatechange=this.#i.bind(this,t),t.onprogress=this.#t.bind(this,t),t.send(null),t}#t(e,t){this.#e.get(e)?.onProgress?.(t)}#i(e,t){const i=this.#e.get(e);if(!i||(e.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),e.readyState!==4)||!this.#e.has(e))return;if(this.#e.delete(e),e.status===0&&this.isHttp){i.onError(e.status);return}const a=e.status||_f;if(!i.validateStatus(a)){i.onError(e.status);return}const o=UD(e.response);if(a===x1){const c=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(c)?i.onDone(o):(ve('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone(o):i.onError(e.status)}_abortRequest(e){this.#e.has(e)&&(this.#e.delete(e),e.abort())}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}class zD extends Cu{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(e){super(e);const{length:t}=e._source;this._contentLength=t,this._fullRequestXhr=e._request({onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#e(){const e=this._stream,{disableRange:t,rangeChunkSize:i}=e._source,a=this._fullRequestXhr;e._responseOrigin=Nu(a.responseURL);const o=a.getAllResponseHeaders(),c=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...g]=f.split(": ");return[p,g.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:h}=Fx({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:i,disableRange:t});u&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=zx(c),this._isRangeSupported&&e._abortRequest(a),this._headersCapability.resolve()}#t(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}#i(e){this._storedError=Du(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class HD extends Ru{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(e,t,i){super(e,t,i),this._requestXhr=e._request({begin:t,end:i,onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:null})}#e(){const e=Nu(this._requestXhr?.responseURL);try{Hx(e,this._stream._responseOrigin)}catch(t){this._storedError=t,this.#i(0)}}#t(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(e){this._storedError??=Du(e,this._stream.url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const VD=/^[a-z][a-z0-9\-+.]+:/i;function GD(r){if(VD.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}function qx(r){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function Yx(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ve(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class $D extends Tu{constructor(e){super(e,qD,YD),this.url=GD(e.url),Fe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class qD extends Cu{_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:a,rangeChunkSize:o}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!t;const c=e.url,u=process.getBuiltinModule("fs");u.promises.lstat(c).then(h=>{const f=u.createReadStream(c),p=qx(f);this._reader=p.getReader();const{size:g}=h;g<=2*o&&(this._isRangeSupported=!1),this._contentLength=g,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qi("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Du(0,c.href)),this._headersCapability.reject(h)})}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Yx(e),done:!1})}cancel(e){this._reader?.cancel(e)}}class YD extends Ru{_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const a=e.url,o=process.getBuiltinModule("fs");try{const c=o.createReadStream(a,{start:t,end:i-1}),u=qx(c);this._reader=u.getReader(),this._readCapability.resolve()}catch(c){this._readCapability.reject(c)}}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:Yx(e),done:!1}}cancel(e){this._reader?.cancel(e)}}const No=Symbol("INITIAL_DATA");class Wx{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:No}}get(e,t=null){if(t){const a=this.#t(e);return a.promise.then(()=>t(a.data)),null}const i=this.#e[e];if(!i||i.data===No)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==No}delete(e){const t=this.#e[e];return!t||t.data===No?!1:(delete this.#e[e],!0)}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==No&&(yield[e,t])}}}const WD=1e5,w1=30;class on{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#_=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=i.scale*Wn.pixelRatio,this.#h=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=i.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=a,this.#s=o,on.#N(),t.style.setProperty("--min-font-size",on.#S),ks(t,i),this.#e.promise.finally(()=>{on.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wt.platform;return be(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:i})=>{if(i){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),on.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*Wn.pixelRatio,a=e.rotation;if(a!==this.#h&&(t?.(),this.#h=a,ks(this.#l,{rotation:a})),i!==this.#d){t?.(),this.#d=i;const o={div:null,properties:null,ctx:on.#D(this.#a)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#E(o)}}cancel(){const e=new qi("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(e){if(this.#i)return;this.#r.ctx??=on.#D(this.#a);const t=this.#u,i=this.#g;for(const a of e){if(t.length>WD){ve("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),a.id&&this.#t.setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(this.#t.ariaHidden=!0),o.append(this.#t)}else a.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(a.str),this.#x(a)}}#x(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const a=ne.transform(this.#y,e.transform);let o=Math.atan2(a[1],a[0]);const c=this.#f[e.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=on.fontFamilyMap.get(u)||u;const h=Math.hypot(a[2],a[3]),f=h*on.#j(u,c,this.#a);let p,g;o===0?(p=a[4],g=a[5]-f):(p=a[4]+f*Math.sin(o),g=a[5]-f*Math.cos(o));const v=t.style;v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*g/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,i.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const S=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);S!==w&&Math.max(S,w)/Math.min(S,w)>1.5&&(x=!0)}if(x&&(i.canvasWidth=c.vertical?e.height:e.width),this.#p.set(t,i),this.#r.div=t,this.#r.properties=i,this.#E(this.#r),i.hasText&&this.#t.append(t),i.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#t.append(S)}}#E(e){const{div:t,properties:i,ctx:a}=e,{style:o}=t;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:h}=i;on.#R(a,h*this.#d,c);const{width:f}=a.measureText(t.textContent);f>0&&o.setProperty("--scale-x",u*this.#d/f)}i.angle!==0&&o.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#D(e=null){let t=this.#b.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#R(e,t,i){const a=this.#_.get(e);t===a.size&&i===a.family||(e.font=`${t}px ${i}`,a.size=t,a.family=i)}static#N(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#j(e,t,i){const a=this.#v.get(e);if(a)return a;const o=this.#D(i);o.canvas.width=o.canvas.height=w1,this.#R(o,w1,e);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(wt.platform.isFirefox&&ve("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),this.#v.set(e,f),f}}const XD=100;function Xx(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Hp,{docId:t}=e,i=r.url?sD(r.url):null,a=r.data?aD(r.data):null,o=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,h=r.range instanceof Vp?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof vr?r.worker:null;const g=r.verbosity,v=typeof r.docBaseUrl=="string"&&!cl(r.docBaseUrl)?r.docBaseUrl:null,x=Mc(r.cMapUrl),S=r.cMapPacked!==!1,w=r.CMapReaderFactory||($t?hD:a1),E=Mc(r.iccUrl),_=Mc(r.standardFontDataUrl),R=r.StandardFontDataFactory||($t?fD:r1),T=Mc(r.wasmUrl),N=r.WasmFactory||($t?pD:o1),D=r.stopAtErrors!==!0,O=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,Y=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!$t,W=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!$t&&(wt.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,q=typeof r.disableFontFace=="boolean"?r.disableFontFace:$t,J=r.fontExtraProperties===!0,re=r.enableXfa===!0,oe=r.ownerDocument||globalThis.document,me=r.disableRange===!0,P=r.disableStream===!0,G=r.disableAutoFetch===!0,ee=r.pdfBug===!0,ge=r.CanvasFactory||($t?dD:lD),_e=r.FilterFactory||($t?uD:cD),L=r.enableHWA===!0,H=r.useWasm!==!1,Z=h?h.length:r.length??NaN,te=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!$t&&!q,ue=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(w===a1&&R===r1&&N===o1&&x&&_&&T&&Io(x,document.baseURI)&&Io(_,document.baseURI)&&Io(T,document.baseURI)),ye=null;BN(g);const de={canvasFactory:new ge({ownerDocument:oe,enableHWA:L}),filterFactory:new _e({docId:t,ownerDocument:oe}),cMapReaderFactory:ue?null:new w({baseUrl:x,isCompressed:S}),standardFontDataFactory:ue?null:new R({baseUrl:_}),wasmFactory:ue?null:new N({baseUrl:T})};p||(p=vr.create({verbosity:g,port:ra.workerPort}),e._worker=p);const ot={docId:t,apiVersion:"5.4.624",data:a,password:u,disableAutoFetch:G,rangeChunkSize:f,length:Z,docBaseUrl:v,enableXfa:re,evaluatorOptions:{maxImageSize:O,disableFontFace:q,ignoreErrors:D,isEvalSupported:j,isOffscreenCanvasSupported:Y,isImageDecoderSupported:W,canvasMaxAreaInBytes:$,fontExtraProperties:J,useSystemFonts:te,useWasm:H,useWorkerFetch:ue,cMapUrl:x,iccUrl:E,standardFontDataUrl:_,wasmUrl:T}},He={ownerDocument:oe,pdfBug:ee,styleElement:ye,enableHWA:L,loadingParams:{disableAutoFetch:G,enableXfa:re}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Kn=p.messageHandler.sendWithPromise("GetDocRequest",ot,a?[a.buffer]:null);let Qn;if(h)Qn=new MD({pdfDataRangeTransport:h,disableRange:me,disableStream:P});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Bn=Io(i)?PD:$t?$D:FD;Qn=new Bn({url:i,length:Z,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:me,disableStream:P})}return Kn.then(Bn=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const ha=new Po(t,Bn,p.port),Zn=new ZD(ha,e,Qn,He,de);e._transport=Zn,ha.send("Ready",null)})}).catch(e._capability.reject),e}class Hp{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Hp.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Vp{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,t,i=!1,a=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const i of this.#a)i(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const i of this.#n)i(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#i)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class KD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class QD{#e=!1;#t=Pe.instance;constructor(e,t,i,a=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=a?new Zb:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Wx,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new ll({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:i,intent:a="display",annotationMode:o=ji.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:x=!1,operationsFilter:S=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(a,o,g,v),{renderingIntent:E,cacheKey:_}=w;this.#e=!1,h||=this._transport.getOptionalContentConfig(E);let R=this._intentStates.get(_);R||(R=Object.create(null),this._intentStates.set(_,R)),R.streamReaderCancelTimeout&&(clearTimeout(R.streamReaderCancelTimeout),R.streamReaderCancelTimeout=null);const T=!!(E&bn.PRINT);R.displayReadyCapability||(R.displayReadyCapability=Promise.withResolvers(),R.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(x||N),O=W=>{if(R.renderTasks.delete(j),D){const $=j.gfx?.dependencyTracker.take();$&&(j.stepper&&j.stepper.setOperatorBBoxes($,j.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=$))}T&&(this.#e=!0),this.#i(),W?(j.capability.reject(W),this._abortOperatorList({intentState:R,reason:W instanceof Error?W:new Error(W)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new or({callback:O,params:{canvas:t,canvasContext:e,dependencyTracker:D?new gD(t,R.operatorList.length,N):null,viewport:i,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:R.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:S});(R.renderTasks||=new Set).add(j);const Y=j.task;return Promise.all([R.displayReadyCapability.promise,h]).then(([W,$])=>{if(this.destroyed){O();return}if(this._stats?.time("Rendering"),!($.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:W,optionalContentConfig:$}),j.operatorListChanged()}).catch(O),Y}getOperatorList({intent:e="display",annotationMode:t=ji.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,i,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ko.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,a){function o(){c.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},a)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#i();return e&&t&&(this._stats&&=new Zb),t}#i(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,a=e.length;i<a;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:c}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:a},c).getReader(),f=this._intentStates.get(t);f.streamReader=h;const p=()=>{h.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Eu){let a=XD;t.extraDelay>0&&t.extraDelay<1e3&&(a+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},a);return}}if(e.streamReader.cancel(new qi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Ts,Vn,Pi,ia,hu,sa,aa,Yt,Wc,Kx,Qx,jo,pr,Xc;const tt=class tt{constructor({name:e=null,port:t=null,verbosity:i=UN()}={}){si(this,Yt);si(this,Ts,Promise.withResolvers());si(this,Vn,null);si(this,Pi,null);si(this,ia,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(et(tt,aa).has(t))throw new Error("Cannot use more than one PDFWorker per port.");et(tt,aa).set(t,this),ai(this,Yt,Kx).call(this,t)}else ai(this,Yt,Qx).call(this)}get promise(){return et(this,Ts).promise}get port(){return et(this,Pi)}get messageHandler(){return et(this,Vn)}destroy(){this.destroyed=!0,et(this,ia)?.terminate(),sn(this,ia,null),et(tt,aa).delete(et(this,Pi)),sn(this,Pi,null),et(this,Vn)?.destroy(),sn(this,Vn,null)}static create(e){const t=et(this,aa).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tt(e)}static get workerSrc(){if(ra.workerSrc)return ra.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return be(this,"_setupFakeWorkerGlobal",(async()=>et(this,pr,Xc)?et(this,pr,Xc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ts=new WeakMap,Vn=new WeakMap,Pi=new WeakMap,ia=new WeakMap,hu=new WeakMap,sa=new WeakMap,aa=new WeakMap,Yt=new WeakSet,Wc=function(){et(this,Ts).resolve(),et(this,Vn).send("configure",{verbosity:this.verbosity})},Kx=function(e){sn(this,Pi,e),sn(this,Vn,new Po("main","worker",e)),et(this,Vn).on("ready",()=>{}),ai(this,Yt,Wc).call(this)},Qx=function(){if(et(tt,sa)||et(tt,pr,Xc)){ai(this,Yt,jo).call(this);return}let{workerSrc:e}=tt;try{tt._isSameOrigin(window.location,e)||(e=tt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Po("main","worker",t),a=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?et(this,Ts).reject(new Error("Worker was destroyed")):ai(this,Yt,jo).call(this)},o=new AbortController;t.addEventListener("error",()=>{et(this,ia)||a()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}sn(this,Vn,i),sn(this,Pi,t),sn(this,ia,t),ai(this,Yt,Wc).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{ai(this,Yt,jo).call(this)}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{Au("The worker has been disabled.")}ai(this,Yt,jo).call(this)},jo=function(){et(tt,sa)||(ve("Setting up fake worker."),sn(tt,sa,!0)),tt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){et(this,Ts).reject(new Error("Worker was destroyed"));return}const t=new oD;sn(this,Pi,t);const i=`fake${$y(tt,hu)._++}`,a=new Po(i+"_worker",i,t);e.setup(a,t),sn(this,Vn,new Po(i,i+"_worker",t)),ai(this,Yt,Wc).call(this)}).catch(e=>{et(this,Ts).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},pr=new WeakSet,Xc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},si(tt,pr),si(tt,hu,0),si(tt,sa,!1),si(tt,aa,new WeakMap),$t&&(sn(tt,sa,!0),ra.workerSrc||="./pdf.worker.mjs"),tt._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const a=new URL(t,i);return i.origin===a.origin},tt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tt.fromPort=e=>{if(WN("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return tt.create(e)};let vr=tt;class ZD{downloadInfoCapability=Promise.withResolvers();#e=null;#t=new Map;#i=null;#n=new Map;#a=new Map;#r=new Map;#s=null;#o=Pe.instance;constructor(e,t,i,a,o){this.messageHandler=e,this.loadingTask=t,this.#i=i,this.commonObjs=new Wx,this.fontLoader=new tD({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.enableHWA=a.enableHWA,this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const e=new Map,t=new Map;for(let i=0,a=this.#o.pagesNumber;i<a;i++){const o=this.#o.getPrevPageNumber(i+1)-1,c=this.#n.get(o);c&&e.set(i,c);const u=this.#a.get(o);u&&t.set(i,u)}this.#n=e,this.#a=t}#l(e,t=null){const i=this.#t.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,a),a}#h({loaded:e,total:t}){this.loadingTask.onProgress?.({loaded:e,total:t,percent:kt(Math.round(e/t*100),0,100)})}get annotationStorage(){return be(this,"annotationStorage",new Bp)}getRenderingIntent(e,t=ji.ENABLE,i=null,a=!1,o=!1){let c=bn.DISPLAY,u=Xf;switch(e){case"any":c=bn.ANY;break;case"display":break;case"print":c=bn.PRINT;break;default:ve(`getRenderingIntent - invalid intent: ${e}`)}const h=c&bn.PRINT&&i instanceof Mx?i:this.annotationStorage;switch(t){case ji.DISABLE:c+=bn.ANNOTATIONS_DISABLE;break;case ji.ENABLE:break;case ji.ENABLE_FORMS:c+=bn.ANNOTATIONS_FORMS;break;case ji.ENABLE_STORAGE:c+=bn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:ve(`getRenderingIntent - invalid annotationMode: ${t}`)}a&&(c+=bn.IS_EDITING),o&&(c+=bn.OPLIST);const{ids:f,hash:p}=h.modifiedIds,g=[c,u.hash,p];return{renderingIntent:c,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#n.values())e.push(i._destroy());this.#n.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),on.cleanup(),this.#i?.cancelAllRequests(new qi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,a)=>{Fe(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#e=this.#i.getFullReader(),this.#e.onProgress=o=>this.#h(o),a.onPull=()=>{this.#e.read().then(function({value:o,done:c}){if(c){a.close();return}Fe(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this.#e.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async i=>{await this.#e.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this.#e;return a&&o&&(this.#e.onProgress=null),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(i,a)=>{Fe(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#i.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}Fe(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:i})=>{this.#o.pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new KD(i,this))}),e.on("DocException",i=>{t._capability.reject(an(i))}),e.on("PasswordRequest",i=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw an(i);const a=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};t.onPassword(a,i.code)}catch(a){this.#s.reject(a)}return this.#s.promise}),e.on("DataLoaded",i=>{this.#h({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#n.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const g=o.error;ve(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const c=new We(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,h=new nD(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=o;Fe(f,"The imageRef must be defined.");for(const g of this.#n.values())for(const[,v]of g.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new iD(o));break;case"Image":this.commonObjs.resolve(i,o);break;case"Pattern":const p=new Rt(o);this.commonObjs.resolve(i,p.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),e.on("obj",([i,a,o,c])=>{if(this.destroyed)return;const u=this.#n.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{this.destroyed||this.#h(i)}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this.#e?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#o.getPageId(e)-1,a=this.#a.get(t);if(a)return a;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,i);const u=new QD(t,c,this,this._params.pdfBug);return this.#n.set(t,u),u});return this.#a.set(t,o),o}async getPageIndex(e){if(!Kf(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return this.#o.getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(e+1)-1,intent:t})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#l("GetOptionalContentConfig").then(t=>new kD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#t.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new ND(a[1]):null,contentDispositionFilename:this.#e?.filename??null,contentLength:this.#e?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#n.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),on.cleanup()}}cachedPageNumber(e){if(!Kf(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,i=this.#r.get(t);return i>=0?this.#o.getPageNumber(i+1):null}}class JD{_internalRenderTask=null;onContinue=null;onError=null;constructor(e){this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&t?.size>0}}class or{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:x=!1,operationsFilter:S=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new JD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=x,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=S}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(or.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");or.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new fr(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),or.#t.delete(this._canvas),e||=new Eu(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),or.#t.delete(this._canvas),this.callback())))}}const Zx="5.4.624",Jx="384c6208b";class vn{#e=null;#t=null;#i;#n=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return be(this,"_keyboardManager",new ul([[["Escape","mac+Escape"],vn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vn.prototype._moveToPrevious],[["Home","mac+Home"],vn.prototype._moveToBeginning],[["End","mac+End"],vn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#s=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",vn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",An,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",vn.#h[i]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){vn._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Qo{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,Qo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:i}=this.#t,a=this.#e=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Qo.#n[e]),a.addEventListener("input",()=>{this.#i.updateParams(t,a.value)},{signal:this.#i._signal}),a}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function A1(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Do(r){return Math.max(0,Math.min(255,255*r))}class S1{static CMYK_G([e,t,i,a]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+a)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Do(e),[e,e,e]}static G_HTML([e]){const t=A1(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Do)}static RGB_HTML(e){return`#${e.map(A1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,a]){return["RGB",1-Math.min(1,e+a),1-Math.min(1,i+a),1-Math.min(1,t+a)]}static CMYK_rgb([e,t,i,a]){return[Do(1-Math.min(1,e+a)),Do(1-Math.min(1,i+a)),Do(1-Math.min(1,t+a))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const a=1-e,o=1-t,c=1-i,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class e3{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${e}px`),a.setAttribute("height",`${t}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${t}`),a}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}class Zo extends e3{_createSVG(e){return document.createElementNS(Ii,e)}}const t3=9,ca=new WeakSet,n3=new Date().getTimezoneOffset()*60*1e3;class Tf{static create(e){switch(e.data.annotationType){case ft.LINK:return new Gp(e);case ft.TEXT:return new s3(e);case ft.WIDGET:switch(e.data.fieldType){case"Tx":return new a3(e);case"Btn":return e.data.radioButton?new ew(e):e.data.checkBox?new o3(e):new l3(e);case"Ch":return new c3(e);case"Sig":return new r3(e)}return new da(e);case ft.POPUP:return new Jf(e);case ft.FREETEXT:return new tw(e);case ft.LINE:return new d3(e);case ft.SQUARE:return new h3(e);case ft.CIRCLE:return new f3(e);case ft.POLYLINE:return new nw(e);case ft.CARET:return new m3(e);case ft.INK:return new $p(e);case ft.POLYGON:return new p3(e);case ft.HIGHLIGHT:return new iw(e);case ft.UNDERLINE:return new g3(e);case ft.SQUIGGLY:return new y3(e);case ft.STRIKEOUT:return new b3(e);case ft.STAMP:return new sw(e);case ft.FILEATTACHMENT:return new v3(e);default:return new rt(e)}}}class rt{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return rt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:i,rect:a}=this.data;let o=-1/0,c=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>c?(c=t[u+1],o=t[u+2]):t[u+1]===c&&(o=Math.max(o,t[u+2]));return[o,c]}if(i?.length>=1){for(const u of i)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/i,e[1]=100*(e[1]-c)/a,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Wo}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:i})||this.annotationStorage.setValue(`${Wo}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:i,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:i}=e;t&&this.#n(t);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(e),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...e),t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(c-e[3]+h)/c}%`,a===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(a)}_createContainer(e){const{data:t,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof da)&&!(this instanceof Gp)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof Jf){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(w>0||E>0){const R=`calc(${w}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;c.borderRadius=R}else if(this instanceof ew){const R=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=R}switch(t.borderStyle.style){case ir.SOLID:c.borderStyle="solid";break;case ir.DASHED:c.borderStyle="dashed";break;case ir.BEVELED:ve("Unimplemented border style: beveled");break;case ir.INSET:ve("Unimplemented border style: inset");break;case ir.UNDERLINE:c.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(this.#t=!0,c.borderColor=ne.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):c.borderWidth=0}const f=ne.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:x}=a.rawDims;c.left=`${100*(f[0]-v)/p}%`,c.top=`${100*(f[1]-x)/g}%`;const{rotation:S}=t;return t.hasOwnCanvas||S===0?(c.width=`${100*u/p}%`,c.height=`${100*h/g}%`):this.setRotation(S,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;e%180!==0&&([o,c]=[c,o]),t.style.width=`${100*o/i}%`,t.style.height=`${100*c/a}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,a)=>{const o=a.detail[t],c=o[0],u=o.slice(1);a.target.style[i]=S1[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:S1[`${c}_rgb`](u)})};return be(this,"_commonActions",{display:t=>{const{display:i}=t.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const a of Object.keys(t.detail))(e[a]||i[a])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[a,o]of Object.entries(t)){const c=i[a];if(c){const u={detail:{[a]:o},target:e};c(u),delete t[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,a,o]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,E,_,R]=e.subarray(2,6);if(a===w&&o===E&&t===_&&i===R)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:w,borderWidth:E}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const h=a-t,f=o-i,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=p.createElement("defs");g.append(v);const x=p.createElement("clipPath"),S=`clippath_${this.data.id}`;x.setAttribute("id",S),x.setAttribute("clipPathUnits","objectBoundingBox"),v.append(x);for(let w=2,E=e.length;w<E;w+=8){const _=e[w],R=e[w+1],T=e[w+2],N=e[w+3],D=p.createElement("rect"),O=(T-t)/h,j=(o-R)/f,Y=(_-T)/h,W=(R-N)/f;D.setAttribute("x",O),D.setAttribute("y",j),D.setAttribute("width",Y),D.setAttribute("height",W),x.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${j}" width="${Y}" height="${W}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${S})`}_createPopup(e=null){const{data:t}=this;let i,a;e?(i={str:e.text},a=e.date):(i=t.contentsObj,a=t.modificationDate),this.#i=new Jf({data:{color:t.color,titleObj:t.titleObj,modificationDate:a,contentsObj:i,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[e];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===t)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!ca.has(f)){ve(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:h,domElement:f})}return i}for(const a of document.getElementsByName(e)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==t&&ca.has(a)&&i.push({id:c,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class i3 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Gp extends rt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let a=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),a=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),a=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),a=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),a=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,i=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),i&&(e.title=i),this.#e()}#t(e,t,i="",a=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,a),!1),this.#e()}#i(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(t.actions)){const o=i.get(a);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:a}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:a,refs:o,include:c}=t,u=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const g of a){const v=this._fieldObjects[g]||[];for(const{id:x}of v)p.add(x)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===c&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:g}=p;switch(f.push(g),p.type){case"text":{const x=p.defaultValue||"";h.setValue(g,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;h.setValue(g,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";h.setValue(g,{value:x});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!ca.has(v)){ve(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class s3 extends rt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class da extends rt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,a,o){i.includes("mouse")?e.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}})})}_setEventListeners(e,t,i,a){for(const[o,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ne.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||t3,o=e.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(vf*a))||1,g=f/p;c=Math.min(a,h(g/vf))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,h(f/vf))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=ne.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class a3 extends da{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,a){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),o.setValue(c.id,{[a]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ca.add(i),this.contentElement=i,i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:g}=this.data,v=!!p&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",S=>{e.setValue(t,{value:S.target.value}),this.setPropertyOnSiblings(i,"value",S.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",S=>{const w=this.data.defaultFieldValue??"";i.value=h.userValue=w,h.formattedValue=null});let x=S=>{const{formattedValue:w}=h;w!=null&&(S.target.value=w),S.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(h.focused)return;const{target:E}=w;if(v&&(E.type=p,g&&(E.step=g)),h.userValue){const _=h.userValue;if(v)if(p==="time"){const R=new Date(_),T=[R.getHours(),R.getMinutes(),R.getSeconds()];E.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else E.value=new Date(_-n3).toISOString().split(p==="date"?"T":".",1)[0];else E.value=_}h.lastCommittedValue=E.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const E={value(_){h.userValue=_.detail.value??"",v||e.setValue(t,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:R}=_.detail;h.formattedValue=R,R!=null&&_.target!==document.activeElement&&(_.target.value=R);const T={formattedValue:R};v&&(T.value=R),e.setValue(t,T)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:R}=_.detail,{target:T}=_;if(R===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",R);let N=h.userValue;!N||N.length<=R||(N=N.slice(0,R),T.value=h.userValue=N,e.setValue(t,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(E,w)}),i.addEventListener("keydown",w=>{h.commitKey=1;let E=-1;if(w.key==="Escape"?E=0:w.key==="Enter"&&!this.data.multiLine?E=2:w.key==="Tab"&&(h.commitKey=3),E===-1)return;const{value:_}=w.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:E,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const S=x;x=null,i.addEventListener("blur",w=>{if(!h.focused||!w.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:E}=w;let{value:_}=E;if(v){if(_&&p==="time"){const R=_.split(":").map(T=>parseInt(T,10));_=new Date(2e3,0,1,R[0],R[1],R[2]||0).valueOf(),E.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();E.type="text"}h.userValue=_,h.lastCommittedValue!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),S(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{h.lastCommittedValue=null;const{data:E,target:_}=w,{value:R,selectionStart:T,selectionEnd:N}=_;let D=T,O=N;switch(w.inputType){case"deleteWordBackward":{const j=R.substring(0,T).match(/\w*[^\w]*$/);j&&(D-=j[0].length);break}case"deleteWordForward":{const j=R.substring(T).match(/^[^\w]*\w*/);j&&(O+=j[0].length);break}case"deleteContentBackward":T===N&&(D-=1);break;case"deleteContentForward":T===N&&(O+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,change:E||"",willCommit:!1,selStart:D,selEnd:O}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(x&&i.addEventListener("blur",x),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class r3 extends da{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class o3 extends da{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let a=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",e.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ca.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i)){const p=h&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}e.setValue(i,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class ew extends da{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let a=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof a=="string"&&(a=a!==t.buttonValue,e.setValue(i,{value:a})),a)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(ca.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i))e.setValue(f.id,{value:!1});e.setValue(i,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=c===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=p&&g.id===i;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class l3 extends Gp{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class c3 extends da{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),a=document.createElement("select");ca.add(a),a.setAttribute("data-element-id",t),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,i.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),a.append(g)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),c=()=>{p.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=p=>{const g=p?"value":"textContent",{options:v,multiple:x}=a;return x?Array.prototype.filter.call(v,S=>S.selected).map(S=>S[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let h=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const g={value(v){c?.();const x=v.detail.value,S=new Set(Array.isArray(x)?x:[x]);for(const w of a.options)w.selected=S.has(w.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(v){a.multiple=!0},remove(v){const x=a.options,S=v.detail.remove;x[S].selected=!1,a.remove(S),x.length>0&&Array.prototype.findIndex.call(x,E=>E.selected)===-1&&(x[0].selected=!0),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;a.length!==0;)a.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(v){const{index:x,displayValue:S,exportValue:w}=v.detail.insert,E=a.children[x],_=document.createElement("option");_.textContent=S,_.value=w,E?E.before(_):a.append(_),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:x}=v.detail;for(;a.length!==0;)a.remove(0);for(const S of x){const{displayValue:w,exportValue:E}=S,_=document.createElement("option");_.textContent=w,_.value=E,a.append(_)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const x=new Set(v.detail.indices);for(const S of v.target.options)S.selected=x.has(S.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),a.addEventListener("input",p=>{const g=u(!0),v=u(!1);e.setValue(t,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Jf extends rt{constructor(e){const{data:t,elements:i,parent:a}=e,o=!!a._commentManager;if(super(e,{isRenderable:!o&&rt._hasPopupData(t)}),this.elements=i,o&&rt._hasPopupData(t)){const c=this.popup=this.#e();for(const u of i)u.popup=c}else this.popup=null}#e(){return new u3({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),i=[];for(const a of this.elements)a.popup=t,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${ar}${a}`).join(",")),this.container}}class u3{#e=null;#t=this.#G.bind(this);#i=this.#U.bind(this);#n=this.#L.bind(this);#a=this.#A.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#v=null;#b=null;#_=null;#S=null;#w=null;#C=!1;#x=null;#E=null;constructor({container:e,color:t,elements:i,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:f,parentRect:p,open:g,commentManager:v=null}){this.#s=e,this.#S=a,this.#o=c,this.#_=u,this.#h=h,this.#r=t,this.#b=f,this.#d=p,this.#l=i,this.#e=v,this.#x=i[0],this.#c=lu.toDateObject(o),this.trigger=i.flatMap(x=>x.getElementsToTriggerPopup()),v||(this.#D(),this.#s.hidden=!0,g&&this.#A())}#D(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#i,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#R(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#x.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:e}=this.#m=new AbortController,t=this.#x.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#x.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",i,{signal:e}),c.addEventListener("pointerenter",a,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#x.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#N(),c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",i,{signal:e}),c.addEventListener("pointerenter",a,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),u.after(c)}}#N(){if(this.#x.extraPopupElement&&!this.#x.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#y,{style:i}=this.#p;i.left=`calc(${e}%)`,i.top=`calc(${t}% - var(--comment-button-dim))`}#j(){this.#x.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#x.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:i,creationDate:a,modificationDate:o}=this.#x.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:i,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#x.commentText,this.#E}set comment(e){e!==this.comment&&(this.#x.commentText=this.#E=e)}focus(){this.#x.container?.focus()}get parentBoundingClientRect(){return this.#x.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:e,y:t,height:i}=this.#p.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#x.layer.getBoundingClientRect();return[(e-a)/c,(t+i-o)/u]}set commentPopupPosition(e){this.#v=e}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=a;this.#e.showDialog(null,this,o+t*u,c+i*h,{...e,parentDimensions:a})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#r){const i=e.style.outlineColor=ne.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(e.append(t),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),t.append(i)}Ip({html:this.#M||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#s.append(e)}get#M(){const e=this.#_,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#_.html||null}get#O(){return this.#M?.attributes?.style?.fontSize||0}get#B(){return this.#M?.attributes?.style?.color||null}#I(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},a={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:a});return i}#G(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:e,popup:t,deleted:i}){if(this.#e){i?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#j(),this.#E=t.text)),e&&(this.#y=null,this.#R(),this.#N());return}if(i||t?.deleted){this.remove();return}this.#D(),this.#w||={contentsObj:this.#o,richText:this.#_},e&&(this.#u=null),t&&t.text&&(this.#_=this.#I(t.text),this.#c=lu.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#_}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:a,pageY:o}}}=this.#h;let c=!!this.#d,u=c?this.#d:this.#b;for(const S of this.#l)if(!u||ne.intersect(S.data.rect,u)!==null){u=S.data.rect,c=!0;break}const h=ne.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=c?u[2]-u[0]+5:0,g=h[0]+p,v=h[1];this.#u=[100*(g-a)/t,100*(v-o)/i];const{style:x}=this.#s;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#A(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#U(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#L(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#e||(this.#D(),this.#C&&(this.#g||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#e?!1:this.#s.hidden===!1}}class tw extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=we.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class d3 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class h3 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",t-o),c.setAttribute("height",i-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class f3 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",i/2),c.setAttribute("rx",t/2-o/2),c.setAttribute("ry",i/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class nw extends rt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:a},width:o,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(o,c,!0);let h=[];for(let p=0,g=t.length;p<g;p+=2){const v=t[p]-e[0],x=e[3]-t[p+1];h.push(`${v},${x}`)}h=h.join(" ");const f=this.#e=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class p3 extends nw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class m3 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class $p extends rt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?we.HIGHLIGHT:we.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:h}=this.#i(t,e),f=this.svgFactory.create(u,h,!0),p=this.#e=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let g=0,v=i.length;g<v;g++){const x=this.svgFactory.createElement(this.svgElementName);this.#t.push(x),x.setAttribute("points",i[g].join(",")),p.append(x)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:i,rect:a}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),i)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:u,height:h}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class iw extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=we.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class g3 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class y3 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class b3 extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class sw extends rt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=we.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class v3 extends rt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:a}=wt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class ku{#e=null;#t=null;#i=null;#n=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=e,this.#e=t,this.#t=i,this.#a=u||null,this.#r=f||null,this.#i=p||new Bp,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:t}=e,i=this.div;ks(i,this.viewport);const a=new Map,o=[],c={data:null,layer:i,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Zo,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===ft.POPUP;if(h){const g=a.get(u.id);if(!g)continue;if(!this._commentManager){o.push(u);continue}c.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Tf.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const g=a.get(u.popupRef);g?g.push(f):a.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const h=c.elements=a.get(u.id);c.data=u;const f=Tf.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${ar}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#s){const o=i.id=`${ar}${a}`;e.push(this.#a?.getAriaAttributes(o).then(c=>{if(c)for(const[u,h]of c)i.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[i,a,o,c]}},{data:{rect:[u,h,f,p]}})=>{if(i===o&&a===c)return 1;if(u===f&&h===p)return-1;const g=c,v=a,x=(a+c)/2,S=p,w=h,E=(h+p)/2;if(x>=S&&E<=v)return-1;if(E>=g&&x<=w)return 1;const _=(i+o)/2,R=(u+f)/2;return _-R});const t=document.createDocumentFragment();for(const i of this.#s)t.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&t.append(i.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(const i of this.#s)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new Zo,parent:this};for(const i of e){i.borderStyle||=ku._defaultBorderStyle,t.data=i;const a=Tf.create(t);a.isRenderable&&(a.render(),a.contentElement.id=`${ar}${i.id}`,this.#s.push(a))}await this.#c()}update({viewport:e}){const t=this.div;this.viewport=e,ks(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const a=e.querySelector(`[data-annotation-id="${t}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const c=this.#n.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:i,rotation:a}=e,o=new i3({data:{id:i,rect:e.getPDFRect(),rotation:a},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i});return o.render(),o.contentElement.id=`${ar}${i}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(e){const t=this.#s.findIndex(a=>a.data.id===e);if(t<0)return;const[i]=this.#s.splice(t,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return be(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ir.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Bc=/\r\n?|\n/g;class Nt extends ce{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Nt.prototype,t=o=>o.isEmpty(),i=Yi.TRANSLATE_SMALL,a=Yi.TRANSLATE_BIG;return be(this,"_keyboardManager",new ul([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:t}]]))}static _type="freetext";static _editorType=we.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Nt._defaultColor||ce._defaultLineColor,this.#n=e.fontSize||Nt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){ce.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ke.FREETEXT_SIZE:Nt._defaultFontSize=t;break;case ke.FREETEXT_COLOR:Nt._defaultColor=t;break}}updateParams(e,t){switch(e){case ke.FREETEXT_SIZE:this.#a(t);break;case ke.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[ke.FREETEXT_SIZE,Nt._defaultFontSize],[ke.FREETEXT_COLOR,Nt._defaultColor||ce._defaultLineColor]]}get propertiesToUpdate(){return[[ke.FREETEXT_SIZE,this.#n],[ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Qo(this),[["colorPicker",this._colorPicker]]}get colorType(){return ke.FREETEXT_COLOR}#a(e){const t=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Nt._internalPadding*e,-(Nt._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(Nt.#c(i)),t=i);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#s().trimEnd();if(e===t)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Nt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[g,v]=this.pageTranslation;let x,S;switch(this.rotation){case 0:x=e+(c[0]-g)/f,S=t+this.height-(c[1]-v)/p;break;case 90:x=e+(c[0]-g)/f,S=t-(c[1]-v)/p,[u,h]=[h,-u];break;case 180:x=e-this.width+(c[0]-g)/f,S=t-(c[1]-v)/p,[u,h]=[-u,-h];break;case 270:x=e+(c[0]-g-this.height*p)/f,S=t+(c[1]-v-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(x*a,S*o,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Bc,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const a=Nt.#d(t.getData("text")||"").replaceAll(Bc,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const x=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Bc,"")),x!==this.editorDiv){let S=f;for(const w of this.editorDiv.childNodes){if(w===x){S=p;continue}S.push(Nt.#c(w))}}f.push(u.nodeValue.slice(0,h).replaceAll(Bc,""))}else if(u===this.editorDiv){let x=f,S=0;for(const w of this.editorDiv.childNodes)S++===h&&(x=p),x.push(Nt.#c(w))}this.#e=`${f.join(`
`)}${a}${p.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(f.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const S=x.nodeValue.length;if(v<=S){g.setStart(x,v),g.setEnd(x,v);break}v-=S}o.removeAllRanges(),o.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Nt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,i){let a=null;if(e instanceof tw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:p,popupRef:g,richText:v,contentsObj:x,creationDate:S,modificationDate:w},textContent:E,textPosition:_,parent:{page:{pageNumber:R}}}=e;if(!E||E.length===0)return null;a=e={annotationType:we.FREETEXT,color:Array.from(u),fontSize:c,value:E.join(`
`),position:_,pageIndex:R-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:x?.str||null,richText:v,creationDate:S,modificationDate:w}}const o=await super.deserialize(e,t,i);return o.#n=e.fontSize,o.color=ne.makeHexColor(...e.color),o.#e=Nt.#d(e.value),o._initialData=a,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(e){const{value:t,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((c,u)=>c!==a[u])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:i}=t;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,t.replaceChildren();for(const a of this.#e.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ie{static PRECISION=1e-4;toSVGPath(){ze("Abstract method `toSVGPath` must be implemented.")}get box(){ze("Abstract getter `box` must be implemented.")}serialize(e,t){ze("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,a,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*a,c[u+1]=i+e[u+1]*o;return c}static _rescaleAndSwap(e,t,i,a,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*a,c[u+1]=i+e[u]*o;return c}static _translate(e,t,i,a){a||=new Float32Array(e.length);for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o],a[o+1]=i+e[o+1];return a}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,a,o){switch(o){case 90:return[1-t/i,e/a];case 180:return[1-e/i,1-t/a];case 270:return[t/i,1-e/a];default:return[e/i,t/a]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,a,o,c){return[(e+5*i)/6,(t+5*a)/6,(5*i+o)/6,(5*a+c)/6,(i+o)/2,(a+c)/2]}}class na{#e;#t=[];#i;#n;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=na.#g+na.#m;constructor({x:e,y:t},i,a,o,c,u=0){this.#e=i,this.#d=o*a,this.#n=c,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=u,this.#l=na.#g*a,this.#c=na.#u*a,this.#h=a,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[i,a,o,c]=this.#e;return[(this.#s+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/c,(this.#s+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/c]}add({x:e,y:t}){this.#s=e,this.#o=t;const[i,a,o,c]=this.#e;let[u,h,f,p]=this.#r.subarray(8,12);const g=e-f,v=t-p,x=Math.hypot(g,v);if(x<this.#c)return!1;const S=x-this.#l,w=S/x,E=w*g,_=w*v;let R=u,T=h;u=f,h=p,f+=E,p+=_,this.#f?.push(e,t);const N=-_/S,D=E/S,O=N*this.#d,j=D*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+O,p+j],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-O,p-j],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+O,h+j],2),this.#a.push(NaN,NaN,NaN,NaN,(u+O-i)/o,(h+j-a)/c),this.#r.set([u-O,h-j],14),this.#t.push(NaN,NaN,NaN,NaN,(u-O-i)/o,(h-j-a)/c)),this.#r.set([R,T,u,h,f,p],6),!this.isEmpty()):(this.#r.set([R,T,u,h,f,p],6),Math.abs(Math.atan2(T-h,R-u)-Math.atan2(_,E))<Math.PI/2?([u,h,f,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/o,((h+p)/2-a)/c),[u,h,R,T]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((R+u)/2-i)/o,((T+h)/2-a)/c),!0):([R,T,u,h,f,p]=this.#r.subarray(0,6),this.#a.push(((R+5*u)/6-i)/o,((T+5*h)/6-a)/c,((5*u+f)/6-i)/o,((5*h+p)/6-a)/c,((u+f)/2-i)/o,((h+p)/2-a)/c),[f,p,u,h,R,T]=this.#r.subarray(12,18),this.#t.push(((R+5*u)/6-i)/o,((T+5*h)/6-a)/c,((5*u+f)/6-i)/o,((5*h+p)/6-a)/c,((u+f)/2-i)/o,((h+p)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let a=6;a<e.length;a+=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);this.#b(i);for(let a=t.length-6;a>=6;a-=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[e,t,i,a]=this.#e,[o,c,u,h]=this.#p();return`M${(this.#r[2]-e)/i} ${(this.#r[3]-t)/a} L${(this.#r[4]-e)/i} ${(this.#r[5]-t)/a} L${o} ${c} L${u} ${h} L${(this.#r[16]-e)/i} ${(this.#r[17]-t)/a} L${(this.#r[14]-e)/i} ${(this.#r[15]-t)/a} Z`}#v(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,i,a,o]=this.#e,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,p,g]=this.#p();e.push(`L${(c[0]-t)/a} ${(c[1]-i)/o} L${h} ${f} L${p} ${g} L${(u[0]-t)/a} ${(u[1]-i)/o}`)}newFreeDrawOutline(e,t,i,a,o,c){return new aw(e,t,i,a,o,c)}getOutlines(){const e=this.#a,t=this.#t,i=this.#r,[a,o,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=h.length-2;g<v;g+=2)h[g]=(this.#f[g]-a)/c,h[g+1]=(this.#f[g+1]-o)/u;if(h[h.length-2]=(this.#s-a)/c,h[h.length-1]=(this.#o-o)/u,isNaN(i[6])&&!this.isEmpty())return this.#_(h);const f=new Float32Array(this.#a.length+24+this.#t.length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){f[g]=f[g+1]=NaN;continue}f[g]=e[g],f[g+1]=e[g+1]}p=this.#w(f,p);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=t[g+v],f[p+1]=t[g+v+1],p+=2}return this.#S(f,p),this.newFreeDrawOutline(f,h,this.#e,this.#h,this.#i,this.#n)}#_(e){const t=this.#r,[i,a,o,c]=this.#e,[u,h,f,p]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-i)/o,(t[3]-a)/c,NaN,NaN,NaN,NaN,(t[4]-i)/o,(t[5]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(t[16]-i)/o,(t[17]-a)/c,NaN,NaN,NaN,NaN,(t[14]-i)/o,(t[15]-a)/c],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#i,this.#n)}#S(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#w(e,t){const i=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[o,c,u,h]=this.#e,[f,p,g,v]=this.#p();return e.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/h],t),t+=24}}class aw extends ie{#e;#t=new Float32Array(4);#i;#n;#a;#r;#s;constructor(e,t,i,a,o,c){super(),this.#s=e,this.#a=t,this.#e=i,this.#r=a,this.#i=o,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,p]=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-u)/f,e[g+1]=(e[g+1]-h)/p;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/f,t[g+1]=(t[g+1]-h)/p}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let t=6,i=this.#s.length;t<i;t+=6){if(isNaN(this.#s[t])){e.push(`L${this.#s[t+4]} ${this.#s[t+5]}`);continue}e.push(`C${this.#s[t]} ${this.#s[t+1]} ${this.#s[t+2]} ${this.#s[t+3]} ${this.#s[t+4]} ${this.#s[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,a],o){const c=i-e,u=a-t;let h,f;switch(o){case 0:h=ie._rescale(this.#s,e,a,c,-u),f=ie._rescale(this.#a,e,a,c,-u);break;case 90:h=ie._rescaleAndSwap(this.#s,e,t,c,u),f=ie._rescaleAndSwap(this.#a,e,t,c,u);break;case 180:h=ie._rescale(this.#s,i,t,-c,u),f=ie._rescale(this.#a,i,t,-c,u);break;case 270:h=ie._rescaleAndSwap(this.#s,i,a,-c,-u),f=ie._rescaleAndSwap(this.#a,i,a,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(e){const t=this.#s;let i=t[4],a=t[5];const o=[i,a,i,a];let c=i,u=a,h=i,f=a;const p=e?Math.max:Math.min,g=new Float32Array(4);for(let x=6,S=t.length;x<S;x+=6){const w=t[x+4],E=t[x+5];isNaN(t[x])?(ne.pointBoundingBox(w,E,o),u>E?(c=w,u=E):u===E&&(c=p(c,w)),f<E?(h=w,f=E):f===E&&(h=p(h,w))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,ne.bezierBoundingBox(i,a,...t.slice(x,x+6),g),ne.rectBoundingBox(g[0],g[1],g[2],g[3],o),u>g[1]?(c=g[0],u=g[1]):u===g[1]&&(c=p(c,g[0])),f<g[3]?(h=g[2],f=g[3]):f===g[3]&&(h=p(h,g[2]))),i=w,a=E}const v=this.#t;v[0]=o[0]-this.#i,v[1]=o[1]-this.#i,v[2]=o[2]-o[0]+2*this.#i,v[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#t}newOutliner(e,t,i,a,o,c=0){return new na(e,t,i,a,o,c)}getNewOutline(e,t){const[i,a,o,c]=this.#t,[u,h,f,p]=this.#e,g=o*f,v=c*p,x=i*f+u,S=a*p+h,w=this.newOutliner({x:this.#a[0]*g+x,y:this.#a[1]*v+S},this.#e,this.#r,e,this.#n,t??this.#i);for(let E=2;E<this.#a.length;E+=2)w.add({x:this.#a[E]*g+x,y:this.#a[E+1]*v+S});return w.getOutlines()}}class ep{#e;#t;#i;#n=[];#a=[];constructor(e,t=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:w,y:E,width:_,height:R}of e){const T=Math.floor((w-t)/c)*c,N=Math.ceil((w+_+t)/c)*c,D=Math.floor((E-t)/c)*c,O=Math.ceil((E+R+t)/c)*c,j=[T,D,O,!0],Y=[N,D,O,!1];this.#n.push(j,Y),ne.rectBoundingBox(T,D,N,O,o)}const u=o[2]-o[0]+2*i,h=o[3]-o[1]+2*i,f=o[0]-i,p=o[1]-i;let g=a?-1/0:1/0,v=1/0;const x=this.#n.at(a?-1:-2),S=[x[0],x[2]];for(const w of this.#n){const[E,_,R,T]=w;!T&&a?_<v?(v=_,g=E):_===v&&(g=Math.max(g,E)):T&&!a&&(_<v?(v=_,g=E):_===v&&(g=Math.min(g,E))),w[0]=(E-f)/u,w[1]=(_-p)/h,w[2]=(R-p)/h}this.#e=new Float32Array([f,p,u,h]),this.#t=[g,v],this.#i=S}getOutlines(){this.#n.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],i=new Set;for(const c of e){const[u,h,f]=c;t.push([u,h,c],[u,f,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],f=t[c+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const a=[];let o;for(;i.size>0;){const c=i.values().next().value;let[u,h,f,p,g]=c;i.delete(c);let v=u,x=h;for(o=[u,f],a.push(o);;){let S;if(i.has(p))S=p;else if(i.has(g))S=g;else break;i.delete(S),[u,h,f,p,g]=S,v!==u&&(o.push(v,x,u,x===h?h:f),v=u),x=x===h?f:h}o.push(v,x)}return new x3(a,this.#e,this.#t,this.#i)}#s(e){const t=this.#a;let i=0,a=t.length-1;for(;i<=a;){const o=i+a>>1,c=t[o][0];if(c===e)return o;c<e?i=o+1:a=o-1}return a+1}#o([,e,t]){const i=this.#s(e);this.#a.splice(i,0,[e,t])}#c([,e,t]){const i=this.#s(e);for(let a=i;a<this.#a.length;a++){const[o,c]=this.#a[a];if(o!==e)break;if(o===e&&c===t){this.#a.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,c]=this.#a[a];if(o!==e)break;if(o===e&&c===t){this.#a.splice(a,1);return}}}#l(e){const[t,i,a]=e,o=[[t,i,a]],c=this.#s(a);for(let u=0;u<c;u++){const[h,f]=this.#a[u];for(let p=0,g=o.length;p<g;p++){const[,v,x]=o[p];if(!(f<=v||x<=h)){if(v>=h){if(x>f)o[p][1]=f;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=h,x>f&&o.push([t,f,x])}}}return o}}class x3 extends ie{#e;#t;constructor(e,t,i,a){super(),this.#t=e,this.#e=t,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const e=[];for(const t of this.#t){let[i,a]=t;e.push(`M${i} ${a}`);for(let o=2;o<t.length;o+=2){const c=t[o],u=t[o+1];c===i?(e.push(`V${u}`),a=u):u===a&&(e.push(`H${c}`),i=c)}e.push("Z")}return e.join(" ")}serialize([e,t,i,a],o){const c=[],u=i-e,h=a-t;for(const f of this.#t){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=e+f[g]*u,p[g+1]=a-f[g+1]*h;c.push(p)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class tp extends na{newFreeDrawOutline(e,t,i,a,o,c){return new w3(e,t,i,a,o,c)}}class w3 extends aw{newOutliner(e,t,i,a,o,c=0){return new tp(e,t,i,a,o,c)}}class pt extends ce{#e=null;#t=0;#i;#n=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=we.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=pt.prototype;return be(this,"_keyboardManager",new ul([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||pt._defaultColor,this.#p=e.thickness||pt._defaultThickness,this.opacity=e.opacity||pt._defaultOpacity,this.#i=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#b(e),this.#x()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new ep(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new ep(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#r;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#l=e;const a=1.5;if(this.#r=e.getNewOutline(this.#p/2+a,.0025),t>=0)this.#h=t,this.#n=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:pt.#E(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:pt.#E(this.#r.box,g),path:{d:this.#r.toSVGPath()}})}const[o,c,u,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=h;break;case 90:{const[g,v]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*v/g,this.height=h*g/v;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*v/g,this.height=h*g/v;break}}const{firstPoint:f}=e;this.#f=[(f[0]-o)/u,(f[1]-c)/h];const{lastPoint:p}=this.#r;this.#g=[(p[0]-o)/u,(p[1]-c)/h]}static initialize(e,t){ce.initialize(e,t),pt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:pt._defaultColor=t;break;case ke.HIGHLIGHT_THICKNESS:pt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:this.#_(t);break;case ke.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,pt._defaultColor],[ke.HIGHLIGHT_THICKNESS,pt._defaultThickness]]}get propertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,this.color||pt._defaultColor],[ke.HIGHLIGHT_THICKNESS,this.#p||pt._defaultThickness],[ke.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#_(e){const t=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:t.bind(this,e,pt._defaultOpacity),undo:t.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,i=a=>{this.#p=a,this.#w(a)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new vn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#x(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#x(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,i,a],o){switch(o){case 90:return[1-t-a,e,a,i];case 180:return[1-e-i,1-t-a,i,a];case 270:return[t,1-e-i,a,i]}return[e,t,i,a]}rotate(e){const{drawLayer:t}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=pt.#E(this.#l.box,e)):i=pt.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:pt.#E(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),Dx(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#D(e){pt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#N(){return this.#d?this.rotation:0}#j(){if(this.#d)return null;const[e,t]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:p,height:g}of o){const v=h*e+i,x=(1-f)*t+a;c[u]=c[u+4]=v,c[u+1]=c[u+3]=x,c[u+2]=c[u+6]=v+p*e,c[u+5]=c[u+7]=x-g*t,u+=8}return c}#M(e){return this.#l.serialize(e,this.#N())}static startHighlighting(e,t,{target:i,x:a,y:o}){const{x:c,y:u,width:h,height:f}=i.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),v=x=>{p.abort(),this.#B(e,x)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",at,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",An,{signal:g}),i.addEventListener("pointermove",this.#O.bind(this,e),{signal:g}),this._freeHighlight=new tp({x:a,y:o},[c,u,h,f],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,i){let a=null;if(e instanceof iw){const{data:{quadPoints:S,rect:w,rotation:E,id:_,color:R,opacity:T,popupRef:N,richText:D,contentsObj:O,creationDate:j,modificationDate:Y},parent:{page:{pageNumber:W}}}=e;a=e={annotationType:we.HIGHLIGHT,color:Array.from(R),opacity:T,quadPoints:S,boxes:null,pageIndex:W-1,rect:w.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,popupRef:N,richText:D,comment:O?.str||null,creationDate:j,modificationDate:Y}}else if(e instanceof $p){const{data:{inkLists:S,rect:w,rotation:E,id:_,color:R,borderStyle:{rawWidth:T},popupRef:N,richText:D,contentsObj:O,creationDate:j,modificationDate:Y},parent:{page:{pageNumber:W}}}=e;a=e={annotationType:we.HIGHLIGHT,color:Array.from(R),thickness:T,inkLists:S,boxes:null,pageIndex:W-1,rect:w.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,popupRef:N,richText:D,comment:O?.str||null,creationDate:j,modificationDate:Y}}const{color:o,quadPoints:c,inkLists:u,opacity:h}=e,f=await super.deserialize(e,t,i);f.color=ne.makeHexColor(...o),f.opacity=h||1,u&&(f.#p=e.thickness),f._initialData=a,e.comment&&f.setCommentData(e);const[p,g]=f.pageDimensions,[v,x]=f.pageTranslation;if(c){const S=f.#i=[];for(let w=0;w<c.length;w+=8)S.push({x:(c[w]-v)/p,y:1-(c[w+1]-x)/g,width:(c[w+2]-c[w])/p,height:(c[w+1]-c[w+5])/g});f.#v(),f.#x(),f.rotate(f.rotation)}else if(u){f.#d=!0;const S=u[0],w={x:S[0]-v,y:g-(S[1]-x)},E=new tp(w,[0,0,p,g],1,f.#p/2,!0,.001);for(let T=0,N=S.length;T<N;T+=2)w.x=S[T]-v,w.y=g-(S[T+1]-x),E.add(w);const{id:_,clipPathId:R}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);f.#b({highlightOutlines:E.getOutlines(),highlightId:_,clipPathId:R}),f.#x(),f.rotate(f.parentRotation)}return f}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#j(),outlines:this.#M(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((i,a)=>i!==t[a])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class rw{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){ze("Not implemented")}}class Be extends ce{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#r(e),this.#c())}#r({drawOutlines:e,drawId:t,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#s(e,this.parent),this.#d(e.box)}#s(e,t){const{id:i}=t.drawLayer.draw(Be._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,t){const i=new Set(Object.keys(e));for(const[a,o]of Object.entries(t))i.has(a)?Object.assign(e[a],o):e[a]=o;return e}static getDefaultDrawingOptions(e){ze("Not implemented")}static get typesMap(){ze("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(Be.#i.updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)e.push([i,t[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[i,a]of this.constructor.typesMap)e.push([i,t[a]]);return e}_updateProperty(e,t,i){const a=this._drawingOptions,o=a[t],c=u=>{a.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#d(h),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#e,e)}}#l([e,t,i,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[t,1-e,i*(c/o),a*(o/c)];case 180:return[1-e,1-t,i,a];case 270:return[1-t,e,i*(c/o),a*(o/c)];default:return[e,t,i,a]}}#h(){const{x:e,y:t,width:i,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-t,e,i*(o/c),a*(c/o)];case 180:return[1-e,1-t,i,a];case 270:return[t,1-e,i*(o/c),a*(c/o)];default:return[e,t,i,a]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:t,width:i,height:a,rotation:o,parentRotation:c,parentDimensions:[u,h]}=this;switch((o*4+c)/90){case 1:return[1-t-a,e,a,i];case 2:return[1-e-i,1-t-a,i,a];case 3:return[t,1-e-i,a,i];case 4:return[e,t-i*(u/h),a*(h/u),i*(u/h)];case 5:return[1-t,e,i*(u/h),a*(h/u)];case 6:return[1-e-a*(h/u),1-t,a*(h/u),i*(u/h)];case 7:return[t-i*(u/h),1-e-a*(h/u),i*(u/h),a*(h/u)];case 8:return[e-i,t-a,i,a];case 9:return[1-t,e-i,a,i];case 10:return[1-e,1-t,i,a];case 11:return[t-a,1-e,a,i];case 12:return[e-a*(h/u),t,a*(h/u),i*(u/h)];case 13:return[1-t-i*(u/h),e-a*(h/u),i*(u/h),a*(h/u)];case 14:return[1-e,1-t-i*(u/h),a*(h/u),i*(u/h)];case 15:return[t,1-e,i*(u/h),a*(h/u)];default:return[e,t,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),i}static createDrawerInstance(e,t,i,a,o){ze("Not implemented")}static startDrawing(e,t,i,a){const{target:o,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=a;if(Ue.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=e,{width:g,height:v}=o.getBoundingClientRect(),x=Be.#n=new AbortController,S=e.combinedSignal(x);if(Ue.setPointer(f,h),window.addEventListener("pointerup",w=>{Ue.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:S}),window.addEventListener("pointercancel",w=>{Ue.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:S}),window.addEventListener("pointerdown",w=>{Ue.isSamePointerType(w.pointerType)&&(Ue.initializeAndAddPointerId(w.pointerId),Be.#i.isCancellable()&&(Be.#i.removeLastElement(),Be.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:S}),window.addEventListener("contextmenu",An,{signal:S}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:S}),o.addEventListener("touchmove",w=>{Ue.isSameTimeStamp(w.timeStamp)&&at(w)},{signal:S}),e.toggleDrawing(),t._editorUndoBar?.hide(),Be.#i){e.drawLayer.updateProperties(this._currentDrawId,Be.#i.startNew(c,u,g,v,p));return}t.updateUIForDefaultProperties(this),Be.#i=this.createDrawerInstance(c,u,g,v,p),Be.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Be.#a.toSVGProperties(),Be.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ue.isSameTimeStamp(e.timeStamp),!Be.#i)return;const{offsetX:t,offsetY:i,pointerId:a}=e;if(Ue.isSamePointerId(a)){if(Ue.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Be.#i.add(t,i)),Ue.setTimeStamp(e.timeStamp),at(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Be.#i=null,Be.#a=null,Ue.clearTimeStamp()),Be.#n&&(Be.#n.abort(),Be.#n=null,Ue.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Be.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=Be.#i,a=this._currentDrawId,o=i.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ke.DRAW_STEP),!Be.#i.isEmpty()){const{pageDimensions:[i,a],scale:o}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Be.#i.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:Be.#a,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,a,o,c){ze("Not implemented")}static async deserialize(e,t,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,e),f=await super.deserialize(e,t,i);return f.createDrawingOptions(e),f.#r({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(e){const[t,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#e.serialize([t,i,a,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class A3{#e=new Float64Array(6);#t;#i;#n;#a;#r;#s="";#o=0;#c=new hl;#l;#h;constructor(e,t,i,a,o,c){this.#l=i,this.#h=a,this.#n=o,this.#a=c,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#i=[{line:u,points:this.#r}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return ie._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[i,a,o,c]=this.#e.subarray(2,6),u=e-o,h=t-c;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#r.push(e,t),isNaN(i)?(this.#e.set([o,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,a,o,c,e,t],0),this.#t.push(...ie.createBezierPoints(i,a,o,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,a,o){this.#l=i,this.#h=a,this.#n=o,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#r}),this.#e.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let e=0,t=this.#i.length;e<t;e++){const{line:i,points:a}=this.#i[e];this.#t=i,this.#r=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=ie.svgRound(this.#t[4]),t=ie.svgRound(this.#t[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${e} ${t} Z`,this.#s;if(this.#r.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const a=ie.svgRound(this.#t[10]),o=ie.svgRound(this.#t[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${e} ${t}`),this.#o=6);for(let a=this.#o,o=this.#t.length;a<o;a+=6){const[c,u,h,f,p,g]=this.#t.slice(a,a+6).map(ie.svgRound);i.push(`C${c} ${u} ${h} ${f} ${p} ${g}`)}return this.#s+=i.join(" "),this.#o=this.#t.length,this.#s}getOutlines(e,t,i,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,e,t,i,this.#n,this.#a,a),this.#e=null,this.#t=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class hl extends ie{#e;#t=0;#i;#n;#a;#r;#s;#o;#c;build(e,t,i,a,o,c,u){this.#a=t,this.#r=i,this.#s=a,this.#o=o,this.#c=c,this.#i=u??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${ie.svgRound(t[4])} ${ie.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${ie.svgRound(t[10])} ${ie.svgRound(t[11])}`);continue}for(let i=6,a=t.length;i<a;i+=6){const[o,c,u,h,f,p]=t.subarray(i,i+6).map(ie.svgRound);e.push(`C${o} ${c} ${u} ${h} ${f} ${p}`)}}return e.join("")}serialize([e,t,i,a],o){const c=[],u=[],[h,f,p,g]=this.#h();let v,x,S,w,E,_,R,T,N;switch(this.#o){case 0:N=ie._rescale,v=e,x=t+a,S=i,w=-a,E=e+h*i,_=t+(1-f-g)*a,R=e+(h+p)*i,T=t+(1-f)*a;break;case 90:N=ie._rescaleAndSwap,v=e,x=t,S=i,w=a,E=e+f*i,_=t+h*a,R=e+(f+g)*i,T=t+(h+p)*a;break;case 180:N=ie._rescale,v=e+i,x=t,S=-i,w=a,E=e+(1-h-p)*i,_=t+f*a,R=e+(1-h)*i,T=t+(f+g)*a;break;case 270:N=ie._rescaleAndSwap,v=e+i,x=t+a,S=-i,w=-a,E=e+(1-f-g)*i,_=t+(1-h-p)*a,R=e+(1-f)*i,T=t+(1-h)*a;break}for(const{line:D,points:O}of this.#n)c.push(N(D,v,x,S,w,o?new Array(D.length):null)),u.push(N(O,v,x,S,w,o?new Array(O.length):null));return{lines:c,points:u,rect:[E,_,R,T]}}static deserialize(e,t,i,a,o,{paths:{lines:c,points:u},rotation:h,thickness:f}){const p=[];let g,v,x,S,w;switch(h){case 0:w=ie._rescale,g=-e/i,v=t/a+1,x=1/i,S=-1/a;break;case 90:w=ie._rescaleAndSwap,g=-t/a,v=-e/i,x=1/a,S=1/i;break;case 180:w=ie._rescale,g=e/i+1,v=-t/a,x=-1/i,S=1/a;break;case 270:w=ie._rescaleAndSwap,g=t/a+1,v=e/i+1,x=-1/a,S=-1/i;break}if(!c){c=[];for(const _ of u){const R=_.length;if(R===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(R===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const T=new Float32Array(3*(R-2));c.push(T);let[N,D,O,j]=_.subarray(0,4);T.set([NaN,NaN,NaN,NaN,N,D],0);for(let Y=4;Y<R;Y+=2){const W=_[Y],$=_[Y+1];T.set(ie.createBezierPoints(N,D,O,j,W,$),(Y-2)*3),[N,D,O,j]=[O,j,W,$]}}}for(let _=0,R=c.length;_<R;_++)p.push({line:w(c[_].map(T=>T??NaN),g,v,x,S),points:w(u[_].map(T=>T??NaN),g,v,x,S)});const E=new this.prototype.constructor;return E.build(p,i,a,1,h,f,o),E}#l(e=this.#c){const t=this.#i+e/2*this.#s;return this.#o%180===0?[t/this.#a,t/this.#r]:[t/this.#r,t/this.#a]}#h(){const[e,t,i,a]=this.#e,[o,c]=this.#l(0);return[e+o,t+c,i-2*o,a-2*c]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,h=a.length;u<h;u+=6)ne.pointBoundingBox(a[u],a[u+1],e);continue}let o=a[4],c=a[5];for(let u=6,h=a.length;u<h;u+=6){const[f,p,g,v,x,S]=a.subarray(u,u+6);ne.bezierBoundingBox(o,c,f,p,g,v,x,S,e),o=x,c=S}}const[t,i]=this.#l();e[0]=kt(e[0]-t,0,1),e[1]=kt(e[1]-i,0,1),e[2]=kt(e[2]+t,0,1),e[3]=kt(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,i]=this.#l();this.#c=e;const[a,o]=this.#l(),[c,u]=[a-t,o-i],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],i){const[a,o]=this.#l();this.#a=e,this.#r=t,this.#s=i;const[c,u]=this.#l(),h=c-a,f=u-o,p=this.#e;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ie.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let i=0,a=0,o=0,c=0,u=0,h=0;switch(this.#t){case 90:a=t/e,o=-e/t,u=e;break;case 180:i=-1,c=-1,u=e,h=t;break;case 270:a=-t/e,o=e/t,h=t;break;default:return""}return`matrix(${i} ${a} ${o} ${c} ${ie.svgRound(u)} ${ie.svgRound(h)})`}getPathResizingSVGProperties([e,t,i,a]){const[o,c]=this.#l(),[u,h,f,p]=this.#e;if(Math.abs(f-o)<=ie.PRECISION||Math.abs(p-c)<=ie.PRECISION){const w=e+i/2-(u+f/2),E=t+a/2-(h+p/2);return{path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${E})`}}}const g=(i-2*o)/(f-2*o),v=(a-2*c)/(p-2*c),x=f/i,S=p/a;return{path:{"transform-origin":`${ie.svgRound(u)} ${ie.svgRound(h)}`,transform:`${this.rotationTransform} scale(${x} ${S}) translate(${ie.svgRound(o)} ${ie.svgRound(c)}) scale(${g} ${v}) translate(${ie.svgRound(-o)} ${ie.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,i,a]){const[o,c]=this.#l(),u=this.#e,[h,f,p,g]=u;if(u[0]=e,u[1]=t,u[2]=i,u[3]=a,Math.abs(p-o)<=ie.PRECISION||Math.abs(g-c)<=ie.PRECISION){const E=e+i/2-(h+p/2),_=t+a/2-(f+g/2);for(const{line:R,points:T}of this.#n)ie._translate(R,E,_,R),ie._translate(T,E,_,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*o)/(p-2*o),x=(a-2*c)/(g-2*c),S=-v*(h+o)+e+o,w=-x*(f+c)+t+c;if(v!==1||x!==1||S!==0||w!==0)for(const{line:E,points:_}of this.#n)ie._rescale(E,S,w,v,x,E),ie._rescale(_,S,w,v,x,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){const[a,o]=i,c=this.#e,u=e-c[0],h=t-c[1];if(this.#a===a&&this.#r===o)for(const{line:f,points:p}of this.#n)ie._translate(f,u,h,f),ie._translate(p,u,h,p);else{const f=this.#a/a,p=this.#r/o;this.#a=a,this.#r=o;for(const{line:g,points:v}of this.#n)ie._rescale(g,u,h,f,p,g),ie._rescale(v,u,h,f,p,v);c[2]*=f,c[3]*=p}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e[0])} ${ie.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Mu extends rw{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Mu(this._viewParameters);return e.updateAll(this),e}}class qp extends Be{static _type="ink";static _editorType=we.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){ce.initialize(e,t),this._defaultDrawingOptions=new Mu(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return be(this,"typesMap",new Map([[ke.INK_THICKNESS,"stroke-width"],[ke.INK_COLOR,"stroke"],[ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,a,o){return new A3(e,t,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,a,o,c){return hl.deserialize(e,t,i,a,o,c)}static async deserialize(e,t,i){let a=null;if(e instanceof $p){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:x,richText:S,contentsObj:w,creationDate:E,modificationDate:_},parent:{page:{pageNumber:R}}}=e;a=e={annotationType:we.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:c},boxes:null,pageIndex:R-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:x,richText:S,comment:w?.str||null,creationDate:E,modificationDate:_}}const o=await super.deserialize(e,t,i);return o._initialData=a,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new Qo(this),[["colorPicker",this._colorPicker]]}get colorType(){return ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=qp.getDefaultDrawingOptions({stroke:ne.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(e),{color:ce._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:t,points:i}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==i||e.opacity!==a||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class np extends hl{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const Uc=8,ko=3;class ea{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,i,a){return i-=e,a-=t,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,i,a,o,c,u){const h=this.#t(i,a,o,c);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+g)*t+(a+v)]!==0)return p}return-1}static#a(e,t,i,a,o,c,u){const h=this.#t(i,a,o,c);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+g)*t+(a+v)]!==0)return p}return-1}static#r(e,t,i,a){const o=e.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=e[p]<=a?1:0;for(let p=1;p<i-1;p++)c[p*t]=c[p*t+t-1]=0;for(let p=0;p<t;p++)c[p]=c[t*i-1-p]=0;let u=1,h;const f=[];for(let p=1;p<i-1;p++){h=1;for(let g=1;g<t-1;g++){const v=p*t+g,x=c[v];if(x===0)continue;let S=p,w=g;if(x===1&&c[v-1]===0)u+=1,w-=1;else if(x>=1&&c[v+1]===0)u+=1,w+=1,x>1&&(h=x);else{x!==1&&(h=Math.abs(x));continue}const E=[g,p],_=w===g+1,R={isHole:_,points:E,id:u,parent:0};f.push(R);let T;for(const q of f)if(q.id===h){T=q;break}T?T.isHole?R.parent=_?T.parent:h:R.parent=_?h:T.parent:R.parent=_?h:0;const N=this.#n(c,t,p,g,S,w,0);if(N===-1){c[v]=-u,c[v]!==1&&(h=Math.abs(c[v]));continue}let D=this.#i[2*N],O=this.#i[2*N+1];const j=p+D,Y=g+O;S=j,w=Y;let W=p,$=g;for(;;){const q=this.#a(c,t,W,$,S,w,1);D=this.#i[2*q],O=this.#i[2*q+1];const J=W+D,re=$+O;E.push(re,J);const oe=W*t+$;if(c[oe+1]===0?c[oe]=-u:c[oe]===1&&(c[oe]=u),J===p&&re===g&&W===j&&$===Y){c[v]!==1&&(h=Math.abs(c[v]));break}else S=W,w=$,W=J,$=re}}}return f}static#s(e,t,i,a){if(i-t<=4){for(let j=t;j<i-2;j+=2)a.push(e[j],e[j+1]);return}const o=e[t],c=e[t+1],u=e[i-4]-o,h=e[i-3]-c,f=Math.hypot(u,h),p=u/f,g=h/f,v=p*c-g*o,x=h/u,S=1/f,w=Math.atan(x),E=Math.cos(w),_=Math.sin(w),R=S*(Math.abs(E)+Math.abs(_)),T=S*(1-R+R**2),N=Math.max(Math.atan(Math.abs(_+E)*T),Math.atan(Math.abs(_-E)*T));let D=0,O=t;for(let j=t+2;j<i-2;j+=2){const Y=Math.abs(v-p*e[j+1]+g*e[j]);Y>D&&(O=j,D=Y)}D>(f*N)**2?(this.#s(e,t,O+2,a),this.#s(e,O,i,a)):a.push(o,c)}static#o(e){const t=[],i=e.length;return this.#s(e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t}static#c(e,t,i,a,o,c){const u=new Float32Array(c**2),h=-2*a**2,f=c>>1;for(let w=0;w<c;w++){const E=(w-f)**2;for(let _=0;_<c;_++)u[w*c+_]=Math.exp((E+(_-f)**2)/h)}const p=new Float32Array(256),g=-2*o**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/g);const v=e.length,x=new Uint8Array(v),S=new Uint32Array(256);for(let w=0;w<i;w++)for(let E=0;E<t;E++){const _=w*t+E,R=e[_];let T=0,N=0;for(let O=0;O<c;O++){const j=w+O-f;if(!(j<0||j>=i))for(let Y=0;Y<c;Y++){const W=E+Y-f;if(W<0||W>=t)continue;const $=e[j*t+W],q=u[O*c+Y]*p[Math.abs($-R)];T+=$*q,N+=q}}const D=x[_]=Math.round(T/N);S[D]++}return[x,S]}static#l(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t}static#h(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let a=-1/0,o=1/0;for(let u=0,h=i.length;u<h;u++){const f=i[u]=e[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const c=255/(a-o);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-o)*c;return i}static#d(e){let t,i=-1/0,a=-1/0;const o=e.findIndex(h=>h!==0);let c=o,u=o;for(t=o;t<256;t++){const h=e[t];h>i&&(t-c>a&&(a=t-c,u=t-1),i=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:i,height:a}=e,{maxDim:o}=this.#e;let c=i,u=a;if(i>o||a>o){let v=i,x=a,S=Math.log2(Math.max(i,a)/o);const w=Math.floor(S);S=S===w?w-1:w;for(let _=0;_<S;_++){c=Math.ceil(v/2),u=Math.ceil(x/2);const R=new OffscreenCanvas(c,u);R.getContext("2d").drawImage(e,0,0,v,x,0,0,c,u),v=c,x=u,e!==t&&e.close(),e=R.transferToImageBitmap()}const E=Math.min(o/c,o/u);c=Math.round(c*E),u=Math.round(u*E)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#h(p),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:a},o,c,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,v=p.font=`${i} ${a} ${g}px ${t}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:S,actualBoundingBoxAscent:w,actualBoundingBoxDescent:E,fontBoundingBoxAscent:_,fontBoundingBoxDescent:R,width:T}=p.measureText(e),N=1.5,D=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||0,T)*N),O=Math.ceil(Math.max(Math.abs(w)+Math.abs(E)||g,Math.abs(_)+Math.abs(R)||g)*N);f=new OffscreenCanvas(D,O),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,O),p.fillStyle="black",p.fillText(e,D*(N-1)/2,O*(3-N)/2);const j=this.#h(p.getImageData(0,0,D,O).data),Y=this.#l(j),W=this.#d(Y),$=this.#r(j,D,O,W);return this.processDrawnLines({lines:{curves:$,width:D,height:O},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,i,a,o){const[c,u,h]=this.#f(e),[f,p]=this.#c(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#d(p),v=this.#r(f,u,h,g);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:t,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([t,i]=[i,t]);const{curves:h,width:f,height:p}=e,g=e.thickness??0,v=[],x=Math.min(t/f,i/p),S=x/t,w=x/i,E=[];for(const{points:R}of h){const T=c?this.#o(R):R;if(!T)continue;E.push(T);const N=T.length,D=new Float32Array(N),O=new Float32Array(3*(N===2?2:N-2));if(v.push({line:O,points:D}),N===2){D[0]=T[0]*S,D[1]=T[1]*w,O.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[j,Y,W,$]=T;j*=S,Y*=w,W*=S,$*=w,D.set([j,Y,W,$],0),O.set([NaN,NaN,NaN,NaN,j,Y],0);for(let q=4;q<N;q+=2){const J=D[q]=T[q]*S,re=D[q+1]=T[q+1]*w;O.set(ie.createBezierPoints(j,Y,W,$,J,re),(q-2)*3),[j,Y,W,$]=[W,$,J,re]}}if(v.length===0)return null;const _=u?new np:new hl;return _.build(v,t,i,1,a,u?0:g,o),{outline:_,newCurves:E,areContours:u,thickness:g,width:f,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:a,height:o}){let c=1/0,u=-1/0,h=0;for(const T of e){h+=T.length;for(let N=2,D=T.length;N<D;N++){const O=T[N]-T[N-2];c=Math.min(c,O),u=Math.max(u,O)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=e.length,g=Uc+ko*p,v=new Uint32Array(g);let x=0;v[x++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[x++]=0,v[x++]=a,v[x++]=o,v[x++]=t?0:1,v[x++]=Math.max(0,Math.floor(i??0)),v[x++]=p,v[x++]=f.BYTES_PER_ELEMENT;for(const T of e)v[x++]=T.length-2,v[x++]=T[0],v[x++]=T[1];const S=new CompressionStream("deflate-raw"),w=S.writable.getWriter();await w.ready,w.write(v);const E=f.prototype.constructor;for(const T of e){const N=new E(T.length-2);for(let D=2,O=T.length;D<O;D++)N[D-2]=T[D]-T[D-2];w.write(N)}w.close();const _=await new Response(S.readable).arrayBuffer();return new Uint8Array(_).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const T of i)c||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),c.set(T,u),u+=T.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],g=h[3],v=h[4]===0,x=h[5],S=h[6],w=h[7],E=[],_=(Uc+ko*S)*Uint32Array.BYTES_PER_ELEMENT;let R;switch(w){case Int8Array.BYTES_PER_ELEMENT:R=new Int8Array(c.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:R=new Int16Array(c.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:R=new Int32Array(c.buffer,_);break}u=0;for(let T=0;T<S;T++){const N=h[ko*T+Uc],D=new Float32Array(N+2);E.push(D);for(let O=0;O<ko-1;O++)D[O]=h[ko*T+Uc+O+1];for(let O=0;O<N;O++)D[O+2]=D[O]+R[u++]}return{areContours:v,thickness:x,outlines:E,width:p,height:g}}catch(t){return ve(`decompressSignature: ${t}`),null}}}class Yp extends rw{constructor(){super(),super.updateProperties({fill:ce._defaultLineColor,"stroke-width":0})}clone(){const e=new Yp;return e.updateAll(this),e}}class Wp extends Mu{constructor(e){super(e),super.updateProperties({stroke:ce._defaultLineColor,"stroke-width":1})}clone(){const e=new Wp(this._viewParameters);return e.updateAll(this),e}}class li extends Be{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=we.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){ce.initialize(e,t),this._defaultDrawingOptions=new Yp,this._defaultDrawnSignatureOptions=new Wp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return be(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:h,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:g},rotation:v}=this.parent.viewport,x=ea.processDrawnLines({lines:a,pageWidth:p,pageHeight:g,rotation:v,innerMargin:li._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(x,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:i,width:a,height:o}=this.#i,c=Math.max(a,o),u=ea.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:i,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,i,a){const{x:o,y:c}=this,{outline:u}=this.#i=e;this.#e=u instanceof np,this.description=i;let h;this.#e?h=li.getDefaultDrawingOptions():(h=li._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=t/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:a}=this.parent.viewport;return ea.process(e,t,i,a,li._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return ea.extractContoursFromText(e,t,i,a,o,li._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:a}=this.parent.viewport;return ea.processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:a,innerMargin:li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=li.getDefaultDrawingOptions():(this._drawingOptions=li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:a});return this.addComment(o),e?(o.paths={lines:t,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,i,a,o,c){return c.areContours?np.deserialize(e,t,i,a,o,c):hl.deserialize(e,t,i,a,o,c)}static async deserialize(e,t,i){const a=await super.deserialize(e,t,i);return a.#e=e.areContours,a.description=e.accessibilityData?.alt||"",a.#n=e.uuid,a}}class S3 extends ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=we.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){ce.initialize(e,t)}static isHandlingMimeForPasting(e){return cu.includes(e)}static paste(e,t){t.pasteEditor({mode:we.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#d(a)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#d(a)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=cu.join(",");const t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(a)}i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,a&&(this.#e=a),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:i}=this.#e;const[a,o]=this.pageDimensions,c=.75;if(this.width)t=this.width*a,i=this.height*o;else if(t>c*a||i>c*o){const h=Math.min(c*a/t,c*o/i);t*=h,i*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/a,this.height=i/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,i=!1){e||(e=224);const{width:a,height:o}=this.#e,c=new Wn;let u=this.#e,h=a,f=o,p=null;if(t){if(a>t||o>t){const O=Math.min(t/a,t/o);h=Math.floor(a*O),f=Math.floor(o*O)}p=document.createElement("canvas");const v=p.width=Math.ceil(h*c.sx),x=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(v,x));const S=p.getContext("2d");S.filter=this._uiManager.hcmFilter;let w="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":KN.isDarkMode&&(w="#8f8f9d",E="#42414d");const _=15,R=_*c.sx,T=_*c.sy,N=new OffscreenCanvas(R*2,T*2),D=N.getContext("2d");D.fillStyle=w,D.fillRect(0,0,R*2,T*2),D.fillStyle=E,D.fillRect(0,0,R,T),D.fillRect(R,T,R,T),S.fillStyle=S.createPattern(N,"repeat"),S.fillRect(0,0,v,x),S.drawImage(u,0,0,u.width,u.height,0,0,v,x)}let g=null;if(i){let v,x;if(c.symmetric&&u.width<e&&u.height<e)v=u.width,x=u.height;else if(u=this.#e,a>e||o>e){const E=Math.min(e/a,e/o);v=Math.floor(a*E),x=Math.floor(o*E),this.#l||(u=this.#u(v,x))}const w=new OffscreenCanvas(v,x).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,v,x),g={width:v,height:x,data:w.getImageData(0,0,v,x).data}}return{canvas:p,width:h,height:f,imageData:g}}#u(e,t){const{width:i,height:a}=this.#e;let o=i,c=a,u=this.#e;for(;o>2*e||c>2*t;){const h=o,f=c;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(o,c);p.getContext("2d").drawImage(u,0,0,h,f,0,0,o,c),u=p.transferToImageBitmap()}return u}#p(){const[e,t]=this.parentDimensions,{width:i,height:a}=this,o=new Wn,c=Math.ceil(i*e*o.sx),u=Math.ceil(a*t*o.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#e:this.#u(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(e){if(e){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#t);if(a)return a}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,i]=this.pageDimensions,a=Math.round(this.width*t*la.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*la.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,i){let a=null,o=!1;if(e instanceof sw){const{data:{rect:w,rotation:E,id:_,structParent:R,popupRef:T,richText:N,contentsObj:D,creationDate:O,modificationDate:j},container:Y,parent:{page:{pageNumber:W}},canvas:$}=e;let q,J;$?(delete e.canvas,{id:q,bitmap:J}=i.imageManager.getFromCanvas(Y.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const re=(await t._structTree.getAriaAttributes(`${ar}${_}`))?.get("aria-label")||"";a=e={annotationType:we.STAMP,bitmapId:q,bitmap:J,pageIndex:W-1,rect:w.slice(0),rotation:E,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:re},isSvg:!1,structParent:R,popupRef:T,richText:N,comment:D?.str||null,creationDate:O,modificationDate:j}}const c=await super.deserialize(e,t,i),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:g,accessibilityData:v}=e;o?(i.addMissingCanvas(e.id,c),c.#o=!0):p&&i.imageManager.isValidId(p)?(c.#t=p,h&&(c.#e=h)):c.#n=f,c.#l=g;const[x,S]=c.pageDimensions;return c.width=(u[2]-u[0])/x,c.height=(u[3]-u[1])/S,v&&(c.altTextData=v),c._initialData=a,e.comment&&c.setCommentData(e),c.#h=!!a,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(t===null)return i;t.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return i}#v(e){const{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,a=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ui{#e;#t=!1;#i=null;#n=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([Nt,qp,S3,pt,li].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const g=[...ui.#p.values()];if(!ui._initialized){ui._initialized=!0;for(const v of g)v.initialize(p,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=t,this.div=i,this.#e=o,this.#i=c,this.viewport=f,this.#d=h,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===we.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case we.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case we.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case we.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===we.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const i of ui.#p.values())t.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=this.#i;if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const a=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,p=this.#m;if(f-p>500){this.#m=f;return}this.#m=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const v=document.elementsFromPoint(u,h);if(g.toggle("getElements",!1),!this.div.contains(v[0]))return;let x;const S=new RegExp(`^${Wo}[0-9]+$`);for(const E of v)if(S.test(E.id)){x=E.id;break}if(!x)return;const w=this.#r.get(x);w?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick(o))},{signal:a,capture:!0})}const e=this.#i,t=[];if(e){const a=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){t.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=e.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of ui.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#v(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:i}=wt.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),pt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e),ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#b(){return ui.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#_(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:i,offsetY:a}=this.#S(),o=this.getNextId(),c=this.#_({parent:this,id:o,x:i,y:a,uiManager:this.#u,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await ui.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,i={}){const a=this.getNextId(),o=this.#_({parent:this,id:a,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:i,height:a}=this.boundingClientRect,o=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+i),h=Math.min(window.innerHeight,t+a),f=(o+u)/2-e,p=(c+h)/2-t,[g,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#u.getMode();if(i===we.STAMP||i===we.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===we.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const i=this.#u.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,i){const a=this.#u.findParent(t,i);return a===null||a===this?!1:(a.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,ks(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ks(this.div,{rotation:i}),t!==i)for(const a of this.#r.values())a.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Dt{#e=null;#t=new Map;#i=new Map;static#n=0;setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return be(this,"_svgFactory",new Zo)}static#a(e,[t,i,a,o]){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*a}%`,c.height=`${100*o}%`}#r(){const e=Dt._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,t){const i=Dt._svgFactory.createElement("clipPath");e.append(i);const a=`clip_${t}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Dt._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),a}#o(e,t){for(const[i,a]of Object.entries(t))a===null?e.removeAttribute(i):e.setAttribute(i,a)}draw(e,t=!1,i=!1){const a=Dt.#n++,o=this.#r(),c=Dt._svgFactory.createElement("defs");o.append(c);const u=Dt._svgFactory.createElement("path");c.append(u);const h=`path_${a}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(a,u);const f=i?this.#s(c,h):null,p=Dt._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,e),this.#t.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(e,t){const i=Dt.#n++,a=this.#r(),o=Dt._svgFactory.createElement("defs");a.append(o);const c=Dt._svgFactory.createElement("path");o.append(c);const u=`path_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const g=Dt._svgFactory.createElement("mask");o.append(g),h=`mask_${i}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const v=Dt._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const x=Dt._svgFactory.createElement("use");g.append(x),x.setAttribute("href",`#${u}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const f=Dt._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return a.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,e),this.#t.set(i,a),i}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:i,bbox:a,rootClass:o,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(i&&this.#o(u,i),a&&Dt.#a(u,a),o){const{classList:h}=u;for(const[f,p]of Object.entries(o))h.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(e,t){if(t===this)return;const i=this.#t.get(e);i&&(t.#e.append(i),this.#t.delete(e),t.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:ep};globalThis.pdfjsLib={AbortException:qi,AnnotationEditorLayer:ui,AnnotationEditorParamsType:ke,AnnotationEditorType:we,AnnotationEditorUIManager:Yi,AnnotationLayer:ku,AnnotationMode:ji,AnnotationType:ft,applyOpacity:Cx,build:Jx,ColorPicker:vn,createValidAbsoluteUrl:kp,CSSConstants:Tx,DOMSVGFactory:Zo,DrawLayer:Dt,FeatureTest:wt,fetchData:Tr,findContrastColor:Rx,getDocument:Xx,getFilenameFromUrl:Sx,getPdfFilenameFromUrl:Ex,getRGB:Cr,getUuid:Lp,getXfaPageViewport:_x,GlobalWorkerOptions:ra,ImageKind:Fo,InvalidPDFException:ou,isDataScheme:cl,isPdfFile:_u,isValidExplicitDest:Lx,MathClamp:kt,noContextMenu:An,normalizeUnicode:Ax,OPS:br,OutputScale:Wn,PagesMapper:Pe,PasswordResponses:wx,PDFDataRangeTransport:Vp,PDFDateString:lu,PDFWorker:vr,PermissionFlag:xx,PixelsPerInch:la,RenderingCancelledException:Eu,renderRichText:Ip,ResponseException:Xo,setLayerDimensions:ks,shadow:be,SignatureExtractor:ea,stopEvent:at,SupportedImageMimeTypes:cu,TextLayer:on,TouchManager:dl,updateUrlHash:Mp,Util:ne,VerbosityLevel:ol,version:Zx,XfaLayer:Op};const E3=Object.freeze(Object.defineProperty({__proto__:null,AbortException:qi,AnnotationEditorLayer:ui,AnnotationEditorParamsType:ke,AnnotationEditorType:we,AnnotationEditorUIManager:Yi,AnnotationLayer:ku,AnnotationMode:ji,AnnotationType:ft,CSSConstants:Tx,ColorPicker:vn,DOMSVGFactory:Zo,DrawLayer:Dt,FeatureTest:wt,GlobalWorkerOptions:ra,ImageKind:Fo,InvalidPDFException:ou,MathClamp:kt,OPS:br,OutputScale:Wn,PDFDataRangeTransport:Vp,PDFDateString:lu,PDFWorker:vr,PagesMapper:Pe,PasswordResponses:wx,PermissionFlag:xx,PixelsPerInch:la,RenderingCancelledException:Eu,ResponseException:Xo,SignatureExtractor:ea,SupportedImageMimeTypes:cu,TextLayer:on,TouchManager:dl,Util:ne,VerbosityLevel:ol,XfaLayer:Op,applyOpacity:Cx,build:Jx,createValidAbsoluteUrl:kp,fetchData:Tr,findContrastColor:Rx,getDocument:Xx,getFilenameFromUrl:Sx,getPdfFilenameFromUrl:Ex,getRGB:Cr,getUuid:Lp,getXfaPageViewport:_x,isDataScheme:cl,isPdfFile:_u,isValidExplicitDest:Lx,noContextMenu:An,normalizeUnicode:Ax,renderRichText:Ip,setLayerDimensions:ks,shadow:be,stopEvent:at,updateUrlHash:Mp,version:Zx},Symbol.toStringTag,{value:"Module"}));ra.workerPort=new Worker(new URL("/assets/pdf.worker.min-BTQ2U8jU.js",import.meta.url),{type:"module"});const E1=async r=>{try{let e="";for(let t=1;t<=r.numPages;t++){const o=(await(await r.getPage(t)).getTextContent()).items.map(c=>c.str).join(" ");e+=o+"\f"}return e}catch(e){return console.error("Error extracting text from PDF:",e),"PDF text content"}},_1=async r=>{let e;if(typeof r=="string")e=new TextEncoder().encode(r);else if(r instanceof ArrayBuffer)e=new Uint8Array(r);else if(r instanceof Uint8Array)e=r;else throw new Error("computeSHA256: unsupported input type");const t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")};function du({pageCount:r,extractedText:e,pdfSizeBytes:t}){const i=String(e||""),o=i.split("\f").filter(c=>c!==void 0).slice(0,r).map(c=>String(c||"").trim().length);return{pageCount:r,charsPerPage:o,totalChars:i.replace(/\f/g,"").length,pdfSizeBytes:t||0}}const ow=()=>{const[r,e]=M.useState(!1),[t,i]=M.useState(null),[a,o]=M.useState(null),[c,u]=M.useState(1),[h,f]=M.useState(1.5),[p,g]=M.useState(""),[v,x]=M.useState(null),[S,w]=M.useState(null),[E,_]=M.useState(!1),[R,T]=M.useState(""),[N,D]=M.useState(null);return M.useEffect(()=>{(async()=>{if(window.pdfjsLib){e(!0);return}try{const $=await Dp(()=>Promise.resolve().then(()=>E3),[]);window.pdfjsLib=$,e(!0)}catch($){console.error("Failed to load PDF.js:",$),D($)}})()},[]),{pdfLibLoaded:r,pdfDoc:t,numPages:a,pageNumber:c,pageScale:h,pdfTextContent:p,docStats:v,docHash:S,isLoading:E,loadingMessage:R,loadError:N,loadPdfFromBlob:async W=>{if(!(!window.pdfjsLib||!W))try{_(!0),D(null);const $=W.name||"document";T(`Loading ${$}...`);const q=await W.arrayBuffer(),J=await _1(q);w(J);const oe=await window.pdfjsLib.getDocument({data:q,onProgress:G=>{if(G.total>0){const ee=Math.round(G.loaded/G.total*100);T(`Loading ${$}: ${ee}%`)}}}).promise;i(oe),o(oe.numPages),T(`Extracting text from ${$}...`);const me=await E1(oe);g(me);const P=du({pageCount:oe.numPages,extractedText:me,pdfSizeBytes:q.byteLength});return x(P),u(1),T(""),{docHash:J,stats:P,text:me}}catch($){throw console.error("Error loading PDF from blob:",$),D($),T(""),$}finally{_(!1)}},loadTestPdf:async W=>{if(window.pdfjsLib)try{_(!0),D(null),T(`Loading ${W}...`);const $=`/test-docs/${W}`,q=await fetch($);if(!q.ok)throw new Error(`Failed to fetch PDF: ${q.statusText}`);const J=await q.arrayBuffer(),re=await _1(J);w(re);const me=await window.pdfjsLib.getDocument({data:J,onProgress:ee=>{if(ee.total>0){const ge=Math.round(ee.loaded/ee.total*100);T(`Loading ${W}: ${ge}%`)}}}).promise;i(me),o(me.numPages),T(`Extracting text from ${W}...`);const P=await E1(me);g(P);const G=du({pageCount:me.numPages,extractedText:P,pdfSizeBytes:J.byteLength});return x(G),u(1),T(""),{docHash:re,stats:G,text:P,fileInfo:{name:W,size:J.byteLength,type:"application/pdf"}}}catch($){throw console.error("Error loading test PDF:",$),D($),T(""),$}finally{_(!1)}},navigation:{goToPreviousPage:()=>u(W=>Math.max(W-1,1)),goToNextPage:()=>u(W=>Math.min(W+1,a||1)),zoomIn:()=>f(W=>Math.min(W+.2,3)),zoomOut:()=>f(W=>Math.max(W-.2,.5)),setPageNumber:u,setPageScale:f}}};async function _3({functions:r,docHash:e,text:t}){if(!r)throw new Error("Firebase functions not available");const i=pi(r,"analyzeByType");if(typeof i!="function")throw new Error("analyzeByType callable not available");return(await i({docHash:e,text:t}))?.data}async function T3({functions:r,docHash:e,stats:t}){if(!r)throw new Error("Firebase functions not available");const i=pi(r,"preflightCheck");if(typeof i!="function")throw new Error("preflightCheck callable not available");return(await i({docHash:e,stats:t}))?.data}async function C3({functions:r,payload:e}){if(!r)throw new Error("Firebase functions not available");const t=pi(r,"analyzeText");if(typeof t!="function")throw new Error("analyzeText callable not available");return await t(e)}const R3=({functions:r,authState:e,isMockMode:t})=>{const[i,a]=M.useState({}),[o,c]=M.useState(null),[u,h]=M.useState(!1),f=()=>t&&e.status==="authenticated"?!0:r&&e.status==="authenticated",p=async({pdfTextContent:E,numPages:_,selectedDocument:R,docHash:T})=>{if(!E||!_)return{ok:!0,classification:"OK"};if(t)return{ok:!0,classification:"OK"};if(!r)return console.error("Firebase functions not available. Returning default response."),{ok:!0,classification:"OK"};try{const N=du({pageCount:_,extractedText:E,pdfSizeBytes:R?.size||0});return await T3({functions:r,docHash:T,stats:N})}catch(N){return console.error("Preflight check error:",N),{ok:!0,classification:"OK"}}};return{analysisResults:i,gate:o,setGate:c,isLoading:u,handleAnalyzeDocument:async({selectedDocument:E,pdfTextContent:_,docHash:R,numPages:T,updateAnnotations:N})=>{if(!(!E||!_||!R)){if(!f()){console.warn("Document analysis unavailable: Firebase services not accessible.");return}a(D=>({...D,[E.id]:{...D[E.id]||{},_meta:{status:"loading",message:"Running analysis"}}})),h(!0);try{const D=await p({pdfTextContent:_,numPages:T,selectedDocument:E,docHash:R});if(!D.ok)throw console.error("Preflight check failed:",D),new Error(D.message||"Preflight check failed");if(D.classification==="PRO_REQUIRED"){const q=D.reasons?.map(J=>J.message).join(" ")||"This document requires Pro features (OCR / deeper processing).";a(J=>({...J,[E.id]:{...J[E.id]||{},_meta:{status:"error",message:q}}})),c({title:"Pro required",message:q,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}const O=du({pageCount:T,extractedText:_,pdfSizeBytes:E?.size||0}),j=_.split("\f"),{charsPerPage:Y,totalChars:W}=O;let $;if(t?$={data:await(await fetch("/analyzeText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:R,stats:{pageCount:T,charsPerPage:Y,totalChars:W,languageHint:"en"},text:{format:"paged",value:_},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}})})).json()}:$=await C3({functions:r,payload:{docHash:R,stats:{pageCount:T,charsPerPage:Y,totalChars:W,languageHint:"en"},text:{format:"paged",value:_,pageTextIndex:j.map((q,J)=>({page:J+1,start:0,end:q.length}))},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}}}),$.data.ok){c(null);const q={_meta:{status:"success"},summary:$.data.result.plainExplanation,keyPoints:[],risks:$.data.result.risks.map(J=>({id:J.id,clause:J.title,riskLevel:J.severity,description:J.whyItMatters,explanation:J.whatToCheck.join("; ")})),recommendations:$.data.result.risks.flatMap(J=>J.whatToCheck||[])};a(J=>({...J,[E.id]:q})),N&&N(q)}else{const q=$.data.code;if(q==="SCAN_DETECTED_PRO_REQUIRED"){const J=$.data.message||"This PDF appears to be scanned. OCR is available on Pro.";a(re=>({...re,[E.id]:{...re[E.id]||{},_meta:{status:"error",message:J}}})),c({title:"Scanned PDF (OCR requires Pro)",message:J,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}if(q==="ANON_TOKEN_LIMIT"){const J=$.data.message||"Anonymous token limit reached. Create a free account to continue.";a(re=>({...re,[E.id]:{...re[E.id]||{},_meta:{status:"error",message:J}}})),c({title:"Limit reached",message:J,primaryLabel:"Create free account",primaryTo:"/sign-in",secondaryLabel:"Cancel",secondaryTo:null});return}if(q==="FREE_TOKEN_LIMIT"){const J=$.data.message||"Daily token limit reached. Upgrade to Pro to continue.";a(re=>({...re,[E.id]:{...re[E.id]||{},_meta:{status:"error",message:J}}})),c({title:"Daily limit reached",message:J,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}throw console.error("Analysis failed:",$.data),new Error($.data.message||"Analysis failed")}}catch(D){console.error("Error analyzing document:",D),a(O=>({...O,[E.id]:{...O[E.id]||{},_meta:{status:"error",message:D?.message||"Analysis failed."}}})),c({title:"Analysis failed",message:D?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null});return}finally{h(!1)}}},handleAnalyzeByType:async({selectedDocument:E,pdfTextContent:_,docHash:R})=>{if(!(!E||!_||!R)){if(!f()){console.warn("Type-specific analysis unavailable: Firebase services not accessible.");return}a(T=>({...T,[E.id]:{...T[E.id]||{},_meta:{status:"loading",message:"Running type-specific analysis"}}})),h(!0);try{if(t){c({title:"Type-specific analysis (beta)",message:"Not available in mock mode yet.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null}),a(D=>({...D,[E.id]:{...D[E.id]||{},_meta:{status:"error",message:"Not available in mock mode yet."}}}));return}const T=await _3({functions:r,docHash:R,text:_})||{},N={ok:!!T.ok,effectiveTypeId:T.effectiveTypeId||null,validationSlug:T.validationSlug||null,validationTitle:T.validationSpec?.title||null,message:T.message||null,result:T.result||null,usage:T.usage||null,requiredTier:T.requiredTier||null,code:T.code||null};a(D=>({...D,[E.id]:{...D[E.id]||{},_meta:{status:"success"},typeSpecific:N}})),c({title:"Type-specific analysis (beta)",message:`effectiveTypeId: ${N.effectiveTypeId||"null"}
validationSlug: ${N.validationSlug||"null"}

`+(N.validationTitle?`Spec: ${N.validationTitle}

`:"")+(N.message||""),primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}catch(T){console.error("analyzeByType error:",T),a(N=>({...N,[E.id]:{...N[E.id]||{},_meta:{status:"error",message:T?.message||"Request failed."}}})),c({title:"Type-specific analysis failed",message:T?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{h(!1)}}},handleExplainSelection:async({selectedDocument:E,docHash:_,pdfTextContent:R})=>{if(!E||!_)return;if(!f()){console.warn("Explain selection unavailable: Firebase services not accessible.");return}const T="Limitation of liability clause";try{let N;if(t?N={data:await(await fetch("/explainSelection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,selection:T,documentContext:R})})).json()}:N=await pi(r,"explainSelection")({docHash:_,selection:T,documentContext:R}),N.data.success)alert(`Explanation: ${N.data.explanation.plainExplanation}`);else throw console.error("Explanation failed:",N.data),new Error(N.data.error||"Explanation failed")}catch(N){throw console.error("Error explaining selection:",N),N}},handleHighlightRisks:async({selectedDocument:E,docHash:_,pdfTextContent:R,setRiskBadges:T})=>{if(!(!E||!_)){if(!f()){console.warn("Risk highlighting unavailable: Firebase services not accessible.");return}h(!0);try{let N;if(t?N={data:await(await fetch("/highlightRisks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,documentText:R,documentType:"contract"})})).json()}:N=await pi(r,"highlightRisks")({docHash:_,documentText:R,documentType:"contract"}),N.data.success){alert(`Found ${N.data.risks.summary.totalRisks} risks in the document.`);const D=N.data.risks.items?.map((O,j)=>({id:j,pageNum:1,x:150+j*40,y:150+j*35,level:O.riskLevel,description:O.description,explanation:O.explanation}))||[];T(D)}else throw console.error("Risk highlighting failed:",N.data),new Error(N.data.error||"Risk highlighting failed")}catch(N){throw console.error("Error highlighting risks:",N),N}finally{h(!1)}}},handleTranslateToPlainEnglish:async({selectedDocument:E,docHash:_,pdfTextContent:R})=>{if(!(!E||!_)){if(!f()){console.warn("Translation unavailable: Firebase services not accessible.");return}try{const T=R.substring(0,500);let N;if(t?N={data:await(await fetch("/translateToPlainEnglish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,legalText:T})})).json()}:N=await pi(r,"translateToPlainEnglish")({docHash:_,legalText:T}),N.data.success)alert(`Original: ${N.data.translation.originalText}

Plain English: ${N.data.translation.plainEnglishTranslation}`);else throw console.error("Translation failed:",N.data),new Error(N.data.error||"Translation failed")}catch(T){throw console.error("Error translating to plain English:",T),T}}}}};async function N3({functions:r,docHash:e,typeId:t}){if(!r)throw new Error("Firebase functions not available");const i=pi(r,"saveDocTypeOverride");return typeof i!="function"?null:(await i({docHash:e,typeId:t}))?.data}async function D3({functions:r,docHash:e}){if(!r)throw new Error("Firebase functions not available");const t=pi(r,"getDocumentTypeState");return typeof t!="function"?null:(await t({docHash:e}))?.data}async function k3({functions:r,docHash:e,stats:t,text:i}){if(!r)throw new Error("Firebase functions not available");const a=pi(r,"detectDocumentType");return typeof a!="function"?null:(await a({docHash:e,stats:t,text:i}))?.data}const M3=({functions:r,isMockMode:e})=>{const[t,i]=M.useState("legal_contract_generic"),[a,o]=M.useState(null),[c,u]=M.useState(null),[h,f]=M.useState(null);return{detectedDocTypeId:t,detectedMeta:a,overrideDocTypeId:c,pendingOverride:h,setOverrideDocTypeId:u,setPendingOverride:f,loadServerTypeState:async S=>{if(!(!r||e))try{const w=await D3({functions:r,docHash:S})||{};w?.overrideTypeId&&u(w.overrideTypeId),w?.detected?.typeId&&i(w.detected.typeId),w?.detected&&o({intakeCategory:w.detected.intakeCategory||null,confidence:typeof w.detected.confidence=="number"?w.detected.confidence:null,model:w.detected.model||null,updatedAt:w.detected.updatedAt||null})}catch(w){console.warn("Failed to load server document type state",w)}},runServerDetection:async({docHashValue:S,stats:w,text:E})=>{if(!(!r||e))try{const _=await k3({functions:r,docHash:S,stats:w,text:E})||{};_?.typeId&&i(_.typeId),o({intakeCategory:_.intakeCategory||null,confidence:typeof _.confidence=="number"?_.confidence:null,model:_.model||"heuristic-v1",updatedAt:null})}catch(_){console.warn("Failed to detect document type",_)}},persistOverride:async(S,w)=>{try{localStorage.setItem(`decodocs:doctype:${S}`,String(w))}catch{}if(!(!r||e))try{await N3({functions:r,docHash:S,typeId:w})}catch(E){console.warn("Failed to persist doc type override",E)}},loadLocalOverride:S=>{try{const w=localStorage.getItem(`decodocs:doctype:${S}`);w&&u(w)}catch{}},setDetectedDocTypeId:i}},Cf=()=>{const{authState:r,app:e}=gi(),t=typeof window<"u"&&window.MOCK_AUTH,{documentId:i,fileName:a}=op(),o=cn(),c=Wi(),u=M.useRef(null),h=e?hx(e):null,{pdfLibLoaded:f,pdfDoc:p,numPages:g,pageNumber:v,pageScale:x,pdfTextContent:S,docHash:w,isLoading:E,loadingMessage:_,loadPdfFromBlob:R,loadTestPdf:T,navigation:N}=ow(),{analysisResults:D,gate:O,setGate:j,isLoading:Y,handleAnalyzeDocument:W,handleAnalyzeByType:$,handleExplainSelection:q,handleHighlightRisks:J,handleTranslateToPlainEnglish:re}=R3({functions:h,authState:r,isMockMode:t}),{detectedDocTypeId:oe,overrideDocTypeId:me,pendingOverride:P,setOverrideDocTypeId:G,setPendingOverride:ee,loadServerTypeState:ge,runServerDetection:_e,persistOverride:L,loadLocalOverride:H}=M3({functions:h,isMockMode:t}),[Z,te]=M.useState(null),[ue,ye]=M.useState([]),[de,ot]=M.useState([]),[He,Kn]=M.useState([]),[Qn,Bn]=M.useState(!1),[ha,Zn]=M.useState(!1),[fa,Rr]=M.useState(!0),[zt,Ht]=M.useState("select"),[Nr,Dr]=M.useState([]),[kr,pa]=M.useState([]),[Lu,Bt]=M.useState(!1),[Ls,fl]=M.useState(null),Mr=E||Y,{types:ma}=vx(),pl=Ae=>ma.find(fe=>fe.id===Ae)||null,ml=pl(me||oe),Iu=pl(oe),Os=ml?.validationSlug||null;IN(Os);const Vt=Ae=>{N.setPageNumber(Ae)},Jn=Ae=>{N.setPageNumber(Ae);const fe=document.getElementById(`pdf-page-${Ae}`);fe&&fe.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{a&&f&&(async()=>{try{const fe=await T(a);fe&&(te({id:a,name:a,type:"application/pdf",size:fe.fileInfo?.size,file:null}),H(fe.docHash),await ge(fe.docHash),_e({docHashValue:fe.docHash,stats:fe.stats,text:fe.text}))}catch(fe){j({title:"Could not load PDF",message:fe?.message||"Failed to load test PDF.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}})()},[a,f]),M.useEffect(()=>{if(o.state?.document&&!a&&f){const Ae=o.state.document;te(Ae),(async()=>{try{const Le=await R(Ae.file);Le&&(H(Le.docHash),await ge(Le.docHash),_e({docHashValue:Le.docHash,stats:Le.stats,text:Le.text}))}catch{}})()}},[o,a,f]);const Ut=Ae=>{const Le=Array.from(Ae.target.files).filter(_t=>_t.type==="application/pdf");if(Le.length>0){const _t=Le[0],Xt={id:Date.now()+Math.random(),name:_t.name,size:_t.size,type:_t.type,file:_t};te(Xt),c("/view",{state:{document:Xt}})}},Pu=()=>{Z&&c(`/edit/${Z.id}`,{state:{document:Z}})},ju=Ae=>{const fe=[];Ae.risks&&Ae.risks.length>0&&Ae.risks.forEach((Le,_t)=>{fe.push({id:_t,pageNum:1,x:100+_t*50,y:100+_t*40,level:Le.riskLevel,description:Le.description,explanation:Le.explanation})}),Kn(fe)},Bu=Ae=>{if(zt==="select")return;const fe=Ae.target.closest("[data-page-num]");if(!fe)return;const Le=parseInt(fe.getAttribute("data-page-num"),10),_t=fe.getBoundingClientRect(),Xt=Ae.clientX-_t.left,Is=Ae.clientY-_t.top;zt==="signature"&&Ls?(Dr(En=>[...En,{id:Date.now(),pageNum:Le,x:Xt,y:Is,width:Ls.width||200,height:Ls.height||60,...Ls}]),Ht("select")):zt==="text"?(pa(En=>[...En,{id:Date.now(),pageNum:Le,x:Xt,y:Is,text:"Text",type:"text"}]),Ht("select")):zt==="date"?(pa(En=>[...En,{id:Date.now(),pageNum:Le,x:Xt,y:Is,text:new Date().toLocaleDateString(),type:"date"}]),Ht("select")):zt==="image"?(pa(En=>[...En,{id:Date.now(),pageNum:Le,x:Xt,y:Is,text:" Image",type:"image"}]),Ht("select")):zt==="checkmark"&&(pa(En=>[...En,{id:Date.now(),pageNum:Le,x:Xt,y:Is,text:"",type:"checkmark"}]),Ht("select"))},ga=Ae=>y.jsxs(y.Fragment,{children:[Nr.filter(fe=>fe.pageNum===Ae).map(fe=>y.jsx("div",{className:"absolute border-2 border-blue-500/40 bg-blue-50/20 flex items-center justify-center cursor-move rounded",style:{left:fe.x,top:fe.y,width:fe.width,height:fe.height,zIndex:50},onClick:Le=>Le.stopPropagation(),children:fe.mode==="type"?y.jsx("span",{className:"text-slate-900 select-none",style:{fontFamily:fe.fontFamily,fontSize:"1.5rem",lineHeight:1},children:fe.text}):fe.dataUrl?y.jsx("img",{src:fe.dataUrl,alt:"Signature",className:"max-w-full max-h-full object-contain",draggable:!1}):y.jsx("span",{className:"text-blue-700 font-semibold italic text-lg",children:"Signature"})},fe.id)),kr.filter(fe=>fe.pageNum===Ae).map(fe=>y.jsx("div",{className:`absolute px-2 py-1 text-sm shadow-sm cursor-move rounded ${fe.type==="checkmark"?"text-green-700 text-2xl font-bold":fe.type==="date"?"bg-amber-50 border border-amber-300 text-amber-800":fe.type==="image"?"bg-purple-50 border border-purple-300 text-purple-700":"bg-yellow-100 border border-yellow-300 text-slate-800"}`,style:{left:fe.x,top:fe.y,zIndex:50},onClick:Le=>Le.stopPropagation(),children:fe.text},fe.id))]});return y.jsxs(Hn,{variant:"app",showFooter:!1,children:[y.jsx(kN,{open:Lu,onClose:()=>Bt(!1),onAdopt:Ae=>{fl(Ae),Ht("signature")}}),O&&y.jsx("div",{id:"viewer-gate-dialog",role:"dialog","aria-modal":"true",className:"fixed inset-0 bg-slate-900/45 flex items-center justify-center z-[2000] p-4",onClick:()=>j(null),children:y.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 max-w-[520px] w-full p-5 shadow-2xl",onClick:Ae=>Ae.stopPropagation(),children:[y.jsx("div",{className:"font-black text-base text-slate-900",children:O.title}),y.jsx("div",{className:"mt-2.5 text-slate-600 leading-relaxed whitespace-pre-wrap",children:O.message}),y.jsxs("div",{className:"mt-3.5 flex gap-2.5 flex-wrap justify-end",children:[O.secondaryLabel&&y.jsx("button",{type:"button",onClick:()=>{j(null),O.secondaryTo&&c(O.secondaryTo)},className:"px-3 py-2.5 rounded-xl border border-slate-200 bg-white font-black cursor-pointer hover:bg-slate-50 transition-colors",children:O.secondaryLabel}),O.primaryLabel&&y.jsx("button",{type:"button",onClick:async()=>{if(O._kind==="confirm-override"&&P&&w){const Ae=P.id;G(Ae),await L(w,Ae),ee(null),j(null);return}j(null),O.primaryTo&&c(O.primaryTo)},className:"px-3 py-2.5 rounded-xl border border-slate-900 bg-slate-900 text-white font-black cursor-pointer hover:bg-slate-800 transition-colors",children:O.primaryLabel})]})]})}),y.jsx(ON,{open:Qn,detectedType:Iu,onClose:()=>Bn(!1),onPick:Ae=>{Bn(!1),ee(Ae),j({title:"Confirm document type",message:`Set document type to ${Ae.label}? This will change the actions/checks we show for this document.`,primaryLabel:"Confirm",primaryTo:null,secondaryLabel:"Cancel",secondaryTo:null,_kind:"confirm-override"})}}),y.jsxs("div",{id:"viewer-root",className:"flex flex-col flex-1 h-full overflow-hidden bg-slate-100",children:[p&&y.jsxs("div",{id:"viewer-toolbar",className:"flex flex-col bg-white border-b border-slate-200 z-20 relative",children:[y.jsxs("div",{id:"viewer-filename-bar",className:"h-11 px-4 flex items-center justify-between border-b border-slate-100/80",children:[y.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[y.jsx("span",{id:"viewer-filename",className:"font-semibold text-slate-800 text-sm truncate max-w-[320px]",children:Z?.name||"Untitled Document"}),y.jsxs("div",{id:"viewer-quick-actions",className:"flex items-center gap-0.5 ml-1",children:[y.jsx("button",{id:"btn-share-link",onClick:()=>alert("Create a shareable link (coming soon)"),className:"p-1.5 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50 transition-colors",title:"Create a shareable link",children:y.jsx(ax,{className:"w-4 h-4"})}),y.jsx("button",{id:"btn-save-decodocs",onClick:()=>alert("Save to DecoDocs (coming soon)"),className:"p-1.5 rounded-md text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition-colors",title:"Save to DecoDocs",children:y.jsx(tx,{className:"w-4 h-4"})})]})]}),y.jsxs("div",{id:"viewer-primary-actions",className:"flex items-center gap-2",children:[y.jsxs("button",{id:"btn-download",onClick:()=>{if(!p)return;const Ae=document.createElement("a");Ae.href=URL.createObjectURL(Z?.file||new Blob),Ae.download=Z?.name||"document.pdf",Ae.click()},className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded-lg transition-colors shadow-sm",children:[y.jsx(ix,{className:"w-3.5 h-3.5"}),"Download"]}),y.jsxs("button",{id:"btn-finish",onClick:()=>{te(null),c("/view")},className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-800 hover:bg-slate-900 text-white text-xs font-semibold rounded-lg transition-colors shadow-sm",children:["Finish",y.jsx(SR,{className:"w-3.5 h-3.5"})]})]})]}),y.jsxs("div",{id:"viewer-tools-bar",className:"h-10 px-4 flex items-center bg-slate-50/60",children:[y.jsx("div",{id:"viewer-doctype-bar",className:"flex items-center",children:y.jsxs("button",{id:"viewer-doctype-chip",onClick:()=>Bn(!0),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-100 transition-colors",title:"Click to change document type",children:[y.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),y.jsx("span",{children:ml?.label||"Contract / agreement (general)"}),y.jsx("svg",{className:"w-3 h-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),y.jsx("div",{className:"w-px h-5 bg-slate-200 mx-3"}),y.jsxs("div",{id:"viewer-signing-tools",className:"flex items-center gap-0.5",children:[y.jsx(nr,{active:zt==="select",icon:nx,label:"Select",onClick:()=>Ht("select")}),y.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),y.jsx(nr,{active:zt==="signature",icon:Cp,label:"Sign",onClick:()=>{Ls?Ht("signature"):Bt(!0)}}),y.jsx(nr,{active:zt==="text",icon:Zv,label:"Text",onClick:()=>Ht("text")}),y.jsx(nr,{active:zt==="date",icon:ER,label:"Date",onClick:()=>Ht("date")}),y.jsx(nr,{active:zt==="image",icon:vu,label:"Image",onClick:()=>Ht("image")}),y.jsx(nr,{active:zt==="checkmark",icon:_R,label:"Check",onClick:()=>Ht("checkmark")})]})]})]}),y.jsxs("div",{id:"viewer-content",className:"flex flex-1 overflow-hidden relative",children:[y.jsxs("div",{id:"viewer-canvas-area",className:"flex-1 flex flex-col items-center justify-start overflow-hidden relative",children:[p?y.jsxs("div",{className:"w-full flex-1 relative flex overflow-hidden",children:[y.jsx(bx,{pdfDoc:p,numPages:g,currentPage:v,onPageClick:Jn}),y.jsx("div",{id:"viewer-scroll-area",className:`flex-1 overflow-auto bg-slate-100/50 relative ${zt!=="select"?"cursor-crosshair":""}`,onClick:Bu,children:y.jsx(gx,{pdfDoc:p,numPages:g,pageScale:x,isLoading:Mr,loadingMessage:_,onPageVisible:Vt,highlights:ue,clauseMarkers:de,riskBadges:He,renderPageOverlay:ga})})]}):y.jsx("div",{className:"flex-1 flex items-center justify-center w-full",children:y.jsx(yx,{onFileSelect:Ut})}),p&&y.jsx(mx,{onFileSelect:Ut,onEdit:Pu,pageNumber:v,numPages:g,pageScale:x,onPreviousPage:N.goToPreviousPage,onNextPage:N.goToNextPage,onZoomIn:N.zoomIn,onZoomOut:N.zoomOut,fileInputRef:u})]}),y.jsx(EN,{isOpen:fa,onToggle:()=>Rr(!fa),onAnalyzeDocument:()=>W({selectedDocument:Z,pdfTextContent:S,docHash:w,numPages:g,updateAnnotations:ju}),onAnalyzeByType:()=>$({selectedDocument:Z,pdfTextContent:S,docHash:w}),onExplainSelection:()=>q({selectedDocument:Z,docHash:w,pdfTextContent:S}),onHighlightRisks:()=>J({selectedDocument:Z,docHash:w,pdfTextContent:S,setRiskBadges:Kn}),onTranslateToPlainEnglish:()=>re({selectedDocument:Z,docHash:w,pdfTextContent:S}),isLoading:Mr,isAuthenticated:r.status==="authenticated",hasDocument:!!Z,selectedDocument:Z,analysisResults:D})]})]})]})},nr=({active:r,icon:e,label:t,onClick:i})=>y.jsxs("button",{onClick:i,title:t,className:`flex items-center gap-1 px-2 py-1.5 rounded-md text-xs font-medium transition-all ${r?"bg-slate-200/80 text-slate-800":"text-slate-400 hover:bg-slate-100 hover:text-slate-700"}`,children:[y.jsx(e,{className:"w-4 h-4"}),y.jsx("span",{className:"hidden sm:inline",children:t})]}),T1=()=>{const{documentId:r}=op(),e=cn(),t=Wi(),i=M.useRef(null),{pdfLibLoaded:a,pdfDoc:o,numPages:c,pageNumber:u,pageScale:h,isLoading:f,loadingMessage:p,loadPdfFromBlob:g,loadTestPdf:v,navigation:x}=ow(),[S,w]=M.useState(null),[E,_]=M.useState("select"),[R,T]=M.useState([]),[N,D]=M.useState([]),[O]=M.useState({width:150,height:50});M.useEffect(()=>{if(e.state?.document&&!o&&a){const $=e.state.document;w($),$.file&&g($.file).catch(console.error)}else if(e.pathname.includes("test-docs")&&a&&!o){e.pathname.split("/");const $=e.pathname.split("/").pop();$.endsWith(".pdf")&&v($).then(q=>{q&&w({name:$,id:"test-doc",type:"application/pdf"})})}else if(r&&a&&!o&&!e.pathname.includes("test-docs")){const $={id:r,name:`Document_${r}.pdf`,type:"application/pdf",file:null};w($)}},[e,r,a,o,g,v]);const j=$=>{if(E==="select")return;const q=$.target.closest("[data-page-num]");if(!q)return;const J=parseInt(q.getAttribute("data-page-num"),10),re=q.getBoundingClientRect(),oe=$.clientX-re.left,me=$.clientY-re.top;if(E==="signature"){const P={id:Date.now(),pageNum:J,x:oe,y:me,width:O.width,height:O.height,text:"John Doe",type:"signature"};T([...R,P]),_("select")}else if(E==="text"){const P={id:Date.now(),pageNum:J,x:oe,y:me,text:"Type something...",type:"text"};D([...N,P]),_("select")}else if(E==="date"){const P={id:Date.now(),pageNum:J,x:oe,y:me,text:new Date().toLocaleDateString(),type:"date"};D([...N,P]),_("select")}},Y=$=>{const J=Array.from($.target.files).filter(re=>re.type==="application/pdf");if(J.length>0){const re=J[0],oe={id:Date.now(),name:re.name,size:re.size,type:re.type,file:re};w(oe),g(re)}},W=$=>y.jsxs(y.Fragment,{children:[R.filter(q=>q.pageNum===$).map(q=>y.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-50/20 flex items-center justify-center cursor-move",style:{left:q.x,top:q.y,width:q.width,height:q.height,zIndex:50},onClick:J=>J.stopPropagation(),children:y.jsx("span",{className:"text-blue-700 font-script text-xl font-bold",children:q.text})},q.id)),N.filter(q=>q.pageNum===$).map(q=>y.jsx("div",{className:"absolute bg-yellow-100 border border-yellow-300 px-2 py-1 text-sm shadow-sm cursor-move",style:{left:q.x,top:q.y,zIndex:50},onClick:J=>J.stopPropagation(),children:q.text},q.id))]});return y.jsx(Hn,{variant:"app",showFooter:!1,children:y.jsxs("div",{className:"flex flex-col h-full bg-slate-100",children:[y.jsxs("div",{className:"flex flex-col bg-white border-b border-slate-200 z-20 relative font-sans",children:[y.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b border-slate-100",children:[y.jsx("div",{className:"flex items-center gap-3 min-w-0",children:y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("span",{className:"font-bold text-slate-800 text-base truncate max-w-[250px]",children:S?.name||"Untitled Document"}),y.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[y.jsxs("button",{onClick:()=>alert("Upgrade to Pro to share links!"),className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border border-blue-100",children:[y.jsx(ax,{className:"w-3.5 h-3.5"})," Share"]}),y.jsxs("button",{onClick:()=>alert("Upgrade to Pro to upload to cloud!"),className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold text-slate-600 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[y.jsx(Rp,{className:"w-3.5 h-3.5"})," Upload"]})]})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>t("/view"),className:"px-3 py-1.5 text-slate-600 text-sm font-semibold hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),y.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-all shadow-sm",children:["Finish & Download ",y.jsx(ix,{className:"w-4 h-4"})]})]})]}),y.jsxs("div",{className:"h-12 flex items-center justify-center gap-1 bg-slate-50/50",children:[y.jsx(Mo,{active:E==="select",icon:nx,label:"Select",onClick:()=>_("select"),tooltip:"Select & Move"}),y.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),y.jsx(Mo,{active:E==="text",icon:Zv,label:"Text",onClick:()=>_("text"),tooltip:"Add Text"}),y.jsx(Mo,{active:E==="signature",icon:Cp,label:"Sign",onClick:()=>_("signature"),tooltip:"Create Signature"}),y.jsx(Mo,{active:E==="image",icon:vu,label:"Image",onClick:()=>_("image"),tooltip:"Insert Image"}),y.jsx(Mo,{active:E==="shape",icon:MR,label:"Shapes",onClick:()=>_("shape"),tooltip:"Add Shapes"})]})]}),y.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[o&&y.jsx(bx,{pdfDoc:o,numPages:c,currentPage:u,onPageClick:$=>{x.setPageNumber($);const q=document.getElementById(`pdf-page-${$}`);q&&q.scrollIntoView({behavior:"smooth"})}}),y.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center relative bg-slate-100/50",children:o?y.jsx("div",{className:"w-full flex justify-center",style:{minHeight:"100%"},onClick:j,children:y.jsx(gx,{pdfDoc:o,numPages:c,pageScale:h,isLoading:f,loadingMessage:p,onPageVisible:$=>x.setPageNumber($),renderPageOverlay:W})}):y.jsx("div",{className:"flex-1 flex items-center justify-center w-full",children:y.jsx(yx,{onFileSelect:Y})})}),y.jsx(mx,{onFileSelect:Y,onEdit:()=>{},pageNumber:u,numPages:c,pageScale:h,onPreviousPage:x.goToPreviousPage,onNextPage:x.goToNextPage,onZoomIn:x.zoomIn,onZoomOut:x.zoomOut,fileInputRef:i})]})]})})},Mo=({active:r,icon:e,label:t,onClick:i,tooltip:a})=>y.jsx("button",{onClick:i,title:a||t,className:`flex items-center justify-center p-2.5 rounded-lg transition-all relative ${r?"bg-slate-200/80 text-slate-800":"bg-transparent text-slate-500 hover:bg-slate-200/50 hover:text-slate-800"}`,children:y.jsx(e,{className:"w-5 h-5"})}),L3=()=>y.jsx("section",{className:"about-page",children:y.jsx("div",{className:"about-main",children:y.jsxs("div",{className:"about-container",children:[y.jsxs("section",{className:"about-header",children:[y.jsx("h1",{children:"About DecoDocs"}),y.jsx("p",{children:"DecoDocs is a document intelligence product designed to help people understand what they are about to sign. Before any signature, DecoDocs explains documents in plain language, highlights caveats and unfair conditions, flags logical inconsistencies, and provides translations when needed. Our focus is clarity before commitment."})]}),y.jsxs("section",{className:"product-philosophy",children:[y.jsx("h2",{children:"What We Believe"}),y.jsxs("ul",{className:"philosophy-list",children:[y.jsx("li",{children:"Documents should be understood before being signed"}),y.jsx("li",{children:"AI should reduce information asymmetry, not introduce new ones"}),y.jsx("li",{children:"Free users deserve real value, not crippled features"}),y.jsx("li",{children:"We charge only for real costs: deeper analysis and storage"}),y.jsx("li",{children:"Documents belong to users, not platforms"})]})]}),y.jsxs("section",{className:"scope-definition",children:[y.jsx("h2",{children:"What DecoDocs Is  and Is Not"}),y.jsxs("div",{className:"scope-columns",children:[y.jsxs("div",{className:"scope-column",children:[y.jsx("h3",{children:"Is"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Pre-signature document analysis"}),y.jsx("li",{children:"Plain-language explanation"}),y.jsx("li",{children:"Caveat and unfair-condition detection"}),y.jsx("li",{children:"Logical inconsistency checks"}),y.jsx("li",{children:"Ephemeral processing by default"})]})]}),y.jsxs("div",{className:"scope-column",children:[y.jsx("h3",{children:"Is Not"}),y.jsxs("ul",{children:[y.jsx("li",{children:"A document editor"}),y.jsx("li",{children:"A document management system"}),y.jsx("li",{children:'A "sign now, think later" tool'}),y.jsx("li",{children:"A storage-first SaaS"}),y.jsx("li",{children:"A replacement for legal advice"})]})]})]})]}),y.jsxs("section",{className:"decodocs-clarification",children:[y.jsx("h2",{children:"How It Relates To SnapSign"}),y.jsx("p",{children:"Snap Sign Pty Ltd builds DecoDocs. SnapSign is the company brand and broader product family; DecoDocs is the document understanding and analysis product in that family."})]}),y.jsxs("section",{className:"team-company",children:[y.jsx("h2",{children:"Company"}),y.jsx("p",{children:"SnapSign is built by a small, focused team with backgrounds in software engineering, automation, and privacy-first systems. We prioritize correctness, transparency, and long-term maintainability."}),y.jsxs("div",{className:"legal-block",children:[y.jsx("p",{children:"Snap Sign Pty Ltd"}),y.jsx("p",{children:"ABN 72 679 570 757"}),y.jsx("p",{children:"Australia"})]})]}),y.jsxs("section",{className:"collaboration-contact",children:[y.jsx("h2",{children:"Collaboration"}),y.jsx("p",{children:"We welcome serious collaboration and partnership enquiries. For certain discussions, a Non-Disclosure Agreement (NDA) may be required before sharing internal details."}),y.jsx("div",{className:"contact-info",children:y.jsxs("p",{children:["Email: ",y.jsx("a",{href:"mailto:partnerships@snapsign.com.au",children:"partnerships@snapsign.com.au"})]})})]})]})})}),O3=()=>y.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Privacy Policy"}),y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),y.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[y.jsx("p",{children:'DecoDocs ("we", "us") is built by Snap Sign Pty Ltd. This policy explains what data is processed when you use DecoDocs, what is stored, and what choices you have.'}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"What we process"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"PDF file metadata (filename, size) and content needed to render and analyze the document."}),y.jsx("li",{children:"Extracted text used to generate summaries, explanations, and risk highlights."}),y.jsx("li",{children:"Basic usage events (e.g. button clicks) to understand product performance."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Storage (Free vs Pro)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Free:"})," we aim to avoid storing your files. Documents are opened for viewing and analysis without persistent storage."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Pro (optional):"})," secure storage may be available for users who explicitly choose to save documents for later access."]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Retention"}),y.jsx("p",{children:"We retain only what is necessary to operate the service. Where storage is enabled (e.g. Pro), retention and deletion controls will be provided."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your controls"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"You can choose whether to use free (no-storage) workflows or paid storage features when available."}),y.jsx("li",{children:"You can contact us to request deletion or export of stored data where applicable."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{children:["Questions or requests: ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),I3=()=>y.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Terms of Service"}),y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),y.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[y.jsx("p",{children:"These terms govern use of DecoDocs provided by Snap Sign Pty Ltd. By using the service, you agree to these terms."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Not legal advice"}),y.jsx("p",{children:"DecoDocs provides informational analysis and is not legal advice. For legal decisions, consult a qualified professional."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Acceptable use"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"Do not upload content you do not have the right to process."}),y.jsx("li",{children:"Do not attempt to abuse, probe, or disrupt the service."}),y.jsx("li",{children:"Do not use the service for illegal activity."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Availability and changes"}),y.jsx("p",{children:"The service may change over time. We may add, modify, or remove features. We may suspend access to protect the service or comply with law."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Limitation of liability"}),y.jsx("p",{children:"To the maximum extent permitted by law, Snap Sign Pty Ltd is not liable for indirect or consequential losses arising from use of the service."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{children:["Questions: ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),P3=()=>{const r="mailto:contact@snapsign.com?subject="+encodeURIComponent("DecoDocs signing waitlist");return y.jsxs("section",{className:"mx-auto w-full max-w-3xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{className:"mt-4 text-slate-700",children:["For support, partnerships, or product feedback, email us at"," ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"}),"."]}),y.jsxs("div",{className:"mt-10 rounded-2xl border border-slate-200 bg-white p-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Signing waitlist"}),y.jsx("p",{className:"mt-2 text-slate-700",children:"Want the signing workflow? Join the waitlist and tell us your use case."}),y.jsx("a",{className:"mt-4 inline-flex rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",href:r,children:"Join the waitlist"})]})]})},Fc=r=>{try{return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",maximumFractionDigits:0}).format(r)}catch{return`$${r} AUD`}},Rf=({items:r})=>y.jsx("ul",{style:{margin:0,paddingLeft:18,color:"#0f172a",lineHeight:1.7},children:r.map(e=>y.jsx("li",{style:{marginBottom:6},children:e},e))});function j3(){const r=Wi(),{authState:e}=gi(),[t,i]=M.useState("monthly"),[a,o]=M.useState(null),c=M.useMemo(()=>t==="annual"?{label:Fc(60),suffix:"/year"}:{label:Fc(5),suffix:"/month"},[t]),u=async()=>{if(o(null),!e?.user){r("/sign-in?intent=upgrade");return}try{const{getFunctions:v,httpsCallable:x}=await Dp(async()=>{const{getFunctions:R,httpsCallable:T}=await Promise.resolve().then(()=>px);return{getFunctions:R,httpsCallable:T}},void 0),S=v(),_=(await x(S,"stripeCreateCheckoutSession")({billing:t}))?.data?.url;if(!_)throw new Error("No checkout URL returned");window.location.assign(_)}catch(v){o(`Could not start Stripe checkout: ${v?.message||v}`)}},h=()=>r("/sign-in"),f={padding:"2.5rem 1.5rem",maxWidth:1100,margin:"0 auto"},p={border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},g=v=>({padding:"8px 12px",borderRadius:999,border:`1px solid ${v?"#0f172a":"#e2e8f0"}`,background:v?"#0f172a":"#ffffff",color:v?"#ffffff":"#0f172a",fontWeight:700,fontSize:13,cursor:"pointer"});return y.jsxs("div",{style:f,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[y.jsxs("div",{children:[y.jsx("h1",{style:{margin:0},children:"Pricing"}),y.jsx("p",{style:{marginTop:10,marginBottom:0,color:"#334155",lineHeight:1.6},children:"Three user types, one rule: pay only when your usage costs us money."})]}),y.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[y.jsx("button",{type:"button",onClick:()=>i("monthly"),style:g(t==="monthly"),children:"Monthly"}),y.jsx("button",{type:"button",onClick:()=>i("annual"),style:g(t==="annual"),children:"Annual"})]})]}),a&&y.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),y.jsxs("div",{style:{marginTop:22,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14},children:[y.jsxs("div",{style:p,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Anonymous"}),y.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[Fc(0),y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Try DecoDocs instantly. Minimal AI budget. No OCR. No storage."}),y.jsx("button",{type:"button",onClick:()=>r("/view"),style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Start now"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Rf,{items:["AI analysis: 20k tokens per uid session","Text-only PDFs (no OCR)","No storage (browser-only)"]})})]}),y.jsxs("div",{style:p,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Free"}),y.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[Fc(0),y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create an account to get a bigger daily budget and manage linked sign-in methods."}),y.jsx("button",{type:"button",onClick:h,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Continue for free"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Rf,{items:["AI analysis: 40k tokens/day per uid","Text-only PDFs (no OCR)","No storage with us (browser-only)","Link multiple providers (Google/Email/Apple/Microsoft)"]})})]}),y.jsxs("div",{style:{...p,borderColor:"#0f172a"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Pro"}),y.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[c.label,y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:c.suffix})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"OCR for scanned PDFs, unlimited analysis (for now), better model, and 5GB storage."}),y.jsx("button",{type:"button",onClick:u,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Upgrade"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Rf,{items:["Unlimited AI (until abuse policy exists)","OCR / vision model for scanned PDFs","5GB storage (Contabo VPS)","Receipts + subscription management in /profile"]})})]})]}),y.jsxs("div",{style:{marginTop:22,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(ut,{to:"/profile",style:{color:"#0f172a",fontWeight:800},children:"Go to profile"}),y.jsx(ut,{to:"/terms",style:{color:"#475569",fontWeight:700},children:"Terms"}),y.jsx(ut,{to:"/privacy",style:{color:"#475569",fontWeight:700},children:"Privacy"})]}),y.jsxs("div",{style:{marginTop:22,padding:16,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Notes"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Well prompt you to upgrade when you hit limits or when a scanned/OCR-required document is detected. Upgrade redirects to ",y.jsx("code",{children:"/pricing"}),", and account linking is handled via ",y.jsx("code",{children:"/sign-in"}),"."]})]})]})}function lw(r){return Te({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(r)}function cw(r){return Te({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"},child:[]}]})(r)}function uw(r){return Te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"},child:[]}]})(r)}const B3=()=>{const{search:r}=cn();return M.useMemo(()=>new URLSearchParams(r),[r])},C1=({children:r})=>y.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function U3(){const{authState:r,auth:e,signInWithGoogle:t,signInWithMicrosoft:i,signInWithApple:a,signInWithEmail:o,signUpWithEmail:c,resetPassword:u}=gi(),h=Wi(),f=B3(),[p,g]=M.useState(""),[v,x]=M.useState(""),[S,w]=M.useState({kind:"idle",message:""}),E=r?.user||null,_=!!E?.isAnonymous,R=f.get("intent"),T=async(Y,W)=>{w({kind:"loading",message:"Opening sign-in"});try{if(!e)throw new Error("Auth is not available");if(e.currentUser)await Yv(e.currentUser,Y);else if(W)await W();else throw new Error("No active session. Refresh and try again.");w({kind:"ok",message:"Signed in. Your accounts are linked."}),h("/profile")}catch($){const q=$?.code||"";if(q==="auth/credential-already-in-use"||q==="auth/email-already-in-use"){w({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}w({kind:"error",message:$?.message||"Sign-in failed."})}},N=async()=>{w({kind:"loading",message:"Signing in"});try{if(!p||!v)throw new Error("Email and password are required.");if(e.currentUser&&_){const Y=Ms.credential(p,v);await Iv(e.currentUser,Y),w({kind:"ok",message:"Email linked and signed in."})}else await o(p,v),w({kind:"ok",message:"Signed in."});h("/profile")}catch(Y){w({kind:"error",message:Y?.message||"Email sign-in failed."})}},D=async()=>{w({kind:"loading",message:"Creating account"});try{if(!p||!v)throw new Error("Email and password are required.");if(String(v).length<10)throw new Error("Password must be at least 10 characters.");await c(p,v),w({kind:"ok",message:"Account created and signed in."}),h("/profile")}catch(Y){w({kind:"error",message:Y?.message||"Email sign-up failed."})}},O=async()=>{w({kind:"loading",message:"Sending reset email"});try{if(!p)throw new Error("Enter your email first.");await u(p),w({kind:"ok",message:"Password reset email sent (if the account exists)."})}catch(Y){w({kind:"error",message:Y?.message||"Password reset failed."})}},j=R==="upgrade"?"Sign in to upgrade":"Sign in";return r.status==="authenticated"&&!_?(h("/profile"),y.jsx("div",{children:"Redirecting..."})):y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:j}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"We support Google, Email, Apple, and Microsoft. Linking is universal  you can attach multiple providers to one account."}),S.kind!=="idle"&&y.jsx("div",{className:"error",style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(S.kind==="error"?"#fecaca":"#bbf7d0"),background:S.kind==="error"?"#fef2f2":"#f0fdf4",color:S.kind==="error"?"#991b1b":"#166534"},children:S.message}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[y.jsxs(C1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),y.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[y.jsxs("button",{type:"button",onClick:()=>T(new Gn,t),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(lw,{size:20}),"Continue with Google"]}),y.jsxs("button",{type:"button",onClick:()=>T(new hi("apple.com"),a),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(cw,{size:20}),"Continue with Apple"]}),y.jsxs("button",{type:"button",onClick:()=>T(new hi("microsoft.com"),i),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(uw,{size:20}),"Continue with Microsoft"]})]})]}),y.jsxs(C1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Sign in with email"}),y.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[y.jsx("input",{value:p,onChange:Y=>g(Y.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:v,onChange:Y=>x(Y.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsxs("div",{style:{display:"grid",gap:10},children:[y.jsx("button",{type:"button",onClick:N,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign In"}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:14},children:[y.jsx("button",{type:"button",onClick:D,style:{background:"none",border:"none",color:"#0f172a",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Create account"}),y.jsx("button",{type:"button",onClick:O,style:{background:"none",border:"none",color:"#0f172a",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Reset password"})]})]})]})]})]}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(ut,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),y.jsx(ut,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),y.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:E?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(_)})]})]})]})}const F3=()=>{const{search:r}=cn();return M.useMemo(()=>new URLSearchParams(r),[r])},R1=({children:r})=>y.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function z3(){const{authState:r,auth:e,signInWithGoogle:t,signInWithMicrosoft:i,signInWithApple:a,signUpWithEmail:o}=gi(),c=Wi();F3();const[u,h]=M.useState(""),[f,p]=M.useState(""),[g,v]=M.useState(""),[x,S]=M.useState({kind:"idle",message:""}),w=r?.user||null,E=!!w?.isAnonymous,_=async(T,N)=>{S({kind:"loading",message:"Opening sign-in"});try{if(!e)throw new Error("Auth is not available");if(e.currentUser)await Yv(e.currentUser,T);else if(N)await N();else throw new Error("No active session. Refresh and try again.");S({kind:"ok",message:"Signed in. Your accounts are linked."}),c("/profile")}catch(D){const O=D?.code||"";if(O==="auth/credential-already-in-use"||O==="auth/email-already-in-use"){S({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}S({kind:"error",message:D?.message||"Sign-in failed."})}};if(r.status==="authenticated"&&!E)return c("/profile"),y.jsx("div",{children:"Redirecting..."});const R=async()=>{S({kind:"loading",message:"Creating account"});try{if(!u||!f||!g)throw new Error("Email and passwords are required.");if(f!==g)throw new Error("Passwords do not match.");if(String(f).length<10)throw new Error("Password must be at least 10 characters.");if(e.currentUser&&E){const T=Ms.credential(u,f);await Iv(e.currentUser,T),S({kind:"ok",message:"Account created and linked."})}else await o(u,f),S({kind:"ok",message:"Account created."});c("/profile")}catch(T){S({kind:"error",message:T?.message||"Account creation failed."})}};return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:"Sign up"}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create your DecoDocs account to get started."}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[y.jsxs(R1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),y.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[y.jsxs("button",{type:"button",onClick:()=>_(new Gn,t),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(lw,{size:20}),"Continue with Google"]}),y.jsxs("button",{type:"button",onClick:()=>_(new hi("apple.com"),a),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(cw,{size:20}),"Continue with Apple"]}),y.jsxs("button",{type:"button",onClick:()=>_(new hi("microsoft.com"),i),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(uw,{size:20}),"Continue with Microsoft"]})]})]}),y.jsxs(R1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Create account"}),y.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[y.jsx("input",{value:u,onChange:T=>h(T.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:f,onChange:T=>p(T.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:g,onChange:T=>v(T.target.value),placeholder:"Confirm password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("button",{type:"button",onClick:R,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Create account"})]}),y.jsx("div",{style:{color:"#64748b",fontSize:13,lineHeight:1.5,marginTop:10},children:"Recommended password minimum: 10 chars. If an email already exists and linking fails, sign out then sign in using that email."})]})]}),x.kind!=="idle"&&y.jsx("div",{className:"error",style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(x.kind==="error"?"#fecaca":"#bbf7d0"),background:x.kind==="error"?"#fef2f2":"#f0fdf4",color:x.kind==="error"?"#991b1b":"#166534"},children:x.message}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(ut,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),y.jsx(ut,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),y.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:w?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(E)})]})]})]})}function H3(){const{authState:r,auth:e}=gi(),t=Wi(),i=r?.user,[a,o]=M.useState(null),c=async()=>{e&&(await jv(e),window.location.reload())},u=async()=>{o(null);try{const{getFunctions:h,httpsCallable:f}=await Dp(async()=>{const{getFunctions:S,httpsCallable:w}=await Promise.resolve().then(()=>px);return{getFunctions:S,httpsCallable:w}},void 0),p=h(),x=(await f(p,"stripeCreatePortalSession")({}))?.data?.url;if(!x)throw new Error("No portal URL returned");window.location.assign(x)}catch(h){o(`Could not open Stripe portal: ${h?.message||h}`)}};return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:"Profile"}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Manage linked accounts and subscription. Receipts and subscription management use Stripe Customer Portal."}),a&&y.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),y.jsxs("div",{style:{marginTop:16,padding:16,borderRadius:14,border:"1px solid #e2e8f0",background:"#fff"},children:[y.jsx("div",{style:{fontWeight:900},children:"Session"}),y.jsxs("div",{style:{marginTop:10,color:"#0f172a",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:i?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(!!i?.isAnonymous)})]}),y.jsxs("div",{style:{marginTop:12,color:"#475569"},children:["Linked providers: ",i?.providerData?.length?y.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18},children:i.providerData.map(h=>y.jsxs("li",{children:[y.jsx("code",{children:h.providerId}),h.email?`  ${h.email}`:""]},h.providerId))}):y.jsx("span",{children:"none (anonymous)"})]}),y.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap"},children:[y.jsx("button",{type:"button",onClick:()=>t("/sign-in"),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Link accounts"}),y.jsx("button",{type:"button",onClick:u,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Billing & receipts"}),y.jsx("button",{type:"button",onClick:c,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]})]}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(ut,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Pricing"}),y.jsx(ut,{to:"/view",style:{color:"#475569",fontWeight:700},children:"Analyze a PDF"})]})]})}const V3=()=>{const{slug:r}=op(),e=Vc.find(i=>{const a=i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");return i.slug===r||a===r}),t=Vc.filter(i=>i.slug!==e?.slug).slice(0,3);return e?y.jsx(Vf,{children:y.jsxs("div",{className:"relative overflow-hidden px-6 pb-20 pt-12",children:[y.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[y.jsx("div",{className:"absolute -right-20 -top-24 h-64 w-64 rounded-full bg-amber-200/40 blur-3xl"}),y.jsx("div",{className:"absolute -left-24 top-56 h-72 w-72 rounded-full bg-blue-200/30 blur-3xl"})]}),y.jsxs("div",{className:"relative mx-auto flex w-full max-w-6xl flex-col gap-16",children:[y.jsxs("section",{className:"grid gap-8 rounded-3xl border border-slate-200/80 bg-white/85 p-8 shadow-xl shadow-slate-900/5 backdrop-blur-sm lg:grid-cols-[1.2fr_0.8fr] lg:p-12",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.25em] text-slate-500",children:e.audience}),y.jsx("h1",{className:"mt-4 text-4xl font-bold leading-tight text-slate-900 lg:text-5xl",children:e.heroTitle||e.title}),y.jsx("p",{className:"mt-5 max-w-2xl text-lg leading-relaxed text-slate-600",children:e.heroDescription||e.description}),y.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[y.jsx(ta,{size:"md",to:e.cta?.primaryTo||"/view",children:e.cta?.primaryLabel||"Open viewer"}),y.jsx(ta,{variant:"outline",size:"md",to:e.cta?.secondaryTo||"/contact",children:e.cta?.secondaryLabel||"Contact us"})]})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-6",children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[y.jsx(Tp,{className:"h-5 w-5 text-slate-500"}),"Best document fit"]}),y.jsx("ul",{className:"mt-4 space-y-3 list-none p-0",children:e.documentTypes.map(i=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[y.jsx(Hf,{className:"mt-0.5 h-4 w-4 shrink-0 text-emerald-500"}),y.jsx("span",{children:i})]},i))})]})]}),y.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:e.highlights.map(i=>y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:i.label}),y.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:i.value})]},i.label))}),y.jsxs("section",{children:[y.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(sx,{className:"h-5 w-5 text-amber-500"}),"Where teams get blocked"]}),y.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.painPoints.map(i=>y.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-slate-700 shadow-sm",children:i},i))})]}),y.jsxs("section",{children:[y.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(xu,{className:"h-5 w-5 text-indigo-500"}),"Recommended workflow"]}),y.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:e.workflow.map((i,a)=>y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsxs("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:["Step ",a+1]}),y.jsx("h3",{className:"mt-3 text-lg font-semibold text-slate-900",children:i.step}),y.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:i.detail})]},i.step))})]}),y.jsxs("section",{className:"grid gap-6 rounded-3xl border border-slate-200 bg-white p-8 lg:grid-cols-[1fr_1fr]",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(rx,{className:"h-5 w-5 text-emerald-600"}),"What your team delivers"]}),y.jsx("ul",{className:"mt-5 space-y-3 list-none p-0",children:e.deliverables.map(i=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[y.jsx(Hf,{className:"mt-0.5 h-4 w-4 shrink-0 text-emerald-500"}),y.jsx("span",{children:i})]},i))})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-6",children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Need this workflow adapted to your team?"}),y.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:"We can help shape your review flow around your real document mix and approval process."}),y.jsxs("div",{className:"mt-5 flex flex-wrap gap-3",children:[y.jsx(ta,{size:"sm",to:"/contact",children:"Talk to us"}),y.jsx(ta,{variant:"outline",size:"sm",to:"/pricing",children:"View pricing"})]})]})]}),y.jsxs("section",{children:[y.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-slate-500",children:"Related use cases"}),y.jsx("div",{className:"mt-5 grid gap-4 md:grid-cols-3",children:t.map(i=>y.jsxs(ut,{to:`/use-cases/${i.slug||i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`,className:"rounded-2xl border border-slate-200 bg-white p-5 no-underline transition hover:border-slate-300 hover:shadow-lg",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:i.audience||"Use case"}),y.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:i.title}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:i.description})]},i.slug||i.title))})]})]})]})}):y.jsx(Vf,{children:y.jsx("div",{className:"px-6 py-20",children:y.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[y.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Use Case Not Found"}),y.jsx("p",{className:"text-lg text-slate-600",children:"The requested use case could not be found."}),y.jsx("div",{className:"mt-10 grid gap-4 text-left sm:grid-cols-2",children:Vc.map(i=>y.jsxs(ut,{to:`/use-cases/${i.slug||i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`,className:"rounded-2xl border border-slate-200 bg-white p-5 no-underline transition hover:border-slate-300 hover:shadow-lg",children:[y.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-400",children:i.audience||"Use case"}),y.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:i.title}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:i.description})]},i.slug||i.title))})]})})})};class G3 extends wn.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{style:{padding:"2rem",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[y.jsx("h1",{children:"Oops! Something went wrong"}),y.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"We encountered an unexpected error. Please try refreshing the page."}),!1,y.jsx("button",{onClick:()=>window.location.href="/",style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Home"})]}):this.props.children}}const $3=()=>{const{authState:r}=gi(),[e,t]=wn.useState(!1);return r.status!=="error"||e?null:y.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"1rem",maxWidth:"400px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontFamily:"sans-serif"},role:"alert",children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"Authentication Unavailable"}),y.jsxs("div",{style:{margin:0,color:"#856404",fontSize:"0.9rem",lineHeight:1.4},children:[y.jsx("div",{children:"Some features may be limited, but you can still view documents."}),!1]})]}),y.jsx("button",{onClick:()=>t(!0),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#856404",padding:0,marginLeft:"1rem",flexShrink:0},"aria-label":"Dismiss notification",children:""})]})})},Nf=({children:r})=>{const{authState:e}=gi();return e.status==="loading"?y.jsx("div",{children:"Loading..."}):e.status!=="authenticated"?y.jsx(kf,{to:"/sign-in",replace:!0}):r},q3=()=>{const r=[{title:"Signature placement UI",detail:"Place a signature field on a PDF with drag/drop + resize."},{title:"Identity & consent",detail:"Signer authentication + explicit consent."},{title:"Audit trail",detail:"Record who signed, when, and what hash."}];return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{children:"Sign PDFs"}),y.jsx("p",{children:"Signing is not ready yet. This is a roadmap placeholder."}),y.jsx("ul",{children:r.map(e=>y.jsxs("li",{children:[y.jsx("strong",{children:e.title}),": ",e.detail]},e.title))})]})},Y3=()=>y.jsx(G3,{children:y.jsxs(pR,{children:[y.jsx($3,{}),y.jsx(eE,{children:y.jsxs(D2,{children:[y.jsx(St,{path:"/",element:y.jsx(JR,{})}),y.jsx(St,{path:"/pricing",element:y.jsx(Hn,{children:y.jsx(j3,{})})}),y.jsx(St,{path:"/about",element:y.jsx(Hn,{children:y.jsx(L3,{})})}),y.jsx(St,{path:"/privacy",element:y.jsx(Hn,{children:y.jsx(O3,{})})}),y.jsx(St,{path:"/terms",element:y.jsx(Hn,{children:y.jsx(I3,{})})}),y.jsx(St,{path:"/contact",element:y.jsx(Hn,{children:y.jsx(P3,{})})}),y.jsx(St,{path:"/use-cases/:slug",element:y.jsx(V3,{})}),y.jsx(St,{path:"/sign-in",element:y.jsx(Hn,{children:y.jsx(U3,{})})}),y.jsx(St,{path:"/sign-up",element:y.jsx(Hn,{children:y.jsx(z3,{})})}),y.jsx(St,{path:"/view",element:y.jsx(Cf,{})}),y.jsx(St,{path:"/view/:documentId",element:y.jsx(Cf,{})}),y.jsx(St,{path:"/view/test-docs/:fileName",element:y.jsx(Cf,{})}),y.jsx(St,{path:"/profile",element:y.jsx(Nf,{children:y.jsx(Hn,{variant:"app",children:y.jsx(H3,{})})})}),y.jsx(St,{path:"/edit/:documentId",element:y.jsx(Nf,{children:y.jsx(T1,{})})}),y.jsx(St,{path:"/edit/test-docs/:fileName",element:y.jsx(Nf,{children:y.jsx(T1,{})})}),y.jsx(St,{path:"/sign",element:y.jsx(Hn,{children:y.jsx(q3,{})})}),y.jsx(St,{path:"/app",element:y.jsx(kf,{to:"/view",replace:!0})}),y.jsx(St,{path:"*",element:y.jsx(kf,{to:"/",replace:!0})})]})})]})});LS.createRoot(document.getElementById("root")).render(y.jsx(wn.StrictMode,{children:y.jsx(Y3,{})}));

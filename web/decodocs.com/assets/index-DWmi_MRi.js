var xb=r=>{throw TypeError(r)};var Hd=(r,t,e)=>t.has(r)||xb("Cannot "+e);var re=(r,t,e)=>(Hd(r,t,"read from private field"),e?e.call(r):t.get(r)),Jn=(r,t,e)=>t.has(r)?xb("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),an=(r,t,e,i)=>(Hd(r,t,"write to private field"),i?i.call(r,e):t.set(r,e),e),ti=(r,t,e)=>(Hd(r,t,"access private method"),e);var Sb=(r,t,e,i)=>({set _(a){an(r,t,a,e)},get _(){return re(r,t,i)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function tv(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gd={exports:{}},To={};var _b;function _S(){if(_b)return To;_b=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var h in a)h!=="key"&&(l[h]=a[h])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return To.Fragment=t,To.jsx=e,To.jsxs=e,To}var Eb;function ES(){return Eb||(Eb=1,Gd.exports=_S()),Gd.exports}var b=ES(),Vd={exports:{}},wt={};var Tb;function TS(){if(Tb)return wt;Tb=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),v=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=v&&D[v]||D["@@iterator"],typeof D=="function"?D:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function E(D,V,Q){this.props=D,this.context=V,this.refs=S,this.updater=Q||_}E.prototype.isReactComponent={},E.prototype.setState=function(D,V){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,V,"setState")},E.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function T(){}T.prototype=E.prototype;function R(D,V,Q){this.props=D,this.context=V,this.refs=S,this.updater=Q||_}var k=R.prototype=new T;k.constructor=R,x(k,E.prototype),k.isPureReactComponent=!0;var L=Array.isArray;function P(){}var j={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function K(D,V,Q){var it=Q.ref;return{$$typeof:r,type:D,key:V,ref:it!==void 0?it:null,props:Q}}function et(D,V){return K(D.type,V,D.props)}function Z(D){return typeof D=="object"&&D!==null&&D.$$typeof===r}function ct(D){var V={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Q){return V[Q]})}var St=/\/+/g;function q(D,V){return typeof D=="object"&&D!==null&&D.key!=null?ct(""+D.key):V.toString(36)}function ot(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(P,P):(D.status="pending",D.then(function(V){D.status==="pending"&&(D.status="fulfilled",D.value=V)},function(V){D.status==="pending"&&(D.status="rejected",D.reason=V)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function M(D,V,Q,it,dt){var gt=typeof D;(gt==="undefined"||gt==="boolean")&&(D=null);var ft=!1;if(D===null)ft=!0;else switch(gt){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(D.$$typeof){case r:case t:ft=!0;break;case g:return ft=D._init,M(ft(D._payload),V,Q,it,dt)}}if(ft)return dt=dt(D),ft=it===""?"."+q(D,0):it,L(dt)?(Q="",ft!=null&&(Q=ft.replace(St,"$&/")+"/"),M(dt,V,Q,"",function($n){return $n})):dt!=null&&(Z(dt)&&(dt=et(dt,Q+(dt.key==null||D&&D.key===dt.key?"":(""+dt.key).replace(St,"$&/")+"/")+ft)),V.push(dt)),1;ft=0;var ie=it===""?".":it+":";if(L(D))for(var Pt=0;Pt<D.length;Pt++)it=D[Pt],gt=ie+q(it,Pt),ft+=M(it,V,Q,gt,dt);else if(Pt=w(D),typeof Pt=="function")for(D=Pt.call(D),Pt=0;!(it=D.next()).done;)it=it.value,gt=ie+q(it,Pt++),ft+=M(it,V,Q,gt,dt);else if(gt==="object"){if(typeof D.then=="function")return M(ot(D),V,Q,it,dt);throw V=String(D),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ft}function U(D,V,Q){if(D==null)return D;var it=[],dt=0;return M(D,it,"","",function(gt){return V.call(Q,gt,dt++)}),it}function J(D){if(D._status===-1){var V=D._result;V=V(),V.then(function(Q){(D._status===0||D._status===-1)&&(D._status=1,D._result=Q)},function(Q){(D._status===0||D._status===-1)&&(D._status=2,D._result=Q)}),D._status===-1&&(D._status=0,D._result=V)}if(D._status===1)return D._result.default;throw D._result}var vt=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},yt={map:U,forEach:function(D,V,Q){U(D,function(){V.apply(this,arguments)},Q)},count:function(D){var V=0;return U(D,function(){V++}),V},toArray:function(D){return U(D,function(V){return V})||[]},only:function(D){if(!Z(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return wt.Activity=m,wt.Children=yt,wt.Component=E,wt.Fragment=e,wt.Profiler=a,wt.PureComponent=R,wt.StrictMode=i,wt.Suspense=d,wt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,wt.__COMPILER_RUNTIME={__proto__:null,c:function(D){return j.H.useMemoCache(D)}},wt.cache=function(D){return function(){return D.apply(null,arguments)}},wt.cacheSignal=function(){return null},wt.cloneElement=function(D,V,Q){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var it=x({},D.props),dt=D.key;if(V!=null)for(gt in V.key!==void 0&&(dt=""+V.key),V)!X.call(V,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&V.ref===void 0||(it[gt]=V[gt]);var gt=arguments.length-2;if(gt===1)it.children=Q;else if(1<gt){for(var ft=Array(gt),ie=0;ie<gt;ie++)ft[ie]=arguments[ie+2];it.children=ft}return K(D.type,dt,it)},wt.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},wt.createElement=function(D,V,Q){var it,dt={},gt=null;if(V!=null)for(it in V.key!==void 0&&(gt=""+V.key),V)X.call(V,it)&&it!=="key"&&it!=="__self"&&it!=="__source"&&(dt[it]=V[it]);var ft=arguments.length-2;if(ft===1)dt.children=Q;else if(1<ft){for(var ie=Array(ft),Pt=0;Pt<ft;Pt++)ie[Pt]=arguments[Pt+2];dt.children=ie}if(D&&D.defaultProps)for(it in ft=D.defaultProps,ft)dt[it]===void 0&&(dt[it]=ft[it]);return K(D,gt,dt)},wt.createRef=function(){return{current:null}},wt.forwardRef=function(D){return{$$typeof:h,render:D}},wt.isValidElement=Z,wt.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:J}},wt.memo=function(D,V){return{$$typeof:f,type:D,compare:V===void 0?null:V}},wt.startTransition=function(D){var V=j.T,Q={};j.T=Q;try{var it=D(),dt=j.S;dt!==null&&dt(Q,it),typeof it=="object"&&it!==null&&typeof it.then=="function"&&it.then(P,vt)}catch(gt){vt(gt)}finally{V!==null&&Q.types!==null&&(V.types=Q.types),j.T=V}},wt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},wt.use=function(D){return j.H.use(D)},wt.useActionState=function(D,V,Q){return j.H.useActionState(D,V,Q)},wt.useCallback=function(D,V){return j.H.useCallback(D,V)},wt.useContext=function(D){return j.H.useContext(D)},wt.useDebugValue=function(){},wt.useDeferredValue=function(D,V){return j.H.useDeferredValue(D,V)},wt.useEffect=function(D,V){return j.H.useEffect(D,V)},wt.useEffectEvent=function(D){return j.H.useEffectEvent(D)},wt.useId=function(){return j.H.useId()},wt.useImperativeHandle=function(D,V,Q){return j.H.useImperativeHandle(D,V,Q)},wt.useInsertionEffect=function(D,V){return j.H.useInsertionEffect(D,V)},wt.useLayoutEffect=function(D,V){return j.H.useLayoutEffect(D,V)},wt.useMemo=function(D,V){return j.H.useMemo(D,V)},wt.useOptimistic=function(D,V){return j.H.useOptimistic(D,V)},wt.useReducer=function(D,V,Q){return j.H.useReducer(D,V,Q)},wt.useRef=function(D){return j.H.useRef(D)},wt.useState=function(D){return j.H.useState(D)},wt.useSyncExternalStore=function(D,V,Q){return j.H.useSyncExternalStore(D,V,Q)},wt.useTransition=function(){return j.H.useTransition()},wt.version="19.2.4",wt}var Cb;function Hf(){return Cb||(Cb=1,Vd.exports=TS()),Vd.exports}var I=Hf();const Gf=tv(I);var qd={exports:{}},Co={},$d={exports:{}},Yd={};var Rb;function CS(){return Rb||(Rb=1,(function(r){function t(M,U){var J=M.length;M.push(U);t:for(;0<J;){var vt=J-1>>>1,yt=M[vt];if(0<a(yt,U))M[vt]=U,M[J]=yt,J=vt;else break t}}function e(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var U=M[0],J=M.pop();if(J!==U){M[0]=J;t:for(var vt=0,yt=M.length,D=yt>>>1;vt<D;){var V=2*(vt+1)-1,Q=M[V],it=V+1,dt=M[it];if(0>a(Q,J))it<yt&&0>a(dt,Q)?(M[vt]=dt,M[it]=J,vt=it):(M[vt]=Q,M[V]=J,vt=V);else if(it<yt&&0>a(dt,J))M[vt]=dt,M[it]=J,vt=it;else break t}}return U}function a(M,U){var J=M.sortIndex-U.sortIndex;return J!==0?J:M.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();r.unstable_now=function(){return c.now()-h}}var d=[],f=[],g=1,m=null,v=3,w=!1,_=!1,x=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function k(M){for(var U=e(f);U!==null;){if(U.callback===null)i(f);else if(U.startTime<=M)i(f),U.sortIndex=U.expirationTime,t(d,U);else break;U=e(f)}}function L(M){if(x=!1,k(M),!_)if(e(d)!==null)_=!0,P||(P=!0,ct());else{var U=e(f);U!==null&&ot(L,U.startTime-M)}}var P=!1,j=-1,X=5,K=-1;function et(){return S?!0:!(r.unstable_now()-K<X)}function Z(){if(S=!1,P){var M=r.unstable_now();K=M;var U=!0;try{t:{_=!1,x&&(x=!1,T(j),j=-1),w=!0;var J=v;try{e:{for(k(M),m=e(d);m!==null&&!(m.expirationTime>M&&et());){var vt=m.callback;if(typeof vt=="function"){m.callback=null,v=m.priorityLevel;var yt=vt(m.expirationTime<=M);if(M=r.unstable_now(),typeof yt=="function"){m.callback=yt,k(M),U=!0;break e}m===e(d)&&i(d),k(M)}else i(d);m=e(d)}if(m!==null)U=!0;else{var D=e(f);D!==null&&ot(L,D.startTime-M),U=!1}}break t}finally{m=null,v=J,w=!1}U=void 0}}finally{U?ct():P=!1}}}var ct;if(typeof R=="function")ct=function(){R(Z)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,q=St.port2;St.port1.onmessage=Z,ct=function(){q.postMessage(null)}}else ct=function(){E(Z,0)};function ot(M,U){j=E(function(){M(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(M){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var J=v;v=U;try{return M()}finally{v=J}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(M,U){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var J=v;v=M;try{return U()}finally{v=J}},r.unstable_scheduleCallback=function(M,U,J){var vt=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?vt+J:vt):J=vt,M){case 1:var yt=-1;break;case 2:yt=250;break;case 5:yt=1073741823;break;case 4:yt=1e4;break;default:yt=5e3}return yt=J+yt,M={id:g++,callback:U,priorityLevel:M,startTime:J,expirationTime:yt,sortIndex:-1},J>vt?(M.sortIndex=J,t(f,M),e(d)===null&&M===e(f)&&(x?(T(j),j=-1):x=!0,ot(L,J-vt))):(M.sortIndex=yt,t(d,M),_||w||(_=!0,P||(P=!0,ct()))),M},r.unstable_shouldYield=et,r.unstable_wrapCallback=function(M){var U=v;return function(){var J=v;v=U;try{return M.apply(this,arguments)}finally{v=J}}}})(Yd)),Yd}var Db;function RS(){return Db||(Db=1,$d.exports=CS()),$d.exports}var Xd={exports:{}},He={};var Nb;function DS(){if(Nb)return He;Nb=1;var r=Hf();function t(d){var f="https://react.dev/errors/"+d;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var i={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,f,g){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:m==null?null:""+m,children:d,containerInfo:f,implementation:g}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(d,f){if(d==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return He.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,He.createPortal=function(d,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return l(d,f,null,g)},He.flushSync=function(d){var f=c.T,g=i.p;try{if(c.T=null,i.p=2,d)return d()}finally{c.T=f,i.p=g,i.d.f()}},He.preconnect=function(d,f){typeof d=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(d,f))},He.prefetchDNS=function(d){typeof d=="string"&&i.d.D(d)},He.preinit=function(d,f){if(typeof d=="string"&&f&&typeof f.as=="string"){var g=f.as,m=h(g,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?i.d.S(d,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:m,integrity:v,fetchPriority:w}):g==="script"&&i.d.X(d,{crossOrigin:m,integrity:v,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},He.preinitModule=function(d,f){if(typeof d=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=h(f.as,f.crossOrigin);i.d.M(d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(d)},He.preload=function(d,f){if(typeof d=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,m=h(g,f.crossOrigin);i.d.L(d,g,{crossOrigin:m,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},He.preloadModule=function(d,f){if(typeof d=="string")if(f){var g=h(f.as,f.crossOrigin);i.d.m(d,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(d)},He.requestFormReset=function(d){i.d.r(d)},He.unstable_batchedUpdates=function(d,f){return d(f)},He.useFormState=function(d,f,g){return c.H.useFormState(d,f,g)},He.useFormStatus=function(){return c.H.useHostTransitionStatus()},He.version="19.2.4",He}var kb;function NS(){if(kb)return Xd.exports;kb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Xd.exports=DS(),Xd.exports}var Mb;function kS(){if(Mb)return Co;Mb=1;var r=RS(),t=Hf(),e=NS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var p=o.return;if(p===null)break;var y=p.alternate;if(y===null){if(u=p.return,u!==null){o=u;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===o)return d(p),n;if(y===u)return d(p),s;y=y.sibling}throw Error(i(188))}if(o.return!==u.return)o=p,u=y;else{for(var A=!1,C=p.child;C;){if(C===o){A=!0,o=p,u=y;break}if(C===u){A=!0,u=p,o=y;break}C=C.sibling}if(!A){for(C=y.child;C;){if(C===o){A=!0,o=y,u=p;break}if(C===u){A=!0,u=y,o=p;break}C=C.sibling}if(!A)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var m=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),R=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),et=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ct(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var St=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===St?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList";case K:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case _:return"Portal";case R:return n.displayName||"Context";case T:return(n._context.displayName||"Context")+".Consumer";case k:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case j:return s=n.displayName||null,s!==null?s:q(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return q(n(s))}catch{}}return null}var ot=Array.isArray,M=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},vt=[],yt=-1;function D(n){return{current:n}}function V(n){0>yt||(n.current=vt[yt],vt[yt]=null,yt--)}function Q(n,s){yt++,vt[yt]=n.current,n.current=s}var it=D(null),dt=D(null),gt=D(null),ft=D(null);function ie(n,s){switch(Q(gt,s),Q(dt,n),Q(it,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?qy(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=qy(s),n=$y(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(it),Q(it,n)}function Pt(){V(it),V(dt),V(gt)}function $n(n){n.memoizedState!==null&&Q(ft,n);var s=it.current,o=$y(s,n.type);s!==o&&(Q(dt,n),Q(it,o))}function Bn(n){dt.current===n&&(V(it),V(dt)),ft.current===n&&(V(ft),xo._currentValue=J)}var fi,ga;function Ve(n){if(fi===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);fi=s&&s[1]||"",ga=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fi+n+ga}var Ki=!1;function Qi(n,s){if(!n||Ki)return"";Ki=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(G){var H=G}Reflect.construct(n,[],W)}else{try{W.call()}catch(G){H=G}n.call(W.prototype)}}else{try{throw Error()}catch(G){H=G}(W=n())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(G){if(G&&H&&typeof G.stack=="string")return[G.stack,H.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=u.DetermineComponentFrameRoot(),A=y[0],C=y[1];if(A&&C){var N=A.split(`
`),z=C.split(`
`);for(p=u=0;u<N.length&&!N[u].includes("DetermineComponentFrameRoot");)u++;for(;p<z.length&&!z[p].includes("DetermineComponentFrameRoot");)p++;if(u===N.length||p===z.length)for(u=N.length-1,p=z.length-1;1<=u&&0<=p&&N[u]!==z[p];)p--;for(;1<=u&&0<=p;u--,p--)if(N[u]!==z[p]){if(u!==1||p!==1)do if(u--,p--,0>p||N[u]!==z[p]){var $=`
`+N[u].replace(" at new "," at ");return n.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",n.displayName)),$}while(1<=u&&0<=p);break}}}finally{Ki=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Ve(o):""}function Ue(n,s){switch(n.tag){case 26:case 27:case 5:return Ve(n.type);case 16:return Ve("Lazy");case 13:return n.child!==s&&s!==null?Ve("Suspense Fallback"):Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 15:return Qi(n.type,!1);case 11:return Qi(n.type.render,!1);case 1:return Qi(n.type,!0);case 31:return Ve("Activity");default:return""}}function yl(n){try{var s="",o=null;do s+=Ue(n,o),o=n,n=n.return;while(n);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var kr=Object.prototype.hasOwnProperty,Mr=r.unstable_scheduleCallback,Lr=r.unstable_cancelCallback,Ls=r.unstable_shouldYield,Ru=r.unstable_requestPaint,Fe=r.unstable_now,kp=r.unstable_getCurrentPriorityLevel,ma=r.unstable_ImmediatePriority,bl=r.unstable_UserBlockingPriority,ya=r.unstable_NormalPriority,Or=r.unstable_LowPriority,Yn=r.unstable_IdlePriority,Os=r.log,vl=r.unstable_setDisableYieldValue,Zi=null,qe=null;function Xn(n){if(typeof Os=="function"&&vl(n),qe&&typeof qe.setStrictMode=="function")try{qe.setStrictMode(Zi,n)}catch{}}var $e=Math.clz32?Math.clz32:ku,Du=Math.log,Nu=Math.LN2;function ku(n){return n>>>=0,n===0?32:31-(Du(n)/Nu|0)|0}var ba=256,va=262144,wa=4194304;function pi(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Aa(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var p=0,y=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var C=u&134217727;return C!==0?(u=C&~y,u!==0?p=pi(u):(A&=C,A!==0?p=pi(A):o||(o=C&~n,o!==0&&(p=pi(o))))):(C=u&~y,C!==0?p=pi(C):A!==0?p=pi(A):o||(o=u&~n,o!==0&&(p=pi(o)))),p===0?0:s!==0&&s!==p&&(s&y)===0&&(y=p&-p,o=s&-s,y>=o||y===32&&(o&4194048)!==0)?s:p}function Is(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Mu(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wl(){var n=wa;return wa<<=1,(wa&62914560)===0&&(wa=4194304),n}function Ir(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Ps(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function tt(n,s,o,u,p,y){var A=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var C=n.entanglements,N=n.expirationTimes,z=n.hiddenUpdates;for(o=A&~o;0<o;){var $=31-$e(o),W=1<<$;C[$]=0,N[$]=-1;var H=z[$];if(H!==null)for(z[$]=null,$=0;$<H.length;$++){var G=H[$];G!==null&&(G.lane&=-536870913)}o&=~W}u!==0&&nt(n,u,0),y!==0&&p===0&&n.tag!==0&&(n.suspendedLanes|=y&~(A&~s))}function nt(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-$e(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&261930}function Dt(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-$e(o),p=1<<u;p&s|n[u]&s&&(n[u]|=s),o&=~p}}function Tt(n,s){var o=s&-s;return o=(o&42)!==0?1:Te(o),(o&(n.suspendedLanes|s))!==0?0:o}function Te(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Zt(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function se(){var n=U.p;return n!==0?n:(n=window.event,n===void 0?32:gb(n.type))}function Lt(n,s){var o=U.p;try{return U.p=n,s()}finally{U.p=o}}var Jt=Math.random().toString(36).slice(2),te="__reactFiber$"+Jt,ze="__reactProps$"+Jt,xa="__reactContainer$"+Jt,Lu="__reactEvents$"+Jt,fA="__reactListeners$"+Jt,pA="__reactHandles$"+Jt,Mp="__reactResources$"+Jt,Pr="__reactMarker$"+Jt;function Ou(n){delete n[te],delete n[ze],delete n[Lu],delete n[fA],delete n[pA]}function Sa(n){var s=n[te];if(s)return s;for(var o=n.parentNode;o;){if(s=o[xa]||o[te]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=Jy(n);n!==null;){if(o=n[te])return o;n=Jy(n)}return s}n=o,o=n.parentNode}return null}function _a(n){if(n=n[te]||n[xa]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function jr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function Ea(n){var s=n[Mp];return s||(s=n[Mp]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function De(n){n[Pr]=!0}var Lp=new Set,Op={};function js(n,s){Ta(n,s),Ta(n+"Capture",s)}function Ta(n,s){for(Op[n]=s,n=0;n<s.length;n++)Lp.add(s[n])}var gA=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ip={},Pp={};function mA(n){return kr.call(Pp,n)?!0:kr.call(Ip,n)?!1:gA.test(n)?Pp[n]=!0:(Ip[n]=!0,!1)}function Al(n,s,o){if(mA(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function xl(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function gi(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}function Sn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function jp(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yA(n,s,o){var u=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var p=u.get,y=u.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return p.call(this)},set:function(A){o=""+A,y.call(this,A)}}),Object.defineProperty(n,s,{enumerable:u.enumerable}),{getValue:function(){return o},setValue:function(A){o=""+A},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Iu(n){if(!n._valueTracker){var s=jp(n)?"checked":"value";n._valueTracker=yA(n,s,""+n[s])}}function Bp(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=jp(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Sl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var bA=/[\n"\\]/g;function _n(n){return n.replace(bA,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pu(n,s,o,u,p,y,A,C){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),s!=null?A==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+Sn(s)):n.value!==""+Sn(s)&&(n.value=""+Sn(s)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),s!=null?ju(n,A,Sn(s)):o!=null?ju(n,A,Sn(o)):u!=null&&n.removeAttribute("value"),p==null&&y!=null&&(n.defaultChecked=!!y),p!=null&&(n.checked=p&&typeof p!="function"&&typeof p!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?n.name=""+Sn(C):n.removeAttribute("name")}function Up(n,s,o,u,p,y,A,C){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(n.type=y),s!=null||o!=null){if(!(y!=="submit"&&y!=="reset"||s!=null)){Iu(n);return}o=o!=null?""+Sn(o):"",s=s!=null?""+Sn(s):o,C||s===n.value||(n.value=s),n.defaultValue=s}u=u??p,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=C?n.checked:!!u,n.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),Iu(n)}function ju(n,s,o){s==="number"&&Sl(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Ca(n,s,o,u){if(n=n.options,s){s={};for(var p=0;p<o.length;p++)s["$"+o[p]]=!0;for(o=0;o<n.length;o++)p=s.hasOwnProperty("$"+n[o].value),n[o].selected!==p&&(n[o].selected=p),p&&u&&(n[o].defaultSelected=!0)}else{for(o=""+Sn(o),s=null,p=0;p<n.length;p++){if(n[p].value===o){n[p].selected=!0,u&&(n[p].defaultSelected=!0);return}s!==null||n[p].disabled||(s=n[p])}s!==null&&(s.selected=!0)}}function Fp(n,s,o){if(s!=null&&(s=""+Sn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+Sn(o):""}function zp(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(ot(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=Sn(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u),Iu(n)}function Ra(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var vA=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hp(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||vA.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Gp(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var p in s)u=s[p],s.hasOwnProperty(p)&&o[p]!==u&&Hp(n,p,u)}else for(var y in s)s.hasOwnProperty(y)&&Hp(n,y,s[y])}function Bu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wA=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),AA=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _l(n){return AA.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function mi(){}var Uu=null;function Fu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Da=null,Na=null;function Vp(n){var s=_a(n);if(s&&(n=s.stateNode)){var o=n[ze]||null;t:switch(n=s.stateNode,s.type){case"input":if(Pu(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+_n(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var p=u[ze]||null;if(!p)throw Error(i(90));Pu(u,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Bp(u)}break t;case"textarea":Fp(n,o.value,o.defaultValue);break t;case"select":s=o.value,s!=null&&Ca(n,!!o.multiple,s,!1)}}}var zu=!1;function qp(n,s,o){if(zu)return n(s,o);zu=!0;try{var u=n(s);return u}finally{if(zu=!1,(Da!==null||Na!==null)&&(hc(),Da&&(s=Da,n=Na,Na=Da=null,Vp(s),n)))for(s=0;s<n.length;s++)Vp(n[s])}}function Br(n,s){var o=n.stateNode;if(o===null)return null;var u=o[ze]||null;if(u===null)return null;o=u[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break t;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var yi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hu=!1;if(yi)try{var Ur={};Object.defineProperty(Ur,"passive",{get:function(){Hu=!0}}),window.addEventListener("test",Ur,Ur),window.removeEventListener("test",Ur,Ur)}catch{Hu=!1}var Ji=null,Gu=null,El=null;function $p(){if(El)return El;var n,s=Gu,o=s.length,u,p="value"in Ji?Ji.value:Ji.textContent,y=p.length;for(n=0;n<o&&s[n]===p[n];n++);var A=o-n;for(u=1;u<=A&&s[o-u]===p[y-u];u++);return El=p.slice(n,1<u?1-u:void 0)}function Tl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Cl(){return!0}function Yp(){return!1}function Ze(n){function s(o,u,p,y,A){this._reactName=o,this._targetInst=p,this.type=u,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var C in n)n.hasOwnProperty(C)&&(o=n[C],this[C]=o?o(y):y[C]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Cl:Yp,this.isPropagationStopped=Yp,this}return m(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Cl)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Cl)},persist:function(){},isPersistent:Cl}),s}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rl=Ze(Bs),Fr=m({},Bs,{view:0,detail:0}),xA=Ze(Fr),Vu,qu,zr,Dl=m({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yu,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zr&&(zr&&n.type==="mousemove"?(Vu=n.screenX-zr.screenX,qu=n.screenY-zr.screenY):qu=Vu=0,zr=n),Vu)},movementY:function(n){return"movementY"in n?n.movementY:qu}}),Xp=Ze(Dl),SA=m({},Dl,{dataTransfer:0}),_A=Ze(SA),EA=m({},Fr,{relatedTarget:0}),$u=Ze(EA),TA=m({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),CA=Ze(TA),RA=m({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),DA=Ze(RA),NA=m({},Bs,{data:0}),Wp=Ze(NA),kA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OA(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=LA[n])?!!s[n]:!1}function Yu(){return OA}var IA=m({},Fr,{key:function(n){if(n.key){var s=kA[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Tl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?MA[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yu,charCode:function(n){return n.type==="keypress"?Tl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Tl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),PA=Ze(IA),jA=m({},Dl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kp=Ze(jA),BA=m({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yu}),UA=Ze(BA),FA=m({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),zA=Ze(FA),HA=m({},Dl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),GA=Ze(HA),VA=m({},Bs,{newState:0,oldState:0}),qA=Ze(VA),$A=[9,13,27,32],Xu=yi&&"CompositionEvent"in window,Hr=null;yi&&"documentMode"in document&&(Hr=document.documentMode);var YA=yi&&"TextEvent"in window&&!Hr,Qp=yi&&(!Xu||Hr&&8<Hr&&11>=Hr),Zp=" ",Jp=!1;function tg(n,s){switch(n){case"keyup":return $A.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ka=!1;function XA(n,s){switch(n){case"compositionend":return eg(s);case"keypress":return s.which!==32?null:(Jp=!0,Zp);case"textInput":return n=s.data,n===Zp&&Jp?null:n;default:return null}}function WA(n,s){if(ka)return n==="compositionend"||!Xu&&tg(n,s)?(n=$p(),El=Gu=Ji=null,ka=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qp&&s.locale!=="ko"?null:s.data;default:return null}}var KA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ng(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!KA[n.type]:s==="textarea"}function ig(n,s,o,u){Da?Na?Na.push(u):Na=[u]:Da=u,s=bc(s,"onChange"),0<s.length&&(o=new Rl("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Gr=null,Vr=null;function QA(n){Uy(n,0)}function Nl(n){var s=jr(n);if(Bp(s))return n}function sg(n,s){if(n==="change")return s}var ag=!1;if(yi){var Wu;if(yi){var Ku="oninput"in document;if(!Ku){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),Ku=typeof rg.oninput=="function"}Wu=Ku}else Wu=!1;ag=Wu&&(!document.documentMode||9<document.documentMode)}function og(){Gr&&(Gr.detachEvent("onpropertychange",lg),Vr=Gr=null)}function lg(n){if(n.propertyName==="value"&&Nl(Vr)){var s=[];ig(s,Vr,n,Fu(n)),qp(QA,s)}}function ZA(n,s,o){n==="focusin"?(og(),Gr=s,Vr=o,Gr.attachEvent("onpropertychange",lg)):n==="focusout"&&og()}function JA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Nl(Vr)}function tx(n,s){if(n==="click")return Nl(s)}function ex(n,s){if(n==="input"||n==="change")return Nl(s)}function nx(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var dn=typeof Object.is=="function"?Object.is:nx;function qr(n,s){if(dn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var p=o[u];if(!kr.call(s,p)||!dn(n[p],s[p]))return!1}return!0}function cg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ug(n,s){var o=cg(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=cg(o)}}function hg(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?hg(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function dg(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Sl(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Sl(n.document)}return s}function Qu(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ix=yi&&"documentMode"in document&&11>=document.documentMode,Ma=null,Zu=null,$r=null,Ju=!1;function fg(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ju||Ma==null||Ma!==Sl(u)||(u=Ma,"selectionStart"in u&&Qu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),$r&&qr($r,u)||($r=u,u=bc(Zu,"onSelect"),0<u.length&&(s=new Rl("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Ma)))}function Us(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var La={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},th={},pg={};yi&&(pg=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Fs(n){if(th[n])return th[n];if(!La[n])return n;var s=La[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in pg)return th[n]=s[o];return n}var gg=Fs("animationend"),mg=Fs("animationiteration"),yg=Fs("animationstart"),sx=Fs("transitionrun"),ax=Fs("transitionstart"),rx=Fs("transitioncancel"),bg=Fs("transitionend"),vg=new Map,eh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");eh.push("scrollEnd");function Un(n,s){vg.set(n,s),js(s,[n])}var kl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},En=[],Oa=0,nh=0;function Ml(){for(var n=Oa,s=nh=Oa=0;s<n;){var o=En[s];En[s++]=null;var u=En[s];En[s++]=null;var p=En[s];En[s++]=null;var y=En[s];if(En[s++]=null,u!==null&&p!==null){var A=u.pending;A===null?p.next=p:(p.next=A.next,A.next=p),u.pending=p}y!==0&&wg(o,p,y)}}function Ll(n,s,o,u){En[Oa++]=n,En[Oa++]=s,En[Oa++]=o,En[Oa++]=u,nh|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function ih(n,s,o,u){return Ll(n,s,o,u),Ol(n)}function zs(n,s){return Ll(n,null,null,s),Ol(n)}function wg(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var p=!1,y=n.return;y!==null;)y.childLanes|=o,u=y.alternate,u!==null&&(u.childLanes|=o),y.tag===22&&(n=y.stateNode,n===null||n._visibility&1||(p=!0)),n=y,y=y.return;return n.tag===3?(y=n.stateNode,p&&s!==null&&(p=31-$e(o),n=y.hiddenUpdates,u=n[p],u===null?n[p]=[s]:u.push(s),s.lane=o|536870912),y):null}function Ol(n){if(50<go)throw go=0,dd=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ia={};function ox(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(n,s,o,u){return new ox(n,s,o,u)}function sh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function bi(n,s){var o=n.alternate;return o===null?(o=fn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Ag(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Il(n,s,o,u,p,y){var A=0;if(u=n,typeof n=="function")sh(n)&&(A=1);else if(typeof n=="string")A=dS(n,o,it.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case K:return n=fn(31,o,s,p),n.elementType=K,n.lanes=y,n;case x:return Hs(o.children,p,y,s);case S:A=8,p|=24;break;case E:return n=fn(12,o,s,p|2),n.elementType=E,n.lanes=y,n;case L:return n=fn(13,o,s,p),n.elementType=L,n.lanes=y,n;case P:return n=fn(19,o,s,p),n.elementType=P,n.lanes=y,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:A=10;break t;case T:A=9;break t;case k:A=11;break t;case j:A=14;break t;case X:A=16,u=null;break t}A=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=fn(A,o,s,p),s.elementType=n,s.type=u,s.lanes=y,s}function Hs(n,s,o,u){return n=fn(7,n,u,s),n.lanes=o,n}function ah(n,s,o){return n=fn(6,n,null,s),n.lanes=o,n}function xg(n){var s=fn(18,null,null,0);return s.stateNode=n,s}function rh(n,s,o){return s=fn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Sg=new WeakMap;function Tn(n,s){if(typeof n=="object"&&n!==null){var o=Sg.get(n);return o!==void 0?o:(s={value:n,source:s,stack:yl(s)},Sg.set(n,s),s)}return{value:n,source:s,stack:yl(s)}}var Pa=[],ja=0,Pl=null,Yr=0,Cn=[],Rn=0,ts=null,Wn=1,Kn="";function vi(n,s){Pa[ja++]=Yr,Pa[ja++]=Pl,Pl=n,Yr=s}function _g(n,s,o){Cn[Rn++]=Wn,Cn[Rn++]=Kn,Cn[Rn++]=ts,ts=n;var u=Wn;n=Kn;var p=32-$e(u)-1;u&=~(1<<p),o+=1;var y=32-$e(s)+p;if(30<y){var A=p-p%5;y=(u&(1<<A)-1).toString(32),u>>=A,p-=A,Wn=1<<32-$e(s)+p|o<<p|u,Kn=y+n}else Wn=1<<y|o<<p|u,Kn=n}function oh(n){n.return!==null&&(vi(n,1),_g(n,1,0))}function lh(n){for(;n===Pl;)Pl=Pa[--ja],Pa[ja]=null,Yr=Pa[--ja],Pa[ja]=null;for(;n===ts;)ts=Cn[--Rn],Cn[Rn]=null,Kn=Cn[--Rn],Cn[Rn]=null,Wn=Cn[--Rn],Cn[Rn]=null}function Eg(n,s){Cn[Rn++]=Wn,Cn[Rn++]=Kn,Cn[Rn++]=ts,Wn=s.id,Kn=s.overflow,ts=n}var Oe=null,ee=null,Ot=!1,es=null,Dn=!1,ch=Error(i(519));function ns(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xr(Tn(s,n)),ch}function Tg(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[te]=n,s[ze]=u,o){case"dialog":Rt("cancel",s),Rt("close",s);break;case"iframe":case"object":case"embed":Rt("load",s);break;case"video":case"audio":for(o=0;o<yo.length;o++)Rt(yo[o],s);break;case"source":Rt("error",s);break;case"img":case"image":case"link":Rt("error",s),Rt("load",s);break;case"details":Rt("toggle",s);break;case"input":Rt("invalid",s),Up(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Rt("invalid",s);break;case"textarea":Rt("invalid",s),zp(s,u.value,u.defaultValue,u.children)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||Gy(s.textContent,o)?(u.popover!=null&&(Rt("beforetoggle",s),Rt("toggle",s)),u.onScroll!=null&&Rt("scroll",s),u.onScrollEnd!=null&&Rt("scrollend",s),u.onClick!=null&&(s.onclick=mi),s=!0):s=!1,s||ns(n,!0)}function Cg(n){for(Oe=n.return;Oe;)switch(Oe.tag){case 5:case 31:case 13:Dn=!1;return;case 27:case 3:Dn=!0;return;default:Oe=Oe.return}}function Ba(n){if(n!==Oe)return!1;if(!Ot)return Cg(n),Ot=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Cd(n.type,n.memoizedProps)),o=!o),o&&ee&&ns(n),Cg(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ee=Zy(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));ee=Zy(n)}else s===27?(s=ee,ms(n.type)?(n=Md,Md=null,ee=n):ee=s):ee=Oe?kn(n.stateNode.nextSibling):null;return!0}function Gs(){ee=Oe=null,Ot=!1}function uh(){var n=es;return n!==null&&(nn===null?nn=n:nn.push.apply(nn,n),es=null),n}function Xr(n){es===null?es=[n]:es.push(n)}var hh=D(null),Vs=null,wi=null;function is(n,s,o){Q(hh,s._currentValue),s._currentValue=o}function Ai(n){n._currentValue=hh.current,V(hh)}function dh(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function fh(n,s,o,u){var p=n.child;for(p!==null&&(p.return=n);p!==null;){var y=p.dependencies;if(y!==null){var A=p.child;y=y.firstContext;t:for(;y!==null;){var C=y;y=p;for(var N=0;N<s.length;N++)if(C.context===s[N]){y.lanes|=o,C=y.alternate,C!==null&&(C.lanes|=o),dh(y.return,o,n),u||(A=null);break t}y=C.next}}else if(p.tag===18){if(A=p.return,A===null)throw Error(i(341));A.lanes|=o,y=A.alternate,y!==null&&(y.lanes|=o),dh(A,o,n),A=null}else A=p.child;if(A!==null)A.return=p;else for(A=p;A!==null;){if(A===n){A=null;break}if(p=A.sibling,p!==null){p.return=A.return,A=p;break}A=A.return}p=A}}function Ua(n,s,o,u){n=null;for(var p=s,y=!1;p!==null;){if(!y){if((p.flags&524288)!==0)y=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var A=p.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var C=p.type;dn(p.pendingProps.value,A.value)||(n!==null?n.push(C):n=[C])}}else if(p===ft.current){if(A=p.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(n!==null?n.push(xo):n=[xo])}p=p.return}n!==null&&fh(s,n,o,u),s.flags|=262144}function jl(n){for(n=n.firstContext;n!==null;){if(!dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function qs(n){Vs=n,wi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ie(n){return Rg(Vs,n)}function Bl(n,s){return Vs===null&&qs(n),Rg(n,s)}function Rg(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},wi===null){if(n===null)throw Error(i(308));wi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else wi=wi.next=s;return o}var lx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},cx=r.unstable_scheduleCallback,ux=r.unstable_NormalPriority,ve={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ph(){return{controller:new lx,data:new Map,refCount:0}}function Wr(n){n.refCount--,n.refCount===0&&cx(ux,function(){n.controller.abort()})}var Kr=null,gh=0,Fa=0,za=null;function hx(n,s){if(Kr===null){var o=Kr=[];gh=0,Fa=bd(),za={status:"pending",value:void 0,then:function(u){o.push(u)}}}return gh++,s.then(Dg,Dg),s}function Dg(){if(--gh===0&&Kr!==null){za!==null&&(za.status="fulfilled");var n=Kr;Kr=null,Fa=0,za=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function dx(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(p){o.push(p)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var p=0;p<o.length;p++)(0,o[p])(s)},function(p){for(u.status="rejected",u.reason=p,p=0;p<o.length;p++)(0,o[p])(void 0)}),u}var Ng=M.S;M.S=function(n,s){fy=Fe(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hx(n,s),Ng!==null&&Ng(n,s)};var $s=D(null);function mh(){var n=$s.current;return n!==null?n:Wt.pooledCache}function Ul(n,s){s===null?Q($s,$s.current):Q($s,s.pool)}function kg(){var n=mh();return n===null?null:{parent:ve._currentValue,pool:n}}var Ha=Error(i(460)),yh=Error(i(474)),Fl=Error(i(542)),zl={then:function(){}};function Mg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Lg(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(mi,mi),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ig(n),n;default:if(typeof s.status=="string")s.then(mi,mi);else{if(n=Wt,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=u}},function(u){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,Ig(n),n}throw Xs=s,Ha}}function Ys(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Xs=o,Ha):o}}var Xs=null;function Og(){if(Xs===null)throw Error(i(459));var n=Xs;return Xs=null,n}function Ig(n){if(n===Ha||n===Fl)throw Error(i(483))}var Ga=null,Qr=0;function Hl(n){var s=Qr;return Qr+=1,Ga===null&&(Ga=[]),Lg(Ga,n,s)}function Zr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Gl(n,s){throw s.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function Pg(n){function s(B,O){if(n){var F=B.deletions;F===null?(B.deletions=[O],B.flags|=16):F.push(O)}}function o(B,O){if(!n)return null;for(;O!==null;)s(B,O),O=O.sibling;return null}function u(B){for(var O=new Map;B!==null;)B.key!==null?O.set(B.key,B):O.set(B.index,B),B=B.sibling;return O}function p(B,O){return B=bi(B,O),B.index=0,B.sibling=null,B}function y(B,O,F){return B.index=F,n?(F=B.alternate,F!==null?(F=F.index,F<O?(B.flags|=67108866,O):F):(B.flags|=67108866,O)):(B.flags|=1048576,O)}function A(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function C(B,O,F,Y){return O===null||O.tag!==6?(O=ah(F,B.mode,Y),O.return=B,O):(O=p(O,F),O.return=B,O)}function N(B,O,F,Y){var ut=F.type;return ut===x?$(B,O,F.props.children,Y,F.key):O!==null&&(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===X&&Ys(ut)===O.type)?(O=p(O,F.props),Zr(O,F),O.return=B,O):(O=Il(F.type,F.key,F.props,null,B.mode,Y),Zr(O,F),O.return=B,O)}function z(B,O,F,Y){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=rh(F,B.mode,Y),O.return=B,O):(O=p(O,F.children||[]),O.return=B,O)}function $(B,O,F,Y,ut){return O===null||O.tag!==7?(O=Hs(F,B.mode,Y,ut),O.return=B,O):(O=p(O,F),O.return=B,O)}function W(B,O,F){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=ah(""+O,B.mode,F),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case w:return F=Il(O.type,O.key,O.props,null,B.mode,F),Zr(F,O),F.return=B,F;case _:return O=rh(O,B.mode,F),O.return=B,O;case X:return O=Ys(O),W(B,O,F)}if(ot(O)||ct(O))return O=Hs(O,B.mode,F,null),O.return=B,O;if(typeof O.then=="function")return W(B,Hl(O),F);if(O.$$typeof===R)return W(B,Bl(B,O),F);Gl(B,O)}return null}function H(B,O,F,Y){var ut=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return ut!==null?null:C(B,O,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case w:return F.key===ut?N(B,O,F,Y):null;case _:return F.key===ut?z(B,O,F,Y):null;case X:return F=Ys(F),H(B,O,F,Y)}if(ot(F)||ct(F))return ut!==null?null:$(B,O,F,Y,null);if(typeof F.then=="function")return H(B,O,Hl(F),Y);if(F.$$typeof===R)return H(B,O,Bl(B,F),Y);Gl(B,F)}return null}function G(B,O,F,Y,ut){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return B=B.get(F)||null,C(O,B,""+Y,ut);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case w:return B=B.get(Y.key===null?F:Y.key)||null,N(O,B,Y,ut);case _:return B=B.get(Y.key===null?F:Y.key)||null,z(O,B,Y,ut);case X:return Y=Ys(Y),G(B,O,F,Y,ut)}if(ot(Y)||ct(Y))return B=B.get(F)||null,$(O,B,Y,ut,null);if(typeof Y.then=="function")return G(B,O,F,Hl(Y),ut);if(Y.$$typeof===R)return G(B,O,F,Bl(O,Y),ut);Gl(O,Y)}return null}function rt(B,O,F,Y){for(var ut=null,jt=null,lt=O,Et=O=0,kt=null;lt!==null&&Et<F.length;Et++){lt.index>Et?(kt=lt,lt=null):kt=lt.sibling;var Bt=H(B,lt,F[Et],Y);if(Bt===null){lt===null&&(lt=kt);break}n&&lt&&Bt.alternate===null&&s(B,lt),O=y(Bt,O,Et),jt===null?ut=Bt:jt.sibling=Bt,jt=Bt,lt=kt}if(Et===F.length)return o(B,lt),Ot&&vi(B,Et),ut;if(lt===null){for(;Et<F.length;Et++)lt=W(B,F[Et],Y),lt!==null&&(O=y(lt,O,Et),jt===null?ut=lt:jt.sibling=lt,jt=lt);return Ot&&vi(B,Et),ut}for(lt=u(lt);Et<F.length;Et++)kt=G(lt,B,Et,F[Et],Y),kt!==null&&(n&&kt.alternate!==null&&lt.delete(kt.key===null?Et:kt.key),O=y(kt,O,Et),jt===null?ut=kt:jt.sibling=kt,jt=kt);return n&&lt.forEach(function(As){return s(B,As)}),Ot&&vi(B,Et),ut}function mt(B,O,F,Y){if(F==null)throw Error(i(151));for(var ut=null,jt=null,lt=O,Et=O=0,kt=null,Bt=F.next();lt!==null&&!Bt.done;Et++,Bt=F.next()){lt.index>Et?(kt=lt,lt=null):kt=lt.sibling;var As=H(B,lt,Bt.value,Y);if(As===null){lt===null&&(lt=kt);break}n&&lt&&As.alternate===null&&s(B,lt),O=y(As,O,Et),jt===null?ut=As:jt.sibling=As,jt=As,lt=kt}if(Bt.done)return o(B,lt),Ot&&vi(B,Et),ut;if(lt===null){for(;!Bt.done;Et++,Bt=F.next())Bt=W(B,Bt.value,Y),Bt!==null&&(O=y(Bt,O,Et),jt===null?ut=Bt:jt.sibling=Bt,jt=Bt);return Ot&&vi(B,Et),ut}for(lt=u(lt);!Bt.done;Et++,Bt=F.next())Bt=G(lt,B,Et,Bt.value,Y),Bt!==null&&(n&&Bt.alternate!==null&&lt.delete(Bt.key===null?Et:Bt.key),O=y(Bt,O,Et),jt===null?ut=Bt:jt.sibling=Bt,jt=Bt);return n&&lt.forEach(function(SS){return s(B,SS)}),Ot&&vi(B,Et),ut}function Yt(B,O,F,Y){if(typeof F=="object"&&F!==null&&F.type===x&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case w:t:{for(var ut=F.key;O!==null;){if(O.key===ut){if(ut=F.type,ut===x){if(O.tag===7){o(B,O.sibling),Y=p(O,F.props.children),Y.return=B,B=Y;break t}}else if(O.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===X&&Ys(ut)===O.type){o(B,O.sibling),Y=p(O,F.props),Zr(Y,F),Y.return=B,B=Y;break t}o(B,O);break}else s(B,O);O=O.sibling}F.type===x?(Y=Hs(F.props.children,B.mode,Y,F.key),Y.return=B,B=Y):(Y=Il(F.type,F.key,F.props,null,B.mode,Y),Zr(Y,F),Y.return=B,B=Y)}return A(B);case _:t:{for(ut=F.key;O!==null;){if(O.key===ut)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){o(B,O.sibling),Y=p(O,F.children||[]),Y.return=B,B=Y;break t}else{o(B,O);break}else s(B,O);O=O.sibling}Y=rh(F,B.mode,Y),Y.return=B,B=Y}return A(B);case X:return F=Ys(F),Yt(B,O,F,Y)}if(ot(F))return rt(B,O,F,Y);if(ct(F)){if(ut=ct(F),typeof ut!="function")throw Error(i(150));return F=ut.call(F),mt(B,O,F,Y)}if(typeof F.then=="function")return Yt(B,O,Hl(F),Y);if(F.$$typeof===R)return Yt(B,O,Bl(B,F),Y);Gl(B,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,O!==null&&O.tag===6?(o(B,O.sibling),Y=p(O,F),Y.return=B,B=Y):(o(B,O),Y=ah(F,B.mode,Y),Y.return=B,B=Y),A(B)):o(B,O)}return function(B,O,F,Y){try{Qr=0;var ut=Yt(B,O,F,Y);return Ga=null,ut}catch(lt){if(lt===Ha||lt===Fl)throw lt;var jt=fn(29,lt,null,B.mode);return jt.lanes=Y,jt.return=B,jt}}}var Ws=Pg(!0),jg=Pg(!1),ss=!1;function bh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vh(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function as(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function rs(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Ft&2)!==0){var p=u.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),u.pending=s,s=Ol(n),wg(n,null,o),s}return Ll(n,u,s,o),Ol(n)}function Jr(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dt(n,o)}}function wh(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var p=null,y=null;if(o=o.firstBaseUpdate,o!==null){do{var A={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};y===null?p=y=A:y=y.next=A,o=o.next}while(o!==null);y===null?p=y=s:y=y.next=s}else p=y=s;o={baseState:u.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Ah=!1;function to(){if(Ah){var n=za;if(n!==null)throw n}}function eo(n,s,o,u){Ah=!1;var p=n.updateQueue;ss=!1;var y=p.firstBaseUpdate,A=p.lastBaseUpdate,C=p.shared.pending;if(C!==null){p.shared.pending=null;var N=C,z=N.next;N.next=null,A===null?y=z:A.next=z,A=N;var $=n.alternate;$!==null&&($=$.updateQueue,C=$.lastBaseUpdate,C!==A&&(C===null?$.firstBaseUpdate=z:C.next=z,$.lastBaseUpdate=N))}if(y!==null){var W=p.baseState;A=0,$=z=N=null,C=y;do{var H=C.lane&-536870913,G=H!==C.lane;if(G?(Nt&H)===H:(u&H)===H){H!==0&&H===Fa&&(Ah=!0),$!==null&&($=$.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});t:{var rt=n,mt=C;H=s;var Yt=o;switch(mt.tag){case 1:if(rt=mt.payload,typeof rt=="function"){W=rt.call(Yt,W,H);break t}W=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=mt.payload,H=typeof rt=="function"?rt.call(Yt,W,H):rt,H==null)break t;W=m({},W,H);break t;case 2:ss=!0}}H=C.callback,H!==null&&(n.flags|=64,G&&(n.flags|=8192),G=p.callbacks,G===null?p.callbacks=[H]:G.push(H))}else G={lane:H,tag:C.tag,payload:C.payload,callback:C.callback,next:null},$===null?(z=$=G,N=W):$=$.next=G,A|=H;if(C=C.next,C===null){if(C=p.shared.pending,C===null)break;G=C,C=G.next,G.next=null,p.lastBaseUpdate=G,p.shared.pending=null}}while(!0);$===null&&(N=W),p.baseState=N,p.firstBaseUpdate=z,p.lastBaseUpdate=$,y===null&&(p.shared.lanes=0),hs|=A,n.lanes=A,n.memoizedState=W}}function Bg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Ug(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)Bg(o[n],s)}var Va=D(null),Vl=D(0);function Fg(n,s){n=Ni,Q(Vl,n),Q(Va,s),Ni=n|s.baseLanes}function xh(){Q(Vl,Ni),Q(Va,Va.current)}function Sh(){Ni=Vl.current,V(Va),V(Vl)}var pn=D(null),Nn=null;function os(n){var s=n.alternate;Q(ge,ge.current&1),Q(pn,n),Nn===null&&(s===null||Va.current!==null||s.memoizedState!==null)&&(Nn=n)}function _h(n){Q(ge,ge.current),Q(pn,n),Nn===null&&(Nn=n)}function zg(n){n.tag===22?(Q(ge,ge.current),Q(pn,n),Nn===null&&(Nn=n)):ls()}function ls(){Q(ge,ge.current),Q(pn,pn.current)}function gn(n){V(pn),Nn===n&&(Nn=null),V(ge)}var ge=D(0);function ql(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Nd(o)||kd(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var xi=0,_t=null,qt=null,we=null,$l=!1,qa=!1,Ks=!1,Yl=0,no=0,$a=null,fx=0;function fe(){throw Error(i(321))}function Eh(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!dn(n[o],s[o]))return!1;return!0}function Th(n,s,o,u,p,y){return xi=y,_t=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,M.H=n===null||n.memoizedState===null?_m:zh,Ks=!1,y=o(u,p),Ks=!1,qa&&(y=Gg(s,o,u,p)),Hg(n),y}function Hg(n){M.H=ao;var s=qt!==null&&qt.next!==null;if(xi=0,we=qt=_t=null,$l=!1,no=0,$a=null,s)throw Error(i(300));n===null||Ae||(n=n.dependencies,n!==null&&jl(n)&&(Ae=!0))}function Gg(n,s,o,u){_t=n;var p=0;do{if(qa&&($a=null),no=0,qa=!1,25<=p)throw Error(i(301));if(p+=1,we=qt=null,n.updateQueue!=null){var y=n.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}M.H=Em,y=s(o,u)}while(qa);return y}function px(){var n=M.H,s=n.useState()[0];return s=typeof s.then=="function"?io(s):s,n=n.useState()[0],(qt!==null?qt.memoizedState:null)!==n&&(_t.flags|=1024),s}function Ch(){var n=Yl!==0;return Yl=0,n}function Rh(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Dh(n){if($l){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$l=!1}xi=0,we=qt=_t=null,qa=!1,no=Yl=0,$a=null}function Ye(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return we===null?_t.memoizedState=we=n:we=we.next=n,we}function me(){if(qt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=qt.next;var s=we===null?_t.memoizedState:we.next;if(s!==null)we=s,qt=n;else{if(n===null)throw _t.alternate===null?Error(i(467)):Error(i(310));qt=n,n={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},we===null?_t.memoizedState=we=n:we=we.next=n}return we}function Xl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function io(n){var s=no;return no+=1,$a===null&&($a=[]),n=Lg($a,n,s),s=_t,(we===null?s.memoizedState:we.next)===null&&(s=s.alternate,M.H=s===null||s.memoizedState===null?_m:zh),n}function Wl(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return io(n);if(n.$$typeof===R)return Ie(n)}throw Error(i(438,String(n)))}function Nh(n){var s=null,o=_t.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=_t.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Xl(),_t.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=et;return s.index++,o}function Si(n,s){return typeof s=="function"?s(n):s}function Kl(n){var s=me();return kh(s,qt,n)}function kh(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var p=n.baseQueue,y=u.pending;if(y!==null){if(p!==null){var A=p.next;p.next=y.next,y.next=A}s.baseQueue=p=y,u.pending=null}if(y=n.baseState,p===null)n.memoizedState=y;else{s=p.next;var C=A=null,N=null,z=s,$=!1;do{var W=z.lane&-536870913;if(W!==z.lane?(Nt&W)===W:(xi&W)===W){var H=z.revertLane;if(H===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),W===Fa&&($=!0);else if((xi&H)===H){z=z.next,H===Fa&&($=!0);continue}else W={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(C=N=W,A=y):N=N.next=W,_t.lanes|=H,hs|=H;W=z.action,Ks&&o(y,W),y=z.hasEagerState?z.eagerState:o(y,W)}else H={lane:W,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},N===null?(C=N=H,A=y):N=N.next=H,_t.lanes|=W,hs|=W;z=z.next}while(z!==null&&z!==s);if(N===null?A=y:N.next=C,!dn(y,n.memoizedState)&&(Ae=!0,$&&(o=za,o!==null)))throw o;n.memoizedState=y,n.baseState=A,n.baseQueue=N,u.lastRenderedState=y}return p===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Mh(n){var s=me(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,p=o.pending,y=s.memoizedState;if(p!==null){o.pending=null;var A=p=p.next;do y=n(y,A.action),A=A.next;while(A!==p);dn(y,s.memoizedState)||(Ae=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),o.lastRenderedState=y}return[y,u]}function Vg(n,s,o){var u=_t,p=me(),y=Ot;if(y){if(o===void 0)throw Error(i(407));o=o()}else o=s();var A=!dn((qt||p).memoizedState,o);if(A&&(p.memoizedState=o,Ae=!0),p=p.queue,Ih(Yg.bind(null,u,p,n),[n]),p.getSnapshot!==s||A||we!==null&&we.memoizedState.tag&1){if(u.flags|=2048,Ya(9,{destroy:void 0},$g.bind(null,u,p,o,s),null),Wt===null)throw Error(i(349));y||(xi&127)!==0||qg(u,s,o)}return o}function qg(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=_t.updateQueue,s===null?(s=Xl(),_t.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function $g(n,s,o,u){s.value=o,s.getSnapshot=u,Xg(s)&&Wg(n)}function Yg(n,s,o){return o(function(){Xg(s)&&Wg(n)})}function Xg(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!dn(n,o)}catch{return!0}}function Wg(n){var s=zs(n,2);s!==null&&sn(s,n,2)}function Lh(n){var s=Ye();if(typeof n=="function"){var o=n;if(n=o(),Ks){Xn(!0);try{o()}finally{Xn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:n},s}function Kg(n,s,o,u){return n.baseState=o,kh(n,qt,typeof u=="function"?u:Si)}function gx(n,s,o,u,p){if(Jl(n))throw Error(i(485));if(n=s.action,n!==null){var y={payload:p,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){y.listeners.push(A)}};M.T!==null?o(!0):y.isTransition=!1,u(y),o=s.pending,o===null?(y.next=s.pending=y,Qg(s,y)):(y.next=o.next,s.pending=o.next=y)}}function Qg(n,s){var o=s.action,u=s.payload,p=n.state;if(s.isTransition){var y=M.T,A={};M.T=A;try{var C=o(p,u),N=M.S;N!==null&&N(A,C),Zg(n,s,C)}catch(z){Oh(n,s,z)}finally{y!==null&&A.types!==null&&(y.types=A.types),M.T=y}}else try{y=o(p,u),Zg(n,s,y)}catch(z){Oh(n,s,z)}}function Zg(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){Jg(n,s,u)},function(u){return Oh(n,s,u)}):Jg(n,s,o)}function Jg(n,s,o){s.status="fulfilled",s.value=o,tm(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,Qg(n,o)))}function Oh(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,tm(s),s=s.next;while(s!==u)}n.action=null}function tm(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function em(n,s){return s}function nm(n,s){if(Ot){var o=Wt.formState;if(o!==null){t:{var u=_t;if(Ot){if(ee){e:{for(var p=ee,y=Dn;p.nodeType!==8;){if(!y){p=null;break e}if(p=kn(p.nextSibling),p===null){p=null;break e}}y=p.data,p=y==="F!"||y==="F"?p:null}if(p){ee=kn(p.nextSibling),u=p.data==="F!";break t}}ns(u)}u=!1}u&&(s=o[0])}}return o=Ye(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:em,lastRenderedState:s},o.queue=u,o=Am.bind(null,_t,u),u.dispatch=o,u=Lh(!1),y=Fh.bind(null,_t,!1,u.queue),u=Ye(),p={state:s,dispatch:null,action:n,pending:null},u.queue=p,o=gx.bind(null,_t,p,y,o),p.dispatch=o,u.memoizedState=n,[s,o,!1]}function im(n){var s=me();return sm(s,qt,n)}function sm(n,s,o){if(s=kh(n,s,em)[0],n=Kl(Si)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=io(s)}catch(A){throw A===Ha?Fl:A}else u=s;s=me();var p=s.queue,y=p.dispatch;return o!==s.memoizedState&&(_t.flags|=2048,Ya(9,{destroy:void 0},mx.bind(null,p,o),null)),[u,y,n]}function mx(n,s){n.action=s}function am(n){var s=me(),o=qt;if(o!==null)return sm(s,o,n);me(),s=s.memoizedState,o=me();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function Ya(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=_t.updateQueue,s===null&&(s=Xl(),_t.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function rm(){return me().memoizedState}function Ql(n,s,o,u){var p=Ye();_t.flags|=n,p.memoizedState=Ya(1|s,{destroy:void 0},o,u===void 0?null:u)}function Zl(n,s,o,u){var p=me();u=u===void 0?null:u;var y=p.memoizedState.inst;qt!==null&&u!==null&&Eh(u,qt.memoizedState.deps)?p.memoizedState=Ya(s,y,o,u):(_t.flags|=n,p.memoizedState=Ya(1|s,y,o,u))}function om(n,s){Ql(8390656,8,n,s)}function Ih(n,s){Zl(2048,8,n,s)}function yx(n){_t.flags|=4;var s=_t.updateQueue;if(s===null)s=Xl(),_t.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function lm(n){var s=me().memoizedState;return yx({ref:s,nextImpl:n}),function(){if((Ft&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function cm(n,s){return Zl(4,2,n,s)}function um(n,s){return Zl(4,4,n,s)}function hm(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function dm(n,s,o){o=o!=null?o.concat([n]):null,Zl(4,4,hm.bind(null,s,n),o)}function Ph(){}function fm(n,s){var o=me();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&Eh(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function pm(n,s){var o=me();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&Eh(s,u[1]))return u[0];if(u=n(),Ks){Xn(!0);try{n()}finally{Xn(!1)}}return o.memoizedState=[u,s],u}function jh(n,s,o){return o===void 0||(xi&1073741824)!==0&&(Nt&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=gy(),_t.lanes|=n,hs|=n,o)}function gm(n,s,o,u){return dn(o,s)?o:Va.current!==null?(n=jh(n,o,u),dn(n,s)||(Ae=!0),n):(xi&42)===0||(xi&1073741824)!==0&&(Nt&261930)===0?(Ae=!0,n.memoizedState=o):(n=gy(),_t.lanes|=n,hs|=n,s)}function mm(n,s,o,u,p){var y=U.p;U.p=y!==0&&8>y?y:8;var A=M.T,C={};M.T=C,Fh(n,!1,s,o);try{var N=p(),z=M.S;if(z!==null&&z(C,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var $=dx(N,u);so(n,s,$,bn(n))}else so(n,s,u,bn(n))}catch(W){so(n,s,{then:function(){},status:"rejected",reason:W},bn())}finally{U.p=y,A!==null&&C.types!==null&&(A.types=C.types),M.T=A}}function bx(){}function Bh(n,s,o,u){if(n.tag!==5)throw Error(i(476));var p=ym(n).queue;mm(n,p,s,J,o===null?bx:function(){return bm(n),o(u)})}function ym(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:J},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Si,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function bm(n){var s=ym(n);s.next===null&&(s=n.alternate.memoizedState),so(n,s.next.queue,{},bn())}function Uh(){return Ie(xo)}function vm(){return me().memoizedState}function wm(){return me().memoizedState}function vx(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=bn();n=as(o);var u=rs(s,n,o);u!==null&&(sn(u,s,o),Jr(u,s,o)),s={cache:ph()},n.payload=s;return}s=s.return}}function wx(n,s,o){var u=bn();o={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jl(n)?xm(s,o):(o=ih(n,s,o,u),o!==null&&(sn(o,n,u),Sm(o,s,u)))}function Am(n,s,o){var u=bn();so(n,s,o,u)}function so(n,s,o,u){var p={lane:u,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Jl(n))xm(s,p);else{var y=n.alternate;if(n.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var A=s.lastRenderedState,C=y(A,o);if(p.hasEagerState=!0,p.eagerState=C,dn(C,A))return Ll(n,s,p,0),Wt===null&&Ml(),!1}catch{}if(o=ih(n,s,p,u),o!==null)return sn(o,n,u),Sm(o,s,u),!0}return!1}function Fh(n,s,o,u){if(u={lane:2,revertLane:bd(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Jl(n)){if(s)throw Error(i(479))}else s=ih(n,o,u,2),s!==null&&sn(s,n,2)}function Jl(n){var s=n.alternate;return n===_t||s!==null&&s===_t}function xm(n,s){qa=$l=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Sm(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,Dt(n,o)}}var ao={readContext:Ie,use:Wl,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useLayoutEffect:fe,useInsertionEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useSyncExternalStore:fe,useId:fe,useHostTransitionStatus:fe,useFormState:fe,useActionState:fe,useOptimistic:fe,useMemoCache:fe,useCacheRefresh:fe};ao.useEffectEvent=fe;var _m={readContext:Ie,use:Wl,useCallback:function(n,s){return Ye().memoizedState=[n,s===void 0?null:s],n},useContext:Ie,useEffect:om,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Ql(4194308,4,hm.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Ql(4194308,4,n,s)},useInsertionEffect:function(n,s){Ql(4,2,n,s)},useMemo:function(n,s){var o=Ye();s=s===void 0?null:s;var u=n();if(Ks){Xn(!0);try{n()}finally{Xn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=Ye();if(o!==void 0){var p=o(s);if(Ks){Xn(!0);try{o(s)}finally{Xn(!1)}}}else p=s;return u.memoizedState=u.baseState=p,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:p},u.queue=n,n=n.dispatch=wx.bind(null,_t,n),[u.memoizedState,n]},useRef:function(n){var s=Ye();return n={current:n},s.memoizedState=n},useState:function(n){n=Lh(n);var s=n.queue,o=Am.bind(null,_t,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Ph,useDeferredValue:function(n,s){var o=Ye();return jh(o,n,s)},useTransition:function(){var n=Lh(!1);return n=mm.bind(null,_t,n.queue,!0,!1),Ye().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=_t,p=Ye();if(Ot){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),Wt===null)throw Error(i(349));(Nt&127)!==0||qg(u,s,o)}p.memoizedState=o;var y={value:o,getSnapshot:s};return p.queue=y,om(Yg.bind(null,u,y,n),[n]),u.flags|=2048,Ya(9,{destroy:void 0},$g.bind(null,u,y,o,s),null),o},useId:function(){var n=Ye(),s=Wt.identifierPrefix;if(Ot){var o=Kn,u=Wn;o=(u&~(1<<32-$e(u)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Yl++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=fx++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Uh,useFormState:nm,useActionState:nm,useOptimistic:function(n){var s=Ye();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Fh.bind(null,_t,!0,o),o.dispatch=s,[n,s]},useMemoCache:Nh,useCacheRefresh:function(){return Ye().memoizedState=vx.bind(null,_t)},useEffectEvent:function(n){var s=Ye(),o={impl:n};return s.memoizedState=o,function(){if((Ft&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}},zh={readContext:Ie,use:Wl,useCallback:fm,useContext:Ie,useEffect:Ih,useImperativeHandle:dm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:pm,useReducer:Kl,useRef:rm,useState:function(){return Kl(Si)},useDebugValue:Ph,useDeferredValue:function(n,s){var o=me();return gm(o,qt.memoizedState,n,s)},useTransition:function(){var n=Kl(Si)[0],s=me().memoizedState;return[typeof n=="boolean"?n:io(n),s]},useSyncExternalStore:Vg,useId:vm,useHostTransitionStatus:Uh,useFormState:im,useActionState:im,useOptimistic:function(n,s){var o=me();return Kg(o,qt,n,s)},useMemoCache:Nh,useCacheRefresh:wm};zh.useEffectEvent=lm;var Em={readContext:Ie,use:Wl,useCallback:fm,useContext:Ie,useEffect:Ih,useImperativeHandle:dm,useInsertionEffect:cm,useLayoutEffect:um,useMemo:pm,useReducer:Mh,useRef:rm,useState:function(){return Mh(Si)},useDebugValue:Ph,useDeferredValue:function(n,s){var o=me();return qt===null?jh(o,n,s):gm(o,qt.memoizedState,n,s)},useTransition:function(){var n=Mh(Si)[0],s=me().memoizedState;return[typeof n=="boolean"?n:io(n),s]},useSyncExternalStore:Vg,useId:vm,useHostTransitionStatus:Uh,useFormState:am,useActionState:am,useOptimistic:function(n,s){var o=me();return qt!==null?Kg(o,qt,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Nh,useCacheRefresh:wm};Em.useEffectEvent=lm;function Hh(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:m({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Gh={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=bn(),p=as(u);p.payload=s,o!=null&&(p.callback=o),s=rs(n,p,u),s!==null&&(sn(s,n,u),Jr(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=bn(),p=as(u);p.tag=1,p.payload=s,o!=null&&(p.callback=o),s=rs(n,p,u),s!==null&&(sn(s,n,u),Jr(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=bn(),u=as(o);u.tag=2,s!=null&&(u.callback=s),s=rs(n,u,o),s!==null&&(sn(s,n,o),Jr(s,n,o))}};function Tm(n,s,o,u,p,y,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,y,A):s.prototype&&s.prototype.isPureReactComponent?!qr(o,u)||!qr(p,y):!0}function Cm(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Gh.enqueueReplaceState(s,s.state,null)}function Qs(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=m({},o));for(var p in n)o[p]===void 0&&(o[p]=n[p])}return o}function Rm(n){kl(n)}function Dm(n){console.error(n)}function Nm(n){kl(n)}function tc(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function km(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Vh(n,s,o){return o=as(o),o.tag=3,o.payload={element:null},o.callback=function(){tc(n,s)},o}function Mm(n){return n=as(n),n.tag=3,n}function Lm(n,s,o,u){var p=o.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;n.payload=function(){return p(y)},n.callback=function(){km(s,o,u)}}var A=o.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){km(s,o,u),typeof p!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Ax(n,s,o,u,p){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&Ua(s,o,p,!0),o=pn.current,o!==null){switch(o.tag){case 31:case 13:return Nn===null?dc():o.alternate===null&&pe===0&&(pe=3),o.flags&=-257,o.flags|=65536,o.lanes=p,u===zl?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),gd(n,u,p)),!1;case 22:return o.flags|=65536,u===zl?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),gd(n,u,p)),!1}throw Error(i(435,o.tag))}return gd(n,u,p),dc(),!1}if(Ot)return s=pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,u!==ch&&(n=Error(i(422),{cause:u}),Xr(Tn(n,o)))):(u!==ch&&(s=Error(i(423),{cause:u}),Xr(Tn(s,o))),n=n.current.alternate,n.flags|=65536,p&=-p,n.lanes|=p,u=Tn(u,o),p=Vh(n.stateNode,u,p),wh(n,p),pe!==4&&(pe=2)),!1;var y=Error(i(520),{cause:u});if(y=Tn(y,o),po===null?po=[y]:po.push(y),pe!==4&&(pe=2),s===null)return!0;u=Tn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=p&-p,o.lanes|=n,n=Vh(o.stateNode,u,n),wh(o,n),!1;case 1:if(s=o.type,y=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(ds===null||!ds.has(y))))return o.flags|=65536,p&=-p,o.lanes|=p,p=Mm(p),Lm(p,n,o,u),wh(o,p),!1}o=o.return}while(o!==null);return!1}var qh=Error(i(461)),Ae=!1;function Pe(n,s,o,u){s.child=n===null?jg(s,null,o,u):Ws(s,n.child,o,u)}function Om(n,s,o,u,p){o=o.render;var y=s.ref;if("ref"in u){var A={};for(var C in u)C!=="ref"&&(A[C]=u[C])}else A=u;return qs(s),u=Th(n,s,o,A,y,p),C=Ch(),n!==null&&!Ae?(Rh(n,s,p),_i(n,s,p)):(Ot&&C&&oh(s),s.flags|=1,Pe(n,s,u,p),s.child)}function Im(n,s,o,u,p){if(n===null){var y=o.type;return typeof y=="function"&&!sh(y)&&y.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=y,Pm(n,s,y,u,p)):(n=Il(o.type,null,u,s,s.mode,p),n.ref=s.ref,n.return=s,s.child=n)}if(y=n.child,!Jh(n,p)){var A=y.memoizedProps;if(o=o.compare,o=o!==null?o:qr,o(A,u)&&n.ref===s.ref)return _i(n,s,p)}return s.flags|=1,n=bi(y,u),n.ref=s.ref,n.return=s,s.child=n}function Pm(n,s,o,u,p){if(n!==null){var y=n.memoizedProps;if(qr(y,u)&&n.ref===s.ref)if(Ae=!1,s.pendingProps=u=y,Jh(n,p))(n.flags&131072)!==0&&(Ae=!0);else return s.lanes=n.lanes,_i(n,s,p)}return $h(n,s,o,u,p)}function jm(n,s,o,u){var p=u.children,y=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(y=y!==null?y.baseLanes|o:o,n!==null){for(u=s.child=n.child,p=0;u!==null;)p=p|u.lanes|u.childLanes,u=u.sibling;u=p&~y}else u=0,s.child=null;return Bm(n,s,y,o,u)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Ul(s,y!==null?y.cachePool:null),y!==null?Fg(s,y):xh(),zg(s);else return u=s.lanes=536870912,Bm(n,s,y!==null?y.baseLanes|o:o,o,u)}else y!==null?(Ul(s,y.cachePool),Fg(s,y),ls(),s.memoizedState=null):(n!==null&&Ul(s,null),xh(),ls());return Pe(n,s,p,o),s.child}function ro(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Bm(n,s,o,u,p){var y=mh();return y=y===null?null:{parent:ve._currentValue,pool:y},s.memoizedState={baseLanes:o,cachePool:y},n!==null&&Ul(s,null),xh(),zg(s),n!==null&&Ua(n,s,u,!0),s.childLanes=p,null}function ec(n,s){return s=ic({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function Um(n,s,o){return Ws(s,n.child,null,o),n=ec(s,s.pendingProps),n.flags|=2,gn(s),s.memoizedState=null,n}function xx(n,s,o){var u=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ot){if(u.mode==="hidden")return n=ec(s,u),s.lanes=536870912,ro(null,n);if(_h(s),(n=ee)?(n=Qy(n,Dn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ts!==null?{id:Wn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},o=xg(n),o.return=s,s.child=o,Oe=s,ee=null)):n=null,n===null)throw ns(s);return s.lanes=536870912,null}return ec(s,u)}var y=n.memoizedState;if(y!==null){var A=y.dehydrated;if(_h(s),p)if(s.flags&256)s.flags&=-257,s=Um(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(Ae||Ua(n,s,o,!1),p=(o&n.childLanes)!==0,Ae||p){if(u=Wt,u!==null&&(A=Tt(u,o),A!==0&&A!==y.retryLane))throw y.retryLane=A,zs(n,A),sn(u,n,A),qh;dc(),s=Um(n,s,o)}else n=y.treeContext,ee=kn(A.nextSibling),Oe=s,Ot=!0,es=null,Dn=!1,n!==null&&Eg(s,n),s=ec(s,u),s.flags|=4096;return s}return n=bi(n.child,{mode:u.mode,children:u.children}),n.ref=s.ref,s.child=n,n.return=s,n}function nc(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function $h(n,s,o,u,p){return qs(s),o=Th(n,s,o,u,void 0,p),u=Ch(),n!==null&&!Ae?(Rh(n,s,p),_i(n,s,p)):(Ot&&u&&oh(s),s.flags|=1,Pe(n,s,o,p),s.child)}function Fm(n,s,o,u,p,y){return qs(s),s.updateQueue=null,o=Gg(s,u,o,p),Hg(n),u=Ch(),n!==null&&!Ae?(Rh(n,s,y),_i(n,s,y)):(Ot&&u&&oh(s),s.flags|=1,Pe(n,s,o,y),s.child)}function zm(n,s,o,u,p){if(qs(s),s.stateNode===null){var y=Ia,A=o.contextType;typeof A=="object"&&A!==null&&(y=Ie(A)),y=new o(u,y),s.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=Gh,s.stateNode=y,y._reactInternals=s,y=s.stateNode,y.props=u,y.state=s.memoizedState,y.refs={},bh(s),A=o.contextType,y.context=typeof A=="object"&&A!==null?Ie(A):Ia,y.state=s.memoizedState,A=o.getDerivedStateFromProps,typeof A=="function"&&(Hh(s,o,A,u),y.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(A=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),A!==y.state&&Gh.enqueueReplaceState(y,y.state,null),eo(s,u,y,p),to(),y.state=s.memoizedState),typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){y=s.stateNode;var C=s.memoizedProps,N=Qs(o,C);y.props=N;var z=y.context,$=o.contextType;A=Ia,typeof $=="object"&&$!==null&&(A=Ie($));var W=o.getDerivedStateFromProps;$=typeof W=="function"||typeof y.getSnapshotBeforeUpdate=="function",C=s.pendingProps!==C,$||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C||z!==A)&&Cm(s,y,u,A),ss=!1;var H=s.memoizedState;y.state=H,eo(s,u,y,p),to(),z=s.memoizedState,C||H!==z||ss?(typeof W=="function"&&(Hh(s,o,W,u),z=s.memoizedState),(N=ss||Tm(s,o,N,u,H,z,A))?($||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(s.flags|=4194308)):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),y.props=u,y.state=z,y.context=A,u=N):(typeof y.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{y=s.stateNode,vh(n,s),A=s.memoizedProps,$=Qs(o,A),y.props=$,W=s.pendingProps,H=y.context,z=o.contextType,N=Ia,typeof z=="object"&&z!==null&&(N=Ie(z)),C=o.getDerivedStateFromProps,(z=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(A!==W||H!==N)&&Cm(s,y,u,N),ss=!1,H=s.memoizedState,y.state=H,eo(s,u,y,p),to();var G=s.memoizedState;A!==W||H!==G||ss||n!==null&&n.dependencies!==null&&jl(n.dependencies)?(typeof C=="function"&&(Hh(s,o,C,u),G=s.memoizedState),($=ss||Tm(s,o,$,u,H,G,N)||n!==null&&n.dependencies!==null&&jl(n.dependencies))?(z||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(u,G,N),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(u,G,N)),typeof y.componentDidUpdate=="function"&&(s.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof y.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=G),y.props=u,y.state=G,y.context=N,u=$):(typeof y.componentDidUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&H===n.memoizedState||(s.flags|=1024),u=!1)}return y=u,nc(n,s),u=(s.flags&128)!==0,y||u?(y=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:y.render(),s.flags|=1,n!==null&&u?(s.child=Ws(s,n.child,null,p),s.child=Ws(s,null,o,p)):Pe(n,s,o,p),s.memoizedState=y.state,n=s.child):n=_i(n,s,p),n}function Hm(n,s,o,u){return Gs(),s.flags|=256,Pe(n,s,o,u),s.child}var Yh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xh(n){return{baseLanes:n,cachePool:kg()}}function Wh(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=yn),n}function Gm(n,s,o){var u=s.pendingProps,p=!1,y=(s.flags&128)!==0,A;if((A=y)||(A=n!==null&&n.memoizedState===null?!1:(ge.current&2)!==0),A&&(p=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ot){if(p?os(s):ls(),(n=ee)?(n=Qy(n,Dn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ts!==null?{id:Wn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},o=xg(n),o.return=s,s.child=o,Oe=s,ee=null)):n=null,n===null)throw ns(s);return kd(n)?s.lanes=32:s.lanes=536870912,null}var C=u.children;return u=u.fallback,p?(ls(),p=s.mode,C=ic({mode:"hidden",children:C},p),u=Hs(u,p,o,null),C.return=s,u.return=s,C.sibling=u,s.child=C,u=s.child,u.memoizedState=Xh(o),u.childLanes=Wh(n,A,o),s.memoizedState=Yh,ro(null,u)):(os(s),Kh(s,C))}var N=n.memoizedState;if(N!==null&&(C=N.dehydrated,C!==null)){if(y)s.flags&256?(os(s),s.flags&=-257,s=Qh(n,s,o)):s.memoizedState!==null?(ls(),s.child=n.child,s.flags|=128,s=null):(ls(),C=u.fallback,p=s.mode,u=ic({mode:"visible",children:u.children},p),C=Hs(C,p,o,null),C.flags|=2,u.return=s,C.return=s,u.sibling=C,s.child=u,Ws(s,n.child,null,o),u=s.child,u.memoizedState=Xh(o),u.childLanes=Wh(n,A,o),s.memoizedState=Yh,s=ro(null,u));else if(os(s),kd(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(i(419)),u.stack="",u.digest=A,Xr({value:u,source:null,stack:null}),s=Qh(n,s,o)}else if(Ae||Ua(n,s,o,!1),A=(o&n.childLanes)!==0,Ae||A){if(A=Wt,A!==null&&(u=Tt(A,o),u!==0&&u!==N.retryLane))throw N.retryLane=u,zs(n,u),sn(A,n,u),qh;Nd(C)||dc(),s=Qh(n,s,o)}else Nd(C)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,ee=kn(C.nextSibling),Oe=s,Ot=!0,es=null,Dn=!1,n!==null&&Eg(s,n),s=Kh(s,u.children),s.flags|=4096);return s}return p?(ls(),C=u.fallback,p=s.mode,N=n.child,z=N.sibling,u=bi(N,{mode:"hidden",children:u.children}),u.subtreeFlags=N.subtreeFlags&65011712,z!==null?C=bi(z,C):(C=Hs(C,p,o,null),C.flags|=2),C.return=s,u.return=s,u.sibling=C,s.child=u,ro(null,u),u=s.child,C=n.child.memoizedState,C===null?C=Xh(o):(p=C.cachePool,p!==null?(N=ve._currentValue,p=p.parent!==N?{parent:N,pool:N}:p):p=kg(),C={baseLanes:C.baseLanes|o,cachePool:p}),u.memoizedState=C,u.childLanes=Wh(n,A,o),s.memoizedState=Yh,ro(n.child,u)):(os(s),o=n.child,n=o.sibling,o=bi(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(A=s.deletions,A===null?(s.deletions=[n],s.flags|=16):A.push(n)),s.child=o,s.memoizedState=null,o)}function Kh(n,s){return s=ic({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ic(n,s){return n=fn(22,n,null,s),n.lanes=0,n}function Qh(n,s,o){return Ws(s,n.child,null,o),n=Kh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Vm(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),dh(n.return,s,o)}function Zh(n,s,o,u,p,y){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:p,treeForkCount:y}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=o,A.tailMode=p,A.treeForkCount=y)}function qm(n,s,o){var u=s.pendingProps,p=u.revealOrder,y=u.tail;u=u.children;var A=ge.current,C=(A&2)!==0;if(C?(A=A&1|2,s.flags|=128):A&=1,Q(ge,A),Pe(n,s,u,o),u=Ot?Yr:0,!C&&n!==null&&(n.flags&128)!==0)t:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Vm(n,o,s);else if(n.tag===19)Vm(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break t;for(;n.sibling===null;){if(n.return===null||n.return===s)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(p){case"forwards":for(o=s.child,p=null;o!==null;)n=o.alternate,n!==null&&ql(n)===null&&(p=o),o=o.sibling;o=p,o===null?(p=s.child,s.child=null):(p=o.sibling,o.sibling=null),Zh(s,!1,p,o,y,u);break;case"backwards":case"unstable_legacy-backwards":for(o=null,p=s.child,s.child=null;p!==null;){if(n=p.alternate,n!==null&&ql(n)===null){s.child=p;break}n=p.sibling,p.sibling=o,o=p,p=n}Zh(s,!0,o,null,y,u);break;case"together":Zh(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function _i(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),hs|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Ua(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=bi(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=bi(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function Jh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&jl(n)))}function Sx(n,s,o){switch(s.tag){case 3:ie(s,s.stateNode.containerInfo),is(s,ve,n.memoizedState.cache),Gs();break;case 27:case 5:$n(s);break;case 4:ie(s,s.stateNode.containerInfo);break;case 10:is(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,_h(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(os(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Gm(n,s,o):(os(s),n=_i(n,s,o),n!==null?n.sibling:null);os(s);break;case 19:var p=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(Ua(n,s,o,!1),u=(o&s.childLanes)!==0),p){if(u)return qm(n,s,o);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Q(ge,ge.current),u)break;return null;case 22:return s.lanes=0,jm(n,s,o,s.pendingProps);case 24:is(s,ve,n.memoizedState.cache)}return _i(n,s,o)}function $m(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Ae=!0;else{if(!Jh(n,o)&&(s.flags&128)===0)return Ae=!1,Sx(n,s,o);Ae=(n.flags&131072)!==0}else Ae=!1,Ot&&(s.flags&1048576)!==0&&_g(s,Yr,s.index);switch(s.lanes=0,s.tag){case 16:t:{var u=s.pendingProps;if(n=Ys(s.elementType),s.type=n,typeof n=="function")sh(n)?(u=Qs(n,u),s.tag=1,s=zm(null,s,n,u,o)):(s.tag=0,s=$h(null,s,n,u,o));else{if(n!=null){var p=n.$$typeof;if(p===k){s.tag=11,s=Om(null,s,n,u,o);break t}else if(p===j){s.tag=14,s=Im(null,s,n,u,o);break t}}throw s=q(n)||n,Error(i(306,s,""))}}return s;case 0:return $h(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,p=Qs(u,s.pendingProps),zm(n,s,u,p,o);case 3:t:{if(ie(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var y=s.memoizedState;p=y.element,vh(n,s),eo(s,u,null,o);var A=s.memoizedState;if(u=A.cache,is(s,ve,u),u!==y.cache&&fh(s,[ve],o,!0),to(),u=A.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){s=Hm(n,s,u,o);break t}else if(u!==p){p=Tn(Error(i(424)),s),Xr(p),s=Hm(n,s,u,o);break t}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ee=kn(n.firstChild),Oe=s,Ot=!0,es=null,Dn=!0,o=jg(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Gs(),u===p){s=_i(n,s,o);break t}Pe(n,s,u,o)}s=s.child}return s;case 26:return nc(n,s),n===null?(o=ib(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ot||(o=s.type,n=s.pendingProps,u=vc(gt.current).createElement(o),u[te]=s,u[ze]=n,je(u,o,n),De(u),s.stateNode=u):s.memoizedState=ib(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return $n(s),n===null&&Ot&&(u=s.stateNode=tb(s.type,s.pendingProps,gt.current),Oe=s,Dn=!0,p=ee,ms(s.type)?(Md=p,ee=kn(u.firstChild)):ee=p),Pe(n,s,s.pendingProps.children,o),nc(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ot&&((p=u=ee)&&(u=Jx(u,s.type,s.pendingProps,Dn),u!==null?(s.stateNode=u,Oe=s,ee=kn(u.firstChild),Dn=!1,p=!0):p=!1),p||ns(s)),$n(s),p=s.type,y=s.pendingProps,A=n!==null?n.memoizedProps:null,u=y.children,Cd(p,y)?u=null:A!==null&&Cd(p,A)&&(s.flags|=32),s.memoizedState!==null&&(p=Th(n,s,px,null,null,o),xo._currentValue=p),nc(n,s),Pe(n,s,u,o),s.child;case 6:return n===null&&Ot&&((n=o=ee)&&(o=tS(o,s.pendingProps,Dn),o!==null?(s.stateNode=o,Oe=s,ee=null,n=!0):n=!1),n||ns(s)),null;case 13:return Gm(n,s,o);case 4:return ie(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=Ws(s,null,u,o):Pe(n,s,u,o),s.child;case 11:return Om(n,s,s.type,s.pendingProps,o);case 7:return Pe(n,s,s.pendingProps,o),s.child;case 8:return Pe(n,s,s.pendingProps.children,o),s.child;case 12:return Pe(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,is(s,s.type,u.value),Pe(n,s,u.children,o),s.child;case 9:return p=s.type._context,u=s.pendingProps.children,qs(s),p=Ie(p),u=u(p),s.flags|=1,Pe(n,s,u,o),s.child;case 14:return Im(n,s,s.type,s.pendingProps,o);case 15:return Pm(n,s,s.type,s.pendingProps,o);case 19:return qm(n,s,o);case 31:return xx(n,s,o);case 22:return jm(n,s,o,s.pendingProps);case 24:return qs(s),u=Ie(ve),n===null?(p=mh(),p===null&&(p=Wt,y=ph(),p.pooledCache=y,y.refCount++,y!==null&&(p.pooledCacheLanes|=o),p=y),s.memoizedState={parent:u,cache:p},bh(s),is(s,ve,p)):((n.lanes&o)!==0&&(vh(n,s),eo(s,null,null,o),to()),p=n.memoizedState,y=s.memoizedState,p.parent!==u?(p={parent:u,cache:u},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),is(s,ve,u)):(u=y.cache,is(s,ve,u),u!==p.cache&&fh(s,[ve],o,!0))),Pe(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ei(n){n.flags|=4}function td(n,s,o,u,p){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(p&335544128)===p)if(n.stateNode.complete)n.flags|=8192;else if(vy())n.flags|=8192;else throw Xs=zl,yh}else n.flags&=-16777217}function Ym(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!lb(s))if(vy())n.flags|=8192;else throw Xs=zl,yh}function sc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?wl():536870912,n.lanes|=s,Qa|=s)}function oo(n,s){if(!Ot)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ne(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags&65011712,u|=p.flags&65011712,p.return=n,p=p.sibling;else for(p=n.child;p!==null;)o|=p.lanes|p.childLanes,u|=p.subtreeFlags,u|=p.flags,p.return=n,p=p.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function _x(n,s,o){var u=s.pendingProps;switch(lh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(s),null;case 1:return ne(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Ai(ve),Pt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ba(s)?Ei(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,uh())),ne(s),null;case 26:var p=s.type,y=s.memoizedState;return n===null?(Ei(s),y!==null?(ne(s),Ym(s,y)):(ne(s),td(s,p,null,u,o))):y?y!==n.memoizedState?(Ei(s),ne(s),Ym(s,y)):(ne(s),s.flags&=-16777217):(n=n.memoizedProps,n!==u&&Ei(s),ne(s),td(s,p,n,u,o)),null;case 27:if(Bn(s),o=gt.current,p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ei(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ne(s),null}n=it.current,Ba(s)?Tg(s):(n=tb(p,u,o),s.stateNode=n,Ei(s))}return ne(s),null;case 5:if(Bn(s),p=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Ei(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ne(s),null}if(y=it.current,Ba(s))Tg(s);else{var A=vc(gt.current);switch(y){case 1:y=A.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:y=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":y=A.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":y=A.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":y=A.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild);break;case"select":y=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?y.multiple=!0:u.size&&(y.size=u.size);break;default:y=typeof u.is=="string"?A.createElement(p,{is:u.is}):A.createElement(p)}}y[te]=s,y[ze]=u;t:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)y.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break t;for(;A.sibling===null;){if(A.return===null||A.return===s)break t;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=y;t:switch(je(y,p,u),p){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Ei(s)}}return ne(s),td(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Ei(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=gt.current,Ba(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,p=Oe,p!==null)switch(p.tag){case 27:case 5:u=p.memoizedProps}n[te]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||Gy(n.nodeValue,o)),n||ns(s,!0)}else n=vc(n).createTextNode(u),n[te]=s,s.stateNode=n}return ne(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(u=Ba(s),o!==null){if(n===null){if(!u)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[te]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ne(s),n=!1}else o=uh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(gn(s),s):(gn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return ne(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(p=Ba(s),u!==null&&u.dehydrated!==null){if(n===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[te]=s}else Gs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ne(s),p=!1}else p=uh(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(gn(s),s):(gn(s),null)}return gn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=u!==null,n=n!==null&&n.memoizedState!==null,o&&(u=s.child,p=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(p=u.alternate.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),sc(s,s.updateQueue),ne(s),null);case 4:return Pt(),n===null&&xd(s.stateNode.containerInfo),ne(s),null;case 10:return Ai(s.type),ne(s),null;case 19:if(V(ge),u=s.memoizedState,u===null)return ne(s),null;if(p=(s.flags&128)!==0,y=u.rendering,y===null)if(p)oo(u,!1);else{if(pe!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(y=ql(n),y!==null){for(s.flags|=128,oo(u,!1),n=y.updateQueue,s.updateQueue=n,sc(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Ag(o,n),o=o.sibling;return Q(ge,ge.current&1|2),Ot&&vi(s,u.treeForkCount),s.child}n=n.sibling}u.tail!==null&&Fe()>cc&&(s.flags|=128,p=!0,oo(u,!1),s.lanes=4194304)}else{if(!p)if(n=ql(y),n!==null){if(s.flags|=128,p=!0,n=n.updateQueue,s.updateQueue=n,sc(s,n),oo(u,!0),u.tail===null&&u.tailMode==="hidden"&&!y.alternate&&!Ot)return ne(s),null}else 2*Fe()-u.renderingStartTime>cc&&o!==536870912&&(s.flags|=128,p=!0,oo(u,!1),s.lanes=4194304);u.isBackwards?(y.sibling=s.child,s.child=y):(n=u.last,n!==null?n.sibling=y:s.child=y,u.last=y)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.renderingStartTime=Fe(),n.sibling=null,o=ge.current,Q(ge,p?o&1|2:o&1),Ot&&vi(s,u.treeForkCount),n):(ne(s),null);case 22:case 23:return gn(s),Sh(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ne(s),s.subtreeFlags&6&&(s.flags|=8192)):ne(s),o=s.updateQueue,o!==null&&sc(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&V($s),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),Ai(ve),ne(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Ex(n,s){switch(lh(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ai(ve),Pt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Bn(s),null;case 31:if(s.memoizedState!==null){if(gn(s),s.alternate===null)throw Error(i(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(gn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Gs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return V(ge),null;case 4:return Pt(),null;case 10:return Ai(s.type),null;case 22:case 23:return gn(s),Sh(),n!==null&&V($s),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ai(ve),null;case 25:return null;default:return null}}function Xm(n,s){switch(lh(s),s.tag){case 3:Ai(ve),Pt();break;case 26:case 27:case 5:Bn(s);break;case 4:Pt();break;case 31:s.memoizedState!==null&&gn(s);break;case 13:gn(s);break;case 19:V(ge);break;case 10:Ai(s.type);break;case 22:case 23:gn(s),Sh(),n!==null&&V($s);break;case 24:Ai(ve)}}function lo(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var p=u.next;o=p;do{if((o.tag&n)===n){u=void 0;var y=o.create,A=o.inst;u=y(),A.destroy=u}o=o.next}while(o!==p)}}catch(C){Vt(s,s.return,C)}}function cs(n,s,o){try{var u=s.updateQueue,p=u!==null?u.lastEffect:null;if(p!==null){var y=p.next;u=y;do{if((u.tag&n)===n){var A=u.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,p=s;var N=o,z=C;try{z()}catch($){Vt(p,N,$)}}}u=u.next}while(u!==y)}}catch($){Vt(s,s.return,$)}}function Wm(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{Ug(s,o)}catch(u){Vt(n,n.return,u)}}}function Km(n,s,o){o.props=Qs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){Vt(n,s,u)}}function co(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(p){Vt(n,s,p)}}function Qn(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(p){Vt(n,s,p)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(p){Vt(n,s,p)}else o.current=null}function Qm(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break t;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(p){Vt(n,n.return,p)}}function ed(n,s,o){try{var u=n.stateNode;Yx(u,n.type,o,s),u[ze]=s}catch(p){Vt(n,n.return,p)}}function Zm(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ms(n.type)||n.tag===4}function nd(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Zm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ms(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function id(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=mi));else if(u!==4&&(u===27&&ms(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(id(n,s,o),n=n.sibling;n!==null;)id(n,s,o),n=n.sibling}function ac(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&ms(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(ac(n,s,o),n=n.sibling;n!==null;)ac(n,s,o),n=n.sibling}function Jm(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);je(s,u,o),s[te]=n,s[ze]=o}catch(y){Vt(n,n.return,y)}}var Ti=!1,xe=!1,sd=!1,ty=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function Tx(n,s){if(n=n.containerInfo,Ed=Tc,n=dg(n),Qu(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else t:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var p=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{o.nodeType,y.nodeType}catch{o=null;break t}var A=0,C=-1,N=-1,z=0,$=0,W=n,H=null;e:for(;;){for(var G;W!==o||p!==0&&W.nodeType!==3||(C=A+p),W!==y||u!==0&&W.nodeType!==3||(N=A+u),W.nodeType===3&&(A+=W.nodeValue.length),(G=W.firstChild)!==null;)H=W,W=G;for(;;){if(W===n)break e;if(H===o&&++z===p&&(C=A),H===y&&++$===u&&(N=A),(G=W.nextSibling)!==null)break;W=H,H=W.parentNode}W=G}o=C===-1||N===-1?null:{start:C,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Td={focusedElem:n,selectionRange:o},Tc=!1,Ne=s;Ne!==null;)if(s=Ne,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ne=n;else for(;Ne!==null;){switch(s=Ne,y=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)p=n[o],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&y!==null){n=void 0,o=s,p=y.memoizedProps,y=y.memoizedState,u=o.stateNode;try{var rt=Qs(o.type,p);n=u.getSnapshotBeforeUpdate(rt,y),u.__reactInternalSnapshotBeforeUpdate=n}catch(mt){Vt(o,o.return,mt)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Dd(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dd(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ne=n;break}Ne=s.return}}function ey(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Ri(n,o),u&4&&lo(5,o);break;case 1:if(Ri(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(A){Vt(o,o.return,A)}else{var p=Qs(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(p,s,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Vt(o,o.return,A)}}u&64&&Wm(o),u&512&&co(o,o.return);break;case 3:if(Ri(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{Ug(n,s)}catch(A){Vt(o,o.return,A)}}break;case 27:s===null&&u&4&&Jm(o);case 26:case 5:Ri(n,o),s===null&&u&4&&Qm(o),u&512&&co(o,o.return);break;case 12:Ri(n,o);break;case 31:Ri(n,o),u&4&&sy(n,o);break;case 13:Ri(n,o),u&4&&ay(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Ix.bind(null,o),eS(n,o))));break;case 22:if(u=o.memoizedState!==null||Ti,!u){s=s!==null&&s.memoizedState!==null||xe,p=Ti;var y=xe;Ti=u,(xe=s)&&!y?Di(n,o,(o.subtreeFlags&8772)!==0):Ri(n,o),Ti=p,xe=y}break;case 30:break;default:Ri(n,o)}}function ny(n){var s=n.alternate;s!==null&&(n.alternate=null,ny(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ou(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ae=null,Je=!1;function Ci(n,s,o){for(o=o.child;o!==null;)iy(n,s,o),o=o.sibling}function iy(n,s,o){if(qe&&typeof qe.onCommitFiberUnmount=="function")try{qe.onCommitFiberUnmount(Zi,o)}catch{}switch(o.tag){case 26:xe||Qn(o,s),Ci(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:xe||Qn(o,s);var u=ae,p=Je;ms(o.type)&&(ae=o.stateNode,Je=!1),Ci(n,s,o),vo(o.stateNode),ae=u,Je=p;break;case 5:xe||Qn(o,s);case 6:if(u=ae,p=Je,ae=null,Ci(n,s,o),ae=u,Je=p,ae!==null)if(Je)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(o.stateNode)}catch(y){Vt(o,s,y)}else try{ae.removeChild(o.stateNode)}catch(y){Vt(o,s,y)}break;case 18:ae!==null&&(Je?(n=ae,Wy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),ar(n)):Wy(ae,o.stateNode));break;case 4:u=ae,p=Je,ae=o.stateNode.containerInfo,Je=!0,Ci(n,s,o),ae=u,Je=p;break;case 0:case 11:case 14:case 15:cs(2,o,s),xe||cs(4,o,s),Ci(n,s,o);break;case 1:xe||(Qn(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Km(o,s,u)),Ci(n,s,o);break;case 21:Ci(n,s,o);break;case 22:xe=(u=xe)||o.memoizedState!==null,Ci(n,s,o),xe=u;break;default:Ci(n,s,o)}}function sy(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{ar(n)}catch(o){Vt(s,s.return,o)}}}function ay(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{ar(n)}catch(o){Vt(s,s.return,o)}}function Cx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new ty),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new ty),s;default:throw Error(i(435,n.tag))}}function rc(n,s){var o=Cx(n);s.forEach(function(u){if(!o.has(u)){o.add(u);var p=Px.bind(null,n,u);u.then(p,p)}})}function tn(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var p=o[u],y=n,A=s,C=A;t:for(;C!==null;){switch(C.tag){case 27:if(ms(C.type)){ae=C.stateNode,Je=!1;break t}break;case 5:ae=C.stateNode,Je=!1;break t;case 3:case 4:ae=C.stateNode.containerInfo,Je=!0;break t}C=C.return}if(ae===null)throw Error(i(160));iy(y,A,p),ae=null,Je=!1,y=p.alternate,y!==null&&(y.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ry(s,n),s=s.sibling}var Fn=null;function ry(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:tn(s,n),en(n),u&4&&(cs(3,n,n.return),lo(3,n),cs(5,n,n.return));break;case 1:tn(s,n),en(n),u&512&&(xe||o===null||Qn(o,o.return)),u&64&&Ti&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var p=Fn;if(tn(s,n),en(n),u&512&&(xe||o===null||Qn(o,o.return)),u&4){var y=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){t:{u=n.type,o=n.memoizedProps,p=p.ownerDocument||p;e:switch(u){case"title":y=p.getElementsByTagName("title")[0],(!y||y[Pr]||y[te]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=p.createElement(u),p.head.insertBefore(y,p.querySelector("head > title"))),je(y,u,o),y[te]=n,De(y),u=y;break t;case"link":var A=rb("link","href",p).get(u+(o.href||""));if(A){for(var C=0;C<A.length;C++)if(y=A[C],y.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&y.getAttribute("rel")===(o.rel==null?null:o.rel)&&y.getAttribute("title")===(o.title==null?null:o.title)&&y.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){A.splice(C,1);break e}}y=p.createElement(u),je(y,u,o),p.head.appendChild(y);break;case"meta":if(A=rb("meta","content",p).get(u+(o.content||""))){for(C=0;C<A.length;C++)if(y=A[C],y.getAttribute("content")===(o.content==null?null:""+o.content)&&y.getAttribute("name")===(o.name==null?null:o.name)&&y.getAttribute("property")===(o.property==null?null:o.property)&&y.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&y.getAttribute("charset")===(o.charSet==null?null:o.charSet)){A.splice(C,1);break e}}y=p.createElement(u),je(y,u,o),p.head.appendChild(y);break;default:throw Error(i(468,u))}y[te]=n,De(y),u=y}n.stateNode=u}else ob(p,n.type,n.stateNode);else n.stateNode=ab(p,u,n.memoizedProps);else y!==u?(y===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):y.count--,u===null?ob(p,n.type,n.stateNode):ab(p,u,n.memoizedProps)):u===null&&n.stateNode!==null&&ed(n,n.memoizedProps,o.memoizedProps)}break;case 27:tn(s,n),en(n),u&512&&(xe||o===null||Qn(o,o.return)),o!==null&&u&4&&ed(n,n.memoizedProps,o.memoizedProps);break;case 5:if(tn(s,n),en(n),u&512&&(xe||o===null||Qn(o,o.return)),n.flags&32){p=n.stateNode;try{Ra(p,"")}catch(rt){Vt(n,n.return,rt)}}u&4&&n.stateNode!=null&&(p=n.memoizedProps,ed(n,p,o!==null?o.memoizedProps:p)),u&1024&&(sd=!0);break;case 6:if(tn(s,n),en(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(rt){Vt(n,n.return,rt)}}break;case 3:if(xc=null,p=Fn,Fn=wc(s.containerInfo),tn(s,n),Fn=p,en(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{ar(s.containerInfo)}catch(rt){Vt(n,n.return,rt)}sd&&(sd=!1,oy(n));break;case 4:u=Fn,Fn=wc(n.stateNode.containerInfo),tn(s,n),en(n),Fn=u;break;case 12:tn(s,n),en(n);break;case 31:tn(s,n),en(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rc(n,u)));break;case 13:tn(s,n),en(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(lc=Fe()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rc(n,u)));break;case 22:p=n.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,z=Ti,$=xe;if(Ti=z||p,xe=$||N,tn(s,n),xe=$,Ti=z,en(n),u&8192)t:for(s=n.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(o===null||N||Ti||xe||Zs(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){N=o=s;try{if(y=N.stateNode,p)A=y.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=N.stateNode;var W=N.memoizedProps.style,H=W!=null&&W.hasOwnProperty("display")?W.display:null;C.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(rt){Vt(N,N.return,rt)}}}else if(s.tag===6){if(o===null){N=s;try{N.stateNode.nodeValue=p?"":N.memoizedProps}catch(rt){Vt(N,N.return,rt)}}}else if(s.tag===18){if(o===null){N=s;try{var G=N.stateNode;p?Ky(G,!0):Ky(N.stateNode,!1)}catch(rt){Vt(N,N.return,rt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break t;for(;s.sibling===null;){if(s.return===null||s.return===n)break t;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,rc(n,o))));break;case 19:tn(s,n),en(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,rc(n,u)));break;case 30:break;case 21:break;default:tn(s,n),en(n)}}function en(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Zm(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var p=o.stateNode,y=nd(n);ac(n,y,p);break;case 5:var A=o.stateNode;o.flags&32&&(Ra(A,""),o.flags&=-33);var C=nd(n);ac(n,C,A);break;case 3:case 4:var N=o.stateNode.containerInfo,z=nd(n);id(n,z,N);break;default:throw Error(i(161))}}catch($){Vt(n,n.return,$)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function oy(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;oy(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ri(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ey(n,s.alternate,s),s=s.sibling}function Zs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:cs(4,s,s.return),Zs(s);break;case 1:Qn(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Km(s,s.return,o),Zs(s);break;case 27:vo(s.stateNode);case 26:case 5:Qn(s,s.return),Zs(s);break;case 22:s.memoizedState===null&&Zs(s);break;case 30:Zs(s);break;default:Zs(s)}n=n.sibling}}function Di(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,p=n,y=s,A=y.flags;switch(y.tag){case 0:case 11:case 15:Di(p,y,o),lo(4,y);break;case 1:if(Di(p,y,o),u=y,p=u.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(z){Vt(u,u.return,z)}if(u=y,p=u.updateQueue,p!==null){var C=u.stateNode;try{var N=p.shared.hiddenCallbacks;if(N!==null)for(p.shared.hiddenCallbacks=null,p=0;p<N.length;p++)Bg(N[p],C)}catch(z){Vt(u,u.return,z)}}o&&A&64&&Wm(y),co(y,y.return);break;case 27:Jm(y);case 26:case 5:Di(p,y,o),o&&u===null&&A&4&&Qm(y),co(y,y.return);break;case 12:Di(p,y,o);break;case 31:Di(p,y,o),o&&A&4&&sy(p,y);break;case 13:Di(p,y,o),o&&A&4&&ay(p,y);break;case 22:y.memoizedState===null&&Di(p,y,o),co(y,y.return);break;case 30:break;default:Di(p,y,o)}s=s.sibling}}function ad(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Wr(o))}function rd(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wr(n))}function zn(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ly(n,s,o,u),s=s.sibling}function ly(n,s,o,u){var p=s.flags;switch(s.tag){case 0:case 11:case 15:zn(n,s,o,u),p&2048&&lo(9,s);break;case 1:zn(n,s,o,u);break;case 3:zn(n,s,o,u),p&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wr(n)));break;case 12:if(p&2048){zn(n,s,o,u),n=s.stateNode;try{var y=s.memoizedProps,A=y.id,C=y.onPostCommit;typeof C=="function"&&C(A,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){Vt(s,s.return,N)}}else zn(n,s,o,u);break;case 31:zn(n,s,o,u);break;case 13:zn(n,s,o,u);break;case 23:break;case 22:y=s.stateNode,A=s.alternate,s.memoizedState!==null?y._visibility&2?zn(n,s,o,u):uo(n,s):y._visibility&2?zn(n,s,o,u):(y._visibility|=2,Xa(n,s,o,u,(s.subtreeFlags&10256)!==0||!1)),p&2048&&ad(A,s);break;case 24:zn(n,s,o,u),p&2048&&rd(s.alternate,s);break;default:zn(n,s,o,u)}}function Xa(n,s,o,u,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var y=n,A=s,C=o,N=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Xa(y,A,C,N,p),lo(8,A);break;case 23:break;case 22:var $=A.stateNode;A.memoizedState!==null?$._visibility&2?Xa(y,A,C,N,p):uo(y,A):($._visibility|=2,Xa(y,A,C,N,p)),p&&z&2048&&ad(A.alternate,A);break;case 24:Xa(y,A,C,N,p),p&&z&2048&&rd(A.alternate,A);break;default:Xa(y,A,C,N,p)}s=s.sibling}}function uo(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,p=u.flags;switch(u.tag){case 22:uo(o,u),p&2048&&ad(u.alternate,u);break;case 24:uo(o,u),p&2048&&rd(u.alternate,u);break;default:uo(o,u)}s=s.sibling}}var ho=8192;function Wa(n,s,o){if(n.subtreeFlags&ho)for(n=n.child;n!==null;)cy(n,s,o),n=n.sibling}function cy(n,s,o){switch(n.tag){case 26:Wa(n,s,o),n.flags&ho&&n.memoizedState!==null&&fS(o,Fn,n.memoizedState,n.memoizedProps);break;case 5:Wa(n,s,o);break;case 3:case 4:var u=Fn;Fn=wc(n.stateNode.containerInfo),Wa(n,s,o),Fn=u;break;case 22:n.memoizedState===null&&(u=n.alternate,u!==null&&u.memoizedState!==null?(u=ho,ho=16777216,Wa(n,s,o),ho=u):Wa(n,s,o));break;default:Wa(n,s,o)}}function uy(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function fo(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ne=u,dy(u,n)}uy(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)hy(n),n=n.sibling}function hy(n){switch(n.tag){case 0:case 11:case 15:fo(n),n.flags&2048&&cs(9,n,n.return);break;case 3:fo(n);break;case 12:fo(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,oc(n)):fo(n);break;default:fo(n)}}function oc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];Ne=u,dy(u,n)}uy(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:cs(8,s,s.return),oc(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,oc(s));break;default:oc(s)}n=n.sibling}}function dy(n,s){for(;Ne!==null;){var o=Ne;switch(o.tag){case 0:case 11:case 15:cs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Wr(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,Ne=u;else t:for(o=n;Ne!==null;){u=Ne;var p=u.sibling,y=u.return;if(ny(u),u===o){Ne=null;break t}if(p!==null){p.return=y,Ne=p;break t}Ne=y}}}var Rx={getCacheForType:function(n){var s=Ie(ve),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return Ie(ve).controller.signal}},Dx=typeof WeakMap=="function"?WeakMap:Map,Ft=0,Wt=null,Ct=null,Nt=0,Gt=0,mn=null,us=!1,Ka=!1,od=!1,Ni=0,pe=0,hs=0,Js=0,ld=0,yn=0,Qa=0,po=null,nn=null,cd=!1,lc=0,fy=0,cc=1/0,uc=null,ds=null,Ce=0,fs=null,Za=null,ki=0,ud=0,hd=null,py=null,go=0,dd=null;function bn(){return(Ft&2)!==0&&Nt!==0?Nt&-Nt:M.T!==null?bd():se()}function gy(){if(yn===0)if((Nt&536870912)===0||Ot){var n=va;va<<=1,(va&3932160)===0&&(va=262144),yn=n}else yn=536870912;return n=pn.current,n!==null&&(n.flags|=32),yn}function sn(n,s,o){(n===Wt&&(Gt===2||Gt===9)||n.cancelPendingCommit!==null)&&(Ja(n,0),ps(n,Nt,yn,!1)),Ps(n,o),((Ft&2)===0||n!==Wt)&&(n===Wt&&((Ft&2)===0&&(Js|=o),pe===4&&ps(n,Nt,yn,!1)),Zn(n))}function my(n,s,o){if((Ft&6)!==0)throw Error(i(327));var u=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Is(n,s),p=u?Mx(n,s):pd(n,s,!0),y=u;do{if(p===0){Ka&&!u&&ps(n,s,0,!1);break}else{if(o=n.current.alternate,y&&!Nx(o)){p=pd(n,s,!1),y=!1;continue}if(p===2){if(y=s,n.errorRecoveryDisabledLanes&y)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;t:{var C=n;p=po;var N=C.current.memoizedState.isDehydrated;if(N&&(Ja(C,A).flags|=256),A=pd(C,A,!1),A!==2){if(od&&!N){C.errorRecoveryDisabledLanes|=y,Js|=y,p=4;break t}y=nn,nn=p,y!==null&&(nn===null?nn=y:nn.push.apply(nn,y))}p=A}if(y=!1,p!==2)continue}}if(p===1){Ja(n,0),ps(n,s,0,!0);break}t:{switch(u=n,y=p,y){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ps(u,s,yn,!us);break t;case 2:nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=lc+300-Fe(),10<p)){if(ps(u,s,yn,!us),Aa(u,0,!0)!==0)break t;ki=s,u.timeoutHandle=Yy(yy.bind(null,u,o,nn,uc,cd,s,yn,Js,Qa,us,y,"Throttled",-0,0),p);break t}yy(u,o,nn,uc,cd,s,yn,Js,Qa,us,y,null,-0,0)}}break}while(!0);Zn(n)}function yy(n,s,o,u,p,y,A,C,N,z,$,W,H,G){if(n.timeoutHandle=-1,W=s.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:mi},cy(s,y,W);var rt=(y&62914560)===y?lc-Fe():(y&4194048)===y?fy-Fe():0;if(rt=pS(W,rt),rt!==null){ki=y,n.cancelPendingCommit=rt(Ey.bind(null,n,s,y,o,u,p,A,C,N,$,W,null,H,G)),ps(n,y,A,!z);return}}Ey(n,s,y,o,u,p,A,C,N)}function Nx(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var p=o[u],y=p.getSnapshot;p=p.value;try{if(!dn(y(),p))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ps(n,s,o,u){s&=~ld,s&=~Js,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var p=s;0<p;){var y=31-$e(p),A=1<<y;u[y]=-1,p&=~A}o!==0&&nt(n,o,s)}function hc(){return(Ft&6)===0?(mo(0),!1):!0}function fd(){if(Ct!==null){if(Gt===0)var n=Ct.return;else n=Ct,wi=Vs=null,Dh(n),Ga=null,Qr=0,n=Ct;for(;n!==null;)Xm(n.alternate,n),n=n.return;Ct=null}}function Ja(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Kx(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),ki=0,fd(),Wt=n,Ct=o=bi(n.current,null),Nt=s,Gt=0,mn=null,us=!1,Ka=Is(n,s),od=!1,Qa=yn=ld=Js=hs=pe=0,nn=po=null,cd=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var p=31-$e(u),y=1<<p;s|=n[p],u&=~y}return Ni=s,Ml(),o}function by(n,s){_t=null,M.H=ao,s===Ha||s===Fl?(s=Og(),Gt=3):s===yh?(s=Og(),Gt=4):Gt=s===qh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mn=s,Ct===null&&(pe=1,tc(n,Tn(s,n.current)))}function vy(){var n=pn.current;return n===null?!0:(Nt&4194048)===Nt?Nn===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?n===Nn:!1}function wy(){var n=M.H;return M.H=ao,n===null?ao:n}function Ay(){var n=M.A;return M.A=Rx,n}function dc(){pe=4,us||(Nt&4194048)!==Nt&&pn.current!==null||(Ka=!0),(hs&134217727)===0&&(Js&134217727)===0||Wt===null||ps(Wt,Nt,yn,!1)}function pd(n,s,o){var u=Ft;Ft|=2;var p=wy(),y=Ay();(Wt!==n||Nt!==s)&&(uc=null,Ja(n,s)),s=!1;var A=pe;t:do try{if(Gt!==0&&Ct!==null){var C=Ct,N=mn;switch(Gt){case 8:fd(),A=6;break t;case 3:case 2:case 9:case 6:pn.current===null&&(s=!0);var z=Gt;if(Gt=0,mn=null,tr(n,C,N,z),o&&Ka){A=0;break t}break;default:z=Gt,Gt=0,mn=null,tr(n,C,N,z)}}kx(),A=pe;break}catch($){by(n,$)}while(!0);return s&&n.shellSuspendCounter++,wi=Vs=null,Ft=u,M.H=p,M.A=y,Ct===null&&(Wt=null,Nt=0,Ml()),A}function kx(){for(;Ct!==null;)xy(Ct)}function Mx(n,s){var o=Ft;Ft|=2;var u=wy(),p=Ay();Wt!==n||Nt!==s?(uc=null,cc=Fe()+500,Ja(n,s)):Ka=Is(n,s);t:do try{if(Gt!==0&&Ct!==null){s=Ct;var y=mn;e:switch(Gt){case 1:Gt=0,mn=null,tr(n,s,y,1);break;case 2:case 9:if(Mg(y)){Gt=0,mn=null,Sy(s);break}s=function(){Gt!==2&&Gt!==9||Wt!==n||(Gt=7),Zn(n)},y.then(s,s);break t;case 3:Gt=7;break t;case 4:Gt=5;break t;case 7:Mg(y)?(Gt=0,mn=null,Sy(s)):(Gt=0,mn=null,tr(n,s,y,7));break;case 5:var A=null;switch(Ct.tag){case 26:A=Ct.memoizedState;case 5:case 27:var C=Ct;if(A?lb(A):C.stateNode.complete){Gt=0,mn=null;var N=C.sibling;if(N!==null)Ct=N;else{var z=C.return;z!==null?(Ct=z,fc(z)):Ct=null}break e}}Gt=0,mn=null,tr(n,s,y,5);break;case 6:Gt=0,mn=null,tr(n,s,y,6);break;case 8:fd(),pe=6;break t;default:throw Error(i(462))}}Lx();break}catch($){by(n,$)}while(!0);return wi=Vs=null,M.H=u,M.A=p,Ft=o,Ct!==null?0:(Wt=null,Nt=0,Ml(),pe)}function Lx(){for(;Ct!==null&&!Ls();)xy(Ct)}function xy(n){var s=$m(n.alternate,n,Ni);n.memoizedProps=n.pendingProps,s===null?fc(n):Ct=s}function Sy(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Fm(o,s,s.pendingProps,s.type,void 0,Nt);break;case 11:s=Fm(o,s,s.pendingProps,s.type.render,s.ref,Nt);break;case 5:Dh(s);default:Xm(o,s),s=Ct=Ag(s,Ni),s=$m(o,s,Ni)}n.memoizedProps=n.pendingProps,s===null?fc(n):Ct=s}function tr(n,s,o,u){wi=Vs=null,Dh(s),Ga=null,Qr=0;var p=s.return;try{if(Ax(n,p,s,o,Nt)){pe=1,tc(n,Tn(o,n.current)),Ct=null;return}}catch(y){if(p!==null)throw Ct=p,y;pe=1,tc(n,Tn(o,n.current)),Ct=null;return}s.flags&32768?(Ot||u===1?n=!0:Ka||(Nt&536870912)!==0?n=!1:(us=n=!0,(u===2||u===9||u===3||u===6)&&(u=pn.current,u!==null&&u.tag===13&&(u.flags|=16384))),_y(s,n)):fc(s)}function fc(n){var s=n;do{if((s.flags&32768)!==0){_y(s,us);return}n=s.return;var o=_x(s.alternate,s,Ni);if(o!==null){Ct=o;return}if(s=s.sibling,s!==null){Ct=s;return}Ct=s=n}while(s!==null);pe===0&&(pe=5)}function _y(n,s){do{var o=Ex(n.alternate,n);if(o!==null){o.flags&=32767,Ct=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ct=n;return}Ct=n=o}while(n!==null);pe=6,Ct=null}function Ey(n,s,o,u,p,y,A,C,N){n.cancelPendingCommit=null;do pc();while(Ce!==0);if((Ft&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(y=s.lanes|s.childLanes,y|=nh,tt(n,o,y,A,C,N),n===Wt&&(Ct=Wt=null,Nt=0),Za=s,fs=n,ki=o,ud=y,hd=p,py=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,jx(ya,function(){return Ny(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,p=U.p,U.p=2,A=Ft,Ft|=4;try{Tx(n,s,o)}finally{Ft=A,U.p=p,M.T=u}}Ce=1,Ty(),Cy(),Ry()}}function Ty(){if(Ce===1){Ce=0;var n=fs,s=Za,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=M.T,M.T=null;var u=U.p;U.p=2;var p=Ft;Ft|=4;try{ry(s,n);var y=Td,A=dg(n.containerInfo),C=y.focusedElem,N=y.selectionRange;if(A!==C&&C&&C.ownerDocument&&hg(C.ownerDocument.documentElement,C)){if(N!==null&&Qu(C)){var z=N.start,$=N.end;if($===void 0&&($=z),"selectionStart"in C)C.selectionStart=z,C.selectionEnd=Math.min($,C.value.length);else{var W=C.ownerDocument||document,H=W&&W.defaultView||window;if(H.getSelection){var G=H.getSelection(),rt=C.textContent.length,mt=Math.min(N.start,rt),Yt=N.end===void 0?mt:Math.min(N.end,rt);!G.extend&&mt>Yt&&(A=Yt,Yt=mt,mt=A);var B=ug(C,mt),O=ug(C,Yt);if(B&&O&&(G.rangeCount!==1||G.anchorNode!==B.node||G.anchorOffset!==B.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var F=W.createRange();F.setStart(B.node,B.offset),G.removeAllRanges(),mt>Yt?(G.addRange(F),G.extend(O.node,O.offset)):(F.setEnd(O.node,O.offset),G.addRange(F))}}}}for(W=[],G=C;G=G.parentNode;)G.nodeType===1&&W.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<W.length;C++){var Y=W[C];Y.element.scrollLeft=Y.left,Y.element.scrollTop=Y.top}}Tc=!!Ed,Td=Ed=null}finally{Ft=p,U.p=u,M.T=o}}n.current=s,Ce=2}}function Cy(){if(Ce===2){Ce=0;var n=fs,s=Za,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=M.T,M.T=null;var u=U.p;U.p=2;var p=Ft;Ft|=4;try{ey(n,s.alternate,s)}finally{Ft=p,U.p=u,M.T=o}}Ce=3}}function Ry(){if(Ce===4||Ce===3){Ce=0,Ru();var n=fs,s=Za,o=ki,u=py;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Ce=5:(Ce=0,Za=fs=null,Dy(n,n.pendingLanes));var p=n.pendingLanes;if(p===0&&(ds=null),Zt(o),s=s.stateNode,qe&&typeof qe.onCommitFiberRoot=="function")try{qe.onCommitFiberRoot(Zi,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=M.T,p=U.p,U.p=2,M.T=null;try{for(var y=n.onRecoverableError,A=0;A<u.length;A++){var C=u[A];y(C.value,{componentStack:C.stack})}}finally{M.T=s,U.p=p}}(ki&3)!==0&&pc(),Zn(n),p=n.pendingLanes,(o&261930)!==0&&(p&42)!==0?n===dd?go++:(go=0,dd=n):go=0,mo(0)}}function Dy(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Wr(s)))}function pc(){return Ty(),Cy(),Ry(),Ny()}function Ny(){if(Ce!==5)return!1;var n=fs,s=ud;ud=0;var o=Zt(ki),u=M.T,p=U.p;try{U.p=32>o?32:o,M.T=null,o=hd,hd=null;var y=fs,A=ki;if(Ce=0,Za=fs=null,ki=0,(Ft&6)!==0)throw Error(i(331));var C=Ft;if(Ft|=4,hy(y.current),ly(y,y.current,A,o),Ft=C,mo(0,!1),qe&&typeof qe.onPostCommitFiberRoot=="function")try{qe.onPostCommitFiberRoot(Zi,y)}catch{}return!0}finally{U.p=p,M.T=u,Dy(n,s)}}function ky(n,s,o){s=Tn(o,s),s=Vh(n.stateNode,s,2),n=rs(n,s,2),n!==null&&(Ps(n,2),Zn(n))}function Vt(n,s,o){if(n.tag===3)ky(n,n,o);else for(;s!==null;){if(s.tag===3){ky(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ds===null||!ds.has(u))){n=Tn(o,n),o=Mm(2),u=rs(s,o,2),u!==null&&(Lm(o,u,s,n),Ps(u,2),Zn(u));break}}s=s.return}}function gd(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new Dx;var p=new Set;u.set(s,p)}else p=u.get(s),p===void 0&&(p=new Set,u.set(s,p));p.has(o)||(od=!0,p.add(o),n=Ox.bind(null,n,s,o),s.then(n,n))}function Ox(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,Wt===n&&(Nt&o)===o&&(pe===4||pe===3&&(Nt&62914560)===Nt&&300>Fe()-lc?(Ft&2)===0&&Ja(n,0):ld|=o,Qa===Nt&&(Qa=0)),Zn(n)}function My(n,s){s===0&&(s=wl()),n=zs(n,s),n!==null&&(Ps(n,s),Zn(n))}function Ix(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),My(n,o)}function Px(n,s){var o=0;switch(n.tag){case 31:case 13:var u=n.stateNode,p=n.memoizedState;p!==null&&(o=p.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),My(n,o)}function jx(n,s){return Mr(n,s)}var gc=null,er=null,md=!1,mc=!1,yd=!1,gs=0;function Zn(n){n!==er&&n.next===null&&(er===null?gc=er=n:er=er.next=n),mc=!0,md||(md=!0,Ux())}function mo(n,s){if(!yd&&mc){yd=!0;do for(var o=!1,u=gc;u!==null;){if(n!==0){var p=u.pendingLanes;if(p===0)var y=0;else{var A=u.suspendedLanes,C=u.pingedLanes;y=(1<<31-$e(42|n)+1)-1,y&=p&~(A&~C),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(o=!0,Py(u,y))}else y=Nt,y=Aa(u,u===Wt?y:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(y&3)===0||Is(u,y)||(o=!0,Py(u,y));u=u.next}while(o);yd=!1}}function Bx(){Ly()}function Ly(){mc=md=!1;var n=0;gs!==0&&Wx()&&(n=gs);for(var s=Fe(),o=null,u=gc;u!==null;){var p=u.next,y=Oy(u,s);y===0?(u.next=null,o===null?gc=p:o.next=p,p===null&&(er=o)):(o=u,(n!==0||(y&3)!==0)&&(mc=!0)),u=p}Ce!==0&&Ce!==5||mo(n),gs!==0&&(gs=0)}function Oy(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,p=n.expirationTimes,y=n.pendingLanes&-62914561;0<y;){var A=31-$e(y),C=1<<A,N=p[A];N===-1?((C&o)===0||(C&u)!==0)&&(p[A]=Mu(C,s)):N<=s&&(n.expiredLanes|=C),y&=~C}if(s=Wt,o=Nt,o=Aa(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Gt===2||Gt===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Lr(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Is(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Lr(u),Zt(o)){case 2:case 8:o=bl;break;case 32:o=ya;break;case 268435456:o=Yn;break;default:o=ya}return u=Iy.bind(null,n),o=Mr(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Lr(u),n.callbackPriority=2,n.callbackNode=null,2}function Iy(n,s){if(Ce!==0&&Ce!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(pc()&&n.callbackNode!==o)return null;var u=Nt;return u=Aa(n,n===Wt?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(my(n,u,s),Oy(n,Fe()),n.callbackNode!=null&&n.callbackNode===o?Iy.bind(null,n):null)}function Py(n,s){if(pc())return null;my(n,s,!0)}function Ux(){Qx(function(){(Ft&6)!==0?Mr(ma,Bx):Ly()})}function bd(){if(gs===0){var n=Fa;n===0&&(n=ba,ba<<=1,(ba&261888)===0&&(ba=256)),gs=n}return gs}function jy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:_l(""+n)}function By(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function Fx(n,s,o,u,p){if(s==="submit"&&o&&o.stateNode===p){var y=jy((p[ze]||null).action),A=u.submitter;A&&(s=(s=A[ze]||null)?jy(s.formAction):A.getAttribute("formAction"),s!==null&&(y=s,A=null));var C=new Rl("action","action",null,u,p);n.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(gs!==0){var N=A?By(p,A):new FormData(p);Bh(o,{pending:!0,data:N,method:p.method,action:y},null,N)}}else typeof y=="function"&&(C.preventDefault(),N=A?By(p,A):new FormData(p),Bh(o,{pending:!0,data:N,method:p.method,action:y},y,N))},currentTarget:p}]})}}for(var vd=0;vd<eh.length;vd++){var wd=eh[vd],zx=wd.toLowerCase(),Hx=wd[0].toUpperCase()+wd.slice(1);Un(zx,"on"+Hx)}Un(gg,"onAnimationEnd"),Un(mg,"onAnimationIteration"),Un(yg,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(sx,"onTransitionRun"),Un(ax,"onTransitionStart"),Un(rx,"onTransitionCancel"),Un(bg,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yo));function Uy(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],p=u.event;u=u.listeners;t:{var y=void 0;if(s)for(var A=u.length-1;0<=A;A--){var C=u[A],N=C.instance,z=C.currentTarget;if(C=C.listener,N!==y&&p.isPropagationStopped())break t;y=C,p.currentTarget=z;try{y(p)}catch($){kl($)}p.currentTarget=null,y=N}else for(A=0;A<u.length;A++){if(C=u[A],N=C.instance,z=C.currentTarget,C=C.listener,N!==y&&p.isPropagationStopped())break t;y=C,p.currentTarget=z;try{y(p)}catch($){kl($)}p.currentTarget=null,y=N}}}}function Rt(n,s){var o=s[Lu];o===void 0&&(o=s[Lu]=new Set);var u=n+"__bubble";o.has(u)||(Fy(s,n,2,!1),o.add(u))}function Ad(n,s,o){var u=0;s&&(u|=4),Fy(o,n,u,s)}var yc="_reactListening"+Math.random().toString(36).slice(2);function xd(n){if(!n[yc]){n[yc]=!0,Lp.forEach(function(o){o!=="selectionchange"&&(Gx.has(o)||Ad(o,!1,n),Ad(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[yc]||(s[yc]=!0,Ad("selectionchange",!1,s))}}function Fy(n,s,o,u){switch(gb(s)){case 2:var p=yS;break;case 8:p=bS;break;default:p=jd}o=p.bind(null,s,o,n),p=void 0,!Hu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),u?p!==void 0?n.addEventListener(s,o,{capture:!0,passive:p}):n.addEventListener(s,o,!0):p!==void 0?n.addEventListener(s,o,{passive:p}):n.addEventListener(s,o,!1)}function Sd(n,s,o,u,p){var y=u;if((s&1)===0&&(s&2)===0&&u!==null)t:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var C=u.stateNode.containerInfo;if(C===p)break;if(A===4)for(A=u.return;A!==null;){var N=A.tag;if((N===3||N===4)&&A.stateNode.containerInfo===p)return;A=A.return}for(;C!==null;){if(A=Sa(C),A===null)return;if(N=A.tag,N===5||N===6||N===26||N===27){u=y=A;continue t}C=C.parentNode}}u=u.return}qp(function(){var z=y,$=Fu(o),W=[];t:{var H=vg.get(n);if(H!==void 0){var G=Rl,rt=n;switch(n){case"keypress":if(Tl(o)===0)break t;case"keydown":case"keyup":G=PA;break;case"focusin":rt="focus",G=$u;break;case"focusout":rt="blur",G=$u;break;case"beforeblur":case"afterblur":G=$u;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Xp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=_A;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=UA;break;case gg:case mg:case yg:G=CA;break;case bg:G=zA;break;case"scroll":case"scrollend":G=xA;break;case"wheel":G=GA;break;case"copy":case"cut":case"paste":G=DA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Kp;break;case"toggle":case"beforetoggle":G=qA}var mt=(s&4)!==0,Yt=!mt&&(n==="scroll"||n==="scrollend"),B=mt?H!==null?H+"Capture":null:H;mt=[];for(var O=z,F;O!==null;){var Y=O;if(F=Y.stateNode,Y=Y.tag,Y!==5&&Y!==26&&Y!==27||F===null||B===null||(Y=Br(O,B),Y!=null&&mt.push(bo(O,Y,F))),Yt)break;O=O.return}0<mt.length&&(H=new G(H,rt,null,o,$),W.push({event:H,listeners:mt}))}}if((s&7)===0){t:{if(H=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",H&&o!==Uu&&(rt=o.relatedTarget||o.fromElement)&&(Sa(rt)||rt[xa]))break t;if((G||H)&&(H=$.window===$?$:(H=$.ownerDocument)?H.defaultView||H.parentWindow:window,G?(rt=o.relatedTarget||o.toElement,G=z,rt=rt?Sa(rt):null,rt!==null&&(Yt=l(rt),mt=rt.tag,rt!==Yt||mt!==5&&mt!==27&&mt!==6)&&(rt=null)):(G=null,rt=z),G!==rt)){if(mt=Xp,Y="onMouseLeave",B="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(mt=Kp,Y="onPointerLeave",B="onPointerEnter",O="pointer"),Yt=G==null?H:jr(G),F=rt==null?H:jr(rt),H=new mt(Y,O+"leave",G,o,$),H.target=Yt,H.relatedTarget=F,Y=null,Sa($)===z&&(mt=new mt(B,O+"enter",rt,o,$),mt.target=F,mt.relatedTarget=Yt,Y=mt),Yt=Y,G&&rt)e:{for(mt=Vx,B=G,O=rt,F=0,Y=B;Y;Y=mt(Y))F++;Y=0;for(var ut=O;ut;ut=mt(ut))Y++;for(;0<F-Y;)B=mt(B),F--;for(;0<Y-F;)O=mt(O),Y--;for(;F--;){if(B===O||O!==null&&B===O.alternate){mt=B;break e}B=mt(B),O=mt(O)}mt=null}else mt=null;G!==null&&zy(W,H,G,mt,!1),rt!==null&&Yt!==null&&zy(W,Yt,rt,mt,!0)}}t:{if(H=z?jr(z):window,G=H.nodeName&&H.nodeName.toLowerCase(),G==="select"||G==="input"&&H.type==="file")var jt=sg;else if(ng(H))if(ag)jt=ex;else{jt=JA;var lt=ZA}else G=H.nodeName,!G||G.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?z&&Bu(z.elementType)&&(jt=sg):jt=tx;if(jt&&(jt=jt(n,z))){ig(W,jt,o,$);break t}lt&&lt(n,H,z),n==="focusout"&&z&&H.type==="number"&&z.memoizedProps.value!=null&&ju(H,"number",H.value)}switch(lt=z?jr(z):window,n){case"focusin":(ng(lt)||lt.contentEditable==="true")&&(Ma=lt,Zu=z,$r=null);break;case"focusout":$r=Zu=Ma=null;break;case"mousedown":Ju=!0;break;case"contextmenu":case"mouseup":case"dragend":Ju=!1,fg(W,o,$);break;case"selectionchange":if(ix)break;case"keydown":case"keyup":fg(W,o,$)}var Et;if(Xu)t:{switch(n){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else ka?tg(n,o)&&(kt="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(kt="onCompositionStart");kt&&(Qp&&o.locale!=="ko"&&(ka||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&ka&&(Et=$p()):(Ji=$,Gu="value"in Ji?Ji.value:Ji.textContent,ka=!0)),lt=bc(z,kt),0<lt.length&&(kt=new Wp(kt,n,null,o,$),W.push({event:kt,listeners:lt}),Et?kt.data=Et:(Et=eg(o),Et!==null&&(kt.data=Et)))),(Et=YA?XA(n,o):WA(n,o))&&(kt=bc(z,"onBeforeInput"),0<kt.length&&(lt=new Wp("onBeforeInput","beforeinput",null,o,$),W.push({event:lt,listeners:kt}),lt.data=Et)),Fx(W,n,z,o,$)}Uy(W,s)})}function bo(n,s,o){return{instance:n,listener:s,currentTarget:o}}function bc(n,s){for(var o=s+"Capture",u=[];n!==null;){var p=n,y=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||y===null||(p=Br(n,o),p!=null&&u.unshift(bo(n,p,y)),p=Br(n,s),p!=null&&u.push(bo(n,p,y))),n.tag===3)return u;n=n.return}return[]}function Vx(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function zy(n,s,o,u,p){for(var y=s._reactName,A=[];o!==null&&o!==u;){var C=o,N=C.alternate,z=C.stateNode;if(C=C.tag,N!==null&&N===u)break;C!==5&&C!==26&&C!==27||z===null||(N=z,p?(z=Br(o,y),z!=null&&A.unshift(bo(o,z,N))):p||(z=Br(o,y),z!=null&&A.push(bo(o,z,N)))),o=o.return}A.length!==0&&n.push({event:s,listeners:A})}var qx=/\r\n?/g,$x=/\u0000|\uFFFD/g;function Hy(n){return(typeof n=="string"?n:""+n).replace(qx,`
`).replace($x,"")}function Gy(n,s){return s=Hy(s),Hy(n)===s}function $t(n,s,o,u,p,y){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Ra(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Ra(n,""+u);break;case"className":xl(n,"class",u);break;case"tabIndex":xl(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":xl(n,o,u);break;case"style":Gp(n,u,y);break;case"data":if(s!=="object"){xl(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=_l(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(o==="formAction"?(s!=="input"&&$t(n,s,"name",p.name,p,null),$t(n,s,"formEncType",p.formEncType,p,null),$t(n,s,"formMethod",p.formMethod,p,null),$t(n,s,"formTarget",p.formTarget,p,null)):($t(n,s,"encType",p.encType,p,null),$t(n,s,"method",p.method,p,null),$t(n,s,"target",p.target,p,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=_l(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=mi);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=_l(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":Rt("beforetoggle",n),Rt("toggle",n),Al(n,"popover",u);break;case"xlinkActuate":gi(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":gi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":gi(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":gi(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":gi(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":gi(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":gi(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":gi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":gi(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Al(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=wA.get(o)||o,Al(n,o,u))}}function _d(n,s,o,u,p,y){switch(o){case"style":Gp(n,u,y);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(p.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Ra(n,u):(typeof u=="number"||typeof u=="bigint")&&Ra(n,""+u);break;case"onScroll":u!=null&&Rt("scroll",n);break;case"onScrollEnd":u!=null&&Rt("scrollend",n);break;case"onClick":u!=null&&(n.onclick=mi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Op.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(p=o.endsWith("Capture"),s=o.slice(2,p?o.length-7:void 0),y=n[ze]||null,y=y!=null?y[o]:null,typeof y=="function"&&n.removeEventListener(s,y,p),typeof u=="function")){typeof y!="function"&&y!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,p);break t}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Al(n,o,u)}}}function je(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",n),Rt("load",n);var u=!1,p=!1,y;for(y in o)if(o.hasOwnProperty(y)){var A=o[y];if(A!=null)switch(y){case"src":u=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$t(n,s,y,A,o,null)}}p&&$t(n,s,"srcSet",o.srcSet,o,null),u&&$t(n,s,"src",o.src,o,null);return;case"input":Rt("invalid",n);var C=y=A=p=null,N=null,z=null;for(u in o)if(o.hasOwnProperty(u)){var $=o[u];if($!=null)switch(u){case"name":p=$;break;case"type":A=$;break;case"checked":N=$;break;case"defaultChecked":z=$;break;case"value":y=$;break;case"defaultValue":C=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,s));break;default:$t(n,s,u,$,o,null)}}Up(n,y,C,N,z,A,p,!1);return;case"select":Rt("invalid",n),u=A=y=null;for(p in o)if(o.hasOwnProperty(p)&&(C=o[p],C!=null))switch(p){case"value":y=C;break;case"defaultValue":A=C;break;case"multiple":u=C;default:$t(n,s,p,C,o,null)}s=y,o=A,n.multiple=!!u,s!=null?Ca(n,!!u,s,!1):o!=null&&Ca(n,!!u,o,!0);return;case"textarea":Rt("invalid",n),y=p=u=null;for(A in o)if(o.hasOwnProperty(A)&&(C=o[A],C!=null))switch(A){case"value":u=C;break;case"defaultValue":p=C;break;case"children":y=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:$t(n,s,A,C,o,null)}zp(n,u,p,y);return;case"option":for(N in o)o.hasOwnProperty(N)&&(u=o[N],u!=null)&&(N==="selected"?n.selected=u&&typeof u!="function"&&typeof u!="symbol":$t(n,s,N,u,o,null));return;case"dialog":Rt("beforetoggle",n),Rt("toggle",n),Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":Rt("load",n);break;case"video":case"audio":for(u=0;u<yo.length;u++)Rt(yo[u],n);break;case"image":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"embed":case"source":case"link":Rt("error",n),Rt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in o)if(o.hasOwnProperty(z)&&(u=o[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:$t(n,s,z,u,o,null)}return;default:if(Bu(s)){for($ in o)o.hasOwnProperty($)&&(u=o[$],u!==void 0&&_d(n,s,$,u,o,void 0));return}}for(C in o)o.hasOwnProperty(C)&&(u=o[C],u!=null&&$t(n,s,C,u,o,null))}function Yx(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,y=null,A=null,C=null,N=null,z=null,$=null;for(G in o){var W=o[G];if(o.hasOwnProperty(G)&&W!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":N=W;default:u.hasOwnProperty(G)||$t(n,s,G,null,u,W)}}for(var H in u){var G=u[H];if(W=o[H],u.hasOwnProperty(H)&&(G!=null||W!=null))switch(H){case"type":y=G;break;case"name":p=G;break;case"checked":z=G;break;case"defaultChecked":$=G;break;case"value":A=G;break;case"defaultValue":C=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==W&&$t(n,s,H,G,u,W)}}Pu(n,A,C,N,z,$,y,p);return;case"select":G=A=C=H=null;for(y in o)if(N=o[y],o.hasOwnProperty(y)&&N!=null)switch(y){case"value":break;case"multiple":G=N;default:u.hasOwnProperty(y)||$t(n,s,y,null,u,N)}for(p in u)if(y=u[p],N=o[p],u.hasOwnProperty(p)&&(y!=null||N!=null))switch(p){case"value":H=y;break;case"defaultValue":C=y;break;case"multiple":A=y;default:y!==N&&$t(n,s,p,y,u,N)}s=C,o=A,u=G,H!=null?Ca(n,!!o,H,!1):!!u!=!!o&&(s!=null?Ca(n,!!o,s,!0):Ca(n,!!o,o?[]:"",!1));return;case"textarea":G=H=null;for(C in o)if(p=o[C],o.hasOwnProperty(C)&&p!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:$t(n,s,C,null,u,p)}for(A in u)if(p=u[A],y=o[A],u.hasOwnProperty(A)&&(p!=null||y!=null))switch(A){case"value":H=p;break;case"defaultValue":G=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==y&&$t(n,s,A,p,u,y)}Fp(n,H,G);return;case"option":for(var rt in o)H=o[rt],o.hasOwnProperty(rt)&&H!=null&&!u.hasOwnProperty(rt)&&(rt==="selected"?n.selected=!1:$t(n,s,rt,null,u,H));for(N in u)H=u[N],G=o[N],u.hasOwnProperty(N)&&H!==G&&(H!=null||G!=null)&&(N==="selected"?n.selected=H&&typeof H!="function"&&typeof H!="symbol":$t(n,s,N,H,u,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mt in o)H=o[mt],o.hasOwnProperty(mt)&&H!=null&&!u.hasOwnProperty(mt)&&$t(n,s,mt,null,u,H);for(z in u)if(H=u[z],G=o[z],u.hasOwnProperty(z)&&H!==G&&(H!=null||G!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(i(137,s));break;default:$t(n,s,z,H,u,G)}return;default:if(Bu(s)){for(var Yt in o)H=o[Yt],o.hasOwnProperty(Yt)&&H!==void 0&&!u.hasOwnProperty(Yt)&&_d(n,s,Yt,void 0,u,H);for($ in u)H=u[$],G=o[$],!u.hasOwnProperty($)||H===G||H===void 0&&G===void 0||_d(n,s,$,H,u,G);return}}for(var B in o)H=o[B],o.hasOwnProperty(B)&&H!=null&&!u.hasOwnProperty(B)&&$t(n,s,B,null,u,H);for(W in u)H=u[W],G=o[W],!u.hasOwnProperty(W)||H===G||H==null&&G==null||$t(n,s,W,H,u,G)}function Vy(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xx(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),u=0;u<o.length;u++){var p=o[u],y=p.transferSize,A=p.initiatorType,C=p.duration;if(y&&C&&Vy(A)){for(A=0,C=p.responseEnd,u+=1;u<o.length;u++){var N=o[u],z=N.startTime;if(z>C)break;var $=N.transferSize,W=N.initiatorType;$&&Vy(W)&&(N=N.responseEnd,A+=$*(N<C?1:(C-z)/(N-z)))}if(--u,s+=8*(y+A)/(p.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ed=null,Td=null;function vc(n){return n.nodeType===9?n:n.ownerDocument}function qy(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $y(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Cd(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Rd=null;function Wx(){var n=window.event;return n&&n.type==="popstate"?n===Rd?!1:(Rd=n,!0):(Rd=null,!1)}var Yy=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(n){return Xy.resolve(null).then(n).catch(Zx)}:Yy;function Zx(n){setTimeout(function(){throw n})}function ms(n){return n==="head"}function Wy(n,s){var o=s,u=0;do{var p=o.nextSibling;if(n.removeChild(o),p&&p.nodeType===8)if(o=p.data,o==="/$"||o==="/&"){if(u===0){n.removeChild(p),ar(s);return}u--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")u++;else if(o==="html")vo(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,vo(o);for(var y=o.firstChild;y;){var A=y.nextSibling,C=y.nodeName;y[Pr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&y.rel.toLowerCase()==="stylesheet"||o.removeChild(y),y=A}}else o==="body"&&vo(n.ownerDocument.body);o=p}while(o);ar(s)}function Ky(n,s){var o=n;n=0;do{var u=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),u&&u.nodeType===8)if(o=u.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=u}while(o)}function Dd(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Dd(o),Ou(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Jx(n,s,o,u){for(;n.nodeType===1;){var p=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[Pr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(y=n.getAttribute("rel"),y==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(y!==p.rel||n.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||n.getAttribute("title")!==(p.title==null?null:p.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(y=n.getAttribute("src"),(y!==(p.src==null?null:p.src)||n.getAttribute("type")!==(p.type==null?null:p.type)||n.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&y&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var y=p.name==null?null:""+p.name;if(p.type==="hidden"&&n.getAttribute("name")===y)return n}else return n;if(n=kn(n.nextSibling),n===null)break}return null}function tS(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=kn(n.nextSibling),n===null))return null;return n}function Qy(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=kn(n.nextSibling),n===null))return null;return n}function Nd(n){return n.data==="$?"||n.data==="$~"}function kd(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function eS(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function kn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Md=null;function Zy(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return kn(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function Jy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function tb(n,s,o){switch(s=vc(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function vo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ou(n)}var Mn=new Map,eb=new Set;function wc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Mi=U.d;U.d={f:nS,r:iS,D:sS,C:aS,L:rS,m:oS,X:cS,S:lS,M:uS};function nS(){var n=Mi.f(),s=hc();return n||s}function iS(n){var s=_a(n);s!==null&&s.tag===5&&s.type==="form"?bm(s):Mi.r(n)}var nr=typeof document>"u"?null:document;function nb(n,s,o){var u=nr;if(u&&typeof s=="string"&&s){var p=_n(s);p='link[rel="'+n+'"][href="'+p+'"]',typeof o=="string"&&(p+='[crossorigin="'+o+'"]'),eb.has(p)||(eb.add(p),n={rel:n,crossOrigin:o,href:s},u.querySelector(p)===null&&(s=u.createElement("link"),je(s,"link",n),De(s),u.head.appendChild(s)))}}function sS(n){Mi.D(n),nb("dns-prefetch",n,null)}function aS(n,s){Mi.C(n,s),nb("preconnect",n,s)}function rS(n,s,o){Mi.L(n,s,o);var u=nr;if(u&&n&&s){var p='link[rel="preload"][as="'+_n(s)+'"]';s==="image"&&o&&o.imageSrcSet?(p+='[imagesrcset="'+_n(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(p+='[imagesizes="'+_n(o.imageSizes)+'"]')):p+='[href="'+_n(n)+'"]';var y=p;switch(s){case"style":y=ir(n);break;case"script":y=sr(n)}Mn.has(y)||(n=m({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),Mn.set(y,n),u.querySelector(p)!==null||s==="style"&&u.querySelector(wo(y))||s==="script"&&u.querySelector(Ao(y))||(s=u.createElement("link"),je(s,"link",n),De(s),u.head.appendChild(s)))}}function oS(n,s){Mi.m(n,s);var o=nr;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+_n(u)+'"][href="'+_n(n)+'"]',y=p;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=sr(n)}if(!Mn.has(y)&&(n=m({rel:"modulepreload",href:n},s),Mn.set(y,n),o.querySelector(p)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ao(y)))return}u=o.createElement("link"),je(u,"link",n),De(u),o.head.appendChild(u)}}}function lS(n,s,o){Mi.S(n,s,o);var u=nr;if(u&&n){var p=Ea(u).hoistableStyles,y=ir(n);s=s||"default";var A=p.get(y);if(!A){var C={loading:0,preload:null};if(A=u.querySelector(wo(y)))C.loading=5;else{n=m({rel:"stylesheet",href:n,"data-precedence":s},o),(o=Mn.get(y))&&Ld(n,o);var N=A=u.createElement("link");De(N),je(N,"link",n),N._p=new Promise(function(z,$){N.onload=z,N.onerror=$}),N.addEventListener("load",function(){C.loading|=1}),N.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Ac(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:C},p.set(y,A)}}}function cS(n,s){Mi.X(n,s);var o=nr;if(o&&n){var u=Ea(o).hoistableScripts,p=sr(n),y=u.get(p);y||(y=o.querySelector(Ao(p)),y||(n=m({src:n,async:!0},s),(s=Mn.get(p))&&Od(n,s),y=o.createElement("script"),De(y),je(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function uS(n,s){Mi.M(n,s);var o=nr;if(o&&n){var u=Ea(o).hoistableScripts,p=sr(n),y=u.get(p);y||(y=o.querySelector(Ao(p)),y||(n=m({src:n,async:!0,type:"module"},s),(s=Mn.get(p))&&Od(n,s),y=o.createElement("script"),De(y),je(y,"link",n),o.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},u.set(p,y))}}function ib(n,s,o,u){var p=(p=gt.current)?wc(p):null;if(!p)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=ir(o.href),o=Ea(p).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=ir(o.href);var y=Ea(p).hoistableStyles,A=y.get(n);if(A||(p=p.ownerDocument||p,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(n,A),(y=p.querySelector(wo(n)))&&!y._p&&(A.instance=y,A.state.loading=5),Mn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Mn.set(n,o),y||hS(p,n,o,A.state))),s&&u===null)throw Error(i(528,""));return A}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=sr(o),o=Ea(p).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function ir(n){return'href="'+_n(n)+'"'}function wo(n){return'link[rel="stylesheet"]['+n+"]"}function sb(n){return m({},n,{"data-precedence":n.precedence,precedence:null})}function hS(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),je(s,"link",o),De(s),n.head.appendChild(s))}function sr(n){return'[src="'+_n(n)+'"]'}function Ao(n){return"script[async]"+n}function ab(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+_n(o.href)+'"]');if(u)return s.instance=u,De(u),u;var p=m({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),De(u),je(u,"style",p),Ac(u,o.precedence,n),s.instance=u;case"stylesheet":p=ir(o.href);var y=n.querySelector(wo(p));if(y)return s.state.loading|=4,s.instance=y,De(y),y;u=sb(o),(p=Mn.get(p))&&Ld(u,p),y=(n.ownerDocument||n).createElement("link"),De(y);var A=y;return A._p=new Promise(function(C,N){A.onload=C,A.onerror=N}),je(y,"link",u),s.state.loading|=4,Ac(y,o.precedence,n),s.instance=y;case"script":return y=sr(o.src),(p=n.querySelector(Ao(y)))?(s.instance=p,De(p),p):(u=o,(p=Mn.get(y))&&(u=m({},o),Od(u,p)),n=n.ownerDocument||n,p=n.createElement("script"),De(p),je(p,"link",u),n.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ac(u,o.precedence,n));return s.instance}function Ac(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=u.length?u[u.length-1]:null,y=p,A=0;A<u.length;A++){var C=u[A];if(C.dataset.precedence===s)y=C;else if(y!==p)break}y?y.parentNode.insertBefore(n,y.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Ld(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Od(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var xc=null;function rb(n,s,o){if(xc===null){var u=new Map,p=xc=new Map;p.set(o,u)}else p=xc,u=p.get(o),u||(u=new Map,p.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),p=0;p<o.length;p++){var y=o[p];if(!(y[Pr]||y[te]||n==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var A=y.getAttribute(s)||"";A=n+A;var C=u.get(A);C?C.push(y):u.set(A,[y])}}return u}function ob(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function dS(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function lb(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function fS(n,s,o,u){if(o.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var p=ir(u.href),y=s.querySelector(wo(p));if(y){s=y._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Sc.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=y,De(y);return}y=s.ownerDocument||s,u=sb(u),(p=Mn.get(p))&&Ld(u,p),y=y.createElement("link"),De(y);var A=y;A._p=new Promise(function(C,N){A.onload=C,A.onerror=N}),je(y,"link",u),o.instance=y}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Sc.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Id=0;function pS(n,s){return n.stylesheets&&n.count===0&&Ec(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var u=setTimeout(function(){if(n.stylesheets&&Ec(n,n.stylesheets),n.unsuspend){var y=n.unsuspend;n.unsuspend=null,y()}},6e4+s);0<n.imgBytes&&Id===0&&(Id=62500*Xx());var p=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ec(n,n.stylesheets),n.unsuspend)){var y=n.unsuspend;n.unsuspend=null,y()}},(n.imgBytes>Id?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(u),clearTimeout(p)}}:null}function Sc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ec(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var _c=null;function Ec(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,_c=new Map,s.forEach(gS,n),_c=null,Sc.call(n))}function gS(n,s){if(!(s.state.loading&4)){var o=_c.get(n);if(o)var u=o.get(null);else{o=new Map,_c.set(n,o);for(var p=n.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<p.length;y++){var A=p[y];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(o.set(A.dataset.precedence,A),u=A)}u&&o.set(null,u)}p=s.instance,A=p.getAttribute("data-precedence"),y=o.get(A)||u,y===u&&o.set(null,p),o.set(A,p),this.count++,u=Sc.bind(this),p.addEventListener("load",u),p.addEventListener("error",u),y?y.parentNode.insertBefore(p,y.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(p,n.firstChild)),s.state.loading|=4}}var xo={$$typeof:R,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function mS(n,s,o,u,p,y,A,C,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ir(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ir(0),this.hiddenUpdates=Ir(null),this.identifierPrefix=u,this.onUncaughtError=p,this.onCaughtError=y,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function cb(n,s,o,u,p,y,A,C,N,z,$,W){return n=new mS(n,s,o,A,N,z,$,W,C),s=1,y===!0&&(s|=24),y=fn(3,null,null,s),n.current=y,y.stateNode=n,s=ph(),s.refCount++,n.pooledCache=s,s.refCount++,y.memoizedState={element:u,isDehydrated:o,cache:s},bh(y),n}function ub(n){return n?(n=Ia,n):Ia}function hb(n,s,o,u,p,y){p=ub(p),u.context===null?u.context=p:u.pendingContext=p,u=as(s),u.payload={element:o},y=y===void 0?null:y,y!==null&&(u.callback=y),o=rs(n,u,s),o!==null&&(sn(o,n,s),Jr(o,n,s))}function db(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Pd(n,s){db(n,s),(n=n.alternate)&&db(n,s)}function fb(n){if(n.tag===13||n.tag===31){var s=zs(n,67108864);s!==null&&sn(s,n,67108864),Pd(n,67108864)}}function pb(n){if(n.tag===13||n.tag===31){var s=bn();s=Te(s);var o=zs(n,s);o!==null&&sn(o,n,s),Pd(n,s)}}var Tc=!0;function yS(n,s,o,u){var p=M.T;M.T=null;var y=U.p;try{U.p=2,jd(n,s,o,u)}finally{U.p=y,M.T=p}}function bS(n,s,o,u){var p=M.T;M.T=null;var y=U.p;try{U.p=8,jd(n,s,o,u)}finally{U.p=y,M.T=p}}function jd(n,s,o,u){if(Tc){var p=Bd(u);if(p===null)Sd(n,s,u,Cc,o),mb(n,u);else if(wS(p,n,s,o,u))u.stopPropagation();else if(mb(n,u),s&4&&-1<vS.indexOf(n)){for(;p!==null;){var y=_a(p);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var A=pi(y.pendingLanes);if(A!==0){var C=y;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var N=1<<31-$e(A);C.entanglements[1]|=N,A&=~N}Zn(y),(Ft&6)===0&&(cc=Fe()+500,mo(0))}}break;case 31:case 13:C=zs(y,2),C!==null&&sn(C,y,2),hc(),Pd(y,2)}if(y=Bd(u),y===null&&Sd(n,s,u,Cc,o),y===p)break;p=y}p!==null&&u.stopPropagation()}else Sd(n,s,u,null,o)}}function Bd(n){return n=Fu(n),Ud(n)}var Cc=null;function Ud(n){if(Cc=null,n=Sa(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===31){if(n=h(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Cc=n,null}function gb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kp()){case ma:return 2;case bl:return 8;case ya:case Or:return 32;case Yn:return 268435456;default:return 32}default:return 32}}var Fd=!1,ys=null,bs=null,vs=null,So=new Map,_o=new Map,ws=[],vS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function mb(n,s){switch(n){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":So.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_o.delete(s.pointerId)}}function Eo(n,s,o,u,p,y){return n===null||n.nativeEvent!==y?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:y,targetContainers:[p]},s!==null&&(s=_a(s),s!==null&&fb(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),n)}function wS(n,s,o,u,p){switch(s){case"focusin":return ys=Eo(ys,n,s,o,u,p),!0;case"dragenter":return bs=Eo(bs,n,s,o,u,p),!0;case"mouseover":return vs=Eo(vs,n,s,o,u,p),!0;case"pointerover":var y=p.pointerId;return So.set(y,Eo(So.get(y)||null,n,s,o,u,p)),!0;case"gotpointercapture":return y=p.pointerId,_o.set(y,Eo(_o.get(y)||null,n,s,o,u,p)),!0}return!1}function yb(n){var s=Sa(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,Lt(n.priority,function(){pb(o)});return}}else if(s===31){if(s=h(o),s!==null){n.blockedOn=s,Lt(n.priority,function(){pb(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Rc(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Bd(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Uu=u,o.target.dispatchEvent(u),Uu=null}else return s=_a(o),s!==null&&fb(s),n.blockedOn=o,!1;s.shift()}return!0}function bb(n,s,o){Rc(n)&&o.delete(s)}function AS(){Fd=!1,ys!==null&&Rc(ys)&&(ys=null),bs!==null&&Rc(bs)&&(bs=null),vs!==null&&Rc(vs)&&(vs=null),So.forEach(bb),_o.forEach(bb)}function Dc(n,s){n.blockedOn===s&&(n.blockedOn=null,Fd||(Fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,AS)))}var Nc=null;function vb(n){Nc!==n&&(Nc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Nc===n&&(Nc=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],p=n[s+2];if(typeof u!="function"){if(Ud(u||o)===null)continue;break}var y=_a(o);y!==null&&(n.splice(s,3),s-=3,Bh(y,{pending:!0,data:p,method:o.method,action:u},u,p))}}))}function ar(n){function s(N){return Dc(N,n)}ys!==null&&Dc(ys,n),bs!==null&&Dc(bs,n),vs!==null&&Dc(vs,n),So.forEach(s),_o.forEach(s);for(var o=0;o<ws.length;o++){var u=ws[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<ws.length&&(o=ws[0],o.blockedOn===null);)yb(o),o.blockedOn===null&&ws.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var p=o[u],y=o[u+1],A=p[ze]||null;if(typeof y=="function")A||vb(o);else if(A){var C=null;if(y&&y.hasAttribute("formAction")){if(p=y,A=y[ze]||null)C=A.formAction;else if(Ud(p)!==null)continue}else C=A.action;typeof C=="function"?o[u+1]=C:(o.splice(u,3),u-=3),vb(o)}}}function wb(){function n(y){y.canIntercept&&y.info==="react-transition"&&y.intercept({handler:function(){return new Promise(function(A){return p=A})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),u||setTimeout(o,20)}function o(){if(!u&&!navigation.transition){var y=navigation.currentEntry;y&&y.url!=null&&navigation.navigate(y.url,{state:y.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,p=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){u=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function zd(n){this._internalRoot=n}kc.prototype.render=zd.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=bn();hb(o,u,n,s,null,null)},kc.prototype.unmount=zd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;hb(n.current,2,null,n,null,null),hc(),s[xa]=null}};function kc(n){this._internalRoot=n}kc.prototype.unstable_scheduleHydration=function(n){if(n){var s=se();n={blockedOn:null,target:n,priority:s};for(var o=0;o<ws.length&&s!==0&&s<ws[o].priority;o++);ws.splice(o,0,n),o===0&&yb(n)}};var Ab=t.version;if(Ab!=="19.2.4")throw Error(i(527,Ab,"19.2.4"));U.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var xS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mc.isDisabled&&Mc.supportsFiber)try{Zi=Mc.inject(xS),qe=Mc}catch{}}return Co.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",p=Rm,y=Dm,A=Nm;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(y=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=cb(n,1,!1,null,null,o,u,null,p,y,A,wb),n[xa]=s.current,xd(n),new zd(s)},Co.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,p="",y=Rm,A=Dm,C=Nm,N=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(A=o.onCaughtError),o.onRecoverableError!==void 0&&(C=o.onRecoverableError),o.formState!==void 0&&(N=o.formState)),s=cb(n,1,!0,s,o??null,u,p,N,y,A,C,wb),s.context=ub(null),o=s.current,u=bn(),u=Te(u),p=as(u),p.callback=null,rs(o,p,u),o=u,s.current.lanes=o,Ps(s,o),Zn(s),n[xa]=s.current,xd(n),new kc(s)},Co.version="19.2.4",Co}var Lb;function MS(){if(Lb)return qd.exports;Lb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),qd.exports=kS(),qd.exports}var LS=MS();const OS=tv(LS);var Ob="popstate";function IS(r={}){function t(i,a){let{pathname:l,search:c,hash:h}=i.location;return vf("",{pathname:l,search:c,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function e(i,a){return typeof a=="string"?a:Go(a)}return jS(t,e,null,r)}function he(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function ui(r,t){if(!r){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function PS(){return Math.random().toString(36).substring(2,10)}function Ib(r,t){return{usr:r.state,key:r.key,idx:t}}function vf(r,t,e=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof t=="string"?_r(t):t,state:e,key:t&&t.key||i||PS()}}function Go({pathname:r="/",search:t="",hash:e=""}){return t&&t!=="?"&&(r+=t.charAt(0)==="?"?t:"?"+t),e&&e!=="#"&&(r+=e.charAt(0)==="#"?e:"#"+e),r}function _r(r){let t={};if(r){let e=r.indexOf("#");e>=0&&(t.hash=r.substring(e),r=r.substring(0,e));let i=r.indexOf("?");i>=0&&(t.search=r.substring(i),r=r.substring(0,i)),r&&(t.pathname=r)}return t}function jS(r,t,e,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,h="POP",d=null,f=g();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function g(){return(c.state||{idx:null}).idx}function m(){h="POP";let S=g(),E=S==null?null:S-f;f=S,d&&d({action:h,location:x.location,delta:E})}function v(S,E){h="PUSH";let T=vf(x.location,S,E);f=g()+1;let R=Ib(T,f),k=x.createHref(T);try{c.pushState(R,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;a.location.assign(k)}l&&d&&d({action:h,location:x.location,delta:1})}function w(S,E){h="REPLACE";let T=vf(x.location,S,E);f=g();let R=Ib(T,f),k=x.createHref(T);c.replaceState(R,"",k),l&&d&&d({action:h,location:x.location,delta:0})}function _(S){return BS(S)}let x={get action(){return h},get location(){return r(a,c)},listen(S){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Ob,m),d=S,()=>{a.removeEventListener(Ob,m),d=null}},createHref(S){return t(a,S)},createURL:_,encodeLocation(S){let E=_(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:w,go(S){return c.go(S)}};return x}function BS(r,t=!1){let e="http://localhost";typeof window<"u"&&(e=window.location.origin!=="null"?window.location.origin:window.location.href),he(e,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Go(r);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=e+i),new URL(i,e)}function ev(r,t,e="/"){return US(r,t,e,!1)}function US(r,t,e,i){let a=typeof t=="string"?_r(t):t,l=Fi(a.pathname||"/",e);if(l==null)return null;let c=nv(r);FS(c);let h=null;for(let d=0;h==null&&d<c.length;++d){let f=QS(l);h=WS(c[d],f,i)}return h}function nv(r,t=[],e=[],i="",a=!1){let l=(c,h,d=a,f)=>{let g={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(i)&&d)return;he(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length)}let m=Ui([i,g.relativePath]),v=e.concat(g);c.children&&c.children.length>0&&(he(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),nv(c.children,t,v,m,d)),!(c.path==null&&!c.index)&&t.push({path:m,score:YS(m,c.index),routesMeta:v})};return r.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let d of iv(c.path))l(c,h,!0,d)}),t}function iv(r){let t=r.split("/");if(t.length===0)return[];let[e,...i]=t,a=e.endsWith("?"),l=e.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=iv(i.join("/")),h=[];return h.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&h.push(...c),h.map(d=>r.startsWith("/")&&d===""?"/":d)}function FS(r){r.sort((t,e)=>t.score!==e.score?e.score-t.score:XS(t.routesMeta.map(i=>i.childrenIndex),e.routesMeta.map(i=>i.childrenIndex)))}var zS=/^:[\w-]+$/,HS=3,GS=2,VS=1,qS=10,$S=-2,Pb=r=>r==="*";function YS(r,t){let e=r.split("/"),i=e.length;return e.some(Pb)&&(i+=$S),t&&(i+=GS),e.filter(a=>!Pb(a)).reduce((a,l)=>a+(zS.test(l)?HS:l===""?VS:qS),i)}function XS(r,t){return r.length===t.length&&r.slice(0,-1).every((i,a)=>i===t[a])?r[r.length-1]-t[t.length-1]:0}function WS(r,t,e=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let h=0;h<i.length;++h){let d=i[h],f=h===i.length-1,g=l==="/"?t:t.slice(l.length)||"/",m=eu({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},g),v=d.route;if(!m&&f&&e&&!i[i.length-1].route.index&&(m=eu({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!m)return null;Object.assign(a,m.params),c.push({params:a,pathname:Ui([l,m.pathname]),pathnameBase:e_(Ui([l,m.pathnameBase])),route:v}),m.pathnameBase!=="/"&&(l=Ui([l,m.pathnameBase]))}return c}function eu(r,t){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[e,i]=KS(r.path,r.caseSensitive,r.end),a=t.match(e);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((f,{paramName:g,isOptional:m},v)=>{if(g==="*"){let _=h[v]||"";c=l.slice(0,l.length-_.length).replace(/(.)\/+$/,"$1")}const w=h[v];return m&&!w?f[g]=void 0:f[g]=(w||"").replace(/%2F/g,"/"),f},{}),pathname:l,pathnameBase:c,pattern:r}}function KS(r,t=!1,e=!0){ui(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,d)=>(i.push({paramName:h,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function QS(r){try{return r.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ui(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),r}}function Fi(r,t){if(t==="/")return r;if(!r.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,i=r.charAt(e);return i&&i!=="/"?null:r.slice(e)||"/"}var ZS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function JS(r,t="/"){let{pathname:e,search:i="",hash:a=""}=typeof r=="string"?_r(r):r,l;return e?(e=e.replace(/\/\/+/g,"/"),e.startsWith("/")?l=jb(e.substring(1),"/"):l=jb(e,t)):l=t,{pathname:l,search:n_(i),hash:i_(a)}}function jb(r,t){let e=t.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?e.length>1&&e.pop():a!=="."&&e.push(a)}),e.length>1?e.join("/"):"/"}function Wd(r,t,e,i){return`Cannot include a '${r}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${e}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t_(r){return r.filter((t,e)=>e===0||t.route.path&&t.route.path.length>0)}function sv(r){let t=t_(r);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function av(r,t,e,i=!1){let a;typeof r=="string"?a=_r(r):(a={...r},he(!a.pathname||!a.pathname.includes("?"),Wd("?","pathname","search",a)),he(!a.pathname||!a.pathname.includes("#"),Wd("#","pathname","hash",a)),he(!a.search||!a.search.includes("#"),Wd("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,h;if(c==null)h=e;else{let m=t.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),m-=1;a.pathname=v.join("/")}h=m>=0?t[m]:"/"}let d=JS(a,h),f=c&&c!=="/"&&c.endsWith("/"),g=(l||c===".")&&e.endsWith("/");return!d.pathname.endsWith("/")&&(f||g)&&(d.pathname+="/"),d}var Ui=r=>r.join("/").replace(/\/\/+/g,"/"),e_=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),n_=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,i_=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,s_=class{constructor(r,t,e,i=!1){this.status=r,this.statusText=t||"",this.internal=i,e instanceof Error?(this.data=e.toString(),this.error=e):this.data=e}};function a_(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function r_(r){return r.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var rv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ov(r,t){let e=r;if(typeof e!="string"||!ZS.test(e))return{absoluteURL:void 0,isExternal:!1,to:e};let i=e,a=!1;if(rv)try{let l=new URL(window.location.href),c=e.startsWith("//")?new URL(l.protocol+e):new URL(e),h=Fi(c.pathname,t);c.origin===l.origin&&h!=null?e=h+c.search+c.hash:a=!0}catch{ui(!1,`<Link to="${e}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var lv=["POST","PUT","PATCH","DELETE"];new Set(lv);var o_=["GET",...lv];new Set(o_);var Er=I.createContext(null);Er.displayName="DataRouter";var gu=I.createContext(null);gu.displayName="DataRouterState";var l_=I.createContext(!1),cv=I.createContext({isTransitioning:!1});cv.displayName="ViewTransition";var c_=I.createContext(new Map);c_.displayName="Fetchers";var u_=I.createContext(null);u_.displayName="Await";var Pn=I.createContext(null);Pn.displayName="Navigation";var tl=I.createContext(null);tl.displayName="Location";var hi=I.createContext({outlet:null,matches:[],isDataRoute:!1});hi.displayName="Route";var Vf=I.createContext(null);Vf.displayName="RouteError";var uv="REACT_ROUTER_ERROR",h_="REDIRECT",d_="ROUTE_ERROR_RESPONSE";function f_(r){if(r.startsWith(`${uv}:${h_}:{`))try{let t=JSON.parse(r.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function p_(r){if(r.startsWith(`${uv}:${d_}:{`))try{let t=JSON.parse(r.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new s_(t.status,t.statusText,t.data)}catch{}}function g_(r,{relative:t}={}){he(el(),"useHref() may be used only in the context of a <Router> component.");let{basename:e,navigator:i}=I.useContext(Pn),{hash:a,pathname:l,search:c}=nl(r,{relative:t}),h=l;return e!=="/"&&(h=l==="/"?e:Ui([e,l])),i.createHref({pathname:h,search:c,hash:a})}function el(){return I.useContext(tl)!=null}function jn(){return he(el(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(tl).location}var hv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dv(r){I.useContext(Pn).static||I.useLayoutEffect(r)}function ua(){let{isDataRoute:r}=I.useContext(hi);return r?R_():m_()}function m_(){he(el(),"useNavigate() may be used only in the context of a <Router> component.");let r=I.useContext(Er),{basename:t,navigator:e}=I.useContext(Pn),{matches:i}=I.useContext(hi),{pathname:a}=jn(),l=JSON.stringify(sv(i)),c=I.useRef(!1);return dv(()=>{c.current=!0}),I.useCallback((d,f={})=>{if(ui(c.current,hv),!c.current)return;if(typeof d=="number"){e.go(d);return}let g=av(d,JSON.parse(l),a,f.relative==="path");r==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:Ui([t,g.pathname])),(f.replace?e.replace:e.push)(g,f.state,f)},[t,e,l,a,r])}I.createContext(null);function fv(){let{matches:r}=I.useContext(hi),t=r[r.length-1];return t?t.params:{}}function nl(r,{relative:t}={}){let{matches:e}=I.useContext(hi),{pathname:i}=jn(),a=JSON.stringify(sv(e));return I.useMemo(()=>av(r,JSON.parse(a),i,t==="path"),[r,a,i,t])}function y_(r,t){return pv(r,t)}function pv(r,t,e,i,a){he(el(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=I.useContext(Pn),{matches:c}=I.useContext(hi),h=c[c.length-1],d=h?h.params:{},f=h?h.pathname:"/",g=h?h.pathnameBase:"/",m=h&&h.route;{let T=m&&m.path||"";mv(f,!m||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let v=jn(),w;if(t){let T=typeof t=="string"?_r(t):t;he(g==="/"||T.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),w=T}else w=v;let _=w.pathname||"/",x=_;if(g!=="/"){let T=g.replace(/^\//,"").split("/");x="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let S=ev(r,{pathname:x});ui(m||S!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),ui(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=x_(S&&S.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:Ui([g,l.encodeLocation?l.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:Ui([g,l.encodeLocation?l.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),c,e,i,a);return t&&E?I.createElement(tl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},E):E}function b_(){let r=C_(),t=a_(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),e=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:l},"ErrorBoundary")," or"," ",I.createElement("code",{style:l},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),e?I.createElement("pre",{style:a},e):null,c)}var v_=I.createElement(b_,null),gv=class extends I.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,t){return t.location!==r.location||t.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:t.error,location:t.location,revalidation:r.revalidation||t.revalidation}}componentDidCatch(r,t){this.props.onError?this.props.onError(r,t):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const e=p_(r.digest);e&&(r=e)}let t=r!==void 0?I.createElement(hi.Provider,{value:this.props.routeContext},I.createElement(Vf.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?I.createElement(w_,{error:r},t):t}};gv.contextType=l_;var Kd=new WeakMap;function w_({children:r,error:t}){let{basename:e}=I.useContext(Pn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let i=f_(t.digest);if(i){let a=Kd.get(t);if(a)throw a;let l=ov(i.location,e);if(rv&&!Kd.get(t))if(l.isExternal||i.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:i.replace}));throw Kd.set(t,c),c}return I.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function A_({routeContext:r,match:t,children:e}){let i=I.useContext(Er);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(hi.Provider,{value:r},e)}function x_(r,t=[],e=null,i=null,a=null){if(r==null){if(!e)return null;if(e.errors)r=e.matches;else if(t.length===0&&!e.initialized&&e.matches.length>0)r=e.matches;else return null}let l=r,c=e?.errors;if(c!=null){let g=l.findIndex(m=>m.route.id&&c?.[m.route.id]!==void 0);he(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let h=!1,d=-1;if(e)for(let g=0;g<l.length;g++){let m=l[g];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=g),m.route.id){let{loaderData:v,errors:w}=e,_=m.route.loader&&!v.hasOwnProperty(m.route.id)&&(!w||w[m.route.id]===void 0);if(m.route.lazy||_){h=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let f=e&&i?(g,m)=>{i(g,{location:e.location,params:e.matches?.[0]?.params??{},unstable_pattern:r_(e.matches),errorInfo:m})}:void 0;return l.reduceRight((g,m,v)=>{let w,_=!1,x=null,S=null;e&&(w=c&&m.route.id?c[m.route.id]:void 0,x=m.route.errorElement||v_,h&&(d<0&&v===0?(mv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,S=null):d===v&&(_=!0,S=m.route.hydrateFallbackElement||null)));let E=t.concat(l.slice(0,v+1)),T=()=>{let R;return w?R=x:_?R=S:m.route.Component?R=I.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=g,I.createElement(A_,{match:m,routeContext:{outlet:g,matches:E,isDataRoute:e!=null},children:R})};return e&&(m.route.ErrorBoundary||m.route.errorElement||v===0)?I.createElement(gv,{location:e.location,revalidation:e.revalidation,component:x,error:w,children:T(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:f}):T()},null)}function qf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function S_(r){let t=I.useContext(Er);return he(t,qf(r)),t}function __(r){let t=I.useContext(gu);return he(t,qf(r)),t}function E_(r){let t=I.useContext(hi);return he(t,qf(r)),t}function $f(r){let t=E_(r),e=t.matches[t.matches.length-1];return he(e.route.id,`${r} can only be used on routes that contain a unique "id"`),e.route.id}function T_(){return $f("useRouteId")}function C_(){let r=I.useContext(Vf),t=__("useRouteError"),e=$f("useRouteError");return r!==void 0?r:t.errors?.[e]}function R_(){let{router:r}=S_("useNavigate"),t=$f("useNavigate"),e=I.useRef(!1);return dv(()=>{e.current=!0}),I.useCallback(async(a,l={})=>{ui(e.current,hv),e.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:t,...l}))},[r,t])}var Bb={};function mv(r,t,e){!t&&!Bb[r]&&(Bb[r]=!0,ui(!1,e))}I.memo(D_);function D_({routes:r,future:t,state:e,onError:i}){return pv(r,void 0,e,i,t)}function rn(r){he(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function N_({basename:r="/",children:t=null,location:e,navigationType:i="POP",navigator:a,static:l=!1,unstable_useTransitions:c}){he(!el(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:h,navigator:a,static:l,unstable_useTransitions:c,future:{}}),[h,a,l,c]);typeof e=="string"&&(e=_r(e));let{pathname:f="/",search:g="",hash:m="",state:v=null,key:w="default"}=e,_=I.useMemo(()=>{let x=Fi(f,h);return x==null?null:{location:{pathname:x,search:g,hash:m,state:v,key:w},navigationType:i}},[h,f,g,m,v,w,i]);return ui(_!=null,`<Router basename="${h}"> is not able to match the URL "${f}${g}${m}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:I.createElement(Pn.Provider,{value:d},I.createElement(tl.Provider,{children:t,value:_}))}function k_({children:r,location:t}){return y_(wf(r),t)}function wf(r,t=[]){let e=[];return I.Children.forEach(r,(i,a)=>{if(!I.isValidElement(i))return;let l=[...t,a];if(i.type===I.Fragment){e.push.apply(e,wf(i.props.children,l));return}he(i.type===rn,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),he(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=wf(i.props.children,l)),e.push(c)}),e}var Yc="get",Xc="application/x-www-form-urlencoded";function mu(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function M_(r){return mu(r)&&r.tagName.toLowerCase()==="button"}function L_(r){return mu(r)&&r.tagName.toLowerCase()==="form"}function O_(r){return mu(r)&&r.tagName.toLowerCase()==="input"}function I_(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function P_(r,t){return r.button===0&&(!t||t==="_self")&&!I_(r)}var Lc=null;function j_(){if(Lc===null)try{new FormData(document.createElement("form"),0),Lc=!1}catch{Lc=!0}return Lc}var B_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Qd(r){return r!=null&&!B_.has(r)?(ui(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xc}"`),null):r}function U_(r,t){let e,i,a,l,c;if(L_(r)){let h=r.getAttribute("action");i=h?Fi(h,t):null,e=r.getAttribute("method")||Yc,a=Qd(r.getAttribute("enctype"))||Xc,l=new FormData(r)}else if(M_(r)||O_(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=r.getAttribute("formaction")||h.getAttribute("action");if(i=d?Fi(d,t):null,e=r.getAttribute("formmethod")||h.getAttribute("method")||Yc,a=Qd(r.getAttribute("formenctype"))||Qd(h.getAttribute("enctype"))||Xc,l=new FormData(h,r),!j_()){let{name:f,type:g,value:m}=r;if(g==="image"){let v=f?`${f}.`:"";l.append(`${v}x`,"0"),l.append(`${v}y`,"0")}else f&&l.append(f,m)}}else{if(mu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');e=Yc,i=null,a=Xc,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:e.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Yf(r,t){if(r===!1||r===null||typeof r>"u")throw new Error(t)}function F_(r,t,e,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:t&&Fi(a.pathname,t)==="/"?a.pathname=`${t.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function z_(r,t){if(r.id in t)return t[r.id];try{let e=await import(r.module);return t[r.id]=e,e}catch(e){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(e),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function H_(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function G_(r,t,e){let i=await Promise.all(r.map(async a=>{let l=t.routes[a.route.id];if(l){let c=await z_(l,e);return c.links?c.links():[]}return[]}));return Y_(i.flat(1).filter(H_).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ub(r,t,e,i,a,l){let c=(d,f)=>e[f]?d.route.id!==e[f].route.id:!0,h=(d,f)=>e[f].pathname!==d.pathname||e[f].route.path?.endsWith("*")&&e[f].params["*"]!==d.params["*"];return l==="assets"?t.filter((d,f)=>c(d,f)||h(d,f)):l==="data"?t.filter((d,f)=>{let g=i.routes[d.route.id];if(!g||!g.hasLoader)return!1;if(c(d,f)||h(d,f))return!0;if(d.route.shouldRevalidate){let m=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:e[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function V_(r,t,{includeHydrateFallback:e}={}){return q_(r.map(i=>{let a=t.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),e&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function q_(r){return[...new Set(r)]}function $_(r){let t={},e=Object.keys(r).sort();for(let i of e)t[i]=r[i];return t}function Y_(r,t){let e=new Set;return new Set(t),r.reduce((i,a)=>{let l=JSON.stringify($_(a));return e.has(l)||(e.add(l),i.push({key:l,link:a})),i},[])}function yv(){let r=I.useContext(Er);return Yf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function X_(){let r=I.useContext(gu);return Yf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Xf=I.createContext(void 0);Xf.displayName="FrameworkContext";function bv(){let r=I.useContext(Xf);return Yf(r,"You must render this element inside a <HydratedRouter> element"),r}function W_(r,t){let e=I.useContext(Xf),[i,a]=I.useState(!1),[l,c]=I.useState(!1),{onFocus:h,onBlur:d,onMouseEnter:f,onMouseLeave:g,onTouchStart:m}=t,v=I.useRef(null);I.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let x=E=>{E.forEach(T=>{c(T.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[r]),I.useEffect(()=>{if(i){let x=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(x)}}},[i]);let w=()=>{a(!0)},_=()=>{a(!1),c(!1)};return e?r!=="intent"?[l,v,{}]:[l,v,{onFocus:Ro(h,w),onBlur:Ro(d,_),onMouseEnter:Ro(f,w),onMouseLeave:Ro(g,_),onTouchStart:Ro(m,w)}]:[!1,v,{}]}function Ro(r,t){return e=>{r&&r(e),e.defaultPrevented||t(e)}}function K_({page:r,...t}){let{router:e}=yv(),i=I.useMemo(()=>ev(e.routes,r,e.basename),[e.routes,r,e.basename]);return i?I.createElement(Z_,{page:r,matches:i,...t}):null}function Q_(r){let{manifest:t,routeModules:e}=bv(),[i,a]=I.useState([]);return I.useEffect(()=>{let l=!1;return G_(r,t,e).then(c=>{l||a(c)}),()=>{l=!0}},[r,t,e]),i}function Z_({page:r,matches:t,...e}){let i=jn(),{future:a,manifest:l,routeModules:c}=bv(),{basename:h}=yv(),{loaderData:d,matches:f}=X_(),g=I.useMemo(()=>Ub(r,t,f,l,i,"data"),[r,t,f,l,i]),m=I.useMemo(()=>Ub(r,t,f,l,i,"assets"),[r,t,f,l,i]),v=I.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let x=new Set,S=!1;if(t.forEach(T=>{let R=l.routes[T.route.id];!R||!R.hasLoader||(!g.some(k=>k.route.id===T.route.id)&&T.route.id in d&&c[T.route.id]?.shouldRevalidate||R.hasClientLoader?S=!0:x.add(T.route.id))}),x.size===0)return[];let E=F_(r,h,a.unstable_trailingSlashAwareDataRequests,"data");return S&&x.size>0&&E.searchParams.set("_routes",t.filter(T=>x.has(T.route.id)).map(T=>T.route.id).join(",")),[E.pathname+E.search]},[h,a.unstable_trailingSlashAwareDataRequests,d,i,l,g,t,r,c]),w=I.useMemo(()=>V_(m,l),[m,l]),_=Q_(m);return I.createElement(I.Fragment,null,v.map(x=>I.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...e})),w.map(x=>I.createElement("link",{key:x,rel:"modulepreload",href:x,...e})),_.map(({key:x,link:S})=>I.createElement("link",{key:x,nonce:e.nonce,...S,crossOrigin:S.crossOrigin??e.crossOrigin})))}function J_(...r){return t=>{r.forEach(e=>{typeof e=="function"?e(t):e!=null&&(e.current=t)})}}var tE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tE&&(window.__reactRouterVersion="7.13.0")}catch{}function eE({basename:r,children:t,unstable_useTransitions:e,window:i}){let a=I.useRef();a.current==null&&(a.current=IS({window:i,v5Compat:!0}));let l=a.current,[c,h]=I.useState({action:l.action,location:l.location}),d=I.useCallback(f=>{e===!1?h(f):I.startTransition(()=>h(f))},[e]);return I.useLayoutEffect(()=>l.listen(d),[l,d]),I.createElement(N_,{basename:r,children:t,location:c.location,navigationType:c.action,navigator:l,unstable_useTransitions:e})}var vv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ut=I.forwardRef(function({onClick:t,discover:e="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:h,target:d,to:f,preventScrollReset:g,viewTransition:m,unstable_defaultShouldRevalidate:v,...w},_){let{basename:x,unstable_useTransitions:S}=I.useContext(Pn),E=typeof f=="string"&&vv.test(f),T=ov(f,x);f=T.to;let R=g_(f,{relative:a}),[k,L,P]=W_(i,w),j=aE(f,{replace:c,state:h,target:d,preventScrollReset:g,relative:a,viewTransition:m,unstable_defaultShouldRevalidate:v,unstable_useTransitions:S});function X(et){t&&t(et),et.defaultPrevented||j(et)}let K=I.createElement("a",{...w,...P,href:T.absoluteURL||R,onClick:T.isExternal||l?t:X,ref:J_(_,L),target:d,"data-discover":!E&&e==="render"?"true":void 0});return k&&!E?I.createElement(I.Fragment,null,K,I.createElement(K_,{page:R})):K});Ut.displayName="Link";var nE=I.forwardRef(function({"aria-current":t="page",caseSensitive:e=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:h,children:d,...f},g){let m=nl(c,{relative:f.relative}),v=jn(),w=I.useContext(gu),{navigator:_,basename:x}=I.useContext(Pn),S=w!=null&&uE(m)&&h===!0,E=_.encodeLocation?_.encodeLocation(m).pathname:m.pathname,T=v.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;e||(T=T.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&x&&(R=Fi(R,x)||R);const k=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let L=T===E||!a&&T.startsWith(E)&&T.charAt(k)==="/",P=R!=null&&(R===E||!a&&R.startsWith(E)&&R.charAt(E.length)==="/"),j={isActive:L,isPending:P,isTransitioning:S},X=L?t:void 0,K;typeof i=="function"?K=i(j):K=[i,L?"active":null,P?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let et=typeof l=="function"?l(j):l;return I.createElement(Ut,{...f,"aria-current":X,className:K,ref:g,style:et,to:c,viewTransition:h},typeof d=="function"?d(j):d)});nE.displayName="NavLink";var iE=I.forwardRef(({discover:r="render",fetcherKey:t,navigate:e,reloadDocument:i,replace:a,state:l,method:c=Yc,action:h,onSubmit:d,relative:f,preventScrollReset:g,viewTransition:m,unstable_defaultShouldRevalidate:v,...w},_)=>{let{unstable_useTransitions:x}=I.useContext(Pn),S=lE(),E=cE(h,{relative:f}),T=c.toLowerCase()==="get"?"get":"post",R=typeof h=="string"&&vv.test(h),k=L=>{if(d&&d(L),L.defaultPrevented)return;L.preventDefault();let P=L.nativeEvent.submitter,j=P?.getAttribute("formmethod")||c,X=()=>S(P||L.currentTarget,{fetcherKey:t,method:j,navigate:e,replace:a,state:l,relative:f,preventScrollReset:g,viewTransition:m,unstable_defaultShouldRevalidate:v});x&&e!==!1?I.startTransition(()=>X()):X()};return I.createElement("form",{ref:_,method:T,action:E,onSubmit:i?d:k,...w,"data-discover":!R&&r==="render"?"true":void 0})});iE.displayName="Form";function sE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wv(r){let t=I.useContext(Er);return he(t,sE(r)),t}function aE(r,{target:t,replace:e,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h,unstable_useTransitions:d}={}){let f=ua(),g=jn(),m=nl(r,{relative:l});return I.useCallback(v=>{if(P_(v,t)){v.preventDefault();let w=e!==void 0?e:Go(g)===Go(m),_=()=>f(r,{replace:w,state:i,preventScrollReset:a,relative:l,viewTransition:c,unstable_defaultShouldRevalidate:h});d?I.startTransition(()=>_()):_()}},[g,f,m,e,i,t,r,a,l,c,h,d])}var rE=0,oE=()=>`__${String(++rE)}__`;function lE(){let{router:r}=wv("useSubmit"),{basename:t}=I.useContext(Pn),e=T_(),i=r.fetch,a=r.navigate;return I.useCallback(async(l,c={})=>{let{action:h,method:d,encType:f,formData:g,body:m}=U_(l,t);if(c.navigate===!1){let v=c.fetcherKey||oE();await i(v,e,c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:m,formMethod:c.method||d,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||h,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:g,body:m,formMethod:c.method||d,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:e,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,t,e])}function cE(r,{relative:t}={}){let{basename:e}=I.useContext(Pn),i=I.useContext(hi);he(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...nl(r||".",{relative:t})},c=jn();if(r==null){l.search=c.search;let h=new URLSearchParams(l.search),d=h.getAll("index");if(d.some(g=>g==="")){h.delete("index"),d.filter(m=>m).forEach(m=>h.append("index",m));let g=h.toString();l.search=g?`?${g}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),e!=="/"&&(l.pathname=l.pathname==="/"?e:Ui([e,l.pathname])),Go(l)}function uE(r,{relative:t}={}){let e=I.useContext(cv);he(e!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=wv("useViewTransitionState"),a=nl(r,{relative:t});if(!e.isTransitioning)return!1;let l=Fi(e.currentLocation.pathname,i)||e.currentLocation.pathname,c=Fi(e.nextLocation.pathname,i)||e.nextLocation.pathname;return eu(a.pathname,c)!=null||eu(a.pathname,l)!=null}const Wf="data:image/svg+xml,%3csvg%20width='630'%20height='718'%20viewBox='0%200%20630%20718'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M507.588%20467.968V382.194L437.065%20422.437V508.279L507.588%20467.968Z'%20fill='%2315D6E3'/%3e%3cpath%20d='M507.588%20247.995L434.559%20206.201L315.313%20274.417L196.068%20206.201L123.038%20247.995V323.966L244.293%20393.349V537.261L315.313%20577.888L386.334%20537.261V393.349L507.588%20323.966V247.995Z'%20fill='%233A36FF'/%3e%3cpath%20d='M630.006%20254.748V178.525L557.185%20136.592L486.298%20177.354L559.119%20219.288V295.511L630.006%20254.748Z'%20fill='%233A36FF'/%3e%3cpath%20d='M71.5074%20295.511V219.288L144.328%20177.354L73.4419%20136.592L0.620972%20178.525V254.748L71.5074%20295.511Z'%20fill='%233A36FF'/%3e%3cpath%20d='M123.038%20467.968L193.561%20508.279V422.437L123.038%20382.194V467.968Z'%20fill='%233998FF'/%3e%3cpath%20d='M386.502%20594.962L315.313%20635.677L244.125%20594.962V676.392L315.313%20717.107L386.502%20676.392V594.962Z'%20fill='%233A36FF'/%3e%3cpath%20d='M383.84%20177.307L315.313%20137.905L246.786%20177.307L315.313%20216.708L383.84%20177.307Z'%20fill='%238A88FF'/%3e%3cpath%20d='M558.695%20353.18V496.979L437.065%20566.307V647.497L630.006%20537.574V312.585L558.695%20353.18Z'%20fill='%2315D7E3'/%3e%3cpath%20d='M193.561%20566.307L71.931%20496.979V353.18L0.620972%20312.585V537.574L193.561%20647.497V566.307Z'%20fill='%233998FF'/%3e%3cpath%20d='M195.686%20148.412L315.313%2080.7477L434.94%20148.412L506.258%20108.072L315.313%200L124.369%20108.072L195.686%20148.412Z'%20fill='%238A88FF'/%3e%3c/svg%3e",hE=["Northwind Legal","Acme Ventures","Solaris Health","Beacon Realty","Atlas Finance","Bluebird Energy"],dE=[{label:"Docs decoded",value:"42k+"},{label:"Average time saved",value:"3.4 hrs"},{label:"Risk flags identified",value:"128k+"}],fE=[{title:"Upload or open a PDF",description:"Drop in a contract, policy, or report. No setup required."},{title:"Decode with AI",description:"We translate the text, highlight obligations, and surface risks."},{title:"Act with clarity",description:"Export notes or send for signature only when you are ready."}],pE=[{title:"Plain-language summaries",description:"Every section is rewritten into clear, actionable language."},{title:"Risk and obligation flags",description:"Spot penalties, expiry traps, and one-sided clauses fast."},{title:"Side-by-side evidence",description:"See the original text next to the AI explanation."},{title:"Shareable decision reports",description:"Create a clean, board-ready summary in one click."},{title:"Structured highlights",description:"Tag sections as financial, legal, or operational."},{title:"Secure by design",description:"Free mode never stores files. Pro adds private vaults."}],gE=[{title:"Procurement teams",description:"Speed up vendor reviews without missing hidden liabilities."},{title:"Startup founders",description:"Understand term sheets and SaaS agreements fast."},{title:"HR & people ops",description:"Review contracts, handbooks, and compliance updates with confidence."},{title:"Property managers",description:"Decode leases, maintenance agreements, and building policies."}],mE=[{name:"Starter",description:"For occasional checks and quick clarity.",monthlyPrice:0,annualPrice:0,cta:"Start free",highlights:["3 document decodes / month","No storage (privacy-first)","Basic risk flags"]},{name:"Pro",description:"For teams reviewing docs weekly.",monthlyPrice:29,annualPrice:24,cta:"Upgrade to Pro",isPopular:!0,highlights:["Unlimited document decodes","Private doc vaults","Advanced risk mapping","Shareable reports"]},{name:"Enterprise",description:"For regulated or high-volume workflows.",monthlyPrice:79,annualPrice:65,cta:"Talk to sales",highlights:["Custom AI workflows","Dedicated security review","SSO & audit logs","Priority support"]}],yE=[{question:"Can I use DecoDocs without uploading a file?",answer:"Yes. The free workflow lets you open a PDF locally with no storage."},{question:"Do you replace legal advice?",answer:"No. We provide clarity, risk highlighting, and summaries to speed review."},{question:"What happens to my documents?",answer:"Free mode does not store files. Pro stores documents in a private vault you control."},{question:"Can I export my insights?",answer:"Yes. Pro exports a summary report and key obligations list."}],Zd={product:[{label:"How it works",href:"#how-it-works"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",href:"#pricing"}],company:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"}],legal:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"}]},bE="0.1.0+8dd5c42-2026-02-02T01:17:14.674Z",Jd=({href:r,children:t})=>{const e=typeof r=="string"&&/^https?:\/\//.test(r),i=typeof r=="string"&&r.startsWith("#");return e?b.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r,children:t}):i?b.jsx(Ut,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:{pathname:"/",hash:r},children:t}):b.jsx(Ut,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:r,children:t})},Av=()=>{const t=jn().pathname==="/";return b.jsx("footer",{className:"border-t border-slate-200 bg-white px-6 py-12",children:b.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-10 md:grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr]",children:[b.jsxs("div",{className:"flex flex-col gap-4",children:[b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("img",{src:Wf,alt:"DecoDocs",className:"h-10 w-10"}),b.jsxs("div",{children:[b.jsx("p",{className:"text-base font-semibold text-slate-900",children:"DecoDocs"}),b.jsx("p",{className:"text-xs text-slate-500",children:"Understand documents before you sign"})]})]}),b.jsx("p",{className:"text-sm text-slate-600",children:"Privacy-first document understanding by Snap Sign Pty Ltd."}),b.jsxs("p",{className:"text-xs text-slate-500",children:[" ",new Date().getFullYear()," Snap Sign Pty Ltd. All rights reserved."]}),b.jsxs("p",{className:"text-xs text-slate-400",children:["Version: ",bE]})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Product"}),b.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Zd.product.map(e=>b.jsx("li",{className:"m-0",children:t&&typeof e.href=="string"&&e.href.startsWith("#")?b.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:e.href,children:e.label}):b.jsx(Jd,{href:e.href,children:e.label})},e.label))})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Company"}),b.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Zd.company.map(e=>b.jsx("li",{className:"m-0",children:b.jsx(Jd,{href:e.href,children:e.label})},e.label))})]}),b.jsxs("div",{children:[b.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Legal"}),b.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:Zd.legal.map(e=>b.jsx("li",{className:"m-0",children:b.jsx(Jd,{href:e.href,children:e.label})},e.label))})]})]})})},vE=()=>{};var Fb={};const xv=function(r){const t=[];let e=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?t[e++]=a:a<2048?(t[e++]=a>>6|192,t[e++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),t[e++]=a>>18|240,t[e++]=a>>12&63|128,t[e++]=a>>6&63|128,t[e++]=a&63|128):(t[e++]=a>>12|224,t[e++]=a>>6&63|128,t[e++]=a&63|128)}return t},wE=function(r){const t=[];let e=0,i=0;for(;e<r.length;){const a=r[e++];if(a<128)t[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[e++];t[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[e++],c=r[e++],h=r[e++],d=((a&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;t[i++]=String.fromCharCode(55296+(d>>10)),t[i++]=String.fromCharCode(56320+(d&1023))}else{const l=r[e++],c=r[e++];t[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return t.join("")},Sv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,h=c?r[a+1]:0,d=a+2<r.length,f=d?r[a+2]:0,g=l>>2,m=(l&3)<<4|h>>4;let v=(h&15)<<2|f>>6,w=f&63;d||(w=64,c||(v=64)),i.push(e[g],e[m],e[v],e[w])}return i.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray(xv(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):wE(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=e[r.charAt(a++)],h=a<r.length?e[r.charAt(a)]:0;++a;const f=a<r.length?e[r.charAt(a)]:64;++a;const m=a<r.length?e[r.charAt(a)]:64;if(++a,l==null||h==null||f==null||m==null)throw new AE;const v=l<<2|h>>4;if(i.push(v),f!==64){const w=h<<4&240|f>>2;if(i.push(w),m!==64){const _=f<<6&192|m;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class AE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xE=function(r){const t=xv(r);return Sv.encodeByteArray(t,!0)},_v=function(r){return xE(r).replace(/\./g,"")},Ev=function(r){try{return Sv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function SE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const _E=()=>SE().__FIREBASE_DEFAULTS__,EE=()=>{if(typeof process>"u"||typeof Fb>"u")return;const r=Fb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},TE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Ev(r[1]);return t&&JSON.parse(t)},Kf=()=>{try{return vE()||_E()||EE()||TE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Tv=r=>Kf()?.emulatorHosts?.[r],CE=r=>{const t=Tv(r);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Cv=()=>Kf()?.config,Rv=r=>Kf()?.[`_${r}`];class RE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}}function Tr(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dv(r){return(await fetch(r,{credentials:"include"})).ok}const Uo={};function DE(){const r={prod:[],emulator:[]};for(const t of Object.keys(Uo))Uo[t]?r.emulator.push(t):r.prod.push(t);return r}function NE(r){let t=document.getElementById(r),e=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),e=!0),{created:e,element:t}}let zb=!1;function Nv(r,t){if(typeof window>"u"||typeof document>"u"||!Tr(window.location.host)||Uo[r]===t||Uo[r]||zb)return;Uo[r]=t;function e(v){return`__firebase__banner__${v}`}const i="__firebase__banner",l=DE().prod.length>0;function c(){const v=document.getElementById(i);v&&v.remove()}function h(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function d(v,w){v.setAttribute("width","24"),v.setAttribute("id",w),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zb=!0,c()},v}function g(v,w){v.setAttribute("id",w),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function m(){const v=NE(i),w=e("text"),_=document.getElementById(w)||document.createElement("span"),x=e("learnmore"),S=document.getElementById(x)||document.createElement("a"),E=e("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const R=v.element;h(R),g(S,x);const k=f();d(T,E),R.append(T,_,S,k),document.body.appendChild(R)}l?(_.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function ME(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function OE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IE(){const r=Qe();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function PE(){try{return typeof indexedDB=="object"}catch{return!1}}function jE(){return new Promise((r,t)=>{try{let e=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(e){t(e)}})}const BE="FirebaseError";class Yi extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=BE,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){const i=e[0]||{},a=`${this.service}/${t}`,l=this.errors[t],c=l?UE(l,i):"Error",h=`${this.serviceName}: ${c} (${a}).`;return new Yi(a,h,i)}}function UE(r,t){return r.replace(FE,(e,i)=>{const a=t[i];return a!=null?String(a):`<${i}?>`})}const FE=/\{\$([^}]+)}/g;function zE(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function vr(r,t){if(r===t)return!0;const e=Object.keys(r),i=Object.keys(t);for(const a of e){if(!i.includes(a))return!1;const l=r[a],c=t[a];if(Hb(l)&&Hb(c)){if(!vr(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!e.includes(a))return!1;return!0}function Hb(r){return r!==null&&typeof r=="object"}function sl(r){const t=[];for(const[e,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Oo(r){const t={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,l]=i.split("=");t[decodeURIComponent(a)]=decodeURIComponent(l)}}),t}function Io(r){const t=r.indexOf("?");if(!t)return"";const e=r.indexOf("#",t);return r.substring(t,e>0?e:void 0)}function HE(r,t){const e=new GE(r,t);return e.subscribe.bind(e)}class GE{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let a;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");VE(t,["next","error","complete"])?a=t:a={next:t,error:e,complete:i},a.next===void 0&&(a.next=tf),a.error===void 0&&(a.error=tf),a.complete===void 0&&(a.complete=tf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VE(r,t){if(typeof r!="object"||r===null)return!1;for(const e of t)if(e in r&&typeof r[e]=="function")return!0;return!1}function tf(){}function hn(r){return r&&r._delegate?r._delegate:r}class oa{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const ta="[DEFAULT]";class qE{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const i=new RE;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:e});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){const e=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(e)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:e})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YE(t))try{this.getOrInitializeService({instanceIdentifier:ta})}catch{}for(const[e,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(e);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(t=ta){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ta){return this.instances.has(t)}getOptions(t=ta){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:e});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);i===h&&c.resolve(a)}return a}onInit(t,e){const i=this.normalizeInstanceIdentifier(e),a=this.onInitCallbacks.get(i)??new Set;a.add(t),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&t(l,i),()=>{a.delete(t)}}invokeOnInitCallbacks(t,e){const i=this.onInitCallbacks.get(e);if(i)for(const a of i)try{a(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:$E(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=ta){return this.component?this.component.multipleInstances?t:ta:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function $E(r){return r===ta?void 0:r}function YE(r){return r.instantiationMode==="EAGER"}class XE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new qE(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}var Kt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Kt||(Kt={}));const WE={debug:Kt.DEBUG,verbose:Kt.VERBOSE,info:Kt.INFO,warn:Kt.WARN,error:Kt.ERROR,silent:Kt.SILENT},KE=Kt.INFO,QE={[Kt.DEBUG]:"log",[Kt.VERBOSE]:"log",[Kt.INFO]:"info",[Kt.WARN]:"warn",[Kt.ERROR]:"error"},ZE=(r,t,...e)=>{if(t<r.logLevel)return;const i=new Date().toISOString(),a=QE[t];if(a)console[a](`[${i}]  ${r.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class kv{constructor(t){this.name=t,this._logLevel=KE,this._logHandler=ZE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Kt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?WE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Kt.DEBUG,...t),this._logHandler(this,Kt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Kt.VERBOSE,...t),this._logHandler(this,Kt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Kt.INFO,...t),this._logHandler(this,Kt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Kt.WARN,...t),this._logHandler(this,Kt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Kt.ERROR,...t),this._logHandler(this,Kt.ERROR,...t)}}const JE=(r,t)=>t.some(e=>r instanceof e);let Gb,Vb;function t1(){return Gb||(Gb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function e1(){return Vb||(Vb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mv=new WeakMap,Af=new WeakMap,Lv=new WeakMap,ef=new WeakMap,Qf=new WeakMap;function n1(r){const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{e(Rs(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return t.then(e=>{e instanceof IDBCursor&&Mv.set(e,r)}).catch(()=>{}),Qf.set(t,r),t}function i1(r){if(Af.has(r))return;const t=new Promise((e,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{e(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Af.set(r,t)}let xf={get(r,t,e){if(r instanceof IDBTransaction){if(t==="done")return Af.get(r);if(t==="objectStoreNames")return r.objectStoreNames||Lv.get(r);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Rs(r[t])},set(r,t,e){return r[t]=e,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function s1(r){xf=r(xf)}function a1(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const i=r.call(nf(this),t,...e);return Lv.set(i,t.sort?t.sort():[t]),Rs(i)}:e1().includes(r)?function(...t){return r.apply(nf(this),t),Rs(Mv.get(this))}:function(...t){return Rs(r.apply(nf(this),t))}}function r1(r){return typeof r=="function"?a1(r):(r instanceof IDBTransaction&&i1(r),JE(r,t1())?new Proxy(r,xf):r)}function Rs(r){if(r instanceof IDBRequest)return n1(r);if(ef.has(r))return ef.get(r);const t=r1(r);return t!==r&&(ef.set(r,t),Qf.set(t,r)),t}const nf=r=>Qf.get(r);function o1(r,t,{blocked:e,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,t),h=Rs(c);return i&&c.addEventListener("upgradeneeded",d=>{i(Rs(c.result),d.oldVersion,d.newVersion,Rs(c.transaction),d)}),e&&c.addEventListener("blocked",d=>e(d.oldVersion,d.newVersion,d)),h.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),h}const l1=["get","getKey","getAll","getAllKeys","count"],c1=["put","add","delete","clear"],sf=new Map;function qb(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(sf.get(t))return sf.get(t);const e=t.replace(/FromIndex$/,""),i=t!==e,a=c1.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(a||l1.includes(e)))return;const l=async function(c,...h){const d=this.transaction(c,a?"readwrite":"readonly");let f=d.store;return i&&(f=f.index(h.shift())),(await Promise.all([f[e](...h),a&&d.done]))[0]};return sf.set(t,l),l}s1(r=>({...r,get:(t,e,i)=>qb(t,e)||r.get(t,e,i),has:(t,e)=>!!qb(t,e)||r.has(t,e)}));class u1{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(h1(e)){const i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}}function h1(r){return r.getComponent()?.type==="VERSION"}const Sf="@firebase/app",$b="0.14.7";const zi=new kv("@firebase/app"),d1="@firebase/app-compat",f1="@firebase/analytics-compat",p1="@firebase/analytics",g1="@firebase/app-check-compat",m1="@firebase/app-check",y1="@firebase/auth",b1="@firebase/auth-compat",v1="@firebase/database",w1="@firebase/data-connect",A1="@firebase/database-compat",x1="@firebase/functions",S1="@firebase/functions-compat",_1="@firebase/installations",E1="@firebase/installations-compat",T1="@firebase/messaging",C1="@firebase/messaging-compat",R1="@firebase/performance",D1="@firebase/performance-compat",N1="@firebase/remote-config",k1="@firebase/remote-config-compat",M1="@firebase/storage",L1="@firebase/storage-compat",O1="@firebase/firestore",I1="@firebase/ai",P1="@firebase/firestore-compat",j1="firebase",B1="12.8.0";const _f="[DEFAULT]",U1={[Sf]:"fire-core",[d1]:"fire-core-compat",[p1]:"fire-analytics",[f1]:"fire-analytics-compat",[m1]:"fire-app-check",[g1]:"fire-app-check-compat",[y1]:"fire-auth",[b1]:"fire-auth-compat",[v1]:"fire-rtdb",[w1]:"fire-data-connect",[A1]:"fire-rtdb-compat",[x1]:"fire-fn",[S1]:"fire-fn-compat",[_1]:"fire-iid",[E1]:"fire-iid-compat",[T1]:"fire-fcm",[C1]:"fire-fcm-compat",[R1]:"fire-perf",[D1]:"fire-perf-compat",[N1]:"fire-rc",[k1]:"fire-rc-compat",[M1]:"fire-gcs",[L1]:"fire-gcs-compat",[O1]:"fire-fst",[P1]:"fire-fst-compat",[I1]:"fire-vertex","fire-js":"fire-js",[j1]:"fire-js-all"};const Vo=new Map,F1=new Map,Ef=new Map;function Yb(r,t){try{r.container.addComponent(t)}catch(e){zi.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,e)}}function wr(r){const t=r.name;if(Ef.has(t))return zi.debug(`There were multiple attempts to register component ${t}.`),!1;Ef.set(t,r);for(const e of Vo.values())Yb(e,r);for(const e of F1.values())Yb(e,r);return!0}function Zf(r,t){const e=r.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),r.container.getProvider(t)}function un(r){return r==null?!1:r.settings!==void 0}const z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new il("app","Firebase",z1);class H1{constructor(t,e,i){this._isDeleted=!1,this._options={...t},this._config={...e},this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new oa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}const al=B1;function Ov(r,t={}){let e=r;typeof t!="object"&&(t={name:t});const i={name:_f,automaticDataCollectionEnabled:!0,...t},a=i.name;if(typeof a!="string"||!a)throw Ds.create("bad-app-name",{appName:String(a)});if(e||(e=Cv()),!e)throw Ds.create("no-options");const l=Vo.get(a);if(l){if(vr(e,l.options)&&vr(i,l.config))return l;throw Ds.create("duplicate-app",{appName:a})}const c=new XE(a);for(const d of Ef.values())c.addComponent(d);const h=new H1(e,i,c);return Vo.set(a,h),h}function Jf(r=_f){const t=Vo.get(r);if(!t&&r===_f&&Cv())return Ov();if(!t)throw Ds.create("no-app",{appName:r});return t}function G1(){return Array.from(Vo.values())}function Ns(r,t,e){let i=U1[r]??r;e&&(i+=`-${e}`);const a=i.match(/\s|\//),l=t.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${t}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zi.warn(c.join(" "));return}wr(new oa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const V1="firebase-heartbeat-database",q1=1,qo="firebase-heartbeat-store";let af=null;function Iv(){return af||(af=o1(V1,q1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(qo)}catch(e){console.warn(e)}}}}).catch(r=>{throw Ds.create("idb-open",{originalErrorMessage:r.message})})),af}async function $1(r){try{const e=(await Iv()).transaction(qo),i=await e.objectStore(qo).get(Pv(r));return await e.done,i}catch(t){if(t instanceof Yi)zi.warn(t.message);else{const e=Ds.create("idb-get",{originalErrorMessage:t?.message});zi.warn(e.message)}}}async function Xb(r,t){try{const i=(await Iv()).transaction(qo,"readwrite");await i.objectStore(qo).put(t,Pv(r)),await i.done}catch(e){if(e instanceof Yi)zi.warn(e.message);else{const i=Ds.create("idb-set",{originalErrorMessage:e?.message});zi.warn(i.message)}}}function Pv(r){return`${r.name}!${r.options.appId}`}const Y1=1024,X1=30;class W1{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Q1(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:e}),this._heartbeatsCache.heartbeats.length>X1){const a=Z1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){zi.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wb(),{heartbeatsToSend:e,unsentEntries:i}=K1(this._heartbeatsCache.heartbeats),a=_v(JSON.stringify({version:2,heartbeats:e}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return zi.warn(t),""}}}function Wb(){return new Date().toISOString().substring(0,10)}function K1(r,t=Y1){const e=[];let i=r.slice();for(const a of r){const l=e.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),Kb(e)>t){l.dates.pop();break}}else if(e.push({agent:a.agent,dates:[a.date]}),Kb(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}class Q1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return PE()?jE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await $1(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return Xb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Kb(r){return _v(JSON.stringify({version:2,heartbeats:r})).length}function Z1(r){if(r.length===0)return-1;let t=0,e=r[0].date;for(let i=1;i<r.length;i++)r[i].date<e&&(e=r[i].date,t=i);return t}function J1(r){wr(new oa("platform-logger",t=>new u1(t),"PRIVATE")),wr(new oa("heartbeat",t=>new W1(t),"PRIVATE")),Ns(Sf,$b,r),Ns(Sf,$b,"esm2020"),Ns("fire-js","")}J1("");function jv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tT=jv,Bv=new il("auth","Firebase",jv());const nu=new kv("@firebase/auth");function eT(r,...t){nu.logLevel<=Kt.WARN&&nu.warn(`Auth (${al}): ${r}`,...t)}function Wc(r,...t){nu.logLevel<=Kt.ERROR&&nu.error(`Auth (${al}): ${r}`,...t)}function In(r,...t){throw ep(r,...t)}function Vn(r,...t){return ep(r,...t)}function tp(r,t,e){const i={...tT(),[t]:e};return new il("auth","Firebase",i).create(t,{appName:r.name})}function oi(r){return tp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uv(r,t,e){const i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&In(r,"argument-error"),tp(r,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ep(r,...t){if(typeof r!="string"){const e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(e,...i)}return Bv.create(r,...t)}function pt(r,t,...e){if(!r)throw ep(t,...e)}function ji(r){const t="INTERNAL ASSERTION FAILED: "+r;throw Wc(t),new Error(t)}function Hi(r,t){r||ji(t)}function Tf(){return typeof self<"u"&&self.location?.href||""}function nT(){return Qb()==="http:"||Qb()==="https:"}function Qb(){return typeof self<"u"&&self.location?.protocol||null}function iT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nT()||LE()||"connection"in navigator)?navigator.onLine:!0}function sT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class rl{constructor(t,e){this.shortDelay=t,this.longDelay=e,Hi(e>t,"Short delay should be less than long delay!"),this.isMobile=kE()||OE()}get(){return iT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function np(r,t){Hi(r.emulator,"Emulator should always be set here");const{url:e}=r.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}class Fv{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ji("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ji("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ji("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const aT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const rT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oT=new rl(3e4,6e4);function Xi(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function Wi(r,t,e,i,a={}){return zv(r,a,async()=>{let l={},c={};i&&(t==="GET"?c=i:l={body:JSON.stringify(i)});const h=sl({key:r.config.apiKey,...c}).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const f={method:t,headers:d,...l};return ME()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Tr(r.emulatorConfig.host)&&(f.credentials="include"),Fv.fetch()(await Hv(r,r.config.apiHost,e,h),f)})}async function zv(r,t,e){r._canInitEmulator=!1;const i={...aT,...t};try{const a=new cT(r),l=await Promise.race([e(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Oc(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[d,f]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oc(r,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw Oc(r,"email-already-in-use",c);if(d==="USER_DISABLED")throw Oc(r,"user-disabled",c);const g=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw tp(r,g,f);In(r,g)}}catch(a){if(a instanceof Yi)throw a;In(r,"network-request-failed",{message:String(a)})}}async function ol(r,t,e,i,a={}){const l=await Wi(r,t,e,i,a);return"mfaPendingCredential"in l&&In(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function Hv(r,t,e,i){const a=`${t}${e}?${i}`,l=r,c=l.config.emulator?np(r.config,a):`${r.config.apiScheme}://${a}`;return rT.includes(e)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function lT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Vn(this.auth,"network-request-failed")),oT.get())})}}function Oc(r,t,e){const i={appName:r.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);const a=Vn(r,t,i);return a.customData._tokenResponse=e,a}function Zb(r){return r!==void 0&&r.enterprise!==void 0}class uT{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return lT(e.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hT(r,t){return Wi(r,"GET","/v2/recaptchaConfig",Xi(r,t))}async function dT(r,t){return Wi(r,"POST","/v1/accounts:delete",t)}async function iu(r,t){return Wi(r,"POST","/v1/accounts:lookup",t)}function Fo(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function fT(r,t=!1){const e=hn(r),i=await e.getIdToken(t),a=ip(i);pt(a&&a.exp&&a.auth_time&&a.iat,e.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:Fo(rf(a.auth_time)),issuedAtTime:Fo(rf(a.iat)),expirationTime:Fo(rf(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function rf(r){return Number(r)*1e3}function ip(r){const[t,e,i]=r.split(".");if(t===void 0||e===void 0||i===void 0)return Wc("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ev(e);return a?JSON.parse(a):(Wc("Failed to decode base64 JWT payload"),null)}catch(a){return Wc("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Jb(r){const t=ip(r);return pt(t,"internal-error"),pt(typeof t.exp<"u","internal-error"),pt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}async function $o(r,t,e=!1){if(e)return t;try{return await t}catch(i){throw i instanceof Yi&&pT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function pT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class gT{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const e=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),e}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Cf{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Fo(this.lastLoginAt),this.creationTime=Fo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yo(r){const t=r.auth,e=await r.getIdToken(),i=await $o(r,iu(t,{idToken:e}));pt(i?.users.length,t,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?Gv(a.providerUserInfo):[],c=yT(r.providerData,l),h=r.isAnonymous,d=!(r.email&&a.passwordHash)&&!c?.length,f=h?d:!1,g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Cf(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(r,g)}async function mT(r){const t=hn(r);await Yo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function yT(r,t){return[...r.filter(i=>!t.some(a=>a.providerId===i.providerId)),...t]}function Gv(r){return r.map(({providerId:t,...e})=>({providerId:t,uid:e.rawId||"",displayName:e.displayName||null,email:e.email||null,phoneNumber:e.phoneNumber||null,photoURL:e.photoUrl||null}))}async function bT(r,t){const e=await zv(r,{},async()=>{const i=sl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await Hv(r,a,"/v1/token",`key=${l}`),h=await r._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:h,body:i};return r.emulatorConfig&&Tr(r.emulatorConfig.host)&&(d.credentials="include"),Fv.fetch()(c,d)});return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}}async function vT(r,t){return Wi(r,"POST","/v2/accounts:revokeToken",Xi(r,t))}class dr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){pt(t.idToken,"internal-error"),pt(typeof t.idToken<"u","internal-error"),pt(typeof t.refreshToken<"u","internal-error");const e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Jb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){pt(t.length!==0,"internal-error");const e=Jb(t);this.updateTokensAndExpiration(t,null,e)}async getToken(t,e=!1){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:i,refreshToken:a,expiresIn:l}=await bT(t,e);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){const{refreshToken:i,accessToken:a,expirationTime:l}=e,c=new dr;return i&&(pt(typeof i=="string","internal-error",{appName:t}),c.refreshToken=i),a&&(pt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),l&&(pt(typeof l=="number","internal-error",{appName:t}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new dr,this.toJSON())}_performRefresh(){return ji("not implemented")}}function xs(r,t){pt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Gn{constructor({uid:t,auth:e,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new gT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=e,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Cf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const e=await $o(this,this.stsTokenManager.getToken(this.auth,t));return pt(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return fT(this,t)}reload(){return mT(this)}_assign(t){this!==t&&(pt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>({...e})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new Gn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return e.metadata._copy(this.metadata),e}_onReload(t){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&await Yo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(oi(this.auth));const t=await this.getIdToken();return await $o(this,dT(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){const i=e.displayName??void 0,a=e.email??void 0,l=e.phoneNumber??void 0,c=e.photoURL??void 0,h=e.tenantId??void 0,d=e._redirectEventId??void 0,f=e.createdAt??void 0,g=e.lastLoginAt??void 0,{uid:m,emailVerified:v,isAnonymous:w,providerData:_,stsTokenManager:x}=e;pt(m&&x,t,"internal-error");const S=dr.fromJSON(this.name,x);pt(typeof m=="string",t,"internal-error"),xs(i,t.name),xs(a,t.name),pt(typeof v=="boolean",t,"internal-error"),pt(typeof w=="boolean",t,"internal-error"),xs(l,t.name),xs(c,t.name),xs(h,t.name),xs(d,t.name),xs(f,t.name),xs(g,t.name);const E=new Gn({uid:m,auth:t,email:a,emailVerified:v,displayName:i,isAnonymous:w,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:S,createdAt:f,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map(T=>({...T}))),d&&(E._redirectEventId=d),E}static async _fromIdTokenResponse(t,e,i=!1){const a=new dr;a.updateFromServerResponse(e);const l=new Gn({uid:e.localId,auth:t,stsTokenManager:a,isAnonymous:i});return await Yo(l),l}static async _fromGetAccountInfoResponse(t,e,i){const a=e.users[0];pt(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?Gv(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,h=new dr;h.updateFromIdToken(i);const d=new Gn({uid:a.localId,auth:t,stsTokenManager:h,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Cf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(d,f),d}}const t0=new Map;function Bi(r){Hi(r instanceof Function,"Expected a class definition");let t=t0.get(r);return t?(Hi(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,t0.set(r,t),t)}class Vv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return e===void 0?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}Vv.type="NONE";const e0=Vv;function Kc(r,t,e){return`firebase:${r}:${t}:${e}`}class fr{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=Kc(this.userKey,a.apiKey,l),this.fullPersistenceKey=Kc("persistence",a.apiKey,l),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const e=await iu(this.auth,{idToken:t}).catch(()=>{});return e?Gn._fromGetAccountInfoResponse(this.auth,e,t):null}return Gn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,i="authUser"){if(!e.length)return new fr(Bi(e0),t,i);const a=(await Promise.all(e.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let l=a[0]||Bi(e0);const c=Kc(i,t.config.apiKey,t.name);let h=null;for(const f of e)try{const g=await f._get(c);if(g){let m;if(typeof g=="string"){const v=await iu(t,{idToken:g}).catch(()=>{});if(!v)break;m=await Gn._fromGetAccountInfoResponse(t,v,g)}else m=Gn._fromJSON(t,g);f!==l&&(h=m),l=f;break}}catch{}const d=a.filter(f=>f._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new fr(l,t,i):(l=d[0],h&&await l._set(c,h.toJSON()),await Promise.all(e.map(async f=>{if(f!==l)try{await f._remove(c)}catch{}})),new fr(l,t,i))}}function n0(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Xv(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qv(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Kv(t))return"Blackberry";if(Qv(t))return"Webos";if($v(t))return"Safari";if((t.includes("chrome/")||Yv(t))&&!t.includes("edge/"))return"Chrome";if(Wv(t))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(e);if(i?.length===2)return i[1]}return"Other"}function qv(r=Qe()){return/firefox\//i.test(r)}function $v(r=Qe()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yv(r=Qe()){return/crios\//i.test(r)}function Xv(r=Qe()){return/iemobile/i.test(r)}function Wv(r=Qe()){return/android/i.test(r)}function Kv(r=Qe()){return/blackberry/i.test(r)}function Qv(r=Qe()){return/webos/i.test(r)}function sp(r=Qe()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function wT(r=Qe()){return sp(r)&&!!window.navigator?.standalone}function AT(){return IE()&&document.documentMode===10}function Zv(r=Qe()){return sp(r)||Wv(r)||Qv(r)||Kv(r)||/windows phone/i.test(r)||Xv(r)}function Jv(r,t=[]){let e;switch(r){case"Browser":e=n0(Qe());break;case"Worker":e=`${n0(Qe())}-${r}`;break;default:e=r}const i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${al}/${i}`}class xT{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const i=l=>new Promise((c,h)=>{try{const d=t(l);c(d)}catch(d){h(d)}});i.onAbort=e,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const i of this.queue)await i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(const a of e)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function ST(r,t={}){return Wi(r,"GET","/v2/passwordPolicy",Xi(r,t))}const _T=6;class ET{constructor(t){const e=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=e.minPasswordLength??_T,e.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=e.maxPasswordLength),e.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=e.containsLowercaseCharacter),e.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=e.containsUppercaseCharacter),e.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=e.containsNumericCharacter),e.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=e.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const e={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,e),this.validatePasswordCharacterOptions(t,e),e.isValid&&(e.isValid=e.meetsMinPasswordLength??!0),e.isValid&&(e.isValid=e.meetsMaxPasswordLength??!0),e.isValid&&(e.isValid=e.containsLowercaseLetter??!0),e.isValid&&(e.isValid=e.containsUppercaseLetter??!0),e.isValid&&(e.isValid=e.containsNumericCharacter??!0),e.isValid&&(e.isValid=e.containsNonAlphanumericCharacter??!0),e}validatePasswordLengthOptions(t,e){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),a&&(e.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let a=0;a<t.length;a++)i=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=l))}}class TT{constructor(t,e,i,a){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i0(this),this.idTokenSubscription=new i0(this),this.beforeStateQueue=new xT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Bi(e)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await fr.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(e),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const e=await iu(this,{idToken:t}),i=await Gn._fromGetAccountInfoResponse(this,e,t);await this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const e=await this.assertedPersistence.getCurrentUser();let i=e,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,h=await this.tryRedirectSignIn(t);(!l||l===c)&&h?.user&&(i=h.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=e,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await Yo(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sT()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(un(this.app))return Promise.reject(oi(this));const e=t?hn(t):null;return e&&pt(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&pt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return un(this.app)?Promise.reject(oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ST(this),e=new ET(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new il("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{const i=this.onAuthStateChanged(()=>{i(),t()},e)}})}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),await vT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,e){const i=await this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&Bi(t)||this._popupRedirectResolver;pt(e,this,"argument-error"),this.redirectPersistenceManager=await fr.create(this,[Bi(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,a){if(this._deleted)return()=>{};const l=typeof e=="function"?e:e.next.bind(e);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof e=="function"){const d=t.addObserver(e,i,a);return()=>{c=!0,d()}}else{const d=t.addObserver(e);return()=>{c=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Jv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const e=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();e&&(t["X-Firebase-Client"]=e);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&eT(`Error while retrieving App Check token: ${t.error}`),t?.token}}function di(r){return hn(r)}class i0{constructor(t){this.auth=t,this.observer=null,this.addObserver=HE(e=>this.observer=e)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CT(r){yu=r}function tw(r){return yu.loadJS(r)}function RT(){return yu.recaptchaEnterpriseScript}function DT(){return yu.gapiScript}function NT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class kT{constructor(){this.enterprise=new MT}ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}class MT{ready(t){t()}execute(t,e){return Promise.resolve("token")}render(t,e){return""}}const LT="recaptcha-enterprise",ew="NO_RECAPTCHA";class OT{constructor(t){this.type=LT,this.auth=di(t)}async verify(t="verify",e=!1){async function i(l){if(!e){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{hT(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const f=new uT(d);return l.tenantId==null?l._agentRecaptchaConfig=f:l._tenantRecaptchaConfigs[l.tenantId]=f,c(f.siteKey)}}).catch(d=>{h(d)})})}function a(l,c,h){const d=window.grecaptcha;Zb(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:t}).then(f=>{c(f)}).catch(()=>{c(ew)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new kT().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(h=>{if(!e&&Zb(window.grecaptcha))a(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let d=RT();d.length!==0&&(d+=h),tw(d).then(()=>{a(h,l,c)}).catch(f=>{c(f)})}}).catch(h=>{c(h)})})}}async function s0(r,t,e,i=!1,a=!1){const l=new OT(r);let c;if(a)c=ew;else try{c=await l.verify(e)}catch{c=await l.verify(e,!0)}const h={...t};if(e==="mfaSmsEnrollment"||e==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const d=h.phoneEnrollmentInfo.phoneNumber,f=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const d=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function su(r,t,e,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await s0(r,t,e,e==="getOobCode");return i(r,l)}else return i(r,t).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${e} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await s0(r,t,e,e==="getOobCode");return i(r,c)}else return Promise.reject(l)})}function IT(r,t){const e=Zf(r,"auth");if(e.isInitialized()){const a=e.getImmediate(),l=e.getOptions();if(vr(l,t??{}))return a;In(a,"already-initialized")}return e.initialize({options:t})}function PT(r,t){const e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Bi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(i,t?.popupRedirectResolver)}function nw(r,t,e){const i=di(r);pt(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const a=!!e?.disableWarnings,l=iw(t),{host:c,port:h}=jT(t),d=h===null?"":`:${h}`,f={url:`${l}//${c}${d}/`},g=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){pt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pt(vr(f,i.config.emulator)&&vr(g,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=g,i.settings.appVerificationDisabledForTesting=!0,Tr(c)?(Dv(`${l}//${c}${d}`),Nv("Auth",!0)):a||BT()}function iw(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function jT(r){const t=iw(r),e=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!e)return{host:"",port:null};const i=e[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:a0(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:a0(c)}}}function a0(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function BT(){function r(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class ap{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return ji("not implemented")}_getIdTokenResponse(t){return ji("not implemented")}_linkToIdToken(t,e){return ji("not implemented")}_getReauthenticationResolver(t){return ji("not implemented")}}async function UT(r,t){return Wi(r,"POST","/v1/accounts:signUp",t)}async function FT(r,t){return ol(r,"POST","/v1/accounts:signInWithPassword",Xi(r,t))}async function zT(r,t){return Wi(r,"POST","/v1/accounts:sendOobCode",Xi(r,t))}async function HT(r,t){return zT(r,t)}async function GT(r,t){return ol(r,"POST","/v1/accounts:signInWithEmailLink",Xi(r,t))}async function VT(r,t){return ol(r,"POST","/v1/accounts:signInWithEmailLink",Xi(r,t))}class Xo extends ap{constructor(t,e,i,a=null){super("password",i),this._email=t,this._password=e,this._tenantId=a}static _fromEmailAndPassword(t,e){return new Xo(t,e,"password")}static _fromEmailAndCode(t,e,i=null){return new Xo(t,e,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;if(e?.email&&e?.password){if(e.signInMethod==="password")return this._fromEmailAndPassword(e.email,e.password);if(e.signInMethod==="emailLink")return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(t,e,"signInWithPassword",FT);case"emailLink":return GT(t,{email:this._email,oobCode:this._password});default:In(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const i={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return su(t,i,"signUpPassword",UT);case"emailLink":return VT(t,{idToken:e,email:this._email,oobCode:this._password});default:In(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}async function pr(r,t){return ol(r,"POST","/v1/accounts:signInWithIdp",Xi(r,t))}const qT="http://localhost";class Gi extends ap{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Gi(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):In("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:a,...l}=e;if(!i||!a)return null;const c=new Gi(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(t){const e=this.buildRequest();return pr(t,e)}_linkToIdToken(t,e){const i=this.buildRequest();return i.idToken=e,pr(t,i)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,pr(t,e)}buildRequest(){const t={requestUri:qT,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=sl(e)}return t}}function $T(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YT(r){const t=Oo(Io(r)).link,e=t?Oo(Io(t)).deep_link_id:null,i=Oo(Io(r)).deep_link_id;return(i?Oo(Io(i)).link:null)||i||e||t||r}class rp{constructor(t){const e=Oo(Io(t)),i=e.apiKey??null,a=e.oobCode??null,l=$T(e.mode??null);pt(i&&a&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=a,this.continueUrl=e.continueUrl??null,this.languageCode=e.lang??null,this.tenantId=e.tenantId??null}static parseLink(t){const e=YT(t);try{return new rp(e)}catch{return null}}}class ha{constructor(){this.providerId=ha.PROVIDER_ID}static credential(t,e){return Xo._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const i=rp.parseLink(e);return pt(i,"argument-error"),Xo._fromEmailAndCode(t,i.code,i.tenantId)}}ha.PROVIDER_ID="password";ha.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ha.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bu{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class Cr extends bu{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class ks extends Cr{static credentialFromJSON(t){const e=typeof t=="string"?JSON.parse(t):t;return pt("providerId"in e&&"signInMethod"in e,"argument-error"),Gi._fromParams(e)}credential(t){return this._credential({...t,nonce:t.rawNonce})}_credential(t){return pt(t.idToken||t.accessToken,"argument-error"),Gi._fromParams({...t,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(t){return ks.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return ks.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:l,nonce:c,providerId:h}=t;if(!i&&!a&&!e&&!l||!h)return null;try{return new ks(h)._credential({idToken:e,accessToken:i,nonce:c,pendingToken:l})}catch{return null}}}class Ss extends Cr{constructor(){super("facebook.com")}static credential(t){return Gi._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ss.credentialFromTaggedObject(t)}static credentialFromError(t){return Ss.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ss.credential(t.oauthAccessToken)}catch{return null}}}Ss.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ss.PROVIDER_ID="facebook.com";class ri extends Cr{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Gi._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ri.credentialFromTaggedObject(t)}static credentialFromError(t){return ri.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:i}=t;if(!e&&!i)return null;try{return ri.credential(e,i)}catch{return null}}}ri.GOOGLE_SIGN_IN_METHOD="google.com";ri.PROVIDER_ID="google.com";class _s extends Cr{constructor(){super("github.com")}static credential(t){return Gi._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _s.credentialFromTaggedObject(t)}static credentialFromError(t){return _s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _s.credential(t.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";class Es extends Cr{constructor(){super("twitter.com")}static credential(t,e){return Gi._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Es.credentialFromTaggedObject(t)}static credentialFromError(t){return Es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:i}=t;if(!e||!i)return null;try{return Es.credential(e,i)}catch{return null}}}Es.TWITTER_SIGN_IN_METHOD="twitter.com";Es.PROVIDER_ID="twitter.com";async function sw(r,t){return ol(r,"POST","/v1/accounts:signUp",Xi(r,t))}class Vi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,i,a=!1){const l=await Gn._fromIdTokenResponse(t,i,a),c=r0(i);return new Vi({user:l,providerId:c,_tokenResponse:i,operationType:e})}static async _forOperation(t,e,i){await t._updateTokensIfNecessary(i,!0);const a=r0(i);return new Vi({user:t,providerId:a,_tokenResponse:i,operationType:e})}}function r0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function XT(r){if(un(r.app))return Promise.reject(oi(r));const t=di(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Vi({user:t.currentUser,providerId:null,operationType:"signIn"});const e=await sw(t,{returnSecureToken:!0}),i=await Vi._fromIdTokenResponse(t,"signIn",e,!0);return await t._updateCurrentUser(i.user),i}class au extends Yi{constructor(t,e,i,a){super(e.code,e.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,au.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,a){return new au(t,e,i,a)}}function aw(r,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(r):e._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?au._fromErrorAndOperation(r,l,t,i):l})}function WT(r){return new Set(r.map(({providerId:t})=>t).filter(t=>!!t))}async function rw(r,t,e=!1){const i=await $o(r,t._linkToIdToken(r.auth,await r.getIdToken()),e);return Vi._forOperation(r,"link",i)}async function KT(r,t,e){await Yo(t);const i=WT(t.providerData);pt(i.has(e)===r,t.auth,"provider-already-linked")}async function QT(r,t,e=!1){const{auth:i}=r;if(un(i.app))return Promise.reject(oi(i));const a="reauthenticate";try{const l=await $o(r,aw(i,a,t,r),e);pt(l.idToken,i,"internal-error");const c=ip(l.idToken);pt(c,i,"internal-error");const{sub:h}=c;return pt(r.uid===h,i,"user-mismatch"),Vi._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&In(i,"user-mismatch"),l}}async function ow(r,t,e=!1){if(un(r.app))return Promise.reject(oi(r));const i="signIn",a=await aw(r,i,t),l=await Vi._fromIdTokenResponse(r,i,a);return e||await r._updateCurrentUser(l.user),l}async function ZT(r,t){return ow(di(r),t)}async function JT(r,t){const e=hn(r);return await KT(!1,e,t.providerId),rw(e,t)}async function lw(r){const t=di(r);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function tC(r,t,e){const i=di(r);await su(i,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",HT)}async function eC(r,t,e){if(un(r.app))return Promise.reject(oi(r));const i=di(r),c=await su(i,{returnSecureToken:!0,email:t,password:e,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",sw).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&lw(r),d}),h=await Vi._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(h.user),h}function nC(r,t,e){return un(r.app)?Promise.reject(oi(r)):ZT(hn(r),ha.credential(t,e)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&lw(r),i})}function iC(r,t,e,i){return hn(r).onIdTokenChanged(t,e,i)}function sC(r,t,e){return hn(r).beforeAuthStateChanged(t,e)}function aC(r,t,e,i){return hn(r).onAuthStateChanged(t,e,i)}function op(r){return hn(r).signOut()}const ru="__sak";class cw{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const rC=1e3,oC=10;class uw extends cw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Zv(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const i=this.storage.getItem(e),a=this.localCache[e];i!==a&&t(e,a,i)}}onStorageEvent(t,e=!1){if(!t.key){this.forAllChangedKeys((c,h,d)=>{this.notifyListeners(c,d)});return}const i=t.key;e?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!e&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);AT()&&l!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,oC):a()}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e&&JSON.parse(e))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,e,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:i}),!0)})},rC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}uw.type="LOCAL";const lC=uw;class hw extends cw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,e){}_removeListener(t,e){}}hw.type="SESSION";const dw=hw;function cC(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(e){return{fulfilled:!1,reason:e}}}))}class vu{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find(a=>a.isListeningto(t));if(e)return e;const i=new vu(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:i,eventType:a,data:l}=e.data,c=this.handlersMap[a];if(!c?.size)return;e.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(c).map(async f=>f(e.origin,l)),d=await cC(h);e.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:d})}_subscribe(t,e){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),(!e||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vu.receivers=[];function lp(r="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return r+e}class uC{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((h,d)=>{const f=lp("",20);a.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(m){const v=m;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(v.data.response);break;default:clearTimeout(g),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:f,data:e},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function li(){return window}function hC(r){li().location.href=r}function fw(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}async function dC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fC(){return navigator?.serviceWorker?.controller||null}function pC(){return fw()?self:null}const pw="firebaseLocalStorageDb",gC=1,ou="firebaseLocalStorage",gw="fbase_key";class ll{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}}function wu(r,t){return r.transaction([ou],t?"readwrite":"readonly").objectStore(ou)}function mC(){const r=indexedDB.deleteDatabase(pw);return new ll(r).toPromise()}function Rf(){const r=indexedDB.open(pw,gC);return new Promise((t,e)=>{r.addEventListener("error",()=>{e(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(ou,{keyPath:gw})}catch(a){e(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(ou)?t(i):(i.close(),await mC(),t(await Rf()))})})}async function o0(r,t,e){const i=wu(r,!0).put({[gw]:t,value:e});return new ll(i).toPromise()}async function yC(r,t){const e=wu(r,!1).get(t),i=await new ll(e).toPromise();return i===void 0?null:i.value}function l0(r,t){const e=wu(r,!0).delete(t);return new ll(e).toPromise()}const bC=800,vC=3;class mw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rf(),this.db)}async _withRetries(t){let e=0;for(;;)try{const i=await this._openDb();return await t(i)}catch(i){if(e++>vC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vu._getInstance(pC()),this.receiver._subscribe("keyChanged",async(t,e)=>({keyProcessed:(await this._poll()).includes(e.key)})),this.receiver._subscribe("ping",async(t,e)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await dC(),!this.activeServiceWorker)return;this.sender=new uC(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||fC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Rf();return await o0(t,ru,"1"),await l0(t,ru),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite(async()=>(await this._withRetries(i=>o0(i,t,e)),this.localCache[t]=e,this.notifyServiceWorker(t)))}async _get(t){const e=await this._withRetries(i=>yC(i,t));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(e=>l0(e,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const l=wu(a,!1).getAll();return new ll(l).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const e=[],i=new Set;if(t.length!==0)for(const{fbase_key:a,value:l}of t)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),e.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),e.push(a));return e}notifyListeners(t,e){this.localCache[t]=e;const i=this.listeners[t];if(i)for(const a of Array.from(i))a(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mw.type="LOCAL";const wC=mw;new rl(3e4,6e4);function cp(r,t){return t?Bi(t):(pt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class up extends ap{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return pr(t,this._buildIdpRequest())}_linkToIdToken(t,e){return pr(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return pr(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function AC(r){return ow(r.auth,new up(r),r.bypassAuthState)}function xC(r){const{auth:t,user:e}=r;return pt(e,t,"internal-error"),QT(e,new up(r),r.bypassAuthState)}async function SC(r){const{auth:t,user:e}=r;return pt(e,t,"internal-error"),rw(e,new up(r),r.bypassAuthState)}class yw{constructor(t,e,i,a,l=!1){this.auth=t,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise(async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(t){const{urlResponse:e,sessionId:i,postBody:a,tenantId:l,error:c,type:h}=t;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:e,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(f){this.reject(f)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return AC;case"linkViaPopup":case"linkViaRedirect":return SC;case"reauthViaPopup":case"reauthViaRedirect":return xC;default:In(this.auth,"internal-error")}}resolve(t){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const _C=new rl(2e3,1e4);async function of(r,t,e){if(un(r.app))return Promise.reject(Vn(r,"operation-not-supported-in-this-environment"));const i=di(r);Uv(r,t,bu);const a=cp(i,e);return new Cs(i,"signInViaPopup",t,a).executeNotNull()}async function EC(r,t,e){const i=hn(r);Uv(i.auth,t,bu);const a=cp(i.auth,e);return new Cs(i.auth,"linkViaPopup",t,a,i).executeNotNull()}class Cs extends yw{constructor(t,e,i,a,l){super(t,e,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Cs.currentPopupAction&&Cs.currentPopupAction.cancel(),Cs.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return pt(t,this.auth,"internal-error"),t}async onExecution(){Hi(this.filter.length===1,"Popup operations only handle one event");const t=lp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Cs.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,_C.get())};t()}}Cs.currentPopupAction=null;const TC="pendingRedirect",Qc=new Map;class CC extends yw{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}async execute(){let t=Qc.get(this.auth._key());if(!t){try{const i=await RC(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}Qc.set(this.auth._key(),t)}return this.bypassAuthState||Qc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RC(r,t){const e=kC(t),i=NC(r);if(!await i._isAvailable())return!1;const a=await i._get(e)==="true";return await i._remove(e),a}function DC(r,t){Qc.set(r._key(),t)}function NC(r){return Bi(r._redirectPersistence)}function kC(r){return Kc(TC,r.config.apiKey,r.name)}async function MC(r,t,e=!1){if(un(r.app))return Promise.reject(oi(r));const i=di(r),a=cp(i,t),c=await new CC(i,a,e).execute();return c&&!e&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,t)),c}const LC=600*1e3;class OC{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!IC(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){if(t.error&&!bw(t)){const i=t.error.code?.split("auth/")[1]||"internal-error";e.onError(Vn(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=LC&&this.cachedEventUids.clear(),this.cachedEventUids.has(c0(t))}saveEventToCache(t){this.cachedEventUids.add(c0(t)),this.lastProcessedEventTime=Date.now()}}function c0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function bw({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function IC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bw(r);default:return!1}}async function PC(r,t={}){return Wi(r,"GET","/v1/projects",t)}const jC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BC=/^https?/;async function UC(r){if(r.config.emulator)return;const{authorizedDomains:t}=await PC(r);for(const e of t)try{if(FC(e))return}catch{}In(r,"unauthorized-domain")}function FC(r){const t=Tf(),{protocol:e,hostname:i}=new URL(t);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?e==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&c.hostname===i}if(!BC.test(e))return!1;if(jC.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const zC=new rl(3e4,6e4);function u0(){const r=li().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let e=0;e<r.CP.length;e++)r.CP[e]=null}}function HC(r){return new Promise((t,e)=>{function i(){u0(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{u0(),e(Vn(r,"network-request-failed"))},timeout:zC.get()})}if(li().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(li().gapi?.load)i();else{const a=NT("iframefcb");return li()[a]=()=>{gapi.load?i():e(Vn(r,"network-request-failed"))},tw(`${DT()}?onload=${a}`).catch(l=>e(l))}}).catch(t=>{throw Zc=null,t})}let Zc=null;function GC(r){return Zc=Zc||HC(r),Zc}const VC=new rl(5e3,15e3),qC="__/auth/iframe",$C="emulator/auth/iframe",YC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WC(r){const t=r.config;pt(t.authDomain,r,"auth-domain-config-required");const e=t.emulator?np(t,$C):`https://${r.config.authDomain}/${qC}`,i={apiKey:t.apiKey,appName:r.name,v:al},a=XC.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${e}?${sl(i).slice(1)}`}async function KC(r){const t=await GC(r),e=li().gapi;return pt(e,r,"internal-error"),t.open({where:document.body,url:WC(r),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YC,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Vn(r,"network-request-failed"),h=li().setTimeout(()=>{l(c)},VC.get());function d(){li().clearTimeout(h),a(i)}i.ping(d).then(d,()=>{l(c)})}))}const QC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZC=500,JC=600,tR="_blank",eR="http://localhost";class h0{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function nR(r,t,e,i=ZC,a=JC){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d={...QC,width:i.toString(),height:a.toString(),top:l,left:c},f=Qe().toLowerCase();e&&(h=Yv(f)?tR:e),qv(f)&&(t=t||eR,d.scrollbars="yes");const g=Object.entries(d).reduce((v,[w,_])=>`${v}${w}=${_},`,"");if(wT(f)&&h!=="_self")return iR(t||"",h),new h0(null);const m=window.open(t||"",h,g);pt(m,r,"popup-blocked");try{m.focus()}catch{}return new h0(m)}function iR(r,t){const e=document.createElement("a");e.href=r,e.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}const sR="__/auth/handler",aR="emulator/auth/handler",rR=encodeURIComponent("fac");async function d0(r,t,e,i,a,l){pt(r.config.authDomain,r,"auth-domain-config-required"),pt(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:e,redirectUrl:i,v:al,eventId:a};if(t instanceof bu){t.setDefaultLanguage(r.languageCode),c.providerId=t.providerId||"",zE(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[g,m]of Object.entries({}))c[g]=m}if(t instanceof Cr){const g=t.getScopes().filter(m=>m!=="");g.length>0&&(c.scopes=g.join(","))}r.tenantId&&(c.tid=r.tenantId);const h=c;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const d=await r._getAppCheckToken(),f=d?`#${rR}=${encodeURIComponent(d)}`:"";return`${oR(r)}?${sl(h).slice(1)}${f}`}function oR({config:r}){return r.emulator?np(r,aR):`https://${r.authDomain}/${sR}`}const lf="webStorageSupport";class lR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dw,this._completeRedirectFn=MC,this._overrideRedirectResult=DC}async _openPopup(t,e,i,a){Hi(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const l=await d0(t,e,i,Tf(),a);return nR(t,l,lp())}async _openRedirect(t,e,i,a){await this._originValidation(t);const l=await d0(t,e,i,Tf(),a);return hC(l),new Promise(()=>{})}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:a,promise:l}=this.eventManagers[e];return a?Promise.resolve(a):(Hi(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}async initAndGetManager(t){const e=await KC(t),i=new OC(t);return e.register("authEvent",a=>(pt(a?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(lf,{type:lf},a=>{const l=a?.[0]?.[lf];l!==void 0&&e(!!l),In(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=UC(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Zv()||$v()||sp()}}const cR=lR;var f0="@firebase/auth",p0="1.12.0";class uR{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dR(r){wr(new oa("auth",(t,{options:e})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),l=t.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=i.options;pt(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:c,authDomain:h,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jv(r)},f=new TT(i,a,l,d);return PT(f,e),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),wr(new oa("auth-internal",t=>{const e=di(t.getProvider("auth").getImmediate());return(i=>new uR(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ns(f0,p0,hR(r)),Ns(f0,p0,"esm2020")}const fR=300,pR=Rv("authIdTokenMaxAge")||fR;let g0=null;const gR=r=>async t=>{const e=t&&await t.getIdTokenResult(),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>pR)return;const a=e?.token;g0!==a&&(g0=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function mR(r=Jf()){const t=Zf(r,"auth");if(t.isInitialized())return t.getImmediate();const e=IT(r,{popupRedirectResolver:cR,persistence:[wC,lC,dw]}),i=Rv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=gR(l.toString());sC(e,c,()=>c(e.currentUser)),iC(e,h=>c(h))}}const a=Tv("auth");return a&&nw(e,`http://${a}`),e}function yR(){return document.getElementsByTagName("head")?.[0]??document}CT({loadJS(r){return new Promise((t,e)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=t,i.onerror=a=>{const l=Vn("internal-error");l.customData=a,e(l)},i.type="text/javascript",i.charset="UTF-8",yR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dR("Browser");var bR="firebase",vR="12.8.0";Ns(bR,vR,"app");const vw=I.createContext();let Ic={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"};const m0=r=>{if(!r||typeof r!="string")return!0;const t=r.trim();return t===""||t.includes("your_")||t.includes("replace_me")||t.includes("changeme")};let Df=null,_e=null,y0=!1;try{if(window.MOCK_AUTH)m0(Ic.apiKey)&&(console.log("Using dummy Firebase config for MOCK_AUTH mode"),Ic={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"});else if(m0(Ic.apiKey))throw new Error("Firebase client configuration is missing or invalid. Authentication will be unavailable.");Df=G1().length===0?Ov(Ic):Jf(),_e=mR(Df),"".toLowerCase()==="true"&&!y0&&(nw(_e,"http://localhost:9099",{disableWarnings:!0}),y0=!0)}catch(r){console.error("Failed to initialize Firebase:",r)}const wR=({children:r})=>{const[t,e]=I.useState({status:"pending",user:null,error:null});I.useEffect(()=>{if(window.MOCK_AUTH){const m=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;e({status:m?"authenticated":"unauthenticated",user:m,error:null});return}if(!_e){e({status:"error",user:null,error:new Error("Firebase Auth not available")}),console.error("Firebase Auth not available");return}const g=aC(_e,async m=>{if(!m){try{const v=await XT(_e);e({status:"authenticated",user:v.user,error:null})}catch(v){console.error("Authentication error:",v),e({status:"error",user:null,error:v})}return}e({status:"authenticated",user:m,error:null})},m=>{console.error("Authentication observer error:",m),e({status:"error",user:null,error:m})});return()=>g()},[]);const i=async()=>{if(!_e)throw new Error("Auth is not available");return of(_e,new ri)},a=async()=>{if(!_e)throw new Error("Auth is not available");return of(_e,new ks("microsoft.com"))},l=async()=>{if(!_e)throw new Error("Auth is not available");return of(_e,new ks("apple.com"))},c=async(g,m)=>{if(!_e)throw new Error("Auth is not available");return nC(_e,g,m)},h=async(g,m)=>{if(!_e)throw new Error("Auth is not available");return eC(_e,g,m)},d=async g=>{if(!_e)throw new Error("Auth is not available");return tC(_e,g)},f=async()=>{_e&&await op(_e)};return b.jsx(vw.Provider,{value:{authState:t,app:Df,auth:_e,signInWithGoogle:i,signInWithMicrosoft:a,signInWithApple:l,signInWithEmail:c,signUpWithEmail:h,resetPassword:d,signOutUser:f},children:r})},da=()=>{const r=I.useContext(vw);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r};function AR(){const{authState:r,auth:t}=da();return I.useRef(!1),I.useEffect(()=>{},[r?.status,r?.user?.isAnonymous,t]),null}const xR=({onOpenPdf:r,children:t})=>b.jsxs("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900",children:[b.jsx(AR,{}),b.jsxs("div",{className:"relative overflow-hidden",children:[b.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[b.jsx("div",{className:"absolute -top-32 -right-20 h-72 w-72 rounded-full bg-[#d8e6ff] blur-3xl opacity-60 animate-float-slow"}),b.jsx("div",{className:"absolute top-40 -left-24 h-72 w-72 rounded-full bg-[#fde4c7] blur-3xl opacity-50 animate-float-slow"})]}),b.jsx("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4",children:[b.jsxs(Ut,{to:"/",className:"flex items-center gap-3 text-lg font-semibold",children:[b.jsx("img",{src:Wf,alt:"DecoDocs",className:"h-9 w-9"}),"DecoDocs"]}),b.jsxs("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:[b.jsx("a",{className:"hover:text-slate-900 transition",href:"#how-it-works",children:"How it works"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#features",children:"Features"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#use-cases",children:"Use cases"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#pricing",children:"Pricing"})]}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Ut,{to:"/view",className:"hidden rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:border-slate-300 md:inline-flex",children:"Launch app"}),b.jsx("button",{type:"button",onClick:r,className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:-translate-y-0.5",children:"Open PDF"})]})]})}),b.jsx("main",{className:"relative z-10",children:t}),b.jsx(Av,{})]})]}),SR=({onOpenPdf:r})=>b.jsx("section",{className:"px-6 pt-20 pb-16",children:b.jsxs("div",{className:"mx-auto grid w-full max-w-6xl items-center gap-12 lg:grid-cols-[1.1fr_0.9fr]",children:[b.jsxs("div",{className:"flex flex-col gap-6",children:[b.jsx("span",{className:"w-fit rounded-full border border-slate-200 bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-slate-500",children:"Modern document intelligence"}),b.jsx("h1",{className:"text-4xl font-semibold tracking-tight text-slate-900 md:text-5xl",children:"Decode documents before you sign them."}),b.jsx("p",{className:"text-lg text-slate-600",children:"DecoDocs turns dense PDFs into clear decisions with AI summaries, risk flags, and evidence-backed explanations."}),b.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[b.jsx("button",{type:"button",onClick:r,className:"rounded-full bg-slate-900 px-6 py-3 text-sm font-semibold text-white shadow-lg shadow-slate-900/25 transition hover:-translate-y-0.5",children:"Open a PDF"}),b.jsx(Ut,{to:"/view",className:"rounded-full border border-slate-300 bg-white px-6 py-3 text-sm font-semibold text-slate-700 shadow-sm",children:"View the app"})]}),b.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-slate-500",children:[b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-500"}),"Free mode never stores files"]}),b.jsxs("span",{className:"flex items-center gap-2",children:[b.jsx("span",{className:"h-2 w-2 rounded-full bg-slate-900"}),"Pro adds private vaults"]})]})]}),b.jsxs("div",{className:"relative",children:[b.jsx("div",{className:"absolute -left-6 top-6 h-24 w-24 rounded-2xl bg-[#fbd1b7] opacity-70"}),b.jsxs("div",{className:"relative rounded-3xl border border-white/60 bg-white/90 p-6 shadow-2xl shadow-slate-900/10",children:[b.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[b.jsx("span",{children:"Contract Review"}),b.jsx("span",{children:"12 pages"})]}),b.jsxs("div",{className:"mt-6 space-y-4",children:[b.jsx("div",{className:"rounded-2xl bg-slate-50 p-4",children:b.jsxs("p",{className:"text-sm text-slate-800",children:[b.jsx("span",{className:"font-semibold",children:"Risk flagged:"})," Termination clause requires 90-day notice and carries a 3x fee."]})}),b.jsx("div",{className:"rounded-2xl border border-slate-100 bg-white p-4",children:b.jsx("p",{className:"text-sm text-slate-600",children:"Plain language: You must give three months notice or pay a penalty equal to three months of fees."})}),b.jsx("div",{className:"rounded-2xl bg-slate-900 p-4 text-white",children:b.jsx("p",{className:"text-sm",children:"Suggested action: renegotiate the termination period or cap the penalty."})})]}),b.jsxs("div",{className:"mt-6 flex items-center justify-between rounded-2xl bg-slate-50 px-4 py-3 text-xs text-slate-500",children:[b.jsx("span",{children:"AI decode complete"}),b.jsx("span",{className:"font-semibold text-slate-900",children:"Ready to review"})]})]})]})]})}),Rr=({eyebrow:r,title:t,description:e,align:i="center"})=>{const a=i==="left"?"items-start text-left":"items-center text-center";return b.jsxs("div",{className:`flex flex-col gap-3 ${a}`,children:[r?b.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:r}):null,b.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:t}),e?b.jsx("p",{className:"text-base md:text-lg text-slate-600 max-w-2xl",children:e}):null]})},_R=()=>b.jsx("section",{className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsx(Rr,{eyebrow:"Trusted teams",title:"Teams use DecoDocs to review faster",description:"From startups to procurement teams, we help busy leaders move faster without missing critical terms."}),b.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:dE.map(r=>b.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-lg shadow-slate-900/5",children:[b.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:r.value}),b.jsx("p",{className:"mt-2 text-sm text-slate-500",children:r.label})]},r.label))}),b.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-5 text-xs uppercase tracking-[0.2em] text-slate-400",children:hE.map(r=>b.jsx("span",{children:r},r))})]})}),ER=()=>b.jsx("section",{id:"how-it-works",className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsx(Rr,{eyebrow:"How it works",title:"Three steps to clarity",description:"No onboarding, no templates. Drop in a document and get structured insights within seconds.",align:"left"}),b.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:fE.map((r,t)=>b.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",t+1]}),b.jsx("span",{className:"text-xl",children:String(t+1).padStart(2,"0")})]}),b.jsx("h3",{className:"mt-6 text-xl font-semibold text-slate-900",children:r.title}),b.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),TR=()=>b.jsx("section",{id:"features",className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsx(Rr,{eyebrow:"Product",title:"Every insight you need to move faster",description:"Built for modern teams that need clarity, speed, and secure workflows."}),b.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:pE.map(r=>b.jsxs("div",{className:"group rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5 transition hover:-translate-y-1",children:[b.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white",children:b.jsx("span",{className:"text-xs font-semibold",children:"AI"})}),b.jsx("h3",{className:"mt-5 text-lg font-semibold text-slate-900",children:r.title}),b.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),CR=()=>b.jsx("section",{id:"use-cases",className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsx(Rr,{eyebrow:"Use cases",title:"Built for high-stakes decisions",description:"DecoDocs supports every team that needs clean answers before signing or committing.",align:"left"}),b.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:gE.map((r,t)=>b.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[b.jsxs("div",{className:"flex items-center justify-between text-xs uppercase tracking-[0.3em] text-slate-400",children:[b.jsx("span",{children:"Use case"}),b.jsx("span",{children:String(t+1).padStart(2,"0")})]}),b.jsx("h3",{className:"mt-5 text-xl font-semibold text-slate-900",children:r.title}),b.jsx("p",{className:"mt-3 text-sm text-slate-600",children:r.description})]},r.title))})]})}),b0=r=>r===0?"Free":`$${r}`,RR=()=>{const[r,t]=I.useState("monthly"),e=I.useMemo(()=>mE.map(i=>{const a=r==="monthly"?i.monthlyPrice:i.annualPrice;return{...i,price:a,label:r==="monthly"?`${b0(a)}/mo`:`${b0(a)}/mo`}}),[r]);return b.jsx("section",{id:"pricing",className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsxs("div",{className:"flex flex-col items-center justify-between gap-6 md:flex-row",children:[b.jsx(Rr,{eyebrow:"Pricing",title:"Simple plans that scale with your review workload",description:"Switch between monthly and annual billing. Annual plans include a discount for teams reviewing weekly.",align:"left"}),b.jsxs("div",{className:"flex items-center rounded-full border border-slate-200 bg-white p-1",children:[b.jsx("button",{type:"button",onClick:()=>t("monthly"),className:`rounded-full px-4 py-2 text-sm font-semibold ${r==="monthly"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Monthly"}),b.jsx("button",{type:"button",onClick:()=>t("annual"),className:`rounded-full px-4 py-2 text-sm font-semibold ${r==="annual"?"bg-slate-900 text-white":"text-slate-500"}`,children:"Annual"})]})]}),b.jsx("div",{className:"grid gap-6 lg:grid-cols-3",children:e.map(i=>b.jsxs("div",{className:`relative flex h-full flex-col rounded-3xl border p-6 shadow-xl shadow-slate-900/5 ${i.isPopular?"border-slate-900 bg-slate-900 text-white":"border-slate-100 bg-white"}`,children:[i.isPopular?b.jsx("span",{className:"absolute -top-4 left-6 rounded-full bg-white px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-slate-900",children:"Most popular"}):null,b.jsx("h3",{className:"text-xl font-semibold",children:i.name}),b.jsx("p",{className:`mt-2 text-sm ${i.isPopular?"text-white/80":"text-slate-500"}`,children:i.description}),b.jsxs("div",{className:"mt-6",children:[b.jsxs("div",{className:"flex items-end gap-2",children:[b.jsx("span",{className:"text-3xl font-semibold",children:i.label}),i.price>0?b.jsxs("span",{className:`text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:["billed ",r]}):null]}),r==="annual"&&i.price>0?b.jsx("p",{className:`mt-2 text-xs ${i.isPopular?"text-white/70":"text-slate-400"}`,children:"Save 20% with annual billing"}):null]}),b.jsx("ul",{className:"mt-6 space-y-3 text-sm",children:i.highlights.map(a=>b.jsxs("li",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-current"}),b.jsx("span",{children:a})]},a))}),b.jsx("button",{type:"button",className:`mt-8 w-full rounded-full px-4 py-3 text-sm font-semibold ${i.isPopular?"bg-white text-slate-900":"bg-slate-900 text-white"}`,children:i.cta})]},i.name))})]})})},DR=()=>{const[r,t]=I.useState(0);return b.jsx("section",{className:"px-6 py-16",children:b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[b.jsx(Rr,{eyebrow:"FAQ",title:"Answers before you start",description:"Everything you need to know about privacy, storage, and how DecoDocs helps you decode faster.",align:"left"}),b.jsx("div",{className:"grid gap-4",children:yE.map((e,i)=>{const a=r===i;return b.jsxs("button",{type:"button",onClick:()=>t(a?-1:i),className:"rounded-3xl border border-slate-100 bg-white p-6 text-left shadow-lg shadow-slate-900/5",children:[b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsx("span",{className:"text-base font-semibold text-slate-900",children:e.question}),b.jsx("span",{className:"text-xl text-slate-500",children:a?"-":"+"})]}),a?b.jsx("p",{className:"mt-4 text-sm text-slate-600",children:e.answer}):null]},e.question)})})]})})},v0=()=>{const r=ua(),t=I.useRef(null),e=()=>{t.current&&t.current.click()},i=a=>{const l=a.target.files?.[0];if(l){if(l.type!=="application/pdf"){alert("Please select a valid PDF file"),a.target.value="";return}window.gtag&&window.gtag("event","home_open_pdf_click",{event_category:"engagement",event_label:"landing_open_pdf"}),r("/view",{state:{document:{id:Date.now()+Math.random(),name:l.name,size:l.size,type:l.type,file:l}}}),a.target.value=""}};return b.jsxs(xR,{onOpenPdf:e,children:[b.jsx("input",{ref:t,type:"file",accept:".pdf,application/pdf",onChange:i,style:{display:"none"}}),b.jsx(SR,{onOpenPdf:e}),b.jsx(_R,{}),b.jsx(ER,{}),b.jsx(TR,{}),b.jsx(CR,{}),b.jsx(RR,{}),b.jsx(DR,{})]})},NR="modulepreload",kR=function(r){return"/"+r},w0={},hp=function(t,e,i){let a=Promise.resolve();if(e&&e.length>0){let d=function(f){return Promise.all(f.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=c?.nonce||c?.getAttribute("nonce");a=d(e.map(f=>{if(f=kR(f),f in w0)return;w0[f]=!0;const g=f.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${m}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":NR,g||(v.as="script"),v.crossOrigin="",v.href=f,h&&v.setAttribute("nonce",h),document.head.appendChild(v),g)return new Promise((w,_)=>{v.addEventListener("load",w),v.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${f}`)))})}))}function l(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return a.then(c=>{for(const h of c||[])h.status==="rejected"&&l(h.reason);return t().catch(l)})};const MR="type.googleapis.com/google.protobuf.Int64Value",LR="type.googleapis.com/google.protobuf.UInt64Value";function ww(r,t){const e={};for(const i in r)r.hasOwnProperty(i)&&(e[i]=t(r[i]));return e}function lu(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(t=>lu(t));if(typeof r=="function"||typeof r=="object")return ww(r,t=>lu(t));throw new Error("Data cannot be encoded in JSON: "+r)}function Ar(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case MR:case LR:{const t=Number(r.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+r);return t}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(t=>Ar(t)):typeof r=="function"||typeof r=="object"?ww(r,t=>Ar(t)):r}const dp="functions";const A0={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends Yi{constructor(t,e,i){super(`${dp}/${t}`,e||""),this.details=i,Object.setPrototypeOf(this,We.prototype)}}function OR(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function cu(r,t){let e=OR(r),i=e,a;try{const l=t&&t.error;if(l){const c=l.status;if(typeof c=="string"){if(!A0[c])return new We("internal","internal");e=A0[c],i=c}const h=l.message;typeof h=="string"&&(i=h),a=l.details,a!==void 0&&(a=Ar(a))}}catch{}return e==="ok"?null:new We(e,i,a)}class IR{constructor(t,e,i,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,un(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=e.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||e.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||a?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const e=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return e.error?null:e.token}return null}async getContext(t){const e=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:e,messagingToken:i,appCheckToken:a}}}const Nf="us-central1",PR=/^data: (.*?)(?:\n|$)/;function jR(r){let t=null;return{promise:new Promise((e,i)=>{t=setTimeout(()=>{i(new We("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{t&&clearTimeout(t)}}}class BR{constructor(t,e,i,a,l=Nf,c=(...h)=>fetch(...h)){this.app=t,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new IR(t,e,i,a),this.cancelAllRequests=new Promise(h=>{this.deleteService=()=>Promise.resolve(h())});try{const h=new URL(l);this.customDomain=h.origin+(h.pathname==="/"?"":h.pathname),this.region=Nf}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(t){const e=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${e}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${e}.cloudfunctions.net/${t}`}}function UR(r,t,e){const i=Tr(t);r.emulatorOrigin=`http${i?"s":""}://${t}:${e}`,i&&(Dv(r.emulatorOrigin+"/backends"),Nv("Functions",!0))}function FR(r,t,e){const i=a=>HR(r,t,a,e||{});return i.stream=(a,l)=>VR(r,t,a,l),i}function Aw(r){return r.emulatorOrigin&&Tr(r.emulatorOrigin)?"include":void 0}async function zR(r,t,e,i,a){e["Content-Type"]="application/json";let l;try{l=await i(r,{method:"POST",body:JSON.stringify(t),headers:e,credentials:Aw(a)})}catch{return{status:0,json:null}}let c=null;try{c=await l.json()}catch{}return{status:l.status,json:c}}async function xw(r,t){const e={},i=await r.contextProvider.getContext(t.limitedUseAppCheckTokens);return i.authToken&&(e.Authorization="Bearer "+i.authToken),i.messagingToken&&(e["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(e["X-Firebase-AppCheck"]=i.appCheckToken),e}function HR(r,t,e,i){const a=r._url(t);return GR(r,a,e,i)}async function GR(r,t,e,i){e=lu(e);const a={data:e},l=await xw(r,i),c=i.timeout||7e4,h=jR(c),d=await Promise.race([zR(t,a,l,r.fetchImpl,r),h.promise,r.cancelAllRequests]);if(h.cancel(),!d)throw new We("cancelled","Firebase Functions instance was deleted.");const f=cu(d.status,d.json);if(f)throw f;if(!d.json)throw new We("internal","Response is not valid JSON object.");let g=d.json.data;if(typeof g>"u"&&(g=d.json.result),typeof g>"u")throw new We("internal","Response is missing data field.");return{data:Ar(g)}}function VR(r,t,e,i){const a=r._url(t);return qR(r,a,e,i||{})}async function qR(r,t,e,i){e=lu(e);const a={data:e},l=await xw(r,i);l["Content-Type"]="application/json",l.Accept="text/event-stream";let c;try{c=await r.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:l,signal:i?.signal,credentials:Aw(r)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const _=new We("cancelled","Request was cancelled.");return{data:Promise.reject(_),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(_)}}}}}}const w=cu(0,null);return{data:Promise.reject(w),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(w)}}}}}}let h,d;const f=new Promise((v,w)=>{h=v,d=w});i?.signal?.addEventListener("abort",()=>{const v=new We("cancelled","Request was cancelled.");d(v)});const g=c.body.getReader(),m=$R(g,h,d,i?.signal);return{stream:{[Symbol.asyncIterator](){const v=m.getReader();return{async next(){const{value:w,done:_}=await v.read();return{value:w,done:_}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:f}}function $R(r,t,e,i){const a=(c,h)=>{const d=c.match(PR);if(!d)return;const f=d[1];try{const g=JSON.parse(f);if("result"in g){t(Ar(g.result));return}if("message"in g){h.enqueue(Ar(g.message));return}if("error"in g){const m=cu(0,g);h.error(m),e(m);return}}catch(g){if(g instanceof We){h.error(g),e(g);return}}},l=new TextDecoder;return new ReadableStream({start(c){let h="";return d();async function d(){if(i?.aborted){const f=new We("cancelled","Request was cancelled");return c.error(f),e(f),Promise.resolve()}try{const{value:f,done:g}=await r.read();if(g){h.trim()&&a(h.trim(),c),c.close();return}if(i?.aborted){const v=new We("cancelled","Request was cancelled");c.error(v),e(v),await r.cancel();return}h+=l.decode(f,{stream:!0});const m=h.split(`
`);h=m.pop()||"";for(const v of m)v.trim()&&a(v.trim(),c);return d()}catch(f){const g=f instanceof We?f:cu(0,null);c.error(g),e(g)}}},cancel(){return r.cancel()}})}const x0="@firebase/functions",S0="0.13.1";const YR="auth-internal",XR="app-check-internal",WR="messaging-internal";function KR(r){const t=(e,{instanceIdentifier:i})=>{const a=e.getProvider("app").getImmediate(),l=e.getProvider(YR),c=e.getProvider(WR),h=e.getProvider(XR);return new BR(a,l,c,h,i)};wr(new oa(dp,t,"PUBLIC").setMultipleInstances(!0)),Ns(x0,S0,r),Ns(x0,S0,"esm2020")}function Sw(r=Jf(),t=Nf){const i=Zf(hn(r),dp).getImmediate({identifier:t}),a=CE("functions");return a&&_w(i,...a),i}function _w(r,t,e){UR(hn(r),t,e)}function ci(r,t,e){return FR(hn(r),t,e)}KR();const Ew=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:We,connectFunctionsEmulator:_w,getFunctions:Sw,httpsCallable:ci},Symbol.toStringTag,{value:"Module"}));async function QR({functions:r,docHash:t,text:e}){if(!r)throw new Error("Firebase functions not available");const i=ci(r,"analyzeByType");if(typeof i!="function")throw new Error("analyzeByType callable not available");return(await i({docHash:t,text:e}))?.data}async function ZR({functions:r,docHash:t,typeId:e}){if(!r)throw new Error("Firebase functions not available");const i=ci(r,"saveDocTypeOverride");return typeof i!="function"?null:(await i({docHash:t,typeId:e}))?.data}async function JR({functions:r,docHash:t}){if(!r)throw new Error("Firebase functions not available");const e=ci(r,"getDocumentTypeState");return typeof e!="function"?null:(await e({docHash:t}))?.data}async function t2({functions:r,docHash:t,stats:e,text:i}){if(!r)throw new Error("Firebase functions not available");const a=ci(r,"detectDocumentType");return typeof a!="function"?null:(await a({docHash:t,stats:e,text:i}))?.data}async function e2({functions:r,docHash:t,stats:e}){if(!r)throw new Error("Firebase functions not available");const i=ci(r,"preflightCheck");if(typeof i!="function")throw new Error("preflightCheck callable not available");return(await i({docHash:t,stats:e}))?.data}async function n2({functions:r,payload:t}){if(!r)throw new Error("Firebase functions not available");const e=ci(r,"analyzeText");if(typeof e!="function")throw new Error("analyzeText callable not available");return await e(t)}const Li=({children:r,showHeader:t=!0,showFooter:e=!0})=>{const{authState:i}=da(),a=jn(),l=i.status==="error"?i.error?.message:null,c=a.pathname==="/"||a.pathname==="/app";return b.jsxs("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900 flex flex-col",children:[t&&b.jsxs("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:[b.jsxs("div",{className:"mx-auto flex w-full max-w-6xl items-center justify-between px-6 py-4",children:[b.jsxs(Ut,{to:"/",className:"flex items-center gap-3 text-lg font-semibold text-slate-900 no-underline",children:[b.jsx("img",{src:Wf,alt:"DecoDocs",className:"h-9 w-9"}),"DecoDocs"]}),b.jsx("nav",{className:"hidden items-center gap-6 text-sm font-medium text-slate-600 md:flex",children:c?b.jsxs(b.Fragment,{children:[b.jsx("a",{className:"hover:text-slate-900 transition",href:"#how-it-works",children:"How it works"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#features",children:"Features"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#use-cases",children:"Use cases"}),b.jsx("a",{className:"hover:text-slate-900 transition",href:"#pricing",children:"Pricing"})]}):b.jsxs(b.Fragment,{children:[b.jsx(Ut,{className:"hover:text-slate-900 transition no-underline text-slate-600",to:"/view",children:"App"}),b.jsx(Ut,{className:"hover:text-slate-900 transition no-underline text-slate-600",to:"/pricing",children:"Pricing"}),b.jsx(Ut,{className:"hover:text-slate-900 transition no-underline text-slate-600",to:"/sign-in",children:"Sign in"}),b.jsx(Ut,{className:"hover:text-slate-900 transition no-underline text-slate-600",to:"/profile",children:"Profile"})]})}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx(Ut,{to:"/view",className:"hidden rounded-full border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-700 shadow-sm hover:border-slate-300 md:inline-flex no-underline",children:"Launch app"}),b.jsx(Ut,{to:"/pricing",className:"rounded-full bg-slate-900 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-900/20 transition hover:-translate-y-0.5 no-underline",children:"Pricing"})]})]}),b.jsx("div",{className:"border-t border-white/40 bg-white/60 px-6 py-2 text-xs text-slate-600",children:b.jsx("div",{className:"mx-auto w-full max-w-6xl",children:i.status==="authenticated"?b.jsx("span",{children:"Authenticated (AI features available)"}):l?b.jsxs("span",{children:['AI calls disabled: "',l,'" (viewer still works)']}):b.jsx("span",{children:"Authenticating"})})})]}),b.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:r}),e?b.jsx(Av,{}):null]})},i2=({onFileSelect:r,onEdit:t,currentFileName:e,pageNumber:i,numPages:a,pageScale:l,onPreviousPage:c,onNextPage:h,onZoomIn:d,onZoomOut:f,fileInputRef:g})=>b.jsxs("div",{className:"flex gap-4 mb-4 items-center flex-wrap",children:[b.jsx("button",{onClick:()=>g.current?.click(),className:"bg-blue-500 text-white px-4 py-2 text-sm rounded hover:bg-blue-600 transition-colors",children:"Open Different PDF"}),b.jsx("button",{onClick:t,className:"bg-green-600 text-white px-4 py-2 text-sm rounded hover:bg-green-700 transition-colors",children:"Edit & Sign"}),e&&b.jsxs("span",{className:"text-sm text-gray-600 flex-1 text-left break-all",children:["Current: ",e]}),b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("button",{onClick:c,disabled:i<=1,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:" Prev"}),b.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",i," of ",a||0]}),b.jsx("button",{onClick:h,disabled:i>=a,className:"px-3 py-1 text-sm rounded border border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-100",children:"Next "})]}),b.jsxs("div",{className:"flex gap-2 items-center",children:[b.jsx("button",{onClick:f,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom Out"}),b.jsxs("span",{className:"text-sm text-gray-700 min-w-[60px] text-center",children:[Math.round(l*100),"%"]}),b.jsx("button",{onClick:d,className:"px-3 py-1 text-sm rounded border border-gray-300 hover:bg-gray-100",children:"Zoom In"})]}),b.jsx("input",{type:"file",ref:g,accept:".pdf",onChange:r,className:"hidden"})]}),s2=({pdfDoc:r,isLoading:t,loadingMessage:e,canvasRef:i,textLayerRef:a,annotationsRef:l})=>t?b.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),b.jsx("p",{children:e||"Loading PDF..."})]})}):r?b.jsx("div",{className:"flex-1 border border-gray-300 rounded overflow-hidden relative bg-gray-100 h-[calc(100vh-200px)] overflow-auto",children:b.jsxs("div",{className:"relative mx-auto w-fit",children:[b.jsx("canvas",{ref:i,className:"block max-w-full max-h-full bg-white shadow-lg"}),b.jsx("div",{ref:a,className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-0 leading-none"}),b.jsx("div",{ref:l,className:"absolute top-0 left-0 w-full h-full pointer-events-none"})]})}):b.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600",children:b.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})}),a2=({onAnalyzeDocument:r,onAnalyzeByType:t,onExplainSelection:e,onHighlightRisks:i,onTranslateToPlainEnglish:a,isLoading:l,isAuthenticated:c,hasDocument:h})=>{const d=!h||!c||l;let f=null;return l?f="Working":h?c||(f="Sign in to enable AI analysis (Free) and unlock Pro upgrades (OCR / deeper processing)."):f="Open a PDF to enable analysis tools.",b.jsxs("div",{className:"w-full lg:w-[350px] p-5 bg-gray-50 border-t border-gray-300 lg:border-t-0 lg:border-l flex flex-col overflow-y-auto",children:[b.jsx("h3",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2.5",children:"Document Analysis Tools"}),f&&b.jsxs("div",{className:"mb-4 rounded border border-slate-200 bg-white p-3 text-sm text-slate-700",children:[b.jsx("div",{className:"font-semibold",children:"Why are buttons disabled?"}),b.jsx("div",{className:"mt-1",children:f}),!c&&b.jsxs("div",{className:"mt-2 flex gap-3 flex-wrap",children:[b.jsx(Ut,{to:"/sign-in",className:"rounded-full bg-slate-900 px-3 py-1.5 text-xs font-semibold text-white no-underline",children:"Sign in"}),b.jsx(Ut,{to:"/pricing",className:"rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 no-underline",children:"See Free vs Pro"})]})]}),b.jsxs("div",{className:"flex flex-col gap-2.5 mb-5",children:[b.jsx("button",{onClick:t,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:l?"Analyzing...":"Type-specific analysis (recommended)"}),b.jsx("button",{onClick:r,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Legacy analysis (generic)"}),b.jsx("button",{onClick:e,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Explain Selection"}),b.jsx("button",{onClick:i,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Highlight Risks"}),b.jsx("button",{onClick:a,disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Translate to Plain English"}),b.jsx("button",{disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Summarize Key Points"}),b.jsx("button",{disabled:d,className:"w-full bg-gray-600 text-white px-4 py-2.5 text-sm rounded hover:bg-gray-700 transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed text-left",children:"Suggest Improvements"})]})]})},r2=({risk:r})=>{const t=i=>{switch(i){case"high":return"bg-red-600";case"medium":return"bg-orange-500";case"low":return"bg-yellow-500";default:return"bg-gray-500"}},e=i=>{switch(i){case"high":return"border-l-red-600";case"medium":return"border-l-orange-500";case"low":return"border-l-yellow-500";default:return"border-l-gray-500"}};return b.jsxs("div",{className:`mb-3 border border-gray-300 rounded overflow-hidden ${e(r.riskLevel)}`,children:[b.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-50",children:[b.jsx("h6",{className:"m-0 text-gray-700 font-semibold",children:r.clause}),b.jsx("span",{className:`px-2 py-0.5 rounded-xl text-xs font-bold text-white ${t(r.riskLevel)}`,children:r.riskLevel.toUpperCase()})]}),b.jsxs("div",{className:"p-2.5 bg-white",children:[b.jsxs("p",{className:"mb-2",children:[b.jsx("strong",{children:"Risk:"})," ",r.description]}),b.jsxs("p",{className:"m-0",children:[b.jsx("strong",{children:"Plain Language:"})," ",r.explanation]})]})]})},o2=({analysis:r})=>{const t=r?._meta||{status:r?"success":"idle"};if(!r||t.status==="idle")return b.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[b.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),b.jsx("p",{className:"text-gray-700 m-0",children:"No analysis yet. Run Type-specific analysis (recommended) to see results here."})]});if(t.status==="loading")return b.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[b.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),b.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[b.jsx("div",{className:"w-5 h-5 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),b.jsx("div",{children:t.message||"Analyzing"})]})]});if(t.status==="error")return b.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[b.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),b.jsxs("div",{className:"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-900",children:[b.jsx("div",{className:"font-semibold",children:"Analysis failed"}),b.jsx("div",{className:"mt-1",children:t.message||"Request failed."})]})]});const e=typeof r.summary=="string"&&r.summary.trim().length>0,i=Array.isArray(r.risks)&&r.risks.length>0,a=Array.isArray(r.recommendations)&&r.recommendations.length>0;return b.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[b.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),!e&&!r.typeSpecific?b.jsx("p",{className:"text-gray-700 m-0",children:"No results were returned yet."}):null,e&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Document Summary"}),b.jsx("p",{className:"text-gray-700",children:r.summary})]}),i&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Identified Risks"}),r.risks.map(l=>b.jsx(r2,{risk:l},l.id))]}),r.typeSpecific&&b.jsxs("div",{className:"mb-4",children:[b.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Type-specific (beta)"}),b.jsxs("div",{className:"text-gray-700",style:{whiteSpace:"pre-wrap"},children:[b.jsxs("div",{children:[b.jsx("strong",{children:"effectiveTypeId:"})," ",r.typeSpecific.effectiveTypeId||""]}),b.jsxs("div",{children:[b.jsx("strong",{children:"validationSlug:"})," ",r.typeSpecific.validationSlug||""]}),b.jsxs("div",{children:[b.jsx("strong",{children:"validationTitle:"})," ",r.typeSpecific.validationTitle||""]}),r.typeSpecific.result?.plainExplanation?b.jsxs("div",{style:{marginTop:8},children:[b.jsx("strong",{children:"explanation:"}),b.jsx("div",{children:r.typeSpecific.result.plainExplanation})]}):null,r.typeSpecific.usage?b.jsxs("div",{style:{marginTop:8},children:[b.jsx("strong",{children:"usage:"}),b.jsxs("div",{children:["estimatedTokens: ",r.typeSpecific.usage.estimatedTokens??"","  ","remainingTokens: ",r.typeSpecific.usage.remainingTokens??""]})]}):null,r.typeSpecific.ok===!1&&(r.typeSpecific.code||r.typeSpecific.requiredTier)?b.jsxs("div",{style:{marginTop:8,color:"#991b1b"},children:[b.jsx("strong",{children:"blocked:"})," ",r.typeSpecific.code||"",r.typeSpecific.requiredTier?` (required: ${r.typeSpecific.requiredTier})`:""]}):null,r.typeSpecific.result?.checks?.length?b.jsxs("div",{style:{marginTop:8},children:[b.jsx("strong",{children:"checks:"}),b.jsx("ul",{className:"list-none p-0",style:{marginTop:6},children:r.typeSpecific.result.checks.map(l=>b.jsx("li",{className:"mb-2 p-2 border border-gray-200 rounded",children:b.jsxs("div",{children:[b.jsxs("strong",{children:[l.ok?"OK":"FAIL",":"]})," ",l.message]})},l.id))})]}):null,r.typeSpecific.result?.extracted&&Object.keys(r.typeSpecific.result.extracted).length?b.jsxs("div",{style:{marginTop:8},children:[b.jsx("strong",{children:"extracted:"}),b.jsx("pre",{style:{marginTop:6,background:"#f8fafc",border:"1px solid #e2e8f0",padding:10,borderRadius:10,overflow:"auto"},children:JSON.stringify(r.typeSpecific.result.extracted,null,2)})]}):null,r.typeSpecific.message?b.jsxs("div",{style:{marginTop:8},children:[b.jsx("strong",{children:"message:"}),b.jsx("div",{children:r.typeSpecific.message})]}):null]})]}),a&&b.jsxs("div",{children:[b.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Recommendations"}),b.jsx("ul",{className:"list-none p-0",children:r.recommendations.map((l,c)=>b.jsx("li",{className:"mb-4 p-2.5 border border-gray-300 rounded",children:b.jsx("div",{className:"text-gray-700",children:l})},c))})]})]})},le={UNREADABLE:"UNREADABLE",GENERAL:"GENERAL",BUSINESS_LEGAL:"BUSINESS_LEGAL"},l2=[{id:"unreadable_broken",label:"Unreadable / broken file",category:le.UNREADABLE,synonyms:["corrupt","broken","invalid pdf","cannot open","damaged"]},{id:"unreadable_encrypted",label:"Password-protected / encrypted",category:le.UNREADABLE,synonyms:["encrypted","password","protected"]},{id:"unreadable_empty",label:"Empty / blank document",category:le.UNREADABLE,synonyms:["blank","empty","no text"]},{id:"general_letter",label:"Letter (general / personal)",category:le.GENERAL,synonyms:["letter","correspondence","personal letter"]},{id:"general_police_letter",label:"Police letter / notice",category:le.GENERAL,synonyms:["police","notice","infringement","fine","offence"]},{id:"general_presentation",label:"Presentation / pitch deck",category:le.GENERAL,synonyms:["deck","slides","presentation","pitch"]},{id:"general_marketing",label:"Flyer / advertisement / marketing",category:le.GENERAL,synonyms:["flyer","ad","advertisement","brochure","marketing"]},{id:"general_book",label:"Book / long-form text",category:le.GENERAL,synonyms:["book","chapter","novel","story","longform"]},{id:"general_notes",label:"Notes / diary / journal",category:le.GENERAL,synonyms:["notes","diary","journal","private notes"]},{id:"general_schedule",label:"Schedule / timetable",category:le.GENERAL,synonyms:["schedule","timetable","calendar","rota"]},{id:"general_sop_procedure",label:"SOP / procedure",category:le.GENERAL,synonyms:["sop","procedure","runbook","work instruction","instructions","guide"],validationSlug:"sop-procedure"},{id:"general_resume_cv",label:"Resume / CV",category:le.GENERAL,synonyms:["resume","cv","curriculum vitae","work experience","education","skills"]},{id:"legal_job_offer",label:"Job offer / offer letter",category:le.BUSINESS_LEGAL,synonyms:["offer letter","job offer","employment offer","compensation","salary","starting date"],validationSlug:"job-offer"},{id:"legal_contract_generic",label:"Contract / agreement (general)",category:le.BUSINESS_LEGAL,synonyms:["agreement","contract","terms","conditions"]},{id:"legal_employment_contract",label:"Employment contract",category:le.BUSINESS_LEGAL,synonyms:["employment","employee","employer","salary","position"]},{id:"legal_nda",label:"NDA / confidentiality agreement",category:le.BUSINESS_LEGAL,synonyms:["nda","non-disclosure","confidentiality"]},{id:"legal_lease_residential",label:"Residential lease / tenancy agreement",category:le.BUSINESS_LEGAL,synonyms:["lease","tenancy","rent","bond","landlord","tenant"]},{id:"legal_lease_commercial",label:"Commercial lease",category:le.BUSINESS_LEGAL,synonyms:["commercial lease","premises","outgoings"]},{id:"business_invoice",label:"Invoice",category:le.BUSINESS_LEGAL,synonyms:["invoice","tax invoice","payment due"],validationSlug:"invoice"},{id:"business_purchase_order",label:"Purchase order",category:le.BUSINESS_LEGAL,synonyms:["purchase order","po","order"]},{id:"policy_privacy",label:"Privacy policy",category:le.BUSINESS_LEGAL,synonyms:["privacy policy","personal information","data collection"],validationSlug:"company-policy"},{id:"policy_terms",label:"Terms of service / website terms",category:le.BUSINESS_LEGAL,synonyms:["terms of service","terms","conditions","website terms"]}];function Tw(){const[r,t]=I.useState(null);I.useEffect(()=>{let l=!1;return(async()=>{try{const h=await fetch("/classifications/document-types.index.json",{cache:"force-cache"});if(!h.ok)throw new Error(`Failed to load document types: ${h.status}`);const d=await h.json(),f=Array.isArray(d?.types)?d.types:null;if(f)for(const g of f)"validationSlug"in g||(g.validationSlug=null);if(!f)throw new Error("Invalid document-types.index.json");l||t(f)}catch{l||t(null)}})(),()=>{l=!0}},[]);const e=I.useMemo(()=>Array.isArray(r)&&r.length?r:l2,[r]),i=I.useMemo(()=>l=>{const c=String(l||"").trim().toLowerCase();if(!c)return e;const h=d=>{const f=String(d.label||"").toLowerCase(),g=Array.isArray(d.synonyms)?d.synonyms.join(" ").toLowerCase():"";if(f.includes(c))return 100;if(g.includes(c))return 80;const m=c.split(/\s+/).filter(Boolean);return m.length&&m.every(v=>f.includes(v)||g.includes(v))?60:0};return e.map(d=>({t:d,s:h(d)})).filter(d=>d.s>0).sort((d,f)=>f.s-d.s).map(d=>d.t)},[e]);return{types:e,find:i,categories:le,source:Array.isArray(r)&&r.length?"remote":"bundled"}}const c2=(r,t)=>r===t.BUSINESS_LEGAL?"Business & legal":r===t.GENERAL?"General documents":r===t.UNREADABLE?"Unreadable / special cases":"Other";function u2({open:r,onClose:t,detectedType:e,onPick:i}){const[a,l]=I.useState(""),[c,h]=I.useState(0),d=I.useRef(null),{types:f,find:g,categories:m,source:v}=Tw();I.useEffect(()=>{r&&(l(""),h(0),setTimeout(()=>d.current?.focus(),0))},[r]);const w=I.useMemo(()=>{const T=g(a);return a?T.slice(0,30):f.slice(0,25)},[a,g,f]),_=I.useMemo(()=>{const T=new Map;for(const R of w){const k=R.category;T.has(k)||T.set(k,[]),T.get(k).push(R)}return Array.from(T.entries())},[w]),x=I.useMemo(()=>w,[w]),S=T=>{const R=x[T];R&&i?.(R)},E=T=>{if(T.key==="Escape"){t?.();return}if(T.key==="ArrowDown"){T.preventDefault(),h(R=>Math.min(R+1,x.length-1));return}if(T.key==="ArrowUp"){T.preventDefault(),h(R=>Math.max(R-1,0));return}T.key==="Enter"&&(T.preventDefault(),S(c))};return r?b.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2500,padding:16},onClick:()=>t?.(),children:b.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:760,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:T=>T.stopPropagation(),onKeyDown:E,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"flex-start"},children:[b.jsxs("div",{children:[b.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Change document type"}),b.jsx("div",{style:{marginTop:6,color:"#475569",lineHeight:1.4},children:"We use this to decide which actions/checks to show. You can override the AI classification."}),e&&b.jsxs("div",{style:{marginTop:8,color:"#64748b",fontSize:13},children:["Detected: ",b.jsx("strong",{children:e.label})]})]}),b.jsx("button",{type:"button",onClick:()=>t?.(),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),b.jsx("input",{ref:d,value:a,onChange:T=>{l(T.target.value),h(0)},placeholder:"Start typing (e.g. lease, invoice, police letter)",style:{marginTop:14,width:"100%",padding:12,borderRadius:12,border:"1px solid #e2e8f0"}}),b.jsxs("div",{style:{marginTop:14,maxHeight:360,overflow:"auto"},children:[_.map(([T,R])=>b.jsxs("div",{style:{marginBottom:14},children:[b.jsxs("div",{style:{fontWeight:900,color:"#0f172a",fontSize:13,marginBottom:8},children:[c2(T,m),b.jsxs("span",{style:{marginLeft:8,color:"#94a3b8",fontWeight:800},children:["(",v,")"]})]}),b.jsx("div",{style:{display:"grid",gap:8},children:R.map(k=>{const L=x.findIndex(j=>j.id===k.id),P=L===c;return b.jsxs("button",{type:"button",onClick:()=>i?.(k),onMouseEnter:()=>h(L),style:{textAlign:"left",padding:"10px 12px",borderRadius:12,border:"1px solid "+(P?"#0f172a":"#e2e8f0"),background:P?"#f8fafc":"#fff",cursor:"pointer"},children:[b.jsx("div",{style:{fontWeight:900,color:"#0f172a"},children:k.label}),b.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:2},children:k.id})]},k.id)})})]},T)),!_.length&&b.jsx("div",{style:{color:"#64748b"},children:"No matches."})]})]})}):null}function h2(r){const[t,e]=I.useState({status:"idle",spec:null,error:null});return I.useEffect(()=>{if(!r){e({status:"idle",spec:null,error:null});return}let i=!1;return(async()=>{e({status:"loading",spec:null,error:null});try{const l=await fetch(`/classifications/validation/${r}.json`,{cache:"force-cache"});if(!l.ok)throw new Error(`Failed to load validation spec: ${l.status}`);const c=await l.json();i||e({status:"ready",spec:c,error:null})}catch(l){i||e({status:"error",spec:null,error:l})}})(),()=>{i=!0}},[r]),t}const d2=(r,t)=>{const e=I.useRef(null),i=I.useRef(null),a=I.useRef(null),l=g=>{alert(`Clause: ${g.text}

${g.details||"No details available."}`)},c=g=>{alert(`Risk: ${g.description}

${g.explanation||"No explanation available."}`)},h=I.useCallback(async(g,m)=>{if(i.current){i.current.innerHTML="";try{const w=(await g.getTextContent()).items,_=m.transform;for(const x of w){const S=document.createElement("span");S.textContent=x.str,S.style.position="absolute",S.style.color="transparent",S.style.whiteSpace="pre",S.style.fontSize=`${x.height}px`,S.style.fontFamily="sans-serif",S.style.lineHeight="1";const E=_[0]*x.transform[4]+_[2]*x.transform[5]+_[4],T=_[1]*x.transform[4]+_[3]*x.transform[5]+_[5];S.style.left=`${E}px`,S.style.top=`${T}px`,S.style.width=`${x.width*_[0]}px`,S.style.height=`${x.height*_[3]}px`,i.current.appendChild(S)}}catch(v){console.error("Error rendering text layer:",v)}}},[]),d=I.useCallback((g,m,v,w,_)=>{a.current&&(a.current.innerHTML="",v.filter(x=>x.pageNum===g).forEach(x=>{const S=document.createElement("div");S.className="highlight-overlay",S.style.position="absolute",S.style.backgroundColor="rgba(255, 255, 0, 0.3)",S.style.border="1px solid rgba(255, 255, 0, 0.5)",S.style.left=`${x.x}px`,S.style.top=`${x.y}px`,S.style.width=`${x.width}px`,S.style.height=`${x.height}px`,S.style.pointerEvents="none",S.dataset.page=g,a.current.appendChild(S)}),w.filter(x=>x.pageNum===g).forEach(x=>{const S=document.createElement("div");S.className="clause-marker",S.style.position="absolute",S.style.left=`${x.x}px`,S.style.top=`${x.y}px`,S.style.width="20px",S.style.height="20px",S.style.borderRadius="50%",S.style.backgroundColor="rgba(0, 123, 255, 0.7)",S.style.cursor="pointer",S.style.zIndex="10",S.title=x.text,S.onclick=()=>l(x),a.current.appendChild(S)}),_.filter(x=>x.pageNum===g).forEach(x=>{const S=document.createElement("div");S.className="risk-badge",S.style.position="absolute",S.style.left=`${x.x}px`,S.style.top=`${x.y}px`,S.style.padding="2px 6px",S.style.borderRadius="10px",S.style.fontSize="12px",S.style.fontWeight="bold",S.style.color="white",S.style.backgroundColor=x.level==="high"?"#dc3545":x.level==="medium"?"#fd7e14":"#ffc107",S.style.cursor="pointer",S.style.zIndex="10",S.title=x.description,S.onclick=()=>c(x),S.textContent=x.level.toUpperCase(),a.current.appendChild(S)}))},[]),f=I.useCallback(async(g,m=[],v=[],w=[])=>{if(!(!r||!e.current))try{const _=await r.getPage(g),x=e.current,S=x.getContext("2d"),E=t,T=_.getViewport({scale:E});x.height=T.height,x.width=T.width,S.clearRect(0,0,x.width,x.height);const R={canvasContext:S,viewport:T};await _.render(R).promise,await h(_,T),d(g,T,m,v,w)}catch(_){console.error("Error rendering page:",_)}},[r,t,h,d]);return{canvasRef:e,textLayerRef:i,annotationsRef:a,renderPage:f}},Xe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),kf=[.001,0,0,.001,0,0],cf=1.35,vn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Pi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Wo="pdfjs_internal_editor_",At={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Mt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Cw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Mf={TRIANGLES:1,LATTICE:2},Re={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},zo={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ye={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},or={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cl={ERRORS:0,WARNINGS:1,INFOS:5},xr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Do={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Rw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Au=cl.WARNINGS;function f2(r){Number.isInteger(r)&&(Au=r)}function p2(){return Au}function xu(r){Au>=cl.INFOS&&console.info(`Info: ${r}`)}function xt(r){Au>=cl.WARNINGS&&console.warn(`Warning: ${r}`)}function Qt(r){throw new Error(r)}function It(r,t){r||Qt(t)}function g2(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fp(r,t=null,e=null){if(!r)return null;if(e&&typeof r=="string"&&(e.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),e.tryConvertEncoding))try{r=w2(r)}catch{}const i=t?URL.parse(r,t):URL.parse(r);return g2(i)?i:null}function pp(r,t,e=!1){const i=URL.parse(r);return i?(i.hash=t,i.href):e&&fp(r,"http://example.com")?r.split("#",1)[0]+`${t?`#${t}`:""}`:""}function bt(r,t,e,i=!1){return Object.defineProperty(r,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const fa=(function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t})();class _0 extends fa{constructor(t,e){super(t,"PasswordException"),this.code=e}}class uf extends fa{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class uu extends fa{constructor(t){super(t,"InvalidPDFException")}}class Ko extends fa{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class m2 extends fa{constructor(t){super(t,"FormatError")}}class qi extends fa{constructor(t){super(t,"AbortException")}}function Dw(r){(typeof r!="object"||r?.length===void 0)&&Qt("Invalid argument for bytesToString");const t=r.length,e=8192;if(t<e)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<t;a+=e){const l=Math.min(a+e,t),c=r.subarray(a,l);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function ul(r){typeof r!="string"&&Qt("Invalid argument for stringToBytes");const t=r.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=r.charCodeAt(i)&255;return e}function y2(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function b2(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function v2(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return bt(this,"isLittleEndian",b2())}static get isEvalSupported(){return bt(this,"isEvalSupported",v2())}static get isOffscreenCanvasSupported(){return bt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return bt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return bt(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return bt(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return bt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){return bt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const hf=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class st{static makeHexColor(t,e,i){return`#${hf[t]}${hf[e]}${hf[i]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,i=0){const a=t[i],l=t[i+1];t[i]=a*e[0]+l*e[2]+e[4],t[i+1]=a*e[1]+l*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5];for(let g=0;g<6;g+=2){const m=t[i+g],v=t[i+g+1];t[i+g]=m*a+v*c+d,t[i+g+1]=m*l+v*h+f}}static applyInverseTransform(t,e){const i=t[0],a=t[1],l=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-a*e[2]+e[2]*e[5]-e[4]*e[3])/l,t[1]=(-i*e[1]+a*e[0]+e[4]*e[1]-e[5]*e[0])/l}static axialAlignedBoundingBox(t,e,i){const a=e[0],l=e[1],c=e[2],h=e[3],d=e[4],f=e[5],g=t[0],m=t[1],v=t[2],w=t[3];let _=a*g+d,x=_,S=a*v+d,E=S,T=h*m+f,R=T,k=h*w+f,L=k;if(l!==0||c!==0){const P=l*g,j=l*v,X=c*m,K=c*w;_+=X,E+=X,S+=K,x+=K,T+=P,L+=P,k+=j,R+=j}i[0]=Math.min(i[0],_,S,x,E),i[1]=Math.min(i[1],T,k,R,L),i[2]=Math.max(i[2],_,S,x,E),i[3]=Math.max(i[3],T,k,R,L)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],a=t[1],l=t[2],c=t[3],h=i**2+a**2,d=i*l+a*c,f=l**2+c**2,g=(h+f)/2,m=Math.sqrt(g**2-(h*f-d**2));e[0]=Math.sqrt(g+m||1),e[1]=Math.sqrt(g-m||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),a=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>a)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),c=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return l>c?null:[i,l,a,c]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,a,l){l[0]=Math.min(l[0],t,i),l[1]=Math.min(l[1],e,a),l[2]=Math.max(l[2],t,i),l[3]=Math.max(l[3],e,a)}static#t(t,e,i,a,l,c,h,d,f,g){if(f<=0||f>=1)return;const m=1-f,v=f*f,w=v*f,_=m*(m*(m*t+3*f*e)+3*v*i)+w*a,x=m*(m*(m*l+3*f*c)+3*v*h)+w*d;g[0]=Math.min(g[0],_),g[1]=Math.min(g[1],x),g[2]=Math.max(g[2],_),g[3]=Math.max(g[3],x)}static#e(t,e,i,a,l,c,h,d,f,g,m,v){if(Math.abs(f)<1e-12){Math.abs(g)>=1e-12&&this.#t(t,e,i,a,l,c,h,d,-m/g,v);return}const w=g**2-4*m*f;if(w<0)return;const _=Math.sqrt(w),x=2*f;this.#t(t,e,i,a,l,c,h,d,(-g+_)/x,v),this.#t(t,e,i,a,l,c,h,d,(-g-_)/x,v)}static bezierBoundingBox(t,e,i,a,l,c,h,d,f){f[0]=Math.min(f[0],t,h),f[1]=Math.min(f[1],e,d),f[2]=Math.max(f[2],t,h),f[3]=Math.max(f[3],e,d),this.#e(t,i,l,h,e,a,c,d,3*(-t+3*(i-l)+h),6*(t-2*i+l),3*(i-t),f),this.#e(t,i,l,h,e,a,c,d,3*(-e+3*(a-c)+d),6*(e-2*a+c),3*(a-e),f)}}function w2(r){return decodeURIComponent(escape(r))}let df=null,E0=null;function Nw(r){return df||(df=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,E0=new Map([["","t"]])),r.replaceAll(df,(t,e,i)=>e?e.normalize("NFKC"):E0.get(i))}function gp(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),Dw(r)}const cr="pdfjs_internal_id_";function A2(r,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,a,...l]=e;if(!r(i)&&!Number.isInteger(i)||!t(a))return!1;const c=l.length;let h=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;h=!1;break;default:return!1}for(const d of l)if(!(typeof d=="number"||h&&d===null))return!1;return!0}function Ge(r,t,e){return Math.min(Math.max(r,t),e)}function kw(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(Dw(r))}function x2(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):ul(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...t){return new Promise(e=>{e(r(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((t,e)=>t+e,0)});class Qo{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function a(l){if(!l)return;let c=null;const h=l.name;if(h==="#text")c=l.value;else if(Qo.shouldBuildText(h))l?.attributes?.textContent?c=l.attributes.textContent:l.value&&(c=l.value);else return;if(c!==null&&e.push({str:c}),!!l.children)for(const d of l.children)a(d)}return a(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class mp{static setupStorage(t,e,i,a,l){const c=a.getValue(e,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(t.textContent=c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?t.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",h=>{a.setValue(e,{value:h.target.checked?h.target.getAttribute("xfaOn"):h.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&t.setAttribute("value",c.value),l==="print")break;t.addEventListener("input",h=>{a.setValue(e,{value:h.target.value})})}break;case"select":if(c.value!==null){t.setAttribute("value",c.value);for(const h of i.children)h.attributes.value===c.value?h.attributes.selected=!0:h.attributes.hasOwnProperty("selected")&&delete h.attributes.selected}t.addEventListener("input",h=>{const d=h.target.options,f=d.selectedIndex===-1?"":d[d.selectedIndex].value;a.setValue(e,{value:f})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:a,linkService:l}){const{attributes:c}=e,h=t instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[d,f]of Object.entries(c))if(f!=null)switch(d){case"class":f.length&&t.setAttribute(d,f.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",f);break;case"style":Object.assign(t.style,f);break;case"textContent":t.textContent=f;break;default:(!h||d!=="href"&&d!=="newWindow")&&t.setAttribute(d,f)}h&&l.addLinkAttributes(t,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(t,c.dataId,e,i)}static render(t){const e=t.annotationStorage,i=t.linkService,a=t.xfaHtml,l=t.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:l,linkService:i});const h=l!=="richText",d=t.div;if(d.append(c),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;d.style.transform=m}h&&d.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const m=document.createTextNode(a.value);c.append(m),h&&Qo.shouldBuildText(a.name)&&f.push(m)}return{textDivs:f}}const g=[[a,-1,c]];for(;g.length>0;){const[m,v,w]=g.at(-1);if(v+1===m.children.length){g.pop();continue}const _=m.children[++g.at(-1)[1]];if(_===null)continue;const{name:x}=_;if(x==="#text"){const E=document.createTextNode(_.value);f.push(E),w.append(E);continue}const S=_?.attributes?.xmlns?document.createElementNS(_.attributes.xmlns,x):document.createElement(x);if(w.append(S),_.attributes&&this.setAttributes({html:S,element:_,storage:e,intent:l,linkService:i}),_.children?.length>0)g.push([_,-1,S]);else if(_.value){const E=document.createTextNode(_.value);h&&Qo.shouldBuildText(x)&&f.push(E),S.append(E)}}for(const m of d.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:f}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Oi="http://www.w3.org/2000/svg";class la{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Dr(r,t="text"){if(Po(r,document.baseURI)){const e=await fetch(r);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=t,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(a.response);return}e(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class hl{constructor({viewBox:t,userUnit:e,scale:i,rotation:a,offsetX:l=0,offsetY:c=0,dontFlip:h=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=a,this.offsetX=l,this.offsetY=c,i*=e;const d=(t[2]+t[0])/2,f=(t[3]+t[1])/2;let g,m,v,w;switch(a%=360,a<0&&(a+=360),a){case 180:g=-1,m=0,v=0,w=1;break;case 90:g=0,m=1,v=1,w=0;break;case 270:g=0,m=-1,v=-1,w=0;break;case 0:g=1,m=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(v=-v,w=-w);let _,x,S,E;g===0?(_=Math.abs(f-t[1])*i+l,x=Math.abs(d-t[0])*i+c,S=(t[3]-t[1])*i,E=(t[2]-t[0])*i):(_=Math.abs(d-t[0])*i+l,x=Math.abs(f-t[1])*i+c,S=(t[2]-t[0])*i,E=(t[3]-t[1])*i),this.transform=[g*i,m*i,v*i,w*i,_-g*i*d-v*i*f,x-m*i*d-w*i*f],this.width=S,this.height=E}get rawDims(){const t=this.viewBox;return bt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:l=!1}={}){return new hl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}convertToViewportPoint(t,e){const i=[t,e];return st.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];st.applyTransform(e,this.transform);const i=[t[2],t[3]];return st.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return st.applyInverseTransform(i,this.transform),i}}class Su extends fa{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function dl(r){const t=r.length;let e=0;for(;e<t&&r[e].trim()==="";)e++;return r.substring(e,e+5).toLowerCase()==="data:"}function _u(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function Mw(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Lw(r,t="document.pdf"){if(typeof r!="string")return t;if(dl(r))return xt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(h=>{try{return new URL(h)}catch{try{return new URL(decodeURIComponent(h))}catch{try{return new URL(h,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(h),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return t;const a=h=>{try{let d=decodeURIComponent(h);return d.includes("/")?(d=d.split("/").at(-1),d.test(/^\.pdf$/i)?d:h):d}catch{return h}},l=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(l.test(c))return a(c);if(i.searchParams.size>0){const h=Array.from(i.searchParams.values()).reverse();for(const f of h)if(l.test(f))return a(f);const d=Array.from(i.searchParams.keys()).reverse();for(const f of d)if(l.test(f))return a(f)}if(i.hash){const d=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(d)return a(d[0])}return t}class T0{started=Object.create(null);times=[];time(t){t in this.started&&xt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||xt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:a,end:l}of this.times)t.push(`${i.padEnd(e)} ${l-a}ms
`);return t.join("")}}function Po(r,t){const e=t?URL.parse(r,t):URL.parse(r);return e?.protocol==="http:"||e?.protocol==="https:"}function xn(r){r.preventDefault()}function ue(r){r.preventDefault(),r.stopPropagation()}function S2(r){console.log("Deprecated API usage: "+r)}class hu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=this.#t.exec(t);if(!e)return null;const i=parseInt(e[1],10);let a=parseInt(e[2],10);a=a>=1&&a<=12?a-1:0;let l=parseInt(e[3],10);l=l>=1&&l<=31?l:1;let c=parseInt(e[4],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[5],10);h=h>=0&&h<=59?h:0;let d=parseInt(e[6],10);d=d>=0&&d<=59?d:0;const f=e[7]||"Z";let g=parseInt(e[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(e[9],10)||0;return m=m>=0&&m<=59?m:0,f==="-"?(c+=g,h+=m):f==="+"&&(c-=g,h-=m),new Date(Date.UTC(i,a,l,c,h,d))}}function Ow(r,{scale:t=1,rotation:e=0}){const{width:i,height:a}=r.attributes.style,l=[0,0,parseInt(i),parseInt(a)];return new hl({viewBox:l,userUnit:1,scale:t,rotation:e})}function Nr(r){if(r.startsWith("#")){const t=parseInt(r.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(t=>parseInt(t)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(xt(`Not a valid color format: "${r}"`),[0,0,0])}function _2(r){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of r.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;r.set(e,Nr(i))}t.remove()}function ce(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform();return[t,e,i,a,l,c]}function ei(r){const{a:t,b:e,c:i,d:a,e:l,f:c}=r.getTransform().invertSelf();return[t,e,i,a,l,c]}function Ms(r,t,e=!1,i=!0){if(t instanceof hl){const{pageWidth:a,pageHeight:l}=t.rawDims,{style:c}=r,h=Ee.isCSSRoundSupported,d=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${l}px`,g=h?`round(down, ${d}, var(--scale-round-x))`:`calc(${d})`,m=h?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!e||t.rotation%180===0?(c.width=g,c.height=m):(c.width=m,c.height=g)}i&&r.setAttribute("data-main-rotation",t.rotation)}class qn{constructor(){const{pixelRatio:t}=qn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,a,l=-1){let c=1/0,h=1/0,d=1/0;i=qn.capPixels(i,l),i>0&&(c=Math.sqrt(i/(t*e))),a!==-1&&(h=a/t,d=a/e);const f=Math.min(c,h,d);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const du=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class E2{static get isDarkMode(){return bt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Iw{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:e}=t;e.width=e.height="0",e.display="none",e.color="var(--comment-fg-color)",document.body.append(t);const{color:i}=window.getComputedStyle(t);return t.remove(),bt(this,"commentForegroundColor",Nr(i))}}function Pw(r,t,e,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return r=Math.round(r*i+a),t=Math.round(t*i+a),e=Math.round(e*i+a),[r,t,e]}function C0(r,t){const e=r[0]/255,i=r[1]/255,a=r[2]/255,l=Math.max(e,i,a),c=Math.min(e,i,a),h=(l+c)/2;if(l===c)t[0]=t[1]=0;else{const d=l-c;switch(t[1]=h<.5?d/(l+c):d/(2-l-c),l){case e:t[0]=((i-a)/d+(i<a?6:0))*60;break;case i:t[0]=((a-e)/d+2)*60;break;case a:t[0]=((e-i)/d+4)*60;break}}t[2]=h}function Lf(r,t){const e=r[0],i=r[1],a=r[2],l=(1-Math.abs(2*a-1))*i,c=l*(1-Math.abs(e/60%2-1)),h=a-l/2;switch(Math.floor(e/60)){case 0:t[0]=l+h,t[1]=c+h,t[2]=h;break;case 1:t[0]=c+h,t[1]=l+h,t[2]=h;break;case 2:t[0]=h,t[1]=l+h,t[2]=c+h;break;case 3:t[0]=h,t[1]=c+h,t[2]=l+h;break;case 4:t[0]=c+h,t[1]=h,t[2]=l+h;break;case 5:case 6:t[0]=l+h,t[1]=h,t[2]=c+h;break}}function R0(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function D0(r,t,e){Lf(r,e),e.map(R0);const i=.2126*e[0]+.7152*e[1]+.0722*e[2];Lf(t,e),e.map(R0);const a=.2126*e[0]+.7152*e[1]+.0722*e[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const N0=new Map;function jw(r,t){const e=r[0]+r[1]*256+r[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let i=N0.get(e);if(i)return i;const a=new Float32Array(9),l=a.subarray(0,3),c=a.subarray(3,6);C0(r,c);const h=a.subarray(6,9);C0(t,h);const d=h[2]<.5,f=d?12:4.5;if(c[2]=d?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),D0(c,h,l)<f){let g,m;d?(g=c[2],m=1):(g=0,m=c[2]);const v=.005;for(;m-g>v;){const w=c[2]=(g+m)/2;d===D0(c,h,l)<f?g=w:m=w}c[2]=d?m:g}return Lf(c,l),i=st.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),N0.set(e,i),i}function yp({html:r,dir:t,className:e},i){const a=document.createDocumentFragment();if(typeof r=="string"){const l=document.createElement("p");l.dir=t||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let h=0,d=c.length;h<d;++h){const f=c[h];l.append(document.createTextNode(f)),h<d-1&&l.append(document.createElement("br"))}a.append(l)}else mp.render({xfaHtml:r,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",e),i.append(a)}function Bw(r){const t=new Path2D;if(!r)return t;for(let e=0,i=r.length;e<i;)switch(r[e++]){case Do.moveTo:t.moveTo(r[e++],r[e++]);break;case Do.lineTo:t.lineTo(r[e++],r[e++]);break;case Do.curveTo:t.bezierCurveTo(r[e++],r[e++],r[e++],r[e++],r[e++],r[e++]);break;case Do.quadraticCurveTo:t.quadraticCurveTo(r[e++],r[e++],r[e++],r[e++]);break;case Do.closePath:t.closePath();break;default:xt(`Unrecognized drawing path operator: ${r[e-1]}`);break}return t}class Ho{#t=null;#e=null;#i;#n=null;#r=null;#a=null;#s=null;#o=null;static#c=null;constructor(t){this.#i=t,Ho.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=this.#i._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",xn,{signal:e}),t.addEventListener("pointerdown",Ho.#l,{signal:e}));const i=this.#n=document.createElement("div");i.className="buttons",t.append(i);const a=this.#i.toolbarPosition;if(a){const{style:l}=t,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];l.insetInlineEnd=`${100*c}%`,l.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#l(t){t.stopPropagation()}#d(t){this.#i._focusEventsAllowed=!1,ue(t)}#h(t){this.#i._focusEventsAllowed=!0,ue(t)}#f(t){const e=this.#i._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",xn,{signal:e}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Ho.#c[t]),this.#f(i)&&i.addEventListener("click",a=>{e.delete()},{signal:e._signal}),this.#n.append(i)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const e=await t.render();this.#f(e),this.#n.append(e,this.#m),this.#r=t}addComment(t,e=null){if(this.#a)return;const i=t.renderForToolbar();if(!i)return;this.#f(i);const a=this.#s=this.#m;e?(this.#n.insertBefore(i,e),this.#n.insertBefore(a,e)):this.#n.append(i,a),this.#a=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const e=t.renderButton();this.#f(e),this.#n.append(e,this.#m)}async addEditSignatureButton(t){const e=this.#o=await t.renderEditButton(this.#i);this.#f(e),this.#n.append(e,this.#m)}removeButton(t){t==="comment"&&(this.#a?.removeToolbarCommentButton(),this.#a=null,this.#s?.remove(),this.#s=null)}async addButton(t,e){switch(t){case"colorPicker":e&&this.addColorPicker(e);break;case"altText":e&&await this.addAltText(e);break;case"editSignature":e&&await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":e&&this.addComment(e);break}}async addButtonBefore(t,e,i){if(!e&&t==="comment")return;const a=this.#n.querySelector(i);a&&t==="comment"&&this.addComment(e,a)}updateEditSignatureButton(t){this.#o&&(this.#o.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class T2{#t=null;#e=null;#i;constructor(t){this.#i=t}#n(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const e=this.#i._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",xn,{signal:e});const i=this.#t=document.createElement("div");return i.className="buttons",t.append(i),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),t}#r(t,e){let i=0,a=0;for(const l of t){const c=l.y+l.height;if(c<i)continue;const h=l.x+(e?l.width:0);if(c>i){a=h,i=c;continue}e?h>a&&(a=h):h<a&&(a=h)}return[e?1-a:a,i]}show(t,e,i){const[a,l]=this.#r(e,i),{style:c}=this.#e||=this.#n();t.append(this.#e),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#a(t,e,i,a){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",e);const c=document.createElement("span");l.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const h=this.#i._signal;h instanceof AbortSignal&&!h.aborted&&(l.addEventListener("contextmenu",xn,{signal:h}),l.addEventListener("click",a,{signal:h})),this.#t.append(l)}}function Uw(r,t,e){for(const i of e)t.addEventListener(i,r[i].bind(r))}class Ht{static#t=NaN;static#e=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(t){(Ht.#e||=new Set).add(t)}static setPointer(t,e){Ht.#t||=e,Ht.#n??=t}static setTimeStamp(t){Ht.#i=t}static isSamePointerId(t){return Ht.#t===t}static isSamePointerIdOrRemove(t){return Ht.#t===t?!0:(Ht.#e?.delete(t),!1)}static isSamePointerType(t){return Ht.#n===t}static isInitializedAndDifferentPointerType(t){return Ht.#n!==null&&!Ht.isSamePointerType(t)}static isSameTimeStamp(t){return Ht.#i===t}static isUsingMultiplePointers(){return Ht.#e?.size>=1}static clearPointerType(){Ht.#n=null}static clearPointerIds(){Ht.#t=NaN,Ht.#e=null}static clearTimeStamp(){Ht.#i=NaN}}class C2{#t=0;get id(){return`${Wo}${this.#t++}`}}class bp{#t=gp();#e=0;#i=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=t;const l=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return bt(this,"_isSVGFittingCanvas",l)}async#n(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let a;if(typeof e=="string"?(i.url=e,a=await Dr(e,"blob")):e instanceof File?a=i.file=e:e instanceof Blob&&(a=e),a.type==="image/svg+xml"){const l=bp._isSVGFittingCanvas,c=new FileReader,h=new Image,d=new Promise((f,g)=>{h.onload=()=>{i.bitmap=h,i.isSvg=!0,f()},c.onload=async()=>{const m=i.svgUrl=c.result;h.src=await l?`${m}#svgView(preserveAspectRatio(none))`:m},h.onerror=c.onerror=g});c.readAsDataURL(a),await d}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){xt(a),i=null}return this.#i.set(t,i),i&&this.#i.set(i.id,i),i}async getFromFile(t){const{lastModified:e,name:i,size:a,type:l}=t;return this.#n(`${e}_${i}_${a}_${l}`,t)}async getFromUrl(t){return this.#n(t,t)}async getFromBlob(t,e){const i=await e;return this.#n(t,i)}async getFromId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){this.#i||=new Map;let i=this.#i.get(t);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(e.width,e.height);return a.getContext("2d").drawImage(e,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#i.set(t,i),this.#i.set(i.id,i),i}getSvgUrl(t){const e=this.#i.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#i||=new Map;const e=this.#i.get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=a.convertToBlob()}i.close?.(),e.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class R2{#t=[];#e=!1;#i;#n=-1;constructor(t=128){this.#i=t}add({cmd:t,undo:e,post:i,mustExec:a,type:l=NaN,overwriteIfSameType:c=!1,keepUndo:h=!1}){if(a&&t(),this.#e)return;const d={cmd:t,undo:e,post:i,type:l};if(this.#n===-1){this.#t.length>0&&(this.#t.length=0),this.#n=0,this.#t.push(d);return}if(c&&this.#t[this.#n].type===l){h&&(d.undo=this.#t[this.#n].undo),this.#t[this.#n]=d;return}const f=this.#n+1;f===this.#i?this.#t.splice(0,1):(this.#n=f,f<this.#t.length&&this.#t.splice(f)),this.#t.push(d)}undo(){if(this.#n===-1)return;this.#e=!0;const{undo:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1,this.#n-=1}redo(){if(this.#n<this.#t.length-1){this.#n+=1,this.#e=!0;const{cmd:t,post:e}=this.#t[this.#n];t(),e?.(),this.#e=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#t.length-1}cleanType(t){if(this.#n!==-1){for(let e=this.#n;e>=0;e--)if(this.#t[e].type!==t){this.#t.splice(e+1,this.#n-e),this.#n=e;return}this.#t.length=0,this.#n=-1}}destroy(){this.#t=null}}class fl{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ee.platform;for(const[i,a,l={}]of t)for(const c of i){const h=c.startsWith("mac+");e&&h?(this.callbacks.set(c.slice(4),{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1))):!e&&!h&&(this.callbacks.set(c,{callback:a,options:l}),this.allKeys.add(c.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(this.#t(e));if(!i)return;const{callback:a,options:{bubbles:l=!1,args:c=[],checker:h=null}}=i;h&&!h(t,e)||(a.bind(t,...c,e)(),l||ue(e))}}class vp{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return _2(t),bt(this,"_colors",t)}convert(t){const e=Nr(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,a]of this._colors)if(a.every((l,c)=>l===e[c]))return vp._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?st.makeHexColor(...e):t}}class $i{#t=new AbortController;#e=null;#i=null;#n=new Map;#r=new Map;#a=null;#s=null;#o=null;#c=new R2;#l=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#E=null;#S=null;#A=null;#C=null;#w=!1;#_=null;#N=new C2;#R=!1;#D=!1;#j=!1;#M=null;#O=null;#B=null;#I=null;#V=null;#T=At.NONE;#x=new Set;#L=null;#U=null;#z=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#q=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=$i.prototype,e=c=>c.#q.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:h})=>{if(h instanceof HTMLInputElement){const{type:d}=h;return d!=="text"&&d!=="number"}return!0},a=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return bt(this,"_keyboardManager",new fl([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(h)&&!c.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(c,{target:h})=>!(h instanceof HTMLButtonElement)&&c.#q.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-a,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[a,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-a],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,a],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:e}]]))}constructor(t,e,i,a,l,c,h,d,f,g,m,v,w,_,x,S){const E=this._signal=this.#t.signal;this.#q=t,this.#Z=e,this.#J=i,this.#a=a,this.#l=l,this.#U=c,this.#$=d,this._eventBus=h,h._on("editingaction",this.onEditingAction.bind(this),{signal:E}),h._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),h._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),h._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),h._on("setpreference",this.onSetPreference.bind(this),{signal:E}),h._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#D=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#D=!1},{capture:!0,signal:E}),this.#rt(),this.#dt(),this.#et(),this.#s=d.annotationStorage,this.#E=d.filterFactory,this.#z=f,this.#C=g||null,this.#y=m,this.#v=v,this.#b=w,this.#V=_||null,this.viewParameters={realScale:la.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=x||null,this._supportsPinchToZoom=S!==!1,l?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#e=null,this.#x.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#_?.hide(),this.#_=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return bt(this,"hcmFilter",this.#z?this.#E.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return bt(this,"direction",getComputedStyle(this.#q).direction)}get _highlightColors(){return bt(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return bt(this,"highlightColors",null);const e=new Map,i=!!this.#z;for(const[a,l]of t){const c=a.endsWith("_HCM");if(i&&c){e.set(a.replace("_HCM",""),l);continue}!i&&!c&&e.set(a,l)}return bt(this,"highlightColors",e)}get highlightColorNames(){return bt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#B=t}editAltText(t,e=!1){this.#a?.editAltText(this,t,e)}hasCommentManager(){return!!this.#l}editComment(t,e,i,a){this.#l?.showDialog(this,t,e,i,a)}selectComment(t,e){this.#r.get(t)?.getEditorByUID(e)?.toggleComment(!0,!0)}updateComment(t){this.#l?.updateComment(t.getData())}updatePopupColor(t){this.#l?.updatePopupColor(t)}removeComment(t){this.#l?.removeComments([t.uid])}toggleComment(t,e,i=void 0){this.#l?.toggleCommentPopup(t,e,i)}makeCommentColor(t,e){return t&&this.#l?.makeCommentColor(t,e)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:e,promise:i}=Promise.withResolvers(),a=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",a),e())};this._eventBus.on("editorsrendered",a),await i}getSignature(t){this.#U?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#U}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){t==="enableNewAltTextWhenAddingImage"&&(this.#b=e)}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#q.focus()}findParent(t,e){for(const i of this.#r.values()){const{x:a,y:l,width:c,height:h}=i.div.getBoundingClientRect();if(t>=a&&t<=a+c&&e>=l&&e<=l+h)return i}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*la.PDF_TO_CSS_UNITS;for(const e of this.#p)e.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#Q({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of this.#r.values())if(i.hasTextLayer(t))return i;return null}highlightSelection(t="",e=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h}=i,d=i.toString(),g=this.#Q(i).closest(".textLayer"),m=this.getSelectionBoxes(g);if(!m)return;i.empty();const v=this.#tt(g),w=this.#T===At.NONE,_=()=>{const x=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:m,anchorNode:a,anchorOffset:l,focusNode:c,focusOffset:h,text:d});w&&this.showAllEditors("highlight",!0,!0),e&&x?.editComment()};if(w){this.switchToMode(At.HIGHLIGHT,_);return}_()}commentSelection(t=""){this.highlightSelection(t,!0)}#st(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=this.#Q(t).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#_||=new T2(this),this.#_.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#s)return null;const e=`${Wo}${t}`,i=this.#s.getRawValue(e);return i&&this.#s.remove(e),i}addToAnnotationStorage(t){!t.isEmpty()&&this.#s&&!this.#s.has(t.id)&&this.#s.setValue(t.id,t)}a11yAlert(t,e=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}#at(){const t=document.getSelection();if(!t||t.isCollapsed){this.#L&&(this.#_?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===this.#L)return;const a=this.#Q(t).closest(".textLayer");if(!a){this.#L&&(this.#_?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#L=e,this.#k({hasSelectedText:!0}),!(this.#T!==At.HIGHLIGHT&&this.#T!==At.NONE)&&(this.#T===At.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#w=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#T===At.HIGHLIGHT?this.#tt(a):null;if(l?.toggleDrawing(),this.#D){const c=new AbortController,h=this.combinedSignal(c),d=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),l?.toggleDrawing(!0),f.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else l?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(t=""){this.#T===At.HIGHLIGHT?this.highlightSelection(t):this.#y&&this.#st()}#rt(){document.addEventListener("selectionchange",this.#at.bind(this),{signal:this._signal})}#ot(){if(this.#A)return;this.#A=new AbortController;const t=this.combinedSignal(this.#A);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#lt(){this.#A?.abort(),this.#A=null}blur(){if(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#x)if(e.div.contains(t)){this.#O=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[t,e]=this.#O;this.#O=null,e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}#et(){if(this.#M)return;this.#M=new AbortController;const t=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ct(){this.#M?.abort(),this.#M=null}#ut(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#ht(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.setEditingState(!0)}removeEditListeners(){this.#ct(),this.setEditingState(!1)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of this.#x){const a=i.serialize(!0);a&&e.push(a)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const l of e.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(l.type)){c.paste(l,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(l){xt(`paste: "${l.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const l=[];for(const d of i){const f=await a.deserialize(d);if(!f)return;l.push(f)}const c=()=>{for(const d of l)this.#nt(d);this.#it(l)},h=()=>{for(const d of l)d.remove()};this.addCommands({cmd:c,undo:h,mustExec:!0})}catch(l){xt(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==At.NONE&&!this.isEditorHandlingKeyboard&&$i._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#w&&(this.#w=!1,this.#W("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(t){Object.entries(t).some(([i,a])=>this.#X[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,t)}),this.#T===At.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#G([[Mt.HIGHLIGHT_FREE,!0]]))}#G(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ot(),this.#ut(),this.#k({isEditing:this.#T!==At.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#lt(),this.#ht(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const e of this.#u)this.#G(e.defaultPropertiesToUpdate)}}getId(){return this.#N.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#R?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,e=null,i=!1,a=!1,l=!1,c=!1){if(this.#T!==t&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===At.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=t,t===At.NONE){this.setEditingState(!1),this.#pt();for(const h of this.#n.values())h.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const h of this.#n.values())h.addStandaloneCommentButton();t===At.SIGNATURE&&await this.#U?.loadSignatures(),i&&Ht.clearPointerType(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const h of this.#r.values())h.updateMode(t);if(t===At.POPUP){this.#i||=await this.#$.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const h=new Set,d=[];for(const f of this.#n.values()){const{annotationElementId:g,hasComment:m,deleted:v}=f;g&&h.add(g),m&&!v&&d.push(f.getData())}for(const f of this.#i){const{id:g,popupRef:m,contentsObj:v}=f;m&&v?.str&&!h.has(g)&&!this.#m.has(g)&&d.push(f)}this.#l?.showSidebar(d)}if(!e){a&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const h of this.#n.values())h.uid===e?(this.setSelected(h),c?h.editComment():l?h.enterInEditMode():h.focus()):h.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(this.#u){switch(t){case Mt.CREATE:this.currentLayer.addNewEditor(e);return;case Mt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const i of this.#x)i.updateParams(t,e);else for(const i of this.#u)i.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){for(const l of this.#n.values())l.editorType===t&&l.show(e);(this.#Y?.get(Mt.HIGHLIGHT_SHOW_ALL)??!0)!==e&&this.#G([[Mt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(this.#j!==t){this.#j=t;for(const e of this.#r.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#R){this.#R=!0;const t=[];for(const e of this.#r.values())t.push(e.enable());await Promise.all(t);for(const e of this.#n.values())e.enable()}}#pt(){if(this.unselectAll(),this.#R){this.#R=!1;for(const t of this.#r.values())t.disable();for(const t of this.#n.values())t.disable()}}*getEditors(t){for(const e of this.#n.values())e.pageIndex===t&&(yield e)}getEditor(t){return this.#n.get(t)}addEditor(t){this.#n.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(t.id),t.annotationElementId&&this.#I?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#s?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#nt(t){const e=this.#r.get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#G(t.propertiesToUpdate))}get#gt(){let t=null;for(t of this.#x);return t}updateUI(t){this.#gt===t&&this.#G(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#G(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#x.has(t)){this.#x.delete(t),t.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#x.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.uid}),this.#h?.commitOrRemove();for(const e of this.#x)e!==t&&e.unselect();this.#x.clear(),this.#x.add(t),t.select(),this.#G(t.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(t){return this.#x.has(t)}get firstSelectedEditor(){return this.#x.values().next().value}unselect(t){t.unselect(),this.#x.delete(t),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#x.size!==0}get isEnterHandled(){return this.#x.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(t){this.#c.add(t),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(t){this.#c.cleanType(t)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const t of this.#n.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...this.#x],i=()=>{this._editorUndoBar?.show(a,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},a=()=>{for(const l of e)this.#nt(l)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#it(t){for(const e of this.#x)e.unselect();this.#x.clear();for(const e of t)e.isEmpty()||(this.#x.add(e),e.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#x)t.commit();this.#it(this.#n.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#T!==At.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#x)t.unselect();this.#x.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=e;const[a,l]=this.#H,c=[...this.#x],h=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(a,l),d.translationDone())},undo:()=>{for(const d of c)this.#n.has(d.id)&&(d.translateInPage(-a,-l),d.translationDone())},mustExec:!1})},h);for(const d of c)d.translateInPage(t,e),d.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#x)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let e=!1;for(const[{x:a,y:l,pageIndex:c},h]of t)h.newX=a,h.newY=l,h.newPageIndex=c,e||=a!==h.savedX||l!==h.savedY||c!==h.savedPageIndex;if(!e)return!1;const i=(a,l,c,h)=>{if(this.#n.has(a.id)){const d=this.#r.get(h);d?a._setParentAndPosition(d,l,c):(a.pageIndex=h,a.x=l,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:l,newY:c,newPageIndex:h}]of t)i(a,l,c,h)},undo:()=>{for(const[a,{savedX:l,savedY:c,savedPageIndex:h}]of t)i(a,l,c,h)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#g)for(const i of this.#g.keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#x.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#T}isEditingMode(){return this.#T!==At.NONE}get imageManager(){return bt(this,"imageManager",new bp)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let f=0,g=e.rangeCount;f<g;f++)if(!t.contains(e.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:l,height:c}=t.getBoundingClientRect();let h;switch(t.getAttribute("data-main-rotation")){case"90":h=(f,g,m,v)=>({x:(g-a)/c,y:1-(f+m-i)/l,width:v/c,height:m/l});break;case"180":h=(f,g,m,v)=>({x:1-(f+m-i)/l,y:1-(g+v-a)/c,width:m/l,height:v/c});break;case"270":h=(f,g,m,v)=>({x:1-(g+v-a)/c,y:(f-i)/l,width:v/c,height:m/l});break;default:h=(f,g,m,v)=>({x:(f-i)/l,y:(g-a)/c,width:m/l,height:v/c});break}const d=[];for(let f=0,g=e.rangeCount;f<g;f++){const m=e.getRangeAt(f);if(!m.collapsed)for(const{x:v,y:w,width:_,height:x}of m.getClientRects())_===0||x===0||d.push(h(v,w,_,x))}return d.length===0?null:d}addChangedExistingAnnotation({annotationElementId:t,id:e}){(this.#o||=new Map).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){this.#o?.delete(t)}renderAnnotationElement(t){const e=this.#o?.get(t.data.id);if(!e)return;const i=this.#s.getRawValue(e);i&&(this.#T===At.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){const a=this.#I?.get(t);a&&(a.setCanvas(e,i),this.#I.delete(t))}addMissingCanvas(t,e){(this.#I||=new Map).set(t,e)}}class si{#t=null;#e=!1;#i=null;#n=null;#r=null;#a=null;#s=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,si.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){si._l10n??=t}async render(){const t=this.#i=document.createElement("button");t.className="altText",t.tabIndex="0";const e=this.#n=document.createElement("span");t.append(e),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",si.#f.missing),e.setAttribute("data-l10n-id",si.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;t.addEventListener("contextmenu",xn,{signal:i}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#s=!0,a(l))},{signal:i}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(t){this.#t===null&&(this.#l=t,this.#d=await si._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#o?.remove(),this.#o=null;return}if(!this.#o){const e=this.#o=document.createElement("div");e.className="noAltTextBadge",this.#c.div.append(e)}this.#o.classList.toggle("hidden",!t)}serialize(t){let e=this.#t;return!t&&this.#l===e&&(e=this.#d),{altText:e,decorative:this.#e,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:a,cancel:l=!1}){i&&(this.#l=i,this.#d=a),!(this.#t===t&&this.#e===e)&&(l||(this.#t=t,this.#e=e),this.#g())}toggle(t=!1){this.#i&&(!t&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#r=null,this.#o?.remove(),this.#o=null}async#g(){const t=this.#i;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",si.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",si.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=this.#r;if(!e){this.#r=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${this.#c.id}`;const a=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=this.#t),e.parentNode||t.append(e),this.#c.getElementForAltText()?.setAttribute("aria-describedby",e.id)}}class Pc{#t=null;#e=null;#i=!1;#n=null;#r=null;#a=null;#s=null;#o=null;#c=!1;#l=null;constructor(t){this.#n=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const e=this.#n.commentButtonPosition;if(e){const{style:i}=t;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-e[0]:e[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*e[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#n.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#t)return null;const{x:t,y:e,height:i}=this.#t.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#n.parent.boundingClientRect;return[(t-a)/c,(e+i-l)/h]}set commentPopupPositionInLayer(t){this.#l=t}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:e}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=e)}#d(t,e){if(!this.#n._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",e?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return t;t.addEventListener("contextmenu",xn,{signal:i}),e&&(t.addEventListener("focusin",l=>{this.#n._focusEventsAllowed=!1,ue(l)},{capture:!0,signal:i}),t.addEventListener("focusout",l=>{this.#n._focusEventsAllowed=!0,ue(l)},{capture:!0,signal:i})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:i});const a=l=>{l.preventDefault(),t===this.#e?this.edit():this.#n.toggleComment(!0)};return t.addEventListener("click",a,{capture:!0,signal:i}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#i=!0,a(l))},{signal:i}),t.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),t.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),t}edit(t){const e=this.commentPopupPositionInLayer;let i,a;if(e)[i,a]=e;else{[i,a]=this.#n.commentButtonPosition;const{width:g,height:m,x:v,y:w}=this.#n;i=v+i*g,a=w+a*m}const l=this.#n.parent.boundingClientRect,{x:c,y:h,width:d,height:f}=l;this.#n._uiManager.editComment(this.#n,c+i*d,h+a*f,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#r}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(t){if(t!==this.#s&&(this.#a=null),t===null){this.#s="",this.#c=!0;return}this.#s=t,this.#o=new Date,this.#c=!1}setInitialText(t,e=null){this.#r=t,this.data=t,this.#o=null,this.#a=e}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#s="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class pl{#t;#e=!1;#i=null;#n;#r;#a;#s;#o=null;#c;#l=null;#d;#h=null;constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:l=null,onPinchEnd:c=null,signal:h}){this.#t=t,this.#i=i,this.#n=e,this.#r=a,this.#a=l,this.#s=c,this.#d=new AbortController,this.#c=AbortSignal.any([h,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/qn.pixelRatio}#f(t){if(this.#n?.())return;if(t.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,l=AbortSignal.any([this.#c,a.signal]),c=this.#t,h={capture:!0,signal:l,passive:!1},d=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(ue(f),d(f))},h),c.addEventListener("pointerup",d,h),c.addEventListener("pointercancel",d,h);return}if(!this.#h){this.#h=new AbortController;const a=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,c={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),c);const h=this.#g.bind(this);l.addEventListener("touchend",h,c),l.addEventListener("touchcancel",h,c),c.capture=!0,l.addEventListener("pointerdown",ue,c),l.addEventListener("pointermove",ue,c),l.addEventListener("pointercancel",ue,c),l.addEventListener("pointerup",ue,c),this.#r?.()}if(ue(t),t.touches.length!==2||this.#i?.()){this.#l=null;return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),this.#l={touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(t){if(!this.#l||t.touches.length!==2)return;ue(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:a,screenY:l}=e,{screenX:c,screenY:h}=i,d=this.#l,{touch0X:f,touch0Y:g,touch1X:m,touch1Y:v}=d,w=m-f,_=v-g,x=c-a,S=h-l,E=Math.hypot(x,S)||1,T=Math.hypot(w,_)||1;if(!this.#e&&Math.abs(T-E)<=pl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(d.touch0X=a,d.touch0Y=l,d.touch1X=c,d.touch1Y=h,!this.#e){this.#e=!0;return}const R=[(a+c)/2,(l+h)/2];this.#a?.(R,T,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#s?.()),this.#l&&(ue(t),this.#l=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class ht{#t=null;#e=null;#i=null;#n=null;#r=null;#a=!1;#s=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#E=0;#S=0;#A=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#w=!1;#_=ht._zIndex++;static _borderLineWidth=-1;static _colorManager=new vp;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=ht.prototype._resizeWithKeyboard,e=$i.TRANSLATE_SMALL,i=$i.TRANSLATE_BIG;return bt(this,"_resizerKeyboardManager",new fl([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],ht.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null,this.canAddComment=!0;const{rotation:e,rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[l,c];const[h,d]=this.parentDimensions;this.x=t.x/h,this.y=t.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return bt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new D2({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(ht._l10n??=t,ht._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ht._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ht._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Qt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#w}set _isDraggable(t){this.#w=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#P(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,a){const[l,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(t+i)/l,this.y=(e+a)/c,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,a]=this.parentDimensions;this.setAt(t*i,e*a,this.width*i,this.height*a),this._onTranslated()}#N([t,e],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/t,this.y+=a/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,e){this.#N(this.parentDimensions,t,e)}translateInPage(t,e){this.#u||=[this.x,this.y,this.width,this.height],this.#N(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,l]}=this;if(this.x+=t/a,this.y+=e/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:m,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,m,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:h}=this;const[d,f]=this.getBaseTranslation();c+=d,h+=f;const{style:g}=i;g.left=`${(100*c).toFixed(2)}%`,g.top=`${(100*h).toFixed(2)}%`,this._onTranslating(c,h),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=ht,a=i/t,l=i/e;switch(this.rotation){case 90:return[-a,l];case 180:return[a,l];case 270:return[a,-l];default:return[-a,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,a]}=this;let{x:l,y:c,width:h,height:d}=this;if(h*=i,d*=a,l*=i,c*=a,this._mustFixPosition)switch(t){case 0:l=Ge(l,0,i-h),c=Ge(c,0,a-d);break;case 90:l=Ge(l,0,i-d),c=Ge(c,h,a);break;case 180:l=Ge(l,h,i),c=Ge(c,d,a);break;case 270:l=Ge(l,d,i),c=Ge(c,0,a-h);break}this.x=l/=i,this.y=c/=a;const[f,g]=this.getBaseTranslation();l+=f,c+=g,e.left=`${(100*l).toFixed(2)}%`,e.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return ht.#R(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return ht.#R(t,e,360-this.parentRotation)}#D(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(){const{div:{style:t},width:e,height:i}=this;t.width=`${(100*e).toFixed(2)}%`,t.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#M.bind(this,i),{signal:e}),a.addEventListener("contextmenu",xn,{signal:e}),a.tabIndex=-1}this.div.prepend(this.#c)}#M(t,e){e.preventDefault();const{isMac:i}=Ee.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[e.screenX,e.screenY];const l=new AbortController,c=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,t),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",ue,{passive:!1,signal:c}),window.addEventListener("contextmenu",xn,{signal:c}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const h=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const f=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=h,this.div.style.cursor=d,this.#B()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#O(t,e,i,a){this.width=i,this.height=a,this.x=t,this.y=e,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#d)return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:a}=this.#d;this.#d=null;const l=this.x,c=this.y,h=this.width,d=this.height;l===t&&c===e&&h===i&&d===a||this.addCommands({cmd:this.#O.bind(this,l,c,h,d),undo:this.#O.bind(this,t,e,i,a),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#I(t,e){const[i,a]=this.parentDimensions,l=this.x,c=this.y,h=this.width,d=this.height,f=ht.MIN_SIZE/i,g=ht.MIN_SIZE/a,m=this.#D(this.rotation),v=(M,U)=>[m[0]*M+m[2]*U,m[1]*M+m[3]*U],w=this.#D(360-this.rotation),_=(M,U)=>[w[0]*M+w[2]*U,w[1]*M+w[3]*U];let x,S,E=!1,T=!1;switch(t){case"topLeft":E=!0,x=(M,U)=>[0,0],S=(M,U)=>[M,U];break;case"topMiddle":x=(M,U)=>[M/2,0],S=(M,U)=>[M/2,U];break;case"topRight":E=!0,x=(M,U)=>[M,0],S=(M,U)=>[0,U];break;case"middleRight":T=!0,x=(M,U)=>[M,U/2],S=(M,U)=>[0,U/2];break;case"bottomRight":E=!0,x=(M,U)=>[M,U],S=(M,U)=>[0,0];break;case"bottomMiddle":x=(M,U)=>[M/2,U],S=(M,U)=>[M/2,0];break;case"bottomLeft":E=!0,x=(M,U)=>[0,U],S=(M,U)=>[M,0];break;case"middleLeft":T=!0,x=(M,U)=>[0,U/2],S=(M,U)=>[M,U/2];break}const R=x(h,d),k=S(h,d);let L=v(...k);const P=ht._round(l+L[0]),j=ht._round(c+L[1]);let X=1,K=1,et,Z;if(e.fromKeyboard)({deltaX:et,deltaY:Z}=e);else{const{screenX:M,screenY:U}=e,[J,vt]=this.#l;[et,Z]=this.screenToPageTranslation(M-J,U-vt),this.#l[0]=M,this.#l[1]=U}if([et,Z]=_(et/i,Z/a),E){const M=Math.hypot(h,d);X=K=Math.max(Math.min(Math.hypot(k[0]-R[0]-et,k[1]-R[1]-Z)/M,1/h,1/d),f/h,g/d)}else T?X=Ge(Math.abs(k[0]-R[0]-et),f,1)/h:K=Ge(Math.abs(k[1]-R[1]-Z),g,1)/d;const ct=ht._round(h*X),St=ht._round(d*K);L=v(...S(ct,St));const q=P-L[0],ot=j-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=ct,this.height=St,this.x=q,this.y=ot,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Ho(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(t){const e=this._editToolbar?.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(si.initialize(ht._l10n),this.#i=new si(this),this.#t&&(this.#i.data=this.#t,this.#t=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(t){this.#i&&(this.#i.data=t)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(t){await this.#i?.setGuessedText(t)}serializeAltText(t){return this.#i?.serialize(t)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Pc(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#n.renderForStandalone(),this.div.append(this.#r))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:e,date:i,deleted:a}}=this.#n;return{text:e,richText:t,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#n||=new Pc(this),this.#n.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:e,richText:i}){if(!e||(this.#n||=new Pc(this),this.#n.setInitialText(t,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(t){this.#n||=new Pc(this),this.#n.edit(t)}toggleComment(t,e=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,e)}setSelectedCommentButton(t){this.#n.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,a]=t.rect,[l]=this.pageDimensions,[c]=this.pageTranslation,h=c+l+1,d=a-100,f=h+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[h,d,f,a]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:e}}){this.#n.data=e?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#a?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#z();const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[a,l]=this.getInitialTranslation();return this.translate(a,l),Uw(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new pl({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#x.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#V(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(t,e,i){let l=.7*(i/e)+1-.7;if(l===1)return;const c=this.#D(this.rotation),h=(P,j)=>[c[0]*P+c[2]*j,c[1]*P+c[3]*j],[d,f]=this.parentDimensions,g=this.x,m=this.y,v=this.width,w=this.height,_=ht.MIN_SIZE/d,x=ht.MIN_SIZE/f;l=Math.max(Math.min(l,1/v,1/w),_/v,x/w);const S=ht._round(v*l),E=ht._round(w*l);if(S===v&&E===w)return;this.#u||=[g,m,v,w];const T=h(v/2,w/2),R=ht._round(g+T[0]),k=ht._round(m+T[1]),L=h(S/2,E/2);this.x=R-L[0],this.y=k-L[1],this.width=S,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#x(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(t){const{isMac:e}=Ee.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#U(t);return}this.#L(t)}#L(t){const{isMac:e}=Ee.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,l=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:l},h=f=>{a.abort(),this.#s=null,this.#g=!1,this._uiManager.endDragSession()||this.#L(f),i&&this._onStopDragging()};e&&(this.#E=t.clientX,this.#S=t.clientY,this.#s=t.pointerId,this.#o=t.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:g,clientY:m,pointerId:v}=f;if(v!==this.#s){ue(f);return}const[w,_]=this.screenToPageTranslation(g-this.#E,m-this.#S);this.#E=g,this.#S=m,this._uiManager.dragSelectedEditors(w,_)},c),window.addEventListener("touchmove",ue,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&h(f),ue(f)},c));const d=f=>{if(!this.#s||this.#s===f.pointerId){h(f);return}ue(f)};window.addEventListener("pointerup",d,{signal:l}),window.addEventListener("blur",d,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const a=this.parentScale,[l,c]=this.pageDimensions,[h,d]=this.pageTranslation,f=t/a,g=e/a,m=this.x*l,v=this.y*c,w=this.width*l,_=this.height*c;switch(i){case 0:return[m+f+h,c-v-g-_+d,m+f+w+h,c-v-g+d];case 90:return[m+g+h,c-v+f+d,m+g+_+h,c-v+f+w+d];case 180:return[m-f-w+h,c-v+g+d,m-f+h,c-v+g+_+d];case 270:return[m-g-_+h,c-v-f-w+d,m-g+h,c-v-f+d];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,a,l,c]=t,h=l-i,d=c-a;switch(this.rotation){case 0:return[i,e-c,h,d];case 90:return[i,e-a,d,h];case 180:return[l,e-a,h,d];case 270:return[l,e-c,d,h];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:t,color:e,date:i,opacity:a,deleted:l,richText:c},uid:h,pageIndex:d,creationDate:f,modificationDate:g}=this;return{id:h,pageIndex:d,rect:this.getPDFRect(),richText:c,contentsObj:{str:t},creationDate:f,modificationDate:i||g,popupRef:!l,color:e,opacity:a}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:l,innerWidth:c}=window;return e<c&&a>0&&t<l&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#z()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,e=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,e,i){const a=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});a.rotation=t.rotation,a.#t=t.accessibilityData,a._isCopy=t.isCopy||!1;const[l,c]=a.pageDimensions,[h,d,f,g]=a.getRectInCurrentCoords(t.rect,c);return a.x=h/l,a.y=d/c,a.width=f/l,a.height=g/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#A){for(const t of this.#A.values())clearTimeout(t);this.#A=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,e]}=this,[i,a,l,c]=this.getPDFRect();return[ht._round(i+(l-i)*t),ht._round(a+(c-a)*(1-e))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(t){this.#n.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#n?.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const e=this.#c.children;if(!this.#e){this.#e=Array.from(e);const c=this.#Y.bind(this),h=this.#$.bind(this),d=this._uiManager._signal;for(const f of this.#e){const g=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:d}),f.addEventListener("blur",h,{signal:d}),f.addEventListener("focus",this.#X.bind(this,g),{signal:d}),f.setAttribute("data-l10n-id",ht._l10nResizer[g])}}const i=this.#e[0];let a=0;for(const c of e){if(c===i)break;a++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==a){if(l<a)for(let h=0;h<a-l;h++)this.#c.append(this.#c.firstElementChild);else if(l>a)for(let h=0;h<l-a;h++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const h of e){const f=this.#e[c++].getAttribute("data-resizer-name");h.setAttribute("data-l10n-id",ht._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#Y(t){ht._resizerKeyboardManager.exec(this,t)}#$(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#P()}#X(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const e of this.#e)e.tabIndex=t}_resizeWithKeyboard(t,e){this.#v&&this.#I(this.#m,{deltaX:t,deltaY:e,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){this.#A||=new Map;const{action:i}=t;let a=this.#A.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(t),this.#A.delete(i),this.#A.size===0&&(this.#A=null)},ht._telemetryTimeout),this.#A.set(i,a);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstElementChild:e}=t.container;e?.nodeName==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}}class D2 extends ht{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const k0=3285377520,Ln=4294901760,ni=65535;class Fw{constructor(t){this.h1=t?t&4294967295:k0,this.h2=t?t&4294967295:k0}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let x=0,S=t.length;x<S;x++){const E=t.charCodeAt(x);E<=255?e[i++]=E:(e[i++]=E>>>8,e[i++]=E&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,l=i-a*4,c=new Uint32Array(e.buffer,0,a);let h=0,d=0,f=this.h1,g=this.h2;const m=3432918353,v=461845907,w=m&ni,_=v&ni;for(let x=0;x<a;x++)x&1?(h=c[x],h=h*m&Ln|h*w&ni,h=h<<15|h>>>17,h=h*v&Ln|h*_&ni,f^=h,f=f<<13|f>>>19,f=f*5+3864292196):(d=c[x],d=d*m&Ln|d*w&ni,d=d<<15|d>>>17,d=d*v&Ln|d*_&ni,g^=d,g=g<<13|g>>>19,g=g*5+3864292196);switch(h=0,l){case 3:h^=e[a*4+2]<<16;case 2:h^=e[a*4+1]<<8;case 1:h^=e[a*4],h=h*m&Ln|h*w&ni,h=h<<15|h>>>17,h=h*v&Ln|h*_&ni,a&1?f^=h:g^=h}this.h1=f,this.h2=g}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ln|t*36045&ni,e=e*4283543511&Ln|((e<<16|t>>>16)*2950163797&Ln)>>>16,t^=e>>>1,t=t*444984403&Ln|t*60499&ni,e=e*3301882366&Ln|((e<<16|t>>>16)*3120437893&Ln)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Of=Object.freeze({map:null,hash:"",transfer:void 0});class wp{#t=!1;#e=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=this.#n.get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return this.#n.get(t)}remove(t){const e=this.#n.get(t);if(e!==void 0&&(e instanceof ht&&this.#i.delete(e.annotationElementId),this.#n.delete(t),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof ht)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=this.#n.get(t);let a=!1;if(i!==void 0)for(const[l,c]of Object.entries(e))i[l]!==c&&(a=!0,i[l]=c);else a=!0,this.#n.set(t,e);a&&this.#r(),e instanceof ht&&((this.#i||=new Map).set(e.annotationElementId,e),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type))}has(t){return this.#n.has(t)}get size(){return this.#n.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new zw(this)}get serializable(){if(this.#n.size===0)return Of;const t=new Map,e=new Fw,i=[],a=Object.create(null);let l=!1;for(const[c,h]of this.#n){const d=h instanceof ht?h.serialize(!1,a):h;d&&(t.set(c,d),e.update(`${c}:${JSON.stringify(d)}`),l||=!!d.bitmap)}if(l)for(const c of t.values())c.bitmap&&i.push(c.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:Of}get editorStats(){let t=null;const e=new Map;let i=0,a=0;for(const l of this.#n.values()){if(!(l instanceof ht)){l.popup&&(l.popup.deleted?a+=1:i+=1);continue}l.isCommentDeleted?a+=1:l.hasEditedComment&&(i+=1);const c=l.telemetryFinalData;if(!c)continue;const{type:h}=c;e.has(h)||e.set(h,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const d=t[h]||=new Map;for(const[f,g]of Object.entries(c)){if(f==="type")continue;let m=d.get(f);m||(m=new Map,d.set(f,m));const v=m.get(g)??0;m.set(g,v+1)}}if((a>0||i>0)&&(t||=Object.create(null),t.comments={deleted:a,edited:i}),!t)return null;for(const[l,c]of e)t[l]=c.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,e){const i=this.#i?.get(t);return i?(i.updateFromAnnotationLayer(e),!0):!1}getEditor(t){return this.#i?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#i)for(const e of this.#i.values())e.serialize()&&t.push(e.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class zw extends wp{#t;constructor(t){super();const{map:e,hash:i,transfer:a}=t.serializable,l=structuredClone(e,a?{transfer:a}:null);this.#t={map:l,hash:i,transfer:a}}get print(){Qt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return bt(this,"modifiedIds",{ids:new Set,hash:""})}}class N2{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||this.#t.has(t.loadedName))){if(It(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:l,style:c}=t,h=new FontFace(a,l,c);this.addNativeFontFace(h);try{await h.load(),this.#t.add(a),i?.(t)}catch{xt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(h)}return}Qt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw xt(`Failed to load font '${i.family}': '${a}'.`),t.disableFontFace=!0,a}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,a)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return bt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return bt(this,"isSyncFontLoadingSupported",Xe||Ee.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(It(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const l=i.shift();setTimeout(l.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:e,callback:t};return i.push(a),a}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return bt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(k,L){return k.charCodeAt(L)<<24|k.charCodeAt(L+1)<<16|k.charCodeAt(L+2)<<8|k.charCodeAt(L+3)&255}function a(k,L,P,j){const X=k.substring(0,L),K=k.substring(L+P);return X+j+K}let l,c;const h=this._document.createElement("canvas");h.width=1,h.height=1;const d=h.getContext("2d");let f=0;function g(k,L){if(++f>30){xt("Load test font never loaded."),L();return}if(d.font="30px "+k,d.fillText(".",0,20),d.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(g.bind(null,k,L))}const m=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,m.length,m);const _=16,x=1482184792;let S=i(v,_);for(l=0,c=m.length-3;l<c;l+=4)S=S-x+i(m,l)|0;l<m.length&&(S=S-x+i(m+"XXX",l)|0),v=a(v,_,4,y2(S));const E=`url(data:font/opentype;base64,${btoa(v)});`,T=`@font-face {font-family:"${m}";src:${E}}`;this.insertRule(T);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const k of[t.loadedName,m]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=k,R.append(L)}this._document.body.append(R),g(m,()=>{R.remove(),e.complete()})}}class k2{#t;constructor(t,e=null,i,a){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=e,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${kw(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return this._inspectFont?.(this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let a;try{a=t.get(i)}catch(c){xt(`getPathGenerator - ignoring character: "${c}".`)}const l=Bw(a?.path);return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}set disableFontFace(t){bt(this,"disableFontFace",!!t)}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}set bbox(t){bt(this,"bbox",t)}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}class gr{#t;#e;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const e=new TextEncoder,i={};let a=0;for(const f of gr.strings){const g=e.encode(t[f]);i[f]=g,a+=4+g.length}const l=new ArrayBuffer(a),c=new Uint8Array(l),h=new DataView(l);let d=0;for(const f of gr.strings){const g=i[f],m=g.length;h.setUint32(d,m),c.set(g,d+4),d+=4+m}return It(d===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}#n(t){It(t<gr.strings.length,"Invalid string index");let e=0;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class mr{#t;#e;#i;static strings=["css","loadedName","baseFontName","src"];static write(t){const e=new TextEncoder,i={};let a=0;for(const v of mr.strings){const w=e.encode(t[v]);i[v]=w,a+=4+w.length}a+=4;let l,c,h=1+a;t.style&&(l=e.encode(t.style.style),c=e.encode(t.style.weight),h+=4+l.length+4+c.length);const d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let m=0;g.setUint8(m++,t.guessFallback?1:0),g.setUint32(m,0),m+=4,a=0;for(const v of mr.strings){const w=i[v],_=w.length;a+=4+_,g.setUint32(m,_),f.set(w,m+4),m+=4+_}return g.setUint32(m-a-4,a),t.style&&(g.setUint32(m,l.length),f.set(l,m+4),m+=4+l.length,g.setUint32(m,c.length),f.set(c,m+4),m+=4+c.length),It(m<=d.byteLength,"SubstitionInfo.write: Buffer overflow"),d.transferToFixedLength(m)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#i=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#n(t){It(t<mr.strings.length,"Invalid string index");let e=5;for(let a=0;a<t;a++)e+=this.#e.getUint32(e)+4;const i=this.#e.getUint32(e);return this.#i.decode(new Uint8Array(this.#t,e+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const e=this.#e.getUint32(t),i=this.#i.decode(new Uint8Array(this.#t,t+4,e));t+=4+e;const a=this.#e.getUint32(t),l=this.#i.decode(new Uint8Array(this.#t,t+4,a));return{style:i,weight:l}}}class Xt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#i=this.#e+1+8;static#n=this.#i+1+48;static#r=this.#n+1+6;#a;#s;#o;constructor({data:t,extra:e}){this.#a=t,this.#s=new TextDecoder,this.#o=new DataView(this.#a),e&&Object.assign(this,e)}#c(t){It(t<Xt.bools.length,"Invalid boolean index");const e=Math.floor(t/4),i=t*2%8,a=this.#o.getUint8(e)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(t){return It(t<Xt.numbers.length,"Invalid number index"),this.#o.getFloat64(Xt.#t+t*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let t=Xt.#e;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}get fontMatrix(){let t=Xt.#i;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(t,!0)),t+=8;return i}get defaultVMetrics(){let t=Xt.#n;if(this.#o.getUint8(t)===0)return;t+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(t,!0)),t+=2;return i}#d(t){It(t<Xt.strings.length,"Invalid string index");let e=Xt.#r+4;for(let l=0;l<t;l++)e+=this.#o.getUint32(e)+4;const i=this.#o.getUint32(e),a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,e+4,i)),this.#s.decode(a)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Xt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);if(l!==0)return new Uint8Array(this.#a,t+4,l)}clearData(){let t=Xt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);t+=4+a;const l=this.#o.getUint32(t);new Uint8Array(this.#a,t+4,l).fill(0),this.#o.setUint32(t,0)}get cssFontInfo(){let t=Xt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);t+=4+i;const a=this.#o.getUint32(t);if(a===0)return null;const l=new Uint8Array(a);return l.set(new Uint8Array(this.#a,t+4,a)),new gr(l.buffer)}get systemFontInfo(){let t=Xt.#r;const e=this.#o.getUint32(t);t+=4+e;const i=this.#o.getUint32(t);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#a,t+4,i)),new mr(a.buffer)}static write(t){const e=t.systemFontInfo?mr.write(t.systemFontInfo):null,i=t.cssFontInfo?gr.write(t.cssFontInfo):null,a=new TextEncoder,l={};let c=0;for(const x of Xt.strings)l[x]=a.encode(t[x]),c+=4+l[x].length;const h=Xt.#r+4+c+4+(e?e.byteLength:0)+4+(i?i.byteLength:0)+4+(t.data?t.data.length:0),d=new ArrayBuffer(h),f=new Uint8Array(d),g=new DataView(d);let m=0;const v=Xt.bools.length;let w=0,_=0;for(let x=0;x<v;x++){const S=t[Xt.bools[x]];w|=(S===void 0?0:S?2:1)<<_,_+=2,(_===8||x===v-1)&&(g.setUint8(m++,w),w=0,_=0)}It(m===Xt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const x of Xt.numbers)g.setFloat64(m,t[x]),m+=8;if(It(m===Xt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){g.setUint8(m++,4);for(const x of t.bbox)g.setInt16(m,x,!0),m+=2}else g.setUint8(m++,0),m+=8;if(It(m===Xt.#i,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){g.setUint8(m++,6);for(const x of t.fontMatrix)g.setFloat64(m,x,!0),m+=8}else g.setUint8(m++,0),m+=48;if(It(m===Xt.#n,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){g.setUint8(m++,1);for(const x of t.defaultVMetrics)g.setInt16(m,x,!0),m+=2}else g.setUint8(m++,0),m+=6;It(m===Xt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),g.setUint32(Xt.#r,0),m+=4;for(const x of Xt.strings){const S=l[x],E=S.length;g.setUint32(m,E),f.set(S,m+4),m+=4+E}if(g.setUint32(Xt.#r,m-Xt.#r-4),!e)g.setUint32(m,0),m+=4;else{const x=e.byteLength;g.setUint32(m,x),It(m+4+x<=d.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(e),m+4),m+=4+x}if(!i)g.setUint32(m,0),m+=4;else{const x=i.byteLength;g.setUint32(m,x),It(m+4+x<=d.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),m+4),m+=4+x}return t.data===void 0?(g.setUint32(m,0),m+=4):(g.setUint32(m,t.data.length),f.set(t.data,m+4),m+=4+t.data.length),It(m<=d.byteLength,"FontInfo.write: Buffer overflow"),d.transferToFixedLength(m)}}class ke{static#t=0;static#e=1;static#i=2;static#n=3;static#r=4;static#a=8;static#s=12;static#o=16;constructor(t){this.buffer=t,this.view=new DataView(t),this.data=new Uint8Array(t)}static write(t){let e,i=null,a=[],l=[],c=[],h=[],d=null,f=null;switch(t[0]){case"RadialAxial":e=t[1]==="axial"?1:2,i=t[2],c=t[3],e===1?a.push(...t[4],...t[5]):a.push(t[4][0],t[4][1],t[6],t[5][0],t[5][1],t[7]);break;case"Mesh":e=3,d=t[1],a=t[2],l=t[3],h=t[4]||[],i=t[6],f=t[7];break;default:throw new Error(`Unsupported pattern type: ${t[0]}`)}const g=Math.floor(a.length/2),m=Math.floor(l.length/3),v=c.length,w=h.length;let _=0;for(const L of h)_+=1,_=Math.ceil(_/4)*4,_+=4+L.coords.length*4,_+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(_+=4);const x=20+g*8+m*3+v*8+(i?16:0)+(f?3:0)+_,S=new ArrayBuffer(x),E=new DataView(S),T=new Uint8Array(S);E.setUint8(ke.#t,e),E.setUint8(ke.#e,i?1:0),E.setUint8(ke.#i,f?1:0),E.setUint8(ke.#n,d),E.setUint32(ke.#r,g,!0),E.setUint32(ke.#a,m,!0),E.setUint32(ke.#s,v,!0),E.setUint32(ke.#o,w,!0);let R=20;new Float32Array(S,R,g*2).set(a),R+=g*8,T.set(l,R),R+=m*3;for(const[L,P]of c)E.setFloat32(R,L,!0),R+=4,E.setUint32(R,parseInt(P.slice(1),16),!0),R+=4;if(i)for(const L of i)E.setFloat32(R,L,!0),R+=4;f&&(T.set(f,R),R+=3);for(let L=0;L<h.length;L++){const P=h[L];E.setUint8(R,P.type),R+=1,R=Math.ceil(R/4)*4,E.setUint32(R,P.coords.length,!0),R+=4,new Int32Array(S,R,P.coords.length).set(P.coords),R+=P.coords.length*4,E.setUint32(R,P.colors.length,!0),R+=4,new Int32Array(S,R,P.colors.length).set(P.colors),R+=P.colors.length*4,P.verticesPerRow!==void 0&&(E.setUint32(R,P.verticesPerRow,!0),R+=4)}return S}getIR(){const t=this.view,e=this.data[ke.#t],i=!!this.data[ke.#e],a=!!this.data[ke.#i],l=t.getUint32(ke.#r,!0),c=t.getUint32(ke.#a,!0),h=t.getUint32(ke.#s,!0),d=t.getUint32(ke.#o,!0);let f=20;const g=new Float32Array(this.buffer,f,l*2);f+=l*8;const m=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let S=0;S<h;++S){const E=t.getFloat32(f,!0);f+=4;const T=t.getUint32(f,!0);f+=4,v.push([E,`#${T.toString(16).padStart(6,"0")}`])}let w=null;if(i){w=[];for(let S=0;S<4;++S)w.push(t.getFloat32(f,!0)),f+=4}let _=null;a&&(_=new Uint8Array(this.buffer,f,3),f+=3);const x=[];for(let S=0;S<d;++S){const E=t.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const T=t.getUint32(f,!0);f+=4;const R=new Int32Array(this.buffer,f,T);f+=T*4;const k=t.getUint32(f,!0);f+=4;const L=new Int32Array(this.buffer,f,k);f+=k*4;const P={type:E,coords:R,colors:L};E===Mf.LATTICE&&(P.verticesPerRow=t.getUint32(f,!0),f+=4),x.push(P)}if(e===1)return["RadialAxial","axial",w,v,Array.from(g.slice(0,2)),Array.from(g.slice(2,4)),null,null];if(e===2)return["RadialAxial","radial",w,v,[g[0],g[1]],[g[3],g[4]],g[2],g[5]];if(e===3){const S=this.data[ke.#n];let E=null;if(g.length>0){let T=g[0],R=g[0],k=g[1],L=g[1];for(let P=0;P<g.length;P+=2){const j=g[P],X=g[P+1];T=T>j?j:T,k=k>X?X:k,R=R<j?j:R,L=L<X?X:L}E=[T,k,R,L]}return["Mesh",S,g,m,x,E,w,_]}throw new Error(`Unsupported pattern kind: ${e}`)}}class M2{static write(t){let e,i;return Ee.isFloat16ArraySupported?(i=new ArrayBuffer(t.length*2),e=new Float16Array(i)):(i=new ArrayBuffer(t.length*4),e=new Float32Array(i)),e.set(t),i}#t;constructor(t){this.#t=t}get path(){return Ee.isFloat16ArraySupported?new Float16Array(this.#t):new Float32Array(this.#t)}}function L2(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(Xe)return r;const t=URL.parse(r,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function O2(r){if(Xe&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return ul(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function jc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const If=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,I2=r=>typeof r=="object"&&typeof r?.name=="string",Hw=A2.bind(null,If,I2);class P2{#t=new Map;#e=Promise.resolve();postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};this.#e.then(()=>{for(const[a]of this.#t)a.call(this,i)})}addEventListener(t,e,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:l}=i;if(l.aborted){xt("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(t,e);a=()=>l.removeEventListener("abort",c),l.addEventListener("abort",c)}this.#t.set(e,a)}removeEventListener(t,e){this.#t.get(e)?.(),this.#t.delete(e)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Bc={DATA:1,ERROR:2},Se={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function M0(){}function on(r){if(r instanceof qi||r instanceof uu||r instanceof _0||r instanceof Ko||r instanceof uf)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||Qt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new qi(r.message);case"InvalidPDFException":return new uu(r.message);case"PasswordException":return new _0(r.message,r.code);case"ResponseException":return new Ko(r.message,r.status,r.missing);case"UnknownErrorException":return new uf(r.message,r.details)}return new uf(r.message,r.toString())}class jo{#t=new AbortController;constructor(t,e,i){this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#n(t);return}if(t.callback){const i=t.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Bc.DATA)a.resolve(t.data);else if(t.callback===Bc.ERROR)a.reject(on(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,a=t.sourceName,l=this.comObj;Promise.try(e,t.data).then(function(c){l.postMessage({sourceName:i,targetName:a,callback:Bc.DATA,callbackId:t.callbackId,data:c})},function(c){l.postMessage({sourceName:i,targetName:a,callback:Bc.ERROR,callbackId:t.callbackId,reason:on(c)})});return}if(t.streamId){this.#i(t);return}e(t.data)}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const a=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[a]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:a,data:e},i)}catch(c){l.reject(c)}return l.promise}sendWithStream(t,e,i,a){const l=this.streamId++,c=this.sourceName,h=this.targetName,d=this.comObj;return new ReadableStream({start:f=>{const g=Promise.withResolvers();return this.streamControllers[l]={controller:f,startCall:g,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:c,targetName:h,action:t,streamId:l,data:e,desiredSize:f.desiredSize},a),g.promise},pull:f=>{const g=Promise.withResolvers();return this.streamControllers[l].pullCall=g,d.postMessage({sourceName:c,targetName:h,stream:Se.PULL,streamId:l,desiredSize:f.desiredSize}),g.promise},cancel:f=>{It(f instanceof Error,"cancel must have a valid reason");const g=Promise.withResolvers();return this.streamControllers[l].cancelCall=g,this.streamControllers[l].isClosed=!0,d.postMessage({sourceName:c,targetName:h,stream:Se.CANCEL,streamId:l,reason:on(f)}),g.promise}},i)}#i(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this,h=this.actionHandler[t.action],d={enqueue(f,g=1,m){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=g,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:i,targetName:a,stream:Se.ENQUEUE,streamId:e,chunk:f},m)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:Se.CLOSE,streamId:e}),delete c.streamSinks[e])},error(f){It(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:i,targetName:a,stream:Se.ERROR,streamId:e,reason:on(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[e]=d,Promise.try(h,t.data,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.START_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.START_COMPLETE,streamId:e,reason:on(f)})})}#n(t){const e=t.streamId,i=this.sourceName,a=t.sourceName,l=this.comObj,c=this.streamControllers[e],h=this.streamSinks[e];switch(t.stream){case Se.START_COMPLETE:t.success?c.startCall.resolve():c.startCall.reject(on(t.reason));break;case Se.PULL_COMPLETE:t.success?c.pullCall.resolve():c.pullCall.reject(on(t.reason));break;case Se.PULL:if(!h){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,success:!0});break}h.desiredSize<=0&&t.desiredSize>0&&h.sinkCapability.resolve(),h.desiredSize=t.desiredSize,Promise.try(h.onPull||M0).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.PULL_COMPLETE,streamId:e,reason:on(f)})});break;case Se.ENQUEUE:if(It(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(t.chunk);break;case Se.CLOSE:if(It(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,e);break;case Se.ERROR:It(c,"error should have stream controller"),c.controller.error(on(t.reason)),this.#r(c,e);break;case Se.CANCEL_COMPLETE:t.success?c.cancelCall.resolve():c.cancelCall.reject(on(t.reason)),this.#r(c,e);break;case Se.CANCEL:if(!h)break;const d=on(t.reason);Promise.try(h.onCancel||M0,d).then(function(){l.postMessage({sourceName:i,targetName:a,stream:Se.CANCEL_COMPLETE,streamId:e,success:!0})},function(f){l.postMessage({sourceName:i,targetName:a,stream:Se.CANCEL_COMPLETE,streamId:e,reason:on(f)})}),h.sinkCapability.reject(d),h.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#r(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.#t?.abort(),this.#t=null}}class Gw{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Qt("Abstract method `_createCanvas` called.")}}class j2 extends Gw{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class Vw{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class L0 extends Vw{async _fetch(t){const e=await Dr(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):ul(e)}}class qw{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,a,l){return"none"}destroy(t=!1){}}class B2 extends qw{#t;#e;#i;#n;#r;#a;#s=0;constructor({docId:t,ownerDocument:e=globalThis.document}){super(),this.#n=t,this.#r=e}get#o(){return this.#e||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const t=this.#r.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const i=this.#r.createElementNS(Oi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#r.createElementNS(Oi,"defs"),t.append(i),i.append(this.#i),this.#r.body.append(t)}return this.#i}#d(t){if(t.length===1){const d=t[0],f=new Array(256);for(let m=0;m<256;m++)f[m]=d[m]/255;const g=f.join(",");return[g,g,g]}const[e,i,a]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let d=0;d<256;d++)l[d]=e[d]/255,c[d]=i[d]/255,h[d]=a[d]/255;return[l.join(","),c.join(","),h.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const e=this.#r.URL;e!==this.#r.baseURI&&(dl(e)?xt('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=pp(e,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let e=this.#o.get(t);if(e)return e;const[i,a,l]=this.#d(t),c=t.length===1?i:`${i}${a}${l}`;if(e=this.#o.get(c),e)return this.#o.set(t,e),e;const h=`g_${this.#n}_transfer_map_${this.#s++}`,d=this.#h(h);this.#o.set(t,d),this.#o.set(c,d);const f=this.#g(h);return this.#p(i,a,l,f),d}addHCMFilter(t,e){const i=`${t}-${e}`,a="base";let l=this.#c.get(a);if(l?.key===i||(l?(l.filter?.remove(),l.key=i,l.url="none",l.filter=null):(l={key:i,url:"none",filter:null},this.#c.set(a,l)),!t||!e))return l.url;const c=this.#v(t);t=st.makeHexColor(...c);const h=this.#v(e);if(e=st.makeHexColor(...h),this.#l.style.color="",t==="#000000"&&e==="#ffffff"||t===e)return l.url;const d=new Array(256);for(let w=0;w<=255;w++){const _=w/255;d[w]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const f=d.join(","),g=`g_${this.#n}_hcm_filter`,m=l.filter=this.#g(g);this.#p(f,f,f,m),this.#m(m);const v=(w,_)=>{const x=c[w]/255,S=h[w]/255,E=new Array(_+1);for(let T=0;T<=_;T++)E[T]=x+T/_*(S-x);return E.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),m),l.url=this.#h(g),l.url}addAlphaFilter(t){let e=this.#o.get(t);if(e)return e;const[i]=this.#d([t]),a=`alpha_${i}`;if(e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_alpha_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#g(l);return this.#y(i,h),c}addLuminosityFilter(t){let e=this.#o.get(t||"luminosity");if(e)return e;let i,a;if(t?([i]=this.#d([t]),a=`luminosity_${i}`):a="luminosity",e=this.#o.get(a),e)return this.#o.set(t,e),e;const l=`g_${this.#n}_luminosity_map_${this.#s++}`,c=this.#h(l);this.#o.set(t,c),this.#o.set(a,c);const h=this.#g(l);return this.#f(h),t&&this.#y(i,h),c}addHighlightHCMFilter(t,e,i,a,l){const c=`${e}-${i}-${a}-${l}`;let h=this.#c.get(t);if(h?.key===c||(h?(h.filter?.remove(),h.key=c,h.url="none",h.filter=null):(h={key:c,url:"none",filter:null},this.#c.set(t,h)),!e||!i))return h.url;const[d,f]=[e,i].map(this.#v.bind(this));let g=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),m=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,w]=[a,l].map(this.#v.bind(this));m<g&&([g,m,v,w]=[m,g,w,v]),this.#l.style.color="";const _=(E,T,R)=>{const k=new Array(256),L=(m-g)/R,P=E/255,j=(T-E)/(255*R);let X=0;for(let K=0;K<=R;K++){const et=Math.round(g+K*L),Z=P+K*j;for(let ct=X;ct<=et;ct++)k[ct]=Z;X=et+1}for(let K=X;K<256;K++)k[K]=k[X-1];return k.join(",")},x=`g_${this.#n}_hcm_${t}_filter`,S=h.filter=this.#g(x);return this.#m(S),this.#p(_(v[0],w[0],5),_(v[1],w[1],5),_(v[2],w[2],5),S),h.url=this.#h(x),h.url}destroy(t=!1){t&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#e?.clear(),this.#e=null,this.#a?.clear(),this.#a=null,this.#s=0)}#f(t){const e=this.#r.createElementNS(Oi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(e)}#m(t){const e=this.#r.createElementNS(Oi,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#g(t){const e=this.#r.createElementNS(Oi,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#l.append(e),e}#u(t,e,i){const a=this.#r.createElementNS(Oi,e);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),t.append(a)}#p(t,e,i,a){const l=this.#r.createElementNS(Oi,"feComponentTransfer");a.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",e),this.#u(l,"feFuncB",i)}#y(t,e){const i=this.#r.createElementNS(Oi,"feComponentTransfer");e.append(i),this.#u(i,"feFuncA",t)}#v(t){return this.#l.style.color=t,Nr(getComputedStyle(this.#l).getPropertyValue("color"))}}class $w{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class O0 extends $w{async _fetch(t){const e=await Dr(t,"arraybuffer");return new Uint8Array(e)}}class Yw{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Qt("Abstract method `_fetch` called.")}}class I0 extends Yw{async _fetch(t){const e=await Dr(t,"arraybuffer");return new Uint8Array(e)}}Xe&&xt("Please use the `legacy` build in Node.js environments.");async function Ap(r){const e=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(e)}class U2 extends qw{}class F2 extends Gw{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class z2 extends Vw{async _fetch(t){return Ap(t)}}class H2 extends $w{async _fetch(t){return Ap(t)}}class G2 extends Yw{async _fetch(t){return Ap(t)}}const rr="__forcedDependency",{floor:P0,ceil:j0}=Math;function Uc(r,t,e,i,a,l){r[t*4+0]=Math.min(r[t*4+0],e),r[t*4+1]=Math.min(r[t*4+1],i),r[t*4+2]=Math.max(r[t*4+2],a),r[t*4+3]=Math.max(r[t*4+3],l)}const Pf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class V2{#t;#e;constructor(t,e){this.#t=t,this.#e=e}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Pf}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const Fc=(r,t)=>{if(!r)return;let e=r.get(t);return e||(e={dependencies:new Set,isRenderingOperation:!1},r.set(t,e)),e};class q2{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[rr]:[]};#i=new Map;#n=[];#r=[];#a=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,e,i=!1){this.#f=t.width,this.#m=t.height,this.#y(e),i&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#y(t,this.#u)}#y(t,e){const i=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),e&&e.length>0?(this.#u.set(e),this.#u.fill(Pf,e.length)):this.#u.fill(Pf)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[rr]:{__proto__:this.#e[rr]}},this.#s={__proto__:this.#s},this.#n.push(t),this}restore(t){const e=Object.getPrototypeOf(this.#t);if(e===null)return this;this.#t=e,this.#e=Object.getPrototypeOf(this.#e),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(Fc(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}recordOpenMarker(t){return this.#n.push(t),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(t){const e=this.#n.pop();return e!==void 0&&(Fc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const e=this.#r.pop();return e!==void 0&&(Fc(this.#p,t)?.dependencies.add(e),this.#u[t]=this.#u[e]),this}pushBaseTransform(t){return this.#a.push(st.multiplyByDOMMatrix(this.#a.at(-1),t.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(t,e){return this.#t[t]=e,this}recordIncrementalData(t,e){return this.#e[t].push(e),this}resetIncrementalData(t,e){return this.#e[t].length=0,this}recordNamedData(t,e){return this.#i.set(t,e),this}recordSimpleDataFromNamed(t,e,i){this.#t[t]=this.#i.get(e)??i}recordFutureForcedDependency(t,e){return this.recordIncrementalData(rr,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in this.#t&&this.recordFutureForcedDependency(e,this.#t[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#l)this.recordFutureForcedDependency(rr,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(t,e,i,a,l,c){const h=st.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform()),d=[1/0,1/0,-1/0,-1/0];st.axialAlignedBoundingBox([i,l,a,c],h,d);const f=st.intersect(this.#s,d);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(t,e,i,a,l,c){const h=this.#s;if(h[0]===1/0)return this;const d=st.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform());if(h[0]===-1/0)return st.axialAlignedBoundingBox([i,l,a,c],d,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return st.axialAlignedBoundingBox([i,l,a,c],d,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],h[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],h[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],h[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],h[3])),this}recordCharacterBBox(t,e,i,a=1,l=0,c=0,h){const d=i.bbox;let f,g;if(d&&(f=d[2]!==d[0]&&d[3]!==d[1]&&this.#h.get(i),f!==!1&&(g=[0,0,0,0],st.axialAlignedBoundingBox(d,i.fontMatrix,g),(a!==1||l!==0||c!==0)&&st.scaleMinMax([a,0,0,-a,l,c],g),f)))return this.recordBBox(t,e,g[0],g[2],g[1],g[3]);if(!h)return this.recordFullPageBBox(t);const m=h();return d&&g&&f===void 0&&(f=g[0]<=l-m.actualBoundingBoxLeft&&g[2]>=l+m.actualBoundingBoxRight&&g[1]<=c-m.actualBoundingBoxAscent&&g[3]>=c+m.actualBoundingBoxDescent,this.#h.set(i,f),f)?this.recordBBox(t,e,g[0],g[2],g[1],g[3]):this.recordBBox(t,e,l-m.actualBoundingBoxLeft,l+m.actualBoundingBoxRight,c-m.actualBoundingBoxAscent,c+m.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#m,this.#s[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,e){const i=this.#l,a=this.#t,l=this.#e;for(const c of e)c in this.#t?i.add(a[c]):c in l&&l[c].forEach(i.add,i);return this}recordNamedDependency(t,e){return this.#i.has(e)&&this.#l.add(this.#i.get(e)),this}recordOperation(t,e=!1){if(this.recordDependencies(t,[rr]),this.#p){const i=Fc(this.#p,t),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#r.forEach(a.add,a),a.delete(t),i.isRenderingOperation=!0}if(this.#c===t){const i=P0(this.#o[0]*256/this.#f),a=P0(this.#o[1]*256/this.#m),l=j0(this.#o[2]*256/this.#f),c=j0(this.#o[3]*256/this.#m);Uc(this.#g,t,i,a,l,c);for(const h of this.#l)h!==t&&Uc(this.#g,h,i,a,l,c);for(const h of this.#n)h!==t&&Uc(this.#g,h,i,a,l,c);for(const h of this.#r)h!==t&&Uc(this.#g,h,i,a,l,c);e||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(t,e=!1){const i=Array.from(this.#l);this.recordOperation(t,e),this.recordIncrementalData("sameLineText",t);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(t,e=!1){return this.#c===t&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),e||this.#l.clear()),this}_takePendingDependencies(){const t=this.#l;return this.#l=new Set,t}_extractOperation(t){const e=this.#d.get(t);return this.#d.delete(t),e}_pushPendingDependencies(t){for(const e of t)this.#l.add(e)}take(){return this.#h.clear(),new V2(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class fu{#t;#e;#i;#n=0;#r=0;constructor(t,e,i){if(t instanceof fu&&t.#i===!!i)return t;this.#t=t,this.#e=e,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#n--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,e){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,e){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,e){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,e){return this}recordSimpleDataFromNamed(t,e,i){return this.#t.recordSimpleDataFromNamed(t,e,this.#e),this}recordFutureForcedDependency(t,e){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#i||this.#t.resetBBox(this.#e),this}recordClipBox(t,e,i,a,l,c){return this.#i||this.#t.recordClipBox(this.#e,e,i,a,l,c),this}recordBBox(t,e,i,a,l,c){return this.#i||this.#t.recordBBox(this.#e,e,i,a,l,c),this}recordCharacterBBox(t,e,i,a,l,c,h){return this.#i||this.#t.recordCharacterBBox(this.#e,e,i,a,l,c,h),this}recordFullPageBBox(t){return this.#i||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,e){return this.#t.recordDependencies(this.#e,e),this}recordNamedDependency(t,e){return this.#t.recordNamedDependency(this.#e,e),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#i||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const On={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Be={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jf(r,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],a=new Path2D;a.rect(t[0],t[1],e,i),r.clip(a)}class xp{isModifyingCurrentTransform(){return!1}getPattern(){Qt("Abstract method `getPattern` called.")}}class $2 extends xp{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(t,e=null){let i,a=this._p0,l=this._p1;if(e&&(a=a.slice(),l=l.slice(),st.applyTransform(a,e),st.applyTransform(l,e)),this._type==="axial")i=t.createLinearGradient(a[0],a[1],l[0],l[1]);else if(this._type==="radial"){let c=this._r0,h=this._r1;if(e){const d=new Float32Array(2);st.singularValueDecompose2dScale(e,d),c*=d[0],h*=d[0]}i=t.createRadialGradient(a[0],a[1],c,l[0],l[1],h)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(t,e,i,a){let l;if(a===Be.STROKE||a===Be.FILL){if(this.isOriginBased()){let v=st.transform(i,e.baseTransform);this.matrix&&(v=st.transform(v,this.matrix));const w=.001,_=Math.hypot(v[0],v[1]),x=Math.hypot(v[2],v[3]),S=(v[0]*v[2]+v[1]*v[3])/(_*x);if(Math.abs(S)<w)if(this.isRadial()){if(Math.abs(_-x)<w)return this._createGradient(t,v)}else return this._createGradient(t,v)}const c=e.current.getClippedPathBoundingBox(a,ce(t))||[0,0,0,0],h=Math.ceil(c[2]-c[0])||1,d=Math.ceil(c[3]-c[1])||1,f=e.cachedCanvases.getCanvas("pattern",h,d),g=f.context;g.clearRect(0,0,g.canvas.width,g.canvas.height),g.beginPath(),g.rect(0,0,g.canvas.width,g.canvas.height),g.translate(-c[0],-c[1]),i=st.transform(i,[1,0,0,1,c[0],c[1]]),g.transform(...e.baseTransform),this.matrix&&g.transform(...this.matrix),jf(g,this._bbox),g.fillStyle=this._createGradient(g),g.fill(),l=t.createPattern(f.canvas,"no-repeat");const m=new DOMMatrix(i);l.setTransform(m)}else jf(t,this._bbox),l=this._createGradient(t);return l}}function ff(r,t,e,i,a,l,c,h){const d=t.coords,f=t.colors,g=r.data,m=r.width*4;let v;d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=l,l=c,c=v),d[i+1]>d[a+1]&&(v=i,i=a,a=v,v=c,c=h,h=v),d[e+1]>d[i+1]&&(v=e,e=i,i=v,v=l,l=c,c=v);const w=(d[e]+t.offsetX)*t.scaleX,_=(d[e+1]+t.offsetY)*t.scaleY,x=(d[i]+t.offsetX)*t.scaleX,S=(d[i+1]+t.offsetY)*t.scaleY,E=(d[a]+t.offsetX)*t.scaleX,T=(d[a+1]+t.offsetY)*t.scaleY;if(_>=T)return;const R=f[l],k=f[l+1],L=f[l+2],P=f[c],j=f[c+1],X=f[c+2],K=f[h],et=f[h+1],Z=f[h+2],ct=Math.round(_),St=Math.round(T);let q,ot,M,U,J,vt,yt,D;for(let V=ct;V<=St;V++){if(V<S){const ft=V<_?0:(_-V)/(_-S);q=w-(w-x)*ft,ot=R-(R-P)*ft,M=k-(k-j)*ft,U=L-(L-X)*ft}else{let ft;V>T?ft=1:S===T?ft=0:ft=(S-V)/(S-T),q=x-(x-E)*ft,ot=P-(P-K)*ft,M=j-(j-et)*ft,U=X-(X-Z)*ft}let Q;V<_?Q=0:V>T?Q=1:Q=(_-V)/(_-T),J=w-(w-E)*Q,vt=R-(R-K)*Q,yt=k-(k-et)*Q,D=L-(L-Z)*Q;const it=Math.round(Math.min(q,J)),dt=Math.round(Math.max(q,J));let gt=m*V+it*4;for(let ft=it;ft<=dt;ft++)Q=(q-ft)/(q-J),Q<0?Q=0:Q>1&&(Q=1),g[gt++]=ot-(ot-vt)*Q|0,g[gt++]=M-(M-yt)*Q|0,g[gt++]=U-(U-D)*Q|0,g[gt++]=255}}function Y2(r,t,e){const i=t.coords,a=t.colors;let l,c;switch(t.type){case Mf.LATTICE:const h=t.verticesPerRow,d=Math.floor(i.length/h)-1,f=h-1;for(l=0;l<d;l++){let g=l*h;for(let m=0;m<f;m++,g++)ff(r,e,i[g],i[g+1],i[g+h],a[g],a[g+1],a[g+h]),ff(r,e,i[g+h+1],i[g+1],i[g+h],a[g+h+1],a[g+1],a[g+h])}break;case Mf.TRIANGLES:for(l=0,c=i.length;l<c;l+=3)ff(r,e,i[l],i[l+1],i[l+2],a[l],a[l+1],a[l+2]);break;default:throw new Error("illegal figure")}}class X2 extends xp{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const h=Math.floor(this._bounds[0]),d=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-h,g=Math.ceil(this._bounds[3])-d,m=Math.min(Math.ceil(Math.abs(f*t[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(g*t[1]*1.1)),3e3),w=f/m,_=g/v,x={coords:this._coords,colors:this._colors,offsetX:-h,offsetY:-d,scaleX:1/w,scaleY:1/_},S=m+4,E=v+4,T=i.getCanvas("mesh",S,E),R=T.context,k=R.createImageData(m,v);if(e){const P=k.data;for(let j=0,X=P.length;j<X;j+=4)P[j]=e[0],P[j+1]=e[1],P[j+2]=e[2],P[j+3]=255}for(const P of this._figures)Y2(k,P,x);return R.putImageData(k,2,2),{canvas:T.canvas,offsetX:h-2*w,offsetY:d-2*_,scaleX:w,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,a){jf(t,this._bbox);const l=new Float32Array(2);if(a===Be.SHADING)st.singularValueDecompose2dScale(ce(t),l);else if(this.matrix){st.singularValueDecompose2dScale(this.matrix,l);const[h,d]=l;st.singularValueDecompose2dScale(e.baseTransform,l),l[0]*=h,l[1]*=d}else st.singularValueDecompose2dScale(e.baseTransform,l);const c=this._createMeshCanvas(l,a===Be.SHADING?null:this._background,e.cachedCanvases);return a!==Be.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class W2 extends xp{getPattern(){return"hotpink"}}function K2(r){switch(r[0]){case"RadialAxial":return new $2(r);case"Mesh":return new X2(r);case"Dummy":return new W2}throw new Error(`Unknown IR type: ${r[0]}`)}const B0={COLORED:1,UNCOLORED:2};class Sp{static MAX_PATTERN_SIZE=3e3;constructor(t,e,i,a){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(t,e){const{bbox:i,operatorList:a,paintType:l,tilingType:c,color:h,canvasGraphicsFactory:d}=this;let{xstep:f,ystep:g}=this;f=Math.abs(f),g=Math.abs(g),xu("TilingType: "+c);const m=i[0],v=i[1],w=i[2],_=i[3],x=w-m,S=_-v,E=new Float32Array(2);st.singularValueDecompose2dScale(this.matrix,E);const[T,R]=E;st.singularValueDecompose2dScale(this.baseTransform,E);const k=T*E[0],L=R*E[1];let P=x,j=S,X=!1,K=!1;const et=Math.ceil(f*k),Z=Math.ceil(g*L),ct=Math.ceil(x*k),St=Math.ceil(S*L);et>=ct?P=f:X=!0,Z>=St?j=g:K=!0;const q=this.getSizeAndScale(P,this.ctx.canvas.width,k),ot=this.getSizeAndScale(j,this.ctx.canvas.height,L),M=t.cachedCanvases.getCanvas("pattern",q.size,ot.size),U=M.context,J=d.createCanvasGraphics(U,e);if(J.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(J,l,h),U.translate(-q.scale*m,-ot.scale*v),J.transform(0,q.scale,0,0,ot.scale,0,0),U.save(),J.dependencyTracker?.save(),this.clipBbox(J,m,v,w,_),J.baseTransform=ce(J.ctx),J.executeOperatorList(a),J.endDrawing(),J.dependencyTracker?.restore(),U.restore(),X||K){const vt=M.canvas;X&&(P=f),K&&(j=g);const yt=this.getSizeAndScale(P,this.ctx.canvas.width,k),D=this.getSizeAndScale(j,this.ctx.canvas.height,L),V=yt.size,Q=D.size,it=t.cachedCanvases.getCanvas("pattern-workaround",V,Q),dt=it.context,gt=X?Math.floor(x/f):0,ft=K?Math.floor(S/g):0;for(let ie=0;ie<=gt;ie++)for(let Pt=0;Pt<=ft;Pt++)dt.drawImage(vt,V*ie,Q*Pt,V,Q,0,0,V,Q);return{canvas:it.canvas,scaleX:yt.scale,scaleY:D.scale,offsetX:m,offsetY:v}}return{canvas:M.canvas,scaleX:q.scale,scaleY:ot.scale,offsetX:m,offsetY:v}}getSizeAndScale(t,e,i){const a=Math.max(Sp.MAX_PATTERN_SIZE,e);let l=Math.ceil(t*i);return l>=a?l=a:i=l/t,{scale:i,size:l}}clipBbox(t,e,i,a,l){const c=a-e,h=l-i;t.ctx.rect(e,i,c,h),st.axialAlignedBoundingBox([e,i,a,l],ce(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const a=t.ctx,l=t.current;switch(e){case B0.COLORED:const{fillStyle:c,strokeStyle:h}=this.ctx;a.fillStyle=l.fillColor=c,a.strokeStyle=l.strokeColor=h;break;case B0.UNCOLORED:a.fillStyle=a.strokeStyle=i,l.fillColor=l.strokeColor=i;break;default:throw new m2(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,a,l){let c=i;a!==Be.SHADING&&(c=st.transform(c,e.baseTransform),this.matrix&&(c=st.transform(c,this.matrix)));const h=this.createPatternCanvas(e,l);let d=new DOMMatrix(c);d=d.translate(h.offsetX,h.offsetY),d=d.scale(1/h.scaleX,1/h.scaleY);const f=t.createPattern(h.canvas,"repeat");return f.setTransform(d),f}}function Q2({src:r,srcPos:t=0,dest:e,width:i,height:a,nonBlackColor:l=4294967295,inverseDecode:c=!1}){const h=Ee.isLittleEndian?4278190080:255,[d,f]=c?[l,h]:[h,l],g=i>>3,m=i&7,v=r.length;e=new Uint32Array(e.buffer);let w=0;for(let _=0;_<a;_++){for(const S=t+g;t<S;t++){const E=t<v?r[t]:255;e[w++]=E&128?f:d,e[w++]=E&64?f:d,e[w++]=E&32?f:d,e[w++]=E&16?f:d,e[w++]=E&8?f:d,e[w++]=E&4?f:d,e[w++]=E&2?f:d,e[w++]=E&1?f:d}if(m===0)continue;const x=t<v?r[t++]:255;for(let S=0;S<m;S++)e[w++]=x&1<<7-S?f:d}return{srcPos:t,destPos:w}}const U0=16,F0=100,Z2=15,z0=10,ln=16,pf=new DOMMatrix,An=new Float32Array(2),ur=new Float32Array([1/0,1/0,-1/0,-1/0]);function J2(r,t){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){t.save(),this.__originalSave()},r.restore=function(){t.restore(),this.__originalRestore()},r.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},r.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},r.transform=function(e,i,a,l,c,h){t.transform(e,i,a,l,c,h),this.__originalTransform(e,i,a,l,c,h)},r.setTransform=function(e,i,a,l,c,h){t.setTransform(e,i,a,l,c,h),this.__originalSetTransform(e,i,a,l,c,h)},r.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},r.rotate=function(e){t.rotate(e),this.__originalRotate(e)},r.clip=function(e){t.clip(e),this.__originalClip(e)},r.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},r.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},r.bezierCurveTo=function(e,i,a,l,c,h){t.bezierCurveTo(e,i,a,l,c,h),this.__originalBezierCurveTo(e,i,a,l,c,h)},r.rect=function(e,i,a,l){t.rect(e,i,a,l),this.__originalRect(e,i,a,l)},r.closePath=function(){t.closePath(),this.__originalClosePath()},r.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class tD{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let a;return this.cache[t]!==void 0?(a=this.cache[t],this.canvasFactory.reset(a,e,i)):(a=this.canvasFactory.create(e,i),this.cache[t]=a),a}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function zc(r,t,e,i,a,l,c,h,d,f){const[g,m,v,w,_,x]=ce(r);if(m===0&&v===0){const T=c*g+_,R=Math.round(T),k=h*w+x,L=Math.round(k),P=(c+d)*g+_,j=Math.abs(Math.round(P)-R)||1,X=(h+f)*w+x,K=Math.abs(Math.round(X)-L)||1;return r.setTransform(Math.sign(g),0,0,Math.sign(w),R,L),r.drawImage(t,e,i,a,l,0,0,j,K),r.setTransform(g,m,v,w,_,x),[j,K]}if(g===0&&w===0){const T=h*v+_,R=Math.round(T),k=c*m+x,L=Math.round(k),P=(h+f)*v+_,j=Math.abs(Math.round(P)-R)||1,X=(c+d)*m+x,K=Math.abs(Math.round(X)-L)||1;return r.setTransform(0,Math.sign(m),Math.sign(v),0,R,L),r.drawImage(t,e,i,a,l,0,0,K,j),r.setTransform(g,m,v,w,_,x),[K,j]}r.drawImage(t,e,i,a,l,c,h,d,f);const S=Math.hypot(g,m),E=Math.hypot(v,w);return[S*d,E*f]}class H0{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=kf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Re.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,e,i){i?.(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ur.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Be.FILL,e=null){const i=this.minMax.slice();if(t===Be.STROKE){e||Qt("Stroke bounding box must include transform."),st.singularValueDecompose2dScale(e,An);const a=An[0]*this.lineWidth/2,l=An[1]*this.lineWidth/2;i[0]-=a,i[1]-=l,i[2]+=a,i[3]+=l}return i}updateClipFromPath(){const t=st.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ur,0)}getClippedPathBoundingBox(t=Be.FILL,e=null){return st.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function G0(r,t){if(t instanceof ImageData){r.putImageData(t,0,0);return}const e=t.height,i=t.width,a=e%ln,l=(e-a)/ln,c=a===0?l:l+1,h=r.createImageData(i,ln);let d=0,f;const g=t.data,m=h.data;let v,w,_,x;if(t.kind===zo.GRAYSCALE_1BPP){const S=g.byteLength,E=new Uint32Array(m.buffer,0,m.byteLength>>2),T=E.length,R=i+7>>3,k=4294967295,L=Ee.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(_=v<l?ln:a,f=0,w=0;w<_;w++){const P=S-d;let j=0;const X=P>R?i:P*8-7,K=X&-8;let et=0,Z=0;for(;j<K;j+=8)Z=g[d++],E[f++]=Z&128?k:L,E[f++]=Z&64?k:L,E[f++]=Z&32?k:L,E[f++]=Z&16?k:L,E[f++]=Z&8?k:L,E[f++]=Z&4?k:L,E[f++]=Z&2?k:L,E[f++]=Z&1?k:L;for(;j<X;j++)et===0&&(Z=g[d++],et=128),E[f++]=Z&et?k:L,et>>=1}for(;f<T;)E[f++]=0;r.putImageData(h,0,v*ln)}}else if(t.kind===zo.RGBA_32BPP){for(w=0,x=i*ln*4,v=0;v<l;v++)m.set(g.subarray(d,d+x)),d+=x,r.putImageData(h,0,w),w+=ln;v<c&&(x=i*a*4,m.set(g.subarray(d,d+x)),r.putImageData(h,0,w))}else if(t.kind===zo.RGB_24BPP)for(_=ln,x=i*_,v=0;v<c;v++){for(v>=l&&(_=a,x=i*_),f=0,w=x;w--;)m[f++]=g[d++],m[f++]=g[d++],m[f++]=g[d++],m[f++]=255;r.putImageData(h,0,v*ln)}else throw new Error(`bad image kind: ${t.kind}`)}function V0(r,t){if(t.bitmap){r.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,a=e%ln,l=(e-a)/ln,c=a===0?l:l+1,h=r.createImageData(i,ln);let d=0;const f=t.data,g=h.data;for(let m=0;m<c;m++){const v=m<l?ln:a;({srcPos:d}=Q2({src:f,srcPos:d,dest:g,width:i,height:v,nonBlackColor:0})),r.putImageData(h,0,m*ln)}}function No(r,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)r[i]!==void 0&&(t[i]=r[i]);r.setLineDash!==void 0&&(t.setLineDash(r.getLineDash()),t.lineDashOffset=r.lineDashOffset)}function Hc(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:t}=r;t!=="none"&&t!==""&&(r.filter="none")}function q0(r,t){if(t)return!0;st.singularValueDecompose2dScale(r,An);const e=Math.fround(qn.pixelRatio*la.PDF_TO_CSS_UNITS);return An[0]<=e&&An[1]<=e}const eD=["butt","round","square"],nD=["miter","round","bevel"],iD={},$0={};class yr{constructor(t,e,i,a,l,{optionalContentConfig:c,markedContentStack:h=null},d,f,g){this.ctx=t,this.current=new H0(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=a,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=h||[],this.optionalContentConfig=c,this.cachedCanvases=new tD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=d,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=g??null}getObject(t,e,i=null){return typeof e=="string"?(this.dependencyTracker?.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):i}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:a=null}){const l=this.ctx.canvas.width,c=this.ctx.canvas.height,h=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,l,c),this.ctx.fillStyle=h,i){const d=this.cachedCanvases.getCanvas("transparent",l,c);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...ce(this.compositeCtx))}this.ctx.save(),Hc(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ce(this.ctx)}executeOperatorList(t,e,i,a,l){const c=t.argsArray,h=t.fnArray;let d=e||0;const f=c.length;if(f===d)return d;const g=f-d>z0&&typeof i=="function",m=g?Date.now()+Z2:0;let v=0;const w=this.commonObjs,_=this.objs;let x,S;for(;;){if(a!==void 0&&d===a.nextBreakPoint)return a.breakIt(d,i),d;if(!l||l(d))if(x=h[d],S=c[d]??null,x!==xr.dependency)S===null?this[x](d):this[x](d,...S);else for(const E of S){this.dependencyTracker?.recordNamedData(E,d);const T=E.startsWith("g_")?w:_;if(!T.has(E))return T.get(E,i),d}if(d++,d===f)return d;if(g&&++v>z0){if(Date.now()>m)return i(),d;v=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const i=t.width??t.displayWidth,a=t.height??t.displayHeight;let l=Math.max(Math.hypot(e[0],e[1]),1),c=Math.max(Math.hypot(e[2],e[3]),1),h=i,d=a,f="prescale1",g,m;for(;l>2&&h>1||c>2&&d>1;){let v=h,w=d;l>2&&h>1&&(v=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),l/=h/v),c>2&&d>1&&(w=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,c/=d/w),g=this.cachedCanvases.getCanvas(f,v,w),m=g.context,m.clearRect(0,0,v,w),m.drawImage(t,0,0,h,d,0,0,v,w),t=g.canvas,h=v,d=w,f=f==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:d}}_createMaskCanvas(t,e){const i=this.ctx,{width:a,height:l}=e,c=this.current.fillColor,h=this.current.patternFill,d=ce(i);let f,g,m,v;if((e.bitmap||e.data)&&e.count>1){const et=e.bitmap||e.data.buffer;g=JSON.stringify(h?d:[d.slice(0,4),c]),f=this._cachedBitmapsMap.get(et),f||(f=new Map,this._cachedBitmapsMap.set(et,f));const Z=f.get(g);if(Z&&!h){const ct=Math.round(Math.min(d[0],d[2])+d[4]),St=Math.round(Math.min(d[1],d[3])+d[5]);return this.dependencyTracker?.recordDependencies(t,On.transformAndFill),{canvas:Z,offsetX:ct,offsetY:St}}m=Z}m||(v=this.cachedCanvases.getCanvas("maskCanvas",a,l),V0(v.context,e));let w=st.transform(d,[1/a,0,0,-1/l,0,0]);w=st.transform(w,[1,0,0,1,0,-l]);const _=ur.slice();st.axialAlignedBoundingBox([0,0,a,l],w,_);const[x,S,E,T]=_,R=Math.round(E-x)||1,k=Math.round(T-S)||1,L=this.cachedCanvases.getCanvas("fillCanvas",R,k),P=L.context,j=x,X=S;P.translate(-j,-X),P.transform(...w),m||(m=this._scaleImage(v.canvas,ei(P)),m=m.img,f&&h&&f.set(g,m)),P.imageSmoothingEnabled=q0(ce(P),e.interpolate),zc(P,m,0,0,m.width,m.height,0,0,a,l),P.globalCompositeOperation="source-in";const K=st.transform(ei(P),[1,0,0,1,-j,-X]);return P.fillStyle=h?c.getPattern(i,this,K,Be.FILL,t):c,P.fillRect(0,0,a,l),f&&!h&&(this.cachedCanvases.delete("fillCanvas"),f.set(g,L.canvas)),this.dependencyTracker?.recordDependencies(t,On.transformAndFill),{canvas:L.canvas,offsetX:Math.round(j),offsetY:Math.round(X)}}setLineWidth(t,e){this.dependencyTracker?.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=eD[e]}setLineJoin(t,e){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=nD[e]}setMiterLimit(t,e){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,i){this.dependencyTracker?.recordSimpleData("dash",t);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(e),a.lineDashOffset=i)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){for(const[i,a]of e)switch(i){case"LW":this.setLineWidth(t,a);break;case"LC":this.setLineCap(t,a);break;case"LJ":this.setLineJoin(t,a);break;case"ML":this.setMiterLimit(t,a);break;case"D":this.setDash(t,a[0],a[1]);break;case"RI":this.setRenderingIntent(t,a);break;case"FL":this.setFlatness(t,a);break;case"Font":this.setFont(t,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(a,e,i);this.suspendedCtx=this.ctx;const c=this.ctx=l.context;c.setTransform(this.suspendedCtx.getTransform()),No(this.suspendedCtx,c),J2(c,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),No(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,a){const l=a[0],c=a[1],h=a[2]-l,d=a[3]-c;h===0||d===0||(this.genericComposeSMask(e.context,i,h,d,e.subtype,e.backdrop,e.transferMap,l,c,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,a,l,c,h,d,f,g,m){let v=t.canvas,w=d-g,_=f-m;if(c)if(w<0||_<0||w+i>v.width||_+a>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,a),E=S.context;E.drawImage(v,-w,-_),E.globalCompositeOperation="destination-atop",E.fillStyle=c,E.fillRect(0,0,i,a),E.globalCompositeOperation="source-over",v=S.canvas,w=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(w,_,i,a),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=c,t.fillRect(w,_,i,a),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),l==="Alpha"&&h?e.filter=this.filterFactory.addAlphaFilter(h):l==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(h));const x=new Path2D;x.rect(d,f,i,a),e.clip(x),e.globalCompositeOperation="destination-in",e.drawImage(v,w,_,i,a,d,f,i,a),e.restore()}save(t){this.inSMaskMode&&No(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&No(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,a,l,c,h){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(e,i,a,l,c,h),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i,a){let[l]=i;if(!a){l||=i[0]=new Path2D,this[e](t,l);return}if(this.dependencyTracker!==null){const c=e===xr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(t,["transform"])}l instanceof Path2D||(l=i[0]=Bw(l)),st.axialAlignedBoundingBox(a,ce(this.ctx),this.current.minMax),this[e](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,i=!0){const a=this.ctx,l=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const c=l.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=l.getPattern(a,this,ei(a),Be.STROKE,t),c){const h=new Path2D;h.addPath(e,a.getTransform().invertSelf().multiplySelf(c)),e=h}this.rescaleAndStroke(e,!1),a.restore()}else this.rescaleAndStroke(e,!0);this.dependencyTracker?.recordDependencies(t,On.stroke),i&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Be.STROKE,ce(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,i=!0){const a=this.ctx,l=this.current.fillColor,c=this.current.patternFill;let h=!1;if(c){const f=l.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(t),a.save(),a.fillStyle=l.getPattern(a,this,ei(a),Be.FILL,t),f){const g=new Path2D;g.addPath(e,a.getTransform().invertSelf().multiplySelf(f)),e=g}h=!0}const d=this.current.getClippedPathBoundingBox();this.contentVisible&&d!==null&&(this.pendingEOFill?(a.fill(e,"evenodd"),this.pendingEOFill=!1):a.fill(e)),this.dependencyTracker?.recordDependencies(t,On.fill),h&&(a.restore(),this.dependencyTracker?.restore(t)),i&&this.consumePath(t,e,d)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){this.ctx.fill(e),this.dependencyTracker?.recordDependencies(t,On.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=iD}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=$0}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;e!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",t),a.recordCloseMarker(t)}if(e!==void 0){const a=new Path2D,l=i.getTransform().invertSelf();for(const{transform:c,x:h,y:d,fontSize:f,path:g}of e)g&&a.addPath(g,new DOMMatrix(c).preMultiplySelf(l).translate(h,d).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(t,e){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,i){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",e,t);const a=this.commonObjs.get(e),l=this.current;if(!a)throw new Error(`Can't find font for ${e}`);if(l.fontMatrix=a.fontMatrix||kf,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&xt("Invalid font matrix for font "+e),i<0?(i=-i,l.fontDirection=-1):l.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",h=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let d="normal";a.black?d="900":a.bold&&(d="bold");const f=a.italic?"italic":"normal";let g=i;i<U0?g=U0:i>F0&&(g=F0),this.current.fontSizeScale=i/g,this.ctx.font=`${f} ${d} ${g}px ${h}`}setTextRenderingMode(t,e){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=i}setLeadingMoveText(t,e,i){this.setLeading(t,-i),this.moveText(t,e,i)}setTextMatrix(t,e){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",t);const{current:i}=this;i.textMatrix=e,i.textMatrixScale=Math.hypot(e[0],e[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#i(t,e,i){const a=new Path2D;return a.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),a}paintChar(t,e,i,a,l,c){const h=this.ctx,d=this.current,f=d.font,g=d.textRenderingMode,m=d.fontSize/d.fontSizeScale,v=g&Re.FILL_STROKE_MASK,w=!!(g&Re.ADD_TO_PATH_FLAG),_=d.patternFill&&!f.missingFile,x=d.patternStroke&&!f.missingFile;let S;if((f.disableFontFace||w||_||x)&&!f.missingFile&&(S=f.getPathGenerator(this.commonObjs,e)),S&&(f.disableFontFace||_||x)){h.save(),h.translate(i,a),h.scale(m,-m),this.dependencyTracker?.recordCharacterBBox(t,h,f);let E;if(v===Re.FILL||v===Re.FILL_STROKE)if(l){E=h.getTransform(),h.setTransform(...l);const T=this.#i(S,E,l);h.fill(T)}else h.fill(S);if(v===Re.STROKE||v===Re.FILL_STROKE)if(c){E||=h.getTransform(),h.setTransform(...c);const{a:T,b:R,c:k,d:L}=E,P=st.inverseTransform(c),j=st.transform([T,R,k,L,0,0],P);st.singularValueDecompose2dScale(j,An),h.lineWidth*=Math.max(An[0],An[1])/m,h.stroke(this.#i(S,E,c))}else h.lineWidth/=m,h.stroke(S);h.restore()}else(v===Re.FILL||v===Re.FILL_STROKE)&&(h.fillText(e,i,a),this.dependencyTracker?.recordCharacterBBox(t,h,f,m,i,a,()=>h.measureText(e))),(v===Re.STROKE||v===Re.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,h,f,m,i,a,()=>h.measureText(e)).recordDependencies(t,On.stroke),h.strokeText(e,i,a));w&&((this.pendingTextPaths||=[]).push({transform:ce(h),x:i,y:a,fontSize:m,path:S}),this.dependencyTracker?.recordCharacterBBox(t,h,f,m,i,a))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){i=!0;break}return bt(this,"isFontSubpixelAAEnabled",i)}showText(t,e){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,On.showText).resetBBox(t),this.current.textRenderingMode&Re.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(t,e),this.dependencyTracker?.recordShowTextOperation(t);return}const l=i.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const c=this.ctx,h=i.fontSizeScale,d=i.charSpacing,f=i.wordSpacing,g=i.fontDirection,m=i.textHScale*g,v=e.length,w=a.vertical,_=w?1:-1,x=a.defaultVMetrics,S=l*i.fontMatrix[0],E=i.textRenderingMode===Re.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),g>0?c.scale(m,-1):c.scale(m,1);let T,R;const k=i.textRenderingMode&Re.FILL_STROKE_MASK,L=k===Re.FILL||k===Re.FILL_STROKE,P=k===Re.STROKE||k===Re.FILL_STROKE;if(L&&i.patternFill){c.save();const Z=i.fillColor.getPattern(c,this,ei(c),Be.FILL,t);T=ce(c),c.restore(),c.fillStyle=Z}if(P&&i.patternStroke){c.save();const Z=i.strokeColor.getPattern(c,this,ei(c),Be.STROKE,t);R=ce(c),c.restore(),c.strokeStyle=Z}let j=i.lineWidth;const X=i.textMatrixScale;if(X===0||j===0?P&&(j=this.getSinglePixelWidth()):j/=X,h!==1&&(c.scale(h,h),j/=h),c.lineWidth=j,a.isInvalidPDFjsFont){const Z=[];let ct=0;for(const q of e)Z.push(q.unicode),ct+=q.width;const St=Z.join("");if(c.fillText(St,0,0),this.dependencyTracker!==null){const q=c.measureText(St);this.dependencyTracker.recordBBox(t,this.ctx,-q.actualBoundingBoxLeft,q.actualBoundingBoxRight,-q.actualBoundingBoxAscent,q.actualBoundingBoxDescent).recordShowTextOperation(t)}i.x+=ct*S*m,c.restore(),this.compose();return}let K=0,et;for(et=0;et<v;++et){const Z=e[et];if(typeof Z=="number"){K+=_*Z*l/1e3;continue}let ct=!1;const St=(Z.isSpace?f:0)+d,q=Z.fontChar,ot=Z.accent;let M,U,J=Z.width;if(w){const D=Z.vmetric||x,V=-(Z.vmetric?D[1]:J*.5)*S,Q=D[2]*S;J=D?-D[0]:J,M=V/h,U=(K+Q)/h}else M=K/h,U=0;let vt;if(a.remeasure&&J>0){vt=c.measureText(q);const D=vt.width*1e3/l*h;if(J<D&&this.isFontSubpixelAAEnabled){const V=J/D;ct=!0,c.save(),c.scale(V,1),M/=V}else J!==D&&(M+=(J-D)/2e3*l/h)}if(this.contentVisible&&(Z.isInFont||a.missingFile)){if(E&&!ot)c.fillText(q,M,U),this.dependencyTracker?.recordCharacterBBox(t,c,vt?{bbox:null}:a,l/h,M,U,()=>vt??c.measureText(q));else if(this.paintChar(t,q,M,U,T,R),ot){const D=M+l*ot.offset.x/h,V=U-l*ot.offset.y/h;this.paintChar(t,ot.fontChar,D,V,T,R)}}const yt=w?J*S-St*g:J*S+St*g;K+=yt,ct&&c.restore()}w?i.y-=K:i.x+=K*m,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,e){const i=this.ctx,a=this.current,l=a.font,c=a.fontSize,h=a.fontDirection,d=l.vertical?1:-1,f=a.charSpacing,g=a.wordSpacing,m=a.textHScale*h,v=a.fontMatrix||kf,w=e.length,_=a.textRenderingMode===Re.INVISIBLE;let x,S,E,T;if(_||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(m,h);const R=this.dependencyTracker;for(this.dependencyTracker=R?new fu(R,t):null,x=0;x<w;++x){if(S=e[x],typeof S=="number"){T=d*S*c/1e3,this.ctx.translate(T,0),a.x+=T*m;continue}const k=(S.isSpace?g:0)+f,L=l.charProcOperatorList[S.operatorListId];L?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...v),this.executeOperatorList(L),this.restore()):xt(`Type3 character "${S.operatorListId}" is not available.`);const P=[S.width,0];st.applyTransform(P,v),E=P[0]*c+k,i.translate(E,0),a.x+=E*m}i.restore(),R&&(this.dependencyTracker=R)}setCharWidth(t,e,i){}setCharWidthAndBounds(t,e,i,a,l,c,h){const d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordBBox(t,this.ctx,a,c,l,h).recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}getColorN_Pattern(t,e){let i;if(e[0]==="TilingPattern"){const a=this.baseTransform||ce(this.ctx),l={createCanvasGraphics:(c,h)=>new yr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new fu(this.dependencyTracker,h,!0):null)};i=new Sp(e,this.ctx,l,a)}else i=this._getPattern(t,e[1],e[2]);return i}setStrokeColorN(t,...e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,i=null){let a;return this.cachedPatterns.has(e)?a=this.cachedPatterns.get(e):(a=K2(this.getObject(t,e)),this.cachedPatterns.set(e,a)),i&&(a.matrix=i),a}shadingFill(t,e){if(!this.contentVisible)return;const i=this.ctx;this.save(t);const a=this._getPattern(t,e);i.fillStyle=a.getPattern(i,this,ei(i),Be.SHADING,t);const l=ei(i);if(l){const{width:c,height:h}=i.canvas,d=ur.slice();st.axialAlignedBoundingBox([0,0,c,h],l,d);const[f,g,m,v]=d;this.ctx.fillRect(f,g,m-f,v-g)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,On.transform).recordDependencies(t,On.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Qt("Should not call beginInlineImage")}beginImageData(){Qt("Should not call beginImageData")}paintFormXObjectBegin(t,e,i){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=ce(this.ctx),i)){st.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,l,c,h]=i,d=new Path2D;d.rect(a,l,c-a,h-l),this.ctx.clip(d),this.dependencyTracker?.recordClipBox(t,this.ctx,a,c,l,h),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;e.isolated||xu("TODO: Support non-isolated groups."),e.knockout&&xt("Knockout groups not supported.");const a=ce(i);if(e.matrix&&i.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let l=ur.slice();st.axialAlignedBoundingBox(e.bbox,ce(i),l);const c=[0,0,i.canvas.width,i.canvas.height];l=st.intersect(l,c)||[0,0,0,0];const h=Math.floor(l[0]),d=Math.floor(l[1]),f=Math.max(Math.ceil(l[2])-h,1),g=Math.max(Math.ceil(l[3])-d,1);this.current.startNewPathAndClipBox([0,0,f,g]);let m="groupAt"+this.groupLevel;e.smask&&(m+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(m,f,g),w=v.context;w.translate(-h,-d),w.transform(...a);let _=new Path2D;const[x,S,E,T]=e.bbox;if(_.rect(x,S,E-x,T-S),e.matrix){const R=new Path2D;R.addPath(_,new DOMMatrix(e.matrix)),_=R}w.clip(_),e.smask&&this.smaskStack.push({canvas:v.canvas,context:w,offsetX:h,offsetY:d,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(h,d),i.save()),No(i,w),this.ctx=w,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(t,e){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=ce(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const c=ur.slice();st.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],l,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(t,e,i,a,l,c){if(this.#t(),Hc(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const h=i[2]-i[0],d=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=h,i[3]=d,st.singularValueDecompose2dScale(ce(this.ctx),An);const{viewportScale:f}=this,g=Math.ceil(h*this.outputScaleX*f),m=Math.ceil(d*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(g,m);const{canvas:v,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(e,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(An[0],0,0,-An[1],0,d*An[1]),Hc(this.ctx)}else{Hc(this.ctx),this.endPath(t);const f=new Path2D;f.rect(i[0],i[1],h,d),this.ctx.clip(f)}}this.current=new H0(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...a),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){if(!this.contentVisible)return;const i=e.count;e=this.getObject(t,e.data,e),e.count=i;const a=this.ctx,l=this._createMaskCanvas(t,e),c=l.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+c.width,l.offsetY,l.offsetY+c.height).recordOperation(t),a.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i,a=0,l=0,c,h){if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const d=this.ctx;d.save();const f=ce(d);d.transform(i,a,l,c,0,0);const g=this._createMaskCanvas(t,e);d.setTransform(1,0,0,1,g.offsetX-f[4],g.offsetY-f[5]),this.dependencyTracker?.resetBBox(t);for(let m=0,v=h.length;m<v;m+=2){const w=st.transform(f,[i,a,l,c,h[m],h[m+1]]);d.drawImage(g.canvas,w[4],w[5]),this.dependencyTracker?.recordBBox(t,this.ctx,w[4],w[4]+g.canvas.width,w[5],w[5]+g.canvas.height)}d.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,On.transformAndFill);for(const c of e){const{data:h,width:d,height:f,transform:g}=c,m=this.cachedCanvases.getCanvas("maskCanvas",d,f),v=m.context;v.save();const w=this.getObject(t,h,c);V0(v,w),v.globalCompositeOperation="source-in",v.fillStyle=l?a.getPattern(v,this,ei(i),Be.FILL,t):a,v.fillRect(0,0,d,f),v.restore(),i.save(),i.transform(...g),i.scale(1,-1),zc(i,m.canvas,0,0,d,f,0,-1,1,1),this.dependencyTracker?.recordBBox(t,i,0,d,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const i=this.getObject(t,e);if(!i){xt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,i)}paintImageXObjectRepeat(t,e,i,a,l){if(!this.contentVisible)return;const c=this.getObject(t,e);if(!c){xt("Dependent image isn't ready yet");return}const h=c.width,d=c.height,f=[];for(let g=0,m=l.length;g<m;g+=2)f.push({transform:[i,0,0,a,l[g],l[g+1]],x:0,y:0,w:h,h:d});this.paintInlineImageXObjectGroup(t,c,f)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:a}=t,l=this.cachedCanvases.getCanvas("inlineImage",i,a),c=l.context;return c.filter=this.current.transferMaps,c.drawImage(e,0,0),c.filter="none",l.canvas}paintInlineImageXObject(t,e){if(!this.contentVisible)return;const i=e.width,a=e.height,l=this.ctx;this.save(t);const{filter:c}=l;c!=="none"&&c!==""&&(l.filter="none"),l.scale(1/i,-1/a);let h;if(e.bitmap)h=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)h=e;else{const g=this.cachedCanvases.getCanvas("inlineImage",i,a).context;G0(g,e),h=this.applyTransferMapsToCanvas(g)}const d=this._scaleImage(h,ei(l));l.imageSmoothingEnabled=q0(ce(l),e.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,i,-a,0).recordDependencies(t,On.imageXObject).recordOperation(t),zc(l,d.img,0,0,d.paintWidth,d.paintHeight,0,-a,i,a),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,i){if(!this.contentVisible)return;const a=this.ctx;let l;if(e.bitmap)l=e.bitmap;else{const c=e.width,h=e.height,f=this.cachedCanvases.getCanvas("inlineImage",c,h).context;G0(f,e),l=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(t);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),zc(a,l,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,On.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,i){}beginMarkedContent(t,e){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,i){this.dependencyTracker?.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const l=this.ctx;this.pendingClip?(a||(this.pendingClip===$0?l.clip(e,"evenodd"):l.clip(e)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ce(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),a=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:a,d:l}=this.ctx.getTransform();let c,h;if(i===0&&a===0){const d=Math.abs(e),f=Math.abs(l);if(d===f)if(t===0)c=h=1/d;else{const g=d*t;c=h=g<1?1/g:1}else if(t===0)c=1/d,h=1/f;else{const g=d*t,m=f*t;c=g<1?1/g:1,h=m<1?1/m:1}}else{const d=Math.abs(e*l-i*a),f=Math.hypot(e,i),g=Math.hypot(a,l);if(t===0)c=g/d,h=f/d;else{const m=t*d;c=g>m?g/m:1,h=f>m?f/m:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=h}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:a}}=this,[l,c]=this.getScaleForStroking();if(l===c){i.lineWidth=(a||1)*l,i.stroke(t);return}const h=i.getLineDash();e&&i.save(),i.scale(l,c),pf.a=1/l,pf.d=1/c;const d=new Path2D;if(d.addPath(t,pf),h.length>0){const f=Math.max(l,c);i.setLineDash(h.map(g=>g/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(d),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const r in xr)yr.prototype[r]!==void 0&&(yr.prototype[xr[r]]=yr.prototype[r]);class ra{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class sD{#t;#e;constructor({parsedData:t,rawData:e}){this.#t=t,this.#e=e}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const lr=Symbol("INTERNAL");class aD{#t=!1;#e=!1;#i=!1;#n=!0;constructor(t,{name:e,intent:i,usage:a,rbGroups:l}){this.#t=!!(t&vn.DISPLAY),this.#e=!!(t&vn.PRINT),this.name=e,this.intent=i,this.usage=a,this.rbGroups=l}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:t,view:e}=this.usage;return this.#t?e?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,e,i=!1){t!==lr&&Qt("Internal method `_setVisible` called."),this.#i=i,this.#n=e}}class rD{#t=null;#e=new Map;#i=null;#n=null;constructor(t,e=vn.DISPLAY){if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#n=t.order;for(const i of t.groups)this.#e.set(i.id,new aD(e,i));if(t.baseState==="OFF")for(const i of this.#e.values())i._setVisible(lr,!1);for(const i of t.on)this.#e.get(i)._setVisible(lr,!0);for(const i of t.off)this.#e.get(i)._setVisible(lr,!1);this.#i=this.getHash()}}#r(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let a=1;a<e;a++){const l=t[a];let c;if(Array.isArray(l))c=this.#r(l);else if(this.#e.has(l))c=this.#e.get(l).visible;else return xt(`Optional content group not found: ${l}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return xu("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(xt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(!this.#e.get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!this.#e.has(e))return xt(`Optional content group not found: ${e}`),!0;if(this.#e.get(e).visible)return!1}return!0}return xt(`Unknown optional content policy ${t.policy}.`),!0}return xt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){const a=this.#e.get(t);if(!a){xt(`Optional content group not found: ${t}`);return}if(i&&e&&a.rbGroups.length)for(const l of a.rbGroups)for(const c of l)c!==t&&this.#e.get(c)?._setVisible(lr,!1,!0);a._setVisible(lr,!!e,!0),this.#t=null}setOCGState({state:t,preserveRB:e}){let i;for(const a of t){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const l=this.#e.get(a);if(l)switch(i){case"ON":this.setVisibility(a,!0,e);break;case"OFF":this.setVisibility(a,!1,e);break;case"Toggle":this.setVisibility(a,!l.visible,e);break}}this.#t=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#e.size?this.#n?this.#n.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new Fw;for(const[e,i]of this.#e)t.update(`${e}:${i.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class oD{constructor(t,{disableRange:e=!1,disableStream:i=!1}){It(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:a,initialData:l,progressiveDone:c,contentDispositionFilename:h}=t;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=h,l?.length>0){const d=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=a,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((d,f)=>{this._onReceiveData({begin:d,chunk:f})}),t.addProgressListener((d,f)=>{this._onProgress({loaded:d,total:f})}),t.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(i),!0)});It(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){It(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new lD(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new cD(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}}class lD{constructor(t,e,i=!1,a=null){this._stream=t,this._done=i||!1,this._filename=_u(a)?a:null,this._queuedChunks=e||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class cD{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function uD(r){let t=!0,e=i("filename\\*","i").exec(r);if(e){e=e[1];let g=h(e);return g=unescape(g),g=d(g),g=f(g),l(g)}if(e=c(r),e){const g=f(e);return l(g)}if(e=i("filename","i").exec(r),e){e=e[1];let g=h(e);return g=f(g),l(g)}function i(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function a(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const v=new TextDecoder(g,{fatal:!0}),w=ul(m);m=v.decode(w),t=!1}catch{}}return m}function l(g){return t&&/[\x80-\xff]/.test(g)&&(g=a("utf-8",g),t&&(g=a("iso-8859-1",g))),g}function c(g){const m=[];let v;const w=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(g))!==null;){let[,x,S,E]=v;if(x=parseInt(x,10),x in m){if(x===0)break;continue}m[x]=[S,E]}const _=[];for(let x=0;x<m.length&&x in m;++x){let[S,E]=m[x];E=h(E),S&&(E=unescape(E),x===0&&(E=d(E))),_.push(E)}return _.join("")}function h(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let v=0;v<m.length;++v){const w=m[v].indexOf('"');w!==-1&&(m[v]=m[v].slice(0,w),m.length=v+1),m[v]=m[v].replaceAll(/\\(.)/g,"$1")}g=m.join('"')}return g}function d(g){const m=g.indexOf("'");if(m===-1)return g;const v=g.slice(0,m),_=g.slice(m+1).replace(/^[^']*'/,"");return a(v,_)}function f(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,v,w,_){if(w==="q"||w==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(x,S){return String.fromCharCode(parseInt(S,16))}),a(v,_);try{_=atob(_)}catch{}return a(v,_)})}return""}function Xw(r,t){const e=new Headers;if(!r||!t||typeof t!="object")return e;for(const i in t){const a=t[i];a!==void 0&&e.append(i,a)}return e}function Eu(r){return URL.parse(r)?.origin??null}function Ww({responseHeaders:r,isHttp:t,rangeChunkSize:e,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(r.get("Content-Length"),10);return!Number.isInteger(l)||(a.suggestedLength=l,l<=2*e)||i||!t||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Kw(r){const t=r.get("Content-Disposition");if(t){let e=uD(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(_u(e))return e}return null}function gl(r,t){return new Ko(`Unexpected server response (${r}) while retrieving PDF "${t}".`,r,r===404||r===0&&t.startsWith("file:"))}function Qw(r){return r===200||r===206}function Zw(r,t,e){return{method:"GET",headers:r,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Jw(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(xt(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class hD{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Xw(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return It(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new dD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new fD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class dD{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),a=e.url;fetch(a,Zw(i,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=Eu(l.url),!Qw(l.status))throw gl(l.status,a);this._reader=l.body.getReader(),this._headersCapability.resolve();const c=l.headers,{allowRangeRequests:h,suggestedLength:d}=Ww({responseHeaders:c,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=h,this._contentLength=d||this._contentLength,this._filename=Kw(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new qi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Jw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class fD{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${e}-${i-1}`);const c=a.url;fetch(c,Zw(l,this._withCredentials,this._abortController)).then(h=>{const d=Eu(h.url);if(d!==t._responseOrigin)throw new Error(`Expected range response-origin "${d}" to match "${t._responseOrigin}".`);if(!Qw(h.status))throw gl(h.status,c);this._readCapability.resolve(),this._reader=h.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Jw(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const gf=200,mf=206;function pD(r){const t=r.response;return typeof t!="string"?t:ul(t).buffer}class gD{_responseOrigin=null;constructor({url:t,httpHeaders:e,withCredentials:i}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Xw(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,a=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[l,c]of this.headers)e.setRequestHeader(l,c);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),a.expectedStatus=mf):a.expectedStatus=gf,e.responseType="arraybuffer",It(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),a.onHeadersReceived=t.onHeadersReceived,a.onDone=t.onDone,a.onError=t.onError,a.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){const i=this.pendingRequests[t];i&&i.onProgress?.(e)}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const a=i.xhr;if(a.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),a.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],a.status===0&&this.isHttp){i.onError(a.status);return}const l=a.status||gf;if(!(l===gf&&i.expectedStatus===mf)&&l!==i.expectedStatus){i.onError(a.status);return}const h=pD(a);if(l===mf){const d=a.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);f?i.onDone({begin:parseInt(f[1],10),chunk:h}):(xt('Missing or invalid "Content-Range" header.'),i.onError(0))}else h?i.onDone({begin:0,chunk:h}):i.onError(a.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class mD{constructor(t){this._source=t,this._manager=new gD(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return It(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new yD(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new bD(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class yD{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Eu(e.responseURL);const i=e.getAllResponseHeaders(),a=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(h=>{const[d,...f]=h.split(": ");return[d,f.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:c}=Ww({responseHeaders:a,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Kw(a),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=gl(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class bD{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=Eu(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=gl(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const vD=/^[a-z][a-z0-9\-+.]+:/i;function wD(r){if(vD.test(r))return new URL(r);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(r))}class AD{constructor(t){this.source=t,this.url=wD(t.url),It(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return It(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new xD(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new SD(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}}class xD{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(a=>{this._contentLength=a.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},a=>{a.code==="ENOENT"&&(a=gl(0,this._url.href)),this._storedError=a,this._headersCapability.reject(a)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new qi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class SD{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const a=t.source;this._isStreamingSupported=!a.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const ko=Symbol("INITIAL_DATA");class tA{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:ko}}get(t,e=null){if(e){const a=this.#e(t);return a.promise.then(()=>e(a.data)),null}const i=this.#t[t];if(!i||i.data===ko)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=this.#t[t];return!!e&&e.data!==ko}delete(t){const e=this.#t[t];return!e||e.data===ko?!1:(delete this.#t[t],!0)}resolve(t,e=null){const i=this.#e(t);i.data=e,i.resolve()}clear(){for(const t in this.#t){const{data:e}=this.#t[t];e?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:e}=this.#t[t];e!==ko&&(yield[t,e])}}}const _D=1e5,Y0=30;class cn{#t=Promise.withResolvers();#e=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#r=null;#a=null;#s=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#E=new WeakMap;static#S=null;static#A=new Set;constructor({textContentSource:t,container:e,viewport:i}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(d){d.enqueue(t),d.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#l=e,this.#h=i.scale*qn.pixelRatio,this.#d=i.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:l,pageX:c,pageY:h}=i.rawDims;this.#y=[1,0,0,-1,-c,h+l],this.#o=a,this.#s=l,cn.#D(),e.style.setProperty("--min-font-size",cn.#S),Ms(e,i),this.#t.promise.finally(()=>{cn.#A.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ee.platform;return bt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:e,done:i})=>{if(i){this.#t.resolve();return}this.#r??=e.lang,Object.assign(this.#f,e.styles),this.#C(e.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),cn.#A.add(this),t(),this.#t.promise}update({viewport:t,onBefore:e=null}){const i=t.scale*qn.pixelRatio,a=t.rotation;if(a!==this.#d&&(e?.(),this.#d=a,Ms(this.#l,{rotation:a})),i!==this.#h){e?.(),this.#h=i;const l={div:null,properties:null,ctx:cn.#N(this.#r)};for(const c of this.#u)l.properties=this.#p.get(c),l.div=c,this.#_(l)}}cancel(){const t=new qi("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#C(t){if(this.#i)return;this.#a.ctx??=cn.#N(this.#r);const e=this.#u,i=this.#m;for(const a of t){if(e.length>_D){xt("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),a.id&&this.#e.setAttribute("id",`${a.id}`),l.append(this.#e)}else a.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}i.push(a.str),this.#w(a)}}#w(t){const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(e);const a=st.transform(this.#y,t.transform);let l=Math.atan2(a[1],a[0]);const c=this.#f[t.fontName];c.vertical&&(l+=Math.PI/2);let h=this.#n&&c.fontSubstitution||c.fontFamily;h=cn.fontFamilyMap.get(h)||h;const d=Math.hypot(a[2],a[3]),f=d*cn.#j(h,c,this.#r);let g,m;l===0?(g=a[4],m=a[5]-f):(g=a[4]+f*Math.sin(l),m=a[5]-f*Math.cos(l));const v=e.style;v.left=`${(100*g/this.#o).toFixed(2)}%`,v.top=`${(100*m/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${d.toFixed(2)}px`),v.fontFamily=h,i.fontSize=d,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,this.#n&&(e.dataset.fontName=c.fontSubstitutionLoadedName||t.fontName),l!==0&&(i.angle=l*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),x=Math.abs(t.transform[3]);_!==x&&Math.max(_,x)/Math.min(_,x)>1.5&&(w=!0)}if(w&&(i.canvasWidth=c.vertical?t.height:t.width),this.#p.set(e,i),this.#a.div=e,this.#a.properties=i,this.#_(this.#a),i.hasText&&this.#e.append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#e.append(_)}}#_(t){const{div:e,properties:i,ctx:a}=t,{style:l}=e;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=l,{canvasWidth:h,fontSize:d}=i;cn.#R(a,d*this.#h,c);const{width:f}=a.measureText(e.textContent);f>0&&l.setProperty("--scale-x",h*this.#h/f)}i.angle!==0&&l.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#A.size>0)){this.#v.clear();for(const{canvas:t}of this.#b.values())t.remove();this.#b.clear()}}static#N(t=null){let e=this.#b.get(t||="");if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(t,e),this.#E.set(e,{size:0,family:""})}return e}static#R(t,e,i){const a=this.#E.get(t);e===a.size&&i===a.family||(t.font=`${e}px ${i}`,a.size=e,a.family=i)}static#D(){if(this.#S!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#S=t.getBoundingClientRect().height,t.remove()}static#j(t,e,i){const a=this.#v.get(t);if(a)return a;const l=this.#N(i);l.canvas.width=l.canvas.height=Y0,this.#R(l,Y0,t);const c=l.measureText(""),h=c.fontBoundingBoxAscent,d=Math.abs(c.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let f=.8;return h?f=h/(h+d):(Ee.platform.isFirefox&&xt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?f=e.ascent:e.descent&&(f=1+e.descent)),this.#v.set(t,f),f}}const ED=100;function eA(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const t=new _p,{docId:e}=t,i=r.url?L2(r.url):null,a=r.data?O2(r.data):null,l=r.httpHeaders||null,c=r.withCredentials===!0,h=r.password??null,d=r.range instanceof Ep?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let g=r.worker instanceof Sr?r.worker:null;const m=r.verbosity,v=typeof r.docBaseUrl=="string"&&!dl(r.docBaseUrl)?r.docBaseUrl:null,w=jc(r.cMapUrl),_=r.cMapPacked!==!1,x=r.CMapReaderFactory||(Xe?z2:L0),S=jc(r.iccUrl),E=jc(r.standardFontDataUrl),T=r.StandardFontDataFactory||(Xe?H2:O0),R=jc(r.wasmUrl),k=r.WasmFactory||(Xe?G2:I0),L=r.stopAtErrors!==!0,P=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,j=r.isEvalSupported!==!1,X=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!Xe,K=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!Xe&&(Ee.platform.isFirefox||!globalThis.chrome),et=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Z=typeof r.disableFontFace=="boolean"?r.disableFontFace:Xe,ct=r.fontExtraProperties===!0,St=r.enableXfa===!0,q=r.ownerDocument||globalThis.document,ot=r.disableRange===!0,M=r.disableStream===!0,U=r.disableAutoFetch===!0,J=r.pdfBug===!0,vt=r.CanvasFactory||(Xe?F2:j2),yt=r.FilterFactory||(Xe?U2:B2),D=r.enableHWA===!0,V=r.useWasm!==!1,Q=d?d.length:r.length??NaN,it=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!Xe&&!Z,dt=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(x===L0&&T===O0&&k===I0&&w&&E&&R&&Po(w,document.baseURI)&&Po(E,document.baseURI)&&Po(R,document.baseURI)),gt=null;f2(m);const ft={canvasFactory:new vt({ownerDocument:q,enableHWA:D}),filterFactory:new yt({docId:e,ownerDocument:q}),cMapReaderFactory:dt?null:new x({baseUrl:w,isCompressed:_}),standardFontDataFactory:dt?null:new T({baseUrl:E}),wasmFactory:dt?null:new k({baseUrl:R})};g||(g=Sr.create({verbosity:m,port:ra.workerPort}),t._worker=g);const ie={docId:e,apiVersion:"5.4.530",data:a,password:h,disableAutoFetch:U,rangeChunkSize:f,length:Q,docBaseUrl:v,enableXfa:St,evaluatorOptions:{maxImageSize:P,disableFontFace:Z,ignoreErrors:L,isEvalSupported:j,isOffscreenCanvasSupported:X,isImageDecoderSupported:K,canvasMaxAreaInBytes:et,fontExtraProperties:ct,useSystemFonts:it,useWasm:V,useWorkerFetch:dt,cMapUrl:w,iccUrl:S,standardFontDataUrl:E,wasmUrl:R}},Pt={ownerDocument:q,pdfBug:J,styleElement:gt,loadingParams:{disableAutoFetch:U,enableXfa:St}};return g.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const $n=g.messageHandler.sendWithPromise("GetDocRequest",ie,a?[a.buffer]:null);let Bn;if(d)Bn=new oD(d,{disableRange:ot,disableStream:M});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const fi=Po(i)?hD:Xe?AD:mD;Bn=new fi({url:i,length:Q,httpHeaders:l,withCredentials:c,rangeChunkSize:f,disableRange:ot,disableStream:M})}return $n.then(fi=>{if(t.destroyed)throw new Error("Loading aborted");if(g.destroyed)throw new Error("Worker was destroyed");const ga=new jo(e,fi,g.port),Ve=new RD(ga,t,Bn,Pt,ft,D);t._transport=Ve,ga.send("Ready",null)})}).catch(t._capability.reject),t}class _p{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${_p.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Ep{#t=Promise.withResolvers();#e=[];#i=[];#n=[];#r=[];constructor(t,e,i=!1,a=null){this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#n.push(t)}addProgressiveReadListener(t){this.#i.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,e){for(const i of this.#r)i(t,e)}onDataProgress(t,e){this.#t.promise.then(()=>{for(const i of this.#n)i(t,e)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const e of this.#i)e(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,e){Qt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class TD{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(t){return this._transport.extractPages(t)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class CD{#t=!1;constructor(t,e,i,a=!1){this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=a?new T0:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new tA,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:l=!1}={}){return new hl({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:a,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return bt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:e=t.canvas,viewport:i,intent:a="display",annotationMode:l=Pi.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:d=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:m=null,isEditing:v=!1,recordOperations:w=!1,operationsFilter:_=null}){this._stats?.time("Overall");const x=this._transport.getRenderingIntent(a,l,m,v),{renderingIntent:S,cacheKey:E}=x;this.#t=!1,d||=this._transport.getOptionalContentConfig(S);let T=this._intentStates.get(E);T||(T=Object.create(null),this._intentStates.set(E,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const R=!!(S&vn.PRINT);T.displayReadyCapability||(T.displayReadyCapability=Promise.withResolvers(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(x));const k=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(w||k),P=K=>{if(T.renderTasks.delete(j),L){const et=j.gfx?.dependencyTracker.take();et&&(j.stepper&&j.stepper.setOperatorBBoxes(et,j.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=et))}R&&(this.#t=!0),this.#e(),K?(j.capability.reject(K),this._abortOperatorList({intentState:T,reason:K instanceof Error?K:new Error(K)})):j.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},j=new hr({callback:P,params:{canvas:e,canvasContext:t,dependencyTracker:L?new q2(e,T.operatorList.length,k):null,viewport:i,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:g,enableHWA:this._transport.enableHWA,operationsFilter:_});(T.renderTasks||=new Set).add(j);const X=j.task;return Promise.all([T.displayReadyCapability.promise,d]).then(([K,et])=>{if(this.destroyed){P();return}if(this._stats?.time("Rendering"),!(et.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");j.initializeGraphics({transparency:K,optionalContentConfig:et}),j.operatorListChanged()}).catch(P),X}getOperatorList({intent:t="display",annotationMode:e=Pi.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function l(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(d))}const c=this._transport.getRenderingIntent(t,e,i,a,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let d;return h.opListReadCapability||(d=Object.create(null),d.operatorListChanged=l,h.opListReadCapability=Promise.withResolvers(),(h.renderTasks||=new Set).add(d),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Qo.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,a){function l(){c.read().then(function({value:d,done:f}){if(f){i(h);return}h.lang??=d.lang,Object.assign(h.styles,d.styles),h.items.push(...d.items),l()},a)}const c=e.getReader(),h={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const e=this.#e();return t&&e&&(this._stats&&=new T0),e}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,e){const i=this._intentStates.get(e);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let i=0,a=t.length;i<a;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:a}){const{map:l,transfer:c}=i,d=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:l,modifiedIds:a},c).getReader(),f=this._intentStates.get(e);f.streamReader=d;const g=()=>{d.read().then(({value:m,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(m,f),g())},m=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#e()}if(f.displayReadyCapability)f.displayReadyCapability.reject(m);else if(f.opListReadCapability)f.opListReadCapability.reject(m);else throw m}})};g()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof Su){let a=ED;e.extraDelay>0&&e.extraDelay<1e3&&(a+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},a);return}}if(t.streamReader.cancel(new qi(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[a,l]of this._intentStates)if(l===t){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Ts,Hn,Ii,ia,pu,sa,aa,Ke,Jc,nA,iA,Bo,br,tu;const oe=class oe{constructor({name:t=null,port:e=null,verbosity:i=p2()}={}){Jn(this,Ke);Jn(this,Ts,Promise.withResolvers());Jn(this,Hn,null);Jn(this,Ii,null);Jn(this,ia,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(re(oe,aa).has(e))throw new Error("Cannot use more than one PDFWorker per port.");re(oe,aa).set(e,this),ti(this,Ke,nA).call(this,e)}else ti(this,Ke,iA).call(this)}get promise(){return re(this,Ts).promise}get port(){return re(this,Ii)}get messageHandler(){return re(this,Hn)}destroy(){this.destroyed=!0,re(this,ia)?.terminate(),an(this,ia,null),re(oe,aa).delete(re(this,Ii)),an(this,Ii,null),re(this,Hn)?.destroy(),an(this,Hn,null)}static create(t){const e=re(this,aa).get(t?.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new oe(t)}static get workerSrc(){if(ra.workerSrc)return ra.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return bt(this,"_setupFakeWorkerGlobal",(async()=>re(this,br,tu)?re(this,br,tu):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ts=new WeakMap,Hn=new WeakMap,Ii=new WeakMap,ia=new WeakMap,pu=new WeakMap,sa=new WeakMap,aa=new WeakMap,Ke=new WeakSet,Jc=function(){re(this,Ts).resolve(),re(this,Hn).send("configure",{verbosity:this.verbosity})},nA=function(t){an(this,Ii,t),an(this,Hn,new jo("main","worker",t)),re(this,Hn).on("ready",()=>{}),ti(this,Ke,Jc).call(this)},iA=function(){if(re(oe,sa)||re(oe,br,tu)){ti(this,Ke,Bo).call(this);return}let{workerSrc:t}=oe;try{oe._isSameOrigin(window.location,t)||(t=oe._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new jo("main","worker",e),a=()=>{l.abort(),i.destroy(),e.terminate(),this.destroyed?re(this,Ts).reject(new Error("Worker was destroyed")):ti(this,Ke,Bo).call(this)},l=new AbortController;e.addEventListener("error",()=>{re(this,ia)||a()},{signal:l.signal}),i.on("test",h=>{if(l.abort(),this.destroyed||!h){a();return}an(this,Hn,i),an(this,Ii,e),an(this,ia,e),ti(this,Ke,Jc).call(this)}),i.on("ready",h=>{if(l.abort(),this.destroyed){a();return}try{c()}catch{ti(this,Ke,Bo).call(this)}});const c=()=>{const h=new Uint8Array;i.send("test",h,[h.buffer])};c();return}catch{xu("The worker has been disabled.")}ti(this,Ke,Bo).call(this)},Bo=function(){re(oe,sa)||(xt("Setting up fake worker."),an(oe,sa,!0)),oe._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){re(this,Ts).reject(new Error("Worker was destroyed"));return}const e=new P2;an(this,Ii,e);const i=`fake${Sb(oe,pu)._++}`,a=new jo(i+"_worker",i,e);t.setup(a,e),an(this,Hn,new jo(i,i+"_worker",e)),ti(this,Ke,Jc).call(this)}).catch(t=>{re(this,Ts).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},br=new WeakSet,tu=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Jn(oe,br),Jn(oe,pu,0),Jn(oe,sa,!1),Jn(oe,aa,new WeakMap),Xe&&(an(oe,sa,!0),ra.workerSrc||="./pdf.worker.mjs"),oe._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!i?.origin||i.origin==="null")return!1;const a=new URL(e,i);return i.origin===a.origin},oe._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},oe.fromPort=t=>{if(S2("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return oe.create(t)};let Sr=oe;class RD{#t=new Map;#e=new Map;#i=new Map;#n=new Map;#r=null;constructor(t,e,i,a,l,c){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new tA,this.fontLoader=new N2({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#a(t,e=null){const i=this.#t.get(t);if(i)return i;const a=this.messageHandler.sendWithPromise(t,e);return this.#t.set(t,a),a}get annotationStorage(){return bt(this,"annotationStorage",new wp)}getRenderingIntent(t,e=Pi.ENABLE,i=null,a=!1,l=!1){let c=vn.DISPLAY,h=Of;switch(t){case"any":c=vn.ANY;break;case"display":break;case"print":c=vn.PRINT;break;default:xt(`getRenderingIntent - invalid intent: ${t}`)}const d=c&vn.PRINT&&i instanceof zw?i:this.annotationStorage;switch(e){case Pi.DISABLE:c+=vn.ANNOTATIONS_DISABLE;break;case Pi.ENABLE:break;case Pi.ENABLE_FORMS:c+=vn.ANNOTATIONS_FORMS;break;case Pi.ENABLE_STORAGE:c+=vn.ANNOTATIONS_STORAGE,h=d.serializable;break;default:xt(`getRenderingIntent - invalid annotationMode: ${e}`)}a&&(c+=vn.IS_EDITING),l&&(c+=vn.OPLIST);const{ids:f,hash:g}=d.modifiedIds,m=[c,h.hash,g];return{renderingIntent:c,cacheKey:m.join("_"),annotationStorageSerializable:h,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of this.#e.values())t.push(i._destroy());this.#e.clear(),this.#i.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),cn.cleanup(),this._networkStream?.cancelAllRequests(new qi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,a)=>{It(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},a.onPull=()=>{this._fullReader.read().then(function({value:l,done:c}){if(c){a.close();return}It(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{a.error(l)})},a.onCancel=l=>{this._fullReader.cancel(l),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),t.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:a,isRangeSupported:l,contentLength:c}=this._fullReader;return(!a||!l)&&(this._lastProgress&&e.onProgress?.(this._lastProgress),this._fullReader.onProgress=h=>{e.onProgress?.({loaded:h.loaded,total:h.total})}),{isStreamingSupported:a,isRangeSupported:l,contentLength:c}}),t.on("GetRangeReader",(i,a)=>{It(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(i.begin,i.end);if(!l){a.close();return}a.onPull=()=>{l.read().then(function({value:c,done:h}){if(h){a.close();return}It(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{l.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new TD(i,this))}),t.on("DocException",i=>{e._capability.reject(on(i))}),t.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!e.onPassword)throw on(i);const a=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};e.onPassword(a,i.code)}catch(a){this.#r.reject(a)}return this.#r.promise}),t.on("DataLoaded",i=>{e.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;this.#e.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,a,l])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in l){const m=l.error;xt(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const c=new Xt(l),h=this._params.pdfBug&&globalThis.FontInspector?.enabled?(m,v)=>globalThis.FontInspector.fontAdded(m,v):null,d=new k2(c,h,l.extra,l.charProcOperatorList);this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=l;It(f,"The imageRef must be defined.");for(const m of this.#e.values())for(const[,v]of m.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new M2(l));break;case"Image":this.commonObjs.resolve(i,l);break;case"Pattern":const g=new ke(l);this.commonObjs.resolve(i,g.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),t.on("obj",([i,a,l,c])=>{if(this.destroyed)return;const h=this.#e.get(a);if(!h.objs.has(i)){if(h._intentStates.size===0){c?.bitmap?.close();return}switch(l){case"Image":case"Pattern":h.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",i=>{this.destroyed||e.onProgress?.({loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&xt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally(()=>{this.annotationStorage.resetModified()})}extractPages(t){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:t})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=this.#i.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#n.set(l.refStr,t);const c=new CD(e,l,this,this._params.pdfBug);return this.#e.set(e,c),c});return this.#i.set(e,a),a}getPageIndex(t){return If(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#a("GetOptionalContentConfig").then(e=>new rD(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#t.get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(a=>({info:a[0],metadata:a[1]?new sD(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#e.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),cn.cleanup()}}cachedPageNumber(t){if(!If(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#n.get(e)??null}}class DD{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#t;return t.form||t.canvas&&e?.size>0}}class hr{#t=null;static#e=new WeakSet;constructor({callback:t,params:e,objs:i,commonObjs:a,annotationCanvasMap:l,operatorList:c,pageIndex:h,canvasFactory:d,filterFactory:f,useRequestAnimationFrame:g=!1,pdfBug:m=!1,pageColors:v=null,enableHWA:w=!1,operationsFilter:_=null}){this.callback=t,this.params=e,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=h,this.canvasFactory=d,this.filterFactory=f,this._pdfBug=m,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=g===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new DD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=w,this._dependencyTracker=e.dependencyTracker,this._operationsFilter=_}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(hr.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");hr.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:l,dependencyTracker:c}=this.params,h=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new yr(h,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),hr.#e.delete(this._canvas),t||=new Su(`Rendering cancelled, page ${this._pageIndex+1}`,e),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),hr.#e.delete(this._canvas),this.callback())))}}const sA="5.4.530",aA="50cc4adac";class wn{#t=null;#e=null;#i;#n=null;#r=!1;#a=!1;#s=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return bt(this,"_keyboardManager",new fl([[["Escape","mac+Escape"],wn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],wn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],wn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],wn.prototype._moveToPrevious],[["Home","mac+Home"],wn.prototype._moveToBeginning],[["End","mac+End"],wn.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:e=null}){t?(this.#a=!1,this.#s=t):this.#a=!0,this.#l=t?._uiManager||e,this.#o=this.#l._eventBus,this.#i=t?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",wn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#s&&(t.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const e=this.#l._signal;t.addEventListener("click",this.#g.bind(this),{signal:e}),t.addEventListener("keydown",this.#m.bind(this),{signal:e});const i=this.#e=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,t.append(i),t}renderMainDropdown(){const t=this.#n=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),e=this.#l._signal;t.addEventListener("contextmenu",xn,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(t.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",a),l.title=i,l.setAttribute("data-l10n-id",wn.#d[i]);const c=document.createElement("span");l.append(c),c.className="swatch",c.style.backgroundColor=a,l.ariaSelected=a===this.#i,l.addEventListener("click",this.#f.bind(this,a),{signal:e}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:e}),t}#f(t,e){e.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Mt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const e=t.target.getAttribute("data-color");e&&this.#f(e,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#n.firstElementChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#n?.firstElementChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#n.firstElementChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#n.lastElementChild?.focus()}#m(t){wn._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const e=this.#n=this.#h();this.#t.append(e)}#u(t){this.#n?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#n)return;const e=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#n?.remove(),this.#n=null}}class Zo{#t=null;#e=null;#i=null;static#n=null;constructor(t){this.#e=t,this.#i=t._uiManager,Zo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:e,color:i}=this.#e,a=this.#t=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Zo.#n[t]),a.addEventListener("input",()=>{this.#i.updateParams(e,a.value)},{signal:this.#i._signal}),a}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function X0(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function Mo(r){return Math.max(0,Math.min(255,255*r))}class W0{static CMYK_G([t,e,i,a]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+a)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Mo(t),[t,t,t]}static G_HTML([t]){const e=X0(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(Mo)}static RGB_HTML(t){return`#${t.map(X0).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,a]){return["RGB",1-Math.min(1,t+a),1-Math.min(1,i+a),1-Math.min(1,e+a)]}static CMYK_rgb([t,e,i,a]){return[Mo(1-Math.min(1,t+a)),Mo(1-Math.min(1,i+a)),Mo(1-Math.min(1,e+a))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const a=1-t,l=1-e,c=1-i,h=Math.min(a,l,c);return["CMYK",a,l,c,h]}}class ND{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${t}px`),a.setAttribute("height",`${e}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${t} ${e}`),a}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Qt("Abstract method `_createSVG` called.")}}class Jo extends ND{_createSVG(t){return document.createElementNS(Oi,t)}}const kD=9,ca=new WeakSet,MD=new Date().getTimezoneOffset()*60*1e3;class yf{static create(t){switch(t.data.annotationType){case ye.LINK:return new Tp(t);case ye.TEXT:return new OD(t);case ye.WIDGET:switch(t.data.fieldType){case"Tx":return new ID(t);case"Btn":return t.data.radioButton?new rA(t):t.data.checkBox?new jD(t):new BD(t);case"Ch":return new UD(t);case"Sig":return new PD(t)}return new pa(t);case ye.POPUP:return new Bf(t);case ye.FREETEXT:return new oA(t);case ye.LINE:return new zD(t);case ye.SQUARE:return new HD(t);case ye.CIRCLE:return new GD(t);case ye.POLYLINE:return new lA(t);case ye.CARET:return new qD(t);case ye.INK:return new Cp(t);case ye.POLYGON:return new VD(t);case ye.HIGHLIGHT:return new cA(t);case ye.UNDERLINE:return new $D(t);case ye.SQUIGGLY:return new YD(t);case ye.STRIKEOUT:return new XD(t);case ye.STAMP:return new uA(t);case ye.FILEATTACHMENT:return new WD(t);default:return new de(t)}}}class de{#t=null;#e=!1;#i=null;constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,this.hasOwnCommentButton=!1,e&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t?.str||e?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return de._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,e=this.annotationStorage?.getEditor(t.id);return e?e.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:e,inkLists:i,rect:a}=this.data;let l=-1/0,c=-1/0;if(e?.length>=8){for(let h=0;h<e.length;h+=8)e[h+1]>c?(c=e[h+1],l=e[h+2]):e[h+1]===c&&(l=Math.max(l,e[h+2]));return[l,c]}if(i?.length>=1){for(const h of i)for(let d=0,f=h.length;d<f;d+=2)h[d+1]>c?(c=h[d+1],l=h[d]):h[d+1]===c&&(l=Math.max(l,h[d]));if(l!==1/0)return[l,c]}return a?[a[2],a[3]]:null}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:l,pageY:c}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-l)/i,t[1]=100*(t[1]-c)/a,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${Wo}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:e}=this,i={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(e.id,{popup:i})||this.annotationStorage.setValue(`${Wo}${e.id}`,{id:e.id,annotationType:e.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:e.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:e,popup:i}=t;e&&this.#n(e);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(t),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#t&&(this.#n(this.#t.rect),this.#i?.popup.resetEdited(),this.#t=null)}#n(t){const{container:{style:e},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:c,pageX:h,pageY:d}}}}=this;i?.splice(0,4,...t),e.left=`${100*(t[0]-h)/l}%`,e.top=`${100*(c-t[3]+d)/c}%`,a===0?(e.width=`${100*(t[2]-t[0])/l}%`,e.height=`${100*(t[3]-t[1])/c}%`):this.setRotation(a)}_createContainer(t){const{data:e,parent:{page:i,viewport:a}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",e.id),!(this instanceof pa)&&!(this instanceof Tp)&&(l.tabIndex=0);const{style:c}=l;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(l.title=e.alternativeText),e.noRotate&&l.classList.add("norotate"),!e.rect||this instanceof Bf){const{rotation:x}=e;return!e.hasOwnCanvas&&x!==0&&this.setRotation(x,l),l}const{width:h,height:d}=this;if(!t&&e.borderStyle.width>0){c.borderWidth=`${e.borderStyle.width}px`;const x=e.borderStyle.horizontalCornerRadius,S=e.borderStyle.verticalCornerRadius;if(x>0||S>0){const T=`calc(${x}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=T}else if(this instanceof rA){const T=`calc(${h}px * var(--total-scale-factor)) / calc(${d}px * var(--total-scale-factor))`;c.borderRadius=T}switch(e.borderStyle.style){case or.SOLID:c.borderStyle="solid";break;case or.DASHED:c.borderStyle="dashed";break;case or.BEVELED:xt("Unimplemented border style: beveled");break;case or.INSET:xt("Unimplemented border style: inset");break;case or.UNDERLINE:c.borderBottomStyle="solid";break}const E=e.borderColor||null;E?(this.#e=!0,c.borderColor=st.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):c.borderWidth=0}const f=st.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:g,pageHeight:m,pageX:v,pageY:w}=a.rawDims;c.left=`${100*(f[0]-v)/g}%`,c.top=`${100*(f[1]-w)/m}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(c.width=`${100*h/g}%`,c.height=`${100*d/m}%`):this.setRotation(_,l),l}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:l,height:c}=this;t%180!==0&&([l,c]=[c,l]),e.style.width=`${100*l/i}%`,e.style.height=`${100*c/a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,a)=>{const l=a.detail[e],c=l[0],h=l.slice(1);a.target.style[i]=W0[`${c}_HTML`](h),this.annotationStorage.setValue(this.data.id,{[i]:W0[`${c}_rgb`](h)})};return bt(this,"_commonActions",{display:e=>{const{display:i}=e.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const a of Object.keys(e.detail))(t[a]||i[a])?.(e)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[a,l]of Object.entries(e)){const c=i[a];if(c){const h={detail:{[a]:l},target:t};c(h),delete e[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,a,l]=this.data.rect.map(x=>Math.fround(x));if(t.length===8){const[x,S,E,T]=t.subarray(2,6);if(a===x&&l===S&&e===E&&i===T)return}const{style:c}=this.container;let h;if(this.#e){const{borderColor:x,borderWidth:S}=c;c.borderWidth=0,h=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${x}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const d=a-e,f=l-i,{svgFactory:g}=this,m=g.createElement("svg");m.classList.add("quadrilateralsContainer"),m.setAttribute("width",0),m.setAttribute("height",0),m.role="none";const v=g.createElement("defs");m.append(v);const w=g.createElement("clipPath"),_=`clippath_${this.data.id}`;w.setAttribute("id",_),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let x=2,S=t.length;x<S;x+=8){const E=t[x],T=t[x+1],R=t[x+2],k=t[x+3],L=g.createElement("rect"),P=(R-e)/d,j=(l-T)/f,X=(E-R)/d,K=(T-k)/f;L.setAttribute("x",P),L.setAttribute("y",j),L.setAttribute("width",X),L.setAttribute("height",K),w.append(L),h?.push(`<rect vector-effect="non-scaling-stroke" x="${P}" y="${j}" width="${X}" height="${K}"/>`)}this.#e&&(h.push("</g></svg>')"),c.backgroundImage=h.join("")),this.container.append(m),this.container.style.clipPath=`url(#${_})`}_createPopup(t=null){const{data:e}=this;let i,a;t?(i={str:t.text},a=t.date):(i=e.contentsObj,a=e.modificationDate),this.#i=new Bf({data:{color:e.color,titleObj:e.titleObj,modificationDate:a,contentsObj:i,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){Qt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[t];if(a)for(const{page:l,id:c,exportValues:h}of a){if(l===-1||c===e)continue;const d=typeof h=="string"?h:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!ca.has(f)){xt(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:d,domElement:f})}return i}for(const a of document.getElementsByName(t)){const{exportValue:l}=a,c=a.getAttribute("data-element-id");c!==e&&ca.has(a)&&i.push({id:c,exportValue:l,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class LD extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&this._createPopup(t.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class Tp extends de{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let a=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(i,t.action,t.overlaidText),a=!0):t.attachment?(this.#e(i,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(this.#i(i,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(i,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),a=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e,i=""){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||e==="")&&this.#t(),i&&(t.title=i)}_bindNamedAction(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),i&&(t.title=i),this.#t()}#e(t,e,i="",a=null){t.href=this.linkService.getAnchorUrl(""),e.description?t.title=e.description:i&&(t.title=i),t.onclick=()=>(this.downloadManager?.openOrDownloadData(e.content,e.filename,a),!1),this.#t()}#i(t,e,i=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),i&&(t.title=i),this.#t()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(e.actions)){const l=i.get(a);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:a}}),!1))}e.overlaidText&&(t.title=e.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,e){const i=t.onclick;if(i||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){xt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1);return}t.onclick=()=>{i?.();const{fields:a,refs:l,include:c}=e,h=[];if(a.length!==0||l.length!==0){const g=new Set(l);for(const m of a){const v=this._fieldObjects[m]||[];for(const{id:w}of v)g.add(w)}for(const m of Object.values(this._fieldObjects))for(const v of m)g.has(v.id)===c&&h.push(v)}else for(const g of Object.values(this._fieldObjects))h.push(...g);const d=this.annotationStorage,f=[];for(const g of h){const{id:m}=g;switch(f.push(m),g.type){case"text":{const w=g.defaultValue||"";d.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=g.defaultValue===g.exportValues;d.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=g.defaultValue||"";d.setValue(m,{value:w});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!ca.has(v)){xt(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class OD extends de{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(t),this.container}}class pa extends de{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ee.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,a,l){i.includes("mouse")?t.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):t.addEventListener(i,c=>{if(i==="blur"){if(!e.focused||!c.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:l(c)}})})}_setEventListeners(t,e,i,a){for(const[l,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(e||={focused:!1}),this._setEventListener(t,e,l,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,e,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":st.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||kD,l=t.style;let c;const h=2,d=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h),g=Math.round(f/(cf*a))||1,m=f/g;c=Math.min(a,d(m/cf))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-h);c=Math.min(a,d(f/cf))}l.fontSize=`calc(${c}px * var(--total-scale-factor))`,l.color=st.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(l.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class ID extends pa{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,a){const l=this.annotationStorage;for(const c of this._getElementsByName(t.name,t.id))c.domElement&&(c.domElement[e]=i),l.setValue(c.id,{[a]:i})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let l=a.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=a.formattedValue||this.data.textContent?.join(`
`)||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const d={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=h??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",h??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ca.add(i),this.contentElement=i,i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:g,timeStep:m}=this.data,v=!!g&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",_=>{t.setValue(e,{value:_.target.value}),this.setPropertyOnSiblings(i,"value",_.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",_=>{const x=this.data.defaultFieldValue??"";i.value=d.userValue=x,d.formattedValue=null});let w=_=>{const{formattedValue:x}=d;x!=null&&(_.target.value=x),_.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",x=>{if(d.focused)return;const{target:S}=x;if(v&&(S.type=g,m&&(S.step=m)),d.userValue){const E=d.userValue;if(v)if(g==="time"){const T=new Date(E),R=[T.getHours(),T.getMinutes(),T.getSeconds()];S.value=R.map(k=>k.toString().padStart(2,"0")).join(":")}else S.value=new Date(E-MD).toISOString().split(g==="date"?"T":".",1)[0];else S.value=E}d.lastCommittedValue=S.value,d.commitKey=1,this.data.actions?.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",x=>{this.showElementAndHideCanvas(x.target);const S={value(E){d.userValue=E.detail.value??"",v||t.setValue(e,{value:d.userValue.toString()}),E.target.value=d.userValue},formattedValue(E){const{formattedValue:T}=E.detail;d.formattedValue=T,T!=null&&E.target!==document.activeElement&&(E.target.value=T);const R={formattedValue:T};v&&(R.value=T),t.setValue(e,R)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:T}=E.detail,{target:R}=E;if(T===0){R.removeAttribute("maxLength");return}R.setAttribute("maxLength",T);let k=d.userValue;!k||k.length<=T||(k=k.slice(0,T),R.value=d.userValue=k,t.setValue(e,{value:k}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:R.selectionStart,selEnd:R.selectionEnd}}))}};this._dispatchEventFromSandbox(S,x)}),i.addEventListener("keydown",x=>{d.commitKey=1;let S=-1;if(x.key==="Escape"?S=0:x.key==="Enter"&&!this.data.multiLine?S=2:x.key==="Tab"&&(d.commitKey=3),S===-1)return;const{value:E}=x.target;d.lastCommittedValue!==E&&(d.lastCommittedValue=E,d.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:S,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}))});const _=w;w=null,i.addEventListener("blur",x=>{if(!d.focused||!x.relatedTarget)return;this.data.actions?.Blur||(d.focused=!1);const{target:S}=x;let{value:E}=S;if(v){if(E&&g==="time"){const T=E.split(":").map(R=>parseInt(R,10));E=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),S.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();S.type="text"}d.userValue=E,d.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,willCommit:!0,commitKey:d.commitKey,selStart:x.target.selectionStart,selEnd:x.target.selectionEnd}}),_(x)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",x=>{d.lastCommittedValue=null;const{data:S,target:E}=x,{value:T,selectionStart:R,selectionEnd:k}=E;let L=R,P=k;switch(x.inputType){case"deleteWordBackward":{const j=T.substring(0,R).match(/\w*[^\w]*$/);j&&(L-=j[0].length);break}case"deleteWordForward":{const j=T.substring(R).match(/^[^\w]*\w*/);j&&(P+=j[0].length);break}case"deleteContentBackward":R===k&&(L-=1);break;case"deleteContentForward":R===k&&(P+=1);break}x.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:S||"",willCommit:!1,selStart:L,selEnd:P}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.value)}if(w&&i.addEventListener("blur",w),this.data.comb){const x=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${x}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class PD extends pa{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class jD extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",t.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return ca.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.setAttribute("exportValue",e.exportValue),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i)){const g=d&&f.exportValue===e.exportValue;f.domElement&&(f.domElement.checked=g),t.setValue(f.id,{value:g})}t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue||"Off";c.target.checked=h===e.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",c=>{const h={value(d){d.target.checked=d.detail.value!=="Off",t.setValue(i,{value:d.target.checked})}};this._dispatchEventFromSandbox(h,c)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class rA extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let a=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof a=="string"&&(a=a!==e.buttonValue,t.setValue(i,{value:a})),a)for(const c of this._getElementsByName(e.fieldName,i))t.setValue(c.id,{value:!1});const l=document.createElement("input");if(ca.add(l),l.setAttribute("data-element-id",i),l.disabled=e.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=e.fieldName,a&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",c=>{const{name:h,checked:d}=c.target;for(const f of this._getElementsByName(h,i))t.setValue(f.id,{value:!1});t.setValue(i,{value:d})}),l.addEventListener("resetform",c=>{const h=e.defaultFieldValue;c.target.checked=h!=null&&h===e.buttonValue}),this.enableScripting&&this.hasJSActions){const c=e.buttonValue;l.addEventListener("updatefromsandbox",h=>{const d={value:f=>{const g=c===f.detail.value;for(const m of this._getElementsByName(f.target.name)){const v=g&&m.id===i;m.domElement&&(m.domElement.checked=v),t.setValue(m.id,{value:v})}}};this._dispatchEventFromSandbox(d,h)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class BD extends Tp{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class UD extends pa{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),a=document.createElement("select");ca.add(a),a.setAttribute("data-element-id",e),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",g=>{const m=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===m});for(const g of this.data.options){const m=document.createElement("option");m.textContent=g.displayValue,m.value=g.exportValue,i.value.includes(g.exportValue)&&(m.setAttribute("selected",!0),l=!1),a.append(m)}let c=null;if(l){const g=document.createElement("option");g.value=" ",g.setAttribute("hidden",!0),g.setAttribute("selected",!0),a.prepend(g),c=()=>{g.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const h=g=>{const m=g?"value":"textContent",{options:v,multiple:w}=a;return w?Array.prototype.filter.call(v,_=>_.selected).map(_=>_[m]):v.selectedIndex===-1?null:v[v.selectedIndex][m]};let d=h(!1);const f=g=>{const m=g.target.options;return Array.prototype.map.call(m,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",g=>{const m={value(v){c?.();const w=v.detail.value,_=new Set(Array.isArray(w)?w:[w]);for(const x of a.options)x.selected=_.has(x.value);t.setValue(e,{value:h(!0)}),d=h(!1)},multipleSelection(v){a.multiple=!0},remove(v){const w=a.options,_=v.detail.remove;w[_].selected=!1,a.remove(_),w.length>0&&Array.prototype.findIndex.call(w,S=>S.selected)===-1&&(w[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},clear(v){for(;a.length!==0;)a.remove(0);t.setValue(e,{value:null,items:[]}),d=h(!1)},insert(v){const{index:w,displayValue:_,exportValue:x}=v.detail.insert,S=a.children[w],E=document.createElement("option");E.textContent=_,E.value=x,S?S.before(E):a.append(E),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},items(v){const{items:w}=v.detail;for(;a.length!==0;)a.remove(0);for(const _ of w){const{displayValue:x,exportValue:S}=_,E=document.createElement("option");E.textContent=x,E.value=S,a.append(E)}a.options.length>0&&(a.options[0].selected=!0),t.setValue(e,{value:h(!0),items:f(v)}),d=h(!1)},indices(v){const w=new Set(v.detail.indices);for(const _ of v.target.options)_.selected=w.has(_.index);t.setValue(e,{value:h(!0)}),d=h(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(m,g)}),a.addEventListener("input",g=>{const m=h(!0),v=h(!1);t.setValue(e,{value:m}),g.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:d,change:v,changeEx:m,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],g=>g.target.value)):a.addEventListener("input",function(g){t.setValue(e,{value:h(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Bf extends de{constructor(t){const{data:e,elements:i,parent:a}=t,l=!!a._commentManager;if(super(t,{isRenderable:!l&&de._hasPopupData(e)}),this.elements=i,l&&de._hasPopupData(e)){const c=this.popup=this.#t();for(const h of i)h.popup=c}else this.popup=null}#t(){return new FD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=this.#t(),i=[];for(const a of this.elements)a.popup=e,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${cr}${a}`).join(",")),this.container}}class FD{#t=null;#e=this.#V.bind(this);#i=this.#U.bind(this);#n=this.#L.bind(this);#r=this.#x.bind(this);#a=null;#s=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#y=null;#v=null;#b=null;#E=null;#S=null;#A=null;#C=!1;#w=null;#_=null;constructor({container:t,color:e,elements:i,titleObj:a,modificationDate:l,contentsObj:c,richText:h,parent:d,rect:f,parentRect:g,open:m,commentManager:v=null}){this.#s=t,this.#S=a,this.#o=c,this.#E=h,this.#d=d,this.#a=e,this.#b=f,this.#h=g,this.#l=i,this.#t=v,this.#w=i[0],this.#c=hu.toDateObject(l),this.trigger=i.flatMap(w=>w.getElementsToTriggerPopup()),v||(this.#N(),this.#s.hidden=!0,m&&this.#x())}#N(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const e of this.trigger)e.addEventListener("click",this.#r,{signal:t}),e.addEventListener("pointerenter",this.#n,{signal:t}),e.addEventListener("pointerleave",this.#i,{signal:t}),e.classList.add("popupTriggerArea");for(const e of this.#l)e.container?.addEventListener("keydown",this.#e,{signal:t})}#R(){const t=this.#l.find(e=>e.hasCommentButton);t&&(this.#y=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#w.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:t}=this.#g=new AbortController,e=this.#w.hasOwnCommentButton,i=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!e)},a=()=>{this.#t.toggleCommentPopup(this,!1,!0,!e)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(e){this.#p=this.#w.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const h=this.#w.container;c.style.zIndex=h.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#D(),c.addEventListener("keydown",this.#e,{signal:t}),c.addEventListener("click",i,{signal:t}),c.addEventListener("pointerenter",a,{signal:t}),c.addEventListener("pointerleave",l,{signal:t}),h.after(c)}}#D(){if(this.#w.extraPopupElement&&!this.#w.editor)return;this.#p||this.renderCommentButton();const[t,e]=this.#y,{style:i}=this.#p;i.left=`calc(${t}%)`,i.top=`calc(${e}% - var(--comment-button-dim))`}#j(){this.#w.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:e}=this.#w.commentData;return t?this.#d._commentManager.makeCommentColor(t,e):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}=this.#w.commentData;return{contentsObj:{str:this.comment},richText:t,color:e,opacity:i,creationDate:a,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#w.commentText,this.#_}set comment(t){t!==this.comment&&(this.#w.commentText=this.#_=t)}focus(){this.#w.container?.focus()}get parentBoundingClientRect(){return this.#w.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:e}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=e)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:e,height:i}=this.#p.getBoundingClientRect(),{x:a,y:l,width:c,height:h}=this.#w.layer.getBoundingClientRect();return[(t-a)/c,(e+i-l)/h]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[e,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:l,y:c,width:h,height:d}=a;this.#t.showDialog(null,this,l+e*h,c+i*d,{...t,parentDimensions:a})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#a){const i=t.style.outlineColor=st.makeHexColor(...this.#a);t.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const e=document.createElement("span");if(e.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",e.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(t.append(e),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),e.append(i)}yp({html:this.#M||this.#o.str,dir:this.#o?.dir,className:"popupContent"},t),this.#s.append(t)}get#M(){const t=this.#E,e=this.#o;return t?.str&&(!e?.str||e.str===t.str)&&this.#E.html||null}get#O(){return this.#M?.attributes?.style?.fontSize||0}get#B(){return this.#M?.attributes?.style?.color||null}#I(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},a={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))e.push({name:"span",value:l,attributes:a});return i}#V(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#x()}updateEdited({rect:t,popup:e,deleted:i}){if(this.#t){i?(this.remove(),this.#_=null):e&&(e.deleted?this.remove():(this.#j(),this.#_=e.text)),t&&(this.#y=null,this.#R(),this.#D());return}if(i||e?.deleted){this.remove();return}this.#N(),this.#A||={contentsObj:this.#o,richText:this.#E},t&&(this.#u=null),e&&e.text&&(this.#E=this.#I(e.text),this.#c=hu.toDateObject(e.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#A&&({contentsObj:this.#o,richText:this.#E}=this.#A,this.#A=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:a,pageY:l}}}=this.#d;let c=!!this.#h,h=c?this.#h:this.#b;for(const _ of this.#l)if(!h||st.intersect(_.data.rect,h)!==null){h=_.data.rect,c=!0;break}const d=st.normalizeRect([h[0],t[3]-h[1]+t[1],h[2],t[3]-h[3]+t[1]]),g=c?h[2]-h[0]+5:0,m=d[0]+g,v=d[1];this.#u=[100*(m-a)/e,100*(v-l)/i];const{style:w}=this.#s;w.left=`${this.#u[0]}%`,w.top=`${this.#u[1]}%`}#x(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#r),this.#s.addEventListener("keydown",this.#e)):(this.#U(),this.#s.removeEventListener("click",this.#r),this.#s.removeEventListener("keydown",this.#e))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#t||(this.#N(),this.#C&&(this.#m||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#t?!1:this.#s.hidden===!1}}class oA extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=At.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=this.contentElement=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class zD extends de{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class HD extends de{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",l/2),c.setAttribute("y",l/2),c.setAttribute("width",e-l),c.setAttribute("height",i-l),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class GD extends de{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:e,height:i}=this,a=this.svgFactory.create(e,i,!0),l=t.borderStyle.width,c=this.#t=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",e/2),c.setAttribute("cy",i/2),c.setAttribute("rx",e/2-l/2),c.setAttribute("ry",i/2-l/2),c.setAttribute("stroke-width",l||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class lA extends de{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:e,borderStyle:i,popupRef:a},width:l,height:c}=this;if(!e)return this.container;const h=this.svgFactory.create(l,c,!0);let d=[];for(let g=0,m=e.length;g<m;g+=2){const v=e[g]-t[0],w=t[3]-e[g+1];d.push(`${v},${w}`)}d=d.join(" ");const f=this.#t=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",d),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),h.append(f),this.container.append(h),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class VD extends lA{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qD extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Cp extends de{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?At.HIGHLIGHT:At.INK}#i(t,e){switch(t){case 90:return{transform:`rotate(90) translate(${-e[0]},${e[1]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};case 180:return{transform:`rotate(180) translate(${-e[2]},${e[1]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]};case 270:return{transform:`rotate(270) translate(${-e[2]},${e[3]}) scale(1,-1)`,width:e[3]-e[1],height:e[2]-e[0]};default:return{transform:`translate(${-e[0]},${e[3]}) scale(1,-1)`,width:e[2]-e[0],height:e[3]-e[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:e,inkLists:i,borderStyle:a,popupRef:l}}=this,{transform:c,width:h,height:d}=this.#i(e,t),f=this.svgFactory.create(h,d,!0),g=this.#t=this.svgFactory.createElement("svg:g");f.append(g),g.setAttribute("stroke-width",a.width||1),g.setAttribute("stroke-linecap","round"),g.setAttribute("stroke-linejoin","round"),g.setAttribute("stroke-miterlimit",10),g.setAttribute("stroke","transparent"),g.setAttribute("fill","transparent"),g.setAttribute("transform",c);for(let m=0,v=i.length;m<v;m++){const w=this.svgFactory.createElement(this.svgElementName);this.#e.push(w),w.setAttribute("points",i[m].join(",")),g.append(w)}return!l&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:e,points:i,rect:a}=t,l=this.#t;if(e>=0&&l.setAttribute("stroke-width",e||1),i)for(let c=0,h=this.#e.length;c<h;c++)this.#e[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:h,height:d}=this.#i(this.data.rotation,a);l.parentElement.setAttribute("viewBox",`0 0 ${h} ${d}`),l.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class cA extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=At.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class $D extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class YD extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class XD extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class uA extends de{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=At.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class WD extends de{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:e}=this.data;this.filename=e.filename,this.content=e.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...e})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let i;e.hasAppearance||e.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(e.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#e.bind(this)),this.#t=i;const{isMac:a}=Ee.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(a?l.metaKey:l.ctrlKey)&&this.#e()}),!e.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),t.append(i),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Tu{#t=null;#e=null;#i=null;#n=new Map;#r=null;#a=null;#s=[];#o=!1;constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:a,page:l,viewport:c,structTreeLayer:h,commentManager:d,linkService:f,annotationStorage:g}){this.div=t,this.#t=e,this.#e=i,this.#r=h||null,this.#a=f||null,this.#i=g||new wp,this.page=l,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=d||null}hasEditableAnnotations(){return this.#n.size>0}async render(t){const{annotations:e}=t,i=this.div;Ms(i,this.viewport);const a=new Map,l=[],c={data:null,layer:i,linkService:this.#a,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Jo,annotationStorage:this.#i,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const h of e){if(h.noHTML)continue;const d=h.annotationType===ye.POPUP;if(d){const m=a.get(h.id);if(!m)continue;if(!this._commentManager){l.push(h);continue}c.elements=m}else if(h.rect[2]===h.rect[0]||h.rect[3]===h.rect[1])continue;c.data=h;const f=yf.create(c);if(!f.isRenderable)continue;if(!d&&(this.#s.push(f),h.popupRef)){const m=a.get(h.popupRef);m?m.push(f):a.set(h.popupRef,[f])}const g=f.render();h.hidden&&(g.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const h of l){const d=c.elements=a.get(h.id);c.data=h;const f=yf.create(c);if(!f.isRenderable)continue;const g=f.render();f.contentElement.id=`${cr}${h.id}`,h.hidden&&(g.style.visibility="hidden"),d.at(-1).container.after(g)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const t=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#s){const l=i.id=`${cr}${a}`;t.push(this.#r?.getAriaAttributes(l).then(c=>{if(c)for(const[h,d]of c)i.setAttribute(h,d)}))}}this.#s.sort(({data:{rect:[i,a,l,c]}},{data:{rect:[h,d,f,g]}})=>{if(i===l&&a===c)return 1;if(h===f&&d===g)return-1;const m=c,v=a,w=(a+c)/2,_=g,x=d,S=(d+g)/2;if(w>=_&&S<=v)return-1;if(S>=m&&w<=x)return 1;const E=(i+l)/2,T=(h+f)/2;return E-T});const e=document.createDocumentFragment();for(const i of this.#s)e.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&e.append(i.extraPopupElement.render());if(this.div.append(e),await Promise.all(t),this.#t)for(const i of this.#s)this.#t.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(t){const e={data:null,layer:this.div,linkService:this.#a,svgFactory:new Jo,parent:this};for(const i of t){i.borderStyle||=Tu._defaultBorderStyle,e.data=i;const a=yf.create(e);a.isRenderable&&(a.render(),a.contentElement.id=`${cr}${i.id}`,this.#s.push(a))}await this.#c()}update({viewport:t}){const e=this.div;this.viewport=t,Ms(e,{rotation:t.rotation}),this.#l(),e.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[e,i]of this.#e){const a=t.querySelector(`[data-annotation-id="${e}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:l}=a;l?l.nodeName==="CANVAS"?l.replaceWith(i):l.classList.contains("annotationContent")?l.after(i):l.before(i):a.append(i);const c=this.#n.get(e);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(e,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(t){return this.#n.get(t)}addFakeAnnotation(t){const{div:e}=this,{id:i,rotation:a}=t,l=new LD({data:{id:i,rect:t.getPDFRect(),rotation:a},editor:t,layer:e,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return l.render(),l.contentElement.id=`${cr}${i}`,l.createOrUpdatePopup(),this.#s.push(l),l}removeAnnotation(t){const e=this.#s.findIndex(a=>a.data.id===t);if(e<0)return;const[i]=this.#s.splice(e,1);this.#t?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(t){if(t.length!==0){for(const e of t)e.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}static get _defaultBorderStyle(){return bt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:or.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Gc=/\r\n?|\n/g;class Me extends ht{#t="";#e=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=Me.prototype,e=l=>l.isEmpty(),i=$i.TRANSLATE_SMALL,a=$i.TRANSLATE_BIG;return bt(this,"_keyboardManager",new fl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:e}]]))}static _type="freetext";static _editorType=At.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||Me._defaultColor||ht._defaultLineColor,this.#n=t.fontSize||Me._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(t,e){ht.initialize(t,e);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case Mt.FREETEXT_SIZE:Me._defaultFontSize=e;break;case Mt.FREETEXT_COLOR:Me._defaultColor=e;break}}updateParams(t,e){switch(t){case Mt.FREETEXT_SIZE:this.#r(e);break;case Mt.FREETEXT_COLOR:this.#a(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.FREETEXT_SIZE,Me._defaultFontSize],[Mt.FREETEXT_COLOR,Me._defaultColor||ht._defaultLineColor]]}get propertiesToUpdate(){return[[Mt.FREETEXT_SIZE,this.#n],[Mt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Zo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.FREETEXT_COLOR}#r(t){const e=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(t){const e=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:e.bind(this,t),undo:e.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-Me._internalPadding*t,-(Me._internalPadding+this.#n)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const t=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const t=[];this.editorDiv.normalize();let e=null;for(const i of this.editorDiv.childNodes)e?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(t.push(Me.#c(i)),e=i);return t.join(`
`)}#o(){const[t,e]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:l}=this,c=l.style.display,h=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",a.div.append(this.div),i=l.getBoundingClientRect(),l.remove(),l.style.display=c,l.classList.toggle("hidden",h)}this.rotation%180===this.parentRotation%180?(this.width=i.width/t,this.height=i.height/e):(this.width=i.height/t,this.height=i.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,e=this.#t=this.#s().trimEnd();if(t===e)return;const i=a=>{if(this.#t=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(e)},undo:()=>{i(t)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Me._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,e;(this._isCopy||this.annotationElementId)&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,l]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[h,d]=this.getInitialTranslation();[h,d]=this.pageTranslationToScreen(h,d);const[f,g]=this.pageDimensions,[m,v]=this.pageTranslation;let w,_;switch(this.rotation){case 0:w=t+(c[0]-m)/f,_=e+this.height-(c[1]-v)/g;break;case 90:w=t+(c[0]-m)/f,_=e-(c[1]-v)/g,[h,d]=[d,-h];break;case 180:w=t-this.width+(c[0]-m)/f,_=e-(c[1]-v)/g,[h,d]=[-h,-d];break;case 270:w=t+(c[0]-m-this.height*g)/f,_=e+(c[1]-v-this.width*f)/g,[h,d]=[-d,h];break}this.setAt(w*a,_*l,h,d)}else this._moveAfterPaste(t,e);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Gc,"")}editorDivPaste(t){const e=t.clipboardData||window.clipboardData,{types:i}=e;if(i.length===1&&i[0]==="text/plain")return;t.preventDefault();const a=Me.#h(e.getData("text")||"").replaceAll(Gc,`
`);if(!a)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const c=l.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:h,startOffset:d}=c,f=[],g=[];if(h.nodeType===Node.TEXT_NODE){const w=h.parentElement;if(g.push(h.nodeValue.slice(d).replaceAll(Gc,"")),w!==this.editorDiv){let _=f;for(const x of this.editorDiv.childNodes){if(x===w){_=g;continue}_.push(Me.#c(x))}}f.push(h.nodeValue.slice(0,d).replaceAll(Gc,""))}else if(h===this.editorDiv){let w=f,_=0;for(const x of this.editorDiv.childNodes)_++===d&&(w=g),w.push(Me.#c(x))}this.#t=`${f.join(`
`)}${a}${g.join(`
`)}`,this.#l();const m=new Range;let v=Math.sumPrecise(f.map(w=>w.length));for(const{firstChild:w}of this.editorDiv.childNodes)if(w.nodeType===Node.TEXT_NODE){const _=w.nodeValue.length;if(v<=_){m.setStart(w,v),m.setEnd(w,v);break}v-=_}l.removeAllRanges(),l.addRange(m)}#l(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}#d(){return this.#t.replaceAll(""," ")}static#h(t){return t.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Me._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,e,i){let a=null;if(t instanceof oA){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:d,rotation:f,id:g,popupRef:m,richText:v,contentsObj:w,creationDate:_,modificationDate:x},textContent:S,textPosition:E,parent:{page:{pageNumber:T}}}=t;if(!S||S.length===0)return null;a=t={annotationType:At.FREETEXT,color:Array.from(h),fontSize:c,value:S.join(`
`),position:E,pageIndex:T-1,rect:d.slice(0),rotation:f,annotationElementId:g,id:g,deleted:!1,popupRef:m,comment:w?.str||null,richText:v,creationDate:_,modificationDate:x}}const l=await super.deserialize(t,e,i);return l.#n=t.fontSize,l.color=st.makeHexColor(...t.color),l.#t=Me.#h(t.value),l._initialData=a,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const e=ht._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(t),{color:e,fontSize:this.#n,value:this.#d()});return this.addComment(i),t?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(t){const{value:e,fontSize:i,color:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==e||t.fontSize!==i||t.color.some((c,h)=>c!==a[h])||t.pageIndex!==l}renderAnnotationElement(t){const e=super.renderAnnotationElement(t);if(!e)return null;const{style:i}=e;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,e.replaceChildren();for(const a of this.#t.split(`
`)){const l=document.createElement("div");l.append(a?document.createTextNode(a):document.createElement("br")),e.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),e}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class at{static PRECISION=1e-4;toSVGPath(){Qt("Abstract method `toSVGPath` must be implemented.")}get box(){Qt("Abstract getter `box` must be implemented.")}serialize(t,e){Qt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h]*a,c[h+1]=i+t[h+1]*l;return c}static _rescaleAndSwap(t,e,i,a,l,c){c||=new Float32Array(t.length);for(let h=0,d=t.length;h<d;h+=2)c[h]=e+t[h+1]*a,c[h+1]=i+t[h]*l;return c}static _translate(t,e,i,a){a||=new Float32Array(t.length);for(let l=0,c=t.length;l<c;l+=2)a[l]=e+t[l],a[l+1]=i+t[l+1];return a}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,a,l){switch(l){case 90:return[1-e/i,t/a];case 180:return[1-t/i,1-e/a];case 270:return[e/i,1-t/a];default:return[t/i,e/a]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,a,l,c){return[(t+5*i)/6,(e+5*a)/6,(5*i+l)/6,(5*a+c)/6,(i+l)/2,(a+c)/2]}}class na{#t;#e=[];#i;#n;#r=[];#a=new Float32Array(18);#s;#o;#c;#l;#d;#h;#f=[];static#m=8;static#g=2;static#u=na.#m+na.#g;constructor({x:t,y:e},i,a,l,c,h=0){this.#t=i,this.#h=l*a,this.#n=c,this.#a.set([NaN,NaN,NaN,NaN,t,e],6),this.#i=h,this.#l=na.#m*a,this.#c=na.#u*a,this.#d=a,this.#f.push(t,e)}isEmpty(){return isNaN(this.#a[8])}#p(){const t=this.#a.subarray(4,6),e=this.#a.subarray(16,18),[i,a,l,c]=this.#t;return[(this.#s+(t[0]-e[0])/2-i)/l,(this.#o+(t[1]-e[1])/2-a)/c,(this.#s+(e[0]-t[0])/2-i)/l,(this.#o+(e[1]-t[1])/2-a)/c]}add({x:t,y:e}){this.#s=t,this.#o=e;const[i,a,l,c]=this.#t;let[h,d,f,g]=this.#a.subarray(8,12);const m=t-f,v=e-g,w=Math.hypot(m,v);if(w<this.#c)return!1;const _=w-this.#l,x=_/w,S=x*m,E=x*v;let T=h,R=d;h=f,d=g,f+=S,g+=E,this.#f?.push(t,e);const k=-E/_,L=S/_,P=k*this.#h,j=L*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([f+P,g+j],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([f-P,g-j],16),isNaN(this.#a[6])?(this.#r.length===0&&(this.#a.set([h+P,d+j],2),this.#r.push(NaN,NaN,NaN,NaN,(h+P-i)/l,(d+j-a)/c),this.#a.set([h-P,d-j],14),this.#e.push(NaN,NaN,NaN,NaN,(h-P-i)/l,(d-j-a)/c)),this.#a.set([T,R,h,d,f,g],6),!this.isEmpty()):(this.#a.set([T,R,h,d,f,g],6),Math.abs(Math.atan2(R-d,T-h)-Math.atan2(E,S))<Math.PI/2?([h,d,f,g]=this.#a.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((h+f)/2-i)/l,((d+g)/2-a)/c),[h,d,T,R]=this.#a.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((T+h)/2-i)/l,((R+d)/2-a)/c),!0):([T,R,h,d,f,g]=this.#a.subarray(0,6),this.#r.push(((T+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),[f,g,h,d,T,R]=this.#a.subarray(12,18),this.#e.push(((T+5*h)/6-i)/l,((R+5*d)/6-a)/c,((5*h+f)/6-i)/l,((5*d+g)/6-a)/c,((h+f)/2-i)/l,((d+g)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,e=this.#e;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${t[4]} ${t[5]}`);for(let a=6;a<t.length;a+=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);this.#b(i);for(let a=e.length-6;a>=6;a-=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[t,e,i,a]=this.#t,[l,c,h,d]=this.#p();return`M${(this.#a[2]-t)/i} ${(this.#a[3]-e)/a} L${(this.#a[4]-t)/i} ${(this.#a[5]-e)/a} L${l} ${c} L${h} ${d} L${(this.#a[16]-t)/i} ${(this.#a[17]-e)/a} L${(this.#a[14]-t)/i} ${(this.#a[15]-e)/a} Z`}#v(t){const e=this.#e;t.push(`L${e[4]} ${e[5]} Z`)}#b(t){const[e,i,a,l]=this.#t,c=this.#a.subarray(4,6),h=this.#a.subarray(16,18),[d,f,g,m]=this.#p();t.push(`L${(c[0]-e)/a} ${(c[1]-i)/l} L${d} ${f} L${g} ${m} L${(h[0]-e)/a} ${(h[1]-i)/l}`)}newFreeDrawOutline(t,e,i,a,l,c){return new hA(t,e,i,a,l,c)}getOutlines(){const t=this.#r,e=this.#e,i=this.#a,[a,l,c,h]=this.#t,d=new Float32Array((this.#f?.length??0)+2);for(let m=0,v=d.length-2;m<v;m+=2)d[m]=(this.#f[m]-a)/c,d[m+1]=(this.#f[m+1]-l)/h;if(d[d.length-2]=(this.#s-a)/c,d[d.length-1]=(this.#o-l)/h,isNaN(i[6])&&!this.isEmpty())return this.#E(d);const f=new Float32Array(this.#r.length+24+this.#e.length);let g=t.length;for(let m=0;m<g;m+=2){if(isNaN(t[m])){f[m]=f[m+1]=NaN;continue}f[m]=t[m],f[m+1]=t[m+1]}g=this.#A(f,g);for(let m=e.length-6;m>=6;m-=6)for(let v=0;v<6;v+=2){if(isNaN(e[m+v])){f[g]=f[g+1]=NaN,g+=2;continue}f[g]=e[m+v],f[g+1]=e[m+v+1],g+=2}return this.#S(f,g),this.newFreeDrawOutline(f,d,this.#t,this.#d,this.#i,this.#n)}#E(t){const e=this.#a,[i,a,l,c]=this.#t,[h,d,f,g]=this.#p(),m=new Float32Array(36);return m.set([NaN,NaN,NaN,NaN,(e[2]-i)/l,(e[3]-a)/c,NaN,NaN,NaN,NaN,(e[4]-i)/l,(e[5]-a)/c,NaN,NaN,NaN,NaN,h,d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,(e[16]-i)/l,(e[17]-a)/c,NaN,NaN,NaN,NaN,(e[14]-i)/l,(e[15]-a)/c],0),this.newFreeDrawOutline(m,t,this.#t,this.#d,this.#i,this.#n)}#S(t,e){const i=this.#e;return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6}#A(t,e){const i=this.#a.subarray(4,6),a=this.#a.subarray(16,18),[l,c,h,d]=this.#t,[f,g,m,v]=this.#p();return t.set([NaN,NaN,NaN,NaN,(i[0]-l)/h,(i[1]-c)/d,NaN,NaN,NaN,NaN,f,g,NaN,NaN,NaN,NaN,m,v,NaN,NaN,NaN,NaN,(a[0]-l)/h,(a[1]-c)/d],e),e+=24}}class hA extends at{#t;#e=new Float32Array(4);#i;#n;#r;#a;#s;constructor(t,e,i,a,l,c){super(),this.#s=t,this.#r=e,this.#t=i,this.#a=a,this.#i=l,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[h,d,f,g]=this.#e;for(let m=0,v=t.length;m<v;m+=2)t[m]=(t[m]-h)/f,t[m+1]=(t[m+1]-d)/g;for(let m=0,v=e.length;m<v;m+=2)e[m]=(e[m]-h)/f,e[m+1]=(e[m+1]-d)/g}toSVGPath(){const t=[`M${this.#s[4]} ${this.#s[5]}`];for(let e=6,i=this.#s.length;e<i;e+=6){if(isNaN(this.#s[e])){t.push(`L${this.#s[e+4]} ${this.#s[e+5]}`);continue}t.push(`C${this.#s[e]} ${this.#s[e+1]} ${this.#s[e+2]} ${this.#s[e+3]} ${this.#s[e+4]} ${this.#s[e+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,e,i,a],l){const c=i-t,h=a-e;let d,f;switch(l){case 0:d=at._rescale(this.#s,t,a,c,-h),f=at._rescale(this.#r,t,a,c,-h);break;case 90:d=at._rescaleAndSwap(this.#s,t,e,c,h),f=at._rescaleAndSwap(this.#r,t,e,c,h);break;case 180:d=at._rescale(this.#s,i,e,-c,h),f=at._rescale(this.#r,i,e,-c,h);break;case 270:d=at._rescaleAndSwap(this.#s,i,a,-c,-h),f=at._rescaleAndSwap(this.#r,i,a,-c,-h);break}return{outline:Array.from(d),points:[Array.from(f)]}}#o(t){const e=this.#s;let i=e[4],a=e[5];const l=[i,a,i,a];let c=i,h=a,d=i,f=a;const g=t?Math.max:Math.min,m=new Float32Array(4);for(let w=6,_=e.length;w<_;w+=6){const x=e[w+4],S=e[w+5];isNaN(e[w])?(st.pointBoundingBox(x,S,l),h>S?(c=x,h=S):h===S&&(c=g(c,x)),f<S?(d=x,f=S):f===S&&(d=g(d,x))):(m[0]=m[1]=1/0,m[2]=m[3]=-1/0,st.bezierBoundingBox(i,a,...e.slice(w,w+6),m),st.rectBoundingBox(m[0],m[1],m[2],m[3],l),h>m[1]?(c=m[0],h=m[1]):h===m[1]&&(c=g(c,m[0])),f<m[3]?(d=m[2],f=m[3]):f===m[3]&&(d=g(d,m[2]))),i=x,a=S}const v=this.#e;v[0]=l[0]-this.#i,v[1]=l[1]-this.#i,v[2]=l[2]-l[0]+2*this.#i,v[3]=l[3]-l[1]+2*this.#i,this.firstPoint=[c,h],this.lastPoint=[d,f]}get box(){return this.#e}newOutliner(t,e,i,a,l,c=0){return new na(t,e,i,a,l,c)}getNewOutline(t,e){const[i,a,l,c]=this.#e,[h,d,f,g]=this.#t,m=l*f,v=c*g,w=i*f+h,_=a*g+d,x=this.newOutliner({x:this.#r[0]*m+w,y:this.#r[1]*v+_},this.#t,this.#a,t,this.#n,e??this.#i);for(let S=2;S<this.#r.length;S+=2)x.add({x:this.#r[S]*m+w,y:this.#r[S+1]*v+_});return x.getOutlines()}}class Uf{#t;#e;#i;#n=[];#r=[];constructor(t,e=0,i=0,a=!0){const l=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x,y:S,width:E,height:T}of t){const R=Math.floor((x-e)/c)*c,k=Math.ceil((x+E+e)/c)*c,L=Math.floor((S-e)/c)*c,P=Math.ceil((S+T+e)/c)*c,j=[R,L,P,!0],X=[k,L,P,!1];this.#n.push(j,X),st.rectBoundingBox(R,L,k,P,l)}const h=l[2]-l[0]+2*i,d=l[3]-l[1]+2*i,f=l[0]-i,g=l[1]-i;let m=a?-1/0:1/0,v=1/0;const w=this.#n.at(a?-1:-2),_=[w[0],w[2]];for(const x of this.#n){const[S,E,T,R]=x;!R&&a?E<v?(v=E,m=S):E===v&&(m=Math.max(m,S)):R&&!a&&(E<v?(v=E,m=S):E===v&&(m=Math.min(m,S))),x[0]=(S-f)/h,x[1]=(E-g)/d,x[2]=(T-g)/d}this.#t=new Float32Array([f,g,h,d]),this.#e=[m,v],this.#i=_}getOutlines(){this.#n.sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of this.#n)e[3]?(t.push(...this.#l(e)),this.#o(e)):(this.#c(e),t.push(...this.#l(e)));return this.#a(t)}#a(t){const e=[],i=new Set;for(const c of t){const[h,d,f]=c;e.push([h,d,c],[h,f,c])}e.sort((c,h)=>c[1]-h[1]||c[0]-h[0]);for(let c=0,h=e.length;c<h;c+=2){const d=e[c][2],f=e[c+1][2];d.push(f),f.push(d),i.add(d),i.add(f)}const a=[];let l;for(;i.size>0;){const c=i.values().next().value;let[h,d,f,g,m]=c;i.delete(c);let v=h,w=d;for(l=[h,f],a.push(l);;){let _;if(i.has(g))_=g;else if(i.has(m))_=m;else break;i.delete(_),[h,d,f,g,m]=_,v!==h&&(l.push(v,w,h,w===d?d:f),v=h),w=w===d?f:d}l.push(v,w)}return new KD(a,this.#t,this.#e,this.#i)}#s(t){const e=this.#r;let i=0,a=e.length-1;for(;i<=a;){const l=i+a>>1,c=e[l][0];if(c===t)return l;c<t?i=l+1:a=l-1}return a+1}#o([,t,e]){const i=this.#s(t);this.#r.splice(i,0,[t,e])}#c([,t,e]){const i=this.#s(t);for(let a=i;a<this.#r.length;a++){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[l,c]=this.#r[a];if(l!==t)break;if(l===t&&c===e){this.#r.splice(a,1);return}}}#l(t){const[e,i,a]=t,l=[[e,i,a]],c=this.#s(a);for(let h=0;h<c;h++){const[d,f]=this.#r[h];for(let g=0,m=l.length;g<m;g++){const[,v,w]=l[g];if(!(f<=v||w<=d)){if(v>=d){if(w>f)l[g][1]=f;else{if(m===1)return[];l.splice(g,1),g--,m--}continue}l[g][2]=d,w>f&&l.push([e,f,w])}}}return l}}class KD extends at{#t;#e;constructor(t,e,i,a){super(),this.#e=t,this.#t=e,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const t=[];for(const e of this.#e){let[i,a]=e;t.push(`M${i} ${a}`);for(let l=2;l<e.length;l+=2){const c=e[l],h=e[l+1];c===i?(t.push(`V${h}`),a=h):h===a&&(t.push(`H${c}`),i=c)}t.push("Z")}return t.join(" ")}serialize([t,e,i,a],l){const c=[],h=i-t,d=a-e;for(const f of this.#e){const g=new Array(f.length);for(let m=0;m<f.length;m+=2)g[m]=t+f[m]*h,g[m+1]=a-f[m+1]*d;c.push(g)}return c}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ff extends na{newFreeDrawOutline(t,e,i,a,l,c){return new QD(t,e,i,a,l,c)}}class QD extends hA{newOutliner(t,e,i,a,l,c=0){return new Ff(t,e,i,a,l,c)}}class be extends ht{#t=null;#e=0;#i;#n=null;#r=null;#a=null;#s=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=At.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=be.prototype;return bt(this,"_keyboardManager",new fl([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||be._defaultColor,this.#p=t.thickness||be._defaultThickness,this.opacity=t.opacity||be._defaultOpacity,this.#i=t.boxes||null,this.#y=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#b(t),this.#w()):this.#i&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#s=t.focusNode,this.#o=t.focusOffset,this.#v(),this.#w(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Uf(this.#i,.001);this.#l=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const e=new Uf(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=e.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#a;this.#m=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:t,highlightId:e,clipPathId:i}){this.#l=t;const a=1.5;if(this.#a=t.getNewOutline(this.#p/2+a,.0025),e>=0)this.#d=e,this.#n=i,this.parent.drawLayer.finalizeDraw(e,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:be.#_(this.#l.box,(m-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:be.#_(this.#a.box,m),path:{d:this.#a.toSVGPath()}})}const[l,c,h,d]=t.box;switch(this.rotation){case 0:this.x=l,this.y=c,this.width=h,this.height=d;break;case 90:{const[m,v]=this.parentDimensions;this.x=c,this.y=1-l,this.width=h*v/m,this.height=d*m/v;break}case 180:this.x=1-l,this.y=1-c,this.width=h,this.height=d;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-c,this.y=l,this.width=h*v/m,this.height=d*m/v;break}}const{firstPoint:f}=t;this.#f=[(f[0]-l)/h,(f[1]-c)/d];const{lastPoint:g}=this.#a;this.#m=[(g[0]-l)/h,(g[1]-c)/d]}static initialize(t,e){ht.initialize(t,e),be._defaultColor||=e.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:be._defaultColor=e;break;case Mt.HIGHLIGHT_THICKNESS:be._defaultThickness=e;break}}translateInPage(t,e){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,e){switch(t){case Mt.HIGHLIGHT_COLOR:this.#E(e);break;case Mt.HIGHLIGHT_THICKNESS:this.#S(e);break}}static get defaultPropertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,be._defaultColor],[Mt.HIGHLIGHT_THICKNESS,be._defaultThickness]]}get propertiesToUpdate(){return[[Mt.HIGHLIGHT_COLOR,this.color||be._defaultColor],[Mt.HIGHLIGHT_THICKNESS,this.#p||be._defaultThickness],[Mt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const e=(l,c)=>{this.color=l,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:e.bind(this,t,be._defaultOpacity),undo:e.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#S(t){const e=this.#p,i=a=>{this.#p=a,this.#A(a)};this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,e),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Mt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new wn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#D())}getBaseTranslation(){return[0,0]}getRect(t,e){return super.getRect(t,e,this.#D())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#w(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?this.#C():t&&(this.#w(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),e&&this.select()}#A(t){this.#h&&(this.#b({highlightOutlines:this.#l.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#w(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=t.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#_([t,e,i,a],l){switch(l){case 90:return[1-e-a,t,a,i];case 180:return[1-t-i,1-e-a,i,a];case 270:return[e,1-t-i,a,i]}return[t,e,i,a]}rotate(t){const{drawLayer:e}=this.parent;let i;this.#h?(t=(t-this.rotation+360)%360,i=be.#_(this.#l.box,t)):i=be.#_([this.x,this.y,this.width,this.height],t),e.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":t}}),e.updateProperties(this.#g,{bbox:be.#_(this.#a.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#N.bind(this),{signal:this._uiManager._signal});const e=this.#c=document.createElement("div");return t.append(e),e.setAttribute("aria-hidden","true"),e.className="internal",e.style.clipPath=this.#n,this.setDims(),Uw(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#N(t){be._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(t){if(!this.#t)return;const e=window.getSelection();t?e.setPosition(this.#t,this.#e):e.setPosition(this.#s,this.#o)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#R(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#D(){return this.#h?this.rotation:0}#j(){if(this.#h)return null;const[t,e]=this.pageDimensions,[i,a]=this.pageTranslation,l=this.#i,c=new Float32Array(l.length*8);let h=0;for(const{x:d,y:f,width:g,height:m}of l){const v=d*t+i,w=(1-f)*e+a;c[h]=c[h+4]=v,c[h+1]=c[h+3]=w,c[h+2]=c[h+6]=v+g*t,c[h+5]=c[h+7]=w-m*e,h+=8}return c}#M(t){return this.#l.serialize(t,this.#D())}static startHighlighting(t,e,{target:i,x:a,y:l}){const{x:c,y:h,width:d,height:f}=i.getBoundingClientRect(),g=new AbortController,m=t.combinedSignal(g),v=w=>{g.abort(),this.#B(t,w)};window.addEventListener("blur",v,{signal:m}),window.addEventListener("pointerup",v,{signal:m}),window.addEventListener("pointerdown",ue,{capture:!0,passive:!1,signal:m}),window.addEventListener("contextmenu",xn,{signal:m}),i.addEventListener("pointermove",this.#O.bind(this,t),{signal:m}),this._freeHighlight=new Ff({x:a,y:l},[c,h,d,f],t.scale,this._defaultThickness/2,e,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(t,e){this._freeHighlight.add(e)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(t,e){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(e,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,e,i){let a=null;if(t instanceof cA){const{data:{quadPoints:_,rect:x,rotation:S,id:E,color:T,opacity:R,popupRef:k,richText:L,contentsObj:P,creationDate:j,modificationDate:X},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(T),opacity:R,quadPoints:_,boxes:null,pageIndex:K-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:L,comment:P?.str||null,creationDate:j,modificationDate:X}}else if(t instanceof Cp){const{data:{inkLists:_,rect:x,rotation:S,id:E,color:T,borderStyle:{rawWidth:R},popupRef:k,richText:L,contentsObj:P,creationDate:j,modificationDate:X},parent:{page:{pageNumber:K}}}=t;a=t={annotationType:At.HIGHLIGHT,color:Array.from(T),thickness:R,inkLists:_,boxes:null,pageIndex:K-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,popupRef:k,richText:L,comment:P?.str||null,creationDate:j,modificationDate:X}}const{color:l,quadPoints:c,inkLists:h,opacity:d}=t,f=await super.deserialize(t,e,i);f.color=st.makeHexColor(...l),f.opacity=d||1,h&&(f.#p=t.thickness),f._initialData=a,t.comment&&f.setCommentData(t);const[g,m]=f.pageDimensions,[v,w]=f.pageTranslation;if(c){const _=f.#i=[];for(let x=0;x<c.length;x+=8)_.push({x:(c[x]-v)/g,y:1-(c[x+1]-w)/m,width:(c[x+2]-c[x])/g,height:(c[x+1]-c[x+5])/m});f.#v(),f.#w(),f.rotate(f.rotation)}else if(h){f.#h=!0;const _=h[0],x={x:_[0]-v,y:m-(_[1]-w)},S=new Ff(x,[0,0,g,m],1,f.#p/2,!0,.001);for(let R=0,k=_.length;R<k;R+=2)x.x=_[R]-v,x.y=m-(_[R+1]-w),S.add(x);const{id:E,clipPathId:T}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);f.#b({highlightOutlines:S.getOutlines(),highlightId:E,clipPathId:T}),f.#w(),f.rotate(f.parentRotation)}return f}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const e=ht._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(t);return Object.assign(i,{color:e,opacity:this.opacity,thickness:this.#p,quadPoints:this.#j(),outlines:this.#M(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(t){const{color:e}=this._initialData;return this.hasEditedComment||t.color.some((i,a)=>i!==e[a])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class dA{#t=Object.create(null);updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){this.#t[t]=e}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Qt("Not implemented")}}class zt extends ht{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#r=null;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#a(t),this.#c())}#a({drawOutlines:t,drawId:e,drawingOptions:i}){this.#t=t,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),e>=0?(this._drawId=e,this.parent.drawLayer.finalizeDraw(e,t.defaultProperties)):this._drawId=this.#s(t,this.parent),this.#h(t.box)}#s(t,e){const{id:i}=e.drawLayer.draw(zt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(t,e){const i=new Set(Object.keys(t));for(const[a,l]of Object.entries(e))i.has(a)?Object.assign(t[a],l):t[a]=l;return t}static getDefaultDrawingOptions(t){Qt("Not implemented")}static get typesMap(){Qt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,e){const i=this.typesMap.get(t);i&&this._defaultDrawingOptions.updateProperty(i,e),this._currentParent&&(zt.#i.updateProperty(i,e),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,e){const i=this.constructor.typesMap.get(t);i&&this._updateProperty(t,i,e)}static get defaultPropertiesToUpdate(){const t=[],e=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)t.push([i,e[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:e}=this;for(const[i,a]of this.constructor.typesMap)t.push([i,e[a]]);return t}_updateProperty(t,e,i){const a=this._drawingOptions,l=a[e],c=h=>{a.updateProperty(e,h);const d=this.#t.updateProperty(e,h);d&&this.#h(d),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(t,e){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let e=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#o()):t&&(this._uiManager.addShouldRescale(this),this.#c(t),e=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),e&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#t,t)}}#l([t,e,i,a]){const{parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[e,1-t,i*(c/l),a*(l/c)];case 180:return[1-t,1-e,i,a];case 270:return[1-e,t,i*(c/l),a*(l/c)];default:return[t,e,i,a]}}#d(){const{x:t,y:e,width:i,height:a,parentDimensions:[l,c],rotation:h}=this;switch(h){case 90:return[1-e,t,i*(l/c),a*(c/l)];case 180:return[1-t,1-e,i,a];case 270:return[e,1-t,i*(l/c),a*(c/l)];default:return[t,e,i,a]}}#h(t){[this.x,this.y,this.width,this.height]=this.#l(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:t,y:e,width:i,height:a,rotation:l,parentRotation:c,parentDimensions:[h,d]}=this;switch((l*4+c)/90){case 1:return[1-e-a,t,a,i];case 2:return[1-t-i,1-e-a,i,a];case 3:return[e,1-t-i,a,i];case 4:return[t,e-i*(h/d),a*(d/h),i*(h/d)];case 5:return[1-e,t,i*(h/d),a*(d/h)];case 6:return[1-t-a*(d/h),1-e,a*(d/h),i*(h/d)];case 7:return[e-i*(h/d),1-t-a*(d/h),i*(h/d),a*(d/h)];case 8:return[t-i,e-a,i,a];case 9:return[1-e,t-i,a,i];case 10:return[1-t,1-e,i,a];case 11:return[e-a,1-t,a,i];case 12:return[t-a*(d/h),e,a*(d/h),i*(h/d)];case 13:return[1-e-i*(h/d),t-a*(d/h),i*(h/d),a*(d/h)];case 14:return[1-t,1-e-i*(h/d),a*(d/h),i*(h/d)];case 15:return[e,1-t,i*(h/d),a*(d/h)];default:return[t,e,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,zt._mergeSVGProperties({bbox:this.#f()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,e;this._isCopy&&(t=this.x,e=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,e),i}static createDrawerInstance(t,e,i,a,l){Qt("Not implemented")}static startDrawing(t,e,i,a){const{target:l,offsetX:c,offsetY:h,pointerId:d,pointerType:f}=a;if(Ht.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:g}}=t,{width:m,height:v}=l.getBoundingClientRect(),w=zt.#n=new AbortController,_=t.combinedSignal(w);if(Ht.setPointer(f,d),window.addEventListener("pointerup",x=>{Ht.isSamePointerIdOrRemove(x.pointerId)&&this._endDraw(x)},{signal:_}),window.addEventListener("pointercancel",x=>{Ht.isSamePointerIdOrRemove(x.pointerId)&&this._currentParent.endDrawingSession()},{signal:_}),window.addEventListener("pointerdown",x=>{Ht.isSamePointerType(x.pointerType)&&(Ht.initializeAndAddPointerId(x.pointerId),zt.#i.isCancellable()&&(zt.#i.removeLastElement(),zt.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",xn,{signal:_}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),l.addEventListener("touchmove",x=>{Ht.isSameTimeStamp(x.timeStamp)&&ue(x)},{signal:_}),t.toggleDrawing(),e._editorUndoBar?.hide(),zt.#i){t.drawLayer.updateProperties(this._currentDrawId,zt.#i.startNew(c,h,m,v,g));return}e.updateUIForDefaultProperties(this),zt.#i=this.createDrawerInstance(c,h,m,v,g),zt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(zt.#r.toSVGProperties(),zt.#i.defaultSVGProperties),!0,!1)}static _drawMove(t){if(Ht.isSameTimeStamp(t.timeStamp),!zt.#i)return;const{offsetX:e,offsetY:i,pointerId:a}=t;if(Ht.isSamePointerId(a)){if(Ht.isUsingMultiplePointers()){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,zt.#i.add(e,i)),Ht.setTimeStamp(t.timeStamp),ue(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,zt.#i=null,zt.#r=null,Ht.clearTimeStamp()),zt.#n&&(zt.#n.abort(),zt.#n=null,Ht.clearPointerIds())}static _endDraw(t){const e=this._currentParent;if(e){if(e.toggleDrawing(!0),this._cleanup(!1),t?.target===e.div&&e.drawLayer.updateProperties(this._currentDrawId,zt.#i.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const i=zt.#i,a=this._currentDrawId,l=i.getLastElement();e.addCommands({cmd:()=>{e.drawLayer.updateProperties(a,i.setLastElement(l))},undo:()=>{e.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:Mt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const e=this._currentParent;if(!e)return null;if(e.toggleDrawing(!0),e.cleanUndoStack(Mt.DRAW_STEP),!zt.#i.isEmpty()){const{pageDimensions:[i,a],scale:l}=e,c=e.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:zt.#i.getOutlines(i*l,a*l,l,this._INNER_MARGIN),drawingOptions:zt.#r,mustBeCommitted:!t});return this._cleanup(!0),c}return e.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,e,i,a,l,c){Qt("Not implemented")}static async deserialize(t,e,i){const{rawDims:{pageWidth:a,pageHeight:l,pageX:c,pageY:h}}=e.viewport,d=this.deserializeDraw(c,h,a,l,this._INNER_MARGIN,t),f=await super.deserialize(t,e,i);return f.createDrawingOptions(t),f.#a({drawOutlines:d}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(t){const[e,i]=this.pageTranslation,[a,l]=this.pageDimensions;return this.#t.serialize([e,i,a,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class ZD{#t=new Float64Array(6);#e;#i;#n;#r;#a;#s="";#o=0;#c=new ml;#l;#d;constructor(t,e,i,a,l,c){this.#l=i,this.#d=a,this.#n=l,this.#r=c,[t,e]=this.#h(t,e);const h=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e],this.#i=[{line:h,points:this.#a}],this.#t.set(h,0)}updateProperty(t,e){t==="stroke-width"&&(this.#r=e)}#h(t,e){return at._normalizePoint(t,e,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(t,e){[t,e]=this.#h(t,e);const[i,a,l,c]=this.#t.subarray(2,6),h=t-l,d=e-c;return Math.hypot(this.#l*h,this.#d*d)<=2?null:(this.#a.push(t,e),isNaN(i)?(this.#t.set([l,c,t,e],2),this.#e.push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([i,a,l,c,t,e],0),this.#e.push(...at.createBezierPoints(i,a,l,c,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,a,l){this.#l=i,this.#d=a,this.#n=l,[t,e]=this.#h(t,e);const c=this.#e=[NaN,NaN,NaN,NaN,t,e];this.#a=[t,e];const h=this.#i.at(-1);return h&&(h.line=new Float32Array(h.line),h.points=new Float32Array(h.points)),this.#i.push({line:c,points:this.#a}),this.#t.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(t){return this.#i?(this.#i.push(t),this.#e=t.line,this.#a=t.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let t=0,e=this.#i.length;t<e;t++){const{line:i,points:a}=this.#i[t];this.#e=i,this.#a=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const t=at.svgRound(this.#e[4]),e=at.svgRound(this.#e[5]);if(this.#a.length===2)return this.#s=`${this.#s} M ${t} ${e} Z`,this.#s;if(this.#a.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${t} ${e}`,this.#o=6}if(this.#a.length===4){const a=at.svgRound(this.#e[10]),l=at.svgRound(this.#e[11]);return this.#s=`${this.#s} L ${a} ${l}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${t} ${e}`),this.#o=6);for(let a=this.#o,l=this.#e.length;a<l;a+=6){const[c,h,d,f,g,m]=this.#e.slice(a,a+6).map(at.svgRound);i.push(`C${c} ${h} ${d} ${f} ${g} ${m}`)}return this.#s+=i.join(" "),this.#o=this.#e.length,this.#s}getOutlines(t,e,i,a){const l=this.#i.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#i,t,e,i,this.#n,this.#r,a),this.#t=null,this.#e=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class ml extends at{#t;#e=0;#i;#n;#r;#a;#s;#o;#c;build(t,e,i,a,l,c,h){this.#r=e,this.#a=i,this.#s=a,this.#o=l,this.#c=c,this.#i=h??0,this.#n=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#n.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:e}of this.#n){if(t.push(`M${at.svgRound(e[4])} ${at.svgRound(e[5])}`),e.length===6){t.push("Z");continue}if(e.length===12&&isNaN(e[6])){t.push(`L${at.svgRound(e[10])} ${at.svgRound(e[11])}`);continue}for(let i=6,a=e.length;i<a;i+=6){const[l,c,h,d,f,g]=e.subarray(i,i+6).map(at.svgRound);t.push(`C${l} ${c} ${h} ${d} ${f} ${g}`)}}return t.join("")}serialize([t,e,i,a],l){const c=[],h=[],[d,f,g,m]=this.#d();let v,w,_,x,S,E,T,R,k;switch(this.#o){case 0:k=at._rescale,v=t,w=e+a,_=i,x=-a,S=t+d*i,E=e+(1-f-m)*a,T=t+(d+g)*i,R=e+(1-f)*a;break;case 90:k=at._rescaleAndSwap,v=t,w=e,_=i,x=a,S=t+f*i,E=e+d*a,T=t+(f+m)*i,R=e+(d+g)*a;break;case 180:k=at._rescale,v=t+i,w=e,_=-i,x=a,S=t+(1-d-g)*i,E=e+f*a,T=t+(1-d)*i,R=e+(f+m)*a;break;case 270:k=at._rescaleAndSwap,v=t+i,w=e+a,_=-i,x=-a,S=t+(1-f-m)*i,E=e+(1-d-g)*a,T=t+(1-f)*i,R=e+(1-d)*a;break}for(const{line:L,points:P}of this.#n)c.push(k(L,v,w,_,x,l?new Array(L.length):null)),h.push(k(P,v,w,_,x,l?new Array(P.length):null));return{lines:c,points:h,rect:[S,E,T,R]}}static deserialize(t,e,i,a,l,{paths:{lines:c,points:h},rotation:d,thickness:f}){const g=[];let m,v,w,_,x;switch(d){case 0:x=at._rescale,m=-t/i,v=e/a+1,w=1/i,_=-1/a;break;case 90:x=at._rescaleAndSwap,m=-e/a,v=-t/i,w=1/a,_=1/i;break;case 180:x=at._rescale,m=t/i+1,v=-e/a,w=-1/i,_=1/a;break;case 270:x=at._rescaleAndSwap,m=e/a+1,v=t/i+1,w=-1/a,_=-1/i;break}if(!c){c=[];for(const E of h){const T=E.length;if(T===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(T===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const R=new Float32Array(3*(T-2));c.push(R);let[k,L,P,j]=E.subarray(0,4);R.set([NaN,NaN,NaN,NaN,k,L],0);for(let X=4;X<T;X+=2){const K=E[X],et=E[X+1];R.set(at.createBezierPoints(k,L,P,j,K,et),(X-2)*3),[k,L,P,j]=[P,j,K,et]}}}for(let E=0,T=c.length;E<T;E++)g.push({line:x(c[E].map(R=>R??NaN),m,v,w,_),points:x(h[E].map(R=>R??NaN),m,v,w,_)});const S=new this.prototype.constructor;return S.build(g,i,a,1,d,f,l),S}#l(t=this.#c){const e=this.#i+t/2*this.#s;return this.#o%180===0?[e/this.#r,e/this.#a]:[e/this.#a,e/this.#r]}#d(){const[t,e,i,a]=this.#t,[l,c]=this.#l(0);return[t+l,e+c,i-2*l,a-2*c]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let h=4,d=a.length;h<d;h+=6)st.pointBoundingBox(a[h],a[h+1],t);continue}let l=a[4],c=a[5];for(let h=6,d=a.length;h<d;h+=6){const[f,g,m,v,w,_]=a.subarray(h,h+6);st.bezierBoundingBox(l,c,f,g,m,v,w,_,t),l=w,c=_}}const[e,i]=this.#l();t[0]=Ge(t[0]-e,0,1),t[1]=Ge(t[1]-i,0,1),t[2]=Ge(t[2]+e,0,1),t[3]=Ge(t[3]+i,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,e){return t==="stroke-width"?this.#f(e):null}#f(t){const[e,i]=this.#l();this.#c=t;const[a,l]=this.#l(),[c,h]=[a-e,l-i],d=this.#t;return d[0]-=c,d[1]-=h,d[2]+=2*c,d[3]+=2*h,d}updateParentDimensions([t,e],i){const[a,l]=this.#l();this.#r=t,this.#a=e,this.#s=i;const[c,h]=this.#l(),d=c-a,f=h-l,g=this.#t;return g[0]-=d,g[1]-=f,g[2]+=2*d,g[3]+=2*f,g}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(at.svgRound).join(" ")}get defaultProperties(){const[t,e]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get rotationTransform(){const[,,t,e]=this.#t;let i=0,a=0,l=0,c=0,h=0,d=0;switch(this.#e){case 90:a=e/t,l=-t/e,h=t;break;case 180:i=-1,c=-1,h=t,d=e;break;case 270:a=-e/t,l=t/e,d=e;break;default:return""}return`matrix(${i} ${a} ${l} ${c} ${at.svgRound(h)} ${at.svgRound(d)})`}getPathResizingSVGProperties([t,e,i,a]){const[l,c]=this.#l(),[h,d,f,g]=this.#t;if(Math.abs(f-l)<=at.PRECISION||Math.abs(g-c)<=at.PRECISION){const x=t+i/2-(h+f/2),S=e+a/2-(d+g/2);return{path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:`${this.rotationTransform} translate(${x} ${S})`}}}const m=(i-2*l)/(f-2*l),v=(a-2*c)/(g-2*c),w=f/i,_=g/a;return{path:{"transform-origin":`${at.svgRound(h)} ${at.svgRound(d)}`,transform:`${this.rotationTransform} scale(${w} ${_}) translate(${at.svgRound(l)} ${at.svgRound(c)}) scale(${m} ${v}) translate(${at.svgRound(-l)} ${at.svgRound(-c)})`}}}getPathResizedSVGProperties([t,e,i,a]){const[l,c]=this.#l(),h=this.#t,[d,f,g,m]=h;if(h[0]=t,h[1]=e,h[2]=i,h[3]=a,Math.abs(g-l)<=at.PRECISION||Math.abs(m-c)<=at.PRECISION){const S=t+i/2-(d+g/2),E=e+a/2-(f+m/2);for(const{line:T,points:R}of this.#n)at._translate(T,S,E,T),at._translate(R,S,E,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*l)/(g-2*l),w=(a-2*c)/(m-2*c),_=-v*(d+l)+t+l,x=-w*(f+c)+e+c;if(v!==1||w!==1||_!==0||x!==0)for(const{line:S,points:E}of this.#n)at._rescale(S,_,x,v,w,S),at._rescale(E,_,x,v,w,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,e],i){const[a,l]=i,c=this.#t,h=t-c[0],d=e-c[1];if(this.#r===a&&this.#a===l)for(const{line:f,points:g}of this.#n)at._translate(f,h,d,f),at._translate(g,h,d,g);else{const f=this.#r/a,g=this.#a/l;this.#r=a,this.#a=l;for(const{line:m,points:v}of this.#n)at._rescale(m,h,d,f,g,m),at._rescale(v,h,d,f,g,v);c[2]*=f,c[3]*=g}return c[0]=t,c[1]=e,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t)} ${at.svgRound(e)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${at.svgRound(t[0])} ${at.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class Cu extends dA{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ht._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??=this["stroke-width"],e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Cu(this._viewParameters);return t.updateAll(this),t}}class Rp extends zt{static _type="ink";static _editorType=At.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,e){ht.initialize(t,e),this._defaultDrawingOptions=new Cu(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!0}static get typesMap(){return bt(this,"typesMap",new Map([[Mt.INK_THICKNESS,"stroke-width"],[Mt.INK_COLOR,"stroke"],[Mt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,e,i,a,l){return new ZD(t,e,i,a,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,e,i,a,l,c){return ml.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){let a=null;if(t instanceof Cp){const{data:{inkLists:c,rect:h,rotation:d,id:f,color:g,opacity:m,borderStyle:{rawWidth:v},popupRef:w,richText:_,contentsObj:x,creationDate:S,modificationDate:E},parent:{page:{pageNumber:T}}}=t;a=t={annotationType:At.INK,color:Array.from(g),thickness:v,opacity:m,paths:{points:c},boxes:null,pageIndex:T-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:w,richText:_,comment:x?.str||null,creationDate:S,modificationDate:E}}const l=await super.deserialize(t,e,i);return l._initialData=a,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new Zo(this),[["colorPicker",this._colorPicker]]}get colorType(){return Mt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:e,parent:i}=this;e.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(t,e.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:e,opacity:i}){this._drawingOptions=Rp.getDefaultDrawingOptions({stroke:st.makeHexColor(...t),"stroke-width":e,"stroke-opacity":i})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":l,"stroke-width":c}}=this,h=Object.assign(super.serialize(t),{color:ht._colorManager.convert(a),opacity:l,thickness:c,paths:{lines:e,points:i}});return this.addComment(h),t?(h.isCopy=!0,h):this.annotationElementId&&!this.#t(h)?null:(h.id=this.annotationElementId,h)}#t(t){const{color:e,thickness:i,opacity:a,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,h)=>c!==e[h])||t.thickness!==i||t.opacity!==a||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:e,rect:i}=this.serializeDraw(!1);return t.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:e,popup:this.comment}),null}}class zf extends ml{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Vc=8,Lo=3;class ea{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,e,i,a){return i-=t,a-=e,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(-f+d-h+16)%8,m=this.#i[2*g],v=this.#i[2*g+1];if(t[(i+m)*e+(a+v)]!==0)return g}return-1}static#r(t,e,i,a,l,c,h){const d=this.#e(i,a,l,c);for(let f=0;f<8;f++){const g=(f+d+h+16)%8,m=this.#i[2*g],v=this.#i[2*g+1];if(t[(i+m)*e+(a+v)]!==0)return g}return-1}static#a(t,e,i,a){const l=t.length,c=new Int32Array(l);for(let g=0;g<l;g++)c[g]=t[g]<=a?1:0;for(let g=1;g<i-1;g++)c[g*e]=c[g*e+e-1]=0;for(let g=0;g<e;g++)c[g]=c[e*i-1-g]=0;let h=1,d;const f=[];for(let g=1;g<i-1;g++){d=1;for(let m=1;m<e-1;m++){const v=g*e+m,w=c[v];if(w===0)continue;let _=g,x=m;if(w===1&&c[v-1]===0)h+=1,x-=1;else if(w>=1&&c[v+1]===0)h+=1,x+=1,w>1&&(d=w);else{w!==1&&(d=Math.abs(w));continue}const S=[m,g],E=x===m+1,T={isHole:E,points:S,id:h,parent:0};f.push(T);let R;for(const Z of f)if(Z.id===d){R=Z;break}R?R.isHole?T.parent=E?R.parent:d:T.parent=E?d:R.parent:T.parent=E?d:0;const k=this.#n(c,e,g,m,_,x,0);if(k===-1){c[v]=-h,c[v]!==1&&(d=Math.abs(c[v]));continue}let L=this.#i[2*k],P=this.#i[2*k+1];const j=g+L,X=m+P;_=j,x=X;let K=g,et=m;for(;;){const Z=this.#r(c,e,K,et,_,x,1);L=this.#i[2*Z],P=this.#i[2*Z+1];const ct=K+L,St=et+P;S.push(St,ct);const q=K*e+et;if(c[q+1]===0?c[q]=-h:c[q]===1&&(c[q]=h),ct===g&&St===m&&K===j&&et===X){c[v]!==1&&(d=Math.abs(c[v]));break}else _=K,x=et,K=ct,et=St}}}return f}static#s(t,e,i,a){if(i-e<=4){for(let j=e;j<i-2;j+=2)a.push(t[j],t[j+1]);return}const l=t[e],c=t[e+1],h=t[i-4]-l,d=t[i-3]-c,f=Math.hypot(h,d),g=h/f,m=d/f,v=g*c-m*l,w=d/h,_=1/f,x=Math.atan(w),S=Math.cos(x),E=Math.sin(x),T=_*(Math.abs(S)+Math.abs(E)),R=_*(1-T+T**2),k=Math.max(Math.atan(Math.abs(E+S)*R),Math.atan(Math.abs(E-S)*R));let L=0,P=e;for(let j=e+2;j<i-2;j+=2){const X=Math.abs(v-g*t[j+1]+m*t[j]);X>L&&(P=j,L=X)}L>(f*k)**2?(this.#s(t,e,P+2,a),this.#s(t,P,i,a)):a.push(l,c)}static#o(t){const e=[],i=t.length;return this.#s(t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e}static#c(t,e,i,a,l,c){const h=new Float32Array(c**2),d=-2*a**2,f=c>>1;for(let x=0;x<c;x++){const S=(x-f)**2;for(let E=0;E<c;E++)h[x*c+E]=Math.exp((S+(E-f)**2)/d)}const g=new Float32Array(256),m=-2*l**2;for(let x=0;x<256;x++)g[x]=Math.exp(x**2/m);const v=t.length,w=new Uint8Array(v),_=new Uint32Array(256);for(let x=0;x<i;x++)for(let S=0;S<e;S++){const E=x*e+S,T=t[E];let R=0,k=0;for(let P=0;P<c;P++){const j=x+P-f;if(!(j<0||j>=i))for(let X=0;X<c;X++){const K=S+X-f;if(K<0||K>=e)continue;const et=t[j*e+K],Z=h[P*c+X]*g[Math.abs(et-T)];R+=et*Z,k+=Z}}const L=w[E]=Math.round(R/k);_[L]++}return[w,_]}static#l(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e}static#d(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let a=-1/0,l=1/0;for(let h=0,d=i.length;h<d;h++){const f=i[h]=t[h<<2];a=Math.max(a,f),l=Math.min(l,f)}const c=255/(a-l);for(let h=0,d=i.length;h<d;h++)i[h]=(i[h]-l)*c;return i}static#h(t){let e,i=-1/0,a=-1/0;const l=t.findIndex(d=>d!==0);let c=l,h=l;for(e=l;e<256;e++){const d=t[e];d>i&&(e-c>a&&(a=e-c,h=e-1),i=d,c=e)}for(e=h-1;e>=0&&!(t[e]>t[e+1]);e--);return e}static#f(t){const e=t,{width:i,height:a}=t,{maxDim:l}=this.#t;let c=i,h=a;if(i>l||a>l){let v=i,w=a,_=Math.log2(Math.max(i,a)/l);const x=Math.floor(_);_=_===x?x-1:x;for(let E=0;E<_;E++){c=Math.ceil(v/2),h=Math.ceil(w/2);const T=new OffscreenCanvas(c,h);T.getContext("2d").drawImage(t,0,0,v,w,0,0,c,h),v=c,w=h,t!==e&&t.close(),t=T.transferToImageBitmap()}const S=Math.min(l/c,l/h);c=Math.round(c*S),h=Math.round(h*S)}const f=new OffscreenCanvas(c,h).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,h),f.filter="grayscale(1)",f.drawImage(t,0,0,t.width,t.height,0,0,c,h);const g=f.getImageData(0,0,c,h).data;return[this.#d(g),c,h]}static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:a},l,c,h,d){let f=new OffscreenCanvas(1,1),g=f.getContext("2d",{alpha:!1});const m=200,v=g.font=`${i} ${a} ${m}px ${e}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:_,actualBoundingBoxAscent:x,actualBoundingBoxDescent:S,fontBoundingBoxAscent:E,fontBoundingBoxDescent:T,width:R}=g.measureText(t),k=1.5,L=Math.ceil(Math.max(Math.abs(w)+Math.abs(_)||0,R)*k),P=Math.ceil(Math.max(Math.abs(x)+Math.abs(S)||m,Math.abs(E)+Math.abs(T)||m)*k);f=new OffscreenCanvas(L,P),g=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),g.font=v,g.filter="grayscale(1)",g.fillStyle="white",g.fillRect(0,0,L,P),g.fillStyle="black",g.fillText(t,L*(k-1)/2,P*(3-k)/2);const j=this.#d(g.getImageData(0,0,L,P).data),X=this.#l(j),K=this.#h(X),et=this.#a(j,L,P,K);return this.processDrawnLines({lines:{curves:et,width:L,height:P},pageWidth:l,pageHeight:c,rotation:h,innerMargin:d,mustSmooth:!0,areContours:!0})}static process(t,e,i,a,l){const[c,h,d]=this.#f(t),[f,g]=this.#c(c,h,d,Math.hypot(h,d)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),m=this.#h(g),v=this.#a(f,h,d,m);return this.processDrawnLines({lines:{curves:v,width:h,height:d},pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:l,mustSmooth:c,areContours:h}){a%180!==0&&([e,i]=[i,e]);const{curves:d,width:f,height:g}=t,m=t.thickness??0,v=[],w=Math.min(e/f,i/g),_=w/e,x=w/i,S=[];for(const{points:T}of d){const R=c?this.#o(T):T;if(!R)continue;S.push(R);const k=R.length,L=new Float32Array(k),P=new Float32Array(3*(k===2?2:k-2));if(v.push({line:P,points:L}),k===2){L[0]=R[0]*_,L[1]=R[1]*x,P.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[j,X,K,et]=R;j*=_,X*=x,K*=_,et*=x,L.set([j,X,K,et],0),P.set([NaN,NaN,NaN,NaN,j,X],0);for(let Z=4;Z<k;Z+=2){const ct=L[Z]=R[Z]*_,St=L[Z+1]=R[Z+1]*x;P.set(at.createBezierPoints(j,X,K,et,ct,St),(Z-2)*3),[j,X,K,et]=[K,et,ct,St]}}if(v.length===0)return null;const E=h?new zf:new ml;return E.build(v,e,i,1,a,h?0:m,l),{outline:E,newCurves:S,areContours:h,thickness:m,width:f,height:g}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:a,height:l}){let c=1/0,h=-1/0,d=0;for(const R of t){d+=R.length;for(let k=2,L=R.length;k<L;k++){const P=R[k]-R[k-2];c=Math.min(c,P),h=Math.max(h,P)}}let f;c>=-128&&h<=127?f=Int8Array:c>=-32768&&h<=32767?f=Int16Array:f=Int32Array;const g=t.length,m=Vc+Lo*g,v=new Uint32Array(m);let w=0;v[w++]=m*Uint32Array.BYTES_PER_ELEMENT+(d-2*g)*f.BYTES_PER_ELEMENT,v[w++]=0,v[w++]=a,v[w++]=l,v[w++]=e?0:1,v[w++]=Math.max(0,Math.floor(i??0)),v[w++]=g,v[w++]=f.BYTES_PER_ELEMENT;for(const R of t)v[w++]=R.length-2,v[w++]=R[0],v[w++]=R[1];const _=new CompressionStream("deflate-raw"),x=_.writable.getWriter();await x.ready,x.write(v);const S=f.prototype.constructor;for(const R of t){const k=new S(R.length-2);for(let L=2,P=R.length;L<P;L++)k[L-2]=R[L]-R[L-2];x.write(k)}x.close();const E=await new Response(_.readable).arrayBuffer(),T=new Uint8Array(E);return kw(T)}static async decompressSignature(t){try{const e=x2(t),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),l=a.getWriter();await l.ready,l.write(e).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let c=null,h=0;for await(const R of i)c||=new Uint8Array(new Uint32Array(R.buffer,0,4)[0]),c.set(R,h),h+=R.length;const d=new Uint32Array(c.buffer,0,c.length>>2),f=d[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const g=d[2],m=d[3],v=d[4]===0,w=d[5],_=d[6],x=d[7],S=[],E=(Vc+Lo*_)*Uint32Array.BYTES_PER_ELEMENT;let T;switch(x){case Int8Array.BYTES_PER_ELEMENT:T=new Int8Array(c.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:T=new Int16Array(c.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:T=new Int32Array(c.buffer,E);break}h=0;for(let R=0;R<_;R++){const k=d[Lo*R+Vc],L=new Float32Array(k+2);S.push(L);for(let P=0;P<Lo-1;P++)L[P]=d[Lo*R+Vc+P+1];for(let P=0;P<k;P++)L[P+2]=L[P]+T[h++]}return{areContours:v,thickness:w,outlines:S,width:g,height:m}}catch(e){return xt(`decompressSignature: ${e}`),null}}}class Dp extends dA{constructor(){super(),super.updateProperties({fill:ht._defaultLineColor,"stroke-width":0})}clone(){const t=new Dp;return t.updateAll(this),t}}class Np extends Cu{constructor(t){super(t),super.updateProperties({stroke:ht._defaultLineColor,"stroke-width":1})}clone(){const t=new Np(this._viewParameters);return t.updateAll(this),t}}class ii extends zt{#t=!1;#e=null;#i=null;#n=null;static _type="signature";static _editorType=At.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,e){ht.initialize(t,e),this._defaultDrawingOptions=new Dp,this._defaultDrawnSignatureOptions=new Np(e.viewParameters)}static getDefaultDrawingOptions(t){const e=this._defaultDrawingOptions.clone();return e.updateProperties(t),e}static get supportMultipleDrawings(){return!1}static get typesMap(){return bt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const e=t.get("hasDescription");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,e;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,t=this.x,e=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:l,areContours:c,description:h,uuid:d,heightInPage:f}=this.#i,{rawDims:{pageWidth:g,pageHeight:m},rotation:v}=this.parent.viewport,w=ea.processDrawnLines({lines:a,pageWidth:g,pageHeight:m,rotation:v,innerMargin:ii._INNER_MARGIN,mustSmooth:l,areContours:c});this.addSignature(w,f,h,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(t,e)),this.div}setUuid(t){this.#n=t,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(e=>{e?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:e,thickness:i,width:a,height:l}=this.#i,c=Math.max(a,l),h=ea.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:i,width:a,height:l},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:e});return{areContours:e,outline:h.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,e,i,a){const{x:l,y:c}=this,{outline:h}=this.#i=t;this.#t=h instanceof zf,this.description=i;let d;this.#t?d=ii.getDefaultDrawingOptions():(d=ii._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":h.thickness})),this._addOutlines({drawOutlines:h,drawingOptions:d});const[,f]=this.pageDimensions;let g=e/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(),this.x=l,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ea.process(t,e,i,a,ii._INNER_MARGIN)}getFromText(t,e){const{rawDims:{pageWidth:i,pageHeight:a},rotation:l}=this.parent.viewport;return ea.extractContoursFromText(t,e,i,a,l,ii._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:e,pageHeight:i},rotation:a}=this.parent.viewport;return ea.processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:a,innerMargin:ii._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:e}){t?this._drawingOptions=ii.getDefaultDrawingOptions():(this._drawingOptions=ii._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":e}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:e,points:i}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:a});return this.addComment(l),t?(l.paths={lines:e,points:i},l.uuid=this.#n,l.isCopy=!0):l.lines=e,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,e,i,a,l,c){return c.areContours?zf.deserialize(t,e,i,a,l,c):ml.deserialize(t,e,i,a,l,c)}static async deserialize(t,e,i){const a=await super.deserialize(t,e,i);return a.#t=t.areContours,a.description=t.accessibilityData?.alt||"",a.#n=t.uuid,a}}class JD extends ht{#t=null;#e=null;#i=null;#n=null;#r=null;#a="";#s=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=At.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#n=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,e){ht.initialize(t,e)}static isHandlingMimeForPasting(t){return du.includes(t)}static paste(t,e){e.pasteEditor({mode:At.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const e=t.get("hasAltText");return{hasAltText:e.get(!0)??0,hasNoAltText:e.get(!1)??0}}#h(t,e=!1){if(!t){this.remove();return}this.#t=t.bitmap,e||(this.#e=t.id,this.#l=t.isSvg),t.file&&(this.#a=t.file.name),this.#g()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,e=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:l,height:c}=t||this.copyCanvas(null,null,!0).imageData,h=await i.guess({name:"altText",request:{data:a,width:l,height:c,channels:a.length/(l*c)}});if(!h)throw new Error("No response from the AI service.");if(h.error)throw new Error("Error from the AI service.");if(h.cancel)return null;if(!h.output)throw new Error("No valid response from the AI service.");const d=h.output;return await this.setGuessedAltText(d),e&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#h(a)).finally(()=>this.#f());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#h(a)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=du.join(",");const e=this._uiManager._signal;this.#i=new Promise(i=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(a)}i()},{signal:e}),t.addEventListener("cancel",()=>{this.remove(),i()},{signal:e})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#s===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#i||this.#t||this.#n||this.#r||this.#e||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;return this._isCopy&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,e),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,e){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,e);e.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#e=i,a&&(this.#t=a),this.#o=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:e,height:i}=this.#t;const[a,l]=this.pageDimensions,c=.75;if(this.width)e=this.width*a,i=this.height*l;else if(e>c*a||i>c*l){const d=Math.min(c*a/e,c*l/i);e*=d,i*=d}this._uiManager.enableWaiting(!1);const h=this.#s=document.createElement("canvas");h.setAttribute("role","img"),this.addContainer(h),this.width=e/a,this.height=i/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,e,i=!1){t||(t=224);const{width:a,height:l}=this.#t,c=new qn;let h=this.#t,d=a,f=l,g=null;if(e){if(a>e||l>e){const P=Math.min(e/a,e/l);d=Math.floor(a*P),f=Math.floor(l*P)}g=document.createElement("canvas");const v=g.width=Math.ceil(d*c.sx),w=g.height=Math.ceil(f*c.sy);this.#l||(h=this.#u(v,w));const _=g.getContext("2d");_.filter=this._uiManager.hcmFilter;let x="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":E2.isDarkMode&&(x="#8f8f9d",S="#42414d");const E=15,T=E*c.sx,R=E*c.sy,k=new OffscreenCanvas(T*2,R*2),L=k.getContext("2d");L.fillStyle=x,L.fillRect(0,0,T*2,R*2),L.fillStyle=S,L.fillRect(0,0,T,R),L.fillRect(T,R,T,R),_.fillStyle=_.createPattern(k,"repeat"),_.fillRect(0,0,v,w),_.drawImage(h,0,0,h.width,h.height,0,0,v,w)}let m=null;if(i){let v,w;if(c.symmetric&&h.width<t&&h.height<t)v=h.width,w=h.height;else if(h=this.#t,a>t||l>t){const S=Math.min(t/a,t/l);v=Math.floor(a*S),w=Math.floor(l*S),this.#l||(h=this.#u(v,w))}const x=new OffscreenCanvas(v,w).getContext("2d",{willReadFrequently:!0});x.drawImage(h,0,0,h.width,h.height,0,0,v,w),m={width:v,height:w,data:x.getImageData(0,0,v,w).data}}return{canvas:g,width:d,height:f,imageData:m}}#u(t,e){const{width:i,height:a}=this.#t;let l=i,c=a,h=this.#t;for(;l>2*t||c>2*e;){const d=l,f=c;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),c>2*e&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const g=new OffscreenCanvas(l,c);g.getContext("2d").drawImage(h,0,0,d,f,0,0,l,c),h=g.transferToImageBitmap()}return h}#p(){const[t,e]=this.parentDimensions,{width:i,height:a}=this,l=new qn,c=Math.ceil(i*t*l.sx),h=Math.ceil(a*e*l.sy),d=this.#s;if(!d||d.width===c&&d.height===h)return;d.width=c,d.height=h;const f=this.#l?this.#t:this.#u(c,h),g=d.getContext("2d");g.filter=this._uiManager.hcmFilter,g.drawImage(f,0,0,f.width,f.height,0,0,c,h)}#y(t){if(t){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#e);if(a)return a}const e=document.createElement("canvas");return{width:e.width,height:e.height}=this.#t,e.getContext("2d").drawImage(this.#t,0,0),e.toDataURL()}if(this.#l){const[e,i]=this.pageDimensions,a=Math.round(this.width*e*la.PDF_TO_CSS_UNITS),l=Math.round(this.height*i*la.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,l);return c.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,a,l),c.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,e,i){let a=null,l=!1;if(t instanceof uA){const{data:{rect:x,rotation:S,id:E,structParent:T,popupRef:R,richText:k,contentsObj:L,creationDate:P,modificationDate:j},container:X,parent:{page:{pageNumber:K}},canvas:et}=t;let Z,ct;et?(delete t.canvas,{id:Z,bitmap:ct}=i.imageManager.getFromCanvas(X.id,et),et.remove()):(l=!0,t._hasNoCanvas=!0);const St=(await e._structTree.getAriaAttributes(`${cr}${E}`))?.get("aria-label")||"";a=t={annotationType:At.STAMP,bitmapId:Z,bitmap:ct,pageIndex:K-1,rect:x.slice(0),rotation:S,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:St},isSvg:!1,structParent:T,popupRef:R,richText:k,comment:L?.str||null,creationDate:P,modificationDate:j}}const c=await super.deserialize(t,e,i),{rect:h,bitmap:d,bitmapUrl:f,bitmapId:g,isSvg:m,accessibilityData:v}=t;l?(i.addMissingCanvas(t.id,c),c.#o=!0):g&&i.imageManager.isValidId(g)?(c.#e=g,d&&(c.#t=d)):c.#n=f,c.#l=m;const[w,_]=c.pageDimensions;return c.width=(h[2]-h[0])/w,c.height=(h[3]-h[1])/_,v&&(c.altTextData=v),c._initialData=a,t.comment&&c.setCommentData(t),c.#d=!!a,c}serialize(t=!1,e=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#l});if(this.addComment(i),t)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:l}=this.serializeAltText(!1);if(!a&&l&&(i.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const h=this.#v(i);return h.isSame?null:(h.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(e===null)return i;e.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!e.stamps.has(this.#e))e.stamps.set(this.#e,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const h=e.stamps.get(this.#e);c>h.area&&(h.area=c,h.serialized.bitmap.close(),h.serialized.bitmap=this.#y(!1))}return i}#v(t){const{pageIndex:e,accessibilityData:{altText:i}}=this._initialData,a=t.pageIndex===e,l=(t.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class ai{#t;#e=!1;#i=null;#n=null;#r=null;#a=new Map;#s=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([Me,Rp,JD,be,ii].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:a,accessibilityManager:l,annotationLayer:c,drawLayer:h,textLayer:d,viewport:f,l10n:g}){const m=[...ai.#p.values()];if(!ai._initialized){ai._initialized=!0;for(const v of m)v.initialize(g,t)}t.registerEditorTypes(m),this.#u=t,this.pageIndex=e,this.div=i,this.#t=l,this.#i=c,this.viewport=f,this.#h=d,this.drawLayer=h,this._structTree=a,this.#u.addLayer(this)}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===At.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#A(),t){case At.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case At.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case At.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;if(e.toggle("nonEditing",!1),t===At.POPUP)e.toggle("commentEditing",!0);else{e.toggle("commentEditing",!1);for(const i of ai.#p.values())e.toggle(`${i._type}Editing`,t===i._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#i?.togglePointerEvents(t)}get#y(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),t.add(i.annotationElementId));const e=this.#i;if(e)for(const i of e.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||t.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const a=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",l=>{const{clientX:h,clientY:d,timeStamp:f}=l,g=this.#g;if(f-g>500){this.#g=f;return}this.#g=-1;const{classList:m}=this.div;m.toggle("getElements",!0);const v=document.elementsFromPoint(h,d);if(m.toggle("getElements",!1),!this.div.contains(v[0]))return;let w;const _=new RegExp(`^${Wo}[0-9]+$`);for(const S of v)if(_.test(S.id)){w=S.id;break}if(!w)return;const x=this.#a.get(w);x?.annotationElementId===null&&(l.stopPropagation(),l.preventDefault(),x.dblclick(l))},{signal:a,capture:!0})}const t=this.#i,e=[];if(t){const a=new Map,l=new Map;for(const h of this.#y){if(h.disableEditing(),!h.annotationElementId){e.push(h);continue}if(h.serialize()!==null){a.set(h.annotationElementId,h);continue}else l.set(h.annotationElementId,h);this.getEditableAnnotation(h.annotationElementId)?.show(),h.remove()}const c=t.getEditableAnnotations();for(const h of c){const{id:d}=h.data;if(this.#u.isDeletedAnnotationElement(d)){h.updateEdited({deleted:!0});continue}let f=l.get(d);if(f){f.resetAnnotationElement(h),f.show(!1),h.show();continue}f=a.get(d),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(h)&&f.show(!1)),h.show()}}this.#A(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of ai.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),t?.updateFakeAnnotations(e),this.#o=!1}getEditableAnnotation(t){return this.#i?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:e}=t;if(e===this.#h.div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&this.#h.div.contains(e)){const{isMac:i}=Ee.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),be.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const t=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){this.#n?.abort(),this.#n=null}attach(t){this.#a.set(t.id,t);const{annotationElementId:e}=t;e&&this.#u.isDeletedAnnotationElement(e)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#a.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#o&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t),ht.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),e.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getEditorByUID(t){for(const e of this.#a.values())if(e.uid===t)return e;return null}getNextId(){return this.#u.getId()}get#b(){return ai.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const e=this.#b;return e?new e.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:i,offsetY:a}=this.#S(),l=this.getNextId(),c=this.#E({parent:this,id:l,x:i,y:a,uiManager:this.#u,isCentered:!0,...e});c&&this.add(c)}async deserialize(t){return await ai.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,e,i={}){const a=this.getNextId(),l=this.#E({parent:this,id:a,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:e,...i});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:t,y:e,width:i,height:a}=this.boundingClientRect,l=Math.max(0,t),c=Math.max(0,e),h=Math.min(window.innerWidth,t+i),d=Math.min(window.innerHeight,e+a),f=(l+h)/2-t,g=(c+d)/2-e,[m,v]=this.viewport.rotation%180===0?[f,g]:[g,f];return{offsetX:m,offsetY:v}}addNewEditor(t={}){this.createAndAddNewEditor(this.#S(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:e}=Ee.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const i=this.#u.getMode();if(i===At.STAMP||i===At.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===At.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:e}=Ee.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(t);return}const i=this.#u.getActive();this.#e=!i||i.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const e=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:e}),this.#b.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&(this.#d=e);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#b.endDrawing(t)):null}findNewParent(t,e,i){const a=this.#u.findParent(e,i);return a===null||a===this?!1:(a.changeParent(t),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#a.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#A(){for(const t of this.#a.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,Ms(this.div,t);for(const e of this.#u.getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#A();const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,Ms(this.div,{rotation:i}),e!==i)for(const a of this.#a.values())a.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return this.#u.viewParameters.realScale}}class Le{#t=null;#e=new Map;#i=new Map;static#n=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const e of this.#e.values())e.remove(),t.append(e);this.#t=t}}static get _svgFactory(){return bt(this,"_svgFactory",new Jo)}static#r(t,[e,i,a,l]){const{style:c}=t;c.top=`${100*i}%`,c.left=`${100*e}%`,c.width=`${100*a}%`,c.height=`${100*l}%`}#a(){const t=Le._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#s(t,e){const i=Le._svgFactory.createElement("clipPath");t.append(i);const a=`clip_${e}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const l=Le._svgFactory.createElement("use");return i.append(l),l.setAttribute("href",`#${e}`),l.classList.add("clip"),a}#o(t,e){for(const[i,a]of Object.entries(e))a===null?t.removeAttribute(i):t.setAttribute(i,a)}draw(t,e=!1,i=!1){const a=Le.#n++,l=this.#a(),c=Le._svgFactory.createElement("defs");l.append(c);const h=Le._svgFactory.createElement("path");c.append(h);const d=`path_p${this.pageIndex}_${a}`;h.setAttribute("id",d),h.setAttribute("vector-effect","non-scaling-stroke"),e&&this.#i.set(a,h);const f=i?this.#s(c,d):null,g=Le._svgFactory.createElement("use");return l.append(g),g.setAttribute("href",`#${d}`),this.updateProperties(l,t),this.#e.set(a,l),{id:a,clipPathId:`url(#${f})`}}drawOutline(t,e){const i=Le.#n++,a=this.#a(),l=Le._svgFactory.createElement("defs");a.append(l);const c=Le._svgFactory.createElement("path");l.append(c);const h=`path_p${this.pageIndex}_${i}`;c.setAttribute("id",h),c.setAttribute("vector-effect","non-scaling-stroke");let d;if(e){const m=Le._svgFactory.createElement("mask");l.append(m),d=`mask_p${this.pageIndex}_${i}`,m.setAttribute("id",d),m.setAttribute("maskUnits","objectBoundingBox");const v=Le._svgFactory.createElement("rect");m.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=Le._svgFactory.createElement("use");m.append(w),w.setAttribute("href",`#${h}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const f=Le._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${h}`),d&&f.setAttribute("mask",`url(#${d})`);const g=f.cloneNode();return a.append(g),f.classList.add("mainOutline"),g.classList.add("secondaryOutline"),this.updateProperties(a,t),this.#e.set(i,a),i}finalizeDraw(t,e){this.#i.delete(t),this.updateProperties(t,e)}updateProperties(t,e){if(!e)return;const{root:i,bbox:a,rootClass:l,path:c}=e,h=typeof t=="number"?this.#e.get(t):t;if(h){if(i&&this.#o(h,i),a&&Le.#r(h,a),l){const{classList:d}=h;for(const[f,g]of Object.entries(l))d.toggle(f,g)}if(c){const f=h.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(t,e){if(e===this)return;const i=this.#e.get(t);i&&(e.#t.append(i),this.#e.delete(t),e.#e.set(t,i))}remove(t){this.#i.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Uf};globalThis.pdfjsLib={AbortException:qi,AnnotationEditorLayer:ai,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:$i,AnnotationLayer:Tu,AnnotationMode:Pi,AnnotationType:ye,applyOpacity:Pw,build:aA,ColorPicker:wn,createValidAbsoluteUrl:fp,CSSConstants:Iw,DOMSVGFactory:Jo,DrawLayer:Le,FeatureTest:Ee,fetchData:Dr,findContrastColor:jw,getDocument:eA,getFilenameFromUrl:Mw,getPdfFilenameFromUrl:Lw,getRGB:Nr,getUuid:gp,getXfaPageViewport:Ow,GlobalWorkerOptions:ra,ImageKind:zo,InvalidPDFException:uu,isDataScheme:dl,isPdfFile:_u,isValidExplicitDest:Hw,MathClamp:Ge,noContextMenu:xn,normalizeUnicode:Nw,OPS:xr,OutputScale:qn,PasswordResponses:Rw,PDFDataRangeTransport:Ep,PDFDateString:hu,PDFWorker:Sr,PermissionFlag:Cw,PixelsPerInch:la,RenderingCancelledException:Su,renderRichText:yp,ResponseException:Ko,setLayerDimensions:Ms,shadow:bt,SignatureExtractor:ea,stopEvent:ue,SupportedImageMimeTypes:du,TextLayer:cn,TouchManager:pl,updateUrlHash:pp,Util:st,VerbosityLevel:cl,version:sA,XfaLayer:mp};const tN=Object.freeze(Object.defineProperty({__proto__:null,AbortException:qi,AnnotationEditorLayer:ai,AnnotationEditorParamsType:Mt,AnnotationEditorType:At,AnnotationEditorUIManager:$i,AnnotationLayer:Tu,AnnotationMode:Pi,AnnotationType:ye,CSSConstants:Iw,ColorPicker:wn,DOMSVGFactory:Jo,DrawLayer:Le,FeatureTest:Ee,GlobalWorkerOptions:ra,ImageKind:zo,InvalidPDFException:uu,MathClamp:Ge,OPS:xr,OutputScale:qn,PDFDataRangeTransport:Ep,PDFDateString:hu,PDFWorker:Sr,PasswordResponses:Rw,PermissionFlag:Cw,PixelsPerInch:la,RenderingCancelledException:Su,ResponseException:Ko,SignatureExtractor:ea,SupportedImageMimeTypes:du,TextLayer:cn,TouchManager:pl,Util:st,VerbosityLevel:cl,XfaLayer:mp,applyOpacity:Pw,build:aA,createValidAbsoluteUrl:fp,fetchData:Dr,findContrastColor:jw,getDocument:eA,getFilenameFromUrl:Mw,getPdfFilenameFromUrl:Lw,getRGB:Nr,getUuid:gp,getXfaPageViewport:Ow,isDataScheme:dl,isPdfFile:_u,isValidExplicitDest:Hw,noContextMenu:xn,normalizeUnicode:Nw,renderRichText:yp,setLayerDimensions:Ms,shadow:bt,stopEvent:ue,updateUrlHash:pp,version:sA},Symbol.toStringTag,{value:"Module"}));ra.workerPort=new Worker(new URL("/assets/pdf.worker.min-BHtGh23B.js",import.meta.url),{type:"module"});const K0=async r=>{try{let t="";for(let e=1;e<=r.numPages;e++){const l=(await(await r.getPage(e)).getTextContent()).items.map(c=>c.str).join(" ");t+=l+"\f"}return t}catch(t){return console.error("Error extracting text from PDF:",t),"PDF text content"}},Q0=async r=>{let t;if(typeof r=="string")t=new TextEncoder().encode(r);else if(r instanceof ArrayBuffer)t=new Uint8Array(r);else if(r instanceof Uint8Array)t=r;else throw new Error("computeSHA256: unsupported input type");const e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(a=>a.toString(16).padStart(2,"0")).join("")};function qc({pageCount:r,extractedText:t,pdfSizeBytes:e}){const i=String(t||""),l=i.split("\f").filter(c=>c!==void 0).slice(0,r).map(c=>String(c||"").trim().length);return{pageCount:r,charsPerPage:l,totalChars:i.replace(/\f/g,"").length,pdfSizeBytes:e||0}}const Z0=()=>{const{authState:r,app:t,auth:e}=da(),i=typeof window<"u"&&window.MOCK_AUTH,[a,l]=I.useState(null),[c,h]=I.useState({}),[d,f]=I.useState(!1),[g,m]=I.useState(null),[v,w]=I.useState(null),[_,x]=I.useState(1),[S,E]=I.useState(1.5),[T,R]=I.useState(null),[k,L]=I.useState(""),[P,j]=I.useState(null),[X,K]=I.useState([]),[et,Z]=I.useState([]),[ct,St]=I.useState([]),[q,ot]=I.useState(null),[M,U]=I.useState(""),[J,vt]=I.useState(!1),[yt,D]=I.useState(null),[V,Q]=I.useState(!1),[it,dt]=I.useState("legal_contract_generic"),[gt,ft]=I.useState(null),[ie,Pt]=I.useState(null),[$n,Bn]=I.useState(null),fi=I.useRef(null),{documentId:ga,fileName:Ve}=fv(),Ki=jn(),Qi=ua(),Ue=t?Sw(t):null,{canvasRef:yl,textLayerRef:kr,annotationsRef:Mr,renderPage:Lr}=d2(g,S);I.useEffect(()=>{r.status==="error"&&r.error?l(r.error.message||"Firebase authentication error"):t||l("Firebase not initialized properly")},[r,t]);const Ls=()=>i&&r.status==="authenticated"?!0:t&&Ue&&r.status==="authenticated";I.useEffect(()=>{(async()=>{const nt=await hp(()=>Promise.resolve().then(()=>tN),[]);window.pdfjsLib=nt,vt(!0),Ve&&await $e(Ve)})()},[Ve]),I.useEffect(()=>{Ki.state?.document&&!Ve&&J&&(R(Ki.state.document),Xn(Ki.state.document.file))},[Ki,Ve,J]),I.useEffect(()=>{g&&_&&Lr(_,X,et,ct)},[g,_,S,X,et,ct]);const{types:Ru}=Tw(),Fe=tt=>Ru.find(nt=>nt.id===tt)||null,ma=Fe(ie||it),bl=Fe(it),[ya,Or]=I.useState(!1),Yn=ma?.validationSlug||null,Os=h2(Yn),vl=async tt=>{if(!(!Ue||i))try{const nt=await JR({functions:Ue,docHash:tt})||{};nt?.overrideTypeId&&Pt(nt.overrideTypeId),nt?.detected?.typeId&&dt(nt.detected.typeId),nt?.detected&&ft({intakeCategory:nt.detected.intakeCategory||null,confidence:typeof nt.detected.confidence=="number"?nt.detected.confidence:null,model:nt.detected.model||null,updatedAt:nt.detected.updatedAt||null})}catch(nt){console.warn("Failed to load server document type state",nt)}},Zi=async({docHashValue:tt,stats:nt,text:Dt})=>{if(!(!Ue||i))try{const Tt=await t2({functions:Ue,docHash:tt,stats:nt,text:Dt})||{};Tt?.typeId&&dt(Tt.typeId),ft({intakeCategory:Tt.intakeCategory||null,confidence:typeof Tt.confidence=="number"?Tt.confidence:null,model:Tt.model||"heuristic-v1",updatedAt:null})}catch(Tt){console.warn("Failed to detect document type",Tt)}},qe=async(tt,nt)=>{try{localStorage.setItem(`decodocs:doctype:${tt}`,String(nt))}catch{}if(!(!Ue||i))try{await ZR({functions:Ue,docHash:tt,typeId:nt})}catch(Dt){console.warn("Failed to persist doc type override",Dt)}},Xn=async tt=>{if(!(!window.pdfjsLib||!tt))try{f(!0);const nt=tt.name||"document";U(`Loading ${nt}...`);const Dt=await tt.arrayBuffer();console.log("PDF Buffer Size:",Dt.byteLength);const Tt=await Q0(Dt);ot(Tt);try{const Jt=localStorage.getItem(`decodocs:doctype:${Tt}`);Jt&&Pt(Jt)}catch{}await vl(Tt);const Zt=await window.pdfjsLib.getDocument({data:Dt,onProgress:Jt=>{const te=Math.round(Jt.loaded/Jt.total*100);U(`Loading ${nt}: ${te}%`)}}).promise;m(Zt),w(Zt.numPages),U(`Extracting text from ${nt}...`);const se=await K0(Zt);L(se);const Lt=qc({pageCount:Zt.numPages,extractedText:se,pdfSizeBytes:Dt.byteLength});j(Lt),Zi({docHashValue:Tt,stats:Lt,text:se}),x(1),U("")}catch(nt){console.error("Error loading PDF from blob:",nt),console.error(nt.stack),U("")}finally{f(!1)}},$e=async tt=>{if(window.pdfjsLib)try{f(!0),U(`Loading ${tt}...`);const nt=`/test-docs/${tt}`,Dt=await fetch(nt);if(!Dt.ok)throw new Error(`Failed to fetch PDF: ${Dt.statusText}`);const Tt=await Dt.arrayBuffer(),Te=await Q0(Tt);ot(Te);try{const te=localStorage.getItem(`decodocs:doctype:${Te}`);te&&Pt(te)}catch{}await vl(Te);const se=await window.pdfjsLib.getDocument({data:Tt,onProgress:te=>{const ze=Math.round(te.loaded/te.total*100);U(`Loading ${tt}: ${ze}%`)}}).promise;m(se),w(se.numPages),R({id:tt,name:tt,size:Tt.byteLength,type:"application/pdf",file:null}),U(`Extracting text from ${tt}...`);const Lt=await K0(se);L(Lt);const Jt=qc({pageCount:se.numPages,extractedText:Lt,pdfSizeBytes:Tt.byteLength});j(Jt),Zi({docHashValue:Te,stats:Jt,text:Lt}),x(1),U("")}catch(nt){console.error("Error loading test PDF:",nt),U(""),D({title:"Could not load PDF",message:nt?.message||"Failed to load test PDF.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{f(!1)}},Du=()=>{_<=1||x(_-1)},Nu=()=>{_>=v||x(_+1)},ku=()=>{E(tt=>Math.min(tt+.2,3))},ba=()=>{E(tt=>Math.max(tt-.2,.5))},va=tt=>{const Dt=Array.from(tt.target.files).filter(Tt=>Tt.type==="application/pdf");if(Dt.length>0){const Tt=Dt[0],Te={id:Date.now()+Math.random(),name:Tt.name,size:Tt.size,type:Tt.type,file:Tt};R(Te),Qi("/view",{state:{document:Te}})}},wa=async()=>{if(!k||!v)return{ok:!0,classification:"OK"};if(i)return{ok:!0,classification:"OK"};if(!Ue)return console.error("Firebase functions not available. Returning default response."),{ok:!0,classification:"OK"};try{const tt=qc({pageCount:v,extractedText:k,pdfSizeBytes:T?.size||0});return await e2({functions:Ue,docHash:q,stats:tt})}catch(tt){return console.error("Preflight check error:",tt),{ok:!0,classification:"OK"}}},pi=async()=>{if(!(!T||!k||!q)){if(!Ls()){console.warn("Type-specific analysis unavailable: Firebase services not accessible.");return}h(tt=>({...tt,[T.id]:{...tt[T.id]||{},_meta:{status:"loading",message:"Running type-specific analysis"}}})),f(!0);try{if(i){D({title:"Type-specific analysis (beta)",message:"Not available in mock mode yet.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null}),h(Dt=>({...Dt,[T.id]:{...Dt[T.id]||{},_meta:{status:"error",message:"Not available in mock mode yet."}}}));return}const tt=await QR({functions:Ue,docHash:q,text:k})||{},nt={ok:!!tt.ok,effectiveTypeId:tt.effectiveTypeId||null,validationSlug:tt.validationSlug||null,validationTitle:tt.validationSpec?.title||null,message:tt.message||null,result:tt.result||null,usage:tt.usage||null,requiredTier:tt.requiredTier||null,code:tt.code||null};h(Dt=>({...Dt,[T.id]:{...Dt[T.id]||{},_meta:{status:"success"},typeSpecific:nt}})),D({title:"Type-specific analysis (beta)",message:`effectiveTypeId: ${nt.effectiveTypeId||"null"}
validationSlug: ${nt.validationSlug||"null"}

`+(nt.validationTitle?`Spec: ${nt.validationTitle}

`:"")+(nt.message||""),primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}catch(tt){console.error("analyzeByType error:",tt),h(nt=>({...nt,[T.id]:{...nt[T.id]||{},_meta:{status:"error",message:tt?.message||"Request failed."}}})),D({title:"Type-specific analysis failed",message:tt?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{f(!1)}}},Aa=async()=>{if(!(!T||!k||!q)){if(!Ls()){console.warn("Document analysis unavailable: Firebase services not accessible.");return}h(tt=>({...tt,[T.id]:{...tt[T.id]||{},_meta:{status:"loading",message:"Running analysis"}}})),f(!0);try{const tt=await wa();if(!tt.ok)throw console.error("Preflight check failed:",tt),new Error(tt.message||"Preflight check failed");if(tt.classification==="PRO_REQUIRED"){const se=tt.reasons?.map(Lt=>Lt.message).join(" ")||"This document requires Pro features (OCR / deeper processing).";h(Lt=>({...Lt,[T.id]:{...Lt[T.id]||{},_meta:{status:"error",message:se}}})),D({title:"Pro required",message:se,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}const nt=qc({pageCount:v,extractedText:k,pdfSizeBytes:T?.size||0}),Dt=k.split("\f"),{charsPerPage:Tt,totalChars:Te}=nt;let Zt;if(i?Zt={data:await(await fetch("/analyzeText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,stats:{pageCount:v,charsPerPage:Tt,totalChars:Te,languageHint:"en"},text:{format:"paged",value:k},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}})})).json()}:Zt=await n2({functions:Ue,payload:{docHash:q,stats:{pageCount:v,charsPerPage:Tt,totalChars:Te,languageHint:"en"},text:{format:"paged",value:k,pageTextIndex:Dt.map((se,Lt)=>({page:Lt+1,start:0,end:se.length}))},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}}}),Zt.data.ok){D(null);const se={_meta:{status:"success"},summary:Zt.data.result.plainExplanation,keyPoints:[],risks:Zt.data.result.risks.map(Lt=>({id:Lt.id,clause:Lt.title,riskLevel:Lt.severity,description:Lt.whyItMatters,explanation:Lt.whatToCheck.join("; ")})),recommendations:Zt.data.result.risks.flatMap(Lt=>Lt.whatToCheck||[])};h(Lt=>({...Lt,[T.id]:se})),Is(se)}else{const se=Zt.data.code;if(se==="SCAN_DETECTED_PRO_REQUIRED"){const Lt=Zt.data.message||"This PDF appears to be scanned. OCR is available on Pro.";h(Jt=>({...Jt,[T.id]:{...Jt[T.id]||{},_meta:{status:"error",message:Lt}}})),D({title:"Scanned PDF (OCR requires Pro)",message:Lt,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}if(se==="ANON_TOKEN_LIMIT"){const Lt=Zt.data.message||"Anonymous token limit reached. Create a free account to continue.";h(Jt=>({...Jt,[T.id]:{...Jt[T.id]||{},_meta:{status:"error",message:Lt}}})),D({title:"Limit reached",message:Lt,primaryLabel:"Create free account",primaryTo:"/sign-in",secondaryLabel:"Cancel",secondaryTo:null});return}if(se==="FREE_TOKEN_LIMIT"){const Lt=Zt.data.message||"Daily token limit reached. Upgrade to Pro to continue.";h(Jt=>({...Jt,[T.id]:{...Jt[T.id]||{},_meta:{status:"error",message:Lt}}})),D({title:"Daily limit reached",message:Lt,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}throw console.error("Analysis failed:",Zt.data),new Error(Zt.data.message||"Analysis failed")}}catch(tt){console.error("Error analyzing document:",tt),h(nt=>({...nt,[T.id]:{...nt[T.id]||{},_meta:{status:"error",message:tt?.message||"Analysis failed."}}})),D({title:"Analysis failed",message:tt?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null});return}finally{f(!1)}}},Is=tt=>{const nt=[],Dt=[],Tt=[];tt.risks&&tt.risks.length>0&&tt.risks.forEach((Te,Zt)=>{Tt.push({id:Zt,pageNum:1,x:100+Zt*50,y:100+Zt*40,level:Te.riskLevel,description:Te.description,explanation:Te.explanation})}),K(nt),Z(Dt),St(Tt)},Mu=async()=>{if(!T||!q)return;if(!Ls()){console.warn("Explain selection unavailable: Firebase services not accessible.");return}const tt="Limitation of liability clause";try{let nt;if(i?nt={data:await(await fetch("/explainSelection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,selection:tt,documentContext:k})})).json()}:nt=await ci(Ue,"explainSelection")({docHash:q,selection:tt,documentContext:k}),nt.data.success)alert(`Explanation: ${nt.data.explanation.plainExplanation}`);else throw console.error("Explanation failed:",nt.data),new Error(nt.data.error||"Explanation failed")}catch(nt){throw console.error("Error explaining selection:",nt),nt}},wl=async()=>{if(!(!T||!q)){if(!Ls()){console.warn("Risk highlighting unavailable: Firebase services not accessible.");return}f(!0);try{let tt;if(i?tt={data:await(await fetch("/highlightRisks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,documentText:k,documentType:"contract"})})).json()}:tt=await ci(Ue,"highlightRisks")({docHash:q,documentText:k,documentType:"contract"}),tt.data.success){alert(`Found ${tt.data.risks.summary.totalRisks} risks in the document.`);const nt=tt.data.risks.items?.map((Dt,Tt)=>({id:Tt,pageNum:1,x:150+Tt*40,y:150+Tt*35,level:Dt.riskLevel,description:Dt.description,explanation:Dt.explanation}))||[];St(nt)}else throw console.error("Risk highlighting failed:",tt.data),new Error(tt.data.error||"Risk highlighting failed")}catch(tt){throw console.error("Error highlighting risks:",tt),tt}finally{f(!1)}}},Ir=async()=>{if(!(!T||!q)){if(!Ls()){console.warn("Translation unavailable: Firebase services not accessible.");return}try{const tt=k.substring(0,500);let nt;if(i?nt={data:await(await fetch("/translateToPlainEnglish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:q,legalText:tt})})).json()}:nt=await ci(Ue,"translateToPlainEnglish")({docHash:q,legalText:tt}),nt.data.success)alert(`Original: ${nt.data.translation.originalText}

Plain English: ${nt.data.translation.plainEnglishTranslation}`);else throw console.error("Translation failed:",nt.data),new Error(nt.data.error||"Translation failed")}catch(tt){throw console.error("Error translating to plain English:",tt),tt}}},Ps=()=>{T&&Qi(`/edit/${T.id}`,{state:{document:T}})};return I.useEffect(()=>()=>{g&&g.destroy()},[g]),b.jsxs(Li,{children:[yt&&b.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:16},onClick:()=>D(null),children:b.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:520,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:tt=>tt.stopPropagation(),children:[b.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:yt.title}),b.jsx("div",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:yt.message}),b.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap",justifyContent:"flex-end"},children:[yt.secondaryLabel&&b.jsx("button",{type:"button",onClick:()=>{D(null),yt.secondaryTo&&Qi(yt.secondaryTo)},style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:yt.secondaryLabel}),yt.primaryLabel&&b.jsx("button",{type:"button",onClick:async()=>{if(yt._kind==="confirm-override"&&$n&&q){const tt=$n.id;Pt(tt),await qe(q,tt),Bn(null),D(null);return}D(null),yt.primaryTo&&Qi(yt.primaryTo)},style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:yt.primaryLabel})]})]})}),b.jsx(u2,{open:V,detectedType:bl,onClose:()=>Q(!1),onPick:tt=>{Q(!1),Bn(tt),D({title:"Confirm document type",message:`Set document type to ${tt.label}? This will change the actions/checks we show for this document.`,primaryLabel:"Confirm",primaryTo:null,secondaryLabel:"Cancel",secondaryTo:null,_kind:"confirm-override"})}}),ya&&b.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2100,padding:16},onClick:()=>Or(!1),children:b.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:820,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)",maxHeight:"80vh",overflow:"auto"},onClick:tt=>tt.stopPropagation(),children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12},children:[b.jsxs("div",{children:[b.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Validation criteria"}),b.jsxs("div",{style:{marginTop:6,color:"#475569"},children:["Type: ",b.jsx("strong",{children:ma?.label||"Unknown"}),Yn?b.jsxs("span",{style:{color:"#94a3b8"},children:[" (",Yn,")"]}):null]})]}),b.jsx("button",{type:"button",onClick:()=>Or(!1),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),b.jsxs("div",{style:{marginTop:12},children:[Os.status==="loading"&&b.jsx("div",{style:{color:"#475569"},children:"Loading"}),Os.status==="error"&&b.jsx("div",{style:{color:"#991b1b"},children:"Could not load criteria."}),Os.status==="ready"&&b.jsxs(b.Fragment,{children:[b.jsx("div",{style:{fontWeight:900,color:"#0f172a",marginBottom:8},children:Os.spec?.title}),b.jsx("pre",{style:{whiteSpace:"pre-wrap",margin:0,color:"#0f172a",fontSize:13,lineHeight:1.6},children:Os.spec?.markdown})]})]})]})}),b.jsxs("div",{className:"flex flex-1 min-h-0 h-[calc(100vh-120px)] flex-col lg:flex-row overflow-x-hidden",children:[b.jsxs("div",{className:"flex-1 flex flex-col p-5 border-b border-gray-300 lg:border-b-0 lg:border-r min-w-0",children:[b.jsx(i2,{onFileSelect:va,onEdit:Ps,currentFileName:T?.name,pageNumber:_,numPages:v,pageScale:S,onPreviousPage:Du,onNextPage:Nu,onZoomIn:ku,onZoomOut:ba,fileInputRef:fi}),q&&b.jsxs("div",{style:{marginTop:10,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[b.jsxs("div",{style:{display:"inline-flex",gap:8,alignItems:"center",padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,color:"#0f172a",fontSize:13,flexWrap:"wrap"},children:[b.jsx("span",{style:{color:"#64748b",fontWeight:800},children:"Type:"}),b.jsx("span",{children:ma?.label||"Unknown"}),ie&&b.jsx("span",{style:{color:"#64748b",fontWeight:800},children:"(overridden)"}),gt?.intakeCategory&&b.jsxs("span",{style:{color:"#64748b",fontWeight:800},children:[" ",gt.intakeCategory]}),typeof gt?.confidence=="number"&&b.jsxs("span",{style:{color:"#94a3b8",fontWeight:800},children:["(",Math.round(gt.confidence*100),"%)"]})]}),b.jsx("button",{type:"button",onClick:()=>Q(!0),style:{padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Change"}),b.jsx("button",{type:"button",onClick:()=>Or(!0),disabled:!Yn,style:{padding:"6px 10px",borderRadius:999,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:Yn?"pointer":"not-allowed",opacity:Yn?1:.5},title:Yn?"View validation criteria":"No criteria spec for this type yet",children:"Criteria"})]}),b.jsx(s2,{pdfDoc:g,isLoading:d,loadingMessage:M,canvasRef:yl,textLayerRef:kr,annotationsRef:Mr})]}),b.jsxs("div",{className:"flex flex-col w-full lg:w-auto",children:[b.jsx(a2,{onAnalyzeDocument:Aa,onAnalyzeByType:pi,onExplainSelection:Mu,onHighlightRisks:wl,onTranslateToPlainEnglish:Ir,isLoading:d,isAuthenticated:r.status==="authenticated",hasDocument:!!T}),T&&b.jsx("div",{className:"w-full lg:w-[350px] p-5 bg-gray-50 border-t border-gray-300 lg:border-t-0 lg:border-l overflow-y-auto",children:b.jsx(o2,{analysis:c[T.id]})})]})]})]})},eN=()=>{const[r,t]=I.useState(null),[e,i]=I.useState(null),[a,l]=I.useState(!1),[c,h]=I.useState([]),[d,f]=I.useState([]),[g,m]=I.useState(null),[v,w]=I.useState({width:150,height:50}),_=I.useRef(null);I.useRef(null);const{documentId:x}=fv(),S=jn(),E=ua();I.useEffect(()=>{if(S.state?.document){i(S.state.document);const q=URL.createObjectURL(S.state.document.file);t(q)}else if(x){const q={id:x,name:`Document_${x}.pdf`,size:102400,type:"application/pdf",file:null};i(q)}},[x,S]),I.useEffect(()=>{if(e)try{const q=e?.id||x||"unknown",ot=e?.name||"document",M=`decodocs:draft:${q}:${ot}`,U=localStorage.getItem(M);if(!U)return;const J=JSON.parse(U);Array.isArray(J?.signatures)&&h(J.signatures),Array.isArray(J?.annotations)&&f(J.annotations)}catch(q){console.warn("Failed to load local draft",q)}},[e,x]);const T=q=>{const M=Array.from(q.target.files).filter(U=>U.type==="application/pdf");if(M.length>0){const U={id:Date.now()+Math.random(),name:M[0].name,size:M[0].size,type:M[0].type,file:M[0]},J=URL.createObjectURL(U.file);i(U),t(J),E(`/edit/${U.id}`,{state:{document:U}})}},R=()=>{const q=e?.id||x||"unknown",ot=e?.name||"document";return`decodocs:draft:${q}:${ot}`},k=()=>{if(!e)return;const q={savedAt:new Date().toISOString(),document:{id:e.id||x||null,name:e.name||null},signatures:c,annotations:d};try{localStorage.setItem(R(),JSON.stringify(q)),console.log("Draft saved locally")}catch(ot){console.error("Failed to save draft locally",ot)}},L=async()=>{try{if(!r&&!e?.file)return;const q=e?.name||`document_${e?.id||x||"download"}.pdf`;let ot;if(e?.file instanceof File)ot=e.file;else{const J=await fetch(r);if(!J.ok)throw new Error(`Failed to download PDF (${J.status})`);ot=await J.blob()}const M=URL.createObjectURL(ot),U=document.createElement("a");U.href=M,U.download=q,document.body.appendChild(U),U.click(),U.remove(),URL.revokeObjectURL(M)}catch(q){console.error("Download failed",q)}},P=()=>{if(!r)return;const q=window.open(r,"_blank","noopener,noreferrer");if(!q)return;const ot=()=>{try{q.focus(),q.print()}catch(M){console.error("Print failed",M)}};q.addEventListener("load",()=>setTimeout(ot,250))},j=()=>{l(!a)},X=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),M=q.clientX-ot.left,U=q.clientY-ot.top,J={id:Date.now(),x:M,y:U,width:v.width,height:v.height,text:"John Doe",date:new Date().toLocaleDateString()};h([...c,J])},K=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),M=q.clientX-ot.left,U=q.clientY-ot.top,J={id:Date.now(),x:M,y:U,text:"Important note"};f([...d,J])},et=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),M=q.clientX-ot.left,U=q.clientY-ot.top,J={id:Date.now(),x:M,y:U,width:50,height:25,text:"JD"};h([...c,J])},Z=q=>{if(!a)return;const ot=q.currentTarget.getBoundingClientRect(),M=q.clientX-ot.left,U=q.clientY-ot.top,J={id:Date.now(),x:M,y:U,width:100,height:25,text:new Date().toLocaleDateString()};h([...c,J])},ct=(q,ot)=>{w(M=>({...M,[q]:parseInt(ot)}))},St=()=>{e&&E(`/view/${e.id}`,{state:{document:e}})};return b.jsxs(b.Fragment,{children:[b.jsx("header",{className:"App-header",children:b.jsxs(Ut,{to:"/",style:{textDecoration:"none",color:"white"},children:[b.jsx("h1",{children:"DecoDocs"}),b.jsx("p",{children:b.jsx("strong",{children:"Decode documents. Act with confidence."})})]})}),b.jsxs("div",{className:"pdf-editor-layout",children:[b.jsxs("div",{className:"pdf-editor-container",children:[b.jsxs("div",{className:"pdf-controls",children:[b.jsx("button",{onClick:()=>_.current?.click(),className:"open-pdf-btn",children:"Open Different PDF"}),b.jsx("button",{onClick:St,className:"view-pdf-btn",children:"View Document"}),b.jsx("button",{onClick:j,className:`sign-mode-btn ${a?"active":""}`,children:a?"Exit Sign Mode":"Enter Sign Mode"}),e&&b.jsxs("span",{className:"current-file",children:["Current: ",e.name]}),b.jsx("input",{type:"file",ref:_,accept:".pdf",multiple:!0,onChange:T,style:{display:"none"}})]}),r?b.jsxs("div",{className:"pdf-display",onClick:a?X:void 0,children:[b.jsx("iframe",{src:r,title:"PDF Editor",width:"100%",height:"calc(100vh - 200px)",type:"application/pdf"}),a&&b.jsxs(b.Fragment,{children:[c.map(q=>b.jsx("div",{className:"signature-element",style:{position:"absolute",left:`${q.x}px`,top:`${q.y}px`,width:`${q.width}px`,height:`${q.height}px`,border:"1px solid #007acc",backgroundColor:"rgba(0, 122, 204, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",fontWeight:"bold",color:"#007acc",zIndex:1e3},children:q.text},q.id)),d.map(q=>b.jsx("div",{className:"annotation-element",style:{position:"absolute",left:`${q.x}px`,top:`${q.y}px`,padding:"5px",backgroundColor:"yellow",border:"1px solid black",fontSize:"12px",zIndex:1e3},children:q.text},q.id))]})]}):b.jsx("div",{className:"pdf-placeholder",children:b.jsx("p",{children:'No PDF selected. Click "Open PDF" to load a document.'})})]}),b.jsxs("div",{className:"editor-toolbox-section",children:[b.jsxs("div",{className:"editor-controls",children:[b.jsx("h4",{children:"Editor Controls"}),b.jsxs("div",{className:"editor-buttons",children:[b.jsx("button",{onClick:k,className:"save-btn",disabled:!e,children:"Save (local)"}),b.jsx("button",{onClick:L,className:"download-btn",disabled:!r&&!e?.file,children:"Download"}),b.jsx("button",{onClick:P,className:"print-btn",disabled:!r,children:"Print"})]})]}),b.jsxs("div",{className:"signing-tools",children:[b.jsx("h4",{children:"Signing Tools"}),b.jsxs("div",{className:"signing-buttons",children:[b.jsx("button",{onClick:q=>{q.preventDefault(),X(q)},className:"add-signature-btn",disabled:!a,children:"Add Signature"}),b.jsx("button",{onClick:q=>{q.preventDefault(),K(q)},className:"add-annotation-btn",disabled:!a,children:"Add Annotation"}),b.jsx("button",{onClick:q=>{q.preventDefault(),et(q)},className:"add-initial-btn",disabled:!a,children:"Add Initials"}),b.jsx("button",{onClick:q=>{q.preventDefault(),Z(q)},className:"add-date-btn",disabled:!a,children:"Add Date"})]}),b.jsxs("div",{className:"signature-preview",children:[b.jsx("h4",{children:"Signature Settings"}),b.jsxs("div",{className:"signature-dimensions",children:[b.jsxs("label",{children:["Width:",b.jsx("input",{type:"number",value:v.width,onChange:q=>ct("width",q.target.value),min:"50",max:"300"})]}),b.jsxs("label",{children:["Height:",b.jsx("input",{type:"number",value:v.height,onChange:q=>ct("height",q.target.value),min:"25",max:"100"})]})]})]})]}),b.jsxs("div",{className:"editing-tools",children:[b.jsx("h4",{children:"Editing Options"}),b.jsx("div",{className:"editing-options",children:b.jsxs("div",{className:"tool-option",children:[b.jsx("input",{type:"checkbox",id:"enable-comments",checked:a,onChange:j}),b.jsx("label",{htmlFor:"enable-comments",children:"Enable Signing Tools"})]})})]}),b.jsxs("div",{className:"document-info",children:[b.jsx("h4",{children:"Document Info"}),b.jsxs("ul",{children:[b.jsxs("li",{children:[b.jsx("strong",{children:"Name:"})," ",e?.name||"None selected"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Size:"})," ",(e?.size/1024).toFixed(2)," KB"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Type:"})," ",e?.type||"N/A"]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Signatures:"})," ",c.length]}),b.jsxs("li",{children:[b.jsx("strong",{children:"Annotations:"})," ",d.length]})]})]})]})]}),b.jsx("footer",{className:"standard-footer",children:b.jsxs("div",{className:"footer-content",children:[b.jsx("p",{children:" Snap Sign Pty Ltd"}),b.jsx("p",{children:"ABN 72 679 570 757"}),b.jsxs("div",{className:"footer-links",children:[b.jsx(Ut,{to:"/about",children:"About"}),b.jsx("a",{href:"#privacy",children:"Privacy Policy"}),b.jsx("a",{href:"#terms",children:"Terms of Service"}),b.jsx("a",{href:"#contact",children:"Contact"})]})]})})]})},nN=()=>b.jsxs("div",{className:"about-page",children:[b.jsx("header",{className:"App-header",children:b.jsxs(Ut,{to:"/",style:{textDecoration:"none",color:"white"},children:[b.jsx("h1",{children:"DecoDocs"}),b.jsx("p",{children:b.jsx("strong",{children:"Understand documents before you sign."})})]})}),b.jsx("main",{className:"about-main",children:b.jsxs("div",{className:"about-container",children:[b.jsxs("section",{className:"about-header",children:[b.jsx("h1",{children:"About DecoDocs"}),b.jsx("p",{children:"DecoDocs is a document intelligence product designed to help people understand what they are about to sign. Before any signature, DecoDocs explains documents in plain language, highlights caveats and unfair conditions, flags logical inconsistencies, and provides translations when needed. Our focus is clarity before commitment."})]}),b.jsxs("section",{className:"product-philosophy",children:[b.jsx("h2",{children:"What We Believe"}),b.jsxs("ul",{className:"philosophy-list",children:[b.jsx("li",{children:"Documents should be understood before being signed"}),b.jsx("li",{children:"AI should reduce information asymmetry, not introduce new ones"}),b.jsx("li",{children:"Free users deserve real value, not crippled features"}),b.jsx("li",{children:"We charge only for real costs: deeper analysis and storage"}),b.jsx("li",{children:"Documents belong to users, not platforms"})]})]}),b.jsxs("section",{className:"scope-definition",children:[b.jsx("h2",{children:"What DecoDocs Is  and Is Not"}),b.jsxs("div",{className:"scope-columns",children:[b.jsxs("div",{className:"scope-column",children:[b.jsx("h3",{children:"Is"}),b.jsxs("ul",{children:[b.jsx("li",{children:"Pre-signature document analysis"}),b.jsx("li",{children:"Plain-language explanation"}),b.jsx("li",{children:"Caveat and unfair-condition detection"}),b.jsx("li",{children:"Logical inconsistency checks"}),b.jsx("li",{children:"Ephemeral processing by default"})]})]}),b.jsxs("div",{className:"scope-column",children:[b.jsx("h3",{children:"Is Not"}),b.jsxs("ul",{children:[b.jsx("li",{children:"A document editor"}),b.jsx("li",{children:"A document management system"}),b.jsx("li",{children:'A "sign now, think later" tool'}),b.jsx("li",{children:"A storage-first SaaS"}),b.jsx("li",{children:"A replacement for legal advice"})]})]})]})]}),b.jsxs("section",{className:"decodocs-clarification",children:[b.jsx("h2",{children:"How It Relates To SnapSign"}),b.jsx("p",{children:"Snap Sign Pty Ltd builds DecoDocs. SnapSign is the company brand and broader product family; DecoDocs is the document understanding and analysis product in that family."})]}),b.jsxs("section",{className:"team-company",children:[b.jsx("h2",{children:"Company"}),b.jsx("p",{children:"SnapSign is built by a small, focused team with backgrounds in software engineering, automation, and privacy-first systems. We prioritize correctness, transparency, and long-term maintainability."}),b.jsxs("div",{className:"legal-block",children:[b.jsx("p",{children:"Snap Sign Pty Ltd"}),b.jsx("p",{children:"ABN 72 679 570 757"}),b.jsx("p",{children:"Australia"})]})]}),b.jsxs("section",{className:"collaboration-contact",children:[b.jsx("h2",{children:"Collaboration"}),b.jsx("p",{children:"We welcome serious collaboration and partnership enquiries. For certain discussions, a Non-Disclosure Agreement (NDA) may be required before sharing internal details."}),b.jsx("div",{className:"contact-info",children:b.jsxs("p",{children:["Email: ",b.jsx("a",{href:"mailto:partnerships@snapsign.com.au",children:"partnerships@snapsign.com.au"})]})})]})]})}),b.jsx("footer",{className:"about-footer",children:b.jsxs("div",{className:"footer-content",children:[b.jsx("p",{children:" Snap Sign Pty Ltd"}),b.jsx("p",{children:"ABN 72 679 570 757"}),b.jsxs("div",{className:"footer-links",children:[b.jsx(Ut,{to:"/about",children:"About"}),b.jsx(Ut,{to:"/privacy",children:"Privacy Policy"}),b.jsx(Ut,{to:"/terms",children:"Terms of Service"}),b.jsx(Ut,{to:"/contact",children:"Contact"})]})]})})]}),iN=()=>b.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[b.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Privacy Policy"}),b.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),b.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[b.jsx("p",{children:'DecoDocs ("we", "us") is built by Snap Sign Pty Ltd. This policy explains what data is processed when you use DecoDocs, what is stored, and what choices you have.'}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"What we process"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"PDF file metadata (filename, size) and content needed to render and analyze the document."}),b.jsx("li",{children:"Extracted text used to generate summaries, explanations, and risk highlights."}),b.jsx("li",{children:"Basic usage events (e.g. button clicks) to understand product performance."})]}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Storage (Free vs Pro)"}),b.jsxs("p",{children:[b.jsx("strong",{children:"Free:"})," we aim to avoid storing your files. Documents are opened for viewing and analysis without persistent storage."]}),b.jsxs("p",{children:[b.jsx("strong",{children:"Pro (optional):"})," secure storage may be available for users who explicitly choose to save documents for later access."]}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Retention"}),b.jsx("p",{children:"We retain only what is necessary to operate the service. Where storage is enabled (e.g. Pro), retention and deletion controls will be provided."}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your controls"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"You can choose whether to use free (no-storage) workflows or paid storage features when available."}),b.jsx("li",{children:"You can contact us to request deletion or export of stored data where applicable."})]}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),b.jsxs("p",{children:["Questions or requests: ",b.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),sN=()=>b.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[b.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Terms of Service"}),b.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),b.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[b.jsx("p",{children:"These terms govern use of DecoDocs provided by Snap Sign Pty Ltd. By using the service, you agree to these terms."}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Not legal advice"}),b.jsx("p",{children:"DecoDocs provides informational analysis and is not legal advice. For legal decisions, consult a qualified professional."}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Acceptable use"}),b.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[b.jsx("li",{children:"Do not upload content you do not have the right to process."}),b.jsx("li",{children:"Do not attempt to abuse, probe, or disrupt the service."}),b.jsx("li",{children:"Do not use the service for illegal activity."})]}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Availability and changes"}),b.jsx("p",{children:"The service may change over time. We may add, modify, or remove features. We may suspend access to protect the service or comply with law."}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Limitation of liability"}),b.jsx("p",{children:"To the maximum extent permitted by law, Snap Sign Pty Ltd is not liable for indirect or consequential losses arising from use of the service."}),b.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),b.jsxs("p",{children:["Questions: ",b.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),aN=()=>{const r="mailto:contact@snapsign.com?subject="+encodeURIComponent("DecoDocs signing waitlist");return b.jsxs("section",{className:"mx-auto w-full max-w-3xl px-6 py-16",children:[b.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Contact"}),b.jsxs("p",{className:"mt-4 text-slate-700",children:["For support, partnerships, or product feedback, email us at"," ",b.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"}),"."]}),b.jsxs("div",{className:"mt-10 rounded-2xl border border-slate-200 bg-white p-6",children:[b.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Signing waitlist"}),b.jsx("p",{className:"mt-2 text-slate-700",children:"Want the signing workflow? Join the waitlist and tell us your use case."}),b.jsx("a",{className:"mt-4 inline-flex rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",href:r,children:"Join the waitlist"})]})]})},$c=r=>{try{return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",maximumFractionDigits:0}).format(r)}catch{return`$${r} AUD`}},bf=({items:r})=>b.jsx("ul",{style:{margin:0,paddingLeft:18,color:"#0f172a",lineHeight:1.7},children:r.map(t=>b.jsx("li",{style:{marginBottom:6},children:t},t))});function rN(){const r=ua(),{authState:t}=da(),[e,i]=I.useState("monthly"),[a,l]=I.useState(null),c=I.useMemo(()=>e==="annual"?{label:$c(60),suffix:"/year"}:{label:$c(5),suffix:"/month"},[e]),h=async()=>{if(l(null),!t?.user){r("/sign-in?intent=upgrade");return}try{const{getFunctions:v,httpsCallable:w}=await hp(async()=>{const{getFunctions:T,httpsCallable:R}=await Promise.resolve().then(()=>Ew);return{getFunctions:T,httpsCallable:R}},void 0),_=v(),E=(await w(_,"stripeCreateCheckoutSession")({billing:e}))?.data?.url;if(!E)throw new Error("No checkout URL returned");window.location.assign(E)}catch(v){l(`Could not start Stripe checkout: ${v?.message||v}`)}},d=()=>r("/sign-in"),f={padding:"2.5rem 1.5rem",maxWidth:1100,margin:"0 auto"},g={border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},m=v=>({padding:"8px 12px",borderRadius:999,border:`1px solid ${v?"#0f172a":"#e2e8f0"}`,background:v?"#0f172a":"#ffffff",color:v?"#ffffff":"#0f172a",fontWeight:700,fontSize:13,cursor:"pointer"});return b.jsxs("div",{style:f,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[b.jsxs("div",{children:[b.jsx("h1",{style:{margin:0},children:"Pricing"}),b.jsx("p",{style:{marginTop:10,marginBottom:0,color:"#334155",lineHeight:1.6},children:"Three user types, one rule: pay only when your usage costs us money."})]}),b.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[b.jsx("button",{type:"button",onClick:()=>i("monthly"),style:m(e==="monthly"),children:"Monthly"}),b.jsx("button",{type:"button",onClick:()=>i("annual"),style:m(e==="annual"),children:"Annual"})]})]}),a&&b.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),b.jsxs("div",{style:{marginTop:22,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14},children:[b.jsxs("div",{style:g,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[b.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Anonymous"}),b.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[$c(0),b.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),b.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Try DecoDocs instantly. Minimal AI budget. No OCR. No storage."}),b.jsx("button",{type:"button",onClick:()=>r("/view"),style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Start now"}),b.jsx("div",{style:{marginTop:14},children:b.jsx(bf,{items:["AI analysis: 20k tokens per uid session","Text-only PDFs (no OCR)","No storage (browser-only)"]})})]}),b.jsxs("div",{style:g,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[b.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Free"}),b.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[$c(0),b.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),b.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create an account to get a bigger daily budget and manage linked sign-in methods."}),b.jsx("button",{type:"button",onClick:d,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Continue for free"}),b.jsx("div",{style:{marginTop:14},children:b.jsx(bf,{items:["AI analysis: 40k tokens/day per uid","Text-only PDFs (no OCR)","No storage with us (browser-only)","Link multiple providers (Google/Email/Apple/Microsoft)"]})})]}),b.jsxs("div",{style:{...g,borderColor:"#0f172a"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[b.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Pro"}),b.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[c.label,b.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:c.suffix})]})]}),b.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"OCR for scanned PDFs, unlimited analysis (for now), better model, and 5GB storage."}),b.jsx("button",{type:"button",onClick:h,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Upgrade"}),b.jsx("div",{style:{marginTop:14},children:b.jsx(bf,{items:["Unlimited AI (until abuse policy exists)","OCR / vision model for scanned PDFs","5GB storage (Contabo VPS)","Receipts + subscription management in /profile"]})})]})]}),b.jsxs("div",{style:{marginTop:22,display:"flex",gap:12,flexWrap:"wrap"},children:[b.jsx(Ut,{to:"/profile",style:{color:"#0f172a",fontWeight:800},children:"Go to profile"}),b.jsx(Ut,{to:"/terms",style:{color:"#475569",fontWeight:700},children:"Terms"}),b.jsx(Ut,{to:"/privacy",style:{color:"#475569",fontWeight:700},children:"Privacy"})]}),b.jsxs("div",{style:{marginTop:22,padding:16,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[b.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Notes"}),b.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Well prompt you to upgrade when you hit limits or when a scanned/OCR-required document is detected. Upgrade redirects to ",b.jsx("code",{children:"/pricing"}),", and account linking is handled via ",b.jsx("code",{children:"/sign-in"}),"."]})]})]})}const oN=()=>{const{search:r}=jn();return I.useMemo(()=>new URLSearchParams(r),[r])},J0=({children:r})=>b.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function lN(){const{authState:r,auth:t,signInWithGoogle:e,signInWithMicrosoft:i,signInWithApple:a,signInWithEmail:l,signUpWithEmail:c,resetPassword:h,signOutUser:d}=da(),f=ua(),g=oN(),[m,v]=I.useState(""),[w,_]=I.useState(""),[x,S]=I.useState({kind:"idle",message:""}),E=r?.user||null,T=!!E?.isAnonymous,R=g.get("intent"),k=async(Z,ct)=>{S({kind:"loading",message:"Opening sign-in"});try{if(!t)throw new Error("Auth is not available");if(t.currentUser)await EC(t.currentUser,Z);else if(ct)await ct();else throw new Error("No active session. Refresh and try again.");S({kind:"ok",message:"Signed in. Your accounts are linked."}),f("/profile")}catch(St){const q=St?.code||"";if(q==="auth/credential-already-in-use"||q==="auth/email-already-in-use"){S({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}S({kind:"error",message:St?.message||"Sign-in failed."})}},L=async()=>{S({kind:"loading",message:"Linking email"});try{if(!t)throw new Error("Auth is not available");if(!t.currentUser)throw new Error("No active session. Refresh and try again.");if(!m||!w)throw new Error("Email and password are required.");const Z=ha.credential(m,w);await JT(t.currentUser,Z),S({kind:"ok",message:"Email sign-in linked."}),f("/profile")}catch(Z){if((Z?.code||"")==="auth/email-already-in-use"){S({kind:"error",message:"Email already exists. Use Sign out, then sign in with that email, and link providers from /profile."});return}S({kind:"error",message:Z?.message||"Email linking failed."})}},P=async()=>{S({kind:"loading",message:"Signing in"});try{if(!m||!w)throw new Error("Email and password are required.");await l(m,w),S({kind:"ok",message:"Signed in."}),f("/profile")}catch(Z){S({kind:"error",message:Z?.message||"Email sign-in failed."})}},j=async()=>{S({kind:"loading",message:"Creating account"});try{if(!m||!w)throw new Error("Email and password are required.");if(String(w).length<10)throw new Error("Password must be at least 10 characters.");await c(m,w),S({kind:"ok",message:"Account created and signed in."}),f("/profile")}catch(Z){S({kind:"error",message:Z?.message||"Email sign-up failed."})}},X=async()=>{S({kind:"loading",message:"Sending reset email"});try{if(!m)throw new Error("Enter your email first.");await h(m),S({kind:"ok",message:"Password reset email sent (if the account exists)."})}catch(Z){S({kind:"error",message:Z?.message||"Password reset failed."})}},K=async()=>{await(d?d():t?op(t):Promise.resolve()),S({kind:"ok",message:"Signed out. Refreshing"}),window.location.reload()},et=R==="upgrade"?"Sign in to upgrade":"Sign in";return b.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[b.jsx("h1",{style:{marginTop:0},children:et}),b.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"We support Google, Email, Apple, and Microsoft. Linking is universal  you can attach multiple providers to one account."}),b.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[b.jsxs(J0,{children:[b.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),b.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[b.jsx("button",{type:"button",onClick:()=>k(new ri,e),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Google"}),b.jsx("button",{type:"button",onClick:()=>k(new ks("apple.com"),a),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Apple"}),b.jsx("button",{type:"button",onClick:()=>k(new ks("microsoft.com"),i),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:800,cursor:"pointer"},children:"Continue with Microsoft"})]})]}),b.jsxs(J0,{children:[b.jsx("div",{style:{fontWeight:900},children:"Email + password"}),b.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[b.jsx("input",{value:m,onChange:Z=>v(Z.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),b.jsx("input",{value:w,onChange:Z=>_(Z.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),b.jsxs("div",{style:{display:"grid",gap:10},children:[b.jsx("button",{type:"button",onClick:L,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Link email to current session"}),b.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[b.jsx("button",{type:"button",onClick:P,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer",flex:1},children:"Sign in with email"}),b.jsx("button",{type:"button",onClick:j,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer",flex:1},children:"Create account"})]}),b.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[b.jsx("button",{type:"button",onClick:X,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Reset password"}),b.jsx("button",{type:"button",onClick:K,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]})]}),b.jsx("div",{style:{color:"#64748b",fontSize:13,lineHeight:1.5},children:"Recommended password minimum: 10 chars. If an email already exists and linking fails, sign out then sign in using that email."})]})]})]}),x.kind!=="idle"&&b.jsx("div",{style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(x.kind==="error"?"#fecaca":"#bbf7d0"),background:x.kind==="error"?"#fef2f2":"#f0fdf4",color:x.kind==="error"?"#991b1b":"#166534"},children:x.message}),b.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[b.jsx(Ut,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),b.jsx(Ut,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),b.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[b.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),b.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",b.jsx("strong",{children:r?.status}),b.jsx("br",{}),"UID: ",b.jsx("code",{children:E?.uid||"n/a"}),b.jsx("br",{}),"Anonymous: ",b.jsx("strong",{children:String(T)})]})]})]})}function cN(){const{authState:r,auth:t}=da(),e=ua(),i=r?.user,[a,l]=I.useState(null),c=async()=>{t&&(await op(t),window.location.reload())},h=async()=>{l(null);try{const{getFunctions:d,httpsCallable:f}=await hp(async()=>{const{getFunctions:_,httpsCallable:x}=await Promise.resolve().then(()=>Ew);return{getFunctions:_,httpsCallable:x}},void 0),g=d(),w=(await f(g,"stripeCreatePortalSession")({}))?.data?.url;if(!w)throw new Error("No portal URL returned");window.location.assign(w)}catch(d){l(`Could not open Stripe portal: ${d?.message||d}`)}};return b.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[b.jsx("h1",{style:{marginTop:0},children:"Profile"}),b.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Manage linked accounts and subscription. Receipts and subscription management use Stripe Customer Portal."}),a&&b.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:a}),b.jsxs("div",{style:{marginTop:16,padding:16,borderRadius:14,border:"1px solid #e2e8f0",background:"#fff"},children:[b.jsx("div",{style:{fontWeight:900},children:"Session"}),b.jsxs("div",{style:{marginTop:10,color:"#0f172a",lineHeight:1.7},children:["Status: ",b.jsx("strong",{children:r?.status}),b.jsx("br",{}),"UID: ",b.jsx("code",{children:i?.uid||"n/a"}),b.jsx("br",{}),"Anonymous: ",b.jsx("strong",{children:String(!!i?.isAnonymous)})]}),b.jsxs("div",{style:{marginTop:12,color:"#475569"},children:["Linked providers: ",i?.providerData?.length?b.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18},children:i.providerData.map(d=>b.jsxs("li",{children:[b.jsx("code",{children:d.providerId}),d.email?`  ${d.email}`:""]},d.providerId))}):b.jsx("span",{children:"none (anonymous)"})]}),b.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap"},children:[b.jsx("button",{type:"button",onClick:()=>e("/sign-in"),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Link accounts"}),b.jsx("button",{type:"button",onClick:h,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Billing & receipts"}),b.jsx("button",{type:"button",onClick:c,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]})]}),b.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[b.jsx(Ut,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Pricing"}),b.jsx(Ut,{to:"/view",style:{color:"#475569",fontWeight:700},children:"Analyze a PDF"})]})]})}class uN extends Gf.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,e){console.error("ErrorBoundary caught an error:",t,e),this.setState({error:t,errorInfo:e})}render(){return this.state.hasError?b.jsxs("div",{style:{padding:"2rem",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[b.jsx("h1",{children:"Oops! Something went wrong"}),b.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"We encountered an unexpected error. Please try refreshing the page."}),!1,b.jsx("button",{onClick:()=>window.location.href="/",style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Home"})]}):this.props.children}}const hN=()=>{const{authState:r}=da(),[t,e]=Gf.useState(!1);return r.status!=="error"||t?null:b.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"1rem",maxWidth:"400px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontFamily:"sans-serif"},role:"alert",children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[b.jsxs("div",{children:[b.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"Authentication Unavailable"}),b.jsxs("div",{style:{margin:0,color:"#856404",fontSize:"0.9rem",lineHeight:1.4},children:[b.jsx("div",{children:"Some features may be limited, but you can still view documents."}),!1]})]}),b.jsx("button",{onClick:()=>e(!0),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#856404",padding:0,marginLeft:"1rem",flexShrink:0},"aria-label":"Dismiss notification",children:""})]})})},dN=()=>{const r=[{title:"Signature placement UI",detail:"Place a signature field on a PDF with drag/drop + resize; support multiple signers."},{title:"Identity & consent",detail:"Signer authentication (email link / SSO) + explicit consent before signing."},{title:"Audit trail",detail:"Record who signed, when, from where, and what version/hash of the document was signed."},{title:"Document integrity (hashing)",detail:"Generate and store a stable doc hash; prevent signing if the PDF changes."},{title:"Signature appearance",detail:"Render a professional signature mark (typed/drawn/uploaded) with timestamp."},{title:"Export signed PDF",detail:"Produce a signed PDF + embedded audit data (or sidecar) with deterministic output."},{title:"Verification view",detail:"A public verification page that checks integrity + shows audit details safely."},{title:"Send-for-signing flow",detail:"Invite signer(s), track status (sent/viewed/signed), reminders, and expiry."},{title:"Storage & retention policy",detail:"Define what is stored for Free vs Pro, retention, deletion, and user controls."},{title:"Legal/terms UX",detail:"Terms, privacy, and not legal advice shown at decision points; versioned change notice."}];return b.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[b.jsx("h1",{style:{marginTop:0},children:"Sign PDFs"}),b.jsxs("p",{style:{marginTop:8,color:"#334155",lineHeight:1.6},children:["Signing is not ready yet. To ship a safe, verifiable signing MVP we need to complete"," ",b.jsxs("strong",{children:[r.length," tasks"]}),"."]}),b.jsxs("div",{style:{marginTop:24,padding:16,border:"1px solid #e2e8f0",borderRadius:12,background:"#ffffff"},children:[b.jsx("h2",{style:{margin:0,fontSize:18},children:"Signing MVP checklist"}),b.jsx("ol",{style:{marginTop:12,marginBottom:0,paddingLeft:18,color:"#0f172a"},children:r.map(t=>b.jsxs("li",{style:{marginBottom:12},children:[b.jsx("div",{style:{fontWeight:600},children:t.title}),b.jsx("div",{style:{color:"#475569",marginTop:4},children:t.detail})]},t.title))})]}),b.jsxs("div",{style:{marginTop:28,display:"flex",gap:12,flexWrap:"wrap"},children:[b.jsx(Ut,{to:"/view",className:"rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",children:"Analyze a PDF"}),b.jsx(Ut,{to:"/contact",className:"rounded-full border border-slate-200 bg-white px-5 py-2 text-sm font-semibold text-slate-700",children:"Join the waitlist"})]})]})};function fN(){return b.jsx(uN,{children:b.jsxs(wR,{children:[b.jsx(hN,{}),b.jsx(eE,{children:b.jsxs(k_,{children:[b.jsx(rn,{path:"/",element:b.jsx(v0,{})}),b.jsx(rn,{path:"/app",element:b.jsx(v0,{})}),b.jsx(rn,{path:"/sign",element:b.jsx(Li,{children:b.jsx(dN,{})})}),b.jsx(rn,{path:"/about",element:b.jsx(Li,{children:b.jsx(nN,{})})}),b.jsx(rn,{path:"/privacy",element:b.jsx(Li,{children:b.jsx(iN,{})})}),b.jsx(rn,{path:"/terms",element:b.jsx(Li,{children:b.jsx(sN,{})})}),b.jsx(rn,{path:"/contact",element:b.jsx(Li,{children:b.jsx(aN,{})})}),b.jsx(rn,{path:"/pricing",element:b.jsx(Li,{children:b.jsx(rN,{})})}),b.jsx(rn,{path:"/sign-in",element:b.jsx(Li,{children:b.jsx(lN,{})})}),b.jsx(rn,{path:"/profile",element:b.jsx(Li,{children:b.jsx(cN,{})})}),b.jsx(rn,{path:"/view/:documentId?",element:b.jsx("div",{className:"App",children:b.jsx(Z0,{})})}),b.jsx(rn,{path:"/view/test-docs/:fileName",element:b.jsx("div",{className:"App",children:b.jsx(Z0,{})})}),b.jsx(rn,{path:"/edit/:documentId?",element:b.jsx("div",{className:"App",children:b.jsx(eN,{})})})]})})]})})}OS.createRoot(document.getElementById("root")).render(b.jsx(Gf.StrictMode,{children:b.jsx(fN,{})}));

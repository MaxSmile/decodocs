var qy=r=>{throw TypeError(r)};var Jh=(r,e,t)=>e.has(r)||qy("Cannot "+t);var et=(r,e,t)=>(Jh(r,e,"read from private field"),t?t.call(r):e.get(r)),si=(r,e,t)=>e.has(r)?qy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),an=(r,e,t,i)=>(Jh(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t),ai=(r,e,t)=>(Jh(r,e,"access private method"),t);var Yy=(r,e,t,i)=>({set _(a){an(r,e,a,t)},get _(){return et(r,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function ap(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ef={exports:{}},_o={};var Wy;function _S(){if(Wy)return _o;Wy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:o}}return _o.Fragment=e,_o.jsx=t,_o.jsxs=t,_o}var Xy;function TS(){return Xy||(Xy=1,ef.exports=_S()),ef.exports}var y=TS(),tf={exports:{}},xe={};var Ky;function CS(){if(Ky)return xe;Ky=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function x(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function _(O,V,J){this.props=O,this.context=V,this.refs=S,this.updater=J||E}_.prototype.isReactComponent={},_.prototype.setState=function(O,V){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,V,"setState")},_.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function C(){}C.prototype=_.prototype;function T(O,V,J){this.props=O,this.context=V,this.refs=S,this.updater=J||E}var N=T.prototype=new C;N.constructor=T,w(N,_.prototype),N.isPureReactComponent=!0;var D=Array.isArray;function M(){}var P={H:null,A:null,T:null,S:null},X=Object.prototype.hasOwnProperty;function H(O,V,J){var te=J.ref;return{$$typeof:r,type:O,key:V,ref:te!==void 0?te:null,props:J}}function $(O,V){return H(O.type,V,O.props)}function Y(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function Z(O){var V={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(J){return V[J]})}var se=/\/+/g;function re(O,V){return typeof O=="object"&&O!==null&&O.key!=null?Z(""+O.key):V.toString(36)}function me(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(M,M):(O.status="pending",O.then(function(V){O.status==="pending"&&(O.status="fulfilled",O.value=V)},function(V){O.status==="pending"&&(O.status="rejected",O.reason=V)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function j(O,V,J,te,ue){var ye=typeof O;(ye==="undefined"||ye==="boolean")&&(O=null);var de=!1;if(O===null)de=!0;else switch(ye){case"bigint":case"string":case"number":de=!0;break;case"object":switch(O.$$typeof){case r:case e:de=!0;break;case p:return de=O._init,j(de(O._payload),V,J,te,ue)}}if(de)return ue=ue(O),de=te===""?"."+re(O,0):te,D(ue)?(J="",de!=null&&(J=de.replace(se,"$&/")+"/"),j(ue,V,J,"",function(Kn){return Kn})):ue!=null&&(Y(ue)&&(ue=$(ue,J+(ue.key==null||O&&O.key===ue.key?"":(""+ue.key).replace(se,"$&/")+"/")+de)),V.push(ue)),1;de=0;var lt=te===""?".":te+":";if(D(O))for(var He=0;He<O.length;He++)te=O[He],ye=lt+re(te,He),de+=j(te,V,J,ye,ue);else if(He=x(O),typeof He=="function")for(O=He.call(O),He=0;!(te=O.next()).done;)te=te.value,ye=lt+re(te,He++),de+=j(te,V,J,ye,ue);else if(ye==="object"){if(typeof O.then=="function")return j(me(O),V,J,te,ue);throw V=String(O),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return de}function q(O,V,J){if(O==null)return O;var te=[],ue=0;return j(O,te,"","",function(ye){return V.call(J,ye,ue++)}),te}function ee(O){if(O._status===-1){var V=O._result;V=V(),V.then(function(J){(O._status===0||O._status===-1)&&(O._status=1,O._result=J)},function(J){(O._status===0||O._status===-1)&&(O._status=2,O._result=J)}),O._status===-1&&(O._status=0,O._result=V)}if(O._status===1)return O._result.default;throw O._result}var ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},_e={map:q,forEach:function(O,V,J){q(O,function(){V.apply(this,arguments)},J)},count:function(O){var V=0;return q(O,function(){V++}),V},toArray:function(O){return q(O,function(V){return V})||[]},only:function(O){if(!Y(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return xe.Activity=g,xe.Children=_e,xe.Component=_,xe.Fragment=t,xe.Profiler=a,xe.PureComponent=T,xe.StrictMode=i,xe.Suspense=h,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,xe.__COMPILER_RUNTIME={__proto__:null,c:function(O){return P.H.useMemoCache(O)}},xe.cache=function(O){return function(){return O.apply(null,arguments)}},xe.cacheSignal=function(){return null},xe.cloneElement=function(O,V,J){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var te=w({},O.props),ue=O.key;if(V!=null)for(ye in V.key!==void 0&&(ue=""+V.key),V)!X.call(V,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&V.ref===void 0||(te[ye]=V[ye]);var ye=arguments.length-2;if(ye===1)te.children=J;else if(1<ye){for(var de=Array(ye),lt=0;lt<ye;lt++)de[lt]=arguments[lt+2];te.children=de}return H(O.type,ue,te)},xe.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},xe.createElement=function(O,V,J){var te,ue={},ye=null;if(V!=null)for(te in V.key!==void 0&&(ye=""+V.key),V)X.call(V,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ue[te]=V[te]);var de=arguments.length-2;if(de===1)ue.children=J;else if(1<de){for(var lt=Array(de),He=0;He<de;He++)lt[He]=arguments[He+2];ue.children=lt}if(O&&O.defaultProps)for(te in de=O.defaultProps,de)ue[te]===void 0&&(ue[te]=de[te]);return H(O,ye,ue)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(O){return{$$typeof:u,render:O}},xe.isValidElement=Y,xe.lazy=function(O){return{$$typeof:p,_payload:{_status:-1,_result:O},_init:ee}},xe.memo=function(O,V){return{$$typeof:f,type:O,compare:V===void 0?null:V}},xe.startTransition=function(O){var V=P.T,J={};P.T=J;try{var te=O(),ue=P.S;ue!==null&&ue(J,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(M,ge)}catch(ye){ge(ye)}finally{V!==null&&J.types!==null&&(V.types=J.types),P.T=V}},xe.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},xe.use=function(O){return P.H.use(O)},xe.useActionState=function(O,V,J){return P.H.useActionState(O,V,J)},xe.useCallback=function(O,V){return P.H.useCallback(O,V)},xe.useContext=function(O){return P.H.useContext(O)},xe.useDebugValue=function(){},xe.useDeferredValue=function(O,V){return P.H.useDeferredValue(O,V)},xe.useEffect=function(O,V){return P.H.useEffect(O,V)},xe.useEffectEvent=function(O){return P.H.useEffectEvent(O)},xe.useId=function(){return P.H.useId()},xe.useImperativeHandle=function(O,V,J){return P.H.useImperativeHandle(O,V,J)},xe.useInsertionEffect=function(O,V){return P.H.useInsertionEffect(O,V)},xe.useLayoutEffect=function(O,V){return P.H.useLayoutEffect(O,V)},xe.useMemo=function(O,V){return P.H.useMemo(O,V)},xe.useOptimistic=function(O,V){return P.H.useOptimistic(O,V)},xe.useReducer=function(O,V,J){return P.H.useReducer(O,V,J)},xe.useRef=function(O){return P.H.useRef(O)},xe.useState=function(O){return P.H.useState(O)},xe.useSyncExternalStore=function(O,V,J){return P.H.useSyncExternalStore(O,V,J)},xe.useTransition=function(){return P.H.useTransition()},xe.version="19.2.4",xe}var Qy;function pu(){return Qy||(Qy=1,tf.exports=CS()),tf.exports}var k=pu();const wn=ap(k);var nf={exports:{}},To={},sf={exports:{}},af={};var Zy;function RS(){return Zy||(Zy=1,(function(r){function e(j,q){var ee=j.length;j.push(q);e:for(;0<ee;){var ge=ee-1>>>1,_e=j[ge];if(0<a(_e,q))j[ge]=q,j[ee]=_e,ee=ge;else break e}}function t(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var q=j[0],ee=j.pop();if(ee!==q){j[0]=ee;e:for(var ge=0,_e=j.length,O=_e>>>1;ge<O;){var V=2*(ge+1)-1,J=j[V],te=V+1,ue=j[te];if(0>a(J,ee))te<_e&&0>a(ue,J)?(j[ge]=ue,j[te]=ee,ge=te):(j[ge]=J,j[V]=ee,ge=V);else if(te<_e&&0>a(ue,ee))j[ge]=ue,j[te]=ee,ge=te;else break e}}return q}function a(j,q){var ee=j.sortIndex-q.sortIndex;return ee!==0?ee:j.id-q.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],f=[],p=1,g=null,v=3,x=!1,E=!1,w=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function N(j){for(var q=t(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=j)i(f),q.sortIndex=q.expirationTime,e(h,q);else break;q=t(f)}}function D(j){if(w=!1,N(j),!E)if(t(h)!==null)E=!0,M||(M=!0,Z());else{var q=t(f);q!==null&&me(D,q.startTime-j)}}var M=!1,P=-1,X=5,H=-1;function $(){return S?!0:!(r.unstable_now()-H<X)}function Y(){if(S=!1,M){var j=r.unstable_now();H=j;var q=!0;try{e:{E=!1,w&&(w=!1,C(P),P=-1),x=!0;var ee=v;try{t:{for(N(j),g=t(h);g!==null&&!(g.expirationTime>j&&$());){var ge=g.callback;if(typeof ge=="function"){g.callback=null,v=g.priorityLevel;var _e=ge(g.expirationTime<=j);if(j=r.unstable_now(),typeof _e=="function"){g.callback=_e,N(j),q=!0;break t}g===t(h)&&i(h),N(j)}else i(h);g=t(h)}if(g!==null)q=!0;else{var O=t(f);O!==null&&me(D,O.startTime-j),q=!1}}break e}finally{g=null,v=ee,x=!1}q=void 0}}finally{q?Z():M=!1}}}var Z;if(typeof T=="function")Z=function(){T(Y)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,re=se.port2;se.port1.onmessage=Y,Z=function(){re.postMessage(null)}}else Z=function(){_(Y,0)};function me(j,q){P=_(function(){j(r.unstable_now())},q)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(j){j.callback=null},r.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<j?Math.floor(1e3/j):5},r.unstable_getCurrentPriorityLevel=function(){return v},r.unstable_next=function(j){switch(v){case 1:case 2:case 3:var q=3;break;default:q=v}var ee=v;v=q;try{return j()}finally{v=ee}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ee=v;v=j;try{return q()}finally{v=ee}},r.unstable_scheduleCallback=function(j,q,ee){var ge=r.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ge+ee:ge):ee=ge,j){case 1:var _e=-1;break;case 2:_e=250;break;case 5:_e=1073741823;break;case 4:_e=1e4;break;default:_e=5e3}return _e=ee+_e,j={id:p++,callback:q,priorityLevel:j,startTime:ee,expirationTime:_e,sortIndex:-1},ee>ge?(j.sortIndex=ee,e(f,j),t(h)===null&&j===t(f)&&(w?(C(P),P=-1):w=!0,me(D,ee-ge))):(j.sortIndex=_e,e(h,j),E||x||(E=!0,M||(M=!0,Z()))),j},r.unstable_shouldYield=$,r.unstable_wrapCallback=function(j){var q=v;return function(){var ee=v;v=q;try{return j.apply(this,arguments)}finally{v=ee}}}})(af)),af}var Jy;function NS(){return Jy||(Jy=1,sf.exports=RS()),sf.exports}var rf={exports:{}},Ft={};var eb;function DS(){if(eb)return Ft;eb=1;var r=pu();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(h,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:g==null?null:""+g,children:h,containerInfo:f,implementation:p}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Ft.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ft.createPortal=function(h,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(h,f,null,p)},Ft.flushSync=function(h){var f=c.T,p=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=f,i.p=p,i.d.f()}},Ft.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},Ft.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Ft.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin),v=typeof f.integrity=="string"?f.integrity:void 0,x=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:x}):p==="script"&&i.d.X(h,{crossOrigin:g,integrity:v,fetchPriority:x,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Ft.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=u(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},Ft.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=u(p,f.crossOrigin);i.d.L(h,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Ft.preloadModule=function(h,f){if(typeof h=="string")if(f){var p=u(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},Ft.requestFormReset=function(h){i.d.r(h)},Ft.unstable_batchedUpdates=function(h,f){return h(f)},Ft.useFormState=function(h,f,p){return c.H.useFormState(h,f,p)},Ft.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ft.version="19.2.4",Ft}var tb;function kS(){if(tb)return rf.exports;tb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),rf.exports=DS(),rf.exports}var nb;function MS(){if(nb)return To;nb=1;var r=NS(),e=pu(),t=kS();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var s=n,l=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(l=s.return),n=s.return;while(n)}return s.tag===3?l:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function u(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(i(188))}function f(n){var s=n.alternate;if(!s){if(s=o(n),s===null)throw Error(i(188));return s!==n?null:n}for(var l=n,d=s;;){var m=l.return;if(m===null)break;var b=m.alternate;if(b===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===b.child){for(b=m.child;b;){if(b===l)return h(m),n;if(b===d)return h(m),s;b=b.sibling}throw Error(i(188))}if(l.return!==d.return)l=m,d=b;else{for(var A=!1,R=m.child;R;){if(R===l){A=!0,l=m,d=b;break}if(R===d){A=!0,d=m,l=b;break}R=R.sibling}if(!A){for(R=b.child;R;){if(R===l){A=!0,l=b,d=m;break}if(R===d){A=!0,d=b,l=m;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==d)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),T=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function Z(n){return n===null||typeof n!="object"?null:(n=Y&&n[Y]||n["@@iterator"],typeof n=="function"?n:null)}var se=Symbol.for("react.client.reference");function re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===se?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case w:return"Fragment";case _:return"Profiler";case S:return"StrictMode";case D:return"Suspense";case M:return"SuspenseList";case H:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case E:return"Portal";case T:return n.displayName||"Context";case C:return(n._context.displayName||"Context")+".Consumer";case N:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return s=n.displayName||null,s!==null?s:re(n.type)||"Memo";case X:s=n._payload,n=n._init;try{return re(n(s))}catch{}}return null}var me=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ge=[],_e=-1;function O(n){return{current:n}}function V(n){0>_e||(n.current=ge[_e],ge[_e]=null,_e--)}function J(n,s){_e++,ge[_e]=n.current,n.current=s}var te=O(null),ue=O(null),ye=O(null),de=O(null);function lt(n,s){switch(J(ye,s),J(ue,n),J(te,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?my(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=my(s),n=gy(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}V(te),J(te,n)}function He(){V(te),V(ue),V(ye)}function Kn(n){n.memoizedState!==null&&J(de,n);var s=te.current,l=gy(s,n.type);s!==l&&(J(ue,n),J(te,l))}function Qn(n){ue.current===n&&(V(te),V(ue)),de.current===n&&(V(de),wo._currentValue=ee)}var Bn,fa;function Zn(n){if(Bn===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);Bn=s&&s[1]||"",fa=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Bn+n+fa}var pa=!1;function Nr(n,s){if(!n||pa)return"";pa=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(G){var z=G}Reflect.construct(n,[],Q)}else{try{Q.call()}catch(G){z=G}n.call(Q.prototype)}}else{try{throw Error()}catch(G){z=G}(Q=n())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(G){if(G&&z&&typeof G.stack=="string")return[G.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),A=b[0],R=b[1];if(A&&R){var L=A.split(`
`),F=R.split(`
`);for(m=d=0;d<L.length&&!L[d].includes("DetermineComponentFrameRoot");)d++;for(;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;if(d===L.length||m===F.length)for(d=L.length-1,m=F.length-1;1<=d&&0<=m&&L[d]!==F[m];)m--;for(;1<=d&&0<=m;d--,m--)if(L[d]!==F[m]){if(d!==1||m!==1)do if(d--,m--,0>m||L[d]!==F[m]){var W=`
`+L[d].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=d&&0<=m);break}}}finally{pa=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?Zn(l):""}function Ht(n,s){switch(n.tag){case 26:case 27:case 5:return Zn(n.type);case 16:return Zn("Lazy");case 13:return n.child!==s&&s!==null?Zn("Suspense Fallback"):Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 15:return Nr(n.type,!1);case 11:return Nr(n.type.render,!1);case 1:return Nr(n.type,!0);case 31:return Zn("Activity");default:return""}}function Vt(n){try{var s="",l=null;do s+=Ht(n,l),l=n,n=n.return;while(n);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Dr=Object.prototype.hasOwnProperty,kr=r.unstable_scheduleCallback,Mr=r.unstable_cancelCallback,ma=r.unstable_shouldYield,Iu=r.unstable_requestPaint,Bt=r.unstable_now,Os=r.unstable_getCurrentPriorityLevel,ml=r.unstable_ImmediatePriority,Lr=r.unstable_UserBlockingPriority,ga=r.unstable_NormalPriority,gl=r.unstable_LowPriority,Pu=r.unstable_IdlePriority,yl=r.log,ju=r.unstable_setDisableYieldValue,Is=null,Gt=null;function Jn(n){if(typeof yl=="function"&&ju(n),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Is,n)}catch{}}var Ut=Math.clz32?Math.clz32:Fu,Bu=Math.log,Uu=Math.LN2;function Fu(n){return n>>>=0,n===0?32:31-(Bu(n)/Uu|0)|0}var ya=256,Ae=262144,fe=4194304;function Le(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _t(n,s,l){var d=n.pendingLanes;if(d===0)return 0;var m=0,b=n.suspendedLanes,A=n.pingedLanes;n=n.warmLanes;var R=d&134217727;return R!==0?(d=R&~b,d!==0?m=Le(d):(A&=R,A!==0?m=Le(A):l||(l=R&~n,l!==0&&(m=Le(l))))):(R=d&~b,R!==0?m=Le(R):A!==0?m=Le(A):l||(l=d&~n,l!==0&&(m=Le(l)))),m===0?0:s!==0&&s!==m&&(s&b)===0&&(b=m&-m,l=s&-s,b>=l||b===32&&(l&4194048)!==0)?s:m}function Kt(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Ps(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function En(){var n=fe;return fe<<=1,(fe&62914560)===0&&(fe=4194304),n}function zu(n){for(var s=[],l=0;31>l;l++)s.push(n);return s}function Or(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function fw(n,s,l,d,m,b){var A=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var R=n.entanglements,L=n.expirationTimes,F=n.hiddenUpdates;for(l=A&~l;0<l;){var W=31-Ut(l),Q=1<<W;R[W]=0,L[W]=-1;var z=F[W];if(z!==null)for(F[W]=null,W=0;W<z.length;W++){var G=z[W];G!==null&&(G.lane&=-536870913)}l&=~Q}d!==0&&Qp(n,d,0),b!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=b&~(A&~s))}function Qp(n,s,l){n.pendingLanes|=s,n.suspendedLanes&=~s;var d=31-Ut(s);n.entangledLanes|=s,n.entanglements[d]=n.entanglements[d]|1073741824|l&261930}function Zp(n,s){var l=n.entangledLanes|=s;for(n=n.entanglements;l;){var d=31-Ut(l),m=1<<d;m&s|n[d]&s&&(n[d]|=s),l&=~m}}function Jp(n,s){var l=s&-s;return l=(l&42)!==0?1:Hu(l),(l&(n.suspendedLanes|s))!==0?0:l}function Hu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Vu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function em(){var n=q.p;return n!==0?n:(n=window.event,n===void 0?32:Uy(n.type))}function tm(n,s){var l=q.p;try{return q.p=n,s()}finally{q.p=l}}var Ji=Math.random().toString(36).slice(2),Mt="__reactFiber$"+Ji,Qt="__reactProps$"+Ji,ba="__reactContainer$"+Ji,Gu="__reactEvents$"+Ji,pw="__reactListeners$"+Ji,mw="__reactHandles$"+Ji,nm="__reactResources$"+Ji,Ir="__reactMarker$"+Ji;function $u(n){delete n[Mt],delete n[Qt],delete n[Gu],delete n[pw],delete n[mw]}function va(n){var s=n[Mt];if(s)return s;for(var l=n.parentNode;l;){if(s=l[ba]||l[Mt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(n=Sy(n);n!==null;){if(l=n[Mt])return l;n=Sy(n)}return s}n=l,l=n.parentNode}return null}function xa(n){if(n=n[Mt]||n[ba]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Pr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function wa(n){var s=n[nm];return s||(s=n[nm]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Tt(n){n[Ir]=!0}var im=new Set,sm={};function js(n,s){Aa(n,s),Aa(n+"Capture",s)}function Aa(n,s){for(sm[n]=s,n=0;n<s.length;n++)im.add(s[n])}var gw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),am={},rm={};function yw(n){return Dr.call(rm,n)?!0:Dr.call(am,n)?!1:gw.test(n)?rm[n]=!0:(am[n]=!0,!1)}function bl(n,s,l){if(yw(s))if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+l)}}function vl(n,s,l){if(l===null)n.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+l)}}function bi(n,s,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(s,l,""+d)}}function _n(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function om(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function bw(n,s,l){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,b=d.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(A){l=""+A,b.call(this,A)}}),Object.defineProperty(n,s,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function qu(n){if(!n._valueTracker){var s=om(n)?"checked":"value";n._valueTracker=bw(n,s,""+n[s])}}function lm(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var l=s.getValue(),d="";return n&&(d=om(n)?n.checked?"true":"false":n.value),n=d,n!==l?(s.setValue(n),!0):!1}function xl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var vw=/[\n"\\]/g;function Tn(n){return n.replace(vw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Yu(n,s,l,d,m,b,A,R){n.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?n.type=A:n.removeAttribute("type"),s!=null?A==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+_n(s)):n.value!==""+_n(s)&&(n.value=""+_n(s)):A!=="submit"&&A!=="reset"||n.removeAttribute("value"),s!=null?Wu(n,A,_n(s)):l!=null?Wu(n,A,_n(l)):d!=null&&n.removeAttribute("value"),m==null&&b!=null&&(n.defaultChecked=!!b),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?n.name=""+_n(R):n.removeAttribute("name")}function cm(n,s,l,d,m,b,A,R){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.type=b),s!=null||l!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){qu(n);return}l=l!=null?""+_n(l):"",s=s!=null?""+_n(s):l,R||s===n.value||(n.value=s),n.defaultValue=s}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=R?n.checked:!!d,n.defaultChecked=!!d,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(n.name=A),qu(n)}function Wu(n,s,l){s==="number"&&xl(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Sa(n,s,l,d){if(n=n.options,s){s={};for(var m=0;m<l.length;m++)s["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=s.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+_n(l),s=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function um(n,s,l){if(s!=null&&(s=""+_n(s),s!==n.value&&(n.value=s),l==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=l!=null?""+_n(l):""}function dm(n,s,l,d){if(s==null){if(d!=null){if(l!=null)throw Error(i(92));if(me(d)){if(1<d.length)throw Error(i(93));d=d[0]}l=d}l==null&&(l=""),s=l}l=_n(s),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d),qu(n)}function Ea(n,s){if(s){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=s;return}}n.textContent=s}var xw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hm(n,s,l){var d=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":d?n.setProperty(s,l):typeof l!="number"||l===0||xw.has(s)?s==="float"?n.cssFloat=l:n[s]=(""+l).trim():n[s]=l+"px"}function fm(n,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var m in s)d=s[m],s.hasOwnProperty(m)&&l[m]!==d&&hm(n,m,d)}else for(var b in s)s.hasOwnProperty(b)&&hm(n,b,s[b])}function Xu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ww=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Aw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(n){return Aw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function vi(){}var Ku=null;function Qu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _a=null,Ta=null;function pm(n){var s=xa(n);if(s&&(n=s.stateNode)){var l=n[Qt]||null;e:switch(n=s.stateNode,s.type){case"input":if(Yu(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Tn(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var d=l[s];if(d!==n&&d.form===n.form){var m=d[Qt]||null;if(!m)throw Error(i(90));Yu(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<l.length;s++)d=l[s],d.form===n.form&&lm(d)}break e;case"textarea":um(n,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Sa(n,!!l.multiple,s,!1)}}}var Zu=!1;function mm(n,s,l){if(Zu)return n(s,l);Zu=!0;try{var d=n(s);return d}finally{if(Zu=!1,(_a!==null||Ta!==null)&&(lc(),_a&&(s=_a,n=Ta,Ta=_a=null,pm(s),n)))for(s=0;s<n.length;s++)pm(n[s])}}function jr(n,s){var l=n.stateNode;if(l===null)return null;var d=l[Qt]||null;if(d===null)return null;l=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ju=!1;if(xi)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Ju=!1}var es=null,ed=null,Al=null;function gm(){if(Al)return Al;var n,s=ed,l=s.length,d,m="value"in es?es.value:es.textContent,b=m.length;for(n=0;n<l&&s[n]===m[n];n++);var A=l-n;for(d=1;d<=A&&s[l-d]===m[b-d];d++);return Al=m.slice(n,1<d?1-d:void 0)}function Sl(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function El(){return!0}function ym(){return!1}function Zt(n){function s(l,d,m,b,A){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=b,this.target=A,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(l=n[R],this[R]=l?l(b):b[R]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?El:ym,this.isPropagationStopped=ym,this}return g(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=El)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=El)},persist:function(){},isPersistent:El}),s}var Bs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=Zt(Bs),Ur=g({},Bs,{view:0,detail:0}),Sw=Zt(Ur),td,nd,Fr,Tl=g({},Ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Fr&&(Fr&&n.type==="mousemove"?(td=n.screenX-Fr.screenX,nd=n.screenY-Fr.screenY):nd=td=0,Fr=n),td)},movementY:function(n){return"movementY"in n?n.movementY:nd}}),bm=Zt(Tl),Ew=g({},Tl,{dataTransfer:0}),_w=Zt(Ew),Tw=g({},Ur,{relatedTarget:0}),id=Zt(Tw),Cw=g({},Bs,{animationName:0,elapsedTime:0,pseudoElement:0}),Rw=Zt(Cw),Nw=g({},Bs,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Dw=Zt(Nw),kw=g({},Bs,{data:0}),vm=Zt(kw),Mw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iw(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Ow[n])?!!s[n]:!1}function sd(){return Iw}var Pw=g({},Ur,{key:function(n){if(n.key){var s=Mw[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Sl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Lw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sd,charCode:function(n){return n.type==="keypress"?Sl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Sl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jw=Zt(Pw),Bw=g({},Tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xm=Zt(Bw),Uw=g({},Ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sd}),Fw=Zt(Uw),zw=g({},Bs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hw=Zt(zw),Vw=g({},Tl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Gw=Zt(Vw),$w=g({},Bs,{newState:0,oldState:0}),qw=Zt($w),Yw=[9,13,27,32],ad=xi&&"CompositionEvent"in window,zr=null;xi&&"documentMode"in document&&(zr=document.documentMode);var Ww=xi&&"TextEvent"in window&&!zr,wm=xi&&(!ad||zr&&8<zr&&11>=zr),Am=" ",Sm=!1;function Em(n,s){switch(n){case"keyup":return Yw.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _m(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ca=!1;function Xw(n,s){switch(n){case"compositionend":return _m(s);case"keypress":return s.which!==32?null:(Sm=!0,Am);case"textInput":return n=s.data,n===Am&&Sm?null:n;default:return null}}function Kw(n,s){if(Ca)return n==="compositionend"||!ad&&Em(n,s)?(n=gm(),Al=ed=es=null,Ca=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return wm&&s.locale!=="ko"?null:s.data;default:return null}}var Qw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Qw[n.type]:s==="textarea"}function Cm(n,s,l,d){_a?Ta?Ta.push(d):Ta=[d]:_a=d,s=mc(s,"onChange"),0<s.length&&(l=new _l("onChange","change",null,l,d),n.push({event:l,listeners:s}))}var Hr=null,Vr=null;function Zw(n){cy(n,0)}function Cl(n){var s=Pr(n);if(lm(s))return n}function Rm(n,s){if(n==="change")return s}var Nm=!1;if(xi){var rd;if(xi){var od="oninput"in document;if(!od){var Dm=document.createElement("div");Dm.setAttribute("oninput","return;"),od=typeof Dm.oninput=="function"}rd=od}else rd=!1;Nm=rd&&(!document.documentMode||9<document.documentMode)}function km(){Hr&&(Hr.detachEvent("onpropertychange",Mm),Vr=Hr=null)}function Mm(n){if(n.propertyName==="value"&&Cl(Vr)){var s=[];Cm(s,Vr,n,Qu(n)),mm(Zw,s)}}function Jw(n,s,l){n==="focusin"?(km(),Hr=s,Vr=l,Hr.attachEvent("onpropertychange",Mm)):n==="focusout"&&km()}function eA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cl(Vr)}function tA(n,s){if(n==="click")return Cl(s)}function nA(n,s){if(n==="input"||n==="change")return Cl(s)}function iA(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var dn=typeof Object.is=="function"?Object.is:iA;function Gr(n,s){if(dn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var l=Object.keys(n),d=Object.keys(s);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!Dr.call(s,m)||!dn(n[m],s[m]))return!1}return!0}function Lm(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Om(n,s){var l=Lm(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=s&&d>=s)return{node:l,offset:s-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Lm(l)}}function Im(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?Im(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Pm(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=xl(n.document);s instanceof n.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)n=s.contentWindow;else break;s=xl(n.document)}return s}function ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var sA=xi&&"documentMode"in document&&11>=document.documentMode,Ra=null,cd=null,$r=null,ud=!1;function jm(n,s,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ud||Ra==null||Ra!==xl(d)||(d=Ra,"selectionStart"in d&&ld(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),$r&&Gr($r,d)||($r=d,d=mc(cd,"onSelect"),0<d.length&&(s=new _l("onSelect","select",null,s,l),n.push({event:s,listeners:d}),s.target=Ra)))}function Us(n,s){var l={};return l[n.toLowerCase()]=s.toLowerCase(),l["Webkit"+n]="webkit"+s,l["Moz"+n]="moz"+s,l}var Na={animationend:Us("Animation","AnimationEnd"),animationiteration:Us("Animation","AnimationIteration"),animationstart:Us("Animation","AnimationStart"),transitionrun:Us("Transition","TransitionRun"),transitionstart:Us("Transition","TransitionStart"),transitioncancel:Us("Transition","TransitionCancel"),transitionend:Us("Transition","TransitionEnd")},dd={},Bm={};xi&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function Fs(n){if(dd[n])return dd[n];if(!Na[n])return n;var s=Na[n],l;for(l in s)if(s.hasOwnProperty(l)&&l in Bm)return dd[n]=s[l];return n}var Um=Fs("animationend"),Fm=Fs("animationiteration"),zm=Fs("animationstart"),aA=Fs("transitionrun"),rA=Fs("transitionstart"),oA=Fs("transitioncancel"),Hm=Fs("transitionend"),Vm=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function Un(n,s){Vm.set(n,s),js(s,[n])}var Rl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Cn=[],Da=0,fd=0;function Nl(){for(var n=Da,s=fd=Da=0;s<n;){var l=Cn[s];Cn[s++]=null;var d=Cn[s];Cn[s++]=null;var m=Cn[s];Cn[s++]=null;var b=Cn[s];if(Cn[s++]=null,d!==null&&m!==null){var A=d.pending;A===null?m.next=m:(m.next=A.next,A.next=m),d.pending=m}b!==0&&Gm(l,m,b)}}function Dl(n,s,l,d){Cn[Da++]=n,Cn[Da++]=s,Cn[Da++]=l,Cn[Da++]=d,fd|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function pd(n,s,l,d){return Dl(n,s,l,d),kl(n)}function zs(n,s){return Dl(n,null,null,s),kl(n)}function Gm(n,s,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var m=!1,b=n.return;b!==null;)b.childLanes|=l,d=b.alternate,d!==null&&(d.childLanes|=l),b.tag===22&&(n=b.stateNode,n===null||n._visibility&1||(m=!0)),n=b,b=b.return;return n.tag===3?(b=n.stateNode,m&&s!==null&&(m=31-Ut(l),n=b.hiddenUpdates,d=n[m],d===null?n[m]=[s]:d.push(s),s.lane=l|536870912),b):null}function kl(n){if(50<po)throw po=0,Sh=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var ka={};function lA(n,s,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(n,s,l,d){return new lA(n,s,l,d)}function md(n){return n=n.prototype,!(!n||!n.isReactComponent)}function wi(n,s){var l=n.alternate;return l===null?(l=hn(n.tag,s,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=s,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,s=n.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function $m(n,s){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,s=l.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Ml(n,s,l,d,m,b){var A=0;if(d=n,typeof n=="function")md(n)&&(A=1);else if(typeof n=="string")A=fS(n,l,te.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case H:return n=hn(31,l,s,m),n.elementType=H,n.lanes=b,n;case w:return Hs(l.children,m,b,s);case S:A=8,m|=24;break;case _:return n=hn(12,l,s,m|2),n.elementType=_,n.lanes=b,n;case D:return n=hn(13,l,s,m),n.elementType=D,n.lanes=b,n;case M:return n=hn(19,l,s,m),n.elementType=M,n.lanes=b,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case T:A=10;break e;case C:A=9;break e;case N:A=11;break e;case P:A=14;break e;case X:A=16,d=null;break e}A=29,l=Error(i(130,n===null?"null":typeof n,"")),d=null}return s=hn(A,l,s,m),s.elementType=n,s.type=d,s.lanes=b,s}function Hs(n,s,l,d){return n=hn(7,n,d,s),n.lanes=l,n}function gd(n,s,l){return n=hn(6,n,null,s),n.lanes=l,n}function qm(n){var s=hn(18,null,null,0);return s.stateNode=n,s}function yd(n,s,l){return s=hn(4,n.children!==null?n.children:[],n.key,s),s.lanes=l,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Ym=new WeakMap;function Rn(n,s){if(typeof n=="object"&&n!==null){var l=Ym.get(n);return l!==void 0?l:(s={value:n,source:s,stack:Vt(s)},Ym.set(n,s),s)}return{value:n,source:s,stack:Vt(s)}}var Ma=[],La=0,Ll=null,qr=0,Nn=[],Dn=0,ts=null,ei=1,ti="";function Ai(n,s){Ma[La++]=qr,Ma[La++]=Ll,Ll=n,qr=s}function Wm(n,s,l){Nn[Dn++]=ei,Nn[Dn++]=ti,Nn[Dn++]=ts,ts=n;var d=ei;n=ti;var m=32-Ut(d)-1;d&=~(1<<m),l+=1;var b=32-Ut(s)+m;if(30<b){var A=m-m%5;b=(d&(1<<A)-1).toString(32),d>>=A,m-=A,ei=1<<32-Ut(s)+m|l<<m|d,ti=b+n}else ei=1<<b|l<<m|d,ti=n}function bd(n){n.return!==null&&(Ai(n,1),Wm(n,1,0))}function vd(n){for(;n===Ll;)Ll=Ma[--La],Ma[La]=null,qr=Ma[--La],Ma[La]=null;for(;n===ts;)ts=Nn[--Dn],Nn[Dn]=null,ti=Nn[--Dn],Nn[Dn]=null,ei=Nn[--Dn],Nn[Dn]=null}function Xm(n,s){Nn[Dn++]=ei,Nn[Dn++]=ti,Nn[Dn++]=ts,ei=s.id,ti=s.overflow,ts=n}var Lt=null,Qe=null,Me=!1,ns=null,kn=!1,xd=Error(i(519));function is(n){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Yr(Rn(s,n)),xd}function Km(n){var s=n.stateNode,l=n.type,d=n.memoizedProps;switch(s[Mt]=n,s[Qt]=d,l){case"dialog":Re("cancel",s),Re("close",s);break;case"iframe":case"object":case"embed":Re("load",s);break;case"video":case"audio":for(l=0;l<go.length;l++)Re(go[l],s);break;case"source":Re("error",s);break;case"img":case"image":case"link":Re("error",s),Re("load",s);break;case"details":Re("toggle",s);break;case"input":Re("invalid",s),cm(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Re("invalid",s);break;case"textarea":Re("invalid",s),dm(s,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||d.suppressHydrationWarning===!0||fy(s.textContent,l)?(d.popover!=null&&(Re("beforetoggle",s),Re("toggle",s)),d.onScroll!=null&&Re("scroll",s),d.onScrollEnd!=null&&Re("scrollend",s),d.onClick!=null&&(s.onclick=vi),s=!0):s=!1,s||is(n,!0)}function Qm(n){for(Lt=n.return;Lt;)switch(Lt.tag){case 5:case 31:case 13:kn=!1;return;case 27:case 3:kn=!0;return;default:Lt=Lt.return}}function Oa(n){if(n!==Lt)return!1;if(!Me)return Qm(n),Me=!0,!1;var s=n.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Bh(n.type,n.memoizedProps)),l=!l),l&&Qe&&is(n),Qm(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Qe=Ay(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Qe=Ay(n)}else s===27?(s=Qe,ys(n.type)?(n=Vh,Vh=null,Qe=n):Qe=s):Qe=Lt?Ln(n.stateNode.nextSibling):null;return!0}function Vs(){Qe=Lt=null,Me=!1}function wd(){var n=ns;return n!==null&&(nn===null?nn=n:nn.push.apply(nn,n),ns=null),n}function Yr(n){ns===null?ns=[n]:ns.push(n)}var Ad=O(null),Gs=null,Si=null;function ss(n,s,l){J(Ad,s._currentValue),s._currentValue=l}function Ei(n){n._currentValue=Ad.current,V(Ad)}function Sd(n,s,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),n===l)break;n=n.return}}function Ed(n,s,l,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var b=m.dependencies;if(b!==null){var A=m.child;b=b.firstContext;e:for(;b!==null;){var R=b;b=m;for(var L=0;L<s.length;L++)if(R.context===s[L]){b.lanes|=l,R=b.alternate,R!==null&&(R.lanes|=l),Sd(b.return,l,n),d||(A=null);break e}b=R.next}}else if(m.tag===18){if(A=m.return,A===null)throw Error(i(341));A.lanes|=l,b=A.alternate,b!==null&&(b.lanes|=l),Sd(A,l,n),A=null}else A=m.child;if(A!==null)A.return=m;else for(A=m;A!==null;){if(A===n){A=null;break}if(m=A.sibling,m!==null){m.return=A.return,A=m;break}A=A.return}m=A}}function Ia(n,s,l,d){n=null;for(var m=s,b=!1;m!==null;){if(!b){if((m.flags&524288)!==0)b=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var A=m.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=m.type;dn(m.pendingProps.value,A.value)||(n!==null?n.push(R):n=[R])}}else if(m===de.current){if(A=m.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(wo):n=[wo])}m=m.return}n!==null&&Ed(s,n,l,d),s.flags|=262144}function Ol(n){for(n=n.firstContext;n!==null;){if(!dn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function $s(n){Gs=n,Si=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Ot(n){return Zm(Gs,n)}function Il(n,s){return Gs===null&&$s(n),Zm(n,s)}function Zm(n,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},Si===null){if(n===null)throw Error(i(308));Si=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else Si=Si.next=s;return l}var cA=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){s.aborted=!0,n.forEach(function(l){return l()})}},uA=r.unstable_scheduleCallback,dA=r.unstable_NormalPriority,mt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _d(){return{controller:new cA,data:new Map,refCount:0}}function Wr(n){n.refCount--,n.refCount===0&&uA(dA,function(){n.controller.abort()})}var Xr=null,Td=0,Pa=0,ja=null;function hA(n,s){if(Xr===null){var l=Xr=[];Td=0,Pa=Nh(),ja={status:"pending",value:void 0,then:function(d){l.push(d)}}}return Td++,s.then(Jm,Jm),s}function Jm(){if(--Td===0&&Xr!==null){ja!==null&&(ja.status="fulfilled");var n=Xr;Xr=null,Pa=0,ja=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function fA(n,s){var l=[],d={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return n.then(function(){d.status="fulfilled",d.value=s;for(var m=0;m<l.length;m++)(0,l[m])(s)},function(m){for(d.status="rejected",d.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),d}var eg=j.S;j.S=function(n,s){j0=Bt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hA(n,s),eg!==null&&eg(n,s)};var qs=O(null);function Cd(){var n=qs.current;return n!==null?n:Xe.pooledCache}function Pl(n,s){s===null?J(qs,qs.current):J(qs,s.pool)}function tg(){var n=Cd();return n===null?null:{parent:mt._currentValue,pool:n}}var Ba=Error(i(460)),Rd=Error(i(474)),jl=Error(i(542)),Bl={then:function(){}};function ng(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ig(n,s,l){switch(l=n[l],l===void 0?n.push(s):l!==s&&(s.then(vi,vi),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ag(n),n;default:if(typeof s.status=="string")s.then(vi,vi);else{if(n=Xe,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(d){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=d}},function(d){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,ag(n),n}throw Ws=s,Ba}}function Ys(n){try{var s=n._init;return s(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Ws=l,Ba):l}}var Ws=null;function sg(){if(Ws===null)throw Error(i(459));var n=Ws;return Ws=null,n}function ag(n){if(n===Ba||n===jl)throw Error(i(483))}var Ua=null,Kr=0;function Ul(n){var s=Kr;return Kr+=1,Ua===null&&(Ua=[]),ig(Ua,n,s)}function Qr(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Fl(n,s){throw s.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function rg(n){function s(B,I){if(n){var U=B.deletions;U===null?(B.deletions=[I],B.flags|=16):U.push(I)}}function l(B,I){if(!n)return null;for(;I!==null;)s(B,I),I=I.sibling;return null}function d(B){for(var I=new Map;B!==null;)B.key!==null?I.set(B.key,B):I.set(B.index,B),B=B.sibling;return I}function m(B,I){return B=wi(B,I),B.index=0,B.sibling=null,B}function b(B,I,U){return B.index=U,n?(U=B.alternate,U!==null?(U=U.index,U<I?(B.flags|=67108866,I):U):(B.flags|=67108866,I)):(B.flags|=1048576,I)}function A(B){return n&&B.alternate===null&&(B.flags|=67108866),B}function R(B,I,U,K){return I===null||I.tag!==6?(I=gd(U,B.mode,K),I.return=B,I):(I=m(I,U),I.return=B,I)}function L(B,I,U,K){var le=U.type;return le===w?W(B,I,U.props.children,K,U.key):I!==null&&(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Ys(le)===I.type)?(I=m(I,U.props),Qr(I,U),I.return=B,I):(I=Ml(U.type,U.key,U.props,null,B.mode,K),Qr(I,U),I.return=B,I)}function F(B,I,U,K){return I===null||I.tag!==4||I.stateNode.containerInfo!==U.containerInfo||I.stateNode.implementation!==U.implementation?(I=yd(U,B.mode,K),I.return=B,I):(I=m(I,U.children||[]),I.return=B,I)}function W(B,I,U,K,le){return I===null||I.tag!==7?(I=Hs(U,B.mode,K,le),I.return=B,I):(I=m(I,U),I.return=B,I)}function Q(B,I,U){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=gd(""+I,B.mode,U),I.return=B,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return U=Ml(I.type,I.key,I.props,null,B.mode,U),Qr(U,I),U.return=B,U;case E:return I=yd(I,B.mode,U),I.return=B,I;case X:return I=Ys(I),Q(B,I,U)}if(me(I)||Z(I))return I=Hs(I,B.mode,U,null),I.return=B,I;if(typeof I.then=="function")return Q(B,Ul(I),U);if(I.$$typeof===T)return Q(B,Il(B,I),U);Fl(B,I)}return null}function z(B,I,U,K){var le=I!==null?I.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return le!==null?null:R(B,I,""+U,K);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case x:return U.key===le?L(B,I,U,K):null;case E:return U.key===le?F(B,I,U,K):null;case X:return U=Ys(U),z(B,I,U,K)}if(me(U)||Z(U))return le!==null?null:W(B,I,U,K,null);if(typeof U.then=="function")return z(B,I,Ul(U),K);if(U.$$typeof===T)return z(B,I,Il(B,U),K);Fl(B,U)}return null}function G(B,I,U,K,le){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return B=B.get(U)||null,R(I,B,""+K,le);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return B=B.get(K.key===null?U:K.key)||null,L(I,B,K,le);case E:return B=B.get(K.key===null?U:K.key)||null,F(I,B,K,le);case X:return K=Ys(K),G(B,I,U,K,le)}if(me(K)||Z(K))return B=B.get(U)||null,W(I,B,K,le,null);if(typeof K.then=="function")return G(B,I,U,Ul(K),le);if(K.$$typeof===T)return G(B,I,U,Il(I,K),le);Fl(I,K)}return null}function ae(B,I,U,K){for(var le=null,Oe=null,oe=I,Ee=I=0,De=null;oe!==null&&Ee<U.length;Ee++){oe.index>Ee?(De=oe,oe=null):De=oe.sibling;var Ie=z(B,oe,U[Ee],K);if(Ie===null){oe===null&&(oe=De);break}n&&oe&&Ie.alternate===null&&s(B,oe),I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie,oe=De}if(Ee===U.length)return l(B,oe),Me&&Ai(B,Ee),le;if(oe===null){for(;Ee<U.length;Ee++)oe=Q(B,U[Ee],K),oe!==null&&(I=b(oe,I,Ee),Oe===null?le=oe:Oe.sibling=oe,Oe=oe);return Me&&Ai(B,Ee),le}for(oe=d(oe);Ee<U.length;Ee++)De=G(oe,B,Ee,U[Ee],K),De!==null&&(n&&De.alternate!==null&&oe.delete(De.key===null?Ee:De.key),I=b(De,I,Ee),Oe===null?le=De:Oe.sibling=De,Oe=De);return n&&oe.forEach(function(As){return s(B,As)}),Me&&Ai(B,Ee),le}function pe(B,I,U,K){if(U==null)throw Error(i(151));for(var le=null,Oe=null,oe=I,Ee=I=0,De=null,Ie=U.next();oe!==null&&!Ie.done;Ee++,Ie=U.next()){oe.index>Ee?(De=oe,oe=null):De=oe.sibling;var As=z(B,oe,Ie.value,K);if(As===null){oe===null&&(oe=De);break}n&&oe&&As.alternate===null&&s(B,oe),I=b(As,I,Ee),Oe===null?le=As:Oe.sibling=As,Oe=As,oe=De}if(Ie.done)return l(B,oe),Me&&Ai(B,Ee),le;if(oe===null){for(;!Ie.done;Ee++,Ie=U.next())Ie=Q(B,Ie.value,K),Ie!==null&&(I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie);return Me&&Ai(B,Ee),le}for(oe=d(oe);!Ie.done;Ee++,Ie=U.next())Ie=G(oe,B,Ee,Ie.value,K),Ie!==null&&(n&&Ie.alternate!==null&&oe.delete(Ie.key===null?Ee:Ie.key),I=b(Ie,I,Ee),Oe===null?le=Ie:Oe.sibling=Ie,Oe=Ie);return n&&oe.forEach(function(ES){return s(B,ES)}),Me&&Ai(B,Ee),le}function Ye(B,I,U,K){if(typeof U=="object"&&U!==null&&U.type===w&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case x:e:{for(var le=U.key;I!==null;){if(I.key===le){if(le=U.type,le===w){if(I.tag===7){l(B,I.sibling),K=m(I,U.props.children),K.return=B,B=K;break e}}else if(I.elementType===le||typeof le=="object"&&le!==null&&le.$$typeof===X&&Ys(le)===I.type){l(B,I.sibling),K=m(I,U.props),Qr(K,U),K.return=B,B=K;break e}l(B,I);break}else s(B,I);I=I.sibling}U.type===w?(K=Hs(U.props.children,B.mode,K,U.key),K.return=B,B=K):(K=Ml(U.type,U.key,U.props,null,B.mode,K),Qr(K,U),K.return=B,B=K)}return A(B);case E:e:{for(le=U.key;I!==null;){if(I.key===le)if(I.tag===4&&I.stateNode.containerInfo===U.containerInfo&&I.stateNode.implementation===U.implementation){l(B,I.sibling),K=m(I,U.children||[]),K.return=B,B=K;break e}else{l(B,I);break}else s(B,I);I=I.sibling}K=yd(U,B.mode,K),K.return=B,B=K}return A(B);case X:return U=Ys(U),Ye(B,I,U,K)}if(me(U))return ae(B,I,U,K);if(Z(U)){if(le=Z(U),typeof le!="function")throw Error(i(150));return U=le.call(U),pe(B,I,U,K)}if(typeof U.then=="function")return Ye(B,I,Ul(U),K);if(U.$$typeof===T)return Ye(B,I,Il(B,U),K);Fl(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,I!==null&&I.tag===6?(l(B,I.sibling),K=m(I,U),K.return=B,B=K):(l(B,I),K=gd(U,B.mode,K),K.return=B,B=K),A(B)):l(B,I)}return function(B,I,U,K){try{Kr=0;var le=Ye(B,I,U,K);return Ua=null,le}catch(oe){if(oe===Ba||oe===jl)throw oe;var Oe=hn(29,oe,null,B.mode);return Oe.lanes=K,Oe.return=B,Oe}}}var Xs=rg(!0),og=rg(!1),as=!1;function Nd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function rs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function os(n,s,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(je&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,s=kl(n),Gm(n,null,l),s}return Dl(n,d,s,l),kl(n)}function Zr(n,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,Zp(n,l)}}function kd(n,s){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};b===null?m=b=A:b=b.next=A,l=l.next}while(l!==null);b===null?m=b=s:b=b.next=s}else m=b=s;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=s:n.next=s,l.lastBaseUpdate=s}var Md=!1;function Jr(){if(Md){var n=ja;if(n!==null)throw n}}function eo(n,s,l,d){Md=!1;var m=n.updateQueue;as=!1;var b=m.firstBaseUpdate,A=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var L=R,F=L.next;L.next=null,A===null?b=F:A.next=F,A=L;var W=n.alternate;W!==null&&(W=W.updateQueue,R=W.lastBaseUpdate,R!==A&&(R===null?W.firstBaseUpdate=F:R.next=F,W.lastBaseUpdate=L))}if(b!==null){var Q=m.baseState;A=0,W=F=L=null,R=b;do{var z=R.lane&-536870913,G=z!==R.lane;if(G?(Ne&z)===z:(d&z)===z){z!==0&&z===Pa&&(Md=!0),W!==null&&(W=W.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ae=n,pe=R;z=s;var Ye=l;switch(pe.tag){case 1:if(ae=pe.payload,typeof ae=="function"){Q=ae.call(Ye,Q,z);break e}Q=ae;break e;case 3:ae.flags=ae.flags&-65537|128;case 0:if(ae=pe.payload,z=typeof ae=="function"?ae.call(Ye,Q,z):ae,z==null)break e;Q=g({},Q,z);break e;case 2:as=!0}}z=R.callback,z!==null&&(n.flags|=64,G&&(n.flags|=8192),G=m.callbacks,G===null?m.callbacks=[z]:G.push(z))}else G={lane:z,tag:R.tag,payload:R.payload,callback:R.callback,next:null},W===null?(F=W=G,L=Q):W=W.next=G,A|=z;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;G=R,R=G.next,G.next=null,m.lastBaseUpdate=G,m.shared.pending=null}}while(!0);W===null&&(L=Q),m.baseState=L,m.firstBaseUpdate=F,m.lastBaseUpdate=W,b===null&&(m.shared.lanes=0),hs|=A,n.lanes=A,n.memoizedState=Q}}function lg(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function cg(n,s){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)lg(l[n],s)}var Fa=O(null),zl=O(0);function ug(n,s){n=Li,J(zl,n),J(Fa,s),Li=n|s.baseLanes}function Ld(){J(zl,Li),J(Fa,Fa.current)}function Od(){Li=zl.current,V(Fa),V(zl)}var fn=O(null),Mn=null;function ls(n){var s=n.alternate;J(dt,dt.current&1),J(fn,n),Mn===null&&(s===null||Fa.current!==null||s.memoizedState!==null)&&(Mn=n)}function Id(n){J(dt,dt.current),J(fn,n),Mn===null&&(Mn=n)}function dg(n){n.tag===22?(J(dt,dt.current),J(fn,n),Mn===null&&(Mn=n)):cs()}function cs(){J(dt,dt.current),J(fn,fn.current)}function pn(n){V(fn),Mn===n&&(Mn=null),V(dt)}var dt=O(0);function Hl(n){for(var s=n;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||zh(l)||Hh(l)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _i=0,Se=null,$e=null,gt=null,Vl=!1,za=!1,Ks=!1,Gl=0,to=0,Ha=null,pA=0;function ct(){throw Error(i(321))}function Pd(n,s){if(s===null)return!1;for(var l=0;l<s.length&&l<n.length;l++)if(!dn(n[l],s[l]))return!1;return!0}function jd(n,s,l,d,m,b){return _i=b,Se=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,j.H=n===null||n.memoizedState===null?Wg:Zd,Ks=!1,b=l(d,m),Ks=!1,za&&(b=fg(s,l,d,m)),hg(n),b}function hg(n){j.H=so;var s=$e!==null&&$e.next!==null;if(_i=0,gt=$e=Se=null,Vl=!1,to=0,Ha=null,s)throw Error(i(300));n===null||yt||(n=n.dependencies,n!==null&&Ol(n)&&(yt=!0))}function fg(n,s,l,d){Se=n;var m=0;do{if(za&&(Ha=null),to=0,za=!1,25<=m)throw Error(i(301));if(m+=1,gt=$e=null,n.updateQueue!=null){var b=n.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}j.H=Xg,b=s(l,d)}while(za);return b}function mA(){var n=j.H,s=n.useState()[0];return s=typeof s.then=="function"?no(s):s,n=n.useState()[0],($e!==null?$e.memoizedState:null)!==n&&(Se.flags|=1024),s}function Bd(){var n=Gl!==0;return Gl=0,n}function Ud(n,s,l){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~l}function Fd(n){if(Vl){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Vl=!1}_i=0,gt=$e=Se=null,za=!1,to=Gl=0,Ha=null}function $t(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Se.memoizedState=gt=n:gt=gt.next=n,gt}function ht(){if($e===null){var n=Se.alternate;n=n!==null?n.memoizedState:null}else n=$e.next;var s=gt===null?Se.memoizedState:gt.next;if(s!==null)gt=s,$e=n;else{if(n===null)throw Se.alternate===null?Error(i(467)):Error(i(310));$e=n,n={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},gt===null?Se.memoizedState=gt=n:gt=gt.next=n}return gt}function $l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(n){var s=to;return to+=1,Ha===null&&(Ha=[]),n=ig(Ha,n,s),s=Se,(gt===null?s.memoizedState:gt.next)===null&&(s=s.alternate,j.H=s===null||s.memoizedState===null?Wg:Zd),n}function ql(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return no(n);if(n.$$typeof===T)return Ot(n)}throw Error(i(438,String(n)))}function zd(n){var s=null,l=Se.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var d=Se.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=$l(),Se.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(n),d=0;d<n;d++)l[d]=$;return s.index++,l}function Ti(n,s){return typeof s=="function"?s(n):s}function Yl(n){var s=ht();return Hd(s,$e,n)}function Hd(n,s,l){var d=n.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=l;var m=n.baseQueue,b=d.pending;if(b!==null){if(m!==null){var A=m.next;m.next=b.next,b.next=A}s.baseQueue=m=b,d.pending=null}if(b=n.baseState,m===null)n.memoizedState=b;else{s=m.next;var R=A=null,L=null,F=s,W=!1;do{var Q=F.lane&-536870913;if(Q!==F.lane?(Ne&Q)===Q:(_i&Q)===Q){var z=F.revertLane;if(z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),Q===Pa&&(W=!0);else if((_i&z)===z){F=F.next,z===Pa&&(W=!0);continue}else Q={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(R=L=Q,A=b):L=L.next=Q,Se.lanes|=z,hs|=z;Q=F.action,Ks&&l(b,Q),b=F.hasEagerState?F.eagerState:l(b,Q)}else z={lane:Q,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},L===null?(R=L=z,A=b):L=L.next=z,Se.lanes|=Q,hs|=Q;F=F.next}while(F!==null&&F!==s);if(L===null?A=b:L.next=R,!dn(b,n.memoizedState)&&(yt=!0,W&&(l=ja,l!==null)))throw l;n.memoizedState=b,n.baseState=A,n.baseQueue=L,d.lastRenderedState=b}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function Vd(n){var s=ht(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,b=s.memoizedState;if(m!==null){l.pending=null;var A=m=m.next;do b=n(b,A.action),A=A.next;while(A!==m);dn(b,s.memoizedState)||(yt=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),l.lastRenderedState=b}return[b,d]}function pg(n,s,l){var d=Se,m=ht(),b=Me;if(b){if(l===void 0)throw Error(i(407));l=l()}else l=s();var A=!dn(($e||m).memoizedState,l);if(A&&(m.memoizedState=l,yt=!0),m=m.queue,qd(yg.bind(null,d,m,n),[n]),m.getSnapshot!==s||A||gt!==null&&gt.memoizedState.tag&1){if(d.flags|=2048,Va(9,{destroy:void 0},gg.bind(null,d,m,l,s),null),Xe===null)throw Error(i(349));b||(_i&127)!==0||mg(d,s,l)}return l}function mg(n,s,l){n.flags|=16384,n={getSnapshot:s,value:l},s=Se.updateQueue,s===null?(s=$l(),Se.updateQueue=s,s.stores=[n]):(l=s.stores,l===null?s.stores=[n]:l.push(n))}function gg(n,s,l,d){s.value=l,s.getSnapshot=d,bg(s)&&vg(n)}function yg(n,s,l){return l(function(){bg(s)&&vg(n)})}function bg(n){var s=n.getSnapshot;n=n.value;try{var l=s();return!dn(n,l)}catch{return!0}}function vg(n){var s=zs(n,2);s!==null&&sn(s,n,2)}function Gd(n){var s=$t();if(typeof n=="function"){var l=n;if(n=l(),Ks){Jn(!0);try{l()}finally{Jn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:n},s}function xg(n,s,l,d){return n.baseState=l,Hd(n,$e,typeof d=="function"?d:Ti)}function gA(n,s,l,d,m){if(Kl(n))throw Error(i(485));if(n=s.action,n!==null){var b={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){b.listeners.push(A)}};j.T!==null?l(!0):b.isTransition=!1,d(b),l=s.pending,l===null?(b.next=s.pending=b,wg(s,b)):(b.next=l.next,s.pending=l.next=b)}}function wg(n,s){var l=s.action,d=s.payload,m=n.state;if(s.isTransition){var b=j.T,A={};j.T=A;try{var R=l(m,d),L=j.S;L!==null&&L(A,R),Ag(n,s,R)}catch(F){$d(n,s,F)}finally{b!==null&&A.types!==null&&(b.types=A.types),j.T=b}}else try{b=l(m,d),Ag(n,s,b)}catch(F){$d(n,s,F)}}function Ag(n,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Sg(n,s,d)},function(d){return $d(n,s,d)}):Sg(n,s,l)}function Sg(n,s,l){s.status="fulfilled",s.value=l,Eg(s),n.state=l,s=n.pending,s!==null&&(l=s.next,l===s?n.pending=null:(l=l.next,s.next=l,wg(n,l)))}function $d(n,s,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=l,Eg(s),s=s.next;while(s!==d)}n.action=null}function Eg(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function _g(n,s){return s}function Tg(n,s){if(Me){var l=Xe.formState;if(l!==null){e:{var d=Se;if(Me){if(Qe){t:{for(var m=Qe,b=kn;m.nodeType!==8;){if(!b){m=null;break t}if(m=Ln(m.nextSibling),m===null){m=null;break t}}b=m.data,m=b==="F!"||b==="F"?m:null}if(m){Qe=Ln(m.nextSibling),d=m.data==="F!";break e}}is(d)}d=!1}d&&(s=l[0])}}return l=$t(),l.memoizedState=l.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_g,lastRenderedState:s},l.queue=d,l=$g.bind(null,Se,d),d.dispatch=l,d=Gd(!1),b=Qd.bind(null,Se,!1,d.queue),d=$t(),m={state:s,dispatch:null,action:n,pending:null},d.queue=m,l=gA.bind(null,Se,m,b,l),m.dispatch=l,d.memoizedState=n,[s,l,!1]}function Cg(n){var s=ht();return Rg(s,$e,n)}function Rg(n,s,l){if(s=Hd(n,s,_g)[0],n=Yl(Ti)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=no(s)}catch(A){throw A===Ba?jl:A}else d=s;s=ht();var m=s.queue,b=m.dispatch;return l!==s.memoizedState&&(Se.flags|=2048,Va(9,{destroy:void 0},yA.bind(null,m,l),null)),[d,b,n]}function yA(n,s){n.action=s}function Ng(n){var s=ht(),l=$e;if(l!==null)return Rg(s,l,n);ht(),s=s.memoizedState,l=ht();var d=l.queue.dispatch;return l.memoizedState=n,[s,d,!1]}function Va(n,s,l,d){return n={tag:n,create:l,deps:d,inst:s,next:null},s=Se.updateQueue,s===null&&(s=$l(),Se.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,s.lastEffect=n),n}function Dg(){return ht().memoizedState}function Wl(n,s,l,d){var m=$t();Se.flags|=n,m.memoizedState=Va(1|s,{destroy:void 0},l,d===void 0?null:d)}function Xl(n,s,l,d){var m=ht();d=d===void 0?null:d;var b=m.memoizedState.inst;$e!==null&&d!==null&&Pd(d,$e.memoizedState.deps)?m.memoizedState=Va(s,b,l,d):(Se.flags|=n,m.memoizedState=Va(1|s,b,l,d))}function kg(n,s){Wl(8390656,8,n,s)}function qd(n,s){Xl(2048,8,n,s)}function bA(n){Se.flags|=4;var s=Se.updateQueue;if(s===null)s=$l(),Se.updateQueue=s,s.events=[n];else{var l=s.events;l===null?s.events=[n]:l.push(n)}}function Mg(n){var s=ht().memoizedState;return bA({ref:s,nextImpl:n}),function(){if((je&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function Lg(n,s){return Xl(4,2,n,s)}function Og(n,s){return Xl(4,4,n,s)}function Ig(n,s){if(typeof s=="function"){n=n();var l=s(n);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function Pg(n,s,l){l=l!=null?l.concat([n]):null,Xl(4,4,Ig.bind(null,s,n),l)}function Yd(){}function jg(n,s){var l=ht();s=s===void 0?null:s;var d=l.memoizedState;return s!==null&&Pd(s,d[1])?d[0]:(l.memoizedState=[n,s],n)}function Bg(n,s){var l=ht();s=s===void 0?null:s;var d=l.memoizedState;if(s!==null&&Pd(s,d[1]))return d[0];if(d=n(),Ks){Jn(!0);try{n()}finally{Jn(!1)}}return l.memoizedState=[d,s],d}function Wd(n,s,l){return l===void 0||(_i&1073741824)!==0&&(Ne&261930)===0?n.memoizedState=s:(n.memoizedState=l,n=U0(),Se.lanes|=n,hs|=n,l)}function Ug(n,s,l,d){return dn(l,s)?l:Fa.current!==null?(n=Wd(n,l,d),dn(n,s)||(yt=!0),n):(_i&42)===0||(_i&1073741824)!==0&&(Ne&261930)===0?(yt=!0,n.memoizedState=l):(n=U0(),Se.lanes|=n,hs|=n,s)}function Fg(n,s,l,d,m){var b=q.p;q.p=b!==0&&8>b?b:8;var A=j.T,R={};j.T=R,Qd(n,!1,s,l);try{var L=m(),F=j.S;if(F!==null&&F(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=fA(L,d);io(n,s,W,yn(n))}else io(n,s,d,yn(n))}catch(Q){io(n,s,{then:function(){},status:"rejected",reason:Q},yn())}finally{q.p=b,A!==null&&R.types!==null&&(A.types=R.types),j.T=A}}function vA(){}function Xd(n,s,l,d){if(n.tag!==5)throw Error(i(476));var m=zg(n).queue;Fg(n,m,s,ee,l===null?vA:function(){return Hg(n),l(d)})}function zg(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:ee},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:l},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function Hg(n){var s=zg(n);s.next===null&&(s=n.alternate.memoizedState),io(n,s.next.queue,{},yn())}function Kd(){return Ot(wo)}function Vg(){return ht().memoizedState}function Gg(){return ht().memoizedState}function xA(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var l=yn();n=rs(l);var d=os(s,n,l);d!==null&&(sn(d,s,l),Zr(d,s,l)),s={cache:_d()},n.payload=s;return}s=s.return}}function wA(n,s,l){var d=yn();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Kl(n)?qg(s,l):(l=pd(n,s,l,d),l!==null&&(sn(l,n,d),Yg(l,s,d)))}function $g(n,s,l){var d=yn();io(n,s,l,d)}function io(n,s,l,d){var m={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Kl(n))qg(s,m);else{var b=n.alternate;if(n.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var A=s.lastRenderedState,R=b(A,l);if(m.hasEagerState=!0,m.eagerState=R,dn(R,A))return Dl(n,s,m,0),Xe===null&&Nl(),!1}catch{}if(l=pd(n,s,m,d),l!==null)return sn(l,n,d),Yg(l,s,d),!0}return!1}function Qd(n,s,l,d){if(d={lane:2,revertLane:Nh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Kl(n)){if(s)throw Error(i(479))}else s=pd(n,l,d,2),s!==null&&sn(s,n,2)}function Kl(n){var s=n.alternate;return n===Se||s!==null&&s===Se}function qg(n,s){za=Vl=!0;var l=n.pending;l===null?s.next=s:(s.next=l.next,l.next=s),n.pending=s}function Yg(n,s,l){if((l&4194048)!==0){var d=s.lanes;d&=n.pendingLanes,l|=d,s.lanes=l,Zp(n,l)}}var so={readContext:Ot,use:ql,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useLayoutEffect:ct,useInsertionEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useSyncExternalStore:ct,useId:ct,useHostTransitionStatus:ct,useFormState:ct,useActionState:ct,useOptimistic:ct,useMemoCache:ct,useCacheRefresh:ct};so.useEffectEvent=ct;var Wg={readContext:Ot,use:ql,useCallback:function(n,s){return $t().memoizedState=[n,s===void 0?null:s],n},useContext:Ot,useEffect:kg,useImperativeHandle:function(n,s,l){l=l!=null?l.concat([n]):null,Wl(4194308,4,Ig.bind(null,s,n),l)},useLayoutEffect:function(n,s){return Wl(4194308,4,n,s)},useInsertionEffect:function(n,s){Wl(4,2,n,s)},useMemo:function(n,s){var l=$t();s=s===void 0?null:s;var d=n();if(Ks){Jn(!0);try{n()}finally{Jn(!1)}}return l.memoizedState=[d,s],d},useReducer:function(n,s,l){var d=$t();if(l!==void 0){var m=l(s);if(Ks){Jn(!0);try{l(s)}finally{Jn(!1)}}}else m=s;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=wA.bind(null,Se,n),[d.memoizedState,n]},useRef:function(n){var s=$t();return n={current:n},s.memoizedState=n},useState:function(n){n=Gd(n);var s=n.queue,l=$g.bind(null,Se,s);return s.dispatch=l,[n.memoizedState,l]},useDebugValue:Yd,useDeferredValue:function(n,s){var l=$t();return Wd(l,n,s)},useTransition:function(){var n=Gd(!1);return n=Fg.bind(null,Se,n.queue,!0,!1),$t().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,l){var d=Se,m=$t();if(Me){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),Xe===null)throw Error(i(349));(Ne&127)!==0||mg(d,s,l)}m.memoizedState=l;var b={value:l,getSnapshot:s};return m.queue=b,kg(yg.bind(null,d,b,n),[n]),d.flags|=2048,Va(9,{destroy:void 0},gg.bind(null,d,b,l,s),null),l},useId:function(){var n=$t(),s=Xe.identifierPrefix;if(Me){var l=ti,d=ei;l=(d&~(1<<32-Ut(d)-1)).toString(32)+l,s="_"+s+"R_"+l,l=Gl++,0<l&&(s+="H"+l.toString(32)),s+="_"}else l=pA++,s="_"+s+"r_"+l.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Kd,useFormState:Tg,useActionState:Tg,useOptimistic:function(n){var s=$t();s.memoizedState=s.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=Qd.bind(null,Se,!0,l),l.dispatch=s,[n,s]},useMemoCache:zd,useCacheRefresh:function(){return $t().memoizedState=xA.bind(null,Se)},useEffectEvent:function(n){var s=$t(),l={impl:n};return s.memoizedState=l,function(){if((je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Zd={readContext:Ot,use:ql,useCallback:jg,useContext:Ot,useEffect:qd,useImperativeHandle:Pg,useInsertionEffect:Lg,useLayoutEffect:Og,useMemo:Bg,useReducer:Yl,useRef:Dg,useState:function(){return Yl(Ti)},useDebugValue:Yd,useDeferredValue:function(n,s){var l=ht();return Ug(l,$e.memoizedState,n,s)},useTransition:function(){var n=Yl(Ti)[0],s=ht().memoizedState;return[typeof n=="boolean"?n:no(n),s]},useSyncExternalStore:pg,useId:Vg,useHostTransitionStatus:Kd,useFormState:Cg,useActionState:Cg,useOptimistic:function(n,s){var l=ht();return xg(l,$e,n,s)},useMemoCache:zd,useCacheRefresh:Gg};Zd.useEffectEvent=Mg;var Xg={readContext:Ot,use:ql,useCallback:jg,useContext:Ot,useEffect:qd,useImperativeHandle:Pg,useInsertionEffect:Lg,useLayoutEffect:Og,useMemo:Bg,useReducer:Vd,useRef:Dg,useState:function(){return Vd(Ti)},useDebugValue:Yd,useDeferredValue:function(n,s){var l=ht();return $e===null?Wd(l,n,s):Ug(l,$e.memoizedState,n,s)},useTransition:function(){var n=Vd(Ti)[0],s=ht().memoizedState;return[typeof n=="boolean"?n:no(n),s]},useSyncExternalStore:pg,useId:Vg,useHostTransitionStatus:Kd,useFormState:Ng,useActionState:Ng,useOptimistic:function(n,s){var l=ht();return $e!==null?xg(l,$e,n,s):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:zd,useCacheRefresh:Gg};Xg.useEffectEvent=Mg;function Jd(n,s,l,d){s=n.memoizedState,l=l(d,s),l=l==null?s:g({},s,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var eh={enqueueSetState:function(n,s,l){n=n._reactInternals;var d=yn(),m=rs(d);m.payload=s,l!=null&&(m.callback=l),s=os(n,m,d),s!==null&&(sn(s,n,d),Zr(s,n,d))},enqueueReplaceState:function(n,s,l){n=n._reactInternals;var d=yn(),m=rs(d);m.tag=1,m.payload=s,l!=null&&(m.callback=l),s=os(n,m,d),s!==null&&(sn(s,n,d),Zr(s,n,d))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var l=yn(),d=rs(l);d.tag=2,s!=null&&(d.callback=s),s=os(n,d,l),s!==null&&(sn(s,n,l),Zr(s,n,l))}};function Kg(n,s,l,d,m,b,A){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,b,A):s.prototype&&s.prototype.isPureReactComponent?!Gr(l,d)||!Gr(m,b):!0}function Qg(n,s,l,d){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,d),s.state!==n&&eh.enqueueReplaceState(s,s.state,null)}function Qs(n,s){var l=s;if("ref"in s){l={};for(var d in s)d!=="ref"&&(l[d]=s[d])}if(n=n.defaultProps){l===s&&(l=g({},l));for(var m in n)l[m]===void 0&&(l[m]=n[m])}return l}function Zg(n){Rl(n)}function Jg(n){console.error(n)}function e0(n){Rl(n)}function Ql(n,s){try{var l=n.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function t0(n,s,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function th(n,s,l){return l=rs(l),l.tag=3,l.payload={element:null},l.callback=function(){Ql(n,s)},l}function n0(n){return n=rs(n),n.tag=3,n}function i0(n,s,l,d){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var b=d.value;n.payload=function(){return m(b)},n.callback=function(){t0(s,l,d)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(n.callback=function(){t0(s,l,d),typeof m!="function"&&(fs===null?fs=new Set([this]):fs.add(this));var R=d.stack;this.componentDidCatch(d.value,{componentStack:R!==null?R:""})})}function AA(n,s,l,d,m){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=l.alternate,s!==null&&Ia(s,l,m,!0),l=fn.current,l!==null){switch(l.tag){case 31:case 13:return Mn===null?cc():l.alternate===null&&ut===0&&(ut=3),l.flags&=-257,l.flags|=65536,l.lanes=m,d===Bl?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([d]):s.add(d),Th(n,d,m)),!1;case 22:return l.flags|=65536,d===Bl?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([d]):l.add(d)),Th(n,d,m)),!1}throw Error(i(435,l.tag))}return Th(n,d,m),cc(),!1}if(Me)return s=fn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,d!==xd&&(n=Error(i(422),{cause:d}),Yr(Rn(n,l)))):(d!==xd&&(s=Error(i(423),{cause:d}),Yr(Rn(s,l))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=Rn(d,l),m=th(n.stateNode,d,m),kd(n,m),ut!==4&&(ut=2)),!1;var b=Error(i(520),{cause:d});if(b=Rn(b,l),fo===null?fo=[b]:fo.push(b),ut!==4&&(ut=2),s===null)return!0;d=Rn(d,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,n=m&-m,l.lanes|=n,n=th(l.stateNode,d,n),kd(l,n),!1;case 1:if(s=l.type,b=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(fs===null||!fs.has(b))))return l.flags|=65536,m&=-m,l.lanes|=m,m=n0(m),i0(m,n,l,d),kd(l,m),!1}l=l.return}while(l!==null);return!1}var nh=Error(i(461)),yt=!1;function It(n,s,l,d){s.child=n===null?og(s,null,l,d):Xs(s,n.child,l,d)}function s0(n,s,l,d,m){l=l.render;var b=s.ref;if("ref"in d){var A={};for(var R in d)R!=="ref"&&(A[R]=d[R])}else A=d;return $s(s),d=jd(n,s,l,A,b,m),R=Bd(),n!==null&&!yt?(Ud(n,s,m),Ci(n,s,m)):(Me&&R&&bd(s),s.flags|=1,It(n,s,d,m),s.child)}function a0(n,s,l,d,m){if(n===null){var b=l.type;return typeof b=="function"&&!md(b)&&b.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=b,r0(n,s,b,d,m)):(n=Ml(l.type,null,d,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(b=n.child,!uh(n,m)){var A=b.memoizedProps;if(l=l.compare,l=l!==null?l:Gr,l(A,d)&&n.ref===s.ref)return Ci(n,s,m)}return s.flags|=1,n=wi(b,d),n.ref=s.ref,n.return=s,s.child=n}function r0(n,s,l,d,m){if(n!==null){var b=n.memoizedProps;if(Gr(b,d)&&n.ref===s.ref)if(yt=!1,s.pendingProps=d=b,uh(n,m))(n.flags&131072)!==0&&(yt=!0);else return s.lanes=n.lanes,Ci(n,s,m)}return ih(n,s,l,d,m)}function o0(n,s,l,d){var m=d.children,b=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|l:l,n!==null){for(d=s.child=n.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~b}else d=0,s.child=null;return l0(n,s,b,l,d)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Pl(s,b!==null?b.cachePool:null),b!==null?ug(s,b):Ld(),dg(s);else return d=s.lanes=536870912,l0(n,s,b!==null?b.baseLanes|l:l,l,d)}else b!==null?(Pl(s,b.cachePool),ug(s,b),cs(),s.memoizedState=null):(n!==null&&Pl(s,null),Ld(),cs());return It(n,s,m,l),s.child}function ao(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function l0(n,s,l,d,m){var b=Cd();return b=b===null?null:{parent:mt._currentValue,pool:b},s.memoizedState={baseLanes:l,cachePool:b},n!==null&&Pl(s,null),Ld(),dg(s),n!==null&&Ia(n,s,d,!0),s.childLanes=m,null}function Zl(n,s){return s=ec({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function c0(n,s,l){return Xs(s,n.child,null,l),n=Zl(s,s.pendingProps),n.flags|=2,pn(s),s.memoizedState=null,n}function SA(n,s,l){var d=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Me){if(d.mode==="hidden")return n=Zl(s,d),s.lanes=536870912,ao(null,n);if(Id(s),(n=Qe)?(n=wy(n,kn),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ts!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},l=qm(n),l.return=s,s.child=l,Lt=s,Qe=null)):n=null,n===null)throw is(s);return s.lanes=536870912,null}return Zl(s,d)}var b=n.memoizedState;if(b!==null){var A=b.dehydrated;if(Id(s),m)if(s.flags&256)s.flags&=-257,s=c0(n,s,l);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(i(558));else if(yt||Ia(n,s,l,!1),m=(l&n.childLanes)!==0,yt||m){if(d=Xe,d!==null&&(A=Jp(d,l),A!==0&&A!==b.retryLane))throw b.retryLane=A,zs(n,A),sn(d,n,A),nh;cc(),s=c0(n,s,l)}else n=b.treeContext,Qe=Ln(A.nextSibling),Lt=s,Me=!0,ns=null,kn=!1,n!==null&&Xm(s,n),s=Zl(s,d),s.flags|=4096;return s}return n=wi(n.child,{mode:d.mode,children:d.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Jl(n,s){var l=s.ref;if(l===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(n===null||n.ref!==l)&&(s.flags|=4194816)}}function ih(n,s,l,d,m){return $s(s),l=jd(n,s,l,d,void 0,m),d=Bd(),n!==null&&!yt?(Ud(n,s,m),Ci(n,s,m)):(Me&&d&&bd(s),s.flags|=1,It(n,s,l,m),s.child)}function u0(n,s,l,d,m,b){return $s(s),s.updateQueue=null,l=fg(s,d,l,m),hg(n),d=Bd(),n!==null&&!yt?(Ud(n,s,b),Ci(n,s,b)):(Me&&d&&bd(s),s.flags|=1,It(n,s,l,b),s.child)}function d0(n,s,l,d,m){if($s(s),s.stateNode===null){var b=ka,A=l.contextType;typeof A=="object"&&A!==null&&(b=Ot(A)),b=new l(d,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=eh,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=d,b.state=s.memoizedState,b.refs={},Nd(s),A=l.contextType,b.context=typeof A=="object"&&A!==null?Ot(A):ka,b.state=s.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(Jd(s,l,A,d),b.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(A=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),A!==b.state&&eh.enqueueReplaceState(b,b.state,null),eo(s,d,b,m),Jr(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(n===null){b=s.stateNode;var R=s.memoizedProps,L=Qs(l,R);b.props=L;var F=b.context,W=l.contextType;A=ka,typeof W=="object"&&W!==null&&(A=Ot(W));var Q=l.getDerivedStateFromProps;W=typeof Q=="function"||typeof b.getSnapshotBeforeUpdate=="function",R=s.pendingProps!==R,W||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(R||F!==A)&&Qg(s,b,d,A),as=!1;var z=s.memoizedState;b.state=z,eo(s,d,b,m),Jr(),F=s.memoizedState,R||z!==F||as?(typeof Q=="function"&&(Jd(s,l,Q,d),F=s.memoizedState),(L=as||Kg(s,l,L,d,z,F,A))?(W||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=F),b.props=d,b.state=F,b.context=A,d=L):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{b=s.stateNode,Dd(n,s),A=s.memoizedProps,W=Qs(l,A),b.props=W,Q=s.pendingProps,z=b.context,F=l.contextType,L=ka,typeof F=="object"&&F!==null&&(L=Ot(F)),R=l.getDerivedStateFromProps,(F=typeof R=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A!==Q||z!==L)&&Qg(s,b,d,L),as=!1,z=s.memoizedState,b.state=z,eo(s,d,b,m),Jr();var G=s.memoizedState;A!==Q||z!==G||as||n!==null&&n.dependencies!==null&&Ol(n.dependencies)?(typeof R=="function"&&(Jd(s,l,R,d),G=s.memoizedState),(W=as||Kg(s,l,W,d,z,G,L)||n!==null&&n.dependencies!==null&&Ol(n.dependencies))?(F||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,G,L),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,G,L)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=G),b.props=d,b.state=G,b.context=L,d=W):(typeof b.componentDidUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&z===n.memoizedState||(s.flags|=1024),d=!1)}return b=d,Jl(n,s),d=(s.flags&128)!==0,b||d?(b=s.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,n!==null&&d?(s.child=Xs(s,n.child,null,m),s.child=Xs(s,null,l,m)):It(n,s,l,m),s.memoizedState=b.state,n=s.child):n=Ci(n,s,m),n}function h0(n,s,l,d){return Vs(),s.flags|=256,It(n,s,l,d),s.child}var sh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ah(n){return{baseLanes:n,cachePool:tg()}}function rh(n,s,l){return n=n!==null?n.childLanes&~l:0,s&&(n|=gn),n}function f0(n,s,l){var d=s.pendingProps,m=!1,b=(s.flags&128)!==0,A;if((A=b)||(A=n!==null&&n.memoizedState===null?!1:(dt.current&2)!==0),A&&(m=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,n===null){if(Me){if(m?ls(s):cs(),(n=Qe)?(n=wy(n,kn),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ts!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},l=qm(n),l.return=s,s.child=l,Lt=s,Qe=null)):n=null,n===null)throw is(s);return Hh(n)?s.lanes=32:s.lanes=536870912,null}var R=d.children;return d=d.fallback,m?(cs(),m=s.mode,R=ec({mode:"hidden",children:R},m),d=Hs(d,m,l,null),R.return=s,d.return=s,R.sibling=d,s.child=R,d=s.child,d.memoizedState=ah(l),d.childLanes=rh(n,A,l),s.memoizedState=sh,ao(null,d)):(ls(s),oh(s,R))}var L=n.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(b)s.flags&256?(ls(s),s.flags&=-257,s=lh(n,s,l)):s.memoizedState!==null?(cs(),s.child=n.child,s.flags|=128,s=null):(cs(),R=d.fallback,m=s.mode,d=ec({mode:"visible",children:d.children},m),R=Hs(R,m,l,null),R.flags|=2,d.return=s,R.return=s,d.sibling=R,s.child=d,Xs(s,n.child,null,l),d=s.child,d.memoizedState=ah(l),d.childLanes=rh(n,A,l),s.memoizedState=sh,s=ao(null,d));else if(ls(s),Hh(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var F=A.dgst;A=F,d=Error(i(419)),d.stack="",d.digest=A,Yr({value:d,source:null,stack:null}),s=lh(n,s,l)}else if(yt||Ia(n,s,l,!1),A=(l&n.childLanes)!==0,yt||A){if(A=Xe,A!==null&&(d=Jp(A,l),d!==0&&d!==L.retryLane))throw L.retryLane=d,zs(n,d),sn(A,n,d),nh;zh(R)||cc(),s=lh(n,s,l)}else zh(R)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,Qe=Ln(R.nextSibling),Lt=s,Me=!0,ns=null,kn=!1,n!==null&&Xm(s,n),s=oh(s,d.children),s.flags|=4096);return s}return m?(cs(),R=d.fallback,m=s.mode,L=n.child,F=L.sibling,d=wi(L,{mode:"hidden",children:d.children}),d.subtreeFlags=L.subtreeFlags&65011712,F!==null?R=wi(F,R):(R=Hs(R,m,l,null),R.flags|=2),R.return=s,d.return=s,d.sibling=R,s.child=d,ao(null,d),d=s.child,R=n.child.memoizedState,R===null?R=ah(l):(m=R.cachePool,m!==null?(L=mt._currentValue,m=m.parent!==L?{parent:L,pool:L}:m):m=tg(),R={baseLanes:R.baseLanes|l,cachePool:m}),d.memoizedState=R,d.childLanes=rh(n,A,l),s.memoizedState=sh,ao(n.child,d)):(ls(s),l=n.child,n=l.sibling,l=wi(l,{mode:"visible",children:d.children}),l.return=s,l.sibling=null,n!==null&&(A=s.deletions,A===null?(s.deletions=[n],s.flags|=16):A.push(n)),s.child=l,s.memoizedState=null,l)}function oh(n,s){return s=ec({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function ec(n,s){return n=hn(22,n,null,s),n.lanes=0,n}function lh(n,s,l){return Xs(s,n.child,null,l),n=oh(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function p0(n,s,l){n.lanes|=s;var d=n.alternate;d!==null&&(d.lanes|=s),Sd(n.return,s,l)}function ch(n,s,l,d,m,b){var A=n.memoizedState;A===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m,treeForkCount:b}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=d,A.tail=l,A.tailMode=m,A.treeForkCount=b)}function m0(n,s,l){var d=s.pendingProps,m=d.revealOrder,b=d.tail;d=d.children;var A=dt.current,R=(A&2)!==0;if(R?(A=A&1|2,s.flags|=128):A&=1,J(dt,A),It(n,s,d,l),d=Me?qr:0,!R&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&p0(n,l,s);else if(n.tag===19)p0(n,l,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(l=s.child,m=null;l!==null;)n=l.alternate,n!==null&&Hl(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=s.child,s.child=null):(m=l.sibling,l.sibling=null),ch(s,!1,m,l,b,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&Hl(n)===null){s.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}ch(s,!0,l,null,b,d);break;case"together":ch(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Ci(n,s,l){if(n!==null&&(s.dependencies=n.dependencies),hs|=s.lanes,(l&s.childLanes)===0)if(n!==null){if(Ia(n,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,l=wi(n,n.pendingProps),s.child=l,l.return=s;n.sibling!==null;)n=n.sibling,l=l.sibling=wi(n,n.pendingProps),l.return=s;l.sibling=null}return s.child}function uh(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Ol(n)))}function EA(n,s,l){switch(s.tag){case 3:lt(s,s.stateNode.containerInfo),ss(s,mt,n.memoizedState.cache),Vs();break;case 27:case 5:Kn(s);break;case 4:lt(s,s.stateNode.containerInfo);break;case 10:ss(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Id(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(ls(s),s.flags|=128,null):(l&s.child.childLanes)!==0?f0(n,s,l):(ls(s),n=Ci(n,s,l),n!==null?n.sibling:null);ls(s);break;case 19:var m=(n.flags&128)!==0;if(d=(l&s.childLanes)!==0,d||(Ia(n,s,l,!1),d=(l&s.childLanes)!==0),m){if(d)return m0(n,s,l);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),J(dt,dt.current),d)break;return null;case 22:return s.lanes=0,o0(n,s,l,s.pendingProps);case 24:ss(s,mt,n.memoizedState.cache)}return Ci(n,s,l)}function g0(n,s,l){if(n!==null)if(n.memoizedProps!==s.pendingProps)yt=!0;else{if(!uh(n,l)&&(s.flags&128)===0)return yt=!1,EA(n,s,l);yt=(n.flags&131072)!==0}else yt=!1,Me&&(s.flags&1048576)!==0&&Wm(s,qr,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(n=Ys(s.elementType),s.type=n,typeof n=="function")md(n)?(d=Qs(n,d),s.tag=1,s=d0(null,s,n,d,l)):(s.tag=0,s=ih(null,s,n,d,l));else{if(n!=null){var m=n.$$typeof;if(m===N){s.tag=11,s=s0(null,s,n,d,l);break e}else if(m===P){s.tag=14,s=a0(null,s,n,d,l);break e}}throw s=re(n)||n,Error(i(306,s,""))}}return s;case 0:return ih(n,s,s.type,s.pendingProps,l);case 1:return d=s.type,m=Qs(d,s.pendingProps),d0(n,s,d,m,l);case 3:e:{if(lt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));d=s.pendingProps;var b=s.memoizedState;m=b.element,Dd(n,s),eo(s,d,null,l);var A=s.memoizedState;if(d=A.cache,ss(s,mt,d),d!==b.cache&&Ed(s,[mt],l,!0),Jr(),d=A.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=h0(n,s,d,l);break e}else if(d!==m){m=Rn(Error(i(424)),s),Yr(m),s=h0(n,s,d,l);break e}else for(n=s.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,Qe=Ln(n.firstChild),Lt=s,Me=!0,ns=null,kn=!0,l=og(s,null,d,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Vs(),d===m){s=Ci(n,s,l);break e}It(n,s,d,l)}s=s.child}return s;case 26:return Jl(n,s),n===null?(l=Cy(s.type,null,s.pendingProps,null))?s.memoizedState=l:Me||(l=s.type,n=s.pendingProps,d=gc(ye.current).createElement(l),d[Mt]=s,d[Qt]=n,Pt(d,l,n),Tt(d),s.stateNode=d):s.memoizedState=Cy(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Kn(s),n===null&&Me&&(d=s.stateNode=Ey(s.type,s.pendingProps,ye.current),Lt=s,kn=!0,m=Qe,ys(s.type)?(Vh=m,Qe=Ln(d.firstChild)):Qe=m),It(n,s,s.pendingProps.children,l),Jl(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Me&&((m=d=Qe)&&(d=eS(d,s.type,s.pendingProps,kn),d!==null?(s.stateNode=d,Lt=s,Qe=Ln(d.firstChild),kn=!1,m=!0):m=!1),m||is(s)),Kn(s),m=s.type,b=s.pendingProps,A=n!==null?n.memoizedProps:null,d=b.children,Bh(m,b)?d=null:A!==null&&Bh(m,A)&&(s.flags|=32),s.memoizedState!==null&&(m=jd(n,s,mA,null,null,l),wo._currentValue=m),Jl(n,s),It(n,s,d,l),s.child;case 6:return n===null&&Me&&((n=l=Qe)&&(l=tS(l,s.pendingProps,kn),l!==null?(s.stateNode=l,Lt=s,Qe=null,n=!0):n=!1),n||is(s)),null;case 13:return f0(n,s,l);case 4:return lt(s,s.stateNode.containerInfo),d=s.pendingProps,n===null?s.child=Xs(s,null,d,l):It(n,s,d,l),s.child;case 11:return s0(n,s,s.type,s.pendingProps,l);case 7:return It(n,s,s.pendingProps,l),s.child;case 8:return It(n,s,s.pendingProps.children,l),s.child;case 12:return It(n,s,s.pendingProps.children,l),s.child;case 10:return d=s.pendingProps,ss(s,s.type,d.value),It(n,s,d.children,l),s.child;case 9:return m=s.type._context,d=s.pendingProps.children,$s(s),m=Ot(m),d=d(m),s.flags|=1,It(n,s,d,l),s.child;case 14:return a0(n,s,s.type,s.pendingProps,l);case 15:return r0(n,s,s.type,s.pendingProps,l);case 19:return m0(n,s,l);case 31:return SA(n,s,l);case 22:return o0(n,s,l,s.pendingProps);case 24:return $s(s),d=Ot(mt),n===null?(m=Cd(),m===null&&(m=Xe,b=_d(),m.pooledCache=b,b.refCount++,b!==null&&(m.pooledCacheLanes|=l),m=b),s.memoizedState={parent:d,cache:m},Nd(s),ss(s,mt,m)):((n.lanes&l)!==0&&(Dd(n,s),eo(s,null,null,l),Jr()),m=n.memoizedState,b=s.memoizedState,m.parent!==d?(m={parent:d,cache:d},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),ss(s,mt,d)):(d=b.cache,ss(s,mt,d),d!==m.cache&&Ed(s,[mt],l,!0))),It(n,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Ri(n){n.flags|=4}function dh(n,s,l,d,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(V0())n.flags|=8192;else throw Ws=Bl,Rd}else n.flags&=-16777217}function y0(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!My(s))if(V0())n.flags|=8192;else throw Ws=Bl,Rd}function tc(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?En():536870912,n.lanes|=s,Ya|=s)}function ro(n,s){if(!Me)switch(n.tailMode){case"hidden":s=n.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Ze(n){var s=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(s)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,s}function _A(n,s,l){var d=s.pendingProps;switch(vd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ze(s),null;case 1:return Ze(s),null;case 3:return l=s.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),Ei(mt),He(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(Oa(s)?Ri(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,wd())),Ze(s),null;case 26:var m=s.type,b=s.memoizedState;return n===null?(Ri(s),b!==null?(Ze(s),y0(s,b)):(Ze(s),dh(s,m,null,d,l))):b?b!==n.memoizedState?(Ri(s),Ze(s),y0(s,b)):(Ze(s),s.flags&=-16777217):(n=n.memoizedProps,n!==d&&Ri(s),Ze(s),dh(s,m,n,d,l)),null;case 27:if(Qn(s),l=ye.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ri(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ze(s),null}n=te.current,Oa(s)?Km(s):(n=Ey(m,d,l),s.stateNode=n,Ri(s))}return Ze(s),null;case 5:if(Qn(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==d&&Ri(s);else{if(!d){if(s.stateNode===null)throw Error(i(166));return Ze(s),null}if(b=te.current,Oa(s))Km(s);else{var A=gc(ye.current);switch(b){case 1:b=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:b=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":b=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":b=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":b=A.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?A.createElement("select",{is:d.is}):A.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?A.createElement(m,{is:d.is}):A.createElement(m)}}b[Mt]=s,b[Qt]=d;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)b.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=b;e:switch(Pt(b,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ri(s)}}return Ze(s),dh(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,l),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==d&&Ri(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(i(166));if(n=ye.current,Oa(s)){if(n=s.stateNode,l=s.memoizedProps,d=null,m=Lt,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}n[Mt]=s,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||fy(n.nodeValue,l)),n||is(s,!0)}else n=gc(n).createTextNode(d),n[Mt]=s,s.stateNode=n}return Ze(s),null;case 31:if(l=s.memoizedState,n===null||n.memoizedState!==null){if(d=Oa(s),l!==null){if(n===null){if(!d)throw Error(i(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Mt]=s}else Vs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),n=!1}else l=wd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return s.flags&256?(pn(s),s):(pn(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Ze(s),null;case 13:if(d=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Oa(s),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(i(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[Mt]=s}else Vs(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ze(s),m=!1}else m=wd(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(pn(s),s):(pn(s),null)}return pn(s),(s.flags&128)!==0?(s.lanes=l,s):(l=d!==null,n=n!==null&&n.memoizedState!==null,l&&(d=s.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==m&&(d.flags|=2048)),l!==n&&l&&(s.child.flags|=8192),tc(s,s.updateQueue),Ze(s),null);case 4:return He(),n===null&&Lh(s.stateNode.containerInfo),Ze(s),null;case 10:return Ei(s.type),Ze(s),null;case 19:if(V(dt),d=s.memoizedState,d===null)return Ze(s),null;if(m=(s.flags&128)!==0,b=d.rendering,b===null)if(m)ro(d,!1);else{if(ut!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(b=Hl(n),b!==null){for(s.flags|=128,ro(d,!1),n=b.updateQueue,s.updateQueue=n,tc(s,n),s.subtreeFlags=0,n=l,l=s.child;l!==null;)$m(l,n),l=l.sibling;return J(dt,dt.current&1|2),Me&&Ai(s,d.treeForkCount),s.child}n=n.sibling}d.tail!==null&&Bt()>rc&&(s.flags|=128,m=!0,ro(d,!1),s.lanes=4194304)}else{if(!m)if(n=Hl(b),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,tc(s,n),ro(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!Me)return Ze(s),null}else 2*Bt()-d.renderingStartTime>rc&&l!==536870912&&(s.flags|=128,m=!0,ro(d,!1),s.lanes=4194304);d.isBackwards?(b.sibling=s.child,s.child=b):(n=d.last,n!==null?n.sibling=b:s.child=b,d.last=b)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=Bt(),n.sibling=null,l=dt.current,J(dt,m?l&1|2:l&1),Me&&Ai(s,d.treeForkCount),n):(Ze(s),null);case 22:case 23:return pn(s),Od(),d=s.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(l&536870912)!==0&&(s.flags&128)===0&&(Ze(s),s.subtreeFlags&6&&(s.flags|=8192)):Ze(s),l=s.updateQueue,l!==null&&tc(s,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==l&&(s.flags|=2048),n!==null&&V(qs),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Ei(mt),Ze(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function TA(n,s){switch(vd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return Ei(mt),He(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Qn(s),null;case 31:if(s.memoizedState!==null){if(pn(s),s.alternate===null)throw Error(i(340));Vs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(pn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Vs()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return V(dt),null;case 4:return He(),null;case 10:return Ei(s.type),null;case 22:case 23:return pn(s),Od(),n!==null&&V(qs),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return Ei(mt),null;case 25:return null;default:return null}}function b0(n,s){switch(vd(s),s.tag){case 3:Ei(mt),He();break;case 26:case 27:case 5:Qn(s);break;case 4:He();break;case 31:s.memoizedState!==null&&pn(s);break;case 13:pn(s);break;case 19:V(dt);break;case 10:Ei(s.type);break;case 22:case 23:pn(s),Od(),n!==null&&V(qs);break;case 24:Ei(mt)}}function oo(n,s){try{var l=s.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&n)===n){d=void 0;var b=l.create,A=l.inst;d=b(),A.destroy=d}l=l.next}while(l!==m)}}catch(R){Ge(s,s.return,R)}}function us(n,s,l){try{var d=s.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var b=m.next;d=b;do{if((d.tag&n)===n){var A=d.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,m=s;var L=l,F=R;try{F()}catch(W){Ge(m,L,W)}}}d=d.next}while(d!==b)}}catch(W){Ge(s,s.return,W)}}function v0(n){var s=n.updateQueue;if(s!==null){var l=n.stateNode;try{cg(s,l)}catch(d){Ge(n,n.return,d)}}}function x0(n,s,l){l.props=Qs(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Ge(n,s,d)}}function lo(n,s){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(m){Ge(n,s,m)}}function ni(n,s){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(m){Ge(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Ge(n,s,m)}else l.current=null}function w0(n){var s=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(m){Ge(n,n.return,m)}}function hh(n,s,l){try{var d=n.stateNode;WA(d,n.type,l,s),d[Qt]=s}catch(m){Ge(n,n.return,m)}}function A0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ys(n.type)||n.tag===4}function fh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||A0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ys(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ph(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(n),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=vi));else if(d!==4&&(d===27&&ys(n.type)&&(l=n.stateNode,s=null),n=n.child,n!==null))for(ph(n,s,l),n=n.sibling;n!==null;)ph(n,s,l),n=n.sibling}function nc(n,s,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,s?l.insertBefore(n,s):l.appendChild(n);else if(d!==4&&(d===27&&ys(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(nc(n,s,l),n=n.sibling;n!==null;)nc(n,s,l),n=n.sibling}function S0(n){var s=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);Pt(s,d,l),s[Mt]=n,s[Qt]=l}catch(b){Ge(n,n.return,b)}}var Ni=!1,bt=!1,mh=!1,E0=typeof WeakSet=="function"?WeakSet:Set,Ct=null;function CA(n,s){if(n=n.containerInfo,Ph=Sc,n=Pm(n),ld(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var A=0,R=-1,L=-1,F=0,W=0,Q=n,z=null;t:for(;;){for(var G;Q!==l||m!==0&&Q.nodeType!==3||(R=A+m),Q!==b||d!==0&&Q.nodeType!==3||(L=A+d),Q.nodeType===3&&(A+=Q.nodeValue.length),(G=Q.firstChild)!==null;)z=Q,Q=G;for(;;){if(Q===n)break t;if(z===l&&++F===m&&(R=A),z===b&&++W===d&&(L=A),(G=Q.nextSibling)!==null)break;Q=z,z=Q.parentNode}Q=G}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(jh={focusedElem:n,selectionRange:l},Sc=!1,Ct=s;Ct!==null;)if(s=Ct,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,Ct=n;else for(;Ct!==null;){switch(s=Ct,b=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)m=n[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&b!==null){n=void 0,l=s,m=b.memoizedProps,b=b.memoizedState,d=l.stateNode;try{var ae=Qs(l.type,m);n=d.getSnapshotBeforeUpdate(ae,b),d.__reactInternalSnapshotBeforeUpdate=n}catch(pe){Ge(l,l.return,pe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,l=n.nodeType,l===9)Fh(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Fh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Ct=n;break}Ct=s.return}}function _0(n,s,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:ki(n,l),d&4&&oo(5,l);break;case 1:if(ki(n,l),d&4)if(n=l.stateNode,s===null)try{n.componentDidMount()}catch(A){Ge(l,l.return,A)}else{var m=Qs(l.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(A){Ge(l,l.return,A)}}d&64&&v0(l),d&512&&lo(l,l.return);break;case 3:if(ki(n,l),d&64&&(n=l.updateQueue,n!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{cg(n,s)}catch(A){Ge(l,l.return,A)}}break;case 27:s===null&&d&4&&S0(l);case 26:case 5:ki(n,l),s===null&&d&4&&w0(l),d&512&&lo(l,l.return);break;case 12:ki(n,l);break;case 31:ki(n,l),d&4&&R0(n,l);break;case 13:ki(n,l),d&4&&N0(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=PA.bind(null,l),nS(n,l))));break;case 22:if(d=l.memoizedState!==null||Ni,!d){s=s!==null&&s.memoizedState!==null||bt,m=Ni;var b=bt;Ni=d,(bt=s)&&!b?Mi(n,l,(l.subtreeFlags&8772)!==0):ki(n,l),Ni=m,bt=b}break;case 30:break;default:ki(n,l)}}function T0(n){var s=n.alternate;s!==null&&(n.alternate=null,T0(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&$u(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Je=null,Jt=!1;function Di(n,s,l){for(l=l.child;l!==null;)C0(n,s,l),l=l.sibling}function C0(n,s,l){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Is,l)}catch{}switch(l.tag){case 26:bt||ni(l,s),Di(n,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:bt||ni(l,s);var d=Je,m=Jt;ys(l.type)&&(Je=l.stateNode,Jt=!1),Di(n,s,l),bo(l.stateNode),Je=d,Jt=m;break;case 5:bt||ni(l,s);case 6:if(d=Je,m=Jt,Je=null,Di(n,s,l),Je=d,Jt=m,Je!==null)if(Jt)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(l.stateNode)}catch(b){Ge(l,s,b)}else try{Je.removeChild(l.stateNode)}catch(b){Ge(l,s,b)}break;case 18:Je!==null&&(Jt?(n=Je,vy(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),tr(n)):vy(Je,l.stateNode));break;case 4:d=Je,m=Jt,Je=l.stateNode.containerInfo,Jt=!0,Di(n,s,l),Je=d,Jt=m;break;case 0:case 11:case 14:case 15:us(2,l,s),bt||us(4,l,s),Di(n,s,l);break;case 1:bt||(ni(l,s),d=l.stateNode,typeof d.componentWillUnmount=="function"&&x0(l,s,d)),Di(n,s,l);break;case 21:Di(n,s,l);break;case 22:bt=(d=bt)||l.memoizedState!==null,Di(n,s,l),bt=d;break;default:Di(n,s,l)}}function R0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{tr(n)}catch(l){Ge(s,s.return,l)}}}function N0(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{tr(n)}catch(l){Ge(s,s.return,l)}}function RA(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new E0),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new E0),s;default:throw Error(i(435,n.tag))}}function ic(n,s){var l=RA(n);s.forEach(function(d){if(!l.has(d)){l.add(d);var m=jA.bind(null,n,d);d.then(m,m)}})}function en(n,s){var l=s.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d],b=n,A=s,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(ys(R.type)){Je=R.stateNode,Jt=!1;break e}break;case 5:Je=R.stateNode,Jt=!1;break e;case 3:case 4:Je=R.stateNode.containerInfo,Jt=!0;break e}R=R.return}if(Je===null)throw Error(i(160));C0(b,A,m),Je=null,Jt=!1,b=m.alternate,b!==null&&(b.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)D0(s,n),s=s.sibling}var Fn=null;function D0(n,s){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:en(s,n),tn(n),d&4&&(us(3,n,n.return),oo(3,n),us(5,n,n.return));break;case 1:en(s,n),tn(n),d&512&&(bt||l===null||ni(l,l.return)),d&64&&Ni&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var m=Fn;if(en(s,n),tn(n),d&512&&(bt||l===null||ni(l,l.return)),d&4){var b=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":b=m.getElementsByTagName("title")[0],(!b||b[Ir]||b[Mt]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=m.createElement(d),m.head.insertBefore(b,m.querySelector("head > title"))),Pt(b,d,l),b[Mt]=n,Tt(b),d=b;break e;case"link":var A=Dy("link","href",m).get(d+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(b=A[R],b.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&b.getAttribute("rel")===(l.rel==null?null:l.rel)&&b.getAttribute("title")===(l.title==null?null:l.title)&&b.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}b=m.createElement(d),Pt(b,d,l),m.head.appendChild(b);break;case"meta":if(A=Dy("meta","content",m).get(d+(l.content||""))){for(R=0;R<A.length;R++)if(b=A[R],b.getAttribute("content")===(l.content==null?null:""+l.content)&&b.getAttribute("name")===(l.name==null?null:l.name)&&b.getAttribute("property")===(l.property==null?null:l.property)&&b.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&b.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}b=m.createElement(d),Pt(b,d,l),m.head.appendChild(b);break;default:throw Error(i(468,d))}b[Mt]=n,Tt(b),d=b}n.stateNode=d}else ky(m,n.type,n.stateNode);else n.stateNode=Ny(m,d,n.memoizedProps);else b!==d?(b===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):b.count--,d===null?ky(m,n.type,n.stateNode):Ny(m,d,n.memoizedProps)):d===null&&n.stateNode!==null&&hh(n,n.memoizedProps,l.memoizedProps)}break;case 27:en(s,n),tn(n),d&512&&(bt||l===null||ni(l,l.return)),l!==null&&d&4&&hh(n,n.memoizedProps,l.memoizedProps);break;case 5:if(en(s,n),tn(n),d&512&&(bt||l===null||ni(l,l.return)),n.flags&32){m=n.stateNode;try{Ea(m,"")}catch(ae){Ge(n,n.return,ae)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,hh(n,m,l!==null?l.memoizedProps:m)),d&1024&&(mh=!0);break;case 6:if(en(s,n),tn(n),d&4){if(n.stateNode===null)throw Error(i(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch(ae){Ge(n,n.return,ae)}}break;case 3:if(vc=null,m=Fn,Fn=yc(s.containerInfo),en(s,n),Fn=m,tn(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{tr(s.containerInfo)}catch(ae){Ge(n,n.return,ae)}mh&&(mh=!1,k0(n));break;case 4:d=Fn,Fn=yc(n.stateNode.containerInfo),en(s,n),tn(n),Fn=d;break;case 12:en(s,n),tn(n);break;case 31:en(s,n),tn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,ic(n,d)));break;case 13:en(s,n),tn(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(ac=Bt()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,ic(n,d)));break;case 22:m=n.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,F=Ni,W=bt;if(Ni=F||m,bt=W||L,en(s,n),bt=W,Ni=F,tn(n),d&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(l===null||L||Ni||bt||Zs(n)),l=null,s=n;;){if(s.tag===5||s.tag===26){if(l===null){L=l=s;try{if(b=L.stateNode,m)A=b.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=L.stateNode;var Q=L.memoizedProps.style,z=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;R.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(ae){Ge(L,L.return,ae)}}}else if(s.tag===6){if(l===null){L=s;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(ae){Ge(L,L.return,ae)}}}else if(s.tag===18){if(l===null){L=s;try{var G=L.stateNode;m?xy(G,!0):xy(L.stateNode,!1)}catch(ae){Ge(L,L.return,ae)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,ic(n,l))));break;case 19:en(s,n),tn(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,ic(n,d)));break;case 30:break;case 21:break;default:en(s,n),tn(n)}}function tn(n){var s=n.flags;if(s&2){try{for(var l,d=n.return;d!==null;){if(A0(d)){l=d;break}d=d.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var m=l.stateNode,b=fh(n);nc(n,b,m);break;case 5:var A=l.stateNode;l.flags&32&&(Ea(A,""),l.flags&=-33);var R=fh(n);nc(n,R,A);break;case 3:case 4:var L=l.stateNode.containerInfo,F=fh(n);ph(n,F,L);break;default:throw Error(i(161))}}catch(W){Ge(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function k0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;k0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function ki(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)_0(n,s.alternate,s),s=s.sibling}function Zs(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:us(4,s,s.return),Zs(s);break;case 1:ni(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&x0(s,s.return,l),Zs(s);break;case 27:bo(s.stateNode);case 26:case 5:ni(s,s.return),Zs(s);break;case 22:s.memoizedState===null&&Zs(s);break;case 30:Zs(s);break;default:Zs(s)}n=n.sibling}}function Mi(n,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,m=n,b=s,A=b.flags;switch(b.tag){case 0:case 11:case 15:Mi(m,b,l),oo(4,b);break;case 1:if(Mi(m,b,l),d=b,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(F){Ge(d,d.return,F)}if(d=b,m=d.updateQueue,m!==null){var R=d.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)lg(L[m],R)}catch(F){Ge(d,d.return,F)}}l&&A&64&&v0(b),lo(b,b.return);break;case 27:S0(b);case 26:case 5:Mi(m,b,l),l&&d===null&&A&4&&w0(b),lo(b,b.return);break;case 12:Mi(m,b,l);break;case 31:Mi(m,b,l),l&&A&4&&R0(m,b);break;case 13:Mi(m,b,l),l&&A&4&&N0(m,b);break;case 22:b.memoizedState===null&&Mi(m,b,l),lo(b,b.return);break;case 30:break;default:Mi(m,b,l)}s=s.sibling}}function gh(n,s){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&Wr(l))}function yh(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wr(n))}function zn(n,s,l,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)M0(n,s,l,d),s=s.sibling}function M0(n,s,l,d){var m=s.flags;switch(s.tag){case 0:case 11:case 15:zn(n,s,l,d),m&2048&&oo(9,s);break;case 1:zn(n,s,l,d);break;case 3:zn(n,s,l,d),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Wr(n)));break;case 12:if(m&2048){zn(n,s,l,d),n=s.stateNode;try{var b=s.memoizedProps,A=b.id,R=b.onPostCommit;typeof R=="function"&&R(A,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){Ge(s,s.return,L)}}else zn(n,s,l,d);break;case 31:zn(n,s,l,d);break;case 13:zn(n,s,l,d);break;case 23:break;case 22:b=s.stateNode,A=s.alternate,s.memoizedState!==null?b._visibility&2?zn(n,s,l,d):co(n,s):b._visibility&2?zn(n,s,l,d):(b._visibility|=2,Ga(n,s,l,d,(s.subtreeFlags&10256)!==0||!1)),m&2048&&gh(A,s);break;case 24:zn(n,s,l,d),m&2048&&yh(s.alternate,s);break;default:zn(n,s,l,d)}}function Ga(n,s,l,d,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=n,A=s,R=l,L=d,F=A.flags;switch(A.tag){case 0:case 11:case 15:Ga(b,A,R,L,m),oo(8,A);break;case 23:break;case 22:var W=A.stateNode;A.memoizedState!==null?W._visibility&2?Ga(b,A,R,L,m):co(b,A):(W._visibility|=2,Ga(b,A,R,L,m)),m&&F&2048&&gh(A.alternate,A);break;case 24:Ga(b,A,R,L,m),m&&F&2048&&yh(A.alternate,A);break;default:Ga(b,A,R,L,m)}s=s.sibling}}function co(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=n,d=s,m=d.flags;switch(d.tag){case 22:co(l,d),m&2048&&gh(d.alternate,d);break;case 24:co(l,d),m&2048&&yh(d.alternate,d);break;default:co(l,d)}s=s.sibling}}var uo=8192;function $a(n,s,l){if(n.subtreeFlags&uo)for(n=n.child;n!==null;)L0(n,s,l),n=n.sibling}function L0(n,s,l){switch(n.tag){case 26:$a(n,s,l),n.flags&uo&&n.memoizedState!==null&&pS(l,Fn,n.memoizedState,n.memoizedProps);break;case 5:$a(n,s,l);break;case 3:case 4:var d=Fn;Fn=yc(n.stateNode.containerInfo),$a(n,s,l),Fn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=uo,uo=16777216,$a(n,s,l),uo=d):$a(n,s,l));break;default:$a(n,s,l)}}function O0(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function ho(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Ct=d,P0(d,n)}O0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)I0(n),n=n.sibling}function I0(n){switch(n.tag){case 0:case 11:case 15:ho(n),n.flags&2048&&us(9,n,n.return);break;case 3:ho(n);break;case 12:ho(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,sc(n)):ho(n);break;default:ho(n)}}function sc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];Ct=d,P0(d,n)}O0(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:us(8,s,s.return),sc(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,sc(s));break;default:sc(s)}n=n.sibling}}function P0(n,s){for(;Ct!==null;){var l=Ct;switch(l.tag){case 0:case 11:case 15:us(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Wr(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Ct=d;else e:for(l=n;Ct!==null;){d=Ct;var m=d.sibling,b=d.return;if(T0(d),d===l){Ct=null;break e}if(m!==null){m.return=b,Ct=m;break e}Ct=b}}}var NA={getCacheForType:function(n){var s=Ot(mt),l=s.data.get(n);return l===void 0&&(l=n(),s.data.set(n,l)),l},cacheSignal:function(){return Ot(mt).controller.signal}},DA=typeof WeakMap=="function"?WeakMap:Map,je=0,Xe=null,Ce=null,Ne=0,Ve=0,mn=null,ds=!1,qa=!1,bh=!1,Li=0,ut=0,hs=0,Js=0,vh=0,gn=0,Ya=0,fo=null,nn=null,xh=!1,ac=0,j0=0,rc=1/0,oc=null,fs=null,At=0,ps=null,Wa=null,Oi=0,wh=0,Ah=null,B0=null,po=0,Sh=null;function yn(){return(je&2)!==0&&Ne!==0?Ne&-Ne:j.T!==null?Nh():em()}function U0(){if(gn===0)if((Ne&536870912)===0||Me){var n=Ae;Ae<<=1,(Ae&3932160)===0&&(Ae=262144),gn=n}else gn=536870912;return n=fn.current,n!==null&&(n.flags|=32),gn}function sn(n,s,l){(n===Xe&&(Ve===2||Ve===9)||n.cancelPendingCommit!==null)&&(Xa(n,0),ms(n,Ne,gn,!1)),Or(n,l),((je&2)===0||n!==Xe)&&(n===Xe&&((je&2)===0&&(Js|=l),ut===4&&ms(n,Ne,gn,!1)),ii(n))}function F0(n,s,l){if((je&6)!==0)throw Error(i(327));var d=!l&&(s&127)===0&&(s&n.expiredLanes)===0||Kt(n,s),m=d?LA(n,s):_h(n,s,!0),b=d;do{if(m===0){qa&&!d&&ms(n,s,0,!1);break}else{if(l=n.current.alternate,b&&!kA(l)){m=_h(n,s,!1),b=!1;continue}if(m===2){if(b=s,n.errorRecoveryDisabledLanes&b)var A=0;else A=n.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var R=n;m=fo;var L=R.current.memoizedState.isDehydrated;if(L&&(Xa(R,A).flags|=256),A=_h(R,A,!1),A!==2){if(bh&&!L){R.errorRecoveryDisabledLanes|=b,Js|=b,m=4;break e}b=nn,nn=m,b!==null&&(nn===null?nn=b:nn.push.apply(nn,b))}m=A}if(b=!1,m!==2)continue}}if(m===1){Xa(n,0),ms(n,s,0,!0);break}e:{switch(d=n,b=m,b){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ms(d,s,gn,!ds);break e;case 2:nn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(m=ac+300-Bt(),10<m)){if(ms(d,s,gn,!ds),_t(d,0,!0)!==0)break e;Oi=s,d.timeoutHandle=yy(z0.bind(null,d,l,nn,oc,xh,s,gn,Js,Ya,ds,b,"Throttled",-0,0),m);break e}z0(d,l,nn,oc,xh,s,gn,Js,Ya,ds,b,null,-0,0)}}break}while(!0);ii(n)}function z0(n,s,l,d,m,b,A,R,L,F,W,Q,z,G){if(n.timeoutHandle=-1,Q=s.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:vi},L0(s,b,Q);var ae=(b&62914560)===b?ac-Bt():(b&4194048)===b?j0-Bt():0;if(ae=mS(Q,ae),ae!==null){Oi=b,n.cancelPendingCommit=ae(X0.bind(null,n,s,b,l,d,m,A,R,L,W,Q,null,z,G)),ms(n,b,A,!F);return}}X0(n,s,b,l,d,m,A,R,L)}function kA(n){for(var s=n;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var m=l[d],b=m.getSnapshot;m=m.value;try{if(!dn(b(),m))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ms(n,s,l,d){s&=~vh,s&=~Js,n.suspendedLanes|=s,n.pingedLanes&=~s,d&&(n.warmLanes|=s),d=n.expirationTimes;for(var m=s;0<m;){var b=31-Ut(m),A=1<<b;d[b]=-1,m&=~A}l!==0&&Qp(n,l,s)}function lc(){return(je&6)===0?(mo(0),!1):!0}function Eh(){if(Ce!==null){if(Ve===0)var n=Ce.return;else n=Ce,Si=Gs=null,Fd(n),Ua=null,Kr=0,n=Ce;for(;n!==null;)b0(n.alternate,n),n=n.return;Ce=null}}function Xa(n,s){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,QA(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Oi=0,Eh(),Xe=n,Ce=l=wi(n.current,null),Ne=s,Ve=0,mn=null,ds=!1,qa=Kt(n,s),bh=!1,Ya=gn=vh=Js=hs=ut=0,nn=fo=null,xh=!1,(s&8)!==0&&(s|=s&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=s;0<d;){var m=31-Ut(d),b=1<<m;s|=n[m],d&=~b}return Li=s,Nl(),l}function H0(n,s){Se=null,j.H=so,s===Ba||s===jl?(s=sg(),Ve=3):s===Rd?(s=sg(),Ve=4):Ve=s===nh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,mn=s,Ce===null&&(ut=1,Ql(n,Rn(s,n.current)))}function V0(){var n=fn.current;return n===null?!0:(Ne&4194048)===Ne?Mn===null:(Ne&62914560)===Ne||(Ne&536870912)!==0?n===Mn:!1}function G0(){var n=j.H;return j.H=so,n===null?so:n}function $0(){var n=j.A;return j.A=NA,n}function cc(){ut=4,ds||(Ne&4194048)!==Ne&&fn.current!==null||(qa=!0),(hs&134217727)===0&&(Js&134217727)===0||Xe===null||ms(Xe,Ne,gn,!1)}function _h(n,s,l){var d=je;je|=2;var m=G0(),b=$0();(Xe!==n||Ne!==s)&&(oc=null,Xa(n,s)),s=!1;var A=ut;e:do try{if(Ve!==0&&Ce!==null){var R=Ce,L=mn;switch(Ve){case 8:Eh(),A=6;break e;case 3:case 2:case 9:case 6:fn.current===null&&(s=!0);var F=Ve;if(Ve=0,mn=null,Ka(n,R,L,F),l&&qa){A=0;break e}break;default:F=Ve,Ve=0,mn=null,Ka(n,R,L,F)}}MA(),A=ut;break}catch(W){H0(n,W)}while(!0);return s&&n.shellSuspendCounter++,Si=Gs=null,je=d,j.H=m,j.A=b,Ce===null&&(Xe=null,Ne=0,Nl()),A}function MA(){for(;Ce!==null;)q0(Ce)}function LA(n,s){var l=je;je|=2;var d=G0(),m=$0();Xe!==n||Ne!==s?(oc=null,rc=Bt()+500,Xa(n,s)):qa=Kt(n,s);e:do try{if(Ve!==0&&Ce!==null){s=Ce;var b=mn;t:switch(Ve){case 1:Ve=0,mn=null,Ka(n,s,b,1);break;case 2:case 9:if(ng(b)){Ve=0,mn=null,Y0(s);break}s=function(){Ve!==2&&Ve!==9||Xe!==n||(Ve=7),ii(n)},b.then(s,s);break e;case 3:Ve=7;break e;case 4:Ve=5;break e;case 7:ng(b)?(Ve=0,mn=null,Y0(s)):(Ve=0,mn=null,Ka(n,s,b,7));break;case 5:var A=null;switch(Ce.tag){case 26:A=Ce.memoizedState;case 5:case 27:var R=Ce;if(A?My(A):R.stateNode.complete){Ve=0,mn=null;var L=R.sibling;if(L!==null)Ce=L;else{var F=R.return;F!==null?(Ce=F,uc(F)):Ce=null}break t}}Ve=0,mn=null,Ka(n,s,b,5);break;case 6:Ve=0,mn=null,Ka(n,s,b,6);break;case 8:Eh(),ut=6;break e;default:throw Error(i(462))}}OA();break}catch(W){H0(n,W)}while(!0);return Si=Gs=null,j.H=d,j.A=m,je=l,Ce!==null?0:(Xe=null,Ne=0,Nl(),ut)}function OA(){for(;Ce!==null&&!ma();)q0(Ce)}function q0(n){var s=g0(n.alternate,n,Li);n.memoizedProps=n.pendingProps,s===null?uc(n):Ce=s}function Y0(n){var s=n,l=s.alternate;switch(s.tag){case 15:case 0:s=u0(l,s,s.pendingProps,s.type,void 0,Ne);break;case 11:s=u0(l,s,s.pendingProps,s.type.render,s.ref,Ne);break;case 5:Fd(s);default:b0(l,s),s=Ce=$m(s,Li),s=g0(l,s,Li)}n.memoizedProps=n.pendingProps,s===null?uc(n):Ce=s}function Ka(n,s,l,d){Si=Gs=null,Fd(s),Ua=null,Kr=0;var m=s.return;try{if(AA(n,m,s,l,Ne)){ut=1,Ql(n,Rn(l,n.current)),Ce=null;return}}catch(b){if(m!==null)throw Ce=m,b;ut=1,Ql(n,Rn(l,n.current)),Ce=null;return}s.flags&32768?(Me||d===1?n=!0:qa||(Ne&536870912)!==0?n=!1:(ds=n=!0,(d===2||d===9||d===3||d===6)&&(d=fn.current,d!==null&&d.tag===13&&(d.flags|=16384))),W0(s,n)):uc(s)}function uc(n){var s=n;do{if((s.flags&32768)!==0){W0(s,ds);return}n=s.return;var l=_A(s.alternate,s,Li);if(l!==null){Ce=l;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=n}while(s!==null);ut===0&&(ut=5)}function W0(n,s){do{var l=TA(n.alternate,n);if(l!==null){l.flags&=32767,Ce=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(n=n.sibling,n!==null)){Ce=n;return}Ce=n=l}while(n!==null);ut=6,Ce=null}function X0(n,s,l,d,m,b,A,R,L){n.cancelPendingCommit=null;do dc();while(At!==0);if((je&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(b=s.lanes|s.childLanes,b|=fd,fw(n,l,b,A,R,L),n===Xe&&(Ce=Xe=null,Ne=0),Wa=s,ps=n,Oi=l,wh=b,Ah=m,B0=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,BA(ga,function(){return ey(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=j.T,j.T=null,m=q.p,q.p=2,A=je,je|=4;try{CA(n,s,l)}finally{je=A,q.p=m,j.T=d}}At=1,K0(),Q0(),Z0()}}function K0(){if(At===1){At=0;var n=ps,s=Wa,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=j.T,j.T=null;var d=q.p;q.p=2;var m=je;je|=4;try{D0(s,n);var b=jh,A=Pm(n.containerInfo),R=b.focusedElem,L=b.selectionRange;if(A!==R&&R&&R.ownerDocument&&Im(R.ownerDocument.documentElement,R)){if(L!==null&&ld(R)){var F=L.start,W=L.end;if(W===void 0&&(W=F),"selectionStart"in R)R.selectionStart=F,R.selectionEnd=Math.min(W,R.value.length);else{var Q=R.ownerDocument||document,z=Q&&Q.defaultView||window;if(z.getSelection){var G=z.getSelection(),ae=R.textContent.length,pe=Math.min(L.start,ae),Ye=L.end===void 0?pe:Math.min(L.end,ae);!G.extend&&pe>Ye&&(A=Ye,Ye=pe,pe=A);var B=Om(R,pe),I=Om(R,Ye);if(B&&I&&(G.rangeCount!==1||G.anchorNode!==B.node||G.anchorOffset!==B.offset||G.focusNode!==I.node||G.focusOffset!==I.offset)){var U=Q.createRange();U.setStart(B.node,B.offset),G.removeAllRanges(),pe>Ye?(G.addRange(U),G.extend(I.node,I.offset)):(U.setEnd(I.node,I.offset),G.addRange(U))}}}}for(Q=[],G=R;G=G.parentNode;)G.nodeType===1&&Q.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<Q.length;R++){var K=Q[R];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}Sc=!!Ph,jh=Ph=null}finally{je=m,q.p=d,j.T=l}}n.current=s,At=2}}function Q0(){if(At===2){At=0;var n=ps,s=Wa,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=j.T,j.T=null;var d=q.p;q.p=2;var m=je;je|=4;try{_0(n,s.alternate,s)}finally{je=m,q.p=d,j.T=l}}At=3}}function Z0(){if(At===4||At===3){At=0,Iu();var n=ps,s=Wa,l=Oi,d=B0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?At=5:(At=0,Wa=ps=null,J0(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(fs=null),Vu(l),s=s.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Is,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=j.T,m=q.p,q.p=2,j.T=null;try{for(var b=n.onRecoverableError,A=0;A<d.length;A++){var R=d[A];b(R.value,{componentStack:R.stack})}}finally{j.T=s,q.p=m}}(Oi&3)!==0&&dc(),ii(n),m=n.pendingLanes,(l&261930)!==0&&(m&42)!==0?n===Sh?po++:(po=0,Sh=n):po=0,mo(0)}}function J0(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Wr(s)))}function dc(){return K0(),Q0(),Z0(),ey()}function ey(){if(At!==5)return!1;var n=ps,s=wh;wh=0;var l=Vu(Oi),d=j.T,m=q.p;try{q.p=32>l?32:l,j.T=null,l=Ah,Ah=null;var b=ps,A=Oi;if(At=0,Wa=ps=null,Oi=0,(je&6)!==0)throw Error(i(331));var R=je;if(je|=4,I0(b.current),M0(b,b.current,A,l),je=R,mo(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Is,b)}catch{}return!0}finally{q.p=m,j.T=d,J0(n,s)}}function ty(n,s,l){s=Rn(l,s),s=th(n.stateNode,s,2),n=os(n,s,2),n!==null&&(Or(n,2),ii(n))}function Ge(n,s,l){if(n.tag===3)ty(n,n,l);else for(;s!==null;){if(s.tag===3){ty(s,n,l);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(fs===null||!fs.has(d))){n=Rn(l,n),l=n0(2),d=os(s,l,2),d!==null&&(i0(l,d,s,n),Or(d,2),ii(d));break}}s=s.return}}function Th(n,s,l){var d=n.pingCache;if(d===null){d=n.pingCache=new DA;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(l)||(bh=!0,m.add(l),n=IA.bind(null,n,s,l),s.then(n,n))}function IA(n,s,l){var d=n.pingCache;d!==null&&d.delete(s),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,Xe===n&&(Ne&l)===l&&(ut===4||ut===3&&(Ne&62914560)===Ne&&300>Bt()-ac?(je&2)===0&&Xa(n,0):vh|=l,Ya===Ne&&(Ya=0)),ii(n)}function ny(n,s){s===0&&(s=En()),n=zs(n,s),n!==null&&(Or(n,s),ii(n))}function PA(n){var s=n.memoizedState,l=0;s!==null&&(l=s.retryLane),ny(n,l)}function jA(n,s){var l=0;switch(n.tag){case 31:case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(s),ny(n,l)}function BA(n,s){return kr(n,s)}var hc=null,Qa=null,Ch=!1,fc=!1,Rh=!1,gs=0;function ii(n){n!==Qa&&n.next===null&&(Qa===null?hc=Qa=n:Qa=Qa.next=n),fc=!0,Ch||(Ch=!0,FA())}function mo(n,s){if(!Rh&&fc){Rh=!0;do for(var l=!1,d=hc;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var b=0;else{var A=d.suspendedLanes,R=d.pingedLanes;b=(1<<31-Ut(42|n)+1)-1,b&=m&~(A&~R),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(l=!0,ry(d,b))}else b=Ne,b=_t(d,d===Xe?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Kt(d,b)||(l=!0,ry(d,b));d=d.next}while(l);Rh=!1}}function UA(){iy()}function iy(){fc=Ch=!1;var n=0;gs!==0&&KA()&&(n=gs);for(var s=Bt(),l=null,d=hc;d!==null;){var m=d.next,b=sy(d,s);b===0?(d.next=null,l===null?hc=m:l.next=m,m===null&&(Qa=l)):(l=d,(n!==0||(b&3)!==0)&&(fc=!0)),d=m}At!==0&&At!==5||mo(n),gs!==0&&(gs=0)}function sy(n,s){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,b=n.pendingLanes&-62914561;0<b;){var A=31-Ut(b),R=1<<A,L=m[A];L===-1?((R&l)===0||(R&d)!==0)&&(m[A]=Ps(R,s)):L<=s&&(n.expiredLanes|=R),b&=~R}if(s=Xe,l=Ne,l=_t(n,n===s?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===s&&(Ve===2||Ve===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&Mr(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||Kt(n,l)){if(s=l&-l,s===n.callbackPriority)return s;switch(d!==null&&Mr(d),Vu(l)){case 2:case 8:l=Lr;break;case 32:l=ga;break;case 268435456:l=Pu;break;default:l=ga}return d=ay.bind(null,n),l=kr(l,d),n.callbackPriority=s,n.callbackNode=l,s}return d!==null&&d!==null&&Mr(d),n.callbackPriority=2,n.callbackNode=null,2}function ay(n,s){if(At!==0&&At!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if(dc()&&n.callbackNode!==l)return null;var d=Ne;return d=_t(n,n===Xe?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(F0(n,d,s),sy(n,Bt()),n.callbackNode!=null&&n.callbackNode===l?ay.bind(null,n):null)}function ry(n,s){if(dc())return null;F0(n,s,!0)}function FA(){ZA(function(){(je&6)!==0?kr(ml,UA):iy()})}function Nh(){if(gs===0){var n=Pa;n===0&&(n=ya,ya<<=1,(ya&261888)===0&&(ya=256)),gs=n}return gs}function oy(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:wl(""+n)}function ly(n,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,n.id&&l.setAttribute("form",n.id),s.parentNode.insertBefore(l,s),n=new FormData(n),l.parentNode.removeChild(l),n}function zA(n,s,l,d,m){if(s==="submit"&&l&&l.stateNode===m){var b=oy((m[Qt]||null).action),A=d.submitter;A&&(s=(s=A[Qt]||null)?oy(s.formAction):A.getAttribute("formAction"),s!==null&&(b=s,A=null));var R=new _l("action","action",null,d,m);n.push({event:R,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(gs!==0){var L=A?ly(m,A):new FormData(m);Xd(l,{pending:!0,data:L,method:m.method,action:b},null,L)}}else typeof b=="function"&&(R.preventDefault(),L=A?ly(m,A):new FormData(m),Xd(l,{pending:!0,data:L,method:m.method,action:b},b,L))},currentTarget:m}]})}}for(var Dh=0;Dh<hd.length;Dh++){var kh=hd[Dh],HA=kh.toLowerCase(),VA=kh[0].toUpperCase()+kh.slice(1);Un(HA,"on"+VA)}Un(Um,"onAnimationEnd"),Un(Fm,"onAnimationIteration"),Un(zm,"onAnimationStart"),Un("dblclick","onDoubleClick"),Un("focusin","onFocus"),Un("focusout","onBlur"),Un(aA,"onTransitionRun"),Un(rA,"onTransitionStart"),Un(oA,"onTransitionCancel"),Un(Hm,"onTransitionEnd"),Aa("onMouseEnter",["mouseout","mouseover"]),Aa("onMouseLeave",["mouseout","mouseover"]),Aa("onPointerEnter",["pointerout","pointerover"]),Aa("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function cy(n,s){s=(s&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var b=void 0;if(s)for(var A=d.length-1;0<=A;A--){var R=d[A],L=R.instance,F=R.currentTarget;if(R=R.listener,L!==b&&m.isPropagationStopped())break e;b=R,m.currentTarget=F;try{b(m)}catch(W){Rl(W)}m.currentTarget=null,b=L}else for(A=0;A<d.length;A++){if(R=d[A],L=R.instance,F=R.currentTarget,R=R.listener,L!==b&&m.isPropagationStopped())break e;b=R,m.currentTarget=F;try{b(m)}catch(W){Rl(W)}m.currentTarget=null,b=L}}}}function Re(n,s){var l=s[Gu];l===void 0&&(l=s[Gu]=new Set);var d=n+"__bubble";l.has(d)||(uy(s,n,2,!1),l.add(d))}function Mh(n,s,l){var d=0;s&&(d|=4),uy(l,n,d,s)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Lh(n){if(!n[pc]){n[pc]=!0,im.forEach(function(l){l!=="selectionchange"&&(GA.has(l)||Mh(l,!1,n),Mh(l,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[pc]||(s[pc]=!0,Mh("selectionchange",!1,s))}}function uy(n,s,l,d){switch(Uy(s)){case 2:var m=bS;break;case 8:m=vS;break;default:m=Wh}l=m.bind(null,s,l,n),m=void 0,!Ju||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(s,l,{capture:!0,passive:m}):n.addEventListener(s,l,!0):m!==void 0?n.addEventListener(s,l,{passive:m}):n.addEventListener(s,l,!1)}function Oh(n,s,l,d,m){var b=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var R=d.stateNode.containerInfo;if(R===m)break;if(A===4)for(A=d.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===m)return;A=A.return}for(;R!==null;){if(A=va(R),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){d=b=A;continue e}R=R.parentNode}}d=d.return}mm(function(){var F=b,W=Qu(l),Q=[];e:{var z=Vm.get(n);if(z!==void 0){var G=_l,ae=n;switch(n){case"keypress":if(Sl(l)===0)break e;case"keydown":case"keyup":G=jw;break;case"focusin":ae="focus",G=id;break;case"focusout":ae="blur",G=id;break;case"beforeblur":case"afterblur":G=id;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=bm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=_w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=Fw;break;case Um:case Fm:case zm:G=Rw;break;case Hm:G=Hw;break;case"scroll":case"scrollend":G=Sw;break;case"wheel":G=Gw;break;case"copy":case"cut":case"paste":G=Dw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=xm;break;case"toggle":case"beforetoggle":G=qw}var pe=(s&4)!==0,Ye=!pe&&(n==="scroll"||n==="scrollend"),B=pe?z!==null?z+"Capture":null:z;pe=[];for(var I=F,U;I!==null;){var K=I;if(U=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||U===null||B===null||(K=jr(I,B),K!=null&&pe.push(yo(I,K,U))),Ye)break;I=I.return}0<pe.length&&(z=new G(z,ae,null,l,W),Q.push({event:z,listeners:pe}))}}if((s&7)===0){e:{if(z=n==="mouseover"||n==="pointerover",G=n==="mouseout"||n==="pointerout",z&&l!==Ku&&(ae=l.relatedTarget||l.fromElement)&&(va(ae)||ae[ba]))break e;if((G||z)&&(z=W.window===W?W:(z=W.ownerDocument)?z.defaultView||z.parentWindow:window,G?(ae=l.relatedTarget||l.toElement,G=F,ae=ae?va(ae):null,ae!==null&&(Ye=o(ae),pe=ae.tag,ae!==Ye||pe!==5&&pe!==27&&pe!==6)&&(ae=null)):(G=null,ae=F),G!==ae)){if(pe=bm,K="onMouseLeave",B="onMouseEnter",I="mouse",(n==="pointerout"||n==="pointerover")&&(pe=xm,K="onPointerLeave",B="onPointerEnter",I="pointer"),Ye=G==null?z:Pr(G),U=ae==null?z:Pr(ae),z=new pe(K,I+"leave",G,l,W),z.target=Ye,z.relatedTarget=U,K=null,va(W)===F&&(pe=new pe(B,I+"enter",ae,l,W),pe.target=U,pe.relatedTarget=Ye,K=pe),Ye=K,G&&ae)t:{for(pe=$A,B=G,I=ae,U=0,K=B;K;K=pe(K))U++;K=0;for(var le=I;le;le=pe(le))K++;for(;0<U-K;)B=pe(B),U--;for(;0<K-U;)I=pe(I),K--;for(;U--;){if(B===I||I!==null&&B===I.alternate){pe=B;break t}B=pe(B),I=pe(I)}pe=null}else pe=null;G!==null&&dy(Q,z,G,pe,!1),ae!==null&&Ye!==null&&dy(Q,Ye,ae,pe,!0)}}e:{if(z=F?Pr(F):window,G=z.nodeName&&z.nodeName.toLowerCase(),G==="select"||G==="input"&&z.type==="file")var Oe=Rm;else if(Tm(z))if(Nm)Oe=nA;else{Oe=eA;var oe=Jw}else G=z.nodeName,!G||G.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?F&&Xu(F.elementType)&&(Oe=Rm):Oe=tA;if(Oe&&(Oe=Oe(n,F))){Cm(Q,Oe,l,W);break e}oe&&oe(n,z,F),n==="focusout"&&F&&z.type==="number"&&F.memoizedProps.value!=null&&Wu(z,"number",z.value)}switch(oe=F?Pr(F):window,n){case"focusin":(Tm(oe)||oe.contentEditable==="true")&&(Ra=oe,cd=F,$r=null);break;case"focusout":$r=cd=Ra=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,jm(Q,l,W);break;case"selectionchange":if(sA)break;case"keydown":case"keyup":jm(Q,l,W)}var Ee;if(ad)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Ca?Em(n,l)&&(De="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(De="onCompositionStart");De&&(wm&&l.locale!=="ko"&&(Ca||De!=="onCompositionStart"?De==="onCompositionEnd"&&Ca&&(Ee=gm()):(es=W,ed="value"in es?es.value:es.textContent,Ca=!0)),oe=mc(F,De),0<oe.length&&(De=new vm(De,n,null,l,W),Q.push({event:De,listeners:oe}),Ee?De.data=Ee:(Ee=_m(l),Ee!==null&&(De.data=Ee)))),(Ee=Ww?Xw(n,l):Kw(n,l))&&(De=mc(F,"onBeforeInput"),0<De.length&&(oe=new vm("onBeforeInput","beforeinput",null,l,W),Q.push({event:oe,listeners:De}),oe.data=Ee)),zA(Q,n,F,l,W)}cy(Q,s)})}function yo(n,s,l){return{instance:n,listener:s,currentTarget:l}}function mc(n,s){for(var l=s+"Capture",d=[];n!==null;){var m=n,b=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||b===null||(m=jr(n,l),m!=null&&d.unshift(yo(n,m,b)),m=jr(n,s),m!=null&&d.push(yo(n,m,b))),n.tag===3)return d;n=n.return}return[]}function $A(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function dy(n,s,l,d,m){for(var b=s._reactName,A=[];l!==null&&l!==d;){var R=l,L=R.alternate,F=R.stateNode;if(R=R.tag,L!==null&&L===d)break;R!==5&&R!==26&&R!==27||F===null||(L=F,m?(F=jr(l,b),F!=null&&A.unshift(yo(l,F,L))):m||(F=jr(l,b),F!=null&&A.push(yo(l,F,L)))),l=l.return}A.length!==0&&n.push({event:s,listeners:A})}var qA=/\r\n?/g,YA=/\u0000|\uFFFD/g;function hy(n){return(typeof n=="string"?n:""+n).replace(qA,`
`).replace(YA,"")}function fy(n,s){return s=hy(s),hy(n)===s}function qe(n,s,l,d,m,b){switch(l){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||Ea(n,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&Ea(n,""+d);break;case"className":vl(n,"class",d);break;case"tabIndex":vl(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":vl(n,l,d);break;case"style":fm(n,d,b);break;case"data":if(s!=="object"){vl(n,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=wl(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(l==="formAction"?(s!=="input"&&qe(n,s,"name",m.name,m,null),qe(n,s,"formEncType",m.formEncType,m,null),qe(n,s,"formMethod",m.formMethod,m,null),qe(n,s,"formTarget",m.formTarget,m,null)):(qe(n,s,"encType",m.encType,m,null),qe(n,s,"method",m.method,m,null),qe(n,s,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=wl(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=vi);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=wl(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":Re("beforetoggle",n),Re("toggle",n),bl(n,"popover",d);break;case"xlinkActuate":bi(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":bi(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":bi(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":bi(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":bi(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":bi(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":bi(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":bi(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":bi(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":bl(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=ww.get(l)||l,bl(n,l,d))}}function Ih(n,s,l,d,m,b){switch(l){case"style":fm(n,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(i(60));n.innerHTML=l}}break;case"children":typeof d=="string"?Ea(n,d):(typeof d=="number"||typeof d=="bigint")&&Ea(n,""+d);break;case"onScroll":d!=null&&Re("scroll",n);break;case"onScrollEnd":d!=null&&Re("scrollend",n);break;case"onClick":d!=null&&(n.onclick=vi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sm.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),s=l.slice(2,m?l.length-7:void 0),b=n[Qt]||null,b=b!=null?b[l]:null,typeof b=="function"&&n.removeEventListener(s,b,m),typeof d=="function")){typeof b!="function"&&b!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(s,d,m);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):bl(n,l,d)}}}function Pt(n,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Re("error",n),Re("load",n);var d=!1,m=!1,b;for(b in l)if(l.hasOwnProperty(b)){var A=l[b];if(A!=null)switch(b){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(n,s,b,A,l,null)}}m&&qe(n,s,"srcSet",l.srcSet,l,null),d&&qe(n,s,"src",l.src,l,null);return;case"input":Re("invalid",n);var R=b=A=m=null,L=null,F=null;for(d in l)if(l.hasOwnProperty(d)){var W=l[d];if(W!=null)switch(d){case"name":m=W;break;case"type":A=W;break;case"checked":L=W;break;case"defaultChecked":F=W;break;case"value":b=W;break;case"defaultValue":R=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:qe(n,s,d,W,l,null)}}cm(n,b,R,L,F,A,m,!1);return;case"select":Re("invalid",n),d=A=b=null;for(m in l)if(l.hasOwnProperty(m)&&(R=l[m],R!=null))switch(m){case"value":b=R;break;case"defaultValue":A=R;break;case"multiple":d=R;default:qe(n,s,m,R,l,null)}s=b,l=A,n.multiple=!!d,s!=null?Sa(n,!!d,s,!1):l!=null&&Sa(n,!!d,l,!0);return;case"textarea":Re("invalid",n),b=m=d=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":d=R;break;case"defaultValue":m=R;break;case"children":b=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:qe(n,s,A,R,l,null)}dm(n,d,m,b);return;case"option":for(L in l)l.hasOwnProperty(L)&&(d=l[L],d!=null)&&(L==="selected"?n.selected=d&&typeof d!="function"&&typeof d!="symbol":qe(n,s,L,d,l,null));return;case"dialog":Re("beforetoggle",n),Re("toggle",n),Re("cancel",n),Re("close",n);break;case"iframe":case"object":Re("load",n);break;case"video":case"audio":for(d=0;d<go.length;d++)Re(go[d],n);break;case"image":Re("error",n),Re("load",n);break;case"details":Re("toggle",n);break;case"embed":case"source":case"link":Re("error",n),Re("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(d=l[F],d!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:qe(n,s,F,d,l,null)}return;default:if(Xu(s)){for(W in l)l.hasOwnProperty(W)&&(d=l[W],d!==void 0&&Ih(n,s,W,d,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(d=l[R],d!=null&&qe(n,s,R,d,l,null))}function WA(n,s,l,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,b=null,A=null,R=null,L=null,F=null,W=null;for(G in l){var Q=l[G];if(l.hasOwnProperty(G)&&Q!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":L=Q;default:d.hasOwnProperty(G)||qe(n,s,G,null,d,Q)}}for(var z in d){var G=d[z];if(Q=l[z],d.hasOwnProperty(z)&&(G!=null||Q!=null))switch(z){case"type":b=G;break;case"name":m=G;break;case"checked":F=G;break;case"defaultChecked":W=G;break;case"value":A=G;break;case"defaultValue":R=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,s));break;default:G!==Q&&qe(n,s,z,G,d,Q)}}Yu(n,A,R,L,F,W,b,m);return;case"select":G=A=R=z=null;for(b in l)if(L=l[b],l.hasOwnProperty(b)&&L!=null)switch(b){case"value":break;case"multiple":G=L;default:d.hasOwnProperty(b)||qe(n,s,b,null,d,L)}for(m in d)if(b=d[m],L=l[m],d.hasOwnProperty(m)&&(b!=null||L!=null))switch(m){case"value":z=b;break;case"defaultValue":R=b;break;case"multiple":A=b;default:b!==L&&qe(n,s,m,b,d,L)}s=R,l=A,d=G,z!=null?Sa(n,!!l,z,!1):!!d!=!!l&&(s!=null?Sa(n,!!l,s,!0):Sa(n,!!l,l?[]:"",!1));return;case"textarea":G=z=null;for(R in l)if(m=l[R],l.hasOwnProperty(R)&&m!=null&&!d.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:qe(n,s,R,null,d,m)}for(A in d)if(m=d[A],b=l[A],d.hasOwnProperty(A)&&(m!=null||b!=null))switch(A){case"value":z=m;break;case"defaultValue":G=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==b&&qe(n,s,A,m,d,b)}um(n,z,G);return;case"option":for(var ae in l)z=l[ae],l.hasOwnProperty(ae)&&z!=null&&!d.hasOwnProperty(ae)&&(ae==="selected"?n.selected=!1:qe(n,s,ae,null,d,z));for(L in d)z=d[L],G=l[L],d.hasOwnProperty(L)&&z!==G&&(z!=null||G!=null)&&(L==="selected"?n.selected=z&&typeof z!="function"&&typeof z!="symbol":qe(n,s,L,z,d,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pe in l)z=l[pe],l.hasOwnProperty(pe)&&z!=null&&!d.hasOwnProperty(pe)&&qe(n,s,pe,null,d,z);for(F in d)if(z=d[F],G=l[F],d.hasOwnProperty(F)&&z!==G&&(z!=null||G!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(i(137,s));break;default:qe(n,s,F,z,d,G)}return;default:if(Xu(s)){for(var Ye in l)z=l[Ye],l.hasOwnProperty(Ye)&&z!==void 0&&!d.hasOwnProperty(Ye)&&Ih(n,s,Ye,void 0,d,z);for(W in d)z=d[W],G=l[W],!d.hasOwnProperty(W)||z===G||z===void 0&&G===void 0||Ih(n,s,W,z,d,G);return}}for(var B in l)z=l[B],l.hasOwnProperty(B)&&z!=null&&!d.hasOwnProperty(B)&&qe(n,s,B,null,d,z);for(Q in d)z=d[Q],G=l[Q],!d.hasOwnProperty(Q)||z===G||z==null&&G==null||qe(n,s,Q,z,d,G)}function py(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XA(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var m=l[d],b=m.transferSize,A=m.initiatorType,R=m.duration;if(b&&R&&py(A)){for(A=0,R=m.responseEnd,d+=1;d<l.length;d++){var L=l[d],F=L.startTime;if(F>R)break;var W=L.transferSize,Q=L.initiatorType;W&&py(Q)&&(L=L.responseEnd,A+=W*(L<R?1:(R-F)/(L-F)))}if(--d,s+=8*(b+A)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ph=null,jh=null;function gc(n){return n.nodeType===9?n:n.ownerDocument}function my(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gy(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Bh(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uh=null;function KA(){var n=window.event;return n&&n.type==="popstate"?n===Uh?!1:(Uh=n,!0):(Uh=null,!1)}var yy=typeof setTimeout=="function"?setTimeout:void 0,QA=typeof clearTimeout=="function"?clearTimeout:void 0,by=typeof Promise=="function"?Promise:void 0,ZA=typeof queueMicrotask=="function"?queueMicrotask:typeof by<"u"?function(n){return by.resolve(null).then(n).catch(JA)}:yy;function JA(n){setTimeout(function(){throw n})}function ys(n){return n==="head"}function vy(n,s){var l=s,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(d===0){n.removeChild(m),tr(s);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")bo(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,bo(l);for(var b=l.firstChild;b;){var A=b.nextSibling,R=b.nodeName;b[Ir]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&b.rel.toLowerCase()==="stylesheet"||l.removeChild(b),b=A}}else l==="body"&&bo(n.ownerDocument.body);l=m}while(l);tr(s)}function xy(n,s){var l=n;n=0;do{var d=l.nextSibling;if(l.nodeType===1?s?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(s?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=d}while(l)}function Fh(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Fh(l),$u(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function eS(n,s,l,d){for(;n.nodeType===1;){var m=l;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Ir])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(b=n.getAttribute("rel"),b==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(b!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(b=n.getAttribute("src"),(b!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&b&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var b=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===b)return n}else return n;if(n=Ln(n.nextSibling),n===null)break}return null}function tS(n,s,l){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Ln(n.nextSibling),n===null))return null;return n}function wy(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=Ln(n.nextSibling),n===null))return null;return n}function zh(n){return n.data==="$?"||n.data==="$~"}function Hh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function nS(n,s){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||l.readyState!=="loading")s();else{var d=function(){s(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function Ln(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Vh=null;function Ay(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(s===0)return Ln(n.nextSibling);s--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||s++}n=n.nextSibling}return null}function Sy(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(s===0)return n;s--}else l!=="/$"&&l!=="/&"||s++}n=n.previousSibling}return null}function Ey(n,s,l){switch(s=gc(l),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function bo(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);$u(n)}var On=new Map,_y=new Set;function yc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ii=q.d;q.d={f:iS,r:sS,D:aS,C:rS,L:oS,m:lS,X:uS,S:cS,M:dS};function iS(){var n=Ii.f(),s=lc();return n||s}function sS(n){var s=xa(n);s!==null&&s.tag===5&&s.type==="form"?Hg(s):Ii.r(n)}var Za=typeof document>"u"?null:document;function Ty(n,s,l){var d=Za;if(d&&typeof s=="string"&&s){var m=Tn(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),_y.has(m)||(_y.add(m),n={rel:n,crossOrigin:l,href:s},d.querySelector(m)===null&&(s=d.createElement("link"),Pt(s,"link",n),Tt(s),d.head.appendChild(s)))}}function aS(n){Ii.D(n),Ty("dns-prefetch",n,null)}function rS(n,s){Ii.C(n,s),Ty("preconnect",n,s)}function oS(n,s,l){Ii.L(n,s,l);var d=Za;if(d&&n&&s){var m='link[rel="preload"][as="'+Tn(s)+'"]';s==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Tn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Tn(l.imageSizes)+'"]')):m+='[href="'+Tn(n)+'"]';var b=m;switch(s){case"style":b=Ja(n);break;case"script":b=er(n)}On.has(b)||(n=g({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:n,as:s},l),On.set(b,n),d.querySelector(m)!==null||s==="style"&&d.querySelector(vo(b))||s==="script"&&d.querySelector(xo(b))||(s=d.createElement("link"),Pt(s,"link",n),Tt(s),d.head.appendChild(s)))}}function lS(n,s){Ii.m(n,s);var l=Za;if(l&&n){var d=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Tn(d)+'"][href="'+Tn(n)+'"]',b=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=er(n)}if(!On.has(b)&&(n=g({rel:"modulepreload",href:n},s),On.set(b,n),l.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(xo(b)))return}d=l.createElement("link"),Pt(d,"link",n),Tt(d),l.head.appendChild(d)}}}function cS(n,s,l){Ii.S(n,s,l);var d=Za;if(d&&n){var m=wa(d).hoistableStyles,b=Ja(n);s=s||"default";var A=m.get(b);if(!A){var R={loading:0,preload:null};if(A=d.querySelector(vo(b)))R.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":s},l),(l=On.get(b))&&Gh(n,l);var L=A=d.createElement("link");Tt(L),Pt(L,"link",n),L._p=new Promise(function(F,W){L.onload=F,L.onerror=W}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,bc(A,s,d)}A={type:"stylesheet",instance:A,count:1,state:R},m.set(b,A)}}}function uS(n,s){Ii.X(n,s);var l=Za;if(l&&n){var d=wa(l).hoistableScripts,m=er(n),b=d.get(m);b||(b=l.querySelector(xo(m)),b||(n=g({src:n,async:!0},s),(s=On.get(m))&&$h(n,s),b=l.createElement("script"),Tt(b),Pt(b,"link",n),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function dS(n,s){Ii.M(n,s);var l=Za;if(l&&n){var d=wa(l).hoistableScripts,m=er(n),b=d.get(m);b||(b=l.querySelector(xo(m)),b||(n=g({src:n,async:!0,type:"module"},s),(s=On.get(m))&&$h(n,s),b=l.createElement("script"),Tt(b),Pt(b,"link",n),l.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(m,b))}}function Cy(n,s,l,d){var m=(m=ye.current)?yc(m):null;if(!m)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Ja(l.href),l=wa(m).hoistableStyles,d=l.get(s),d||(d={type:"style",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=Ja(l.href);var b=wa(m).hoistableStyles,A=b.get(n);if(A||(m=m.ownerDocument||m,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(n,A),(b=m.querySelector(vo(n)))&&!b._p&&(A.instance=b,A.state.loading=5),On.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},On.set(n,l),b||hS(m,n,l,A.state))),s&&d===null)throw Error(i(528,""));return A}if(s&&d!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=er(l),l=wa(m).hoistableScripts,d=l.get(s),d||(d={type:"script",instance:null,count:0,state:null},l.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Ja(n){return'href="'+Tn(n)+'"'}function vo(n){return'link[rel="stylesheet"]['+n+"]"}function Ry(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function hS(n,s,l,d){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=n.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Pt(s,"link",l),Tt(s),n.head.appendChild(s))}function er(n){return'[src="'+Tn(n)+'"]'}function xo(n){return"script[async]"+n}function Ny(n,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var d=n.querySelector('style[data-href~="'+Tn(l.href)+'"]');if(d)return s.instance=d,Tt(d),d;var m=g({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Tt(d),Pt(d,"style",m),bc(d,l.precedence,n),s.instance=d;case"stylesheet":m=Ja(l.href);var b=n.querySelector(vo(m));if(b)return s.state.loading|=4,s.instance=b,Tt(b),b;d=Ry(l),(m=On.get(m))&&Gh(d,m),b=(n.ownerDocument||n).createElement("link"),Tt(b);var A=b;return A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Pt(b,"link",d),s.state.loading|=4,bc(b,l.precedence,n),s.instance=b;case"script":return b=er(l.src),(m=n.querySelector(xo(b)))?(s.instance=m,Tt(m),m):(d=l,(m=On.get(b))&&(d=g({},l),$h(d,m)),n=n.ownerDocument||n,m=n.createElement("script"),Tt(m),Pt(m,"link",d),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,bc(d,l.precedence,n));return s.instance}function bc(n,s,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,b=m,A=0;A<d.length;A++){var R=d[A];if(R.dataset.precedence===s)b=R;else if(b!==m)break}b?b.parentNode.insertBefore(n,b.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(n,s.firstChild))}function Gh(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function $h(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var vc=null;function Dy(n,s,l){if(vc===null){var d=new Map,m=vc=new Map;m.set(l,d)}else m=vc,d=m.get(l),d||(d=new Map,m.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),m=0;m<l.length;m++){var b=l[m];if(!(b[Ir]||b[Mt]||n==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var A=b.getAttribute(s)||"";A=n+A;var R=d.get(A);R?R.push(b):d.set(A,[b])}}return d}function ky(n,s,l){n=n.ownerDocument||n,n.head.insertBefore(l,s==="title"?n.querySelector("head > title"):null)}function fS(n,s,l){if(l===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(n=s.disabled,typeof s.precedence=="string"&&n==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function My(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function pS(n,s,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Ja(d.href),b=s.querySelector(vo(m));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=xc.bind(n),s.then(n,n)),l.state.loading|=4,l.instance=b,Tt(b);return}b=s.ownerDocument||s,d=Ry(d),(m=On.get(m))&&Gh(d,m),b=b.createElement("link"),Tt(b);var A=b;A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Pt(b,"link",d),l.instance=b}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=xc.bind(n),s.addEventListener("load",l),s.addEventListener("error",l))}}var qh=0;function mS(n,s){return n.stylesheets&&n.count===0&&Ac(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var d=setTimeout(function(){if(n.stylesheets&&Ac(n,n.stylesheets),n.unsuspend){var b=n.unsuspend;n.unsuspend=null,b()}},6e4+s);0<n.imgBytes&&qh===0&&(qh=62500*XA());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Ac(n,n.stylesheets),n.unsuspend)){var b=n.unsuspend;n.unsuspend=null,b()}},(n.imgBytes>qh?50:800)+s);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ac(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var wc=null;function Ac(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,wc=new Map,s.forEach(gS,n),wc=null,xc.call(n))}function gS(n,s){if(!(s.state.loading&4)){var l=wc.get(n);if(l)var d=l.get(null);else{l=new Map,wc.set(n,l);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<m.length;b++){var A=m[b];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),d=A)}d&&l.set(null,d)}m=s.instance,A=m.getAttribute("data-precedence"),b=l.get(A)||d,b===d&&l.set(null,m),l.set(A,m),this.count++,d=xc.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),b?b.parentNode.insertBefore(m,b.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var wo={$$typeof:T,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function yS(n,s,l,d,m,b,A,R,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zu(0),this.hiddenUpdates=zu(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=b,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function Ly(n,s,l,d,m,b,A,R,L,F,W,Q){return n=new yS(n,s,l,A,L,F,W,Q,R),s=1,b===!0&&(s|=24),b=hn(3,null,null,s),n.current=b,b.stateNode=n,s=_d(),s.refCount++,n.pooledCache=s,s.refCount++,b.memoizedState={element:d,isDehydrated:l,cache:s},Nd(b),n}function Oy(n){return n?(n=ka,n):ka}function Iy(n,s,l,d,m,b){m=Oy(m),d.context===null?d.context=m:d.pendingContext=m,d=rs(s),d.payload={element:l},b=b===void 0?null:b,b!==null&&(d.callback=b),l=os(n,d,s),l!==null&&(sn(l,n,s),Zr(l,n,s))}function Py(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<s?l:s}}function Yh(n,s){Py(n,s),(n=n.alternate)&&Py(n,s)}function jy(n){if(n.tag===13||n.tag===31){var s=zs(n,67108864);s!==null&&sn(s,n,67108864),Yh(n,67108864)}}function By(n){if(n.tag===13||n.tag===31){var s=yn();s=Hu(s);var l=zs(n,s);l!==null&&sn(l,n,s),Yh(n,s)}}var Sc=!0;function bS(n,s,l,d){var m=j.T;j.T=null;var b=q.p;try{q.p=2,Wh(n,s,l,d)}finally{q.p=b,j.T=m}}function vS(n,s,l,d){var m=j.T;j.T=null;var b=q.p;try{q.p=8,Wh(n,s,l,d)}finally{q.p=b,j.T=m}}function Wh(n,s,l,d){if(Sc){var m=Xh(d);if(m===null)Oh(n,s,d,Ec,l),Fy(n,d);else if(wS(m,n,s,l,d))d.stopPropagation();else if(Fy(n,d),s&4&&-1<xS.indexOf(n)){for(;m!==null;){var b=xa(m);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var A=Le(b.pendingLanes);if(A!==0){var R=b;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var L=1<<31-Ut(A);R.entanglements[1]|=L,A&=~L}ii(b),(je&6)===0&&(rc=Bt()+500,mo(0))}}break;case 31:case 13:R=zs(b,2),R!==null&&sn(R,b,2),lc(),Yh(b,2)}if(b=Xh(d),b===null&&Oh(n,s,d,Ec,l),b===m)break;m=b}m!==null&&d.stopPropagation()}else Oh(n,s,d,null,l)}}function Xh(n){return n=Qu(n),Kh(n)}var Ec=null;function Kh(n){if(Ec=null,n=va(n),n!==null){var s=o(n);if(s===null)n=null;else{var l=s.tag;if(l===13){if(n=c(s),n!==null)return n;n=null}else if(l===31){if(n=u(s),n!==null)return n;n=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Ec=n,null}function Uy(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case ml:return 2;case Lr:return 8;case ga:case gl:return 32;case Pu:return 268435456;default:return 32}default:return 32}}var Qh=!1,bs=null,vs=null,xs=null,Ao=new Map,So=new Map,ws=[],xS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fy(n,s){switch(n){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":Ao.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(s.pointerId)}}function Eo(n,s,l,d,m,b){return n===null||n.nativeEvent!==b?(n={blockedOn:s,domEventName:l,eventSystemFlags:d,nativeEvent:b,targetContainers:[m]},s!==null&&(s=xa(s),s!==null&&jy(s)),n):(n.eventSystemFlags|=d,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function wS(n,s,l,d,m){switch(s){case"focusin":return bs=Eo(bs,n,s,l,d,m),!0;case"dragenter":return vs=Eo(vs,n,s,l,d,m),!0;case"mouseover":return xs=Eo(xs,n,s,l,d,m),!0;case"pointerover":var b=m.pointerId;return Ao.set(b,Eo(Ao.get(b)||null,n,s,l,d,m)),!0;case"gotpointercapture":return b=m.pointerId,So.set(b,Eo(So.get(b)||null,n,s,l,d,m)),!0}return!1}function zy(n){var s=va(n.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=c(l),s!==null){n.blockedOn=s,tm(n.priority,function(){By(l)});return}}else if(s===31){if(s=u(l),s!==null){n.blockedOn=s,tm(n.priority,function(){By(l)});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function _c(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var l=Xh(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Ku=d,l.target.dispatchEvent(d),Ku=null}else return s=xa(l),s!==null&&jy(s),n.blockedOn=l,!1;s.shift()}return!0}function Hy(n,s,l){_c(n)&&l.delete(s)}function AS(){Qh=!1,bs!==null&&_c(bs)&&(bs=null),vs!==null&&_c(vs)&&(vs=null),xs!==null&&_c(xs)&&(xs=null),Ao.forEach(Hy),So.forEach(Hy)}function Tc(n,s){n.blockedOn===s&&(n.blockedOn=null,Qh||(Qh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,AS)))}var Cc=null;function Vy(n){Cc!==n&&(Cc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Cc===n&&(Cc=null);for(var s=0;s<n.length;s+=3){var l=n[s],d=n[s+1],m=n[s+2];if(typeof d!="function"){if(Kh(d||l)===null)continue;break}var b=xa(l);b!==null&&(n.splice(s,3),s-=3,Xd(b,{pending:!0,data:m,method:l.method,action:d},d,m))}}))}function tr(n){function s(L){return Tc(L,n)}bs!==null&&Tc(bs,n),vs!==null&&Tc(vs,n),xs!==null&&Tc(xs,n),Ao.forEach(s),So.forEach(s);for(var l=0;l<ws.length;l++){var d=ws[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<ws.length&&(l=ws[0],l.blockedOn===null);)zy(l),l.blockedOn===null&&ws.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var m=l[d],b=l[d+1],A=m[Qt]||null;if(typeof b=="function")A||Vy(l);else if(A){var R=null;if(b&&b.hasAttribute("formAction")){if(m=b,A=b[Qt]||null)R=A.formAction;else if(Kh(m)!==null)continue}else R=A.action;typeof R=="function"?l[d+1]=R:(l.splice(d,3),d-=3),Vy(l)}}}function Gy(){function n(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(A){return m=A})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Zh(n){this._internalRoot=n}Rc.prototype.render=Zh.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,d=yn();Iy(l,d,n,s,null,null)},Rc.prototype.unmount=Zh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;Iy(n.current,2,null,n,null,null),lc(),s[ba]=null}};function Rc(n){this._internalRoot=n}Rc.prototype.unstable_scheduleHydration=function(n){if(n){var s=em();n={blockedOn:null,target:n,priority:s};for(var l=0;l<ws.length&&s!==0&&s<ws[l].priority;l++);ws.splice(l,0,n),l===0&&zy(n)}};var $y=e.version;if($y!=="19.2.4")throw Error(i(527,$y,"19.2.4"));q.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=f(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var SS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nc.isDisabled&&Nc.supportsFiber)try{Is=Nc.inject(SS),Gt=Nc}catch{}}return To.createRoot=function(n,s){if(!a(n))throw Error(i(299));var l=!1,d="",m=Zg,b=Jg,A=e0;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=Ly(n,1,!1,null,null,l,d,null,m,b,A,Gy),n[ba]=s.current,Lh(n),new Zh(s)},To.hydrateRoot=function(n,s,l){if(!a(n))throw Error(i(299));var d=!1,m="",b=Zg,A=Jg,R=e0,L=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(b=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),s=Ly(n,1,!0,s,l??null,d,m,L,b,A,R,Gy),s.context=Oy(null),l=s.current,d=yn(),d=Hu(d),m=rs(d),m.callback=null,os(l,m,d),l=d,s.current.lanes=l,Or(s,l),ii(s),n[ba]=s.current,Lh(n),new Rc(s)},To.version="19.2.4",To}var ib;function LS(){if(ib)return nf.exports;ib=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),nf.exports=MS(),nf.exports}var OS=LS();const IS=ap(OS);var sb="popstate";function PS(r={}){function e(i,a){let{pathname:o,search:c,hash:u}=i.location;return Mf("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Go(a)}return BS(e,t,null,r)}function it(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jS(){return Math.random().toString(36).substring(2,10)}function ab(r,e){return{usr:r.state,key:r.key,idx:e}}function Mf(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?wr(e):e,state:t,key:e&&e.key||i||jS()}}function Go({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function wr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function BS(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,c=a.history,u="POP",h=null,f=p();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function p(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=p(),_=S==null?null:S-f;f=S,h&&h({action:u,location:w.location,delta:_})}function v(S,_){u="PUSH";let C=Mf(w.location,S,_);f=p()+1;let T=ab(C,f),N=w.createHref(C);try{c.pushState(T,"",N)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;a.location.assign(N)}o&&h&&h({action:u,location:w.location,delta:1})}function x(S,_){u="REPLACE";let C=Mf(w.location,S,_);f=p();let T=ab(C,f),N=w.createHref(C);c.replaceState(T,"",N),o&&h&&h({action:u,location:w.location,delta:0})}function E(S){return US(S)}let w={get action(){return u},get location(){return r(a,c)},listen(S){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(sb,g),h=S,()=>{a.removeEventListener(sb,g),h=null}},createHref(S){return e(a,S)},createURL:E,encodeLocation(S){let _=E(S);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:x,go(S){return c.go(S)}};return w}function US(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),it(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Go(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function M1(r,e,t="/"){return FS(r,e,t,!1)}function FS(r,e,t,i){let a=typeof e=="string"?wr(e):e,o=Hi(a.pathname||"/",t);if(o==null)return null;let c=L1(r);zS(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let f=ZS(o);u=KS(c[h],f,i)}return u}function L1(r,e=[],t=[],i="",a=!1){let o=(c,u,h=a,f)=>{let p={relativePath:f===void 0?c.path||"":f,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(i)&&h)return;it(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length)}let g=zi([i,p.relativePath]),v=t.concat(p);c.children&&c.children.length>0&&(it(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),L1(c.children,e,v,g,h)),!(c.path==null&&!c.index)&&e.push({path:g,score:WS(g,c.index),routesMeta:v})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of O1(c.path))o(c,u,!0,h)}),e}function O1(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let c=O1(i.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),a&&u.push(...c),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function zS(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:XS(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var HS=/^:[\w-]+$/,VS=3,GS=2,$S=1,qS=10,YS=-2,rb=r=>r==="*";function WS(r,e){let t=r.split("/"),i=t.length;return t.some(rb)&&(i+=YS),e&&(i+=GS),t.filter(a=>!rb(a)).reduce((a,o)=>a+(HS.test(o)?VS:o===""?$S:qS),i)}function XS(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function KS(r,e,t=!1){let{routesMeta:i}=r,a={},o="/",c=[];for(let u=0;u<i.length;++u){let h=i[u],f=u===i.length-1,p=o==="/"?e:e.slice(o.length)||"/",g=Qc({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!g&&f&&t&&!i[i.length-1].route.index&&(g=Qc({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(a,g.params),c.push({params:a,pathname:zi([o,g.pathname]),pathnameBase:n2(zi([o,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(o=zi([o,g.pathnameBase]))}return c}function Qc(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=QS(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let E=u[v]||"";c=o.slice(0,o.length-E.length).replace(/(.)\/+$/,"$1")}const x=u[v];return g&&!x?f[p]=void 0:f[p]=(x||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:r}}function QS(r,e=!1,t=!0){Yn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(i.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function ZS(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Hi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}var JS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function e2(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?wr(r):r,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=ob(t.substring(1),"/"):o=ob(t,e)):o=e,{pathname:o,search:i2(i),hash:s2(a)}}function ob(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function of(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t2(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rp(r){let e=t2(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function op(r,e,t,i=!1){let a;typeof r=="string"?a=wr(r):(a={...r},it(!a.pathname||!a.pathname.includes("?"),of("?","pathname","search",a)),it(!a.pathname||!a.pathname.includes("#"),of("#","pathname","hash",a)),it(!a.search||!a.search.includes("#"),of("#","search","hash",a)));let o=r===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=t;else{let g=e.length-1;if(!i&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),g-=1;a.pathname=v.join("/")}u=g>=0?e[g]:"/"}let h=e2(a,u),f=c&&c!=="/"&&c.endsWith("/"),p=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var zi=r=>r.join("/").replace(/\/\/+/g,"/"),n2=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),i2=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,s2=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,a2=class{constructor(r,e,t,i=!1){this.status=r,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function r2(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function o2(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var I1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function P1(r,e){let t=r;if(typeof t!="string"||!JS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,a=!1;if(I1)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),u=Hi(c.pathname,e);c.origin===o.origin&&u!=null?t=u+c.search+c.hash:a=!0}catch{Yn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var j1=["POST","PUT","PATCH","DELETE"];new Set(j1);var l2=["GET",...j1];new Set(l2);var Ar=k.createContext(null);Ar.displayName="DataRouter";var mu=k.createContext(null);mu.displayName="DataRouterState";var c2=k.createContext(!1),B1=k.createContext({isTransitioning:!1});B1.displayName="ViewTransition";var u2=k.createContext(new Map);u2.displayName="Fetchers";var d2=k.createContext(null);d2.displayName="Await";var Sn=k.createContext(null);Sn.displayName="Navigation";var tl=k.createContext(null);tl.displayName="Location";var Xn=k.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var lp=k.createContext(null);lp.displayName="RouteError";var U1="REACT_ROUTER_ERROR",h2="REDIRECT",f2="ROUTE_ERROR_RESPONSE";function p2(r){if(r.startsWith(`${U1}:${h2}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function m2(r){if(r.startsWith(`${U1}:${f2}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new a2(e.status,e.statusText,e.data)}catch{}}function g2(r,{relative:e}={}){it(Sr(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=k.useContext(Sn),{hash:a,pathname:o,search:c}=nl(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:zi([t,o])),i.createHref({pathname:u,search:c,hash:a})}function Sr(){return k.useContext(tl)!=null}function zt(){return it(Sr(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(tl).location}var F1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function z1(r){k.useContext(Sn).static||k.useLayoutEffect(r)}function Xi(){let{isDataRoute:r}=k.useContext(Xn);return r?N2():y2()}function y2(){it(Sr(),"useNavigate() may be used only in the context of a <Router> component.");let r=k.useContext(Ar),{basename:e,navigator:t}=k.useContext(Sn),{matches:i}=k.useContext(Xn),{pathname:a}=zt(),o=JSON.stringify(rp(i)),c=k.useRef(!1);return z1(()=>{c.current=!0}),k.useCallback((h,f={})=>{if(Yn(c.current,F1),!c.current)return;if(typeof h=="number"){t.go(h);return}let p=op(h,JSON.parse(o),a,f.relative==="path");r==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:zi([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,o,a,r])}k.createContext(null);function cp(){let{matches:r}=k.useContext(Xn),e=r[r.length-1];return e?e.params:{}}function nl(r,{relative:e}={}){let{matches:t}=k.useContext(Xn),{pathname:i}=zt(),a=JSON.stringify(rp(t));return k.useMemo(()=>op(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function b2(r,e){return H1(r,e)}function H1(r,e,t,i,a){it(Sr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=k.useContext(Sn),{matches:c}=k.useContext(Xn),u=c[c.length-1],h=u?u.params:{},f=u?u.pathname:"/",p=u?u.pathnameBase:"/",g=u&&u.route;{let C=g&&g.path||"";G1(f,!g||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let v=zt(),x;if(e){let C=typeof e=="string"?wr(e):e;it(p==="/"||C.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=v;let E=x.pathname||"/",w=E;if(p!=="/"){let C=p.replace(/^\//,"").split("/");w="/"+E.replace(/^\//,"").split("/").slice(C.length).join("/")}let S=M1(r,{pathname:w});Yn(g||S!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),Yn(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=S2(S&&S.map(C=>Object.assign({},C,{params:Object.assign({},h,C.params),pathname:zi([p,o.encodeLocation?o.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?p:zi([p,o.encodeLocation?o.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),c,t,i,a);return e&&_?k.createElement(tl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},_):_}function v2(){let r=R2(),e=r2(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:o},"ErrorBoundary")," or"," ",k.createElement("code",{style:o},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:a},t):null,c)}var x2=k.createElement(v2,null),V1=class extends k.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=m2(r.digest);t&&(r=t)}let e=r!==void 0?k.createElement(Xn.Provider,{value:this.props.routeContext},k.createElement(lp.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?k.createElement(w2,{error:r},e):e}};V1.contextType=c2;var lf=new WeakMap;function w2({children:r,error:e}){let{basename:t}=k.useContext(Sn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=p2(e.digest);if(i){let a=lf.get(e);if(a)throw a;let o=P1(i.location,t);if(I1&&!lf.get(e))if(o.isExternal||i.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:i.replace}));throw lf.set(e,c),c}return k.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return r}function A2({routeContext:r,match:e,children:t}){let i=k.useContext(Ar);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(Xn.Provider,{value:r},t)}function S2(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let p=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);it(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,h=-1;if(t)for(let p=0;p<o.length;p++){let g=o[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=p),g.route.id){let{loaderData:v,errors:x}=t,E=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!x||x[g.route.id]===void 0);if(g.route.lazy||E){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let f=t&&i?(p,g)=>{i(p,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:o2(t.matches),errorInfo:g})}:void 0;return o.reduceRight((p,g,v)=>{let x,E=!1,w=null,S=null;t&&(x=c&&g.route.id?c[g.route.id]:void 0,w=g.route.errorElement||x2,u&&(h<0&&v===0?(G1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):h===v&&(E=!0,S=g.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,v+1)),C=()=>{let T;return x?T=w:E?T=S:g.route.Component?T=k.createElement(g.route.Component,null):g.route.element?T=g.route.element:T=p,k.createElement(A2,{match:g,routeContext:{outlet:p,matches:_,isDataRoute:t!=null},children:T})};return t&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?k.createElement(V1,{location:t.location,revalidation:t.revalidation,component:w,error:x,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:f}):C()},null)}function up(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E2(r){let e=k.useContext(Ar);return it(e,up(r)),e}function _2(r){let e=k.useContext(mu);return it(e,up(r)),e}function T2(r){let e=k.useContext(Xn);return it(e,up(r)),e}function dp(r){let e=T2(r),t=e.matches[e.matches.length-1];return it(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function C2(){return dp("useRouteId")}function R2(){let r=k.useContext(lp),e=_2("useRouteError"),t=dp("useRouteError");return r!==void 0?r:e.errors?.[t]}function N2(){let{router:r}=E2("useNavigate"),e=dp("useNavigate"),t=k.useRef(!1);return z1(()=>{t.current=!0}),k.useCallback(async(a,o={})=>{Yn(t.current,F1),t.current&&(typeof a=="number"?await r.navigate(a):await r.navigate(a,{fromRouteId:e,...o}))},[r,e])}var lb={};function G1(r,e,t){!e&&!lb[r]&&(lb[r]=!0,Yn(!1,t))}k.memo(D2);function D2({routes:r,future:e,state:t,onError:i}){return H1(r,void 0,t,i,e)}function Lf({to:r,replace:e,state:t,relative:i}){it(Sr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=k.useContext(Sn);Yn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=k.useContext(Xn),{pathname:c}=zt(),u=Xi(),h=op(r,rp(o),c,i==="path"),f=JSON.stringify(h);return k.useEffect(()=>{u(JSON.parse(f),{replace:e,state:t,relative:i})},[u,f,i,e,t]),null}function St(r){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k2({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1,unstable_useTransitions:c}){it(!Sr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=k.useMemo(()=>({basename:u,navigator:a,static:o,unstable_useTransitions:c,future:{}}),[u,a,o,c]);typeof t=="string"&&(t=wr(t));let{pathname:f="/",search:p="",hash:g="",state:v=null,key:x="default"}=t,E=k.useMemo(()=>{let w=Hi(f,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:v,key:x},navigationType:i}},[u,f,p,g,v,x,i]);return Yn(E!=null,`<Router basename="${u}"> is not able to match the URL "${f}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:k.createElement(Sn.Provider,{value:h},k.createElement(tl.Provider,{children:e,value:E}))}function M2({children:r,location:e}){return b2(Of(r),e)}function Of(r,e=[]){let t=[];return k.Children.forEach(r,(i,a)=>{if(!k.isValidElement(i))return;let o=[...e,a];if(i.type===k.Fragment){t.push.apply(t,Of(i.props.children,o));return}it(i.type===St,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Of(i.props.children,o)),t.push(c)}),t}var Hc="get",Vc="application/x-www-form-urlencoded";function gu(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function L2(r){return gu(r)&&r.tagName.toLowerCase()==="button"}function O2(r){return gu(r)&&r.tagName.toLowerCase()==="form"}function I2(r){return gu(r)&&r.tagName.toLowerCase()==="input"}function P2(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function j2(r,e){return r.button===0&&(!e||e==="_self")&&!P2(r)}var Dc=null;function B2(){if(Dc===null)try{new FormData(document.createElement("form"),0),Dc=!1}catch{Dc=!0}return Dc}var U2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function cf(r){return r!=null&&!U2.has(r)?(Yn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vc}"`),null):r}function F2(r,e){let t,i,a,o,c;if(O2(r)){let u=r.getAttribute("action");i=u?Hi(u,e):null,t=r.getAttribute("method")||Hc,a=cf(r.getAttribute("enctype"))||Vc,o=new FormData(r)}else if(L2(r)||I2(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(i=h?Hi(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||Hc,a=cf(r.getAttribute("formenctype"))||cf(u.getAttribute("enctype"))||Vc,o=new FormData(u,r),!B2()){let{name:f,type:p,value:g}=r;if(p==="image"){let v=f?`${f}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else f&&o.append(f,g)}}else{if(gu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hc,i=null,a=Vc,c=r}return o&&a==="text/plain"&&(c=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function z2(r,e,t,i){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${i}`:a.pathname=`${a.pathname}.${i}`:a.pathname==="/"?a.pathname=`_root.${i}`:e&&Hi(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${i}`,a}async function H2(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function V2(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function G2(r,e,t){let i=await Promise.all(r.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await H2(o,t);return c.links?c.links():[]}return[]}));return W2(i.flat(1).filter(V2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function cb(r,e,t,i,a,o){let c=(h,f)=>t[f]?h.route.id!==t[f].route.id:!0,u=(h,f)=>t[f].pathname!==h.pathname||t[f].route.path?.endsWith("*")&&t[f].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,f)=>c(h,f)||u(h,f)):o==="data"?e.filter((h,f)=>{let p=i.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(c(h,f)||u(h,f))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function $2(r,e,{includeHydrateFallback:t}={}){return q2(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function q2(r){return[...new Set(r)]}function Y2(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function W2(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let o=JSON.stringify(Y2(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}function $1(){let r=k.useContext(Ar);return hp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function X2(){let r=k.useContext(mu);return hp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var fp=k.createContext(void 0);fp.displayName="FrameworkContext";function q1(){let r=k.useContext(fp);return hp(r,"You must render this element inside a <HydratedRouter> element"),r}function K2(r,e){let t=k.useContext(fp),[i,a]=k.useState(!1),[o,c]=k.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,v=k.useRef(null);k.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let w=_=>{_.forEach(C=>{c(C.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[r]),k.useEffect(()=>{if(i){let w=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(w)}}},[i]);let x=()=>{a(!0)},E=()=>{a(!1),c(!1)};return t?r!=="intent"?[o,v,{}]:[o,v,{onFocus:Co(u,x),onBlur:Co(h,E),onMouseEnter:Co(f,x),onMouseLeave:Co(p,E),onTouchStart:Co(g,x)}]:[!1,v,{}]}function Co(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function Q2({page:r,...e}){let{router:t}=$1(),i=k.useMemo(()=>M1(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?k.createElement(J2,{page:r,matches:i,...e}):null}function Z2(r){let{manifest:e,routeModules:t}=q1(),[i,a]=k.useState([]);return k.useEffect(()=>{let o=!1;return G2(r,e,t).then(c=>{o||a(c)}),()=>{o=!0}},[r,e,t]),i}function J2({page:r,matches:e,...t}){let i=zt(),{future:a,manifest:o,routeModules:c}=q1(),{basename:u}=$1(),{loaderData:h,matches:f}=X2(),p=k.useMemo(()=>cb(r,e,f,o,i,"data"),[r,e,f,o,i]),g=k.useMemo(()=>cb(r,e,f,o,i,"assets"),[r,e,f,o,i]),v=k.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let w=new Set,S=!1;if(e.forEach(C=>{let T=o.routes[C.route.id];!T||!T.hasLoader||(!p.some(N=>N.route.id===C.route.id)&&C.route.id in h&&c[C.route.id]?.shouldRevalidate||T.hasClientLoader?S=!0:w.add(C.route.id))}),w.size===0)return[];let _=z2(r,u,a.unstable_trailingSlashAwareDataRequests,"data");return S&&w.size>0&&_.searchParams.set("_routes",e.filter(C=>w.has(C.route.id)).map(C=>C.route.id).join(",")),[_.pathname+_.search]},[u,a.unstable_trailingSlashAwareDataRequests,h,i,o,p,e,r,c]),x=k.useMemo(()=>$2(g,o),[g,o]),E=Z2(g);return k.createElement(k.Fragment,null,v.map(w=>k.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>k.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),E.map(({key:w,link:S})=>k.createElement("link",{key:w,nonce:t.nonce,...S,crossOrigin:S.crossOrigin??t.crossOrigin})))}function eE(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var tE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tE&&(window.__reactRouterVersion="7.13.0")}catch{}function nE({basename:r,children:e,unstable_useTransitions:t,window:i}){let a=k.useRef();a.current==null&&(a.current=PS({window:i,v5Compat:!0}));let o=a.current,[c,u]=k.useState({action:o.action,location:o.location}),h=k.useCallback(f=>{t===!1?u(f):k.startTransition(()=>u(f))},[t]);return k.useLayoutEffect(()=>o.listen(h),[o,h]),k.createElement(k2,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var Y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nt=k.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:c,state:u,target:h,to:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},E){let{basename:w,unstable_useTransitions:S}=k.useContext(Sn),_=typeof f=="string"&&Y1.test(f),C=P1(f,w);f=C.to;let T=g2(f,{relative:a}),[N,D,M]=K2(i,x),P=rE(f,{replace:c,state:u,target:h,preventScrollReset:p,relative:a,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:S});function X($){e&&e($),$.defaultPrevented||P($)}let H=k.createElement("a",{...x,...M,href:C.absoluteURL||T,onClick:C.isExternal||o?e:X,ref:eE(E,D),target:h,"data-discover":!_&&t==="render"?"true":void 0});return N&&!_?k.createElement(k.Fragment,null,H,k.createElement(Q2,{page:T})):H});nt.displayName="Link";var iE=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:c,viewTransition:u,children:h,...f},p){let g=nl(c,{relative:f.relative}),v=zt(),x=k.useContext(mu),{navigator:E,basename:w}=k.useContext(Sn),S=x!=null&&dE(g)&&u===!0,_=E.encodeLocation?E.encodeLocation(g).pathname:g.pathname,C=v.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(C=C.toLowerCase(),T=T?T.toLowerCase():null,_=_.toLowerCase()),T&&w&&(T=Hi(T,w)||T);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let D=C===_||!a&&C.startsWith(_)&&C.charAt(N)==="/",M=T!=null&&(T===_||!a&&T.startsWith(_)&&T.charAt(_.length)==="/"),P={isActive:D,isPending:M,isTransitioning:S},X=D?e:void 0,H;typeof i=="function"?H=i(P):H=[i,D?"active":null,M?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let $=typeof o=="function"?o(P):o;return k.createElement(nt,{...f,"aria-current":X,className:H,ref:p,style:$,to:c,viewTransition:u},typeof h=="function"?h(P):h)});iE.displayName="NavLink";var sE=k.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:c=Hc,action:u,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v,...x},E)=>{let{unstable_useTransitions:w}=k.useContext(Sn),S=cE(),_=uE(u,{relative:f}),C=c.toLowerCase()==="get"?"get":"post",T=typeof u=="string"&&Y1.test(u),N=D=>{if(h&&h(D),D.defaultPrevented)return;D.preventDefault();let M=D.nativeEvent.submitter,P=M?.getAttribute("formmethod")||c,X=()=>S(M||D.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:a,state:o,relative:f,preventScrollReset:p,viewTransition:g,unstable_defaultShouldRevalidate:v});w&&t!==!1?k.startTransition(()=>X()):X()};return k.createElement("form",{ref:E,method:C,action:_,onSubmit:i?h:N,...x,"data-discover":!T&&r==="render"?"true":void 0})});sE.displayName="Form";function aE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function W1(r){let e=k.useContext(Ar);return it(e,aE(r)),e}function rE(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let f=Xi(),p=zt(),g=nl(r,{relative:o});return k.useCallback(v=>{if(j2(v,e)){v.preventDefault();let x=t!==void 0?t:Go(p)===Go(g),E=()=>f(r,{replace:x,state:i,preventScrollReset:a,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u});h?k.startTransition(()=>E()):E()}},[p,f,g,t,i,e,r,a,o,c,u,h])}var oE=0,lE=()=>`__${String(++oE)}__`;function cE(){let{router:r}=W1("useSubmit"),{basename:e}=k.useContext(Sn),t=C2(),i=r.fetch,a=r.navigate;return k.useCallback(async(o,c={})=>{let{action:u,method:h,encType:f,formData:p,body:g}=F2(o,e);if(c.navigate===!1){let v=c.fetcherKey||lE();await i(v,t,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||f,flushSync:c.flushSync})}else await a(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:p,body:g,formMethod:c.method||h,formEncType:c.encType||f,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[i,a,e,t])}function uE(r,{relative:e}={}){let{basename:t}=k.useContext(Sn),i=k.useContext(Xn);it(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...nl(r||".",{relative:e})},c=zt();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(p=>p==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let p=u.toString();o.search=p?`?${p}`:""}}return(!r||r===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:zi([t,o.pathname])),Go(o)}function dE(r,{relative:e}={}){let t=k.useContext(B1);it(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=W1("useViewTransitionState"),a=nl(r,{relative:e});if(!t.isTransitioning)return!1;let o=Hi(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Hi(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Qc(a.pathname,c)!=null||Qc(a.pathname,o)!=null}const hE=["Northwind Legal","Acme Ventures","Solaris Health","Beacon Realty","Atlas Finance","Bluebird Energy"],fE=[{label:"Docs decoded",value:"42k+"},{label:"Average time saved",value:"3.4 hrs"},{label:"Risk flags identified",value:"128k+"}],pE=[{title:"Upload or open a PDF",description:"Drop in a contract, policy, or report. No setup required."},{title:"Decode with AI",description:"We translate the text, highlight obligations, and surface risks."},{title:"Act with clarity",description:"Export notes or send for signature only when you are ready."}],mE=[{title:"Plain-language summaries",description:"Every section is rewritten into clear, actionable language."},{title:"Risk and obligation flags",description:"Spot penalties, expiry traps, and one-sided clauses fast."},{title:"Side-by-side evidence",description:"See the original text next to the AI explanation."},{title:"Shareable decision reports",description:"Create a clean, board-ready summary in one click."},{title:"Structured highlights",description:"Tag sections as financial, legal, or operational."},{title:"Secure by design",description:"Free mode never stores files. Pro adds private vaults."}],Gc=[{slug:"procurement-teams",title:"Procurement teams",description:"Speed up vendor reviews without missing hidden liabilities.",audience:"Procurement",heroTitle:"Review supplier contracts with less back-and-forth",heroDescription:"Get clear obligations, risk hotspots, and negotiation points before legal and finance sign-off.",documentTypes:["Master service agreements","Order forms and pricing schedules","Security and data processing addenda","Renewal and termination terms"],painPoints:["Commercial terms are spread across annexes and riders.","Auto-renewal and notice periods are easy to miss.","Risk language is hard to summarize for non-legal stakeholders.","Vendor redlines can hide one-sided liabilities."],workflow:[{step:"Collect the vendor packet",detail:"Open the MSA, order form, and policy addenda in one review flow."},{step:"Surface obligations by category",detail:"Map payment, liability, security, and termination clauses into clear buckets."},{step:"Export a negotiation brief",detail:"Share key risks, fallback language, and decision notes with legal and budget owners."}],deliverables:["Clause-level summary for internal approvals","Priority list of terms to negotiate","Renewal and notice-date watchlist","Decision-ready brief for leadership"],highlights:[{label:"Main outcome",value:"Faster contract triage"},{label:"Best for",value:"High-volume vendor intake"},{label:"Team fit",value:"Procurement + Legal + Finance"}],cta:{primaryLabel:"Open procurement review",primaryTo:"/view",secondaryLabel:"Talk to the team",secondaryTo:"/contact"}},{slug:"startup-founders",title:"Startup founders",description:"Understand term sheets and SaaS agreements fast.",audience:"Founders",heroTitle:"Get investor and vendor terms into plain language quickly",heroDescription:"Move faster in fundraising and operations without signing unclear clauses under pressure.",documentTypes:["SAFE notes and term sheets","SaaS contracts and procurement agreements","Partnership and channel agreements","Advisory and contractor contracts"],painPoints:["Legal wording slows decisions during fundraising windows.","Operational agreements include hidden lock-ins.","Founders need to brief co-founders and advisors quickly.","Critical downside terms are buried in dense clauses."],workflow:[{step:"Open the latest draft",detail:"Load investor or vendor documents without changing your existing process."},{step:"Identify non-standard terms",detail:"Highlight liquidation preferences, assignment terms, and exclusivity language."},{step:"Prepare founder decision notes",detail:"Capture what to accept, what to renegotiate, and what needs external counsel."}],deliverables:["Executive summary for co-founders","Negotiation checklist before signature","Risk flags with source text evidence","Clear list of terms requiring legal review"],highlights:[{label:"Main outcome",value:"Higher decision confidence"},{label:"Best for",value:"Lean teams with limited legal bandwidth"},{label:"Team fit",value:"Founders + Advisors"}],cta:{primaryLabel:"Open founder workflow",primaryTo:"/view",secondaryLabel:"Ask a question",secondaryTo:"/contact"}},{slug:"hr-people-ops",title:"HR & people ops",description:"Review contracts, handbooks, and compliance updates with confidence.",audience:"People Ops",heroTitle:"Reduce people-risk in employment documentation",heroDescription:"Keep employment terms consistent and understandable across contracts, policies, and updates.",documentTypes:["Employment contracts and offer letters","Employee handbook updates","Workplace policy and compliance notices","Contractor and consultant agreements"],painPoints:["Policy updates are difficult to compare release to release.","Employment terms can drift across templates and locations.","Managers need concise summaries for practical application.","Risk language must be tracked before rollout."],workflow:[{step:"Review policy or contract drafts",detail:"Analyze updates before distribution or employee signature."},{step:"Spot inconsistencies and edge cases",detail:"Flag conflicting obligations, unclear wording, and potential compliance risk."},{step:"Ship a manager-friendly summary",detail:"Provide plain-language guidance for leaders and HR business partners."}],deliverables:["Policy change summary in plain language","Inconsistency and ambiguity report","Manager communication draft points","Pre-release checklist for HR approval"],highlights:[{label:"Main outcome",value:"More consistent policy rollouts"},{label:"Best for",value:"Distributed teams and frequent updates"},{label:"Team fit",value:"HR + Legal + Operations"}],cta:{primaryLabel:"Open HR review flow",primaryTo:"/view",secondaryLabel:"Contact us",secondaryTo:"/contact"}},{slug:"property-managers",title:"Property managers",description:"Decode leases, maintenance agreements, and building policies.",audience:"Property",heroTitle:"Handle lease and building terms with fewer surprises",heroDescription:"Understand obligations across tenants, vendors, and owners before commitments become operational issues.",documentTypes:["Commercial and residential lease agreements","Maintenance and service contracts","Building compliance and policy documents","Owner and tenant amendments"],painPoints:["Obligations vary by lease template and special conditions.","Maintenance responsibility language is often ambiguous.","Penalty and default terms are hard to track at scale.","Team handoffs create context loss between operations and legal."],workflow:[{step:"Open lease and service agreements",detail:"Review clauses that directly impact operations, timelines, and cost."},{step:"Map obligations by stakeholder",detail:"Separate owner, tenant, and vendor responsibilities into clear action items."},{step:"Create an operational handoff",detail:"Export key terms for facilities, finance, and portfolio managers."}],deliverables:["Responsibility matrix by party","Critical date and notice summary","Risk flags for penalties and defaults","Operations-ready implementation notes"],highlights:[{label:"Main outcome",value:"Clearer cross-team execution"},{label:"Best for",value:"Multi-site lease portfolios"},{label:"Team fit",value:"Property + Facilities + Finance"}],cta:{primaryLabel:"Open lease review",primaryTo:"/view",secondaryLabel:"Discuss your workflow",secondaryTo:"/contact"}},{slug:"legal-teams",title:"Legal teams",description:"Review NDAs, IP agreements, and litigation documents.",audience:"Legal",heroTitle:"Accelerate first-pass review without sacrificing control",heroDescription:"Triage high-volume legal documents so counsel can focus on strategy, exceptions, and negotiation.",documentTypes:["NDAs and confidentiality agreements","IP assignment and license contracts","Supplier and customer agreements","Pre-litigation and dispute documentation"],painPoints:["Document volume delays turnaround for business teams.","Standard clauses still require repetitive first-pass checks.","Counsel time is consumed by low-value extraction work.","Stakeholders need evidence-backed summaries, not guesses."],workflow:[{step:"Run first-pass analysis",detail:"Extract obligations, carve-outs, and unusual terms across drafts."},{step:"Prioritize legal attention",detail:"Escalate clauses by materiality so counsel focuses where judgment is required."},{step:"Deliver stakeholder brief",detail:"Share concise legal findings with commercial and operational owners."}],deliverables:["First-pass clause extraction pack","Material-risk escalation shortlist","Source-linked summary for business partners","Review trail for team collaboration"],highlights:[{label:"Main outcome",value:"Better legal throughput"},{label:"Best for",value:"High-volume contract teams"},{label:"Team fit",value:"Legal + Procurement + Sales Ops"}],cta:{primaryLabel:"Open legal review",primaryTo:"/view",secondaryLabel:"Contact legal support",secondaryTo:"/contact"}},{slug:"finance-teams",title:"Finance teams",description:"Analyze investment docs, loan agreements, and financial contracts.",audience:"Finance",heroTitle:"Understand financial obligations before they hit your model",heroDescription:"Turn dense agreements into structured obligations that finance teams can validate and plan against.",documentTypes:["Loan and debt agreements","Investment and shareholder documents","Revenue-share and pricing contracts","Guarantee and covenant schedules"],painPoints:["Covenants and triggers are hard to map into planning cycles.","Fee and penalty terms are easy to underestimate.","Finance needs clear inputs from legal language.","Decision deadlines are tight when documents are complex."],workflow:[{step:"Analyze obligations and covenants",detail:"Highlight repayment terms, reporting duties, and breach triggers."},{step:"Convert clauses into finance inputs",detail:"Translate legal language into assumptions your team can model."},{step:"Share a risk-aware decision memo",detail:"Align CFO, legal, and leadership on impact before acceptance."}],deliverables:["Covenant and trigger register","Financial risk summary with evidence","Decision memo for leadership review","Checklist for post-signature monitoring"],highlights:[{label:"Main outcome",value:"Cleaner planning inputs"},{label:"Best for",value:"Debt and investment document review"},{label:"Team fit",value:"Finance + Legal + Executive"}],cta:{primaryLabel:"Open finance review",primaryTo:"/view",secondaryLabel:"Talk to us",secondaryTo:"/contact"}}],uf={product:[{label:"How it works",href:"#how-it-works"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",href:"/pricing"},{label:"Open viewer",href:"/view"}],company:[{label:"About",href:"/about"},{label:"Contact",href:"/contact"}],legal:[{label:"Privacy",href:"/privacy"},{label:"Terms",href:"/terms"}]},X1="data:image/svg+xml,%3csvg%20width='630'%20height='718'%20viewBox='0%200%20630%20718'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M507.588%20467.968V382.194L437.065%20422.437V508.279L507.588%20467.968Z'%20fill='%2315D6E3'/%3e%3cpath%20d='M507.588%20247.995L434.559%20206.201L315.313%20274.417L196.068%20206.201L123.038%20247.995V323.966L244.293%20393.349V537.261L315.313%20577.888L386.334%20537.261V393.349L507.588%20323.966V247.995Z'%20fill='%233A36FF'/%3e%3cpath%20d='M630.006%20254.748V178.525L557.185%20136.592L486.298%20177.354L559.119%20219.288V295.511L630.006%20254.748Z'%20fill='%233A36FF'/%3e%3cpath%20d='M71.5074%20295.511V219.288L144.328%20177.354L73.4419%20136.592L0.620972%20178.525V254.748L71.5074%20295.511Z'%20fill='%233A36FF'/%3e%3cpath%20d='M123.038%20467.968L193.561%20508.279V422.437L123.038%20382.194V467.968Z'%20fill='%233998FF'/%3e%3cpath%20d='M386.502%20594.962L315.313%20635.677L244.125%20594.962V676.392L315.313%20717.107L386.502%20676.392V594.962Z'%20fill='%233A36FF'/%3e%3cpath%20d='M383.84%20177.307L315.313%20137.905L246.786%20177.307L315.313%20216.708L383.84%20177.307Z'%20fill='%238A88FF'/%3e%3cpath%20d='M558.695%20353.18V496.979L437.065%20566.307V647.497L630.006%20537.574V312.585L558.695%20353.18Z'%20fill='%2315D7E3'/%3e%3cpath%20d='M193.561%20566.307L71.931%20496.979V353.18L0.620972%20312.585V537.574L193.561%20647.497V566.307Z'%20fill='%233998FF'/%3e%3cpath%20d='M195.686%20148.412L315.313%2080.7477L434.94%20148.412L506.258%20108.072L315.313%200L124.369%20108.072L195.686%20148.412Z'%20fill='%238A88FF'/%3e%3c/svg%3e",gE="0.1.0+4873cdb-2026-02-12T05:56:27.229Z",df=({href:r,children:e})=>{const t=typeof r=="string"&&/^https?:\/\//.test(r),i=typeof r=="string"&&r.startsWith("#");return t?y.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:r,children:e}):i?y.jsx(nt,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:{pathname:"/",hash:r},children:e}):y.jsx(nt,{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",to:r,children:e})},K1=()=>{const e=zt().pathname==="/";return y.jsx("footer",{className:"border-t border-slate-200 bg-white px-6 py-12",children:y.jsxs("div",{className:"mx-auto grid w-full max-w-6xl gap-10 md:grid-cols-[1.2fr_0.8fr_0.8fr_0.8fr]",children:[y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("img",{src:X1,alt:"DecoDocs",className:"h-10 w-10"}),y.jsxs("div",{children:[y.jsx("p",{className:"text-base font-semibold text-slate-900",children:"DecoDocs"}),y.jsx("p",{className:"text-xs text-slate-500",children:"Understand documents before you sign"})]})]}),y.jsx("p",{className:"text-sm text-slate-600",children:"Privacy-first document understanding by Snap Sign Pty Ltd."}),y.jsxs("p",{className:"text-xs text-slate-500",children:[" ",new Date().getFullYear()," Snap Sign Pty Ltd. All rights reserved."]}),y.jsxs("p",{className:"text-xs text-slate-400",children:["Version: ",gE]})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Product"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:uf.product.map(t=>y.jsx("li",{className:"m-0",children:e&&typeof t.href=="string"&&t.href.startsWith("#")?y.jsx("a",{className:"text-slate-600 no-underline hover:text-slate-900 hover:underline",href:t.href,children:t.label}):y.jsx(df,{href:t.href,children:t.label})},t.label))})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Company"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:uf.company.map(t=>y.jsx("li",{className:"m-0",children:y.jsx(df,{href:t.href,children:t.label})},t.label))})]}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Legal"}),y.jsx("ul",{className:"mt-4 space-y-3 text-sm text-slate-600 list-none p-0 m-0",children:uf.legal.map(t=>y.jsx("li",{className:"m-0",children:y.jsx(df,{href:t.href,children:t.label})},t.label))})]})]})})},yE=()=>{};var ub={};const Q1=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},bE=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=r[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=r[t++],c=r[t++],u=r[t++],h=((a&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Z1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const o=r[a],c=a+1<r.length,u=c?r[a+1]:0,h=a+2<r.length,f=h?r[a+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,x=f&63;h||(x=64,c||(v=64)),i.push(t[p],t[g],t[v],t[x])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Q1(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):bE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const o=t[r.charAt(a++)],u=a<r.length?t[r.charAt(a)]:0;++a;const f=a<r.length?t[r.charAt(a)]:64;++a;const g=a<r.length?t[r.charAt(a)]:64;if(++a,o==null||u==null||f==null||g==null)throw new vE;const v=o<<2|u>>4;if(i.push(v),f!==64){const x=u<<4&240|f>>2;if(i.push(x),g!==64){const E=f<<6&192|g;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class vE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const xE=function(r){const e=Q1(r);return Z1.encodeByteArray(e,!0)},J1=function(r){return xE(r).replace(/\./g,"")},ev=function(r){try{return Z1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const AE=()=>wE().__FIREBASE_DEFAULTS__,SE=()=>{if(typeof process>"u"||typeof ub>"u")return;const r=ub.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},EE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ev(r[1]);return e&&JSON.parse(e)},pp=()=>{try{return yE()||AE()||SE()||EE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},tv=r=>pp()?.emulatorHosts?.[r],_E=r=>{const e=tv(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},nv=()=>pp()?.config,iv=r=>pp()?.[`_${r}`];class TE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function Er(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sv(r){return(await fetch(r,{credentials:"include"})).ok}const Fo={};function CE(){const r={prod:[],emulator:[]};for(const e of Object.keys(Fo))Fo[e]?r.emulator.push(e):r.prod.push(e);return r}function RE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let db=!1;function av(r,e){if(typeof window>"u"||typeof document>"u"||!Er(window.location.host)||Fo[r]===e||Fo[r]||db)return;Fo[r]=e;function t(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=CE().prod.length>0;function c(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,x){v.setAttribute("width","24"),v.setAttribute("id",x),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{db=!0,c()},v}function p(v,x){v.setAttribute("id",x),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function g(){const v=RE(i),x=t("text"),E=document.getElementById(x)||document.createElement("span"),w=t("learnmore"),S=document.getElementById(w)||document.createElement("a"),_=t("preprendIcon"),C=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const T=v.element;u(T),p(S,w);const N=f();h(C,_),T.append(C,E,S,N),document.body.appendChild(T)}o?(E.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function NE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function DE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function ME(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function LE(){const r=Xt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function IE(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}const PE="FirebaseError";class Ki extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=PE,Object.setPrototypeOf(this,Ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,il.prototype.create)}}class il{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?jE(o,i):"Error",u=`${this.serviceName}: ${c} (${a}).`;return new Ki(a,u,i)}}function jE(r,e){return r.replace(BE,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const BE=/\{\$([^}]+)}/g;function UE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function gr(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=r[a],c=e[a];if(hb(o)&&hb(c)){if(!gr(o,c))return!1}else if(o!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function hb(r){return r!==null&&typeof r=="object"}function sl(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Io(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Po(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function FE(r,e){const t=new zE(r,e);return t.subscribe.bind(t)}class zE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HE(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=hf),a.error===void 0&&(a.error=hf),a.complete===void 0&&(a.complete=hf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function hf(){}function un(r){return r&&r._delegate?r._delegate:r}class la{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ea="[DEFAULT]";class VE{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new TE;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($E(e))try{this.getOrInitializeService({instanceIdentifier:ea})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ea){return this.instances.has(e)}getOptions(e=ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const o=this.instances.get(i);return o&&e(o,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:GE(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ea){return this.component?this.component.multipleInstances?e:ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GE(r){return r===ea?void 0:r}function $E(r){return r.instantiationMode==="EAGER"}class qE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ke||(Ke={}));const YE={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},WE=Ke.INFO,XE={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},KE=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=XE[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rv{constructor(e){this.name=e,this._logLevel=WE,this._logHandler=KE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const QE=(r,e)=>e.some(t=>r instanceof t);let fb,pb;function ZE(){return fb||(fb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JE(){return pb||(pb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ov=new WeakMap,If=new WeakMap,lv=new WeakMap,ff=new WeakMap,mp=new WeakMap;function e_(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",o),r.removeEventListener("error",c)},o=()=>{t(Ns(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",o),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&ov.set(t,r)}).catch(()=>{}),mp.set(e,r),e}function t_(r){if(If.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",o),r.removeEventListener("error",c),r.removeEventListener("abort",c)},o=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",o),r.addEventListener("error",c),r.addEventListener("abort",c)});If.set(r,e)}let Pf={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return If.get(r);if(e==="objectStoreNames")return r.objectStoreNames||lv.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ns(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function n_(r){Pf=r(Pf)}function i_(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(pf(this),e,...t);return lv.set(i,e.sort?e.sort():[e]),Ns(i)}:JE().includes(r)?function(...e){return r.apply(pf(this),e),Ns(ov.get(this))}:function(...e){return Ns(r.apply(pf(this),e))}}function s_(r){return typeof r=="function"?i_(r):(r instanceof IDBTransaction&&t_(r),QE(r,ZE())?new Proxy(r,Pf):r)}function Ns(r){if(r instanceof IDBRequest)return e_(r);if(ff.has(r))return ff.get(r);const e=s_(r);return e!==r&&(ff.set(r,e),mp.set(e,r)),e}const pf=r=>mp.get(r);function a_(r,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const c=indexedDB.open(r,e),u=Ns(c);return i&&c.addEventListener("upgradeneeded",h=>{i(Ns(c.result),h.oldVersion,h.newVersion,Ns(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),a&&h.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const r_=["get","getKey","getAll","getAllKeys","count"],o_=["put","add","delete","clear"],mf=new Map;function mb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(mf.get(e))return mf.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=o_.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||r_.includes(t)))return;const o=async function(c,...u){const h=this.transaction(c,a?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[t](...u),a&&h.done]))[0]};return mf.set(e,o),o}n_(r=>({...r,get:(e,t,i)=>mb(e,t)||r.get(e,t,i),has:(e,t)=>!!mb(e,t)||r.has(e,t)}));class l_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(c_(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function c_(r){return r.getComponent()?.type==="VERSION"}const jf="@firebase/app",gb="0.14.8";const Vi=new rv("@firebase/app"),u_="@firebase/app-compat",d_="@firebase/analytics-compat",h_="@firebase/analytics",f_="@firebase/app-check-compat",p_="@firebase/app-check",m_="@firebase/auth",g_="@firebase/auth-compat",y_="@firebase/database",b_="@firebase/data-connect",v_="@firebase/database-compat",x_="@firebase/functions",w_="@firebase/functions-compat",A_="@firebase/installations",S_="@firebase/installations-compat",E_="@firebase/messaging",__="@firebase/messaging-compat",T_="@firebase/performance",C_="@firebase/performance-compat",R_="@firebase/remote-config",N_="@firebase/remote-config-compat",D_="@firebase/storage",k_="@firebase/storage-compat",M_="@firebase/firestore",L_="@firebase/ai",O_="@firebase/firestore-compat",I_="firebase",P_="12.9.0";const Bf="[DEFAULT]",j_={[jf]:"fire-core",[u_]:"fire-core-compat",[h_]:"fire-analytics",[d_]:"fire-analytics-compat",[p_]:"fire-app-check",[f_]:"fire-app-check-compat",[m_]:"fire-auth",[g_]:"fire-auth-compat",[y_]:"fire-rtdb",[b_]:"fire-data-connect",[v_]:"fire-rtdb-compat",[x_]:"fire-fn",[w_]:"fire-fn-compat",[A_]:"fire-iid",[S_]:"fire-iid-compat",[E_]:"fire-fcm",[__]:"fire-fcm-compat",[T_]:"fire-perf",[C_]:"fire-perf-compat",[R_]:"fire-rc",[N_]:"fire-rc-compat",[D_]:"fire-gcs",[k_]:"fire-gcs-compat",[M_]:"fire-fst",[O_]:"fire-fst-compat",[L_]:"fire-vertex","fire-js":"fire-js",[I_]:"fire-js-all"};const $o=new Map,B_=new Map,Uf=new Map;function yb(r,e){try{r.container.addComponent(e)}catch(t){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function yr(r){const e=r.name;if(Uf.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;Uf.set(e,r);for(const t of $o.values())yb(t,r);for(const t of B_.values())yb(t,r);return!0}function gp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function cn(r){return r==null?!1:r.settings!==void 0}const U_={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new il("app","Firebase",U_);class F_{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new la("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}const al=P_;function cv(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Bf,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw Ds.create("bad-app-name",{appName:String(a)});if(t||(t=nv()),!t)throw Ds.create("no-options");const o=$o.get(a);if(o){if(gr(t,o.options)&&gr(i,o.config))return o;throw Ds.create("duplicate-app",{appName:a})}const c=new qE(a);for(const h of Uf.values())c.addComponent(h);const u=new F_(t,i,c);return $o.set(a,u),u}function yp(r=Bf){const e=$o.get(r);if(!e&&r===Bf&&nv())return cv();if(!e)throw Ds.create("no-app",{appName:r});return e}function z_(){return Array.from($o.values())}function ks(r,e,t){let i=j_[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(c.join(" "));return}yr(new la(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}const H_="firebase-heartbeat-database",V_=1,qo="firebase-heartbeat-store";let gf=null;function uv(){return gf||(gf=a_(H_,V_,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(qo)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ds.create("idb-open",{originalErrorMessage:r.message})})),gf}async function G_(r){try{const t=(await uv()).transaction(qo),i=await t.objectStore(qo).get(dv(r));return await t.done,i}catch(e){if(e instanceof Ki)Vi.warn(e.message);else{const t=Ds.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(t.message)}}}async function bb(r,e){try{const i=(await uv()).transaction(qo,"readwrite");await i.objectStore(qo).put(e,dv(r)),await i.done}catch(t){if(t instanceof Ki)Vi.warn(t.message);else{const i=Ds.create("idb-set",{originalErrorMessage:t?.message});Vi.warn(i.message)}}}function dv(r){return`${r.name}!${r.options.appId}`}const $_=1024,q_=30;class Y_{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new X_(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vb();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>q_){const a=K_(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=vb(),{heartbeatsToSend:t,unsentEntries:i}=W_(this._heartbeatsCache.heartbeats),a=J1(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return Vi.warn(e),""}}}function vb(){return new Date().toISOString().substring(0,10)}function W_(r,e=$_){const t=[];let i=r.slice();for(const a of r){const o=t.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),xb(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),xb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class X_{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OE()?IE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await G_(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return bb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function xb(r){return J1(JSON.stringify({version:2,heartbeats:r})).length}function K_(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}function Q_(r){yr(new la("platform-logger",e=>new l_(e),"PRIVATE")),yr(new la("heartbeat",e=>new Y_(e),"PRIVATE")),ks(jf,gb,r),ks(jf,gb,"esm2020"),ks("fire-js","")}Q_("");function hv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Z_=hv,fv=new il("auth","Firebase",hv());const Zc=new rv("@firebase/auth");function J_(r,...e){Zc.logLevel<=Ke.WARN&&Zc.warn(`Auth (${al}): ${r}`,...e)}function $c(r,...e){Zc.logLevel<=Ke.ERROR&&Zc.error(`Auth (${al}): ${r}`,...e)}function jn(r,...e){throw vp(r,...e)}function qn(r,...e){return vp(r,...e)}function bp(r,e,t){const i={...Z_(),[e]:t};return new il("auth","Firebase",i).create(e,{appName:r.name})}function hi(r){return bp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pv(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&jn(r,"argument-error"),bp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return fv.create(r,...e)}function he(r,e,...t){if(!r)throw vp(e,...t)}function Ui(r){const e="INTERNAL ASSERTION FAILED: "+r;throw $c(e),new Error(e)}function Gi(r,e){r||Ui(e)}function Ff(){return typeof self<"u"&&self.location?.href||""}function eT(){return wb()==="http:"||wb()==="https:"}function wb(){return typeof self<"u"&&self.location?.protocol||null}function tT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eT()||kE()||"connection"in navigator)?navigator.onLine:!0}function nT(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class rl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gi(t>e,"Short delay should be less than long delay!"),this.isMobile=NE()||ME()}get(){return tT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xp(r,e){Gi(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class mv{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const iT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const sT=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],aT=new rl(3e4,6e4);function Qi(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Zi(r,e,t,i,a={}){return gv(r,a,async()=>{let o={},c={};i&&(e==="GET"?c=i:o={body:JSON.stringify(i)});const u=sl({key:r.config.apiKey,...c}).slice(1),h=await r._getAdditionalHeaders();h["Content-Type"]="application/json",r.languageCode&&(h["X-Firebase-Locale"]=r.languageCode);const f={method:e,headers:h,...o};return DE()||(f.referrerPolicy="no-referrer"),r.emulatorConfig&&Er(r.emulatorConfig.host)&&(f.credentials="include"),mv.fetch()(await yv(r,r.config.apiHost,t,u),f)})}async function gv(r,e,t){r._canInitEmulator=!1;const i={...iT,...e};try{const a=new oT(r),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw kc(r,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw kc(r,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw kc(r,"email-already-in-use",c);if(h==="USER_DISABLED")throw kc(r,"user-disabled",c);const p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw bp(r,p,f);jn(r,p)}}catch(a){if(a instanceof Ki)throw a;jn(r,"network-request-failed",{message:String(a)})}}async function ol(r,e,t,i,a={}){const o=await Zi(r,e,t,i,a);return"mfaPendingCredential"in o&&jn(r,"multi-factor-auth-required",{_serverResponse:o}),o}async function yv(r,e,t,i){const a=`${e}${t}?${i}`,o=r,c=o.config.emulator?xp(r.config,a):`${r.config.apiScheme}://${a}`;return sT.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function rT(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class oT{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(qn(this.auth,"network-request-failed")),aT.get())})}}function kc(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=qn(r,e,i);return a.customData._tokenResponse=t,a}function Ab(r){return r!==void 0&&r.enterprise!==void 0}class lT{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return rT(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cT(r,e){return Zi(r,"GET","/v2/recaptchaConfig",Qi(r,e))}async function uT(r,e){return Zi(r,"POST","/v1/accounts:delete",e)}async function Jc(r,e){return Zi(r,"POST","/v1/accounts:lookup",e)}function zo(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dT(r,e=!1){const t=un(r),i=await t.getIdToken(e),a=wp(i);he(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o?.sign_in_provider;return{claims:a,token:i,authTime:zo(yf(a.auth_time)),issuedAtTime:zo(yf(a.iat)),expirationTime:zo(yf(a.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}}function yf(r){return Number(r)*1e3}function wp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return $c("JWT malformed, contained fewer than 3 sections"),null;try{const a=ev(t);return a?JSON.parse(a):($c("Failed to decode base64 JWT payload"),null)}catch(a){return $c("Caught error parsing JWT payload as JSON",a?.toString()),null}}function Sb(r){const e=wp(r);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Yo(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Ki&&hT(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function hT({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class fT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class zf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Wo(r){const e=r.auth,t=await r.getIdToken(),i=await Yo(r,Jc(e,{idToken:t}));he(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const o=a.providerUserInfo?.length?bv(a.providerUserInfo):[],c=mT(r.providerData,o),u=r.isAnonymous,h=!(r.email&&a.passwordHash)&&!c?.length,f=u?h:!1,p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new zf(a.createdAt,a.lastLoginAt),isAnonymous:f};Object.assign(r,p)}async function pT(r){const e=un(r);await Wo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mT(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function bv(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}async function gT(r,e){const t=await gv(r,{},async()=>{const i=sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=r.config,c=await yv(r,a,"/v1/token",`key=${o}`),u=await r._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return r.emulatorConfig&&Er(r.emulatorConfig.host)&&(h.credentials="include"),mv.fetch()(c,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function yT(r,e){return Zi(r,"POST","/v2/accounts:revokeToken",Qi(r,e))}class cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){he(e.length!==0,"internal-error");const t=Sb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await gT(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,c=new cr;return i&&(he(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(he(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(he(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new cr,this.toJSON())}_performRefresh(){return Ui("not implemented")}}function Ss(r,e){he(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new fT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zf(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return he(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dT(this,e)}reload(){return pT(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Wo(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(hi(this.auth));const e=await this.getIdToken();return await Yo(this,uT(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,o=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,p=t.lastLoginAt??void 0,{uid:g,emailVerified:v,isAnonymous:x,providerData:E,stsTokenManager:w}=t;he(g&&w,e,"internal-error");const S=cr.fromJSON(this.name,w);he(typeof g=="string",e,"internal-error"),Ss(i,e.name),Ss(a,e.name),he(typeof v=="boolean",e,"internal-error"),he(typeof x=="boolean",e,"internal-error"),Ss(o,e.name),Ss(c,e.name),Ss(u,e.name),Ss(h,e.name),Ss(f,e.name),Ss(p,e.name);const _=new $n({uid:g,auth:e,email:a,emailVerified:v,displayName:i,isAnonymous:x,photoURL:c,phoneNumber:o,tenantId:u,stsTokenManager:S,createdAt:f,lastLoginAt:p});return E&&Array.isArray(E)&&(_.providerData=E.map(C=>({...C}))),h&&(_._redirectEventId=h),_}static async _fromIdTokenResponse(e,t,i=!1){const a=new cr;a.updateFromServerResponse(t);const o=new $n({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Wo(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];he(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?bv(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!o?.length,u=new cr;u.updateFromIdToken(i);const h=new $n({uid:a.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new zf(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!o?.length};return Object.assign(h,f),h}}const Eb=new Map;function Fi(r){Gi(r instanceof Function,"Expected a class definition");let e=Eb.get(r);return e?(Gi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Eb.set(r,e),e)}class vv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}vv.type="NONE";const _b=vv;function qc(r,e,t){return`firebase:${r}:${e}:${t}`}class ur{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=qc(this.userKey,a.apiKey,o),this.fullPersistenceKey=qc("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Jc(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new ur(Fi(_b),e,i);const a=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||Fi(_b);const c=qc(i,e.config.apiKey,e.name);let u=null;for(const f of t)try{const p=await f._get(c);if(p){let g;if(typeof p=="string"){const v=await Jc(e,{idToken:p}).catch(()=>{});if(!v)break;g=await $n._fromGetAccountInfoResponse(e,v,p)}else g=$n._fromJSON(e,p);f!==o&&(u=g),o=f;break}}catch{}const h=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new ur(o,e,i):(o=h[0],u&&await o._set(c,u.toJSON()),await Promise.all(t.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new ur(o,e,i))}}function Tb(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_v(e))return"Blackberry";if(Tv(e))return"Webos";if(wv(e))return"Safari";if((e.includes("chrome/")||Av(e))&&!e.includes("edge/"))return"Chrome";if(Ev(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function xv(r=Xt()){return/firefox\//i.test(r)}function wv(r=Xt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Av(r=Xt()){return/crios\//i.test(r)}function Sv(r=Xt()){return/iemobile/i.test(r)}function Ev(r=Xt()){return/android/i.test(r)}function _v(r=Xt()){return/blackberry/i.test(r)}function Tv(r=Xt()){return/webos/i.test(r)}function Ap(r=Xt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function bT(r=Xt()){return Ap(r)&&!!window.navigator?.standalone}function vT(){return LE()&&document.documentMode===10}function Cv(r=Xt()){return Ap(r)||Ev(r)||Tv(r)||_v(r)||/windows phone/i.test(r)||Sv(r)}function Rv(r,e=[]){let t;switch(r){case"Browser":t=Tb(Xt());break;case"Worker":t=`${Tb(Xt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${al}/${i}`}class xT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((c,u)=>{try{const h=e(o);c(h)}catch(h){u(h)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function wT(r,e={}){return Zi(r,"GET","/v2/passwordPolicy",Qi(r,e))}const AT=6;class ST{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??AT,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}class ET{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Cb(this),this.idTokenSubscription=new Cb(this),this.beforeStateQueue=new xT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fi(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ur.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Jc(this,{idToken:e}),i=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=this.redirectUser?._redirectEventId,c=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&u?.user&&(i=u.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wo(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(hi(this));const t=e?un(e):null;return t&&he(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wT(this),t=new ST(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new il("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await yT(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fi(e)||this._popupRedirectResolver;he(t,this,"argument-error"),this.redirectPersistenceManager=await ur.create(this,[Fi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,a);return()=>{c=!0,h()}}else{const h=e.addObserver(t);return()=>{c=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&J_(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gi(r){return un(r)}class Cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=FE(t=>this.observer=t)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let yu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _T(r){yu=r}function Nv(r){return yu.loadJS(r)}function TT(){return yu.recaptchaEnterpriseScript}function CT(){return yu.gapiScript}function RT(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class NT{constructor(){this.enterprise=new DT}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class DT{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const kT="recaptcha-enterprise",Dv="NO_RECAPTCHA";class MT{constructor(e){this.type=kT,this.auth=gi(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{cT(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new lT(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{u(h)})})}function a(o,c,u){const h=window.grecaptcha;Ab(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(Dv)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NT().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{i(this.auth).then(u=>{if(!t&&Ab(window.grecaptcha))a(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=TT();h.length!==0&&(h+=u),Nv(h).then(()=>{a(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Rb(r,e,t,i=!1,a=!1){const o=new MT(r);let c;if(a)c=Dv;else try{c=await o.verify(t)}catch{c=await o.verify(t,!0)}const u={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function eu(r,e,t,i,a){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Rb(r,e,t,t==="getOobCode");return i(r,o)}else return i(r,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Rb(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(o)})}function LT(r,e){const t=gp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(gr(o,e??{}))return a;jn(a,"already-initialized")}return t.initialize({options:e})}function OT(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Fi);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function kv(r,e,t){const i=gi(r);he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!!t?.disableWarnings,o=Mv(e),{host:c,port:u}=IT(e),h=u===null?"":`:${u}`,f={url:`${o}//${c}${h}/`},p=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){he(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),he(gr(f,i.config.emulator)&&gr(p,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=p,i.settings.appVerificationDisabledForTesting=!0,Er(c)?(sv(`${o}//${c}${h}`),av("Auth",!0)):a||PT()}function Mv(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function IT(r){const e=Mv(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:Nb(i.substr(o.length+1))}}else{const[o,c]=i.split(":");return{host:o,port:Nb(c)}}}function Nb(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function PT(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Sp{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,t){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function jT(r,e){return Zi(r,"POST","/v1/accounts:signUp",e)}async function BT(r,e){return ol(r,"POST","/v1/accounts:signInWithPassword",Qi(r,e))}async function UT(r,e){return Zi(r,"POST","/v1/accounts:sendOobCode",Qi(r,e))}async function FT(r,e){return UT(r,e)}async function zT(r,e){return ol(r,"POST","/v1/accounts:signInWithEmailLink",Qi(r,e))}async function HT(r,e){return ol(r,"POST","/v1/accounts:signInWithEmailLink",Qi(r,e))}class Xo extends Sp{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Xo(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Xo(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eu(e,t,"signInWithPassword",BT);case"emailLink":return zT(e,{email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eu(e,i,"signUpPassword",jT);case"emailLink":return HT(e,{idToken:t,email:this._email,oobCode:this._password});default:jn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function dr(r,e){return ol(r,"POST","/v1/accounts:signInWithIdp",Qi(r,e))}const VT="http://localhost";class $i extends Sp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new $i(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):jn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...o}=t;if(!i||!a)return null;const c=new $i(i,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return dr(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,dr(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dr(e,t)}buildRequest(){const e={requestUri:VT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=sl(t)}return e}}function GT(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function $T(r){const e=Io(Po(r)).link,t=e?Io(Po(e)).deep_link_id:null,i=Io(Po(r)).deep_link_id;return(i?Io(Po(i)).link:null)||i||t||e||r}class Ep{constructor(e){const t=Io(Po(e)),i=t.apiKey??null,a=t.oobCode??null,o=GT(t.mode??null);he(i&&a&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=a,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=$T(e);try{return new Ep(t)}catch{return null}}}class Ls{constructor(){this.providerId=Ls.PROVIDER_ID}static credential(e,t){return Xo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Ep.parseLink(t);return he(i,"argument-error"),Xo._fromEmailAndCode(e,i.code,i.tenantId)}}Ls.PROVIDER_ID="password";Ls.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ls.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class bu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _r extends bu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fi extends _r{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return he("providerId"in t&&"signInMethod"in t,"argument-error"),$i._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return he(e.idToken||e.accessToken,"argument-error"),$i._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return fi.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return fi.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:a,pendingToken:o,nonce:c,providerId:u}=e;if(!i&&!a&&!t&&!o||!u)return null;try{return new fi(u)._credential({idToken:t,accessToken:i,nonce:c,pendingToken:o})}catch{return null}}}class Es extends _r{constructor(){super("facebook.com")}static credential(e){return $i._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Es.credential(e.oauthAccessToken)}catch{return null}}}Es.FACEBOOK_SIGN_IN_METHOD="facebook.com";Es.PROVIDER_ID="facebook.com";class Gn extends _r{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return $i._fromParams({providerId:Gn.PROVIDER_ID,signInMethod:Gn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Gn.credentialFromTaggedObject(e)}static credentialFromError(e){return Gn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Gn.credential(t,i)}catch{return null}}}Gn.GOOGLE_SIGN_IN_METHOD="google.com";Gn.PROVIDER_ID="google.com";class _s extends _r{constructor(){super("github.com")}static credential(e){return $i._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.GITHUB_SIGN_IN_METHOD="github.com";_s.PROVIDER_ID="github.com";class Ts extends _r{constructor(){super("twitter.com")}static credential(e,t){return $i._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Ts.credential(t,i)}catch{return null}}}Ts.TWITTER_SIGN_IN_METHOD="twitter.com";Ts.PROVIDER_ID="twitter.com";async function Lv(r,e){return ol(r,"POST","/v1/accounts:signUp",Qi(r,e))}class qi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await $n._fromIdTokenResponse(e,i,a),c=Db(i);return new qi({user:o,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=Db(i);return new qi({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function Db(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}async function qT(r){if(cn(r.app))return Promise.reject(hi(r));const e=gi(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new qi({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Lv(e,{returnSecureToken:!0}),i=await qi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}class tu extends Ki{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,tu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new tu(e,t,i,a)}}function Ov(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?tu._fromErrorAndOperation(r,o,e,i):o})}function YT(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}async function Iv(r,e,t=!1){const i=await Yo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return qi._forOperation(r,"link",i)}async function WT(r,e,t){await Wo(e);const i=YT(e.providerData);he(i.has(t)===r,e.auth,"provider-already-linked")}async function XT(r,e,t=!1){const{auth:i}=r;if(cn(i.app))return Promise.reject(hi(i));const a="reauthenticate";try{const o=await Yo(r,Ov(i,a,e,r),t);he(o.idToken,i,"internal-error");const c=wp(o.idToken);he(c,i,"internal-error");const{sub:u}=c;return he(r.uid===u,i,"user-mismatch"),qi._forOperation(r,a,o)}catch(o){throw o?.code==="auth/user-not-found"&&jn(i,"user-mismatch"),o}}async function Pv(r,e,t=!1){if(cn(r.app))return Promise.reject(hi(r));const i="signIn",a=await Ov(r,i,e),o=await qi._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(o.user),o}async function KT(r,e){return Pv(gi(r),e)}async function jv(r,e){const t=un(r);return await WT(!1,t,e.providerId),Iv(t,e)}async function Bv(r){const e=gi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function QT(r,e,t){const i=gi(r);await eu(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",FT)}async function ZT(r,e,t){if(cn(r.app))return Promise.reject(hi(r));const i=gi(r),c=await eu(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Lv).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Bv(r),h}),u=await qi._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(u.user),u}function JT(r,e,t){return cn(r.app)?Promise.reject(hi(r)):KT(un(r),Ls.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Bv(r),i})}function eC(r,e,t,i){return un(r).onIdTokenChanged(e,t,i)}function tC(r,e,t){return un(r).beforeAuthStateChanged(e,t)}function nC(r,e,t,i){return un(r).onAuthStateChanged(e,t,i)}function Uv(r){return un(r).signOut()}const nu="__sak";class Fv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(nu,"1"),this.storage.removeItem(nu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const iC=1e3,sC=10;class zv extends Fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,h)=>{this.notifyListeners(c,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},o=this.storage.getItem(i);vT()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,sC):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},iC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zv.type="LOCAL";const aC=zv;class Hv extends Fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hv.type="SESSION";const Vv=Hv;function rC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new vu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const u=Array.from(c).map(async f=>f(t.origin,o)),h=await rC(u);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vu.receivers=[];function _p(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}class oC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((u,h)=>{const f=_p("",20);a.port1.start();const p=setTimeout(()=>{h(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(g){const v=g;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(p),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(p),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}function pi(){return window}function lC(r){pi().location.href=r}function Gv(){return typeof pi().WorkerGlobalScope<"u"&&typeof pi().importScripts=="function"}async function cC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uC(){return navigator?.serviceWorker?.controller||null}function dC(){return Gv()?self:null}const $v="firebaseLocalStorageDb",hC=1,iu="firebaseLocalStorage",qv="fbase_key";class ll{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function xu(r,e){return r.transaction([iu],e?"readwrite":"readonly").objectStore(iu)}function fC(){const r=indexedDB.deleteDatabase($v);return new ll(r).toPromise()}function Hf(){const r=indexedDB.open($v,hC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(iu,{keyPath:qv})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(iu)?e(i):(i.close(),await fC(),e(await Hf()))})})}async function kb(r,e,t){const i=xu(r,!0).put({[qv]:e,value:t});return new ll(i).toPromise()}async function pC(r,e){const t=xu(r,!1).get(e),i=await new ll(t).toPromise();return i===void 0?null:i.value}function Mb(r,e){const t=xu(r,!0).delete(e);return new ll(t).toPromise()}const mC=800,gC=3;class Yv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>gC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vu._getInstance(dC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await cC(),!this.activeServiceWorker)return;this.sender=new oC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hf();return await kb(e,nu,"1"),await Mb(e,nu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>kb(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>pC(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Mb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=xu(a,!1).getAll();return new ll(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yv.type="LOCAL";const yC=Yv;new rl(3e4,6e4);function Tp(r,e){return e?Fi(e):(he(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Cp extends Sp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bC(r){return Pv(r.auth,new Cp(r),r.bypassAuthState)}function vC(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),XT(t,new Cp(r),r.bypassAuthState)}async function xC(r){const{auth:e,user:t}=r;return he(t,e,"internal-error"),Iv(t,new Cp(r),r.bypassAuthState)}class Wv{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bC;case"linkViaPopup":case"linkViaRedirect":return xC;case"reauthViaPopup":case"reauthViaRedirect":return vC;default:jn(this.auth,"internal-error")}}resolve(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wC=new rl(2e3,1e4);async function bf(r,e,t){if(cn(r.app))return Promise.reject(qn(r,"operation-not-supported-in-this-environment"));const i=gi(r);pv(r,e,bu);const a=Tp(i,t);return new Rs(i,"signInViaPopup",e,a).executeNotNull()}async function Xv(r,e,t){const i=un(r);pv(i.auth,e,bu);const a=Tp(i.auth,t);return new Rs(i.auth,"linkViaPopup",e,a,i).executeNotNull()}class Rs extends Wv{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Rs.currentPopupAction&&Rs.currentPopupAction.cancel(),Rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){Gi(this.filter.length===1,"Popup operations only handle one event");const e=_p();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wC.get())};e()}}Rs.currentPopupAction=null;const AC="pendingRedirect",Yc=new Map;class SC extends Wv{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Yc.get(this.auth._key());if(!e){try{const i=await EC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Yc.set(this.auth._key(),e)}return this.bypassAuthState||Yc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EC(r,e){const t=CC(e),i=TC(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function _C(r,e){Yc.set(r._key(),e)}function TC(r){return Fi(r._redirectPersistence)}function CC(r){return qc(AC,r.config.apiKey,r.name)}async function RC(r,e,t=!1){if(cn(r.app))return Promise.reject(hi(r));const i=gi(r),a=Tp(i,e),c=await new SC(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}const NC=600*1e3;class DC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Kv(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(qn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=NC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lb(e))}saveEventToCache(e){this.cachedEventUids.add(Lb(e)),this.lastProcessedEventTime=Date.now()}}function Lb(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Kv({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function kC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kv(r);default:return!1}}async function MC(r,e={}){return Zi(r,"GET","/v1/projects",e)}const LC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function IC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await MC(r);for(const t of e)try{if(PC(t))return}catch{}jn(r,"unauthorized-domain")}function PC(r){const e=Ff(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!OC.test(t))return!1;if(LC.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}const jC=new rl(3e4,6e4);function Ob(){const r=pi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function BC(r){return new Promise((e,t)=>{function i(){Ob(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ob(),t(qn(r,"network-request-failed"))},timeout:jC.get()})}if(pi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(pi().gapi?.load)i();else{const a=RT("iframefcb");return pi()[a]=()=>{gapi.load?i():t(qn(r,"network-request-failed"))},Nv(`${CT()}?onload=${a}`).catch(o=>t(o))}}).catch(e=>{throw Wc=null,e})}let Wc=null;function UC(r){return Wc=Wc||BC(r),Wc}const FC=new rl(5e3,15e3),zC="__/auth/iframe",HC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $C(r){const e=r.config;he(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?xp(e,HC):`https://${r.config.authDomain}/${zC}`,i={apiKey:e.apiKey,appName:r.name,v:al},a=GC.get(r.config.apiHost);a&&(i.eid=a);const o=r._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${sl(i).slice(1)}`}async function qC(r){const e=await UC(r),t=pi().gapi;return he(t,r,"internal-error"),e.open({where:document.body,url:$C(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const c=qn(r,"network-request-failed"),u=pi().setTimeout(()=>{o(c)},FC.get());function h(){pi().clearTimeout(u),a(i)}i.ping(h).then(h,()=>{o(c)})}))}const YC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WC=500,XC=600,KC="_blank",QC="http://localhost";class Ib{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZC(r,e,t,i=WC,a=XC){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...YC,width:i.toString(),height:a.toString(),top:o,left:c},f=Xt().toLowerCase();t&&(u=Av(f)?KC:t),xv(f)&&(e=e||QC,h.scrollbars="yes");const p=Object.entries(h).reduce((v,[x,E])=>`${v}${x}=${E},`,"");if(bT(f)&&u!=="_self")return JC(e||"",u),new Ib(null);const g=window.open(e||"",u,p);he(g,r,"popup-blocked");try{g.focus()}catch{}return new Ib(g)}function JC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const eR="__/auth/handler",tR="emulator/auth/handler",nR=encodeURIComponent("fac");async function Pb(r,e,t,i,a,o){he(r.config.authDomain,r,"auth-domain-config-required"),he(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:al,eventId:a};if(e instanceof bu){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",UE(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,g]of Object.entries({}))c[p]=g}if(e instanceof _r){const p=e.getScopes().filter(g=>g!=="");p.length>0&&(c.scopes=p.join(","))}r.tenantId&&(c.tid=r.tenantId);const u=c;for(const p of Object.keys(u))u[p]===void 0&&delete u[p];const h=await r._getAppCheckToken(),f=h?`#${nR}=${encodeURIComponent(h)}`:"";return`${iR(r)}?${sl(u).slice(1)}${f}`}function iR({config:r}){return r.emulator?xp(r,tR):`https://${r.authDomain}/${eR}`}const vf="webStorageSupport";class sR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vv,this._completeRedirectFn=RC,this._overrideRedirectResult=_C}async _openPopup(e,t,i,a){Gi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const o=await Pb(e,t,i,Ff(),a);return ZC(e,o,_p())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await Pb(e,t,i,Ff(),a);return lC(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(Gi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qC(e),i=new DC(e);return t.register("authEvent",a=>(he(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vf,{type:vf},a=>{const o=a?.[0]?.[vf];o!==void 0&&t(!!o),jn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=IC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cv()||wv()||Ap()}}const aR=sR;var jb="@firebase/auth",Bb="1.12.0";class rR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function oR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lR(r){yr(new la("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=i.options;he(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:c,authDomain:u,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rv(r)},f=new ET(i,a,o,h);return OT(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),yr(new la("auth-internal",e=>{const t=gi(e.getProvider("auth").getImmediate());return(i=>new rR(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ks(jb,Bb,oR(r)),ks(jb,Bb,"esm2020")}const cR=300,uR=iv("authIdTokenMaxAge")||cR;let Ub=null;const dR=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>uR)return;const a=t?.token;Ub!==a&&(Ub=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function hR(r=yp()){const e=gp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=LT(r,{popupRedirectResolver:aR,persistence:[yC,aC,Vv]}),i=iv("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const c=dR(o.toString());tC(t,c,()=>c(t.currentUser)),eC(t,u=>c(u))}}const a=tv("auth");return a&&kv(t,`http://${a}`),t}function fR(){return document.getElementsByTagName("head")?.[0]??document}_T({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const o=qn("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",fR().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lR("Browser");var pR="firebase",mR="12.9.0";ks(pR,mR,"app");const Qv=k.createContext();let Mc={apiKey:"AIzaSyDqow-DLrBOZGUbGCN2nxpMCqXcbqDQe5Q",authDomain:"snapsign-au.firebaseapp.com",projectId:"snapsign-au",storageBucket:"snapsign-au.firebasestorage.app",messagingSenderId:"388378898686",appId:"1:388378898686:web:ec9931e426c1e7e768b5af",measurementId:"G-R41Q720M9W"};const Fb=r=>{if(!r||typeof r!="string")return!0;const e=r.trim();return e===""||e.includes("your_")||e.includes("replace_me")||e.includes("changeme")};let Vf=null,xt=null,zb=!1;try{if(window.MOCK_AUTH)Fb(Mc.apiKey)&&(console.log("Using dummy Firebase config for MOCK_AUTH mode"),Mc={apiKey:"AIzaSyDummyKeyForMockStats",authDomain:"mock-project.firebaseapp.com",projectId:"mock-project",storageBucket:"mock-project.appspot.com",messagingSenderId:"123456789",appId:"1:123456789:web:abcdef"});else if(Fb(Mc.apiKey))throw new Error("Firebase client configuration is missing or invalid. Authentication will be unavailable.");Vf=z_().length===0?cv(Mc):yp(),xt=hR(Vf),"".toLowerCase()==="true"&&!zb&&(kv(xt,"http://localhost:9099",{disableWarnings:!0}),zb=!0)}catch(r){console.error("Failed to initialize Firebase:",r)}const gR=({children:r})=>{const[e,t]=k.useState({status:"pending",user:null,error:null});k.useEffect(()=>{if(window.MOCK_AUTH){const g=window.MOCK_AUTH_USER===void 0?{uid:"test-user",isAnonymous:!0}:window.MOCK_AUTH_USER;t({status:!!g?"authenticated":"unauthenticated",user:g||null,error:null});return}if(!xt){t({status:"error",user:null,error:new Error("Firebase Auth not available")}),console.error("Firebase Auth not available");return}const p=nC(xt,async g=>{if(!g){try{const v=await qT(xt);t({status:"authenticated",user:v.user,error:null})}catch(v){console.error("Authentication error:",v),t({status:"error",user:null,error:v})}return}t({status:"authenticated",user:g,error:null})},g=>{console.error("Authentication observer error:",g),t({status:"error",user:null,error:g})});return()=>p()},[]);const i=async()=>{if(!xt)throw new Error("Auth is not available");return bf(xt,new Gn)},a=async()=>{if(!xt)throw new Error("Auth is not available");return bf(xt,new fi("microsoft.com"))},o=async()=>{if(!xt)throw new Error("Auth is not available");return bf(xt,new fi("apple.com"))},c=async(p,g)=>{if(!xt)throw new Error("Auth is not available");return JT(xt,p,g)},u=async(p,g)=>{if(!xt)throw new Error("Auth is not available");return ZT(xt,p,g)},h=async p=>{if(!xt)throw new Error("Auth is not available");return QT(xt,p)},f=async()=>{xt&&await Uv(xt)};return y.jsx(Qv.Provider,{value:{authState:e,app:Vf,auth:xt,signInWithGoogle:i,signInWithMicrosoft:a,signInWithApple:o,signInWithEmail:c,signUpWithEmail:u,resetPassword:h,signOutUser:f},children:r})},yi=()=>{const r=k.useContext(Qv);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r};function yR(){const{authState:r,auth:e}=yi();return k.useRef(!1),k.useEffect(()=>{},[r?.status,r?.user?.isAnonymous,e]),null}var Zv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Hb=wn.createContext&&wn.createContext(Zv),bR=["attr","size","title"];function vR(r,e){if(r==null)return{};var t=xR(r,e),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(a=0;a<o.length;a++)i=o[a],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(r,i)&&(t[i]=r[i])}return t}function xR(r,e){if(r==null)return{};var t={};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)){if(e.indexOf(i)>=0)continue;t[i]=r[i]}return t}function su(){return su=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},su.apply(this,arguments)}function Vb(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);e&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,i)}return t}function au(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vb(Object(t),!0).forEach(function(i){wR(r,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vb(Object(t)).forEach(function(i){Object.defineProperty(r,i,Object.getOwnPropertyDescriptor(t,i))})}return r}function wR(r,e,t){return e=AR(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function AR(r){var e=SR(r,"string");return typeof e=="symbol"?e:e+""}function SR(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var i=t.call(r,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Jv(r){return r&&r.map((e,t)=>wn.createElement(e.tag,au({key:t},e.attr),Jv(e.child)))}function Te(r){return e=>wn.createElement(ER,su({attr:au({},r.attr)},e),Jv(r.child))}function ER(r){var e=t=>{var{attr:i,size:a,title:o}=r,c=vR(r,bR),u=a||t.size||"1em",h;return t.className&&(h=t.className),r.className&&(h=(h?h+" ":"")+r.className),wn.createElement("svg",su({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,c,{className:h,style:au(au({color:r.color||t.color},t.style),r.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&wn.createElement("title",null,o),r.children)};return Hb!==void 0?wn.createElement(Hb.Consumer,null,t=>e(t)):e(Zv)}function ex(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(r)}function _R(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function TR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z",clipRule:"evenodd"},child:[]}]})(r)}function Gf(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(r)}function CR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function tx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function nx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function ix(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.977A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z"},child:[]},{tag:"path",attr:{d:"M9 13h2v5a1 1 0 11-2 0v-5z"},child:[]}]})(r)}function sx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6.672 1.911a1 1 0 10-1.932.518l.259.966a1 1 0 001.932-.518l-.26-.966zM2.429 4.74a1 1 0 10-.517 1.932l.966.259a1 1 0 00.517-1.932l-.966-.26zm8.814-.569a1 1 0 00-1.415-1.414l-.707.707a1 1 0 101.415 1.415l.707-.708zm-7.071 7.072l.707-.707A1 1 0 003.465 9.12l-.708.707a1 1 0 001.415 1.415zm3.2-5.171a1 1 0 00-1.3 1.3l4 10a1 1 0 001.823.075l1.38-2.759 3.018 3.02a1 1 0 001.414-1.415l-3.019-3.02 2.76-1.379a1 1 0 00-.076-1.822l-10-4z",clipRule:"evenodd"},child:[]}]})(r)}function RR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z",clipRule:"evenodd"},child:[]}]})(r)}function Rp(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"},child:[]}]})(r)}function ax(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function rx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(r)}function NR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"},child:[]}]})(r)}function ox(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z",clipRule:"evenodd"},child:[]}]})(r)}function Np(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"},child:[]}]})(r)}function wu(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"},child:[]}]})(r)}function DR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"},child:[]}]})(r)}function lx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"},child:[]}]})(r)}function kR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 1.944A11.954 11.954 0 012.166 5C2.056 5.649 2 6.319 2 7c0 5.225 3.34 9.67 8 11.317C14.66 16.67 18 12.225 18 7c0-.682-.057-1.35-.166-2.001A11.954 11.954 0 0110 1.944zM11 14a1 1 0 11-2 0 1 1 0 012 0zm0-7a1 1 0 10-2 0v3a1 1 0 102 0V7z",clipRule:"evenodd"},child:[]}]})(r)}function Au(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5 2a1 1 0 011 1v1h1a1 1 0 010 2H6v1a1 1 0 01-2 0V6H3a1 1 0 010-2h1V3a1 1 0 011-1zm0 10a1 1 0 011 1v1h1a1 1 0 110 2H6v1a1 1 0 11-2 0v-1H3a1 1 0 110-2h1v-1a1 1 0 011-1zM12 2a1 1 0 01.967.744L14.146 7.2 17.5 9.134a1 1 0 010 1.732l-3.354 1.935-1.18 4.455a1 1 0 01-1.933 0L9.854 12.8 6.5 10.866a1 1 0 010-1.732l3.354-1.935 1.18-4.455A1 1 0 0112 2z",clipRule:"evenodd"},child:[]}]})(r)}function MR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"},child:[]}]})(r)}function LR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M17.707 9.293a1 1 0 010 1.414l-7 7a1 1 0 01-1.414 0l-7-7A.997.997 0 012 10V5a3 3 0 013-3h5c.256 0 .512.098.707.293l7 7zM5 6a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"},child:[]}]})(r)}function OR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"},child:[]}]})(r)}function IR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578a18.87 18.87 0 01-1.724 4.78c.29.354.596.696.914 1.026a1 1 0 11-1.44 1.389c-.188-.196-.373-.396-.554-.6a19.098 19.098 0 01-3.107 3.567 1 1 0 01-1.334-1.49 17.087 17.087 0 003.13-3.733 18.992 18.992 0 01-1.487-2.494 1 1 0 111.79-.89c.234.47.489.928.764 1.372.417-.934.752-1.913.997-2.927H3a1 1 0 110-2h3V3a1 1 0 011-1zm6 6a1 1 0 01.894.553l2.991 5.982a.869.869 0 01.02.037l.99 1.98a1 1 0 11-1.79.895L15.383 16h-4.764l-.724 1.447a1 1 0 11-1.788-.894l.99-1.98.019-.038 2.99-5.982A1 1 0 0113 8zm-1.382 6h2.764L13 11.236 11.618 14z",clipRule:"evenodd"},child:[]}]})(r)}function cx(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"},child:[]}]})(r)}function Dp(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z",clipRule:"evenodd"},child:[]}]})(r)}function PR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"},child:[]}]})(r)}function jR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"},child:[]}]})(r)}function BR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5 8a1 1 0 011-1h1V6a1 1 0 012 0v1h1a1 1 0 110 2H9v1a1 1 0 11-2 0V9H6a1 1 0 01-1-1z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8zm6-4a4 4 0 100 8 4 4 0 000-8z",clipRule:"evenodd"},child:[]}]})(r)}function UR(r){return Te({attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M5 8a1 1 0 011-1h4a1 1 0 110 2H6a1 1 0 01-1-1z",clipRule:"evenodd"},child:[]}]})(r)}const Gb={primary:"bg-slate-900 text-white border border-transparent hover:bg-slate-800 shadow-lg shadow-slate-900/20",secondary:"bg-white text-slate-900 border border-slate-200 hover:bg-slate-50 shadow-sm",outline:"bg-transparent text-slate-600 border border-slate-200 hover:border-slate-300 hover:text-slate-900",ghost:"bg-transparent text-slate-600 border border-transparent hover:bg-slate-100 hover:text-slate-900"},$b={sm:"px-4 py-2 text-sm",md:"px-6 py-3 text-sm",lg:"px-8 py-4 text-base"},na=({variant:r="primary",size:e="md",className:t="",href:i,to:a,onClick:o,children:c,type:u="button",...h})=>{const f="inline-flex items-center justify-center font-bold rounded-full transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",p=Gb[r]||Gb.primary,g=$b[e]||$b.md,v=`${f} ${p} ${g} ${t}`;return a?y.jsx(nt,{to:a,className:v,...h,children:c}):i?y.jsx("a",{href:i,className:v,...h,children:c}):y.jsx("button",{type:u,onClick:o,className:v,...h,children:c})},qb=[{label:"How it works",href:"#how-it-works"},{label:"Features",href:"#features"},{label:"Use cases",href:"#use-cases"},{label:"Pricing",to:"/pricing"}],ux=({variant:r="marketing",onOpenPdf:e,children:t})=>{const i=zt(),{authState:a}=yi(),[o,c]=k.useState(!1),u=r==="app",h=i.pathname==="/"||i.pathname==="/app",f=i.pathname==="/sign-in"||i.pathname==="/sign-up",p=a?.status==="authenticated";k.useEffect(()=>{c(!1)},[i.pathname,i.hash]);const g=f?i.pathname==="/sign-in"?{label:"Sign Up",to:"/sign-up"}:{label:"Sign In",to:"/sign-in"}:e?{label:"Open PDF",onClick:e}:p?{label:"Profile",to:"/profile"}:{label:"Sign In",to:"/sign-in"},v=f?null:e?p?{label:"Profile",to:"/profile",variant:"outline"}:{label:"Sign In",to:"/sign-in",variant:"outline"}:null,x=()=>c(_=>!_),E=()=>c(!1),w=_=>{const C="hover:text-slate-900 transition-colors no-underline text-slate-600";return _.href&&_.href.startsWith("#")?h?y.jsx("a",{className:C,href:_.href,onClick:E,children:_.label}):y.jsx(nt,{className:C,to:{pathname:"/",hash:_.href},onClick:E,children:_.label}):y.jsx(nt,{className:C,to:_.to,onClick:E,children:_.label})},S=(_,C="")=>{if(!_)return null;const{label:T,to:N,onClick:D,variant:M="primary"}=_,P=D?()=>{E(),D()}:void 0;return y.jsx(na,{variant:M,size:"sm",to:N,onClick:P,className:C,children:T})};return y.jsxs("header",{className:"sticky top-0 z-30 w-full border-b border-white/40 bg-white/70 backdrop-blur-xl",children:[y.jsxs("div",{className:`mx-auto flex w-full items-center justify-between px-6 ${u?"h-14 py-2":"max-w-6xl py-4"}`,children:[y.jsxs(nt,{to:"/",className:"flex items-center gap-3 text-lg font-bold tracking-tight text-slate-900 no-underline",children:[y.jsx("img",{src:X1,alt:"DecoDocs",className:"h-9 w-9"}),!u&&"DecoDocs"]}),!u&&y.jsx("nav",{className:"hidden items-center gap-8 text-sm font-semibold text-slate-600 md:flex",children:qb.map(_=>y.jsx("span",{children:w(_)},_.label))}),y.jsxs("div",{className:"flex items-center gap-3",children:[!u&&y.jsxs("div",{className:"hidden items-center gap-3 md:flex",children:[S(v,"bg-white/50"),S(g)]}),u&&y.jsxs("div",{id:"header-app-actions",className:"flex items-center gap-2",children:[y.jsxs(nt,{to:"/pricing",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs font-bold text-amber-700 bg-amber-50 hover:bg-amber-100 rounded-full transition-colors no-underline border border-amber-200/60",children:[y.jsx(Au,{className:"w-3.5 h-3.5"}),"Upgrade"]}),y.jsx(nt,{to:"/profile",className:"flex items-center justify-center w-8 h-8 rounded-full bg-slate-100 hover:bg-slate-200 transition-colors border border-slate-200/60",title:a?.user?.email||"Profile",children:a?.user?.photoURL?y.jsx("img",{src:a.user.photoURL,alt:"",className:"w-8 h-8 rounded-full object-cover"}):y.jsx(PR,{className:"w-4 h-4 text-slate-500"})})]}),!u&&y.jsxs("button",{type:"button",className:"inline-flex items-center justify-center rounded-full border border-slate-200 bg-white/80 p-2 text-slate-700 shadow-sm transition hover:border-slate-300 md:hidden","aria-expanded":o,"aria-controls":"site-mobile-menu",onClick:x,children:[y.jsx("span",{className:"sr-only",children:"Toggle menu"}),o?y.jsxs("svg",{"aria-hidden":"true",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[y.jsx("path",{d:"M5 5L15 15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M15 5L5 15",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]}):y.jsxs("svg",{"aria-hidden":"true",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:[y.jsx("path",{d:"M3 5H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M3 10H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"}),y.jsx("path",{d:"M3 15H17",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round"})]})]})]})]}),!u&&y.jsx("div",{id:"site-mobile-menu",className:`md:hidden ${o?"block":"hidden"}`,children:y.jsxs("div",{className:"px-6 pb-4 pt-2",children:[y.jsx("div",{className:"flex flex-col gap-3 text-sm font-semibold text-slate-700",children:qb.map(_=>y.jsx("span",{children:w(_)},_.label))}),y.jsxs("div",{className:"mt-4 flex flex-col gap-3",children:[S(v,"w-full justify-center bg-white/60"),S(g,"w-full justify-center")]})]})}),t]})},$f=({onOpenPdf:r=()=>{},children:e})=>y.jsxs("div",{className:"min-h-screen bg-[#f7f6f2] text-slate-900 font-sans",children:[y.jsx(yR,{}),y.jsxs("div",{className:"relative overflow-hidden",children:[y.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[y.jsx("div",{className:"absolute -top-32 -right-20 h-72 w-72 rounded-full bg-[#d8e6ff] blur-3xl opacity-60 animate-float-slow"}),y.jsx("div",{className:"absolute top-40 -left-24 h-72 w-72 rounded-full bg-[#fde4c7] blur-3xl opacity-50 animate-float-slow"})]}),y.jsx(ux,{onOpenPdf:r}),y.jsx("main",{className:"relative z-10",children:e}),y.jsx(K1,{})]})]}),FR=({onOpenPdf:r})=>y.jsx("section",{id:"hero",className:"px-6 pt-24 pb-20 lg:pt-32 lg:pb-24",children:y.jsxs("div",{className:"mx-auto grid w-full max-w-6xl items-center gap-16 lg:grid-cols-[1.1fr_0.9fr]",children:[y.jsxs("div",{className:"flex flex-col gap-8",children:[y.jsx("span",{className:"w-fit rounded-full border border-slate-200 bg-white px-4 py-1.5 text-xs font-bold uppercase tracking-wider text-slate-600 shadow-sm",children:"Modern document intelligence"}),y.jsxs("h1",{className:"text-5xl font-bold tracking-tight text-slate-900 md:text-6xl leading-[1.1]",children:["Decode documents ",y.jsx("br",{className:"hidden lg:block"}),y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-slate-900 to-slate-600",children:"before you sign."})]}),y.jsx("p",{className:"text-xl text-slate-600 leading-relaxed max-w-xl",children:"DecoDocs turns dense PDFs into clear decisions with AI summaries, risk flags, and evidence-backed explanations."}),y.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[y.jsx(na,{variant:"primary",size:"lg",onClick:r,className:"w-full sm:w-auto",children:"Analyze a Document"}),y.jsx(na,{variant:"secondary",size:"lg",to:"/view",className:"w-full sm:w-auto",children:"View Demo"})]}),y.jsxs("div",{className:"flex flex-wrap gap-6 text-sm font-medium text-slate-500 mt-2",children:[y.jsxs("span",{className:"flex items-center gap-2.5",children:[y.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),"Free mode never stores files"]}),y.jsxs("span",{className:"flex items-center gap-2.5",children:[y.jsx("span",{className:"h-2.5 w-2.5 rounded-full bg-slate-900"}),"Pro includes vaults & history"]})]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:"absolute -top-12 -right-12 h-64 w-64 rounded-full bg-purple-100 blur-3xl opacity-60 animate-float-slow"}),y.jsx("div",{className:"absolute -bottom-12 -left-12 h-64 w-64 rounded-full bg-amber-100 blur-3xl opacity-60 animate-float-slow",style:{animationDelay:"2s"}}),y.jsxs("div",{className:"relative rounded-3xl border border-white/60 bg-white/80 backdrop-blur-xl p-8 shadow-2xl shadow-slate-900/10 ring-1 ring-slate-900/5 transition-transform hover:scale-[1.01] duration-500",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs font-bold text-slate-400 uppercase tracking-wider mb-6",children:[y.jsx("span",{children:"Contract Review"}),y.jsx("span",{children:"12 pages"})]}),y.jsxs("div",{className:"space-y-5",children:[y.jsxs("div",{className:"rounded-2xl bg-amber-50 p-5 border border-amber-100/50",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 font-bold text-xs",children:"!"}),y.jsx("span",{className:"text-xs font-bold text-amber-700 uppercase tracking-wide pt-0.5",children:"Risk Flagged"})]}),y.jsx("p",{className:"text-base text-slate-800 leading-snug font-medium",children:"Termination clause requires 90-day notice and carries a 3x fee."})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-100 bg-white p-5 shadow-sm",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 font-bold text-xs",children:"i"}),y.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide pt-0.5",children:"Plain English"})]}),y.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:"You must give three months notice or pay a penalty equal to three months of fees."})]}),y.jsxs("div",{className:"rounded-2xl bg-slate-900 p-5 text-white shadow-lg shadow-slate-900/10",children:[y.jsxs("div",{className:"flex gap-3 mb-2",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-slate-700 flex items-center justify-center text-white font-bold text-xs",children:""}),y.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wide pt-0.5",children:"Recommendation"})]}),y.jsx("p",{className:"text-sm font-medium leading-relaxed",children:"Renegotiate the termination period to 30 days or cap the penalty at 1x fee."})]})]}),y.jsxs("div",{className:"mt-8 flex items-center justify-between rounded-2xl bg-slate-50 border border-slate-100 px-5 py-4 text-xs",children:[y.jsxs("span",{className:"flex items-center gap-2 text-slate-500",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-emerald-500"}),"AI decode complete"]}),y.jsx("span",{className:"font-bold text-slate-900 bg-white px-3 py-1 rounded-full border border-slate-200 shadow-sm",children:"Ready to review"})]})]})]})]})}),Tr=({eyebrow:r,title:e,description:t,align:i="center"})=>{const a=i==="left"?"items-start text-left":"items-center text-center";return y.jsxs("div",{className:`flex flex-col gap-3 ${a}`,children:[r?y.jsx("span",{className:"text-xs uppercase tracking-[0.3em] text-slate-500",children:r}):null,y.jsx("h2",{className:"text-3xl md:text-4xl font-semibold text-slate-900",children:e}),t?y.jsx("p",{className:"text-base md:text-lg text-slate-600 max-w-2xl",children:t}):null]})},zR=()=>y.jsx("section",{className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(Tr,{eyebrow:"Trusted teams",title:"Teams use DecoDocs to review faster",description:"From startups to procurement teams, we help busy leaders move faster without missing critical terms."}),y.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:fE.map(r=>y.jsxs("div",{className:"rounded-3xl border border-white/60 bg-white/80 p-6 shadow-lg shadow-slate-900/5",children:[y.jsx("p",{className:"text-2xl font-semibold text-slate-900",children:r.value}),y.jsx("p",{className:"mt-2 text-sm text-slate-500",children:r.label})]},r.label))}),y.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 rounded-3xl border border-white/50 bg-white/70 px-6 py-5 text-xs uppercase tracking-[0.2em] text-slate-400",children:hE.map(r=>y.jsx("span",{children:r},r))})]})}),HR=()=>{const r=[Dp,Au,Gf];return y.jsx("section",{id:"how-it-works",className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(Tr,{eyebrow:"How it works",title:"Three steps to clarity",description:"No onboarding, no templates. Drop in a document and get structured insights within seconds.",align:"left"}),y.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:pE.map((e,t)=>y.jsxs("div",{className:"rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"text-xs font-semibold uppercase tracking-[0.3em] text-slate-400",children:["Step ",t+1]}),wn.createElement(r[t],{className:"w-6 h-6 text-slate-400"})]}),y.jsx("h3",{className:"mt-6 text-xl font-semibold text-slate-900",children:e.title}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:e.description})]},e.title))})]})})},VR=()=>{const r=[Rp,rx,MR,DR,LR,lx];return y.jsx("section",{id:"features",className:"px-6 py-16",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-10",children:[y.jsx(Tr,{eyebrow:"Product",title:"Every insight you need to move faster",description:"Built for modern teams that need clarity, speed, and secure workflows."}),y.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:mE.map((e,t)=>y.jsxs("div",{className:"group rounded-3xl border border-slate-100 bg-white p-6 shadow-lg shadow-slate-900/5 transition hover:-translate-y-1",children:[y.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-2xl bg-slate-900 text-white",children:wn.createElement(r[t],{className:"w-5 h-5"})}),y.jsx("h3",{className:"mt-5 text-lg font-semibold text-slate-900",children:e.title}),y.jsx("p",{className:"mt-3 text-sm text-slate-600",children:e.description})]},e.title))})]})})},GR=()=>{const r=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");return y.jsx("section",{id:"use-cases",className:"px-6 py-24 bg-slate-50",children:y.jsxs("div",{className:"mx-auto flex w-full max-w-6xl flex-col gap-12",children:[y.jsx(Tr,{eyebrow:"Use cases",title:"Built for high-stakes decisions",description:"DecoDocs supports every team that needs clean answers before signing or committing.",align:"left"}),y.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-3",children:Gc.map((e,t)=>y.jsxs("div",{className:"group relative flex flex-col rounded-3xl border border-slate-200 bg-white p-8 shadow-sm hover:shadow-xl hover:border-slate-300 transition-all duration-300",children:[y.jsxs("div",{className:"flex items-center justify-between text-xs font-bold uppercase tracking-wider text-slate-400 mb-6 group-hover:text-slate-600 transition-colors",children:[y.jsx("span",{children:e.audience||"Use case"}),y.jsx("span",{children:String(t+1).padStart(2,"0")})]}),y.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-4 group-hover:text-amber-600 transition-colors",children:e.title}),y.jsx("p",{className:"text-base text-slate-600 leading-relaxed",children:e.description}),y.jsxs(nt,{to:`/use-cases/${e.slug||r(e.title)}`,className:"mt-8 pt-6 border-t border-slate-100 flex items-center text-sm font-bold text-slate-900 opacity-60 group-hover:opacity-100 transition-opacity no-underline hover:text-slate-900",children:[y.jsx("span",{children:"Learn more"}),y.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})})]})]},e.title))})]})})};function $R(r){return Te({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.482 12.944c-0.942-0.235-1.466-0.984-1.468-2.095-0-0.355 0.025-0.525 0.114-0.754 0.217-0.56 0.793-0.982 1.55-1.138 0.377-0.077 0.493-0.16 0.493-0.353 0-0.060 0.045-0.24 0.1-0.399 0.249-0.724 0.71-1.327 1.202-1.573 0.515-0.258 0.776-0.316 1.399-0.313 0.886 0.005 1.327 0.197 1.945 0.846l0.34 0.357 0.304-0.105c1.473-0.51 2.942 0.358 3.061 1.809l0.032 0.397 0.29 0.104c0.829 0.297 1.218 0.92 1.148 1.837-0.046 0.599-0.326 1.078-0.77 1.315l-0.209 0.112-4.638 0.009c-3.564 0.007-4.697-0.006-4.893-0.055v0zM1.613 12.281c-0.565-0.142-1.164-0.67-1.445-1.273-0.159-0.342-0.168-0.393-0.168-0.998 0-0.576 0.014-0.668 0.14-0.954 0.267-0.603 0.78-1.038 1.422-1.21 0.136-0.036 0.263-0.094 0.283-0.128s0.043-0.221 0.050-0.415c0.045-1.206 0.794-2.269 1.839-2.61 0.565-0.184 1.306-0.202 1.92 0.058 0.195 0.082 0.173 0.1 0.585-0.471 0.244-0.338 0.705-0.695 1.108-0.909 0.435-0.231 0.887-0.337 1.428-0.336 1.512 0.004 2.815 1.003 3.297 2.529 0.154 0.487 0.146 0.624-0.035 0.628-0.079 0.002-0.306 0.048-0.505 0.102l-0.361 0.099-0.329-0.348c-0.928-0.98-2.441-1.192-3.728-0.522-0.514 0.268-0.927 0.652-1.239 1.153-0.222 0.357-0.506 1.024-0.506 1.189 0 0.117-0.090 0.176-0.474 0.309-1.189 0.412-1.883 1.364-1.882 2.582 0 0.443 0.108 0.986 0.258 1.296 0.057 0.117 0.088 0.228 0.070 0.247-0.046 0.049-1.525 0.032-1.73-0.019v0z"},child:[]}]})(r)}function qR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M.959 5.523c-.54 0-.959.42-.959.899v7.549a4.59 4.59 0 004.613 4.494 4.717 4.717 0 004.135-2.457c.779 1.438 2.337 2.457 4.074 2.457 2.577 0 4.674-2.037 4.674-4.613.06-2.457-2.037-4.495-4.613-4.495-1.738 0-3.295.959-4.074 2.397-.78-1.438-2.338-2.397-4.135-2.397-1.079 0-2.038.36-2.817.899V6.422a.92.92 0 00-.898-.899zM17.602 9.26a.95.95 0 00-.704.158c-.36.3-.479.899-.18 1.318l2.397 3.116-2.396 3.115c-.3.42-.24.96.18 1.26.419.3 1.016.298 1.316-.122l2.039-2.636 2.096 2.697c.3.36.899.419 1.318.12.36-.3.42-.84.121-1.259l-2.338-3.115 2.338-3.057c.3-.419.298-1.018-.121-1.318-.48-.3-1.019-.24-1.318.18l-2.096 2.576-2.04-2.695c-.149-.18-.373-.3-.612-.338zM4.613 11.154c1.558 0 2.817 1.26 2.817 2.758 0 1.558-1.259 2.756-2.817 2.756-1.558 0-2.816-1.198-2.816-2.756 0-1.498 1.258-2.758 2.816-2.758zm8.27 0c1.558 0 2.816 1.26 2.816 2.758-.06 1.558-1.318 2.756-2.816 2.756-1.558 0-2.817-1.198-2.817-2.756 0-1.498 1.259-2.758 2.817-2.758Z"},child:[]}]})(r)}function YR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M6 1.807L0 5.629l6 3.822 6.001-3.822L6 1.807zM18 1.807l-6 3.822 6 3.822 6-3.822-6-3.822zM0 13.274l6 3.822 6.001-3.822L6 9.452l-6 3.822zM18 9.452l-6 3.822 6 3.822 6-3.822-6-3.822zM6 18.371l6.001 3.822 6-3.822-6-3.822L6 18.371z"},child:[]}]})(r)}function WR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.01 1.485c-2.082 0-3.754.02-3.743.047.01.02 1.708 3.001 3.774 6.62l3.76 6.574h3.76c2.081 0 3.753-.02 3.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76 1.73a789.828 789.861 0 0 0-3.63 6.319L0 15.868l1.89 3.298 1.885 3.297 3.62-6.335 3.618-6.33-1.88-3.287C8.1 4.704 7.255 3.22 7.25 3.214zm2.259 12.653-.203.348c-.114.198-.96 1.672-1.88 3.287a423.93 423.948 0 0 1-1.698 2.97c-.01.026 3.24.042 7.222.042h7.244l1.796-3.157c.992-1.734 1.85-3.23 1.906-3.323l.104-.167h-7.249z"},child:[]}]})(r)}function XR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.164 7.93V5.084a2.198 2.198 0 001.267-1.978v-.067A2.2 2.2 0 0017.238.845h-.067a2.2 2.2 0 00-2.193 2.193v.067a2.196 2.196 0 001.252 1.973l.013.006v2.852a6.22 6.22 0 00-2.969 1.31l.012-.01-7.828-6.095A2.497 2.497 0 104.3 4.656l-.012.006 7.697 5.991a6.176 6.176 0 00-1.038 3.446c0 1.343.425 2.588 1.147 3.607l-.013-.02-2.342 2.343a1.968 1.968 0 00-.58-.095h-.002a2.033 2.033 0 102.033 2.033 1.978 1.978 0 00-.1-.595l.005.014 2.317-2.317a6.247 6.247 0 104.782-11.134l-.036-.005zm-.964 9.378a3.206 3.206 0 113.215-3.207v.002a3.206 3.206 0 01-3.207 3.207z"},child:[]}]})(r)}function KR(r){return Te({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M13.762 4.29a6.51 6.51 0 0 0-5.669 3.332 3.571 3.571 0 0 0-1.558-.36 3.571 3.571 0 0 0-3.516 3A4.918 4.918 0 0 0 0 14.796a4.918 4.918 0 0 0 4.92 4.914 4.93 4.93 0 0 0 .617-.045h14.42c2.305-.272 4.041-2.258 4.043-4.589v-.009a4.594 4.594 0 0 0-3.727-4.508 6.51 6.51 0 0 0-6.511-6.27z"},child:[]}]})(r)}const QR=[{name:"Google Drive",icon:WR,color:"#4285F4"},{name:"Dropbox",icon:YR,color:"#0061FE"},{name:"OneDrive",icon:$R,color:"#0078D4"},{name:"iCloud",icon:KR,color:"#3693F3"},{name:"Box",icon:qR,color:"#0061D5"},{name:"HubSpot",icon:XR,color:"#FF7A59"}],ZR=()=>y.jsx("section",{className:"px-6 py-24 bg-white",children:y.jsx("div",{className:"mx-auto w-full max-w-6xl",children:y.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-12",children:[y.jsxs("div",{className:"flex-1 space-y-8",children:[y.jsx(Tr,{eyebrow:"Integrations",title:"Connects with your workflow in one click",description:"DecoDocs integrates seamlessly with the tools you already use. Analyze documents directly from your cloud storage or email.",align:"left"}),y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"Works with all file types"]}),y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"Secure OAuth connection"]}),y.jsxs("div",{className:"flex items-center gap-3 text-slate-700 font-medium",children:[y.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-600 text-xs text-bold",children:""}),"No file duplication"]})]})]}),y.jsx("div",{className:"flex-1 flex justify-center",children:y.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-6",children:QR.map(r=>y.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-slate-50 border border-slate-100 rounded-2xl shadow-sm w-32 h-32 hover:shadow-md transition-shadow group",children:[y.jsx(r.icon,{size:40,color:r.color,className:"mb-3 transition-transform group-hover:scale-110"}),y.jsx("span",{className:"text-xs font-semibold text-slate-600",children:r.name})]},r.name))})})]})})}),JR=[{title:"Your data is never used for training",description:"We and our AI partners never use your documents to train models. Your data remains yours, contractually guaranteed.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"})})},{title:"Locked down, end-to-end",description:"Your data is encrypted at rest (AES-256) and in transit (TLS 1.3). Only you can access your documents.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})},{title:"Privacy-first architecture",description:"DecoDocs is built with privacy as a core principle. Anonymous mode never stores files on our servers.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})},{title:"Built for enterprise IT",description:"Single Sign-On (SSO), audit logs, and custom retention polices available for enterprise teams.",icon:y.jsx("svg",{className:"w-6 h-6 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}],eN=()=>y.jsx("section",{className:"px-6 py-24 bg-slate-50",children:y.jsxs("div",{className:"mx-auto w-full max-w-6xl flex flex-col gap-12",children:[y.jsx(Tr,{eyebrow:"Security",title:"Secure by design. Trusted by teams.",description:"We take security seriously. Your documents are your business, keeping them safe is ours.",align:"center"}),y.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:JR.map(r=>y.jsxs("div",{className:"bg-white p-8 rounded-3xl border border-slate-100 shadow-sm flex flex-col gap-4 hover:shadow-md transition-shadow",children:[y.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 flex items-center justify-center",children:r.icon}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:r.title}),y.jsx("p",{className:"text-slate-600 leading-relaxed",children:r.description})]})]},r.title))}),y.jsxs("div",{className:"mt-8 p-8 bg-slate-900 rounded-3xl text-white text-center",children:[y.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Ready to start?"}),y.jsx("p",{className:"text-slate-300 mb-8 max-w-2xl mx-auto",children:"Join thousands of professionals who trust DecoDocs to understand their documents faster."}),y.jsx("div",{className:"flex justify-center gap-4",children:y.jsx("a",{href:"#hero",className:"inline-flex items-center justify-center font-bold rounded-full px-8 py-4 text-base bg-white text-slate-900 hover:bg-slate-100 transition-colors",children:"Get Started for Free"})})]})]})}),tN=()=>{const r=Xi(),e=k.useRef(null),t=()=>{e.current&&e.current.click()},i=a=>{const o=a.target.files?.[0];if(o){if(o.type!=="application/pdf"){alert("Please select a valid PDF file"),a.target.value="";return}window.gtag&&window.gtag("event","home_open_pdf_click",{event_category:"engagement",event_label:"landing_open_pdf"}),r("/view",{state:{document:{id:Date.now()+Math.random(),name:o.name,size:o.size,type:o.type,file:o}}}),a.target.value=""}};return y.jsxs($f,{onOpenPdf:t,children:[y.jsx("input",{ref:e,type:"file",accept:".pdf,application/pdf",onChange:i,style:{display:"none"}}),y.jsx(FR,{onOpenPdf:t}),y.jsx(zR,{}),y.jsx(HR,{}),y.jsx(ZR,{}),y.jsx(VR,{}),y.jsx(GR,{}),y.jsx(eN,{})]})};const nN="type.googleapis.com/google.protobuf.Int64Value",iN="type.googleapis.com/google.protobuf.UInt64Value";function dx(r,e){const t={};for(const i in r)r.hasOwnProperty(i)&&(t[i]=e(r[i]));return t}function ru(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>ru(e));if(typeof r=="function"||typeof r=="object")return dx(r,e=>ru(e));throw new Error("Data cannot be encoded in JSON: "+r)}function br(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case nN:case iN:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>br(e)):typeof r=="function"||typeof r=="object"?dx(r,e=>br(e)):r}const kp="functions";const Yb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yt extends Ki{constructor(e,t,i){super(`${kp}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,Yt.prototype)}}function sN(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function ou(r,e){let t=sN(r),i=t,a;try{const o=e&&e.error;if(o){const c=o.status;if(typeof c=="string"){if(!Yb[c])return new Yt("internal","internal");t=Yb[c],i=c}const u=o.message;typeof u=="string"&&(i=u),a=o.details,a!==void 0&&(a=br(a))}}catch{}return t==="ok"?null:new Yt(t,i,a)}class aN{constructor(e,t,i,a){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,cn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||i.get().then(o=>this.messaging=o,()=>{}),this.appCheck||a?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),a=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:a}}}const qf="us-central1",rN=/^data: (.*?)(?:\n|$)/;function oN(r){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new Yt("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}class lN{constructor(e,t,i,a,o=qf,c=(...u)=>fetch(...u)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new aN(e,t,i,a),this.cancelAllRequests=new Promise(u=>{this.deleteService=()=>Promise.resolve(u())});try{const u=new URL(o);this.customDomain=u.origin+(u.pathname==="/"?"":u.pathname),this.region=qf}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function cN(r,e,t){const i=Er(e);r.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(sv(r.emulatorOrigin+"/backends"),av("Functions",!0))}function uN(r,e,t){const i=a=>hN(r,e,a,t||{});return i.stream=(a,o)=>pN(r,e,a,o),i}function hx(r){return r.emulatorOrigin&&Er(r.emulatorOrigin)?"include":void 0}async function dN(r,e,t,i,a){t["Content-Type"]="application/json";let o;try{o=await i(r,{method:"POST",body:JSON.stringify(e),headers:t,credentials:hx(a)})}catch{return{status:0,json:null}}let c=null;try{c=await o.json()}catch{}return{status:o.status,json:c}}async function fx(r,e){const t={},i=await r.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function hN(r,e,t,i){const a=r._url(e);return fN(r,a,t,i)}async function fN(r,e,t,i){t=ru(t);const a={data:t},o=await fx(r,i),c=i.timeout||7e4,u=oN(c),h=await Promise.race([dN(e,a,o,r.fetchImpl,r),u.promise,r.cancelAllRequests]);if(u.cancel(),!h)throw new Yt("cancelled","Firebase Functions instance was deleted.");const f=ou(h.status,h.json);if(f)throw f;if(!h.json)throw new Yt("internal","Response is not valid JSON object.");let p=h.json.data;if(typeof p>"u"&&(p=h.json.result),typeof p>"u")throw new Yt("internal","Response is missing data field.");return{data:br(p)}}function pN(r,e,t,i){const a=r._url(e);return mN(r,a,t,i||{})}async function mN(r,e,t,i){t=ru(t);const a={data:t},o=await fx(r,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let c;try{c=await r.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:o,signal:i?.signal,credentials:hx(r)})}catch(v){if(v instanceof Error&&v.name==="AbortError"){const E=new Yt("cancelled","Request was cancelled.");return{data:Promise.reject(E),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(E)}}}}}}const x=ou(0,null);return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}let u,h;const f=new Promise((v,x)=>{u=v,h=x});i?.signal?.addEventListener("abort",()=>{const v=new Yt("cancelled","Request was cancelled.");h(v)});const p=c.body.getReader(),g=gN(p,u,h,i?.signal);return{stream:{[Symbol.asyncIterator](){const v=g.getReader();return{async next(){const{value:x,done:E}=await v.read();return{value:x,done:E}},async return(){return await v.cancel(),{done:!0,value:void 0}}}}},data:f}}function gN(r,e,t,i){const a=(c,u)=>{const h=c.match(rN);if(!h)return;const f=h[1];try{const p=JSON.parse(f);if("result"in p){e(br(p.result));return}if("message"in p){u.enqueue(br(p.message));return}if("error"in p){const g=ou(0,p);u.error(g),t(g);return}}catch(p){if(p instanceof Yt){u.error(p),t(p);return}}},o=new TextDecoder;return new ReadableStream({start(c){let u="";return h();async function h(){if(i?.aborted){const f=new Yt("cancelled","Request was cancelled");return c.error(f),t(f),Promise.resolve()}try{const{value:f,done:p}=await r.read();if(p){u.trim()&&a(u.trim(),c),c.close();return}if(i?.aborted){const v=new Yt("cancelled","Request was cancelled");c.error(v),t(v),await r.cancel();return}u+=o.decode(f,{stream:!0});const g=u.split(`
`);u=g.pop()||"";for(const v of g)v.trim()&&a(v.trim(),c);return h()}catch(f){const p=f instanceof Yt?f:ou(0,null);c.error(p),t(p)}}},cancel(){return r.cancel()}})}const Wb="@firebase/functions",Xb="0.13.1";const yN="auth-internal",bN="app-check-internal",vN="messaging-internal";function xN(r){const e=(t,{instanceIdentifier:i})=>{const a=t.getProvider("app").getImmediate(),o=t.getProvider(yN),c=t.getProvider(vN),u=t.getProvider(bN);return new lN(a,o,c,u,i)};yr(new la(kp,e,"PUBLIC").setMultipleInstances(!0)),ks(Wb,Xb,r),ks(Wb,Xb,"esm2020")}function px(r=yp(),e=qf){const i=gp(un(r),kp).getImmediate({identifier:e}),a=_E("functions");return a&&mx(i,...a),i}function mx(r,e,t){cN(un(r),e,t)}function mi(r,e,t){return uN(un(r),e,t)}xN();const gx=Object.freeze(Object.defineProperty({__proto__:null,FunctionsError:Yt,connectFunctionsEmulator:mx,getFunctions:px,httpsCallable:mi},Symbol.toStringTag,{value:"Module"})),Hn=({children:r,showHeader:e=!0,showFooter:t=!0,variant:i="marketing"})=>{const{authState:a}=yi();a.status==="error"&&a.error?.message;const o=i==="app";return y.jsxs("div",{className:`min-h-screen bg-[#f7f6f2] text-slate-900 flex flex-col ${o?"h-screen overflow-hidden":""}`,children:[e&&y.jsx(ux,{variant:i}),y.jsx("main",{className:"flex-1 flex flex-col min-h-0",children:r}),t?y.jsx(K1,{}):null]})},yx=({onFileSelect:r,onEdit:e,pageNumber:t,numPages:i,pageScale:a,onPreviousPage:o,onNextPage:c,onZoomIn:u,onZoomOut:h,fileInputRef:f})=>y.jsxs("div",{id:"viewer-page-controls",className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-slate-800/85 backdrop-blur-md px-3 py-1.5 rounded-full shadow-lg border border-white/10 z-30 text-white text-xs",children:[y.jsx("button",{onClick:()=>f.current?.click(),className:"p-1 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Open PDF",children:y.jsx(Dp,{className:"w-3.5 h-3.5"})}),y.jsx("div",{className:"w-px h-3.5 bg-white/20"}),y.jsx("button",{onClick:o,disabled:t<=1,className:"p-0.5 bg-transparent rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors text-white",children:y.jsx(tx,{className:"w-3.5 h-3.5"})}),y.jsxs("span",{className:"font-medium text-white min-w-[3ch] text-center select-none tabular-nums",children:[t," ",y.jsxs("span",{className:"text-slate-400",children:["/ ",i||"-"]})]}),y.jsx("button",{onClick:c,disabled:t>=i,className:"p-0.5 bg-transparent rounded-full hover:bg-white/10 disabled:opacity-30 transition-colors text-white",children:y.jsx(nx,{className:"w-3.5 h-3.5"})}),y.jsx("div",{className:"w-px h-3.5 bg-white/20"}),y.jsx("button",{onClick:h,className:"p-0.5 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Zoom Out",children:y.jsx(UR,{className:"w-3.5 h-3.5"})}),y.jsxs("span",{className:"font-medium text-slate-400 w-8 text-center select-none tabular-nums",children:[Math.round(a*100),"%"]}),y.jsx("button",{onClick:u,className:"p-0.5 bg-transparent text-slate-300 hover:text-white hover:bg-white/10 rounded-full transition-colors",title:"Zoom In",children:y.jsx(BR,{className:"w-3.5 h-3.5"})}),y.jsx("input",{type:"file",ref:f,accept:".pdf",onChange:r,className:"hidden"})]}),wN=(r,e)=>{const t=k.useRef(null),i=k.useRef(null),a=k.useRef(null),o=p=>{alert(`Clause: ${p.text}

${p.details||"No details available."}`)},c=p=>{alert(`Risk: ${p.description}

${p.explanation||"No explanation available."}`)},u=k.useCallback(async(p,g)=>{if(i.current){i.current.innerHTML="";try{const x=(await p.getTextContent()).items,E=g.transform;for(const w of x){const S=document.createElement("span");S.textContent=w.str,S.style.position="absolute",S.style.color="transparent",S.style.whiteSpace="pre",S.style.fontSize=`${w.height}px`,S.style.fontFamily="sans-serif",S.style.lineHeight="1";const _=E[0]*w.transform[4]+E[2]*w.transform[5]+E[4],C=E[1]*w.transform[4]+E[3]*w.transform[5]+E[5];S.style.left=`${_}px`,S.style.top=`${C}px`,S.style.width=`${w.width*E[0]}px`,S.style.height=`${w.height*E[3]}px`,i.current.appendChild(S)}}catch(v){console.error("Error rendering text layer:",v)}}},[]),h=k.useCallback((p,g,v,x,E)=>{a.current&&(a.current.innerHTML="",v.filter(w=>w.pageNum===p).forEach(w=>{const S=document.createElement("div");S.className="highlight-overlay",S.style.position="absolute",S.style.backgroundColor="rgba(255, 255, 0, 0.3)",S.style.border="1px solid rgba(255, 255, 0, 0.5)",S.style.left=`${w.x}px`,S.style.top=`${w.y}px`,S.style.width=`${w.width}px`,S.style.height=`${w.height}px`,S.style.pointerEvents="none",S.dataset.page=p,a.current.appendChild(S)}),x.filter(w=>w.pageNum===p).forEach(w=>{const S=document.createElement("div");S.className="clause-marker",S.style.position="absolute",S.style.left=`${w.x}px`,S.style.top=`${w.y}px`,S.style.width="20px",S.style.height="20px",S.style.borderRadius="50%",S.style.backgroundColor="rgba(0, 123, 255, 0.7)",S.style.cursor="pointer",S.style.zIndex="10",S.title=w.text,S.onclick=()=>o(w),a.current.appendChild(S)}),E.filter(w=>w.pageNum===p).forEach(w=>{const S=document.createElement("div");S.className="risk-badge",S.style.position="absolute",S.style.left=`${w.x}px`,S.style.top=`${w.y}px`,S.style.padding="2px 6px",S.style.borderRadius="10px",S.style.fontSize="12px",S.style.fontWeight="bold",S.style.color="white",S.style.backgroundColor=w.level==="high"?"#dc3545":w.level==="medium"?"#fd7e14":"#ffc107",S.style.cursor="pointer",S.style.zIndex="10",S.title=w.description,S.onclick=()=>c(w),S.textContent=w.level.toUpperCase(),a.current.appendChild(S)}))},[]),f=k.useCallback(async(p,g=[],v=[],x=[])=>{if(!(!r||!t.current))try{const E=await r.getPage(p),w=t.current,S=w.getContext("2d"),_=e,C=E.getViewport({scale:_});w.height=C.height,w.width=C.width,S.clearRect(0,0,w.width,w.height);const T={canvasContext:S,viewport:C};await E.render(T).promise,await u(E,C),h(p,C,g,v,x)}catch(E){console.error("Error rendering page:",E)}},[r,e,u,h]);return{canvasRef:t,textLayerRef:i,annotationsRef:a,renderPage:f}},AN=({pdfDoc:r,pageNum:e,scale:t,highlights:i=[],clauseMarkers:a=[],riskBadges:o=[],id:c,children:u})=>{const{canvasRef:h,textLayerRef:f,annotationsRef:p,renderPage:g}=wN(r,t);return k.useEffect(()=>{r&&e&&g(e,i,a,o)},[r,e,t,i,a,o,g]),y.jsxs("div",{id:c,className:"relative bg-white shadow-lg mb-8 transition-transform origin-top",style:{width:"fit-content",height:"fit-content"},children:[y.jsx("canvas",{ref:h,className:"block"}),y.jsx("div",{ref:f,className:"absolute top-0 left-0 w-full h-full overflow-hidden opacity-0 leading-none"}),y.jsx("div",{ref:p,className:"absolute top-0 left-0 w-full h-full pointer-events-none"}),u]})},bx=({pdfDoc:r,numPages:e,pageScale:t,isLoading:i,loadingMessage:a,onPageVisible:o,highlights:c=[],clauseMarkers:u=[],riskBadges:h=[],renderPageOverlay:f})=>{const p=k.useRef(null);return k.useEffect(()=>{if(!r||!p.current||!o)return;const g=new IntersectionObserver(x=>{x.forEach(E=>{if(E.isIntersecting){const w=parseInt(E.target.getAttribute("data-page-num"),10);o(w)}})},{root:p.current,threshold:.5});return p.current.querySelectorAll(".page-wrapper").forEach(x=>g.observe(x)),()=>g.disconnect()},[r,e,o]),i?y.jsx("div",{className:"flex-1 flex items-center justify-center border border-dashed border-gray-300 rounded bg-gray-50 text-gray-600 h-full",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"w-10 h-10 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),y.jsx("p",{children:a||"Loading PDF..."})]})}):r?y.jsx("div",{className:"flex flex-col items-center gap-8 py-8 w-full",children:Array.from({length:e},(g,v)=>v+1).map(g=>y.jsx("div",{className:"page-wrapper","data-page-num":g,children:y.jsx(AN,{id:`pdf-page-${g}`,pdfDoc:r,pageNum:g,scale:t,highlights:c,clauseMarkers:u,riskBadges:h,children:f?f(g):null})},g))}):null},vx=({onFileSelect:r})=>{const[e,t]=k.useState(!1),i=k.useRef(null),a=u=>{u.preventDefault(),t(!0)},o=u=>{u.preventDefault(),t(!1)},c=u=>{u.preventDefault(),t(!1),u.dataTransfer.files&&u.dataTransfer.files.length>0&&r({target:{files:u.dataTransfer.files}})};return y.jsxs("div",{className:`flex flex-col items-center justify-center w-full max-w-2xl mx-auto h-96 border-2 border-dashed rounded-3xl transition-all duration-300 ${e?"border-blue-500 bg-blue-50/50 scale-105 shadow-xl":"border-slate-300 bg-white/50 hover:border-blue-400 hover:bg-slate-50"}`,onDragOver:a,onDragLeave:o,onDrop:c,children:[y.jsx("div",{className:`p-6 rounded-full mb-6 transition-colors ${e?"bg-blue-100 text-blue-600":"bg-slate-100 text-slate-400"}`,children:y.jsx(ix,{className:"w-16 h-16"})}),y.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Upload a PDF to start"}),y.jsx("p",{className:"text-slate-500 mb-8 text-center max-w-md px-4",children:"Drag and drop your file here, or click the button below to browse your computer."}),y.jsxs("button",{onClick:()=>i.current?.click(),className:"px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-600/20 transition-all hover:-translate-y-1 active:translate-y-0 flex items-center gap-3",children:[y.jsx(RR,{className:"w-6 h-6"}),"Choose File"]}),y.jsx("input",{type:"file",ref:i,onChange:r,accept:".pdf",className:"hidden"})]})},SN=({pdfDoc:r,pageNum:e,onClick:t,isActive:i})=>{const a=k.useRef(null);return k.useEffect(()=>{if(!r||!a.current)return;(async()=>{try{const c=await r.getPage(e),u=c.getViewport({scale:.15}),h=a.current,f=h.getContext("2d");h.height=u.height,h.width=u.width,await c.render({canvasContext:f,viewport:u}).promise}catch{}})()},[r,e]),y.jsxs("button",{id:`thumb-${e}`,onClick:t,className:`flex flex-col items-center gap-1 w-full rounded-md p-1 transition-all ${i?"bg-blue-50 ring-1 ring-blue-400":"hover:bg-slate-100"}`,children:[y.jsx("div",{className:"shadow-sm bg-white rounded-sm overflow-hidden",children:y.jsx("canvas",{ref:a,className:"block w-16 h-auto"})}),y.jsx("span",{className:`text-[10px] tabular-nums ${i?"text-blue-600 font-semibold":"text-slate-400"}`,children:e})]})},xx=({pdfDoc:r,numPages:e,currentPage:t,onPageClick:i})=>!r||!e?null:y.jsx("div",{id:"viewer-thumbnails",className:"w-24 bg-white/80 backdrop-blur-sm border-r border-slate-200/60 h-full overflow-y-auto py-2 px-1.5 flex flex-col gap-1",children:Array.from({length:e},(a,o)=>o+1).map(a=>y.jsx(SN,{pdfDoc:r,pageNum:a,isActive:t===a,onClick:()=>i(a)},a))}),EN=({risk:r})=>{const e=i=>{switch(i){case"high":return"bg-red-600";case"medium":return"bg-orange-500";case"low":return"bg-yellow-500";default:return"bg-gray-500"}},t=i=>{switch(i){case"high":return"border-l-red-600";case"medium":return"border-l-orange-500";case"low":return"border-l-yellow-500";default:return"border-l-gray-500"}};return y.jsxs("div",{className:`mb-3 border border-gray-300 rounded overflow-hidden ${t(r.riskLevel)}`,children:[y.jsxs("div",{className:"flex justify-between items-center p-2.5 bg-gray-50",children:[y.jsx("h6",{className:"m-0 text-gray-700 font-semibold",children:r.clause}),y.jsx("span",{className:`px-2 py-0.5 rounded-xl text-xs font-bold text-white ${e(r.riskLevel)}`,children:r.riskLevel.toUpperCase()})]}),y.jsxs("div",{className:"p-2.5 bg-white",children:[y.jsxs("p",{className:"mb-2",children:[y.jsx("strong",{children:"Risk:"})," ",r.description]}),y.jsxs("p",{className:"m-0",children:[y.jsx("strong",{children:"Plain Language:"})," ",r.explanation]})]})]})},_N=({analysis:r})=>{const e=r?._meta||{status:r?"success":"idle"};if(!r||e.status==="idle")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsx("p",{className:"text-gray-700 m-0",children:"No analysis yet. Run Type-specific analysis (recommended) to see results here."})]});if(e.status==="loading")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[y.jsx("div",{className:"w-5 h-5 border-2 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),y.jsx("div",{children:e.message||"Analyzing"})]})]});if(e.status==="error")return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),y.jsxs("div",{className:"rounded border border-red-200 bg-red-50 p-3 text-sm text-red-900",children:[y.jsx("div",{className:"font-semibold",children:"Analysis failed"}),y.jsx("div",{className:"mt-1",children:e.message||"Request failed."})]})]});const t=typeof r.summary=="string"&&r.summary.trim().length>0,i=Array.isArray(r.risks)&&r.risks.length>0,a=Array.isArray(r.recommendations)&&r.recommendations.length>0;return y.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-md mt-2.5",children:[y.jsx("h4",{className:"mt-0 text-gray-800 border-b border-gray-300 pb-2",children:"Analysis Results"}),!t&&!r.typeSpecific?y.jsx("p",{className:"text-gray-700 m-0",children:"No results were returned yet."}):null,t&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Document Summary"}),y.jsx("p",{className:"text-gray-700",children:r.summary})]}),i&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Identified Risks"}),r.risks.map(o=>y.jsx(EN,{risk:o},o.id))]}),r.typeSpecific&&y.jsxs("div",{className:"mb-4",children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Type-specific (beta)"}),y.jsxs("div",{className:"text-gray-700",style:{whiteSpace:"pre-wrap"},children:[y.jsxs("div",{children:[y.jsx("strong",{children:"effectiveTypeId:"})," ",r.typeSpecific.effectiveTypeId||""]}),y.jsxs("div",{children:[y.jsx("strong",{children:"validationSlug:"})," ",r.typeSpecific.validationSlug||""]}),y.jsxs("div",{children:[y.jsx("strong",{children:"validationTitle:"})," ",r.typeSpecific.validationTitle||""]}),r.typeSpecific.result?.plainExplanation?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"explanation:"}),y.jsx("div",{children:r.typeSpecific.result.plainExplanation})]}):null,r.typeSpecific.usage?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"usage:"}),y.jsxs("div",{children:["estimatedTokens: ",r.typeSpecific.usage.estimatedTokens??"","  ","remainingTokens: ",r.typeSpecific.usage.remainingTokens??""]})]}):null,r.typeSpecific.ok===!1&&(r.typeSpecific.code||r.typeSpecific.requiredTier)?y.jsxs("div",{style:{marginTop:8,color:"#991b1b"},children:[y.jsx("strong",{children:"blocked:"})," ",r.typeSpecific.code||"",r.typeSpecific.requiredTier?` (required: ${r.typeSpecific.requiredTier})`:""]}):null,r.typeSpecific.result?.checks?.length?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"checks:"}),y.jsx("ul",{className:"list-none p-0",style:{marginTop:6},children:r.typeSpecific.result.checks.map(o=>y.jsx("li",{className:"mb-2 p-2 border border-gray-200 rounded",children:y.jsxs("div",{children:[y.jsxs("strong",{children:[o.ok?"OK":"FAIL",":"]})," ",o.message]})},o.id))})]}):null,r.typeSpecific.result?.extracted&&Object.keys(r.typeSpecific.result.extracted).length?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"extracted:"}),y.jsx("pre",{style:{marginTop:6,background:"#f8fafc",border:"1px solid #e2e8f0",padding:10,borderRadius:10,overflow:"auto"},children:JSON.stringify(r.typeSpecific.result.extracted,null,2)})]}):null,r.typeSpecific.message?y.jsxs("div",{style:{marginTop:8},children:[y.jsx("strong",{children:"message:"}),y.jsx("div",{children:r.typeSpecific.message})]}):null]})]}),a&&y.jsxs("div",{children:[y.jsx("h5",{className:"mt-0 text-gray-700 font-semibold mb-2",children:"Recommendations"}),y.jsx("ul",{className:"list-none p-0",children:r.recommendations.map((o,c)=>y.jsx("li",{className:"mb-4 p-2.5 border border-gray-300 rounded",children:y.jsx("div",{className:"text-gray-700",children:o})},c))})]})]})},TN=({isOpen:r,onToggle:e,onAnalyzeDocument:t,onAnalyzeByType:i,onExplainSelection:a,onHighlightRisks:o,onTranslateToPlainEnglish:c,isLoading:u,isAuthenticated:h,hasDocument:f,selectedDocument:p,analysisResults:g})=>{const[v,x]=k.useState("tools");wn.useEffect(()=>{p&&g[p.id]&&x("results")},[g,p]);const E=!f||!h||u;return r?y.jsxs("div",{className:"w-[350px] bg-white border-l border-slate-200 flex flex-col h-full shadow-xl transition-all relative z-20",children:[y.jsxs("div",{className:"h-14 border-b border-slate-200 flex items-center justify-between px-4 bg-slate-50/50",children:[y.jsxs("h3",{className:"font-semibold text-slate-800 flex items-center gap-2",children:[y.jsx(Au,{className:"text-purple-600"}),"AI Assistant"]}),y.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-200 rounded",children:y.jsx(nx,{className:"w-5 h-5 text-slate-500"})})]}),y.jsxs("div",{className:"flex border-b border-slate-200",children:[y.jsx("button",{onClick:()=>x("tools"),className:`flex-1 py-3 text-sm font-medium transition-colors ${v==="tools"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:bg-slate-50"}`,children:"Tools"}),y.jsx("button",{onClick:()=>x("results"),disabled:!p||!g[p.id],className:`flex-1 py-3 text-sm font-medium transition-colors ${v==="results"?"text-purple-600 border-b-2 border-purple-600 bg-purple-50/50":"text-slate-600 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:"Results"})]}),y.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:v==="tools"?y.jsxs("div",{className:"flex flex-col gap-3",children:[!f&&y.jsx("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-100 text-center text-sm text-slate-500",children:"Open a document to use AI tools"}),f&&!h&&y.jsx("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-100 text-sm text-amber-800",children:"Sign in to use AI features."}),y.jsx(xf,{icon:NR,label:"Deep Analysis",sublabel:"Identify risks, obligations & summary",onClick:()=>{i(),x("results")},disabled:E,primary:!0}),y.jsx("div",{className:"h-px bg-slate-100 my-2"}),y.jsx(xf,{icon:kR,label:"Highlight Risks",onClick:o,disabled:E}),y.jsx(xf,{icon:IR,label:"Plain English",onClick:c,disabled:E})]}):y.jsx("div",{className:"prose prose-sm",children:p&&g[p.id]?y.jsx(_N,{analysis:g[p.id]}):y.jsx("div",{className:"text-center text-slate-500 mt-10",children:"No analysis results yet. Run a tool to see output here."})})})]}):y.jsx("button",{onClick:e,className:"absolute right-0 top-1/2 -translate-y-1/2 bg-white border border-slate-200 rounded-l-lg p-2 shadow-md hover:bg-slate-50 z-20",title:"Open AI Sidebar",children:y.jsx(tx,{className:"w-5 h-5 text-slate-600"})})},xf=({icon:r,label:e,sublabel:t,onClick:i,disabled:a,primary:o})=>y.jsxs("button",{onClick:i,disabled:a,className:`w-full flex items-start gap-3 p-3 rounded-xl border text-left transition-all ${o?"bg-slate-900 border-slate-900 text-white hover:bg-slate-800 shadow-md":"bg-white border-slate-200 text-slate-700 hover:border-slate-300 hover:bg-slate-50"} ${a?"opacity-50 cursor-not-allowed":""}`,children:[y.jsx("div",{className:`p-2 rounded-lg ${o?"bg-white/10":"bg-slate-100"} shrink-0`,children:y.jsx(r,{className:`w-5 h-5 ${o?"text-white":"text-slate-600"}`})}),y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold text-sm",children:e}),t&&y.jsx("div",{className:`text-xs mt-0.5 ${o?"text-slate-300":"text-slate-500"}`,children:t})]})]}),Yf=[{id:"dancing-script",label:"Dancing Script",family:"'Dancing Script', cursive"},{id:"great-vibes",label:"Great Vibes",family:"'Great Vibes', cursive"},{id:"allura",label:"Allura",family:"'Allura', cursive"},{id:"parisienne",label:"Parisienne",family:"'Parisienne', cursive"},{id:"sacramento",label:"Sacramento",family:"'Sacramento', cursive"},{id:"alex-brush",label:"Alex Brush",family:"'Alex Brush', cursive"}];let Kb=!1;function CN(){if(Kb)return;Kb=!0;const r=Yf.map(t=>t.label.replace(/ /g,"+")).join("&family="),e=document.createElement("link");e.rel="stylesheet",e.href=`https://fonts.googleapis.com/css2?family=${r}&display=swap`,document.head.appendChild(e)}function RN({displayName:r,font:e}){return{version:1,kind:"type",displayName:r,fontId:e.id,fontFamily:e.family,createdAt:new Date().toISOString()}}const NN=({onResult:r})=>{const e=k.useRef(null),[t,i]=k.useState(!1),[a,o]=k.useState(!1),c=()=>e.current?.getContext("2d"),u=k.useCallback(v=>{const x=c();if(!x)return;i(!0);const E=e.current.getBoundingClientRect(),w=(v.clientX??v.touches?.[0]?.clientX)-E.left,S=(v.clientY??v.touches?.[0]?.clientY)-E.top;x.beginPath(),x.moveTo(w,S)},[]),h=k.useCallback(v=>{if(!t)return;const x=c();if(!x)return;v.preventDefault();const E=e.current.getBoundingClientRect(),w=(v.clientX??v.touches?.[0]?.clientX)-E.left,S=(v.clientY??v.touches?.[0]?.clientY)-E.top;x.lineTo(w,S),x.stroke(),o(!0)},[t]),f=k.useCallback(()=>{i(!1)},[]),p=()=>{const v=c();v&&(v.clearRect(0,0,e.current.width,e.current.height),o(!1),r(null))},g=()=>{if(!a)return;const v=e.current.toDataURL("image/png");r({mode:"draw",dataUrl:v,width:200,height:60,persistence:{kind:"ephemeral-data-url",canPersist:!1,reason:"free-tier-no-server-storage"}})};return k.useEffect(()=>{const v=c();v&&(v.strokeStyle="#1e293b",v.lineWidth=2.5,v.lineCap="round",v.lineJoin="round")},[]),y.jsxs("div",{className:"flex flex-col gap-3",children:[y.jsxs("div",{className:"relative border border-slate-200 rounded-lg bg-white overflow-hidden",children:[y.jsx("canvas",{ref:e,width:440,height:140,className:"w-full cursor-crosshair touch-none",onMouseDown:u,onMouseMove:h,onMouseUp:f,onMouseLeave:f,onTouchStart:u,onTouchMove:h,onTouchEnd:f}),!a&&y.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-slate-300 text-sm pointer-events-none select-none",children:"Draw your signature here"}),y.jsx("div",{className:"absolute bottom-8 left-4 right-4 border-b border-dashed border-slate-200 pointer-events-none"})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[y.jsx(cx,{className:"w-3.5 h-3.5"})," Clear"]}),y.jsx("button",{onClick:g,disabled:!a,className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})]})]})},DN=({onResult:r})=>{const[e,t]=k.useState(""),[i,a]=k.useState(Yf[0]);k.useEffect(()=>{CN()},[]);const o=()=>{if(!e.trim())return;const c=e.trim();r({mode:"type",text:c,fontFamily:i.family,fontId:i.id,width:200,height:50,persistence:{kind:"candidate-profile",canPersist:!0,target:"firestore-signature-profiles"},profileDraft:RN({displayName:c,font:i})})};return y.jsxs("div",{className:"flex flex-col gap-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-1",children:"Your name"}),y.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Full name",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent",autoFocus:!0})]}),y.jsx("div",{className:"border border-slate-200 rounded-lg bg-white p-6 min-h-[90px] flex items-center justify-center",children:e.trim()?y.jsx("span",{className:"text-3xl text-slate-800 select-none",style:{fontFamily:i.family},children:e}):y.jsx("span",{className:"text-slate-300 text-sm",children:"Preview"})}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs font-medium text-slate-600 mb-2",children:"Style"}),y.jsx("div",{className:"grid grid-cols-3 gap-2",children:Yf.map(c=>y.jsxs("button",{onClick:()=>a(c),className:`px-3 py-2.5 rounded-lg border text-left transition-all ${i.id===c.id?"border-blue-500 bg-blue-50 ring-1 ring-blue-400":"border-slate-200 hover:border-slate-300 hover:bg-slate-50"}`,children:[y.jsx("span",{className:"text-lg text-slate-700 block truncate",style:{fontFamily:c.family},children:e.trim()||"Signature"}),y.jsx("span",{className:"text-[10px] text-slate-400 mt-0.5 block",children:c.label})]},c.id))})]}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:o,disabled:!e.trim(),className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})})]})},kN=({onResult:r})=>{const[e,t]=k.useState(null),[i,a]=k.useState(null),o=k.useRef(null),c=f=>{const p=f.target.files?.[0];if(!p||!p.type.startsWith("image/"))return;const g=new FileReader;g.onload=()=>{t(g.result),a({fileName:p.name,mimeType:p.type||null,sizeBytes:p.size||null})},g.readAsDataURL(p)},u=()=>{e&&r({mode:"upload",dataUrl:e,width:200,height:60,uploadMeta:i,persistence:{kind:"ephemeral-data-url",canPersist:!1,reason:"free-tier-no-server-storage"}})},h=()=>{t(null),a(null),o.current&&(o.current.value=""),r(null)};return y.jsxs("div",{className:"flex flex-col gap-3",children:[e?y.jsx("div",{className:"border border-slate-200 rounded-lg bg-white p-4 flex items-center justify-center min-h-[140px]",children:y.jsx("img",{src:e,alt:"Signature",className:"max-h-[120px] max-w-full object-contain"})}):y.jsxs("button",{onClick:()=>o.current?.click(),className:"border-2 border-dashed border-slate-300 rounded-lg bg-slate-50 hover:bg-slate-100 p-8 flex flex-col items-center gap-2 transition-colors cursor-pointer",children:[y.jsx(wu,{className:"w-8 h-8 text-slate-400"}),y.jsx("span",{className:"text-sm text-slate-500",children:"Click to upload signature image"}),y.jsx("span",{className:"text-[10px] text-slate-400",children:"PNG, JPG, or SVG  transparent background recommended"})]}),y.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:c,className:"hidden"}),y.jsxs("div",{className:"flex items-center justify-between",children:[e&&y.jsxs("button",{onClick:h,className:"flex items-center gap-1 px-3 py-1.5 text-xs text-slate-500 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[y.jsx(cx,{className:"w-3.5 h-3.5"})," Remove"]}),y.jsx("div",{className:"flex-1"}),y.jsx("button",{onClick:u,disabled:!e,className:"flex items-center gap-1.5 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-slate-200 disabled:text-slate-400 text-white text-sm font-semibold rounded-lg transition-colors",children:"Adopt signature"})]})]})},MN=[{id:"draw",label:"Draw",icon:Np},{id:"type",label:"Type",icon:Rp},{id:"upload",label:"Upload",icon:wu}],LN=({open:r,onClose:e,onAdopt:t,savedSignatures:i=[]})=>{const[a,o]=k.useState("draw");if(!r)return null;const c=u=>{u&&(t(u),e())};return y.jsx("div",{id:"signature-modal-backdrop",className:"fixed inset-0 bg-slate-900/40 flex items-center justify-center z-[2000] p-4",onClick:e,children:y.jsxs("div",{id:"signature-modal",className:"bg-white rounded-2xl border border-slate-200 shadow-2xl w-full max-w-[520px] max-h-[90vh] overflow-y-auto",onClick:u=>u.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-slate-100",children:[y.jsx("h2",{className:"text-base font-bold text-slate-900",children:"Create your signature"}),y.jsx("button",{onClick:e,className:"p-1.5 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors",children:y.jsx(jR,{className:"w-5 h-5"})})]}),y.jsx("div",{className:"mx-5 mt-4 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-[11px] leading-relaxed text-amber-800",children:"Self-sign only in this version. No multi-party recipients, signee roles, or signing order are supported."}),y.jsx("div",{className:"flex border-b border-slate-100",children:MN.map(u=>{const h=u.icon,f=a===u.id;return y.jsxs("button",{onClick:()=>o(u.id),className:`flex-1 flex items-center justify-center gap-1.5 py-3 text-sm font-medium transition-colors ${f?"text-blue-600 border-b-2 border-blue-600":"text-slate-400 hover:text-slate-600"}`,children:[y.jsx(h,{className:"w-4 h-4"}),u.label]},u.id)})}),y.jsxs("div",{className:"p-5",children:[a==="draw"&&y.jsx(NN,{onResult:c}),a==="type"&&y.jsx(DN,{onResult:c}),a==="upload"&&y.jsx(kN,{onResult:c})]}),y.jsx("div",{className:"px-5 pb-4 text-[11px] text-slate-400 leading-snug",children:"Consent: By adopting this signature, you confirm this is for your own self-sign use and that you are authorized to create and apply it."})]})})},st={UNREADABLE:"UNREADABLE",GENERAL:"GENERAL",BUSINESS_LEGAL:"BUSINESS_LEGAL"},ON=[{id:"unreadable_broken",label:"Unreadable / broken file",category:st.UNREADABLE,synonyms:["corrupt","broken","invalid pdf","cannot open","damaged"]},{id:"unreadable_encrypted",label:"Password-protected / encrypted",category:st.UNREADABLE,synonyms:["encrypted","password","protected"]},{id:"unreadable_empty",label:"Empty / blank document",category:st.UNREADABLE,synonyms:["blank","empty","no text"]},{id:"general_letter",label:"Letter (general / personal)",category:st.GENERAL,synonyms:["letter","correspondence","personal letter"]},{id:"general_police_letter",label:"Police letter / notice",category:st.GENERAL,synonyms:["police","notice","infringement","fine","offence"]},{id:"general_presentation",label:"Presentation / pitch deck",category:st.GENERAL,synonyms:["deck","slides","presentation","pitch"]},{id:"general_marketing",label:"Flyer / advertisement / marketing",category:st.GENERAL,synonyms:["flyer","ad","advertisement","brochure","marketing"]},{id:"general_book",label:"Book / long-form text",category:st.GENERAL,synonyms:["book","chapter","novel","story","longform"]},{id:"general_notes",label:"Notes / diary / journal",category:st.GENERAL,synonyms:["notes","diary","journal","private notes"]},{id:"general_schedule",label:"Schedule / timetable",category:st.GENERAL,synonyms:["schedule","timetable","calendar","rota"]},{id:"general_sop_procedure",label:"SOP / procedure",category:st.GENERAL,synonyms:["sop","procedure","runbook","work instruction","instructions","guide"],validationSlug:"sop-procedure"},{id:"general_resume_cv",label:"Resume / CV",category:st.GENERAL,synonyms:["resume","cv","curriculum vitae","work experience","education","skills"]},{id:"legal_job_offer",label:"Job offer / offer letter",category:st.BUSINESS_LEGAL,synonyms:["offer letter","job offer","employment offer","compensation","salary","starting date"],validationSlug:"job-offer"},{id:"legal_contract_generic",label:"Contract / agreement (general)",category:st.BUSINESS_LEGAL,synonyms:["agreement","contract","terms","conditions"]},{id:"legal_employment_contract",label:"Employment contract",category:st.BUSINESS_LEGAL,synonyms:["employment","employee","employer","salary","position"]},{id:"legal_nda",label:"NDA / confidentiality agreement",category:st.BUSINESS_LEGAL,synonyms:["nda","non-disclosure","confidentiality"]},{id:"legal_lease_residential",label:"Residential lease / tenancy agreement",category:st.BUSINESS_LEGAL,synonyms:["lease","tenancy","rent","bond","landlord","tenant"]},{id:"legal_lease_commercial",label:"Commercial lease",category:st.BUSINESS_LEGAL,synonyms:["commercial lease","premises","outgoings"]},{id:"business_invoice",label:"Invoice",category:st.BUSINESS_LEGAL,synonyms:["invoice","tax invoice","payment due"],validationSlug:"invoice"},{id:"business_purchase_order",label:"Purchase order",category:st.BUSINESS_LEGAL,synonyms:["purchase order","po","order"]},{id:"policy_privacy",label:"Privacy policy",category:st.BUSINESS_LEGAL,synonyms:["privacy policy","personal information","data collection"],validationSlug:"company-policy"},{id:"policy_terms",label:"Terms of service / website terms",category:st.BUSINESS_LEGAL,synonyms:["terms of service","terms","conditions","website terms"]}];function wx(){const[r,e]=k.useState(null);k.useEffect(()=>{let o=!1;return(async()=>{try{const u=await fetch("/classifications/document-types.index.json",{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to load document types: ${u.status}`);const h=await u.json(),f=Array.isArray(h?.types)?h.types:null;if(f)for(const p of f)"validationSlug"in p||(p.validationSlug=null);if(!f)throw new Error("Invalid document-types.index.json");o||e(f)}catch{o||e(null)}})(),()=>{o=!0}},[]);const t=k.useMemo(()=>Array.isArray(r)&&r.length?r:ON,[r]),i=k.useMemo(()=>o=>{const c=String(o||"").trim().toLowerCase();if(!c)return t;const u=h=>{const f=String(h.label||"").toLowerCase(),p=Array.isArray(h.synonyms)?h.synonyms.join(" ").toLowerCase():"";if(f.includes(c))return 100;if(p.includes(c))return 80;const g=c.split(/\s+/).filter(Boolean);return g.length&&g.every(v=>f.includes(v)||p.includes(v))?60:0};return t.map(h=>({t:h,s:u(h)})).filter(h=>h.s>0).sort((h,f)=>f.s-h.s).map(h=>h.t)},[t]);return{types:t,find:i,categories:st,source:Array.isArray(r)&&r.length?"remote":"bundled"}}const IN=(r,e)=>r===e.BUSINESS_LEGAL?"Business & legal":r===e.GENERAL?"General documents":r===e.UNREADABLE?"Unreadable / special cases":"Other";function PN({open:r,onClose:e,detectedType:t,onPick:i}){const[a,o]=k.useState(""),[c,u]=k.useState(0),h=k.useRef(null),{types:f,find:p,categories:g,source:v}=wx();k.useEffect(()=>{r&&(o(""),u(0),setTimeout(()=>h.current?.focus(),0))},[r]);const x=k.useMemo(()=>{const C=p(a);return a?C.slice(0,30):f.slice(0,25)},[a,p,f]),E=k.useMemo(()=>{const C=new Map;for(const T of x){const N=T.category;C.has(N)||C.set(N,[]),C.get(N).push(T)}return Array.from(C.entries())},[x]),w=k.useMemo(()=>x,[x]),S=C=>{const T=w[C];T&&i?.(T)},_=C=>{if(C.key==="Escape"){e?.();return}if(C.key==="ArrowDown"){C.preventDefault(),u(T=>Math.min(T+1,w.length-1));return}if(C.key==="ArrowUp"){C.preventDefault(),u(T=>Math.max(T-1,0));return}C.key==="Enter"&&(C.preventDefault(),S(c))};return r?y.jsx("div",{role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,background:"rgba(15, 23, 42, 0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2500,padding:16},onClick:()=>e?.(),children:y.jsxs("div",{style:{background:"#fff",borderRadius:14,border:"1px solid #e2e8f0",maxWidth:760,width:"100%",padding:18,boxShadow:"0 10px 30px rgba(0,0,0,0.2)"},onClick:C=>C.stopPropagation(),onKeyDown:_,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,alignItems:"flex-start"},children:[y.jsxs("div",{children:[y.jsx("div",{style:{fontWeight:900,fontSize:16,color:"#0f172a"},children:"Change document type"}),y.jsx("div",{style:{marginTop:6,color:"#475569",lineHeight:1.4},children:"We use this to decide which actions/checks to show. You can override the AI classification."}),t&&y.jsxs("div",{style:{marginTop:8,color:"#64748b",fontSize:13},children:["Detected: ",y.jsx("strong",{children:t.label})]})]}),y.jsx("button",{type:"button",onClick:()=>e?.(),style:{background:"none",border:"none",fontSize:22,cursor:"pointer",color:"#0f172a",padding:0,lineHeight:1},"aria-label":"Close",children:""})]}),y.jsx("input",{ref:h,value:a,onChange:C=>{o(C.target.value),u(0)},placeholder:"Start typing (e.g. lease, invoice, police letter)",style:{marginTop:14,width:"100%",padding:12,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsxs("div",{style:{marginTop:14,maxHeight:360,overflow:"auto"},children:[E.map(([C,T])=>y.jsxs("div",{style:{marginBottom:14},children:[y.jsxs("div",{style:{fontWeight:900,color:"#0f172a",fontSize:13,marginBottom:8},children:[IN(C,g),y.jsxs("span",{style:{marginLeft:8,color:"#94a3b8",fontWeight:800},children:["(",v,")"]})]}),y.jsx("div",{style:{display:"grid",gap:8},children:T.map(N=>{const D=w.findIndex(P=>P.id===N.id),M=D===c;return y.jsxs("button",{type:"button",onClick:()=>i?.(N),onMouseEnter:()=>u(D),style:{textAlign:"left",padding:"10px 12px",borderRadius:12,border:"1px solid "+(M?"#0f172a":"#e2e8f0"),background:M?"#f8fafc":"#fff",cursor:"pointer"},children:[y.jsx("div",{style:{fontWeight:900,color:"#0f172a"},children:N.label}),y.jsx("div",{style:{color:"#64748b",fontSize:12,marginTop:2},children:N.id})]},N.id)})})]},C)),!E.length&&y.jsx("div",{style:{color:"#64748b"},children:"No matches."})]})]})}):null}function jN(r){const[e,t]=k.useState({status:"idle",spec:null,error:null});return k.useEffect(()=>{if(!r){t({status:"idle",spec:null,error:null});return}let i=!1;return(async()=>{t({status:"loading",spec:null,error:null});try{const o=await fetch(`/classifications/validation/${r}.json`,{cache:"force-cache"});if(!o.ok)throw new Error(`Failed to load validation spec: ${o.status}`);const c=await o.json();i||t({status:"ready",spec:c,error:null})}catch(o){i||t({status:"error",spec:null,error:o})}})(),()=>{i=!0}},[r]),e}const BN="modulepreload",UN=function(r){return"/"+r},Qb={},Mp=function(e,t,i){let a=Promise.resolve();if(t&&t.length>0){let h=function(f){return Promise.all(f.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");a=h(t.map(f=>{if(f=UN(f),f in Qb)return;Qb[f]=!0;const p=f.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${g}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":BN,p||(v.as="script"),v.crossOrigin="",v.href=f,u&&v.setAttribute("nonce",u),document.head.appendChild(v),p)return new Promise((x,E)=>{v.addEventListener("load",x),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${f}`)))})}))}function o(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return a.then(c=>{for(const u of c||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},qt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Wf=[.001,0,0,.001,0,0],wf=1.35,bn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Bi={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Ko="pdfjs_internal_editor_",we={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},ke={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},Ax={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Xf={TRIANGLES:1,LATTICE:2},Et={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ho={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ft={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},sr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},cl={ERRORS:0,WARNINGS:1,INFOS:5},vr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Ro={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},Sx={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Su=cl.WARNINGS;function FN(r){Number.isInteger(r)&&(Su=r)}function zN(){return Su}function Eu(r){Su>=cl.INFOS&&console.info(`Info: ${r}`)}function ve(r){Su>=cl.WARNINGS&&console.warn(`Warning: ${r}`)}function ze(r){throw new Error(r)}function Fe(r,e){r||ze(e)}function HN(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Lp(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=WN(r)}catch{}const i=e?URL.parse(r,e):URL.parse(r);return HN(i)?i:null}function Op(r,e,t=!1){const i=URL.parse(r);return i?(i.hash=e,i.href):t&&Lp(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function be(r,e,t,i=!1){return Object.defineProperty(r,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const da=(function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class Zb extends da{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Af extends da{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class lu extends da{constructor(e){super(e,"InvalidPDFException")}}class Qo extends da{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class VN extends da{constructor(e){super(e,"FormatError")}}class Yi extends da{constructor(e){super(e,"AbortException")}}function GN(r){(typeof r!="object"||r?.length===void 0)&&ze("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const i=[];for(let a=0;a<e;a+=t){const o=Math.min(a+t,e),c=r.subarray(a,o);i.push(String.fromCharCode.apply(null,c))}return i.join("")}function _u(r){typeof r!="string"&&ze("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=r.charCodeAt(i)&255;return t}function $N(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function qN(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function YN(){try{return new Function(""),!0}catch{return!1}}class wt{static get isLittleEndian(){return be(this,"isLittleEndian",qN())}static get isEvalSupported(){return be(this,"isEvalSupported",YN())}static get isOffscreenCanvasSupported(){return be(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return be(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return be(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return be(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return be(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return be(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Sf=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class ne{static makeHexColor(e,t,i){return`#${Sf[e]}${Sf[t]}${Sf[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,i=0){const a=e[i],o=e[i+1];e[i]=a*t[0]+o*t[2]+t[4],e[i+1]=a*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const a=t[0],o=t[1],c=t[2],u=t[3],h=t[4],f=t[5];for(let p=0;p<6;p+=2){const g=e[i+p],v=e[i+p+1];e[i+p]=g*a+v*c+h,e[i+p+1]=g*o+v*u+f}}static applyInverseTransform(e,t){const i=e[0],a=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-a*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-i*t[1]+a*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,i){const a=t[0],o=t[1],c=t[2],u=t[3],h=t[4],f=t[5],p=e[0],g=e[1],v=e[2],x=e[3];let E=a*p+h,w=E,S=a*v+h,_=S,C=u*g+f,T=C,N=u*x+f,D=N;if(o!==0||c!==0){const M=o*p,P=o*v,X=c*g,H=c*x;E+=X,_+=X,S+=H,w+=H,C+=M,D+=M,N+=P,T+=P}i[0]=Math.min(i[0],E,S,w,_),i[1]=Math.min(i[1],C,N,T,D),i[2]=Math.max(i[2],E,S,w,_),i[3]=Math.max(i[3],C,N,T,D)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],a=e[1],o=e[2],c=e[3],u=i**2+a**2,h=i*o+a*c,f=o**2+c**2,p=(u+f)/2,g=Math.sqrt(p**2-(u*f-h**2));t[0]=Math.sqrt(p+g||1),t[1]=Math.sqrt(p-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>a)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[i,o,a,c]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,a,o){o[0]=Math.min(o[0],e,i),o[1]=Math.min(o[1],t,a),o[2]=Math.max(o[2],e,i),o[3]=Math.max(o[3],t,a)}static#e(e,t,i,a,o,c,u,h,f,p){if(f<=0||f>=1)return;const g=1-f,v=f*f,x=v*f,E=g*(g*(g*e+3*f*t)+3*v*i)+x*a,w=g*(g*(g*o+3*f*c)+3*v*u)+x*h;p[0]=Math.min(p[0],E),p[1]=Math.min(p[1],w),p[2]=Math.max(p[2],E),p[3]=Math.max(p[3],w)}static#t(e,t,i,a,o,c,u,h,f,p,g,v){if(Math.abs(f)<1e-12){Math.abs(p)>=1e-12&&this.#e(e,t,i,a,o,c,u,h,-g/p,v);return}const x=p**2-4*g*f;if(x<0)return;const E=Math.sqrt(x),w=2*f;this.#e(e,t,i,a,o,c,u,h,(-p+E)/w,v),this.#e(e,t,i,a,o,c,u,h,(-p-E)/w,v)}static bezierBoundingBox(e,t,i,a,o,c,u,h,f){f[0]=Math.min(f[0],e,u),f[1]=Math.min(f[1],t,h),f[2]=Math.max(f[2],e,u),f[3]=Math.max(f[3],t,h),this.#t(e,i,o,u,t,a,c,h,3*(-e+3*(i-o)+u),6*(e-2*i+o),3*(i-e),f),this.#t(e,i,o,u,t,a,c,h,3*(-t+3*(a-c)+h),6*(t-2*a+c),3*(a-t),f)}}function WN(r){return decodeURIComponent(escape(r))}let Ef=null,Jb=null;function Ex(r){return Ef||(Ef=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Jb=new Map([["","t"]])),r.replaceAll(Ef,(e,t,i)=>t?t.normalize("NFKC"):Jb.get(i))}function Ip(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),GN(r)}const rr="pdfjs_internal_id_";function XN(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,a,...o]=t;if(!r(i)&&!Number.isInteger(i)||!e(a))return!1;const c=o.length;let u=!0;switch(a.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function kt(r,e,t){return Math.min(Math.max(r,e),t)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class Zo{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function a(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(Zo.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const h of o.children)a(h)}return a(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Pp{static setupStorage(e,t,i,a,o){const c=a.getValue(t,{value:null});switch(i.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",u=>{a.setValue(t,{value:u.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(c.value===i.attributes.xfaOn?e.setAttribute("checked",!0):c.value===i.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{a.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",u=>{a.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of i.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,f=h.selectedIndex===-1?"":h[h.selectedIndex].value;a.setValue(t,{value:f})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:a,linkService:o}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${a}`);for(const[h,f]of Object.entries(c))if(f!=null)switch(h){case"class":f.length&&e.setAttribute(h,f.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",f);break;case"style":Object.assign(e.style,f);break;case"textContent":e.textContent=f;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,f)}u&&o.addLinkAttributes(e,c.href,c.newWindow),i&&c.dataId&&this.setupStorage(e,c.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,a=e.xfaHtml,o=e.intent||"display",c=document.createElement(a.name);a.attributes&&this.setAttributes({html:c,element:a,intent:o,linkService:i});const u=o!=="richText",h=e.div;if(h.append(c),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const f=[];if(a.children.length===0){if(a.value){const g=document.createTextNode(a.value);c.append(g),u&&Zo.shouldBuildText(a.name)&&f.push(g)}return{textDivs:f}}const p=[[a,-1,c]];for(;p.length>0;){const[g,v,x]=p.at(-1);if(v+1===g.children.length){p.pop();continue}const E=g.children[++p.at(-1)[1]];if(E===null)continue;const{name:w}=E;if(w==="#text"){const _=document.createTextNode(E.value);f.push(_),x.append(_);continue}const S=E?.attributes?.xmlns?document.createElementNS(E.attributes.xmlns,w):document.createElement(w);if(x.append(S),E.attributes&&this.setAttributes({html:S,element:E,storage:t,intent:o,linkService:i}),E.children?.length>0)p.push([E,-1,S]);else if(E.value){const _=document.createTextNode(E.value);u&&Zo.shouldBuildText(w)&&f.push(_),S.append(_)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:f}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Pi="http://www.w3.org/2000/svg";class ca{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Cr(r,e="text"){if(jo(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const a=new XMLHttpRequest;a.open("GET",r,!0),a.responseType=e,a.onreadystatechange=()=>{if(a.readyState===XMLHttpRequest.DONE){if(a.status===200||a.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(a.response);return}t(a.responseText);return}i(new Error(a.statusText))}},a.send(null)})}class ul{constructor({viewBox:e,userUnit:t,scale:i,rotation:a,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=a,this.offsetX=o,this.offsetY=c,i*=t;const h=(e[2]+e[0])/2,f=(e[3]+e[1])/2;let p,g,v,x;switch(a%=360,a<0&&(a+=360),a){case 180:p=-1,g=0,v=0,x=1;break;case 90:p=0,g=1,v=1,x=0;break;case 270:p=0,g=-1,v=-1,x=0;break;case 0:p=1,g=0,v=0,x=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(v=-v,x=-x);let E,w,S,_;p===0?(E=Math.abs(f-e[1])*i+o,w=Math.abs(h-e[0])*i+c,S=(e[3]-e[1])*i,_=(e[2]-e[0])*i):(E=Math.abs(h-e[0])*i+o,w=Math.abs(f-e[1])*i+c,S=(e[2]-e[0])*i,_=(e[3]-e[1])*i),this.transform=[p*i,g*i,v*i,x*i,E-p*i*h-v*i*f,w-g*i*h-x*i*f],this.width=S,this.height=_}get rawDims(){const e=this.viewBox;return be(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:a=this.offsetY,dontFlip:o=!1}={}){return new ul({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:a,dontFlip:o})}convertToViewportPoint(e,t){const i=[e,t];return ne.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];ne.applyTransform(t,this.transform);const i=[e[2],e[3]];return ne.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return ne.applyInverseTransform(i,this.transform),i}}class Tu extends da{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function dl(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function Cu(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function _x(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function Tx(r,e="document.pdf"){if(typeof r!="string")return e;if(dl(r))return ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!i)return e;const a=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=i.pathname.split("/").at(-1);if(o.test(c))return a(c);if(i.searchParams.size>0){const u=Array.from(i.searchParams.values()).reverse();for(const f of u)if(o.test(f))return a(f);const h=Array.from(i.searchParams.keys()).reverse();for(const f of h)if(o.test(f))return a(f)}if(i.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(h)return a(h[0])}return e}class e1{started=Object.create(null);times=[];time(e){e in this.started&&ve(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ve(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:a,end:o}of this.times)e.push(`${i.padEnd(t)} ${o-a}ms
`);return e.join("")}}function jo(r,e){const t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function An(r){r.preventDefault()}function rt(r){r.preventDefault(),r.stopPropagation()}function KN(r){console.log("Deprecated API usage: "+r)}class cu{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const f=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,f==="-"?(c+=p,u+=g):f==="+"&&(c-=p,u-=g),new Date(Date.UTC(i,a,o,c,u,h))}}function Cx(r,{scale:e=1,rotation:t=0}){const{width:i,height:a}=r.attributes.style,o=[0,0,parseInt(i),parseInt(a)];return new ul({viewBox:o,userUnit:1,scale:e,rotation:t})}function Rr(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ve(`Not a valid color format: "${r}"`),[0,0,0])}function QN(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;r.set(t,Rr(i))}e.remove()}function at(r){const{a:e,b:t,c:i,d:a,e:o,f:c}=r.getTransform();return[e,t,i,a,o,c]}function ri(r){const{a:e,b:t,c:i,d:a,e:o,f:c}=r.getTransform().invertSelf();return[e,t,i,a,o,c]}function Ms(r,e,t=!1,i=!0){if(e instanceof ul){const{pageWidth:a,pageHeight:o}=e.rawDims,{style:c}=r,u=wt.isCSSRoundSupported,h=`var(--total-scale-factor) * ${a}px`,f=`var(--total-scale-factor) * ${o}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${f}, var(--scale-round-y))`:`calc(${f})`;!t||e.rotation%180===0?(c.width=p,c.height=g):(c.width=g,c.height=p)}i&&r.setAttribute("data-main-rotation",e.rotation)}class Wn{constructor(){const{pixelRatio:e}=Wn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,a,o=-1){let c=1/0,u=1/0,h=1/0;i=Wn.capPixels(i,o),i>0&&(c=Math.sqrt(i/(e*t))),a!==-1&&(u=a/e,h=a/t);const f=Math.min(c,u,h);return this.sx>f||this.sy>f?(this.sx=f,this.sy=f,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const uu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ZN{static get isDarkMode(){return be(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Rx{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),be(this,"commentForegroundColor",Rr(i))}}function Nx(r,e,t,i){i=Math.min(Math.max(i??1,0),1);const a=255*(1-i);return r=Math.round(r*i+a),e=Math.round(e*i+a),t=Math.round(t*i+a),[r,e,t]}function t1(r,e){const t=r[0]/255,i=r[1]/255,a=r[2]/255,o=Math.max(t,i,a),c=Math.min(t,i,a),u=(o+c)/2;if(o===c)e[0]=e[1]=0;else{const h=o-c;switch(e[1]=u<.5?h/(o+c):h/(2-o-c),o){case t:e[0]=((i-a)/h+(i<a?6:0))*60;break;case i:e[0]=((a-t)/h+2)*60;break;case a:e[0]=((t-i)/h+4)*60;break}}e[2]=u}function Kf(r,e){const t=r[0],i=r[1],a=r[2],o=(1-Math.abs(2*a-1))*i,c=o*(1-Math.abs(t/60%2-1)),u=a-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+u,e[1]=c+u,e[2]=u;break;case 1:e[0]=c+u,e[1]=o+u,e[2]=u;break;case 2:e[0]=u,e[1]=o+u,e[2]=c+u;break;case 3:e[0]=u,e[1]=c+u,e[2]=o+u;break;case 4:e[0]=c+u,e[1]=u,e[2]=o+u;break;case 5:case 6:e[0]=o+u,e[1]=u,e[2]=c+u;break}}function n1(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function i1(r,e,t){Kf(r,t),t.map(n1);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];Kf(e,t),t.map(n1);const a=.2126*t[0]+.7152*t[1]+.0722*t[2];return i>a?(i+.05)/(a+.05):(a+.05)/(i+.05)}const s1=new Map;function Dx(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=s1.get(t);if(i)return i;const a=new Float32Array(9),o=a.subarray(0,3),c=a.subarray(3,6);t1(r,c);const u=a.subarray(6,9);t1(e,u);const h=u[2]<.5,f=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),i1(c,u,o)<f){let p,g;h?(p=c[2],g=1):(p=0,g=c[2]);const v=.005;for(;g-p>v;){const x=c[2]=(p+g)/2;h===i1(c,u,o)<f?p=x:g=x}c[2]=h?g:p}return Kf(c,o),i=ne.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),s1.set(t,i),i}function jp({html:r,dir:e,className:t},i){const a=document.createDocumentFragment();if(typeof r=="string"){const o=document.createElement("p");o.dir=e||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const f=c[u];o.append(document.createTextNode(f)),u<h-1&&o.append(document.createElement("br"))}a.append(o)}else Pp.render({xfaHtml:r,div:a,intent:"richText"});a.firstElementChild.classList.add("richText",t),i.append(a)}function kx(r){const e=new Path2D;if(!r)return e;for(let t=0,i=r.length;t<i;)switch(r[t++]){case Ro.moveTo:e.moveTo(r[t++],r[t++]);break;case Ro.lineTo:e.lineTo(r[t++],r[t++]);break;case Ro.curveTo:e.bezierCurveTo(r[t++],r[t++],r[t++],r[t++],r[t++],r[t++]);break;case Ro.quadraticCurveTo:e.quadraticCurveTo(r[t++],r[t++],r[t++],r[t++]);break;case Ro.closePath:e.closePath();break;default:ve(`Unrecognized drawing path operator: ${r[t-1]}`);break}return e}class Pe{static#e=null;static#t=null;static#i=null;static#n=0;static#a=[];get pagesNumber(){return Pe.#n}set pagesNumber(e){Pe.#n!==e&&(Pe.#n=e,e===0&&(Pe.#t=null,Pe.#e=null))}addListener(e){Pe.#a.push(e)}removeListener(e){const t=Pe.#a.indexOf(e);t>=0&&Pe.#a.splice(t,1)}#r(){for(const e of Pe.#a)e()}#s(e){if(Pe.#t)return;const t=Pe.#n,i=new Uint32Array(3*t),a=Pe.#t=i.subarray(0,t),o=Pe.#e=i.subarray(t,2*t);if(e)for(let c=0;c<t;c++)a[c]=o[c]=c+1;Pe.#i=i.subarray(2*t)}movePages(e,t,i){this.#s(!0);const a=Pe.#t,o=Pe.#e;Pe.#i.set(o);const c=t.length,u=new Uint32Array(c);let h=0;for(let x=0;x<c;x++){const E=t[x]-1;u[x]=a[E],E<i&&(h+=1)}const f=Pe.#n;let p=i-h;const g=f-c;p=kt(p,0,g);for(let x=0,E=0;x<f;x++)e.has(x+1)||(a[E++]=a[x]);a.copyWithin(p+c,p,g),a.set(u,p);let v=!1;for(let x=0,E=f;x<E;x++){const w=a[x];v||=w!==x+1,o[w-1]=x+1}this.#r(),v||(this.pagesNumber=0)}hasBeenAltered(){return Pe.#t!==null}getPageMappingForSaving(){return{pageIndices:Pe.#e?Pe.#e.map(e=>e-1):null}}getPrevPageNumber(e){return Pe.#i[Pe.#t[e-1]-1]}getPageNumber(e){return Pe.#e?.[e-1]??e}getPageId(e){return Pe.#t?.[e-1]??e}static get instance(){return be(this,"instance",new Pe)}getMapping(){return Pe.#t.subarray(0,this.pagesNumber)}}class Vo{#e=null;#t=null;#i;#n=null;#a=null;#r=null;#s=null;#o=null;static#c=null;constructor(e){this.#i=e,Vo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#i._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",An,{signal:t}),e.addEventListener("pointerdown",Vo.#l,{signal:t}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const a=this.#i.toolbarPosition;if(a){const{style:o}=e,c=this.#i._uiManager.direction==="ltr"?1-a[0]:a[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*a[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#i._focusEventsAllowed=!1,rt(e)}#d(e){this.#i._focusEventsAllowed=!0,rt(e)}#f(e){const t=this.#i._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#d.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",An,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#a?.shown(),this.#r?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",Vo.#c[e]),this.#f(i)&&i.addEventListener("click",a=>{t.delete()},{signal:t._signal}),this.#n.append(i)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#n.append(t,this.#g),this.#a=e}addComment(e,t=null){if(this.#r)return;const i=e.renderForToolbar();if(!i)return;this.#f(i);const a=this.#s=this.#g;t?(this.#n.insertBefore(i,t),this.#n.insertBefore(a,t)):this.#n.append(i,a),this.#r=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#n.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#i);this.#f(t),this.#n.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#r?.removeToolbarCommentButton(),this.#r=null,this.#s?.remove(),this.#s=null)}async addButton(e,t){switch(e){case"colorPicker":t&&this.addColorPicker(t);break;case"altText":t&&await this.addAltText(t);break;case"editSignature":t&&await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":t&&this.addComment(t);break}}async addButtonBefore(e,t,i){if(!t&&e==="comment")return;const a=this.#n.querySelector(i);a&&e==="comment"&&this.addComment(t,a)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class JN{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#i._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",An,{signal:t});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#r("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#r("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#a(e,t){let i=0,a=0;for(const o of e){const c=o.y+o.height;if(c<i)continue;const u=o.x+(t?o.width:0);if(c>i){a=u,i=c;continue}t?u>a&&(a=u):u<a&&(a=u)}return[t?1-a:a,i]}show(e,t,i){const[a,o]=this.#a(t,i),{style:c}=this.#t||=this.#n();e.append(this.#t),c.insetInlineEnd=`${100*a}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#r(e,t,i,a){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",i);const u=this.#i._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",An,{signal:u}),o.addEventListener("click",a,{signal:u})),this.#e.append(o)}}function Mx(r,e,t){for(const i of t)e.addEventListener(i,r[i].bind(r))}class Ue{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(Ue.#t||=new Set).add(e)}static setPointer(e,t){Ue.#e||=t,Ue.#n??=e}static setTimeStamp(e){Ue.#i=e}static isSamePointerId(e){return Ue.#e===e}static isSamePointerIdOrRemove(e){return Ue.#e===e?!0:(Ue.#t?.delete(e),!1)}static isSamePointerType(e){return Ue.#n===e}static isInitializedAndDifferentPointerType(e){return Ue.#n!==null&&!Ue.isSamePointerType(e)}static isSameTimeStamp(e){return Ue.#i===e}static isUsingMultiplePointers(){return Ue.#t?.size>=1}static clearPointerType(){Ue.#n=null}static clearPointerIds(){Ue.#e=NaN,Ue.#t=null}static clearTimeStamp(){Ue.#i=NaN}}class eD{#e=0;get id(){return`${Ko}${this.#e++}`}}class Bp{#e=Ip();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),a=new Image;a.src=e;const o=a.decode().then(()=>(i.drawImage(a,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return be(this,"_isSVGFittingCanvas",o)}async#n(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let a;if(typeof t=="string"?(i.url=t,a=await Cr(t,"blob")):t instanceof File?a=i.file=t:t instanceof Blob&&(a=t),a.type==="image/svg+xml"){const o=Bp._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((f,p)=>{u.onload=()=>{i.bitmap=u,i.isSvg=!0,f()},c.onload=async()=>{const g=i.svgUrl=c.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=c.onerror=p});c.readAsDataURL(a),await h}else i.bitmap=await createImageBitmap(a);i.refCounter=1}catch(a){ve(a),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:t,name:i,size:a,type:o}=e;return this.#n(`${t}_${i}_${a}_${o}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,t){const i=await t;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),i={bitmap:a.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const t=this.#i.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#i||=new Map;const t=this.#i.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(i.width,i.height);a.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=a.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class tD{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:t,post:i,mustExec:a,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(a&&e(),this.#t)return;const h={cmd:e,undo:t,post:i,type:o};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(h);return}if(c&&this.#e[this.#n].type===o){u&&(h.undo=this.#e[this.#n].undo),this.#e[this.#n]=h;return}const f=this.#n+1;f===this.#i?this.#e.splice(0,1):(this.#n=f,f<this.#e.length&&this.#e.splice(f)),this.#e.push(h)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#n];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let t=this.#n;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#n-t),this.#n=t;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class hl{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wt.platform;for(const[i,a,o={}]of e)for(const c of i){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:a,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:a,options:{bubbles:o=!1,args:c=[],checker:u=null}}=i;u&&!u(e,t)||(a.bind(e,...c,t)(),o||rt(t))}}class Up{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return QN(e),be(this,"_colors",e)}convert(e){const t=Rr(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,a]of this._colors)if(a.every((o,c)=>o===t[c]))return Up._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ne.makeHexColor(...t):e}}class Wi{#e=new AbortController;#t=null;#i=null;#n=new Map;#a=new Map;#r=null;#s=null;#o=null;#c=new tD;#l=null;#h=null;#d=null;#f=0;#g=new Set;#m=null;#u=null;#p=new Set;_editorUndoBar=null;#y=!1;#v=!1;#b=!1;#_=null;#S=null;#w=null;#C=null;#x=!1;#E=null;#D=new eD;#R=!1;#N=!1;#j=!1;#M=null;#O=null;#B=null;#I=null;#G=null;#T=we.NONE;#A=new Set;#L=null;#U=null;#z=null;#Y=null;#q=null;#W={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#P=null;#$=null;#Z=null;#J=null;#F=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Wi.prototype,t=c=>c.#$.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),i=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},a=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return be(this,"_keyboardManager",new hl([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#$.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#$.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,i,a,o,c,u,h,f,p,g,v,x,E,w,S){const _=this._signal=this.#e.signal;this.#$=e,this.#Z=t,this.#J=i,this.#r=a,this.#l=o,this.#U=c,this.#q=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:_}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),u._on("setpreference",this.onSetPreference.bind(this),{signal:_}),u._on("switchannotationeditorparams",C=>this.updateParams(C.type,C.value),{signal:_}),u._on("pagesedited",this.onPagesEdited.bind(this),{signal:_}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:_}),this.#re(),this.#he(),this.#te(),this.#s=h.annotationStorage,this.#_=h.filterFactory,this.#z=f,this.#C=p||null,this.#y=g,this.#v=v,this.#b=x,this.#G=E||null,this.viewParameters={realScale:ca.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=S!==!1,o?.setSidebarUiManager(this)}destroy(){this.#F?.resolve(),this.#F=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#a.values())e.destroy();this.#a.clear(),this.#n.clear(),this.#p.clear(),this.#I?.clear(),this.#t=null,this.#A.clear(),this.#c.destroy(),this.#r?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#E?.hide(),this.#E=null,this.#B?.destroy(),this.#B=null,this.#i=null,this.#S&&(clearTimeout(this.#S),this.#S=null),this.#P&&(clearTimeout(this.#P),this.#P=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#b}get hcmFilter(){return be(this,"hcmFilter",this.#z?this.#_.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return be(this,"direction",getComputedStyle(this.#$).direction)}get _highlightColors(){return be(this,"_highlightColors",this.#C?new Map(this.#C.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return be(this,"highlightColors",null);const t=new Map,i=!!this.#z;for(const[a,o]of e){const c=a.endsWith("_HCM");if(i&&c){t.set(a.replace("_HCM",""),o);continue}!i&&!c&&t.set(a,o)}return be(this,"highlightColors",t)}get highlightColorNames(){return be(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#d=e}setMainHighlightColorPicker(e){this.#B=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,i,a){this.#l?.showDialog(this,e,t,i,a)}selectComment(e,t){this.#a.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}deleteComment(e,t){const i=()=>{e.comment=t},a=()=>{this._editorUndoBar?.show(i,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:a,undo:i,mustExec:!0})}toggleComment(e,t,i=void 0){this.#l?.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#a.has(e-1))return;const{resolve:t,promise:i}=Promise.withResolvers(),a=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",a),t())};this._eventBus.on("editorsrendered",a),await i}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#b=t)}onPagesEdited({pagesMapper:e}){for(const a of this.#n.values())a.updatePageIndex(e.getPrevPageNumber(a.pageIndex+1)-1);const t=this.#a,i=this.#a=new Map;for(const[a,o]of t){const c=e.getPrevPageNumber(a+1)-1;if(c===-1){o.destroy();continue}i.set(c,o),o.updatePageIndex(c)}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#$.focus()}findParent(e,t){for(const i of this.#a.values()){const{x:a,y:o,width:c,height:u}=i.div.getBoundingClientRect();if(e>=a&&e<=a+c&&t>=o&&t<=o+u)return i}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*ca.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#d?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of this.#a.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",t=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u}=i,h=i.toString(),p=this.#Q(i).closest(".textLayer"),g=this.getSelectionBoxes(p);if(!g)return;i.empty();const v=this.#ee(p),x=this.#T===we.NONE,E=()=>{const w=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:a,anchorOffset:o,focusNode:c,focusOffset:u,text:h});x&&this.showAllEditors("highlight",!0,!0),t&&w?.editComment()};if(x){this.switchToMode(we.HIGHLIGHT,E);return}E()}commentSelection(e=""){this.highlightSelection(e,!0)}#se(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#Q(e).closest(".textLayer"),a=this.getSelectionBoxes(i);a&&(this.#E||=new JN(this),this.#E.show(i,a,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#s)return null;const t=`${Ko}${e}`,i=this.#s.getRawValue(t);return i&&this.#s.remove(t),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}a11yAlert(e,t=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}#ae(){const e=document.getSelection();if(!e||e.isCollapsed){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#L)return;const a=this.#Q(e).closest(".textLayer");if(!a){this.#L&&(this.#E?.hide(),this.#L=null,this.#k({hasSelectedText:!1}));return}if(this.#E?.hide(),this.#L=t,this.#k({hasSelectedText:!0}),!(this.#T!==we.HIGHLIGHT&&this.#T!==we.NONE)&&(this.#T===we.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#x=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#T===we.HIGHLIGHT?this.#ee(a):null;if(o?.toggleDrawing(),this.#N){const c=new AbortController,u=this.combinedSignal(c),h=f=>{f.type==="pointerup"&&f.button!==0||(c.abort(),o?.toggleDrawing(!0),f.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===we.HIGHLIGHT?this.highlightSelection(e):this.#y&&this.#se()}#re(){document.addEventListener("selectionchange",this.#ae.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#A)if(t.div.contains(e)){this.#O=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#O)return;const[e,t]=this.#O;this.#O=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#M)return;this.#M=new AbortController;const e=this.combinedSignal(this.#M);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#M?.abort(),this.#M=null}#ue(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#de(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#A){const a=i.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of this.#u)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){ve(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const a=this.currentLayer;try{const o=[];for(const h of i){const f=await a.deserialize(h);if(!f)return;o.push(f)}const c=()=>{for(const h of o)this.#ne(h);this.#ie(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){ve(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==we.NONE&&!this.isEditorHandlingKeyboard&&Wi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#x&&(this.#x=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#k(e){Object.entries(e).some(([i,a])=>this.#W[i]!==a)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#W,e)}),this.#T===we.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#V([[ke.HIGHLIGHT_FREE,!0]]))}#V(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ue(),this.#k({isEditing:this.#T!==we.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#de(),this.#k({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const t of this.#u)this.#V(t.defaultPropertiesToUpdate)}}getId(){return this.#D.id}get currentLayer(){return this.#a.get(this.#f)}getLayer(e){return this.#a.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#a.set(e.pageIndex,e),this.#R?e.enable():e.disable()}removeLayer(e){this.#a.delete(e.pageIndex)}async updateMode(e,t=null,i=!1,a=!1,o=!1,c=!1){if(this.#T!==e&&!(this.#F&&(await this.#F.promise,!this.#F))){if(this.#F=Promise.withResolvers(),this.#d?.commitOrRemove(),this.#T===we.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===we.NONE){this.setEditingState(!1),this.#pe();for(const u of this.#n.values())u.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#F.resolve();return}for(const u of this.#n.values())u.addStandaloneCommentButton();e===we.SIGNATURE&&await this.#U?.loadSignatures(),i&&Ue.clearPointerType(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const u of this.#a.values())u.updateMode(e);if(e===we.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(f=>f._editorType)));const u=new Set,h=[];for(const f of this.#n.values()){const{annotationElementId:p,hasComment:g,deleted:v}=f;p&&u.add(p),g&&!v&&h.push(f.getData())}for(const f of this.#i){const{id:p,popupRef:g,contentsObj:v}=f;g&&v?.str&&!u.has(p)&&!this.#g.has(p)&&h.push(f)}this.#l?.showSidebar(h)}if(!t){a&&this.addNewEditorFromKeyboard(),this.#F.resolve();return}for(const u of this.#n.values())u.uid===t?(this.setSelected(u),c?u.editComment():o?u.enterInEditMode():u.focus()):u.unselect();this.#F.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#u){switch(e){case ke.CREATE:this.currentLayer.addNewEditor(t);return;case ke.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const i of this.#A)i.updateParams(e,t);else for(const i of this.#u)i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){for(const o of this.#n.values())o.editorType===e&&o.show(t);(this.#Y?.get(ke.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#V([[ke.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#j!==e){this.#j=e;for(const t of this.#a.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#R){this.#R=!0;const e=[];for(const t of this.#a.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#pe(){if(this.unselectAll(),this.#R){this.#R=!1;for(const e of this.#a.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const t of this.#n.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#S&&clearTimeout(this.#S),this.#S=setTimeout(()=>{this.focusMainContainer(),this.#S=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#I?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const t=this.#a.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#V(e.propertiesToUpdate))}get#me(){let e=null;for(e of this.#A);return e}updateUI(e){this.#me===e&&this.#V(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#V(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#A.has(e)){this.#A.delete(e),e.unselect(),this.#k({hasSelectedEditor:this.hasSelection});return}this.#A.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#d?.commitOrRemove();for(const t of this.#A)t!==e&&t.unselect();this.#A.clear(),this.#A.add(e),e.select(),this.#V(e.propertiesToUpdate),this.#k({hasSelectedEditor:!0})}isSelected(e){return this.#A.has(e)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(e){e.unselect(),this.#A.delete(e),this.#k({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#k({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#k({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#A],i=()=>{this._editorUndoBar?.show(a,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},a=()=>{for(const o of t)this.#ne(o)};this.addCommands({cmd:i,undo:a,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const t of this.#A)t.unselect();this.#A.clear();for(const t of e)t.isEmpty()||(this.#A.add(t),t.select());this.#k({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#A)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==we.NONE))&&!this.#d?.commitOrRemove()&&this.hasSelection){for(const e of this.#A)e.unselect();this.#A.clear(),this.#k({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[a,o]=this.#H,c=[...this.#A],u=1e3;this.#P&&clearTimeout(this.#P),this.#P=setTimeout(()=>{this.#P=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#n.has(h.id)&&(h.translateInPage(a,o),h.translationDone())},undo:()=>{for(const h of c)this.#n.has(h.id)&&(h.translateInPage(-a,-o),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#A)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:a,y:o,pageIndex:c},u]of e)u.newX=a,u.newY=o,u.newPageIndex=c,t||=a!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const i=(a,o,c,u)=>{if(this.#n.has(a.id)){const h=this.#a.get(u);h?a._setParentAndPosition(h,o,c):(a.pageIndex=u,a.x=o,a.y=c)}};return this.addCommands({cmd:()=>{for(const[a,{newX:o,newY:c,newPageIndex:u}]of e)i(a,o,c,u)},undo:()=>{for(const[a,{savedX:o,savedY:c,savedPageIndex:u}]of e)i(a,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const i of this.#m.keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==we.NONE}get imageManager(){return be(this,"imageManager",new Bp)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let f=0,p=t.rangeCount;f<p;f++)if(!e.contains(t.getRangeAt(f).commonAncestorContainer))return null;const{x:i,y:a,width:o,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(f,p,g,v)=>({x:(p-a)/c,y:1-(f+g-i)/o,width:v/c,height:g/o});break;case"180":u=(f,p,g,v)=>({x:1-(f+g-i)/o,y:1-(p+v-a)/c,width:g/o,height:v/c});break;case"270":u=(f,p,g,v)=>({x:1-(p+v-a)/c,y:(f-i)/o,width:v/c,height:g/o});break;default:u=(f,p,g,v)=>({x:(f-i)/o,y:(p-a)/c,width:g/o,height:v/c});break}const h=[];for(let f=0,p=t.rangeCount;f<p;f++){const g=t.getRangeAt(f);if(!g.collapsed)for(const{x:v,y:x,width:E,height:w}of g.getClientRects())E===0||w===0||h.push(u(v,x,E,w))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const i=this.#s.getRawValue(t);i&&(this.#T===we.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){const a=this.#I?.get(e);a&&(a.setCanvas(t,i),this.#I.delete(e))}addMissingCanvas(e,t){(this.#I||=new Map).set(e,t)}}class ui{#e=null;#t=!1;#i=null;#n=null;#a=null;#r=null;#s=!1;#o=null;#c=null;#l=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#d=e._uiManager.useNewAltTextFlow,ui.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){ui._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#n=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",ui.#f.missing),t.setAttribute("data-l10n-id",ui.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;e.addEventListener("contextmenu",An,{signal:i}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#d&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",a,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#s=!0,a(o))},{signal:i}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#s}),this.#s=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await ui._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:a,cancel:o=!1}){i&&(this.#l=i,this.#h=a),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#i&&(!e&&this.#r&&(clearTimeout(this.#r),this.#r=null),this.#i.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#a=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#i;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",ui.#f[this.#g]),this.#n?.setAttribute("data-l10n-id",ui.#f[`${this.#g}-label`]),!this.#e){this.#a?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#a?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#a;if(!t){this.#a=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const a=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#r),this.#r=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#r=setTimeout(()=>{this.#r=null,this.#a.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},a)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#r&&(clearTimeout(this.#r),this.#r=null),this.#a?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Lc{#e=null;#t=null;#i=!1;#n=null;#a=null;#r=null;#s=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#n.commentButtonPosition;if(t){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const a=this.#n.commentButtonColor;a&&(i.backgroundColor=a)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:i}=this.#e.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#n.parent.boundingClientRect;return[(e-a)/c,(t+i-o)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",An,{signal:i}),t&&(e.addEventListener("focusin",o=>{this.#n._focusEventsAllowed=!1,rt(o)},{capture:!0,signal:i}),e.addEventListener("focusout",o=>{this.#n._focusEventsAllowed=!0,rt(o)},{capture:!0,signal:i})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const a=o=>{o.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",a,{capture:!0,signal:i}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#i=!0,a(o))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const t=this.commentPopupPositionInLayer;let i,a;if(t)[i,a]=t;else{[i,a]=this.#n.commentButtonPosition;const{width:p,height:g,x:v,y:x}=this.#n;i=v+i*p,a=x+a*g}const o=this.#n.parent.boundingClientRect,{x:c,y:u,width:h,height:f}=o;this.#n._uiManager.editComment(this.#n,c+i*h,u+a*f,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#s===""}isEmpty(){return this.#s===null}hasBeenEdited(){return this.isDeleted()||this.#s!==this.#a}serialize(){return this.data}get data(){return{text:this.#s,richText:this.#r,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#s&&(this.#r=null),e===null){this.#s="",this.#c=!0;return}this.#s=e,this.#o=new Date,this.#c=!1}restoreData({text:e,richText:t,date:i}){this.#s=e,this.#r=t,this.#o=i,this.#c=!1}setInitialText(e,t=null){this.#a=e,this.data=e,this.#o=null,this.#r=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#s="",this.#r=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class fl{#e;#t=!1;#i=null;#n;#a;#r;#s;#o=null;#c;#l=null;#h;#d=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:a=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#i=i,this.#n=t,this.#a=a,this.#r=o,this.#s=c,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Wn.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const a=this.#o=new AbortController,o=AbortSignal.any([this.#c,a.signal]),c=this.#e,u={capture:!0,signal:o,passive:!1},h=f=>{f.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(rt(f),h(f))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#d){this.#d=new AbortController;const a=AbortSignal.any([this.#c,this.#d.signal]),o=this.#e,c={signal:a,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#m.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",rt,c),o.addEventListener("pointermove",rt,c),o.addEventListener("pointercancel",rt,c),o.addEventListener("pointerup",rt,c),this.#a?.()}if(rt(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;rt(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:a,screenY:o}=t,{screenX:c,screenY:u}=i,h=this.#l,{touch0X:f,touch0Y:p,touch1X:g,touch1Y:v}=h,x=g-f,E=v-p,w=c-a,S=u-o,_=Math.hypot(w,S)||1,C=Math.hypot(x,E)||1;if(!this.#t&&Math.abs(C-_)<=fl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=a,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const T=[(a+c)/2,(o+u)/2];this.#r?.(T,C,_)}#m(e){e.touches.length>=2||(this.#d&&(this.#d.abort(),this.#d=null,this.#s?.()),this.#l&&(rt(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r=!1;#s=null;#o="";#c=null;#l=null;#h=null;#d=null;#f=null;#g="";#m=!1;#u=null;#p=!1;#y=!1;#v=!1;#b=null;#_=0;#S=0;#w=null;#C=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#x=!1;#E=ce._zIndex++;static _borderLineWidth=-1;static _colorManager=new Up;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=ce.prototype._resizeWithKeyboard,t=Wi.TRANSLATE_SMALL,i=Wi.TRANSLATE_BIG;return be(this,"_resizerKeyboardManager",new hl([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],ce.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:t,rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,a],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return be(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new nD({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(ce._l10n??=e,ce._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),ce._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);ce._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){ze("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#x}set _isDraggable(e){this.#x=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#E}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#P(),this.#d?.remove(),this.#d=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,a){const[o,c]=this.parentDimensions;[i,a]=this.screenToPageTranslation(i,a),this.x=(e+i)/o,this.y=(t+a)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,a]=this.parentDimensions;this.setAt(e*i,t*a,this.width*i,this.height*a),this._onTranslated()}#D([e,t],i,a){[i,a]=this.screenToPageTranslation(i,a),this.x+=i/e,this.y+=a/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#D(this.parentDimensions,e,t)}translateInPage(e,t){this.#u||=[this.x,this.y,this.width,this.height],this.#D(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[a,o]}=this;if(this.x+=e/a,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,f]=this.getBaseTranslation();c+=h,u+=f;const{style:p}=i;p.left=`${(100*c).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=ce,a=i/e,o=i/t;switch(this.rotation){case 90:return[-a,o];case 180:return[a,o];case 270:return[a,-o];default:return[-a,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,a]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=i,h*=a,o*=i,c*=a,this._mustFixPosition)switch(e){case 0:o=kt(o,0,i-u),c=kt(c,0,a-h);break;case 90:o=kt(o,0,i-h),c=kt(c,u,a);break;case 180:o=kt(o,u,i),c=kt(c,h,a);break;case 270:o=kt(o,h,i),c=kt(c,0,a-u);break}this.x=o/=i,this.y=c/=a;const[f,p]=this.getBaseTranslation();o+=f,c+=p,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#R(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return ce.#R(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return ce.#R(e,t,360-this.parentRotation)}#N(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(){const{div:{style:e},width:t,height:i}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#j(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const a=document.createElement("div");this.#c.append(a),a.classList.add("resizer",i),a.setAttribute("data-resizer-name",i),a.addEventListener("pointerdown",this.#M.bind(this,i),{signal:t}),a.addEventListener("contextmenu",An,{signal:t}),a.tabIndex=-1}this.div.prepend(this.#c)}#M(e,t){t.preventDefault();const{isMac:i}=wt.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#i?.toggle(!1);const a=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#I.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",rt,{passive:!1,signal:c}),window.addEventListener("contextmenu",An,{signal:c}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=a,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#B()};window.addEventListener("pointerup",f,{signal:c}),window.addEventListener("blur",f,{signal:c})}#O(e,t,i,a){this.width=i,this.height=a,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#B(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:a}=this.#h;this.#h=null;const o=this.x,c=this.y,u=this.width,h=this.height;o===e&&c===t&&u===i&&h===a||this.addCommands({cmd:this.#O.bind(this,o,c,u,h),undo:this.#O.bind(this,e,t,i,a),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#I(e,t){const[i,a]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,f=ce.MIN_SIZE/i,p=ce.MIN_SIZE/a,g=this.#N(this.rotation),v=(j,q)=>[g[0]*j+g[2]*q,g[1]*j+g[3]*q],x=this.#N(360-this.rotation),E=(j,q)=>[x[0]*j+x[2]*q,x[1]*j+x[3]*q];let w,S,_=!1,C=!1;switch(e){case"topLeft":_=!0,w=(j,q)=>[0,0],S=(j,q)=>[j,q];break;case"topMiddle":w=(j,q)=>[j/2,0],S=(j,q)=>[j/2,q];break;case"topRight":_=!0,w=(j,q)=>[j,0],S=(j,q)=>[0,q];break;case"middleRight":C=!0,w=(j,q)=>[j,q/2],S=(j,q)=>[0,q/2];break;case"bottomRight":_=!0,w=(j,q)=>[j,q],S=(j,q)=>[0,0];break;case"bottomMiddle":w=(j,q)=>[j/2,q],S=(j,q)=>[j/2,0];break;case"bottomLeft":_=!0,w=(j,q)=>[0,q],S=(j,q)=>[j,0];break;case"middleLeft":C=!0,w=(j,q)=>[0,q/2],S=(j,q)=>[j,q/2];break}const T=w(u,h),N=S(u,h);let D=v(...N);const M=ce._round(o+D[0]),P=ce._round(c+D[1]);let X=1,H=1,$,Y;if(t.fromKeyboard)({deltaX:$,deltaY:Y}=t);else{const{screenX:j,screenY:q}=t,[ee,ge]=this.#l;[$,Y]=this.screenToPageTranslation(j-ee,q-ge),this.#l[0]=j,this.#l[1]=q}if([$,Y]=E($/i,Y/a),_){const j=Math.hypot(u,h);X=H=Math.max(Math.min(Math.hypot(N[0]-T[0]-$,N[1]-T[1]-Y)/j,1/u,1/h),f/u,p/h)}else C?X=kt(Math.abs(N[0]-T[0]-$),f,1)/u:H=kt(Math.abs(N[1]-T[1]-Y),p,1)/h;const Z=ce._round(u*X),se=ce._round(h*H);D=v(...S(Z,se));const re=M-D[0],me=P-D[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=Z,this.height=se,this.x=re,this.y=me,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#y)return this._editToolbar;this._editToolbar=new Vo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(ui.initialize(ce._l10n),this.#i=new ui(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new Lc(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#a){this._uiManager.isEditingMode()&&this.#a.classList.remove("hidden");return}this.hasComment&&(this.#a=this.#n.renderForStandalone(),this.div.append(this.#a))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#a=null}hideStandaloneCommentButton(){this.#a?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:e,text:t,date:i,deleted:a}}=this.#n;return{text:t,richText:e,date:i,deleted:a,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new Lc(this),typeof e=="object"&&e!==null?this.#n.restoreData(e):this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:i}){if(!t||(this.#n||=new Lc(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const a=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);a&&this.updateFromAnnotationLayer(a)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new Lc(this),this.#n.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,a]=e.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=a-100,f=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,f,a]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#n.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#r?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[a,o]=this.getInitialTranslation();return this.translate(a,o),Mx(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#C||=new fl({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#G(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,t,i){let o=.7*(i/t)+1-.7;if(o===1)return;const c=this.#N(this.rotation),u=(M,P)=>[c[0]*M+c[2]*P,c[1]*M+c[3]*P],[h,f]=this.parentDimensions,p=this.x,g=this.y,v=this.width,x=this.height,E=ce.MIN_SIZE/h,w=ce.MIN_SIZE/f;o=Math.max(Math.min(o,1/v,1/x),E/v,w/x);const S=ce._round(v*o),_=ce._round(x*o);if(S===v&&_===x)return;this.#u||=[p,g,v,x];const C=u(v/2,x/2),T=ce._round(p+C[0]),N=ce._round(g+C[1]),D=u(S/2,_/2);this.x=T-D[0],this.y=N-D[1],this.width=S,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#B()}pointerdown(e){const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(e);return}this.#L(e)}#L(e){const{isMac:t}=wt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const a=new AbortController,o=this._uiManager.combinedSignal(a),c={capture:!0,passive:!1,signal:o},u=f=>{a.abort(),this.#s=null,this.#m=!1,this._uiManager.endDragSession()||this.#L(f),i&&this._onStopDragging()};t&&(this.#_=e.clientX,this.#S=e.clientY,this.#s=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",f=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:g,pointerId:v}=f;if(v!==this.#s){rt(f);return}const[x,E]=this.screenToPageTranslation(p-this.#_,g-this.#S);this.#_=p,this.#S=g,this._uiManager.dragSelectedEditors(x,E)},c),window.addEventListener("touchmove",rt,c),window.addEventListener("pointerdown",f=>{f.pointerType===this.#o&&(this.#C||f.isPrimary)&&u(f),rt(f)},c));const h=f=>{if(!this.#s||this.#s===f.pointerId){u(f);return}rt(f)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const a=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,f=e/a,p=t/a,g=this.x*o,v=this.y*c,x=this.width*o,E=this.height*c;switch(i){case 0:return[g+f+u,c-v-p-E+h,g+f+x+u,c-v-p+h];case 90:return[g+p+u,c-v+f+h,g+p+E+u,c-v+f+x+h];case 180:return[g-f-x+u,c-v+p+h,g-f+u,c-v+p+E+h];case 270:return[g-p-E+u,c-v-f-x+h,g-p+u,c-v-f+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,a,o,c]=e,u=o-i,h=c-a;switch(this.rotation){case 0:return[i,t-c,u,h];case 90:return[i,t-a,h,u];case 180:return[o,t-a,u,h];case 270:return[o,t-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:i,opacity:a,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:f,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:e},creationDate:f,modificationDate:i||p,popupRef:!o,color:t,opacity:a}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#y=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#y=!1,!0):!1}isInEditMode(){return this.#y}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:a}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return t<c&&a>0&&e<o&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,i){const a=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});a.rotation=e.rotation,a.#e=e.accessibilityData,a._isCopy=e.isCopy||!1;const[o,c]=a.pageDimensions,[u,h,f,p]=a.getRectInCurrentCoords(e.rect,c);return a.x=u/o,a.y=h/c,a.width=f/o,a.height=p/c,a}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#b&&(clearTimeout(this.#b),this.#b=null),this.#P(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#C?.destroy(),this.#C=null,this.#d?.remove(),this.#d=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#j(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[i,a,o,c]=this.getPDFRect();return[ce._round(i+(o-i)*e),ce._round(a+(c-a)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const c=this.#Y.bind(this),u=this.#q.bind(this),h=this._uiManager._signal;for(const f of this.#t){const p=f.getAttribute("data-resizer-name");f.setAttribute("role","spinbutton"),f.addEventListener("keydown",c,{signal:h}),f.addEventListener("blur",u,{signal:h}),f.addEventListener("focus",this.#W.bind(this,p),{signal:h}),f.setAttribute("data-l10n-id",ce._l10nResizer[p])}}const i=this.#t[0];let a=0;for(const c of t){if(c===i)break;a++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==a){if(o<a)for(let u=0;u<a-o;u++)this.#c.append(this.#c.firstElementChild);else if(o>a)for(let u=0;u<o-a;u++)this.#c.firstElementChild.before(this.#c.lastElementChild);let c=0;for(const u of t){const f=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",ce._l10nResizer[f])}}this.#H(0),this.#v=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){ce._resizerKeyboardManager.exec(this,e)}#q(e){this.#v&&e.relatedTarget?.parentNode!==this.#c&&this.#P()}#W(e){this.#g=this.#v?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#v&&this.#I(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#P(){this.#v=!1,this.#H(-1),this.#B()}_stopResizingWithKeyboard(){this.#P(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#w||=new Map;const{action:i}=e;let a=this.#w.get(i);a&&clearTimeout(a),a=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},ce._telemetryTimeout),this.#w.set(i,a);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#r=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#r=!0}updateFakeAnnotationElement(e){if(!this.#d&&!this.deleted){this.#d=e.addFakeAnnotation(this);return}if(this.deleted){this.#d.remove(),this.#d=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#d.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstElementChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class nD extends ce{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const a1=3285377520,In=4294901760,oi=65535;class Lx{constructor(e){this.h1=e?e&4294967295:a1,this.h2=e?e&4294967295:a1}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,S=e.length;w<S;w++){const _=e.charCodeAt(w);_<=255?t[i++]=_:(t[i++]=_>>>8,t[i++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const a=i>>2,o=i-a*4,c=new Uint32Array(t.buffer,0,a);let u=0,h=0,f=this.h1,p=this.h2;const g=3432918353,v=461845907,x=g&oi,E=v&oi;for(let w=0;w<a;w++)w&1?(u=c[w],u=u*g&In|u*x&oi,u=u<<15|u>>>17,u=u*v&In|u*E&oi,f^=u,f=f<<13|f>>>19,f=f*5+3864292196):(h=c[w],h=h*g&In|h*x&oi,h=h<<15|h>>>17,h=h*v&In|h*E&oi,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,o){case 3:u^=t[a*4+2]<<16;case 2:u^=t[a*4+1]<<8;case 1:u^=t[a*4],u=u*g&In|u*x&oi,u=u<<15|u>>>17,u=u*v&In|u*E&oi,a&1?f^=u:p^=u}this.h1=f,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&In|e*36045&oi,t=t*4283543511&In|((t<<16|e>>>16)*2950163797&In)>>>16,e^=t>>>1,e=e*444984403&In|e*60499&oi,t=t*3301882366&In|((t<<16|e>>>16)*3120437893&In)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Qf=Object.freeze({map:null,hash:"",transfer:void 0});class Fp{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){const t=this.#n.get(e);if(t!==void 0&&(t instanceof ce&&this.#i.delete(t.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof ce)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let a=!1;if(i!==void 0)for(const[o,c]of Object.entries(t))i[o]!==c&&(a=!0,i[o]=c);else a=!0,this.#n.set(e,t);a&&this.#a(),t instanceof ce&&((this.#i||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#a(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Ox(this)}get serializable(){if(this.#n.size===0)return Qf;const e=new Map,t=new Lx,i=[],a=Object.create(null);let o=!1;for(const[c,u]of this.#n){const h=u instanceof ce?u.serialize(!1,a):u;u.page&&(u.pageIndex=u.page._pageIndex,delete u.page),h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const c of e.values())c.bitmap&&i.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Qf}get editorStats(){let e=null;const t=new Map;let i=0,a=0;for(const o of this.#n.values()){if(!(o instanceof ce)){o.popup&&(o.popup.deleted?a+=1:i+=1);continue}o.isCommentDeleted?a+=1:o.hasEditedComment&&(i+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;t.has(u)||t.set(u,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[f,p]of Object.entries(c)){if(f==="type")continue;let g=h.get(f);g||(g=new Map,h.set(f,g));const v=g.get(p)??0;g.set(p,v+1)}}if((a>0||i>0)&&(e||=Object.create(null),e.comments={deleted:a,edited:i}),!e)return null;for(const[o,c]of t)e[o]=c.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const t of this.#i.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class Ox extends Fp{#e;constructor(e){super();const{map:t,hash:i,transfer:a}=e.serializable,o=structuredClone(t,a?{transfer:a}:null);this.#e={map:o,hash:i,transfer:a}}get print(){ze("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return be(this,"modifiedIds",{ids:new Set,hash:""})}}class iD{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(Fe(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:a,src:o,style:c}=e,u=new FontFace(a,o,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(a),i?.(e)}catch{ve(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}ze("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(a){throw ve(`Failed to load font '${i.family}': '${a}'.`),e.disableFontFace=!0,a}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const a=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,a)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return be(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return be(this,"isSyncFontLoadingSupported",qt||wt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(Fe(!a.done,"completeRequest() cannot be called twice."),a.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,a={done:!1,complete:t,callback:e};return i.push(a),a}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return be(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(N,D){return N.charCodeAt(D)<<24|N.charCodeAt(D+1)<<16|N.charCodeAt(D+2)<<8|N.charCodeAt(D+3)&255}function a(N,D,M,P){const X=N.substring(0,D),H=N.substring(D+M);return X+P+H}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let f=0;function p(N,D){if(++f>30){ve("Load test font never loaded."),D();return}if(h.font="30px "+N,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){D();return}setTimeout(p.bind(null,N,D))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=a(v,976,g.length,g);const E=16,w=1482184792;let S=i(v,E);for(o=0,c=g.length-3;o<c;o+=4)S=S-w+i(g,o)|0;o<g.length&&(S=S-w+i(g+"XXX",o)|0),v=a(v,E,4,$N(S));const _=`url(data:font/opentype;base64,${btoa(v)});`,C=`@font-face {font-family:"${g}";src:${_}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const N of[e.loadedName,g]){const D=this._document.createElement("span");D.textContent="Hi",D.style.fontFamily=N,T.append(D)}this._document.body.append(T),p(g,()=>{T.remove(),t.complete()})}}class sD{#e;constructor(e,t=null,i,a){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,i&&Object.assign(this,i),a&&(this.charProcOperatorList=a)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let a;try{a=e.get(i)}catch(c){ve(`getPathGenerator - ignoring character: "${c}".`)}const o=kx(a?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){be(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){be(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class hr{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,i={};let a=0;for(const f of hr.strings){const p=t.encode(e[f]);i[f]=p,a+=4+p.length}const o=new ArrayBuffer(a),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const f of hr.strings){const p=i[f],g=p.length;u.setUint32(h,g),c.set(p,h+4),h+=4+g}return Fe(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){Fe(e<hr.strings.length,"Invalid string index");let t=0;for(let a=0;a<e;a++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class fr{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,i={};let a=0;for(const v of fr.strings){const x=t.encode(e[v]);i[v]=x,a+=4+x.length}a+=4;let o,c,u=1+a;e.style&&(o=t.encode(e.style.style),c=t.encode(e.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;p.setUint8(g++,e.guessFallback?1:0),p.setUint32(g,0),g+=4,a=0;for(const v of fr.strings){const x=i[v],E=x.length;a+=4+E,p.setUint32(g,E),f.set(x,g+4),g+=4+E}return p.setUint32(g-a-4,a),e.style&&(p.setUint32(g,o.length),f.set(o,g+4),g+=4+o.length,p.setUint32(g,c.length),f.set(c,g+4),g+=4+c.length),Fe(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){Fe(e<fr.strings.length,"Invalid string index");let t=5;for(let a=0;a<e;a++)t+=this.#t.getUint32(t)+4;const i=this.#t.getUint32(t);return this.#i.decode(new Uint8Array(this.#e,t+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const a=this.#t.getUint32(e),o=this.#i.decode(new Uint8Array(this.#e,e+4,a));return{style:i,weight:o}}}class We{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#a=this.#n+1+6;#r;#s;#o;constructor({data:e,extra:t}){this.#r=e,this.#s=new TextDecoder,this.#o=new DataView(this.#r),t&&Object.assign(this,t)}#c(e){Fe(e<We.bools.length,"Invalid boolean index");const t=Math.floor(e/4),i=e*2%8,a=this.#o.getUint8(t)>>i&3;return a===0?void 0:a===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return Fe(e<We.numbers.length,"Invalid number index"),this.#o.getFloat64(We.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=We.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<4;a++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=We.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<6;a++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=We.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let a=0;a<3;a++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#h(e){Fe(e<We.strings.length,"Invalid string index");let t=We.#a+4;for(let o=0;o<e;o++)t+=this.#o.getUint32(t)+4;const i=this.#o.getUint32(t),a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,t+4,i)),this.#s.decode(a)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);e+=4+a;const o=this.#o.getUint32(e);if(o!==0)return new Uint8Array(this.#r,e+4,o)}clearData(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);e+=4+a;const o=this.#o.getUint32(e);new Uint8Array(this.#r,e+4,o).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);e+=4+i;const a=this.#o.getUint32(e);if(a===0)return null;const o=new Uint8Array(a);return o.set(new Uint8Array(this.#r,e+4,a)),new hr(o.buffer)}get systemFontInfo(){let e=We.#a;const t=this.#o.getUint32(e);e+=4+t;const i=this.#o.getUint32(e);if(i===0)return null;const a=new Uint8Array(i);return a.set(new Uint8Array(this.#r,e+4,i)),new fr(a.buffer)}static write(e){const t=e.systemFontInfo?fr.write(e.systemFontInfo):null,i=e.cssFontInfo?hr.write(e.cssFontInfo):null,a=new TextEncoder,o={};let c=0;for(const w of We.strings)o[w]=a.encode(e[w]),c+=4+o[w].length;const u=We.#a+4+c+4+(t?t.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),f=new Uint8Array(h),p=new DataView(h);let g=0;const v=We.bools.length;let x=0,E=0;for(let w=0;w<v;w++){const S=e[We.bools[w]];x|=(S===void 0?0:S?2:1)<<E,E+=2,(E===8||w===v-1)&&(p.setUint8(g++,x),x=0,E=0)}Fe(g===We.#e,"FontInfo.write: Boolean properties offset mismatch");for(const w of We.numbers)p.setFloat64(g,e[w]),g+=8;if(Fe(g===We.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(g++,4);for(const w of e.bbox)p.setInt16(g,w,!0),g+=2}else p.setUint8(g++,0),g+=8;if(Fe(g===We.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(g++,6);for(const w of e.fontMatrix)p.setFloat64(g,w,!0),g+=8}else p.setUint8(g++,0),g+=48;if(Fe(g===We.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(g++,1);for(const w of e.defaultVMetrics)p.setInt16(g,w,!0),g+=2}else p.setUint8(g++,0),g+=6;Fe(g===We.#a,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(We.#a,0),g+=4;for(const w of We.strings){const S=o[w],_=S.length;p.setUint32(g,_),f.set(S,g+4),g+=4+_}if(p.setUint32(We.#a,g-We.#a-4),!t)p.setUint32(g,0),g+=4;else{const w=t.byteLength;p.setUint32(g,w),Fe(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),f.set(new Uint8Array(t),g+4),g+=4+w}if(!i)p.setUint32(g,0),g+=4;else{const w=i.byteLength;p.setUint32(g,w),Fe(g+4+w<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),f.set(new Uint8Array(i),g+4),g+=4+w}return e.data===void 0?(p.setUint32(g,0),g+=4):(p.setUint32(g,e.data.length),f.set(e.data,g+4),g+=4+e.data.length),Fe(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class Rt{static#e=0;static#t=1;static#i=2;static#n=3;static#a=4;static#r=8;static#s=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let t,i=null,a=[],o=[],c=[],u=[],h=null,f=null;switch(e[0]){case"RadialAxial":t=e[1]==="axial"?1:2,i=e[2],c=e[3],t===1?a.push(...e[4],...e[5]):a.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":t=3,h=e[1],a=e[2],o=e[3],u=e[4]||[],i=e[6],f=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const p=Math.floor(a.length/2),g=Math.floor(o.length/3),v=c.length,x=u.length;let E=0;for(const D of u)E+=1,E=Math.ceil(E/4)*4,E+=4+D.coords.length*4,E+=4+D.colors.length*4,D.verticesPerRow!==void 0&&(E+=4);const w=20+p*8+g*3+v*8+(i?16:0)+(f?3:0)+E,S=new ArrayBuffer(w),_=new DataView(S),C=new Uint8Array(S);_.setUint8(Rt.#e,t),_.setUint8(Rt.#t,i?1:0),_.setUint8(Rt.#i,f?1:0),_.setUint8(Rt.#n,h),_.setUint32(Rt.#a,p,!0),_.setUint32(Rt.#r,g,!0),_.setUint32(Rt.#s,v,!0),_.setUint32(Rt.#o,x,!0);let T=20;new Float32Array(S,T,p*2).set(a),T+=p*8,C.set(o,T),T+=g*3;for(const[D,M]of c)_.setFloat32(T,D,!0),T+=4,_.setUint32(T,parseInt(M.slice(1),16),!0),T+=4;if(i)for(const D of i)_.setFloat32(T,D,!0),T+=4;f&&(C.set(f,T),T+=3);for(let D=0;D<u.length;D++){const M=u[D];_.setUint8(T,M.type),T+=1,T=Math.ceil(T/4)*4,_.setUint32(T,M.coords.length,!0),T+=4,new Int32Array(S,T,M.coords.length).set(M.coords),T+=M.coords.length*4,_.setUint32(T,M.colors.length,!0),T+=4,new Int32Array(S,T,M.colors.length).set(M.colors),T+=M.colors.length*4,M.verticesPerRow!==void 0&&(_.setUint32(T,M.verticesPerRow,!0),T+=4)}return S}getIR(){const e=this.view,t=this.data[Rt.#e],i=!!this.data[Rt.#t],a=!!this.data[Rt.#i],o=e.getUint32(Rt.#a,!0),c=e.getUint32(Rt.#r,!0),u=e.getUint32(Rt.#s,!0),h=e.getUint32(Rt.#o,!0);let f=20;const p=new Float32Array(this.buffer,f,o*2);f+=o*8;const g=new Uint8Array(this.buffer,f,c*3);f+=c*3;const v=[];for(let S=0;S<u;++S){const _=e.getFloat32(f,!0);f+=4;const C=e.getUint32(f,!0);f+=4,v.push([_,`#${C.toString(16).padStart(6,"0")}`])}let x=null;if(i){x=[];for(let S=0;S<4;++S)x.push(e.getFloat32(f,!0)),f+=4}let E=null;a&&(E=new Uint8Array(this.buffer,f,3),f+=3);const w=[];for(let S=0;S<h;++S){const _=e.getUint8(f);f+=1,f=Math.ceil(f/4)*4;const C=e.getUint32(f,!0);f+=4;const T=new Int32Array(this.buffer,f,C);f+=C*4;const N=e.getUint32(f,!0);f+=4;const D=new Int32Array(this.buffer,f,N);f+=N*4;const M={type:_,coords:T,colors:D};_===Xf.LATTICE&&(M.verticesPerRow=e.getUint32(f,!0),f+=4),w.push(M)}if(t===1)return["RadialAxial","axial",x,v,Array.from(p.slice(0,2)),Array.from(p.slice(2,4)),null,null];if(t===2)return["RadialAxial","radial",x,v,[p[0],p[1]],[p[3],p[4]],p[2],p[5]];if(t===3){const S=this.data[Rt.#n];let _=null;if(p.length>0){let C=p[0],T=p[0],N=p[1],D=p[1];for(let M=0;M<p.length;M+=2){const P=p[M],X=p[M+1];C=C>P?P:C,N=N>X?X:N,T=T<P?P:T,D=D<X?X:D}_=[C,N,T,D]}return["Mesh",S,p,g,w,_,x,E]}throw new Error(`Unsupported pattern kind: ${t}`)}}class aD{static write(e){let t,i;return wt.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),t=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),t=new Float32Array(i)),t.set(e),i}#e;constructor(e){this.#e=e}get path(){return wt.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function rD(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(qt)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oD(r){if(qt&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return _u(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Oc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const Zf=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,lD=r=>typeof r=="object"&&typeof r?.name=="string",Ix=XN.bind(null,Zf,lD);class cD{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[a]of this.#e)a.call(this,i)})}addEventListener(e,t,i=null){let a=null;if(i?.signal instanceof AbortSignal){const{signal:o}=i;if(o.aborted){ve("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);a=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#e.set(t,a)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Ic={DATA:1,ERROR:2},vt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function r1(){}function rn(r){if(r instanceof Yi||r instanceof lu||r instanceof Zb||r instanceof Qo||r instanceof Af)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||ze('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new Yi(r.message);case"InvalidPDFException":return new lu(r.message);case"PasswordException":return new Zb(r.message,r.code);case"ResponseException":return new Qo(r.message,r.status,r.missing);case"UnknownErrorException":return new Af(r.message,r.details)}return new Af(r.message,r.toString())}class Bo{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,a=this.callbackCapabilities[i];if(!a)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===Ic.DATA)a.resolve(e.data);else if(e.callback===Ic.ERROR)a.reject(rn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,a=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(c){o.postMessage({sourceName:i,targetName:a,callback:Ic.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:i,targetName:a,callback:Ic.ERROR,callbackId:e.callbackId,reason:rn(c)})});return}if(e.streamId){this.#i(e);return}t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const a=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[a]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:a,data:t},i)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,i,a){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:f=>{const p=Promise.withResolvers();return this.streamControllers[o]={controller:f,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:o,data:t,desiredSize:f.desiredSize},a),p.promise},pull:f=>{const p=Promise.withResolvers();return this.streamControllers[o].pullCall=p,h.postMessage({sourceName:c,targetName:u,stream:vt.PULL,streamId:o,desiredSize:f.desiredSize}),p.promise},cancel:f=>{Fe(f instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[o].cancelCall=p,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:vt.CANCEL,streamId:o,reason:rn(f)}),p.promise}},i)}#i(e){const t=e.streamId,i=this.sourceName,a=e.sourceName,o=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(f,p=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:a,stream:vt.ENQUEUE,streamId:t,chunk:f},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:vt.CLOSE,streamId:t}),delete c.streamSinks[t])},error(f){Fe(f instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:a,stream:vt.ERROR,streamId:t,reason:rn(f)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.START_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.START_COMPLETE,streamId:t,reason:rn(f)})})}#n(e){const t=e.streamId,i=this.sourceName,a=e.sourceName,o=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case vt.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(rn(e.reason));break;case vt.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(rn(e.reason));break;case vt.PULL:if(!u){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||r1).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.PULL_COMPLETE,streamId:t,reason:rn(f)})});break;case vt.ENQUEUE:if(Fe(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case vt.CLOSE:if(Fe(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#a(c,t);break;case vt.ERROR:Fe(c,"error should have stream controller"),c.controller.error(rn(e.reason)),this.#a(c,t);break;case vt.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(rn(e.reason)),this.#a(c,t);break;case vt.CANCEL:if(!u)break;const h=rn(e.reason);Promise.try(u.onCancel||r1,h).then(function(){o.postMessage({sourceName:i,targetName:a,stream:vt.CANCEL_COMPLETE,streamId:t,success:!0})},function(f){o.postMessage({sourceName:i,targetName:a,stream:vt.CANCEL_COMPLETE,streamId:t,reason:rn(f)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#a(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class Px{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){ze("Abstract method `_createCanvas` called.")}}class uD extends Px{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class jx{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class o1 extends jx{async _fetch(e){const t=await Cr(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):_u(t)}}class Bx{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,a,o){return"none"}destroy(e=!1){}}class dD extends Bx{#e;#t;#i;#n;#a;#r;#s=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#n=e,this.#a=t}get#o(){return this.#t||=new Map}get#c(){return this.#r||=new Map}get#l(){if(!this.#i){const e=this.#a.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#a.createElementNS(Pi,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#a.createElementNS(Pi,"defs"),e.append(i),i.append(this.#i),this.#a.body.append(e)}return this.#i}#h(e){if(e.length===1){const h=e[0],f=new Array(256);for(let g=0;g<256;g++)f[g]=h[g]/255;const p=f.join(",");return[p,p,p]}const[t,i,a]=e,o=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=t[h]/255,c[h]=i[h]/255,u[h]=a[h]/255;return[o.join(","),c.join(","),u.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#a.URL;t!==this.#a.baseURI&&(dl(t)?ve('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=Op(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[i,a,o]=this.#h(e),c=e.length===1?i:`${i}${a}${o}`;if(t=this.#o.get(c),t)return this.#o.set(e,t),t;const u=`g_${this.#n}_transfer_map_${this.#s++}`,h=this.#d(u);this.#o.set(e,h),this.#o.set(c,h);const f=this.#m(u);return this.#p(i,a,o,f),h}addHCMFilter(e,t){const i=`${e}-${t}`,a="base";let o=this.#c.get(a);if(o?.key===i||(o?(o.filter?.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},this.#c.set(a,o)),!e||!t))return o.url;const c=this.#v(e);e=ne.makeHexColor(...c);const u=this.#v(t);if(t=ne.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const h=new Array(256);for(let x=0;x<=255;x++){const E=x/255;h[x]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const f=h.join(","),p=`g_${this.#n}_hcm_filter`,g=o.filter=this.#m(p);this.#p(f,f,f,g),this.#g(g);const v=(x,E)=>{const w=c[x]/255,S=u[x]/255,_=new Array(E+1);for(let C=0;C<=E;C++)_[C]=w+C/E*(S-w);return _.join(",")};return this.#p(v(0,5),v(1,5),v(2,5),g),o.url=this.#d(p),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[i]=this.#h([e]),a=`alpha_${i}`;if(t=this.#o.get(a),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_alpha_map_${this.#s++}`,c=this.#d(o);this.#o.set(e,c),this.#o.set(a,c);const u=this.#m(o);return this.#y(i,u),c}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let i,a;if(e?([i]=this.#h([e]),a=`luminosity_${i}`):a="luminosity",t=this.#o.get(a),t)return this.#o.set(e,t),t;const o=`g_${this.#n}_luminosity_map_${this.#s++}`,c=this.#d(o);this.#o.set(e,c),this.#o.set(a,c);const u=this.#m(o);return this.#f(u),e&&this.#y(i,u),c}addHighlightHCMFilter(e,t,i,a,o){const c=`${t}-${i}-${a}-${o}`;let u=this.#c.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(e,u)),!t||!i))return u.url;const[h,f]=[t,i].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*f[0]+.7152*f[1]+.0722*f[2]),[v,x]=[a,o].map(this.#v.bind(this));g<p&&([p,g,v,x]=[g,p,x,v]),this.#l.style.color="";const E=(_,C,T)=>{const N=new Array(256),D=(g-p)/T,M=_/255,P=(C-_)/(255*T);let X=0;for(let H=0;H<=T;H++){const $=Math.round(p+H*D),Y=M+H*P;for(let Z=X;Z<=$;Z++)N[Z]=Y;X=$+1}for(let H=X;H<256;H++)N[H]=N[X-1];return N.join(",")},w=`g_${this.#n}_hcm_${e}_filter`,S=u.filter=this.#m(w);return this.#g(S),this.#p(E(v[0],x[0],5),E(v[1],x[1],5),E(v[2],x[2],5),S),u.url=this.#d(w),u.url}destroy(e=!1){e&&this.#r?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#r?.clear(),this.#r=null,this.#s=0)}#f(e){const t=this.#a.createElementNS(Pi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#a.createElementNS(Pi,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#a.createElementNS(Pi,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#u(e,t,i){const a=this.#a.createElementNS(Pi,t);a.setAttribute("type","discrete"),a.setAttribute("tableValues",i),e.append(a)}#p(e,t,i,a){const o=this.#a.createElementNS(Pi,"feComponentTransfer");a.append(o),this.#u(o,"feFuncR",e),this.#u(o,"feFuncG",t),this.#u(o,"feFuncB",i)}#y(e,t){const i=this.#a.createElementNS(Pi,"feComponentTransfer");t.append(i),this.#u(i,"feFuncA",e)}#v(e){return this.#l.style.color=e,Rr(getComputedStyle(this.#l).getPropertyValue("color"))}}class Ux{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class l1 extends Ux{async _fetch(e){const t=await Cr(e,"arraybuffer");return new Uint8Array(t)}}class Fx{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){ze("Abstract method `_fetch` called.")}}class c1 extends Fx{async _fetch(e){const t=await Cr(e,"arraybuffer");return new Uint8Array(t)}}qt&&ve("Please use the `legacy` build in Node.js environments.");async function zp(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class hD extends Bx{}class fD extends Px{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class pD extends jx{async _fetch(e){return zp(e)}}class mD extends Ux{async _fetch(e){return zp(e)}}class gD extends Fx{async _fetch(e){return zp(e)}}const nr="__forcedDependency",{floor:u1,ceil:d1}=Math;function Pc(r,e,t,i,a,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],i),r[e*4+2]=Math.max(r[e*4+2],a),r[e*4+3]=Math.max(r[e*4+3],o)}const Jf=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class yD{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===Jf}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const jc=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};class bD{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[nr]:[]};#i=new Map;#n=[];#a=[];#r=[[1,0,0,1,0,0]];#s=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#d=new Map;#f;#g;#m;#u;#p;constructor(e,t,i=!1){this.#f=e.width,this.#g=e.height,this.#y(t),i&&(this.#p=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#y(e,this.#u)}#y(e,t){const i=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),t&&t.length>0?(this.#u.set(t),this.#u.fill(Jf,t.length)):this.#u.fill(Jf)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[nr]:{__proto__:this.#t[nr]}},this.#s={__proto__:this.#s},this.#n.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#s=Object.getPrototypeOf(this.#s);const i=this.#n.pop();return i!==void 0&&(jc(this.#p,e)?.dependencies.add(i),this.#u[e]=this.#u[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const t=this.#n.pop();return t!==void 0&&(jc(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}beginMarkedContent(e){return this.#a.push(e),this}endMarkedContent(e){const t=this.#a.pop();return t!==void 0&&(jc(this.#p,e)?.dependencies.add(t),this.#u[e]=this.#u[t]),this}pushBaseTransform(e){return this.#r.push(ne.multiplyByDOMMatrix(this.#r.at(-1),e.getTransform())),this}popBaseTransform(){return this.#r.length>1&&this.#r.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#i.set(e,t),this}recordSimpleDataFromNamed(e,t,i){this.#e[e]=this.#i.get(t)??i}recordFutureForcedDependency(e,t){return this.recordIncrementalData(nr,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(nr,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,i,a,o,c){const u=ne.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];ne.axialAlignedBoundingBox([i,o,a,c],u,h);const f=ne.intersect(this.#s,h);return f?(this.#s[0]=f[0],this.#s[1]=f[1],this.#s[2]=f[2],this.#s[3]=f[3]):(this.#s[0]=this.#s[1]=1/0,this.#s[2]=this.#s[3]=-1/0),this}recordBBox(e,t,i,a,o,c){const u=this.#s;if(u[0]===1/0)return this;const h=ne.multiplyByDOMMatrix(this.#r.at(-1),t.getTransform());if(u[0]===-1/0)return ne.axialAlignedBoundingBox([i,o,a,c],h,this.#o),this;const f=[1/0,1/0,-1/0,-1/0];return ne.axialAlignedBoundingBox([i,o,a,c],h,f),this.#o[0]=Math.min(this.#o[0],Math.max(f[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(f[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(f[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(f[3],u[3])),this}recordCharacterBBox(e,t,i,a=1,o=0,c=0,u){const h=i.bbox;let f,p;if(h&&(f=h[2]!==h[0]&&h[3]!==h[1]&&this.#d.get(i),f!==!1&&(p=[0,0,0,0],ne.axialAlignedBoundingBox(h,i.fontMatrix,p),(a!==1||o!==0||c!==0)&&ne.scaleMinMax([a,0,0,-a,o,c],p),f)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&p&&f===void 0&&(f=p[0]<=o-g.actualBoundingBoxLeft&&p[2]>=o+g.actualBoundingBoxRight&&p[1]<=c-g.actualBoundingBoxAscent&&p[3]>=c+g.actualBoundingBoxDescent,this.#d.set(i,f),f)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,c-g.actualBoundingBoxAscent,c+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#s[0]),this.#o[1]=Math.max(0,this.#s[1]),this.#o[2]=Math.min(this.#f,this.#s[2]),this.#o[3]=Math.min(this.#g,this.#s[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const i=this.#l,a=this.#e,o=this.#t;for(const c of t)c in this.#e?i.add(a[c]):c in o&&o[c].forEach(i.add,i);return this}recordNamedDependency(e,t){return this.#i.has(t)&&this.#l.add(this.#i.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[nr]),this.#p){const i=jc(this.#p,e),{dependencies:a}=i;this.#l.forEach(a.add,a),this.#n.forEach(a.add,a),this.#a.forEach(a.add,a),a.delete(e),i.isRenderingOperation=!0}if(this.#c===e){const i=u1(this.#o[0]*256/this.#f),a=u1(this.#o[1]*256/this.#g),o=d1(this.#o[2]*256/this.#f),c=d1(this.#o[3]*256/this.#g);Pc(this.#m,e,i,a,o,c);for(const u of this.#l)u!==e&&Pc(this.#m,u,i,a,o,c);for(const u of this.#n)u!==e&&Pc(this.#m,u,i,a,o,c);for(const u of this.#a)u!==e&&Pc(this.#m,u,i,a,o,c);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const i=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const a of i)this.recordIncrementalData("sameLineText",a);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#s[0]=Math.max(this.#s[0],this.#o[0]),this.#s[1]=Math.max(this.#s[1],this.#o[1]),this.#s[2]=Math.min(this.#s[2],this.#o[2]),this.#s[3]=Math.min(this.#s[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#d.clear(),new yD(this.#u,this.#m)}takeDebugMetadata(){return this.#p}}class du{#e;#t;#i;#n=0;#a=0;constructor(e,t,i){if(e instanceof du&&e.#i===!!i)return e;this.#e=e,this.#t=t,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#a++,this.#e.save(this.#t),this}restore(e){return this.#a>0&&(this.#e.restore(this.#t),this.#a--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,i){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,i,a,o,c){return this.#i||this.#e.recordClipBox(this.#t,t,i,a,o,c),this}recordBBox(e,t,i,a,o,c){return this.#i||this.#e.recordBBox(this.#t,t,i,a,o,c),this}recordCharacterBBox(e,t,i,a,o,c,u){return this.#i||this.#e.recordCharacterBBox(this.#t,t,i,a,o,c,u),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Pn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},jt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ep(r,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],a=new Path2D;a.rect(e[0],e[1],t,i),r.clip(a)}class Hp{isModifyingCurrentTransform(){return!1}getPattern(){ze("Abstract method `getPattern` called.")}}class vD extends Hp{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,t=null){let i,a=this._p0,o=this._p1;if(t&&(a=a.slice(),o=o.slice(),ne.applyTransform(a,t),ne.applyTransform(o,t)),this._type==="axial")i=e.createLinearGradient(a[0],a[1],o[0],o[1]);else if(this._type==="radial"){let c=this._r0,u=this._r1;if(t){const h=new Float32Array(2);ne.singularValueDecompose2dScale(t,h),c*=h[0],u*=h[0]}i=e.createRadialGradient(a[0],a[1],c,o[0],o[1],u)}for(const c of this._colorStops)i.addColorStop(c[0],c[1]);return i}getPattern(e,t,i,a){let o;if(a===jt.STROKE||a===jt.FILL){if(this.isOriginBased()){let v=ne.transform(i,t.baseTransform);this.matrix&&(v=ne.transform(v,this.matrix));const x=.001,E=Math.hypot(v[0],v[1]),w=Math.hypot(v[2],v[3]),S=(v[0]*v[2]+v[1]*v[3])/(E*w);if(Math.abs(S)<x)if(this.isRadial()){if(Math.abs(E-w)<x)return this._createGradient(e,v)}else return this._createGradient(e,v)}const c=t.current.getClippedPathBoundingBox(a,at(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,f=t.cachedCanvases.getCanvas("pattern",u,h),p=f.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-c[0],-c[1]),i=ne.transform(i,[1,0,0,1,c[0],c[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),ep(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),o=e.createPattern(f.canvas,"no-repeat");const g=new DOMMatrix(i);o.setTransform(g)}else ep(e,this._bbox),o=this._createGradient(e);return o}}function _f(r,e,t,i,a,o,c,u){const h=e.coords,f=e.colors,p=r.data,g=r.width*4;let v;h[t+1]>h[i+1]&&(v=t,t=i,i=v,v=o,o=c,c=v),h[i+1]>h[a+1]&&(v=i,i=a,a=v,v=c,c=u,u=v),h[t+1]>h[i+1]&&(v=t,t=i,i=v,v=o,o=c,c=v);const x=(h[t]+e.offsetX)*e.scaleX,E=(h[t+1]+e.offsetY)*e.scaleY,w=(h[i]+e.offsetX)*e.scaleX,S=(h[i+1]+e.offsetY)*e.scaleY,_=(h[a]+e.offsetX)*e.scaleX,C=(h[a+1]+e.offsetY)*e.scaleY;if(E>=C)return;const T=f[o],N=f[o+1],D=f[o+2],M=f[c],P=f[c+1],X=f[c+2],H=f[u],$=f[u+1],Y=f[u+2],Z=Math.round(E),se=Math.round(C);let re,me,j,q,ee,ge,_e,O;for(let V=Z;V<=se;V++){if(V<S){const de=V<E?0:(E-V)/(E-S);re=x-(x-w)*de,me=T-(T-M)*de,j=N-(N-P)*de,q=D-(D-X)*de}else{let de;V>C?de=1:S===C?de=0:de=(S-V)/(S-C),re=w-(w-_)*de,me=M-(M-H)*de,j=P-(P-$)*de,q=X-(X-Y)*de}let J;V<E?J=0:V>C?J=1:J=(E-V)/(E-C),ee=x-(x-_)*J,ge=T-(T-H)*J,_e=N-(N-$)*J,O=D-(D-Y)*J;const te=Math.round(Math.min(re,ee)),ue=Math.round(Math.max(re,ee));let ye=g*V+te*4;for(let de=te;de<=ue;de++)J=(re-de)/(re-ee),J<0?J=0:J>1&&(J=1),p[ye++]=me-(me-ge)*J|0,p[ye++]=j-(j-_e)*J|0,p[ye++]=q-(q-O)*J|0,p[ye++]=255}}function xD(r,e,t){const i=e.coords,a=e.colors;let o,c;switch(e.type){case Xf.LATTICE:const u=e.verticesPerRow,h=Math.floor(i.length/u)-1,f=u-1;for(o=0;o<h;o++){let p=o*u;for(let g=0;g<f;g++,p++)_f(r,t,i[p],i[p+1],i[p+u],a[p],a[p+1],a[p+u]),_f(r,t,i[p+u+1],i[p+1],i[p+u],a[p+u+1],a[p+1],a[p+u])}break;case Xf.TRIANGLES:for(o=0,c=i.length;o<c;o+=3)_f(r,t,i[o],i[o+1],i[o+2],a[o],a[o+1],a[o+2]);break;default:throw new Error("illegal figure")}}class wD extends Hp{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),f=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(f*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),x=f/g,E=p/v,w={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/x,scaleY:1/E},S=g+4,_=v+4,C=i.getCanvas("mesh",S,_),T=C.context,N=T.createImageData(g,v);if(t){const M=N.data;for(let P=0,X=M.length;P<X;P+=4)M[P]=t[0],M[P+1]=t[1],M[P+2]=t[2],M[P+3]=255}for(const M of this._figures)xD(N,M,w);return T.putImageData(N,2,2),{canvas:C.canvas,offsetX:u-2*x,offsetY:h-2*E,scaleX:x,scaleY:E}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,a){ep(e,this._bbox);const o=new Float32Array(2);if(a===jt.SHADING)ne.singularValueDecompose2dScale(at(e),o);else if(this.matrix){ne.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;ne.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=u,o[1]*=h}else ne.singularValueDecompose2dScale(t.baseTransform,o);const c=this._createMeshCanvas(o,a===jt.SHADING?null:this._background,t.cachedCanvases);return a!==jt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class AD extends Hp{getPattern(){return"hotpink"}}function SD(r){switch(r[0]){case"RadialAxial":return new vD(r);case"Mesh":return new wD(r);case"Dummy":return new AD}throw new Error(`Unknown IR type: ${r[0]}`)}const h1={COLORED:1,UNCOLORED:2};class Vp{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,a){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=a}createPatternCanvas(e,t){const{bbox:i,operatorList:a,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:f,ystep:p}=this;f=Math.abs(f),p=Math.abs(p),Eu("TilingType: "+c);const g=i[0],v=i[1],x=i[2],E=i[3],w=x-g,S=E-v,_=new Float32Array(2);ne.singularValueDecompose2dScale(this.matrix,_);const[C,T]=_;ne.singularValueDecompose2dScale(this.baseTransform,_);const N=C*_[0],D=T*_[1];let M=w,P=S,X=!1,H=!1;const $=Math.ceil(f*N),Y=Math.ceil(p*D),Z=Math.ceil(w*N),se=Math.ceil(S*D);$>=Z?M=f:X=!0,Y>=se?P=p:H=!0;const re=this.getSizeAndScale(M,this.ctx.canvas.width,N),me=this.getSizeAndScale(P,this.ctx.canvas.height,D),j=e.cachedCanvases.getCanvas("pattern",re.size,me.size),q=j.context,ee=h.createCanvasGraphics(q,t);if(ee.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ee,o,u),q.translate(-re.scale*g,-me.scale*v),ee.transform(0,re.scale,0,0,me.scale,0,0),q.save(),ee.dependencyTracker?.save(),this.clipBbox(ee,g,v,x,E),ee.baseTransform=at(ee.ctx),ee.executeOperatorList(a),ee.endDrawing(),ee.dependencyTracker?.restore(),q.restore(),X||H){const ge=j.canvas;X&&(M=f),H&&(P=p);const _e=this.getSizeAndScale(M,this.ctx.canvas.width,N),O=this.getSizeAndScale(P,this.ctx.canvas.height,D),V=_e.size,J=O.size,te=e.cachedCanvases.getCanvas("pattern-workaround",V,J),ue=te.context,ye=X?Math.floor(w/f):0,de=H?Math.floor(S/p):0;for(let lt=0;lt<=ye;lt++)for(let He=0;He<=de;He++)ue.drawImage(ge,V*lt,J*He,V,J,0,0,V,J);return{canvas:te.canvas,scaleX:_e.scale,scaleY:O.scale,offsetX:g,offsetY:v}}return{canvas:j.canvas,scaleX:re.scale,scaleY:me.scale,offsetX:g,offsetY:v}}getSizeAndScale(e,t,i){const a=Math.max(Vp.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*i);return o>=a?o=a:i=o/e,{scale:i,size:o}}clipBbox(e,t,i,a,o){const c=a-t,u=o-i;e.ctx.rect(t,i,c,u),ne.axialAlignedBoundingBox([t,i,a,o],at(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const a=e.ctx,o=e.current;switch(t){case h1.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;a.fillStyle=o.fillColor=c,a.strokeStyle=o.strokeColor=u;break;case h1.UNCOLORED:a.fillStyle=a.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new VN(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,a,o){let c=i;a!==jt.SHADING&&(c=ne.transform(c,t.baseTransform),this.matrix&&(c=ne.transform(c,this.matrix)));const u=this.createPatternCanvas(t,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const f=e.createPattern(u.canvas,"repeat");return f.setTransform(h),f}}function ED({src:r,srcPos:e=0,dest:t,width:i,height:a,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=wt.isLittleEndian?4278190080:255,[h,f]=c?[o,u]:[u,o],p=i>>3,g=i&7,v=r.length;t=new Uint32Array(t.buffer);let x=0;for(let E=0;E<a;E++){for(const S=e+p;e<S;e++){const _=e<v?r[e]:255;t[x++]=_&128?f:h,t[x++]=_&64?f:h,t[x++]=_&32?f:h,t[x++]=_&16?f:h,t[x++]=_&8?f:h,t[x++]=_&4?f:h,t[x++]=_&2?f:h,t[x++]=_&1?f:h}if(g===0)continue;const w=e<v?r[e++]:255;for(let S=0;S<g;S++)t[x++]=w&1<<7-S?f:h}return{srcPos:e,destPos:x}}const f1=16,p1=100,_D=15,m1=10,on=16,Tf=new DOMMatrix,xn=new Float32Array(2),or=new Float32Array([1/0,1/0,-1/0,-1/0]);function TD(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},r.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},r.transform=function(t,i,a,o,c,u){e.transform(t,i,a,o,c,u),this.__originalTransform(t,i,a,o,c,u)},r.setTransform=function(t,i,a,o,c,u){e.setTransform(t,i,a,o,c,u),this.__originalSetTransform(t,i,a,o,c,u)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},r.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},r.bezierCurveTo=function(t,i,a,o,c,u){e.bezierCurveTo(t,i,a,o,c,u),this.__originalBezierCurveTo(t,i,a,o,c,u)},r.rect=function(t,i,a,o){e.rect(t,i,a,o),this.__originalRect(t,i,a,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class CD{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let a;return this.cache[e]!==void 0?(a=this.cache[e],this.canvasFactory.reset(a,t,i)):(a=this.canvasFactory.create(t,i),this.cache[e]=a),a}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Bc(r,e,t,i,a,o,c,u,h,f){const[p,g,v,x,E,w]=at(r);if(g===0&&v===0){const C=c*p+E,T=Math.round(C),N=u*x+w,D=Math.round(N),M=(c+h)*p+E,P=Math.abs(Math.round(M)-T)||1,X=(u+f)*x+w,H=Math.abs(Math.round(X)-D)||1;return r.setTransform(Math.sign(p),0,0,Math.sign(x),T,D),r.drawImage(e,t,i,a,o,0,0,P,H),r.setTransform(p,g,v,x,E,w),[P,H]}if(p===0&&x===0){const C=u*v+E,T=Math.round(C),N=c*g+w,D=Math.round(N),M=(u+f)*v+E,P=Math.abs(Math.round(M)-T)||1,X=(c+h)*g+w,H=Math.abs(Math.round(X)-D)||1;return r.setTransform(0,Math.sign(g),Math.sign(v),0,T,D),r.drawImage(e,t,i,a,o,0,0,H,P),r.setTransform(p,g,v,x,E,w),[H,P]}r.drawImage(e,t,i,a,o,c,u,h,f);const S=Math.hypot(p,g),_=Math.hypot(v,x);return[S*h,_*f]}class g1{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Wf;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Et.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,i){i?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=or.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=jt.FILL,t=null){const i=this.minMax.slice();if(e===jt.STROKE){t||ze("Stroke bounding box must include transform."),ne.singularValueDecompose2dScale(t,xn);const a=xn[0]*this.lineWidth/2,o=xn[1]*this.lineWidth/2;i[0]-=a,i[1]-=o,i[2]+=a,i[3]+=o}return i}updateClipFromPath(){const e=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(or,0)}getClippedPathBoundingBox(e=jt.FILL,t=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function y1(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,i=e.width,a=t%on,o=(t-a)/on,c=a===0?o:o+1,u=r.createImageData(i,on);let h=0,f;const p=e.data,g=u.data;let v,x,E,w;if(e.kind===Ho.GRAYSCALE_1BPP){const S=p.byteLength,_=new Uint32Array(g.buffer,0,g.byteLength>>2),C=_.length,T=i+7>>3,N=4294967295,D=wt.isLittleEndian?4278190080:255;for(v=0;v<c;v++){for(E=v<o?on:a,f=0,x=0;x<E;x++){const M=S-h;let P=0;const X=M>T?i:M*8-7,H=X&-8;let $=0,Y=0;for(;P<H;P+=8)Y=p[h++],_[f++]=Y&128?N:D,_[f++]=Y&64?N:D,_[f++]=Y&32?N:D,_[f++]=Y&16?N:D,_[f++]=Y&8?N:D,_[f++]=Y&4?N:D,_[f++]=Y&2?N:D,_[f++]=Y&1?N:D;for(;P<X;P++)$===0&&(Y=p[h++],$=128),_[f++]=Y&$?N:D,$>>=1}for(;f<C;)_[f++]=0;r.putImageData(u,0,v*on)}}else if(e.kind===Ho.RGBA_32BPP){for(x=0,w=i*on*4,v=0;v<o;v++)g.set(p.subarray(h,h+w)),h+=w,r.putImageData(u,0,x),x+=on;v<c&&(w=i*a*4,g.set(p.subarray(h,h+w)),r.putImageData(u,0,x))}else if(e.kind===Ho.RGB_24BPP)for(E=on,w=i*E,v=0;v<c;v++){for(v>=o&&(E=a,w=i*E),f=0,x=w;x--;)g[f++]=p[h++],g[f++]=p[h++],g[f++]=p[h++],g[f++]=255;r.putImageData(u,0,v*on)}else throw new Error(`bad image kind: ${e.kind}`)}function b1(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,a=t%on,o=(t-a)/on,c=a===0?o:o+1,u=r.createImageData(i,on);let h=0;const f=e.data,p=u.data;for(let g=0;g<c;g++){const v=g<o?on:a;({srcPos:h}=ED({src:f,srcPos:h,dest:p,width:i,height:v,nonBlackColor:0})),r.putImageData(u,0,g*on)}}function No(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)r[i]!==void 0&&(e[i]=r[i]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function Uc(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function v1(r,e){if(e)return!0;ne.singularValueDecompose2dScale(r,xn);const t=Math.fround(Wn.pixelRatio*ca.PDF_TO_CSS_UNITS);return xn[0]<=t&&xn[1]<=t}const RD=["butt","round","square"],ND=["miter","round","bevel"],DD={},x1={};class pr{constructor(e,t,i,a,o,{optionalContentConfig:c,markedContentStack:u=null},h,f,p){this.ctx=e,this.current=new g1(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=a,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new CD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=f,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,i=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):i}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:a=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=a||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,i){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...at(this.compositeCtx))}this.ctx.save(),Uc(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=at(this.ctx)}executeOperatorList(e,t,i,a,o){const c=e.argsArray,u=e.fnArray;let h=t||0;const f=c.length;if(f===h)return h;const p=f-h>m1&&typeof i=="function",g=p?Date.now()+_D:0;let v=0;const x=this.commonObjs,E=this.objs;let w,S;for(;;){if(a!==void 0&&h===a.nextBreakPoint)return a.breakIt(h,i),h;if(!o||o(h))if(w=u[h],S=c[h]??null,w!==vr.dependency)S===null?this[w](h):this[w](h,...S);else for(const _ of S){this.dependencyTracker?.recordNamedData(_,h);const C=_.startsWith("g_")?x:E;if(!C.has(_))return C.get(_,i),h}if(h++,h===f)return h;if(p&&++v>m1){if(Date.now()>g)return i(),h;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,a=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=i,h=a,f="prescale1",p,g;for(;o>2&&u>1||c>2&&h>1;){let v=u,x=h;o>2&&u>1&&(v=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/v),c>2&&h>1&&(x=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/x),p=this.cachedCanvases.getCanvas(f,v,x),g=p.context,g.clearRect(0,0,v,x),g.drawImage(e,0,0,u,h,0,0,v,x),e=p.canvas,u=v,h=x,f=f==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const i=this.ctx,{width:a,height:o}=t,c=this.current.fillColor,u=this.current.patternFill,h=at(i);let f,p,g,v;if((t.bitmap||t.data)&&t.count>1){const $=t.bitmap||t.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),c]),f=this._cachedBitmapsMap.get($),f||(f=new Map,this._cachedBitmapsMap.set($,f));const Y=f.get(p);if(Y&&!u){const Z=Math.round(Math.min(h[0],h[2])+h[4]),se=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,Pn.transformAndFill),{canvas:Y,offsetX:Z,offsetY:se}}g=Y}g||(v=this.cachedCanvases.getCanvas("maskCanvas",a,o),b1(v.context,t));let x=ne.transform(h,[1/a,0,0,-1/o,0,0]);x=ne.transform(x,[1,0,0,1,0,-o]);const E=or.slice();ne.axialAlignedBoundingBox([0,0,a,o],x,E);const[w,S,_,C]=E,T=Math.round(_-w)||1,N=Math.round(C-S)||1,D=this.cachedCanvases.getCanvas("fillCanvas",T,N),M=D.context,P=w,X=S;M.translate(-P,-X),M.transform(...x),g||(g=this._scaleImage(v.canvas,ri(M)),g=g.img,f&&u&&f.set(p,g)),M.imageSmoothingEnabled=v1(at(M),t.interpolate),Bc(M,g,0,0,g.width,g.height,0,0,a,o),M.globalCompositeOperation="source-in";const H=ne.transform(ri(M),[1,0,0,1,-P,-X]);return M.fillStyle=u?c.getPattern(i,this,H,jt.FILL,e):c,M.fillRect(0,0,a,o),f&&!u&&(this.cachedCanvases.delete("fillCanvas"),f.set(p,D.canvas)),this.dependencyTracker?.recordDependencies(e,Pn.transformAndFill),{canvas:D.canvas,offsetX:Math.round(P),offsetY:Math.round(X)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=RD[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=ND[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,i){this.dependencyTracker?.recordSimpleData("dash",e);const a=this.ctx;a.setLineDash!==void 0&&(a.setLineDash(t),a.lineDashOffset=i)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[i,a]of t)switch(i){case"LW":this.setLineWidth(e,a);break;case"LC":this.setLineCap(e,a);break;case"LJ":this.setLineJoin(e,a);break;case"ML":this.setMiterLimit(e,a);break;case"D":this.setDash(e,a[0],a[1]);break;case"RI":this.setRenderingIntent(e,a);break;case"FL":this.setFlatness(e,a);break;case"Font":this.setFont(e,a[0],a[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=a;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=a;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=a;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=a?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(a);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,a="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(a,t,i);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),No(this.suspendedCtx,c),TD(c,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),No(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,a){const o=a[0],c=a[1],u=a[2]-o,h=a[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,i,u,h,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,a,o,c,u,h,f,p,g){let v=e.canvas,x=h-p,E=f-g;if(c)if(x<0||E<0||x+i>v.width||E+a>v.height){const S=this.cachedCanvases.getCanvas("maskExtension",i,a),_=S.context;_.drawImage(v,-x,-E),_.globalCompositeOperation="destination-atop",_.fillStyle=c,_.fillRect(0,0,i,a),_.globalCompositeOperation="source-over",v=S.canvas,x=E=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(x,E,i,a),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(x,E,i,a),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const w=new Path2D;w.rect(h,f,i,a),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(v,x,E,i,a,h,f,i,a),t.restore()}save(e){this.inSMaskMode&&No(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&No(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,a,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,i,a,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i,a){let[o]=i;if(!a){o||=i[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const c=t===vr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,a[0]-c,a[2]+c,a[1]-c,a[3]+c).recordDependencies(e,["transform"])}o instanceof Path2D||(o=i[0]=kx(o)),ne.axialAlignedBoundingBox(a,at(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,i=!0){const a=this.ctx,o=this.current.strokeColor;if(a.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?a.getTransform():null;if(a.save(),a.strokeStyle=o.getPattern(a,this,ri(a),jt.STROKE,e),c){const u=new Path2D;u.addPath(t,a.getTransform().invertSelf().multiplySelf(c)),t=u}this.rescaleAndStroke(t,!1),a.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,Pn.stroke),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(jt.STROKE,at(this.ctx))),a.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,i=!0){const a=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const f=o.isModifyingCurrentTransform()?a.getTransform():null;if(this.dependencyTracker?.save(e),a.save(),a.fillStyle=o.getPattern(a,this,ri(a),jt.FILL,e),f){const p=new Path2D;p.addPath(t,a.getTransform().invertSelf().multiplySelf(f)),t=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(a.fill(t,"evenodd"),this.pendingEOFill=!1):a.fill(t)),this.dependencyTracker?.recordDependencies(e,Pn.fill),u&&(a.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,Pn.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=DD}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=x1}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:a}=this;t!==void 0&&a.recordFutureForcedDependency("textClip",a.getOpenMarker()).recordFutureForcedDependency("textClip",e),a.recordCloseMarker(e)}if(t!==void 0){const a=new Path2D,o=i.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:f,path:p}of t)p&&a.addPath(p,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(f,-f));i.clip(a)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const a=this.commonObjs.get(t),o=this.current;if(!a)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=a.fontMatrix||Wf,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&ve("Invalid font matrix for font "+t),i<0?(i=-i,o.fontDirection=-1):o.fontDirection=1,this.current.font=a,this.current.fontSize=i,a.isType3Font)return;const c=a.loadedName||"sans-serif",u=a.systemFontInfo?.css||`"${c}", ${a.fallbackName}`;let h="normal";a.black?h="900":a.bold&&(h="bold");const f=a.italic?"italic":"normal";let p=i;i<f1?p=f1:i>p1&&(p=p1),this.current.fontSizeScale=i/p,this.ctx.font=`${f} ${h} ${p}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,t,i){this.setLeading(e,-i),this.moveText(e,t,i)}setTextMatrix(e,t){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,t,i){const a=new Path2D;return a.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),a}paintChar(e,t,i,a,o,c){const u=this.ctx,h=this.current,f=h.font,p=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,v=p&Et.FILL_STROKE_MASK,x=!!(p&Et.ADD_TO_PATH_FLAG),E=h.patternFill&&!f.missingFile,w=h.patternStroke&&!f.missingFile;let S;if((f.disableFontFace||x||E||w)&&!f.missingFile&&(S=f.getPathGenerator(this.commonObjs,t)),S&&(f.disableFontFace||E||w)){u.save(),u.translate(i,a),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,f);let _;if(v===Et.FILL||v===Et.FILL_STROKE)if(o){_=u.getTransform(),u.setTransform(...o);const C=this.#i(S,_,o);u.fill(C)}else u.fill(S);if(v===Et.STROKE||v===Et.FILL_STROKE)if(c){_||=u.getTransform(),u.setTransform(...c);const{a:C,b:T,c:N,d:D}=_,M=ne.inverseTransform(c),P=ne.transform([C,T,N,D,0,0],M);ne.singularValueDecompose2dScale(P,xn),u.lineWidth*=Math.max(xn[0],xn[1])/g,u.stroke(this.#i(S,_,c))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(v===Et.FILL||v===Et.FILL_STROKE)&&(u.fillText(t,i,a),this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a,()=>u.measureText(t))),(v===Et.STROKE||v===Et.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a,()=>u.measureText(t)).recordDependencies(e,Pn.stroke),u.strokeText(t,i,a));x&&((this.pendingTextPaths||=[]).push({transform:at(u),x:i,y:a,fontSize:g,path:S}),this.dependencyTracker?.recordCharacterBBox(e,u,f,g,i,a))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let a=3;a<t.length;a+=4)if(t[a]>0&&t[a]<255){i=!0;break}return be(this,"isFontSubpixelAAEnabled",i)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Pn.showText).resetBBox(e),this.current.textRenderingMode&Et.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,a=i.font;if(a.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=i.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const c=this.ctx,u=i.fontSizeScale,h=i.charSpacing,f=i.wordSpacing,p=i.fontDirection,g=i.textHScale*p,v=t.length,x=a.vertical,E=x?1:-1,w=a.defaultVMetrics,S=o*i.fontMatrix[0],_=i.textRenderingMode===Et.FILL&&!a.disableFontFace&&!i.patternFill;c.save(),i.textMatrix&&c.transform(...i.textMatrix),c.translate(i.x,i.y+i.textRise),p>0?c.scale(g,-1):c.scale(g,1);let C,T;const N=i.textRenderingMode&Et.FILL_STROKE_MASK,D=N===Et.FILL||N===Et.FILL_STROKE,M=N===Et.STROKE||N===Et.FILL_STROKE;if(D&&i.patternFill){c.save();const Y=i.fillColor.getPattern(c,this,ri(c),jt.FILL,e);C=at(c),c.restore(),c.fillStyle=Y}if(M&&i.patternStroke){c.save();const Y=i.strokeColor.getPattern(c,this,ri(c),jt.STROKE,e);T=at(c),c.restore(),c.strokeStyle=Y}let P=i.lineWidth;const X=i.textMatrixScale;if(X===0||P===0?M&&(P=this.getSinglePixelWidth()):P/=X,u!==1&&(c.scale(u,u),P/=u),c.lineWidth=P,a.isInvalidPDFjsFont){const Y=[];let Z=0;for(const re of t)Y.push(re.unicode),Z+=re.width;const se=Y.join("");if(c.fillText(se,0,0),this.dependencyTracker!==null){const re=c.measureText(se);this.dependencyTracker.recordBBox(e,this.ctx,-re.actualBoundingBoxLeft,re.actualBoundingBoxRight,-re.actualBoundingBoxAscent,re.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=Z*S*g,c.restore(),this.compose();return}let H=0,$;for($=0;$<v;++$){const Y=t[$];if(typeof Y=="number"){H+=E*Y*o/1e3;continue}let Z=!1;const se=(Y.isSpace?f:0)+h,re=Y.fontChar,me=Y.accent;let j,q,ee=Y.width;if(x){const O=Y.vmetric||w,V=-(Y.vmetric?O[1]:ee*.5)*S,J=O[2]*S;ee=O?-O[0]:ee,j=V/u,q=(H+J)/u}else j=H/u,q=0;let ge;if(a.remeasure&&ee>0){ge=c.measureText(re);const O=ge.width*1e3/o*u;if(ee<O&&this.isFontSubpixelAAEnabled){const V=ee/O;Z=!0,c.save(),c.scale(V,1),j/=V}else ee!==O&&(j+=(ee-O)/2e3*o/u)}if(this.contentVisible&&(Y.isInFont||a.missingFile)){if(_&&!me)c.fillText(re,j,q),this.dependencyTracker?.recordCharacterBBox(e,c,ge?{bbox:null}:a,o/u,j,q,()=>ge??c.measureText(re));else if(this.paintChar(e,re,j,q,C,T),me){const O=j+o*me.offset.x/u,V=q-o*me.offset.y/u;this.paintChar(e,me.fontChar,O,V,C,T)}}const _e=x?ee*S-se*p:ee*S+se*p;H+=_e,Z&&c.restore()}x?i.y-=H:i.x+=H*g,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const i=this.ctx,a=this.current,o=a.font,c=a.fontSize,u=a.fontDirection,h=o.vertical?1:-1,f=a.charSpacing,p=a.wordSpacing,g=a.textHScale*u,v=a.fontMatrix||Wf,x=t.length,E=a.textRenderingMode===Et.INVISIBLE;let w,S,_,C;if(E||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),a.textMatrix&&i.transform(...a.textMatrix),i.translate(a.x,a.y+a.textRise),i.scale(g,u);const T=this.dependencyTracker;for(this.dependencyTracker=T?new du(T,e):null,w=0;w<x;++w){if(S=t[w],typeof S=="number"){C=h*S*c/1e3,this.ctx.translate(C,0),a.x+=C*g;continue}const N=(S.isSpace?p:0)+f,D=o.charProcOperatorList[S.operatorListId];D?this.contentVisible&&(this.save(),i.scale(c,c),i.transform(...v),this.executeOperatorList(D),this.restore()):ve(`Type3 character "${S.operatorListId}" is not available.`);const M=[S.width,0];ne.applyTransform(M,v),_=M[0]*c+N,i.translate(_,0),a.x+=_*g}i.restore(),T&&(this.dependencyTracker=T)}setCharWidth(e,t,i){}setCharWidthAndBounds(e,t,i,a,o,c,u){const h=new Path2D;h.rect(a,o,c-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,a,c,o,u).recordClipBox(e,this.ctx,a,c,o,u),this.endPath(e)}getColorN_Pattern(e,t){let i;if(t[0]==="TilingPattern"){const a=this.baseTransform||at(this.ctx),o={createCanvasGraphics:(c,u)=>new pr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new du(this.dependencyTracker,u,!0):null)};i=new Vp(t,this.ctx,o,a)}else i=this._getPattern(e,t[1],t[2]);return i}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,i=null){let a;return this.cachedPatterns.has(t)?a=this.cachedPatterns.get(t):(a=SD(this.getObject(e,t)),this.cachedPatterns.set(t,a)),i&&(a.matrix=i),a}shadingFill(e,t){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const a=this._getPattern(e,t);i.fillStyle=a.getPattern(i,this,ri(i),jt.SHADING,e);const o=ri(i);if(o){const{width:c,height:u}=i.canvas,h=or.slice();ne.axialAlignedBoundingBox([0,0,c,u],o,h);const[f,p,g,v]=h;this.ctx.fillRect(f,p,g-f,v-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Pn.transform).recordDependencies(e,Pn.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){ze("Should not call beginInlineImage")}beginImageData(){ze("Should not call beginImageData")}paintFormXObjectBegin(e,t,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=at(this.ctx),i)){ne.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[a,o,c,u]=i,h=new Path2D;h.rect(a,o,c-a,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,a,c,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Eu("TODO: Support non-isolated groups."),t.knockout&&ve("Knockout groups not supported.");const a=at(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=or.slice();ne.axialAlignedBoundingBox(t.bbox,at(i),o);const c=[0,0,i.canvas.width,i.canvas.height];o=ne.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),f=Math.max(Math.ceil(o[2])-u,1),p=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,f,p]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,f,p),x=v.context;x.translate(-u,-h),x.transform(...a);let E=new Path2D;const[w,S,_,C]=t.bbox;if(E.rect(w,S,_-w,C-S),t.matrix){const T=new Path2D;T.addPath(E,new DOMMatrix(t.matrix)),E=T}x.clip(E),t.smask&&this.smaskStack.push({canvas:v.canvas,context:x,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(u,h),i.save()),No(i,x),this.ctx=x,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,a=this.groupStack.pop();if(this.ctx=a,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=at(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const c=or.slice();ne.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,c),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,i,a,o,c){if(this.#e(),Uc(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const u=i[2]-i[0],h=i[3]-i[1];if(c&&this.annotationCanvasMap){a=a.slice(),a[4]-=i[0],a[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=u,i[3]=h,ne.singularValueDecompose2dScale(at(this.ctx),xn);const{viewportScale:f}=this,p=Math.ceil(u*this.outputScaleX*f),g=Math.ceil(h*this.outputScaleY*f);this.annotationCanvas=this.canvasFactory.create(p,g);const{canvas:v,context:x}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=x,this.ctx.save(),this.ctx.setTransform(xn[0],0,0,-xn[1],0,h*xn[1]),Uc(this.ctx)}else{Uc(this.ctx),this.endPath(e);const f=new Path2D;f.rect(i[0],i[1],u,h),this.ctx.clip(f)}}this.current=new g1(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...a),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const i=t.count;t=this.getObject(e,t.data,t),t.count=i;const a=this.ctx,o=this._createMaskCanvas(e,t),c=o.canvas;a.save(),a.setTransform(1,0,0,1,0,0),a.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(e),a.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i,a=0,o=0,c,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const f=at(h);h.transform(i,a,o,c,0,0);const p=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,p.offsetX-f[4],p.offsetY-f[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,v=u.length;g<v;g+=2){const x=ne.transform(f,[i,a,o,c,u[g],u[g+1]]);h.drawImage(p.canvas,x[4],x[5]),this.dependencyTracker?.recordBBox(e,this.ctx,x[4],x[4]+p.canvas.width,x[5],x[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx,a=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Pn.transformAndFill);for(const c of t){const{data:u,width:h,height:f,transform:p}=c,g=this.cachedCanvases.getCanvas("maskCanvas",h,f),v=g.context;v.save();const x=this.getObject(e,u,c);b1(v,x),v.globalCompositeOperation="source-in",v.fillStyle=o?a.getPattern(v,this,ri(i),jt.FILL,e):a,v.fillRect(0,0,h,f),v.restore(),i.save(),i.transform(...p),i.scale(1,-1),Bc(i,g.canvas,0,0,h,f,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,h,0,f),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const i=this.getObject(e,t);if(!i){ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,t,i,a,o){if(!this.contentVisible)return;const c=this.getObject(e,t);if(!c){ve("Dependent image isn't ready yet");return}const u=c.width,h=c.height,f=[];for(let p=0,g=o.length;p<g;p+=2)f.push({transform:[i,0,0,a,o[p],o[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,c,f)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:a}=e,o=this.cachedCanvases.getCanvas("inlineImage",i,a),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const i=t.width,a=t.height,o=this.ctx;this.save(e);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/i,-1/a);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const p=this.cachedCanvases.getCanvas("inlineImage",i,a).context;y1(p,t),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,ri(o));o.imageSmoothingEnabled=v1(at(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,i,-a,0).recordDependencies(e,Pn.imageXObject).recordOperation(e),Bc(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-a,i,a),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,i){if(!this.contentVisible)return;const a=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const c=t.width,u=t.height,f=this.cachedCanvases.getCanvas("inlineImage",c,u).context;y1(f,t),o=this.applyTransferMapsToCanvas(f)}this.dependencyTracker?.resetBBox(e);for(const c of i)a.save(),a.transform(...c.transform),a.scale(1,-1),Bc(a,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,a,0,1,-1,0),a.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Pn.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,i){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,i){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,i){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const o=this.ctx;this.pendingClip?(a||(this.pendingClip===x1?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=at(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),a=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,a)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:a,d:o}=this.ctx.getTransform();let c,u;if(i===0&&a===0){const h=Math.abs(t),f=Math.abs(o);if(h===f)if(e===0)c=u=1/h;else{const p=h*e;c=u=p<1?1/p:1}else if(e===0)c=1/h,u=1/f;else{const p=h*e,g=f*e;c=p<1?1/p:1,u=g<1?1/g:1}}else{const h=Math.abs(t*o-i*a),f=Math.hypot(t,i),p=Math.hypot(a,o);if(e===0)c=p/h,u=f/h;else{const g=e*h;c=p>g?p/g:1,u=f>g?f/g:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:a}}=this,[o,c]=this.getScaleForStroking();if(o===c){i.lineWidth=(a||1)*o,i.stroke(e);return}const u=i.getLineDash();t&&i.save(),i.scale(o,c),Tf.a=1/o,Tf.d=1/c;const h=new Path2D;if(h.addPath(e,Tf),u.length>0){const f=Math.max(o,c);i.setLineDash(u.map(p=>p/f)),i.lineDashOffset/=f}i.lineWidth=a||1,i.stroke(h),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in vr)pr.prototype[r]!==void 0&&(pr.prototype[vr[r]]=pr.prototype[r]);class oa{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class kD{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const ar=Symbol("INTERNAL");class MD{#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:t,intent:i,usage:a,rbGroups:o}){this.#e=!!(e&bn.DISPLAY),this.#t=!!(e&bn.PRINT),this.name=t,this.intent=i,this.usage=a,this.rbGroups=o}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==ar&&ze("Internal method `_setVisible` called."),this.#i=i,this.#n=t}}class LD{#e=null;#t=new Map;#i=null;#n=null;constructor(e,t=bn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new MD(t,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(ar,!1);for(const i of e.on)this.#t.get(i)._setVisible(ar,!0);for(const i of e.off)this.#t.get(i)._setVisible(ar,!1);this.#i=this.getHash()}}#a(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let a=1;a<t;a++){const o=e[a];let c;if(Array.isArray(o))c=this.#a(o);else if(this.#t.has(o))c=this.#t.get(o).visible;else return ve(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Eu("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ve(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#a(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return ve(`Unknown optional content policy ${e.policy}.`),!0}return ve(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const a=this.#t.get(e);if(!a){ve(`Optional content group not found: ${e}`);return}if(i&&t&&a.rbGroups.length)for(const o of a.rbGroups)for(const c of o)c!==e&&this.#t.get(c)?._setVisible(ar,!1,!0);a._setVisible(ar,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let i;for(const a of e){switch(a){case"ON":case"OFF":case"Toggle":i=a;continue}const o=this.#t.get(a);if(o)switch(i){case"ON":this.setVisibility(a,!0,t);break;case"OFF":this.setVisibility(a,!1,t);break;case"Toggle":this.setVisibility(a,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new Lx;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class Ru{#e=null;#t=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(e,t,i){this._source=e,this.#e=t,this.#t=i}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return Fe(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#e(this)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new this.#t(this,e,t);return this._rangeReaders.add(i),i}cancelAllRequests(e){this._fullReader?.cancel(e);for(const t of new Set(this._rangeReaders))t.cancel(e)}}class Nu{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(e){this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){ze("Abstract method `read` called")}cancel(e){ze("Abstract method `cancel` called")}}class Du{_stream=null;constructor(e,t,i){this._stream=e}async read(){ze("Abstract method `read` called")}cancel(e){ze("Abstract method `cancel` called")}}function w1(r){return r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer}class OD extends Ru{_progressiveDone=!1;_queuedChunks=[];constructor(e){super(e,ID,PD);const{pdfDataRangeTransport:t}=e,{initialData:i,progressiveDone:a}=t;if(i?.length>0){const o=w1(i);this._queuedChunks.push(o)}this._progressiveDone=a,t.addRangeListener((o,c)=>{this.#e(o,c)}),t.addProgressListener((o,c)=>{c!==void 0&&this._fullReader?.onProgress?.({loaded:o,total:c})}),t.addProgressiveReadListener(o=>{this.#e(void 0,o)}),t.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),t.transportReady()}#e(e,t){const i=w1(t);if(e===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const a=this._rangeReaders.keys().find(o=>o._begin===e);Fe(a,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),a._enqueue(i)}}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(e,t)),i}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}class ID extends Nu{_done=!1;_queuedChunks=null;_requests=[];constructor(e){super(e);const{pdfDataRangeTransport:t,disableRange:i,disableStream:a}=e._source,{length:o,contentDispositionFilename:c}=t;this._queuedChunks=e._queuedChunks||[];for(const u of this._queuedChunks)this._loaded+=u.byteLength;this._done=e._progressiveDone,this._contentLength=o,this._isStreamingSupported=!a,this._isRangeSupported=!i,Cu(c)&&(this._filename=c),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class PD extends Du{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(e,t,i){super(e,t,i),this._begin=t}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function jD(r){let e=!0,t=i("filename\\*","i").exec(r);if(t){t=t[1];let p=u(t);return p=unescape(p),p=h(p),p=f(p),o(p)}if(t=c(r),t){const p=f(t);return o(p)}if(t=i("filename","i").exec(r),t){t=t[1];let p=u(t);return p=f(p),o(p)}function i(p,g){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function a(p,g){if(p){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(p,{fatal:!0}),x=_u(g);g=v.decode(x),e=!1}catch{}}return g}function o(p){return e&&/[\x80-\xff]/.test(p)&&(p=a("utf-8",p),e&&(p=a("iso-8859-1",p))),p}function c(p){const g=[];let v;const x=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=x.exec(p))!==null;){let[,w,S,_]=v;if(w=parseInt(w,10),w in g){if(w===0)break;continue}g[w]=[S,_]}const E=[];for(let w=0;w<g.length&&w in g;++w){let[S,_]=g[w];_=u(_),S&&(_=unescape(_),w===0&&(_=h(_))),E.push(_)}return E.join("")}function u(p){if(p.startsWith('"')){const g=p.slice(1).split('\\"');for(let v=0;v<g.length;++v){const x=g[v].indexOf('"');x!==-1&&(g[v]=g[v].slice(0,x),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}p=g.join('"')}return p}function h(p){const g=p.indexOf("'");if(g===-1)return p;const v=p.slice(0,g),E=p.slice(g+1).replace(/^[^']*'/,"");return a(v,E)}function f(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,x,E){if(x==="q"||x==="Q")return E=E.replaceAll("_"," "),E=E.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,S){return String.fromCharCode(parseInt(S,16))}),a(v,E);try{E=atob(E)}catch{}return a(v,E)})}return""}function zx(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const i in e){const a=e[i];a!==void 0&&t.append(i,a)}return t}function ku(r){return URL.parse(r)?.origin??null}function Hx({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:i}){const a={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(a.suggestedLength=o,o<=2*t)||i||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function Vx(r){const e=r.get("Content-Disposition");if(e){let t=jD(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Cu(t))return t}return null}function Mu(r,e){return new Qo(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function Gx(r,e){if(r!==e)throw new Error(`Expected range response-origin "${r}" to match "${e}".`)}function $x(r,e,t,i){return fetch(r,{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"})}function qx(r,e){if(r!==200&&r!==206)throw Mu(r,e)}function Yx(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ve(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class BD extends Ru{_responseOrigin=null;constructor(e){super(e,UD,FD),this.isHttp=/^https?:/i.test(e.url),this.headers=zx(this.isHttp,e.httpHeaders)}}class UD extends Nu{_abortController=new AbortController;_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:a,rangeChunkSize:o,url:c,withCredentials:u}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!t;const h=new Headers(e.headers);$x(c,h,u,this._abortController).then(f=>{e._responseOrigin=ku(f.url),qx(f.status,c),this._reader=f.body.getReader();const p=f.headers,{allowRangeRequests:g,suggestedLength:v}=Hx({responseHeaders:p,isHttp:e.isHttp,rangeChunkSize:o,disableRange:t});this._isRangeSupported=g,this._contentLength=v||this._contentLength,this._filename=Vx(p),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yi("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Yx(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class FD extends Du{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const{url:a,withCredentials:o}=e._source,c=new Headers(e.headers);c.append("Range",`bytes=${t}-${i-1}`),$x(a,c,o,this._abortController).then(u=>{const h=ku(u.url);Gx(h,e._responseOrigin),qx(u.status,a),this._reader=u.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:Yx(e),done:!1}}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Cf=200,A1=206;function zD(r){return typeof r!="string"?r:_u(r).buffer}class HD extends Ru{#e=new WeakMap;_responseOrigin=null;constructor(e){super(e,VD,GD),this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=zx(this.isHttp,e.httpHeaders)}_request(e){const t=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};this.#e.set(t,i),t.open("GET",this.url),t.withCredentials=this._source.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.validateStatus=a=>a===A1||a===Cf):i.validateStatus=a=>a===Cf,t.responseType="arraybuffer",Fe(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>e.onError(t.status),t.onreadystatechange=this.#i.bind(this,t),t.onprogress=this.#t.bind(this,t),t.send(null),t}#t(e,t){this.#e.get(e)?.onProgress?.(t)}#i(e,t){const i=this.#e.get(e);if(!i||(e.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),e.readyState!==4)||!this.#e.has(e))return;if(this.#e.delete(e),e.status===0&&this.isHttp){i.onError(e.status);return}const a=e.status||Cf;if(!i.validateStatus(a)){i.onError(e.status);return}const o=zD(e.response);if(a===A1){const c=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(c)?i.onDone(o):(ve('Missing or invalid "Content-Range" header.'),i.onError(0))}else o?i.onDone(o):i.onError(e.status)}_abortRequest(e){this.#e.has(e)&&(this.#e.delete(e),e.abort())}getRangeReader(e,t){const i=super.getRangeReader(e,t);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}class VD extends Nu{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(e){super(e);const{length:t}=e._source;this._contentLength=t,this._fullRequestXhr=e._request({onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#e(){const e=this._stream,{disableRange:t,rangeChunkSize:i}=e._source,a=this._fullRequestXhr;e._responseOrigin=ku(a.responseURL);const o=a.getAllResponseHeaders(),c=new Headers(o?o.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(f=>{const[p,...g]=f.split(": ");return[p,g.join(": ")]}):[]),{allowRangeRequests:u,suggestedLength:h}=Hx({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:i,disableRange:t});u&&(this._isRangeSupported=!0),this._contentLength=h||this._contentLength,this._filename=Vx(c),this._isRangeSupported&&e._abortRequest(a),this._headersCapability.resolve()}#t(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}#i(e){this._storedError=Mu(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class GD extends Du{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(e,t,i){super(e,t,i),this._requestXhr=e._request({begin:t,end:i,onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:null})}#e(){const e=ku(this._requestXhr?.responseURL);try{Gx(e,this._stream._responseOrigin)}catch(t){this._storedError=t,this.#i(0)}}#t(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(e){this._storedError??=Mu(e,this._stream.url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const $D=/^[a-z][a-z0-9\-+.]+:/i;function qD(r){if($D.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}function Wx(r){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(r):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(r)}function Xx(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(ve(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class YD extends Ru{constructor(e){super(e,WD,XD),this.url=qD(e.url),Fe(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class WD extends Nu{_reader=null;constructor(e){super(e);const{disableRange:t,disableStream:i,length:a,rangeChunkSize:o}=e._source;this._contentLength=a,this._isStreamingSupported=!i,this._isRangeSupported=!t;const c=e.url,u=process.getBuiltinModule("fs");u.promises.lstat(c).then(h=>{const f=u.createReadStream(c),p=Wx(f);this._reader=p.getReader();const{size:g}=h;g<=2*o&&(this._isRangeSupported=!1),this._contentLength=g,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Yi("Streaming is disabled.")),this._headersCapability.resolve()}).catch(h=>{h.code==="ENOENT"&&(h=Mu(0,c.href)),this._headersCapability.reject(h)})}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Xx(e),done:!1})}cancel(e){this._reader?.cancel(e)}}class XD extends Du{_readCapability=Promise.withResolvers();_reader=null;constructor(e,t,i){super(e,t,i);const a=e.url,o=process.getBuiltinModule("fs");try{const c=o.createReadStream(a,{start:t,end:i-1}),u=Wx(c);this._reader=u.getReader(),this._readCapability.resolve()}catch(c){this._readCapability.reject(c)}}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:{value:Xx(e),done:!1}}cancel(e){this._reader?.cancel(e)}}const Do=Symbol("INITIAL_DATA");class Kx{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Do}}get(e,t=null){if(t){const a=this.#t(e);return a.promise.then(()=>t(a.data)),null}const i=this.#e[e];if(!i||i.data===Do)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==Do}delete(e){const t=this.#e[e];return!t||t.data===Do?!1:(delete this.#e[e],!0)}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Do&&(yield[e,t])}}}const KD=1e5,S1=30;class ln{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#a=null;#r=null;#s=0;#o=0;#c=null;#l=null;#h=0;#d=0;#f=Object.create(null);#g=[];#m=null;#u=[];#p=new WeakMap;#y=null;static#v=new Map;static#b=new Map;static#_=new WeakMap;static#S=null;static#w=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#d=i.scale*Wn.pixelRatio,this.#h=i.rotation,this.#r={div:null,properties:null,ctx:null};const{pageWidth:a,pageHeight:o,pageX:c,pageY:u}=i.rawDims;this.#y=[1,0,0,-1,-c,u+o],this.#o=a,this.#s=o,ln.#N(),t.style.setProperty("--min-font-size",ln.#S),Ms(t,i),this.#e.promise.finally(()=>{ln.#w.delete(this),this.#r=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wt.platform;return be(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:i})=>{if(i){this.#e.resolve();return}this.#a??=t.lang,Object.assign(this.#f,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),ln.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*Wn.pixelRatio,a=e.rotation;if(a!==this.#h&&(t?.(),this.#h=a,Ms(this.#l,{rotation:a})),i!==this.#d){t?.(),this.#d=i;const o={div:null,properties:null,ctx:ln.#D(this.#a)};for(const c of this.#u)o.properties=this.#p.get(c),o.div=c,this.#E(o)}}cancel(){const e=new Yi("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#g}#C(e){if(this.#i)return;this.#r.ctx??=ln.#D(this.#a);const t=this.#u,i=this.#g;for(const a of e){if(t.length>KD){ve("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),a.id&&this.#t.setAttribute("id",`${a.id}`),a.tag==="Artifact"&&(this.#t.ariaHidden=!0),o.append(this.#t)}else a.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(a.str),this.#x(a)}}#x(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(t);const a=ne.transform(this.#y,e.transform);let o=Math.atan2(a[1],a[0]);const c=this.#f[e.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#n&&c.fontSubstitution||c.fontFamily;u=ln.fontFamilyMap.get(u)||u;const h=Math.hypot(a[2],a[3]),f=h*ln.#j(u,c,this.#a);let p,g;o===0?(p=a[4],g=a[5]-f):(p=a[4]+f*Math.sin(o),g=a[5]-f*Math.cos(o));const v=t.style;v.left=`${(100*p/this.#o).toFixed(2)}%`,v.top=`${(100*g/this.#s).toFixed(2)}%`,v.setProperty("--font-height",`${h.toFixed(2)}px`),v.fontFamily=u,i.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#n&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(i.angle=o*(180/Math.PI));let x=!1;if(e.str.length>1)x=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),w=Math.abs(e.transform[3]);E!==w&&Math.max(E,w)/Math.min(E,w)>1.5&&(x=!0)}if(x&&(i.canvasWidth=c.vertical?e.height:e.width),this.#p.set(t,i),this.#r.div=t,this.#r.properties=i,this.#E(this.#r),i.hasText&&this.#t.append(t),i.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),this.#t.append(E)}}#E(e){const{div:t,properties:i,ctx:a}=e,{style:o}=t;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=o,{canvasWidth:u,fontSize:h}=i;ln.#R(a,h*this.#d,c);const{width:f}=a.measureText(t.textContent);f>0&&o.setProperty("--scale-x",u*this.#d/f)}i.angle!==0&&o.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#v.clear();for(const{canvas:e}of this.#b.values())e.remove();this.#b.clear()}}static#D(e=null){let t=this.#b.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#b.set(e,t),this.#_.set(t,{size:0,family:""})}return t}static#R(e,t,i){const a=this.#_.get(e);t===a.size&&i===a.family||(e.font=`${t}px ${i}`,a.size=t,a.family=i)}static#N(){if(this.#S!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#S=e.getBoundingClientRect().height,e.remove()}static#j(e,t,i){const a=this.#v.get(e);if(a)return a;const o=this.#D(i);o.canvas.width=o.canvas.height=S1,this.#R(o,S1,e);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let f=.8;return u?f=u/(u+h):(wt.platform.isFirefox&&ve("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?f=t.ascent:t.descent&&(f=1+t.descent)),this.#v.set(e,f),f}}const QD=100;function Qx(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Gp,{docId:t}=e,i=r.url?rD(r.url):null,a=r.data?oD(r.data):null,o=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,h=r.range instanceof $p?r.range:null,f=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let p=r.worker instanceof xr?r.worker:null;const g=r.verbosity,v=typeof r.docBaseUrl=="string"&&!dl(r.docBaseUrl)?r.docBaseUrl:null,x=Oc(r.cMapUrl),E=r.cMapPacked!==!1,w=r.CMapReaderFactory||(qt?pD:o1),S=Oc(r.iccUrl),_=Oc(r.standardFontDataUrl),C=r.StandardFontDataFactory||(qt?mD:l1),T=Oc(r.wasmUrl),N=r.WasmFactory||(qt?gD:c1),D=r.stopAtErrors!==!0,M=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,P=r.isEvalSupported!==!1,X=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!qt,H=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!qt&&(wt.platform.isFirefox||!globalThis.chrome),$=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,Y=typeof r.disableFontFace=="boolean"?r.disableFontFace:qt,Z=r.fontExtraProperties===!0,se=r.enableXfa===!0,re=r.ownerDocument||globalThis.document,me=r.disableRange===!0,j=r.disableStream===!0,q=r.disableAutoFetch===!0,ee=r.pdfBug===!0,ge=r.CanvasFactory||(qt?fD:uD),_e=r.FilterFactory||(qt?hD:dD),O=r.enableHWA===!0,V=r.useWasm!==!1,J=h?h.length:r.length??NaN,te=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!qt&&!Y,ue=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(w===o1&&C===l1&&N===c1&&x&&_&&T&&jo(x,document.baseURI)&&jo(_,document.baseURI)&&jo(T,document.baseURI)),ye=null;FN(g);const de={canvasFactory:new ge({ownerDocument:re,enableHWA:O}),filterFactory:new _e({docId:t,ownerDocument:re}),cMapReaderFactory:ue?null:new w({baseUrl:x,isCompressed:E}),standardFontDataFactory:ue?null:new C({baseUrl:_}),wasmFactory:ue?null:new N({baseUrl:T})};p||(p=xr.create({verbosity:g,port:oa.workerPort}),e._worker=p);const lt={docId:t,apiVersion:"5.4.624",data:a,password:u,disableAutoFetch:q,rangeChunkSize:f,length:J,docBaseUrl:v,enableXfa:se,evaluatorOptions:{maxImageSize:M,disableFontFace:Y,ignoreErrors:D,isEvalSupported:P,isOffscreenCanvasSupported:X,isImageDecoderSupported:H,canvasMaxAreaInBytes:$,fontExtraProperties:Z,useSystemFonts:te,useWasm:V,useWorkerFetch:ue,cMapUrl:x,iccUrl:S,standardFontDataUrl:_,wasmUrl:T}},He={ownerDocument:re,pdfBug:ee,styleElement:ye,enableHWA:O,loadingParams:{disableAutoFetch:q,enableXfa:se}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Kn=p.messageHandler.sendWithPromise("GetDocRequest",lt,a?[a.buffer]:null);let Qn;if(h)Qn=new OD({pdfDataRangeTransport:h,disableRange:me,disableStream:j});else if(!a){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Bn=jo(i)?BD:qt?YD:HD;Qn=new Bn({url:i,length:J,httpHeaders:o,withCredentials:c,rangeChunkSize:f,disableRange:me,disableStream:j})}return Kn.then(Bn=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const fa=new Bo(t,Bn,p.port),Zn=new ek(fa,e,Qn,He,de);e._transport=Zn,fa.send("Ready",null)})}).catch(e._capability.reject),e}class Gp{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Gp.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class $p{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#a=[];constructor(e,t,i=!1,a=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=a}addRangeListener(e){this.#a.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const i of this.#a)i(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const i of this.#n)i(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#i)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){ze("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ZD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class JD{#e=!1;#t=Pe.instance;constructor(e,t,i,a=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=a?new e1:null,this._pdfBug=a,this.commonObjs=i.commonObjs,this.objs=new Kx,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:a=0,dontFlip:o=!1}={}){return new ul({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:a,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return be(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:i,intent:a="display",annotationMode:o=Bi.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:f=null,pageColors:p=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:x=!1,operationsFilter:E=null}){this._stats?.time("Overall");const w=this._transport.getRenderingIntent(a,o,g,v),{renderingIntent:S,cacheKey:_}=w;this.#e=!1,h||=this._transport.getOptionalContentConfig(S);let C=this._intentStates.get(_);C||(C=Object.create(null),this._intentStates.set(_,C)),C.streamReaderCancelTimeout&&(clearTimeout(C.streamReaderCancelTimeout),C.streamReaderCancelTimeout=null);const T=!!(S&bn.PRINT);C.displayReadyCapability||(C.displayReadyCapability=Promise.withResolvers(),C.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(w));const N=!!(this._pdfBug&&globalThis.StepperManager?.enabled),D=!this.recordedBBoxes&&(x||N),M=H=>{if(C.renderTasks.delete(P),D){const $=P.gfx?.dependencyTracker.take();$&&(P.stepper&&P.stepper.setOperatorBBoxes($,P.gfx.dependencyTracker.takeDebugMetadata()),x&&(this.recordedBBoxes=$))}T&&(this.#e=!0),this.#i(),H?(P.capability.reject(H),this._abortOperatorList({intentState:C,reason:H instanceof Error?H:new Error(H)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new lr({callback:M,params:{canvas:t,canvasContext:e,dependencyTracker:D?new bD(t,C.operatorList.length,N):null,viewport:i,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:C.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:E});(C.renderTasks||=new Set).add(P);const X=P.task;return Promise.all([C.displayReadyCapability.promise,h]).then(([H,$])=>{if(this.destroyed){M();return}if(this._stats?.time("Rendering"),!($.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:H,optionalContentConfig:$}),P.operatorListChanged()}).catch(M),X}getOperatorList({intent:e="display",annotationMode:t=Bi.ENABLE,printAnnotationStorage:i=null,isEditing:a=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,i,a,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Zo.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,a){function o(){c.read().then(function({value:h,done:f}){if(f){i(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},a)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#i();return e&&t&&(this._stats&&=new e1),t}#i(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,a=e.length;i<a;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:a}){const{map:o,transfer:c}=i,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:a},c).getReader(),f=this._intentStates.get(t);f.streamReader=h;const p=()=>{h.read().then(({value:g,done:v})=>{if(v){f.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,f),p())},g=>{if(f.streamReader=null,!this._transport.destroyed){if(f.operatorList){f.operatorList.lastChunk=!0;for(const v of f.renderTasks)v.operatorListChanged();this.#i()}if(f.displayReadyCapability)f.displayReadyCapability.reject(g);else if(f.opListReadCapability)f.opListReadCapability.reject(g);else throw g}})};p()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Tu){let a=QD;t.extraDelay>0&&t.extraDelay<1e3&&(a+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},a);return}}if(e.streamReader.cancel(new Yi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,o]of this._intentStates)if(o===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}var Cs,Vn,ji,sa,fu,aa,ra,Wt,Xc,Zx,Jx,Uo,mr,Kc;const tt=class tt{constructor({name:e=null,port:t=null,verbosity:i=zN()}={}){si(this,Wt);si(this,Cs,Promise.withResolvers());si(this,Vn,null);si(this,ji,null);si(this,sa,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(et(tt,ra).has(t))throw new Error("Cannot use more than one PDFWorker per port.");et(tt,ra).set(t,this),ai(this,Wt,Zx).call(this,t)}else ai(this,Wt,Jx).call(this)}get promise(){return et(this,Cs).promise}get port(){return et(this,ji)}get messageHandler(){return et(this,Vn)}destroy(){this.destroyed=!0,et(this,sa)?.terminate(),an(this,sa,null),et(tt,ra).delete(et(this,ji)),an(this,ji,null),et(this,Vn)?.destroy(),an(this,Vn,null)}static create(e){const t=et(this,ra).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new tt(e)}static get workerSrc(){if(oa.workerSrc)return oa.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return be(this,"_setupFakeWorkerGlobal",(async()=>et(this,mr,Kc)?et(this,mr,Kc):(await import(this.workerSrc)).WorkerMessageHandler)())}};Cs=new WeakMap,Vn=new WeakMap,ji=new WeakMap,sa=new WeakMap,fu=new WeakMap,aa=new WeakMap,ra=new WeakMap,Wt=new WeakSet,Xc=function(){et(this,Cs).resolve(),et(this,Vn).send("configure",{verbosity:this.verbosity})},Zx=function(e){an(this,ji,e),an(this,Vn,new Bo("main","worker",e)),et(this,Vn).on("ready",()=>{}),ai(this,Wt,Xc).call(this)},Jx=function(){if(et(tt,aa)||et(tt,mr,Kc)){ai(this,Wt,Uo).call(this);return}let{workerSrc:e}=tt;try{tt._isSameOrigin(window.location,e)||(e=tt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Bo("main","worker",t),a=()=>{o.abort(),i.destroy(),t.terminate(),this.destroyed?et(this,Cs).reject(new Error("Worker was destroyed")):ai(this,Wt,Uo).call(this)},o=new AbortController;t.addEventListener("error",()=>{et(this,sa)||a()},{signal:o.signal}),i.on("test",u=>{if(o.abort(),this.destroyed||!u){a();return}an(this,Vn,i),an(this,ji,t),an(this,sa,t),ai(this,Wt,Xc).call(this)}),i.on("ready",u=>{if(o.abort(),this.destroyed){a();return}try{c()}catch{ai(this,Wt,Uo).call(this)}});const c=()=>{const u=new Uint8Array;i.send("test",u,[u.buffer])};c();return}catch{Eu("The worker has been disabled.")}ai(this,Wt,Uo).call(this)},Uo=function(){et(tt,aa)||(ve("Setting up fake worker."),an(tt,aa,!0)),tt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){et(this,Cs).reject(new Error("Worker was destroyed"));return}const t=new cD;an(this,ji,t);const i=`fake${Yy(tt,fu)._++}`,a=new Bo(i+"_worker",i,t);e.setup(a,t),an(this,Vn,new Bo(i,i+"_worker",t)),ai(this,Wt,Xc).call(this)}).catch(e=>{et(this,Cs).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},mr=new WeakSet,Kc=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},si(tt,mr),si(tt,fu,0),si(tt,aa,!1),si(tt,ra,new WeakMap),qt&&(an(tt,aa,!0),oa.workerSrc||="./pdf.worker.mjs"),tt._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const a=new URL(t,i);return i.origin===a.origin},tt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},tt.fromPort=e=>{if(KN("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return tt.create(e)};let xr=tt;class ek{downloadInfoCapability=Promise.withResolvers();#e=null;#t=new Map;#i=null;#n=new Map;#a=new Map;#r=new Map;#s=null;#o=Pe.instance;constructor(e,t,i,a,o){this.messageHandler=e,this.loadingTask=t,this.#i=i,this.commonObjs=new Kx,this.fontLoader=new iD({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this.enableHWA=a.enableHWA,this.loadingParams=a.loadingParams,this._params=a,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const e=new Map,t=new Map;for(let i=0,a=this.#o.pagesNumber;i<a;i++){const o=this.#o.getPrevPageNumber(i+1)-1,c=this.#n.get(o);c&&e.set(i,c);const u=this.#a.get(o);u&&t.set(i,u)}this.#n=e,this.#a=t}#l(e,t=null){const i=this.#t.get(e);if(i)return i;const a=this.messageHandler.sendWithPromise(e,t);return this.#t.set(e,a),a}#h({loaded:e,total:t}){this.loadingTask.onProgress?.({loaded:e,total:t,percent:kt(Math.round(e/t*100),0,100)})}get annotationStorage(){return be(this,"annotationStorage",new Fp)}getRenderingIntent(e,t=Bi.ENABLE,i=null,a=!1,o=!1){let c=bn.DISPLAY,u=Qf;switch(e){case"any":c=bn.ANY;break;case"display":break;case"print":c=bn.PRINT;break;default:ve(`getRenderingIntent - invalid intent: ${e}`)}const h=c&bn.PRINT&&i instanceof Ox?i:this.annotationStorage;switch(t){case Bi.DISABLE:c+=bn.ANNOTATIONS_DISABLE;break;case Bi.ENABLE:break;case Bi.ENABLE_FORMS:c+=bn.ANNOTATIONS_FORMS;break;case Bi.ENABLE_STORAGE:c+=bn.ANNOTATIONS_STORAGE,u=h.serializable;break;default:ve(`getRenderingIntent - invalid annotationMode: ${t}`)}a&&(c+=bn.IS_EDITING),o&&(c+=bn.OPLIST);const{ids:f,hash:p}=h.modifiedIds,g=[c,u.hash,p];return{renderingIntent:c,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#s?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#n.values())e.push(i._destroy());this.#n.clear(),this.#a.clear(),this.#r.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ln.cleanup(),this.#i?.cancelAllRequests(new Yi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,a)=>{Fe(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#e=this.#i.getFullReader(),this.#e.onProgress=o=>this.#h(o),a.onPull=()=>{this.#e.read().then(function({value:o,done:c}){if(c){a.close();return}Fe(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{a.error(o)})},a.onCancel=o=>{this.#e.cancel(o),a.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async i=>{await this.#e.headersReady;const{isStreamingSupported:a,isRangeSupported:o,contentLength:c}=this.#e;return a&&o&&(this.#e.onProgress=null),{isStreamingSupported:a,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(i,a)=>{Fe(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const o=this.#i.getRangeReader(i.begin,i.end);if(!o){a.close();return}a.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){a.close();return}Fe(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{o.cancel(c),a.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:i})=>{this.#o.pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new ZD(i,this))}),e.on("DocException",i=>{t._capability.reject(rn(i))}),e.on("PasswordRequest",i=>{this.#s=Promise.withResolvers();try{if(!t.onPassword)throw rn(i);const a=o=>{o instanceof Error?this.#s.reject(o):this.#s.resolve({password:o})};t.onPassword(a,i.code)}catch(a){this.#s.reject(a)}return this.#s.promise}),e.on("DataLoaded",i=>{this.#h({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#n.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,a,o])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(a){case"Font":if("error"in o){const g=o.error;ve(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const c=new We(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,h=new sD(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:f}=o;Fe(f,"The imageRef must be defined.");for(const g of this.#n.values())for(const[,v]of g.objs)if(v?.ref===f)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new aD(o));break;case"Image":this.commonObjs.resolve(i,o);break;case"Pattern":const p=new Rt(o);this.commonObjs.resolve(i,p.getIR());break;default:throw new Error(`Got unknown common object type ${a}`)}return null}),e.on("obj",([i,a,o,c])=>{if(this.destroyed)return;const u=this.#n.get(a);if(!u.objs.has(i)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(i,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",i=>{this.destroyed||this.#h(i)}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const a=this[i.type];if(!a)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return a.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this.#e?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#o.getPageId(e)-1,a=this.#a.get(t);if(a)return a;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");c.refStr&&this.#r.set(c.refStr,i);const u=new JD(t,c,this,this._params.pdfBug);return this.#n.set(t,u),u});return this.#a.set(t,o),o}async getPageIndex(e){if(!Zf(e))throw new Error("Invalid pageIndex request.");const t=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return this.#o.getPageNumber(t+1)-1}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(e+1)-1,intent:t})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#l("GetOptionalContentConfig").then(t=>new LD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#t.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new kD(a[1]):null,contentDispositionFilename:this.#e?.filename??null,contentLength:this.#e?.contentLength??null,hasStructTree:a[2]}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#n.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ln.cleanup()}}cachedPageNumber(e){if(!Zf(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,i=this.#r.get(t);return i>=0?this.#o.getPageNumber(i+1):null}}class tk{_internalRenderTask=null;onContinue=null;onError=null;constructor(e){this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this._internalRenderTask;return e.form||e.canvas&&t?.size>0}}class lr{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:a,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:f,useRequestAnimationFrame:p=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:x=!1,operationsFilter:E=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=a,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=f,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new tk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=x,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=E}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(lr.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");lr.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:a,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new pr(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:a,viewport:i,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),lr.#t.delete(this._canvas),e||=new Tu(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),lr.#t.delete(this._canvas),this.callback())))}}const ew="5.4.624",tw="384c6208b";class vn{#e=null;#t=null;#i;#n=null;#a=!1;#r=!1;#s=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return be(this,"_keyboardManager",new hl([[["Escape","mac+Escape"],vn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],vn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],vn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],vn.prototype._moveToPrevious],[["Home","mac+Home"],vn.prototype._moveToBeginning],[["End","mac+End"],vn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#r=!1,this.#s=e):this.#r=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",vn.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#s&&(e.ariaControls=`${this.#s.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#d();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#d(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",An,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#s&&(e.id=`${this.#s.id}_colorpicker_dropdown`);for(const[i,a]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",a),o.title=i,o.setAttribute("data-l10n-id",vn.#h[i]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=a,o.ariaSelected=a===this.#i,o.addEventListener("click",this.#f.bind(this,a),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:ke.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#n.lastElementChild?.focus()}#g(e){vn._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#a=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const t=this.#n=this.#d();this.#e.append(t)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#r){if(!this.#p){this.#s?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#a})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const t=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Jo{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,Jo.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,color:i}=this.#t,a=this.#e=document.createElement("input");return a.type="color",a.value=i||"#000000",a.className="basicColorPicker",a.tabIndex=0,a.setAttribute("data-l10n-id",Jo.#n[e]),a.addEventListener("input",()=>{this.#i.updateParams(t,a.value)},{signal:this.#i._signal}),a}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function E1(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function ko(r){return Math.max(0,Math.min(255,255*r))}class _1{static CMYK_G([e,t,i,a]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+a)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=ko(e),[e,e,e]}static G_HTML([e]){const t=E1(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(ko)}static RGB_HTML(e){return`#${e.map(E1).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,a]){return["RGB",1-Math.min(1,e+a),1-Math.min(1,i+a),1-Math.min(1,t+a)]}static CMYK_rgb([e,t,i,a]){return[ko(1-Math.min(1,e+a)),ko(1-Math.min(1,i+a)),ko(1-Math.min(1,t+a))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const a=1-e,o=1-t,c=1-i,u=Math.min(a,o,c);return["CMYK",a,o,c,u]}}class nk{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),i||(a.setAttribute("width",`${e}px`),a.setAttribute("height",`${t}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${t}`),a}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){ze("Abstract method `_createSVG` called.")}}class el extends nk{_createSVG(e){return document.createElementNS(Pi,e)}}const ik=9,ua=new WeakSet,sk=new Date().getTimezoneOffset()*60*1e3;class Rf{static create(e){switch(e.data.annotationType){case ft.LINK:return new qp(e);case ft.TEXT:return new rk(e);case ft.WIDGET:switch(e.data.fieldType){case"Tx":return new ok(e);case"Btn":return e.data.radioButton?new nw(e):e.data.checkBox?new ck(e):new uk(e);case"Ch":return new dk(e);case"Sig":return new lk(e)}return new ha(e);case ft.POPUP:return new tp(e);case ft.FREETEXT:return new iw(e);case ft.LINE:return new fk(e);case ft.SQUARE:return new pk(e);case ft.CIRCLE:return new mk(e);case ft.POLYLINE:return new sw(e);case ft.CARET:return new yk(e);case ft.INK:return new Yp(e);case ft.POLYGON:return new gk(e);case ft.HIGHLIGHT:return new aw(e);case ft.UNDERLINE:return new bk(e);case ft.SQUIGGLY:return new vk(e);case ft.STRIKEOUT:return new xk(e);case ft.STAMP:return new rw(e);case ft.FILEATTACHMENT:return new wk(e);default:return new ot(e)}}}class ot{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:a=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,t&&(this.contentElement=this.container=this._createContainer(i)),a&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ot._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:i,rect:a}=this.data;let o=-1/0,c=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>c?(c=t[u+1],o=t[u+2]):t[u+1]===c&&(o=Math.max(o,t[u+2]));return[o,c]}if(i?.length>=1){for(const u of i)for(let h=0,f=u.length;h<f;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return a?[a[2],a[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:a,pageX:o,pageY:c}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/i,e[1]=100*(e[1]-c)/a,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Ko}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:i})||this.annotationStorage.setValue(`${Ko}${t.id}`,{id:t.id,annotationType:t.annotationType,page:this.parent.page,popup:i,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:i}=e;t&&this.#n(t);let a=this.#i?.popup||this.popup;!a&&i?.text&&(this._createPopup(i),a=this.#i.popup),a&&(a.updateEdited(e),i?.deleted&&(a.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:t},data:{rect:i,rotation:a},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;i?.splice(0,4,...e),t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(c-e[3]+h)/c}%`,a===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(a)}_createContainer(e){const{data:t,parent:{page:i,viewport:a}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof ha)&&!(this instanceof qp)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof tp){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,o),o}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(w>0||S>0){const C=`calc(${w}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=C}else if(this instanceof nw){const C=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=C}switch(t.borderStyle.style){case sr.SOLID:c.borderStyle="solid";break;case sr.DASHED:c.borderStyle="dashed";break;case sr.BEVELED:ve("Unimplemented border style: beveled");break;case sr.INSET:ve("Unimplemented border style: inset");break;case sr.UNDERLINE:c.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(this.#t=!0,c.borderColor=ne.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):c.borderWidth=0}const f=ne.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:p,pageHeight:g,pageX:v,pageY:x}=a.rawDims;c.left=`${100*(f[0]-v)/p}%`,c.top=`${100*(f[1]-x)/g}%`;const{rotation:E}=t;return t.hasOwnCanvas||E===0?(c.width=`${100*u/p}%`,c.height=`${100*h/g}%`):this.setRotation(E,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:a}=this.parent.viewport.rawDims;let{width:o,height:c}=this;e%180!==0&&([o,c]=[c,o]),t.style.width=`${100*o/i}%`,t.style.height=`${100*c/a}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,a)=>{const o=a.detail[t],c=o[0],u=o.slice(1);a.target.style[i]=_1[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[i]:_1[`${c}_rgb`](u)})};return be(this,"_commonActions",{display:t=>{const{display:i}=t.detail,a=i%2===1;this.container.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:a,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const a of Object.keys(t.detail))(e[a]||i[a])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[a,o]of Object.entries(t)){const c=i[a];if(c){const u={detail:{[a]:o},target:e};c(u),delete t[a]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,a,o]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,S,_,C]=e.subarray(2,6);if(a===w&&o===S&&t===_&&i===C)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:w,borderWidth:S}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=a-t,f=o-i,{svgFactory:p}=this,g=p.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=p.createElement("defs");g.append(v);const x=p.createElement("clipPath"),E=`clippath_${this.data.id}`;x.setAttribute("id",E),x.setAttribute("clipPathUnits","objectBoundingBox"),v.append(x);for(let w=2,S=e.length;w<S;w+=8){const _=e[w],C=e[w+1],T=e[w+2],N=e[w+3],D=p.createElement("rect"),M=(T-t)/h,P=(o-C)/f,X=(_-T)/h,H=(C-N)/f;D.setAttribute("x",M),D.setAttribute("y",P),D.setAttribute("width",X),D.setAttribute("height",H),x.append(D),u?.push(`<rect vector-effect="non-scaling-stroke" x="${M}" y="${P}" width="${X}" height="${H}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${E})`}_createPopup(e=null){const{data:t}=this;let i,a;e?(i={str:e.text},a=e.date):(i=t.contentsObj,a=t.modificationDate),this.#i=new tp({data:{color:t.color,titleObj:t.titleObj,modificationDate:a,contentsObj:i,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){ze("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const a=this._fieldObjects[e];if(a)for(const{page:o,id:c,exportValues:u}of a){if(o===-1||c===t)continue;const h=typeof u=="string"?u:null,f=document.querySelector(`[data-element-id="${c}"]`);if(f&&!ua.has(f)){ve(`_getElementsByName - element not allowed: ${c}`);continue}i.push({id:c,exportValue:h,domElement:f})}return i}for(const a of document.getElementsByName(e)){const{exportValue:o}=a,c=a.getAttribute("data-element-id");c!==t&&ua.has(a)&&i.push({id:c,exportValue:o,domElement:a})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class ak extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class qp extends ot{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let a=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),a=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),a=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),a=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),a=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(i,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,i=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),i&&(e.title=i),this.#e()}#t(e,t,i="",a=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,a),!1),this.#e()}#i(e,t,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(t.actions)){const o=i.get(a);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:a}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:a,refs:o,include:c}=t,u=[];if(a.length!==0||o.length!==0){const p=new Set(o);for(const g of a){const v=this._fieldObjects[g]||[];for(const{id:x}of v)p.add(x)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===c&&u.push(v)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,f=[];for(const p of u){const{id:g}=p;switch(f.push(g),p.type){case"text":{const x=p.defaultValue||"";h.setValue(g,{value:x});break}case"checkbox":case"radiobutton":{const x=p.defaultValue===p.exportValues;h.setValue(g,{value:x});break}case"combobox":case"listbox":{const x=p.defaultValue||"";h.setValue(g,{value:x});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!ua.has(v)){ve(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:f,name:"ResetForm"}}),!1}}}class rk extends ot{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class ha extends ot{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,a,o){i.includes("mouse")?e.addEventListener(i,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(i,c=>{if(i==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:o(c)}})})}_setEventListeners(e,t,i,a){for(const[o,c]of i)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,c,a),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ne.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,a=this.data.defaultAppearanceData.fontSize||ik,o=e.style;let c;const u=2,h=f=>Math.round(10*f)/10;if(this.data.multiLine){const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(f/(wf*a))||1,g=f/p;c=Math.min(a,h(g/wf))}else{const f=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(a,h(f/wf))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=ne.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class ok extends ha{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,a){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=i),o.setValue(c.id,{[a]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=a.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),ua.add(i),this.contentElement=i,i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:f,datetimeType:p,timeStep:g}=this.data,v=!!p&&this.enableScripting;f&&(i.title=f),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",E=>{e.setValue(t,{value:E.target.value}),this.setPropertyOnSiblings(i,"value",E.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",E=>{const w=this.data.defaultFieldValue??"";i.value=h.userValue=w,h.formattedValue=null});let x=E=>{const{formattedValue:w}=h;w!=null&&(E.target.value=w),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",w=>{if(h.focused)return;const{target:S}=w;if(v&&(S.type=p,g&&(S.step=g)),h.userValue){const _=h.userValue;if(v)if(p==="time"){const C=new Date(_),T=[C.getHours(),C.getMinutes(),C.getSeconds()];S.value=T.map(N=>N.toString().padStart(2,"0")).join(":")}else S.value=new Date(_-sk).toISOString().split(p==="date"?"T":".",1)[0];else S.value=_}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",w=>{this.showElementAndHideCanvas(w.target);const S={value(_){h.userValue=_.detail.value??"",v||e.setValue(t,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:C}=_.detail;h.formattedValue=C,C!=null&&_.target!==document.activeElement&&(_.target.value=C);const T={formattedValue:C};v&&(T.value=C),e.setValue(t,T)},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{const{charLimit:C}=_.detail,{target:T}=_;if(C===0){T.removeAttribute("maxLength");return}T.setAttribute("maxLength",C);let N=h.userValue;!N||N.length<=C||(N=N.slice(0,C),T.value=h.userValue=N,e.setValue(t,{value:N}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:N,willCommit:!0,commitKey:1,selStart:T.selectionStart,selEnd:T.selectionEnd}}))}};this._dispatchEventFromSandbox(S,w)}),i.addEventListener("keydown",w=>{h.commitKey=1;let S=-1;if(w.key==="Escape"?S=0:w.key==="Enter"&&!this.data.multiLine?S=2:w.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:_}=w.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:S,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}))});const E=x;x=null,i.addEventListener("blur",w=>{if(!h.focused||!w.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=w;let{value:_}=S;if(v){if(_&&p==="time"){const C=_.split(":").map(T=>parseInt(T,10));_=new Date(2e3,0,1,C[0],C[1],C[2]||0).valueOf(),S.step=""}else _.includes("T")||(_=`${_}T00:00`),_=new Date(_).valueOf();S.type="text"}h.userValue=_,h.lastCommittedValue!==_&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:_,willCommit:!0,commitKey:h.commitKey,selStart:w.target.selectionStart,selEnd:w.target.selectionEnd}}),E(w)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",w=>{h.lastCommittedValue=null;const{data:S,target:_}=w,{value:C,selectionStart:T,selectionEnd:N}=_;let D=T,M=N;switch(w.inputType){case"deleteWordBackward":{const P=C.substring(0,T).match(/\w*[^\w]*$/);P&&(D-=P[0].length);break}case"deleteWordForward":{const P=C.substring(T).match(/^[^\w]*\w*/);P&&(M+=P[0].length);break}case"deleteContentBackward":T===N&&(D-=1);break;case"deleteContentForward":T===N&&(M+=1);break}w.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:C,change:S||"",willCommit:!1,selStart:D,selEnd:M}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],w=>w.target.value)}if(x&&i.addEventListener("blur",x),this.data.comb){const w=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${w}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class lk extends ha{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class ck extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let a=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof a=="string"&&(a=a!=="Off",e.setValue(i,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return ua.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,a&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i)){const p=h&&f.exportValue===t.exportValue;f.domElement&&(f.domElement.checked=p),e.setValue(f.id,{value:p})}e.setValue(i,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(i,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class nw extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let a=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof a=="string"&&(a=a!==t.buttonValue,e.setValue(i,{value:a})),a)for(const c of this._getElementsByName(t.fieldName,i))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(ua.add(o),o.setAttribute("data-element-id",i),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,a&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const f of this._getElementsByName(u,i))e.setValue(f.id,{value:!1});e.setValue(i,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:f=>{const p=c===f.detail.value;for(const g of this._getElementsByName(f.target.name)){const v=p&&g.id===i;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class uk extends qp{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class dk extends ha{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),a=document.createElement("select");ua.add(a),a.setAttribute("data-element-id",t),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue;for(const v of a.options)v.selected=v.value===g});for(const p of this.data.options){const g=document.createElement("option");g.textContent=p.displayValue,g.value=p.exportValue,i.value.includes(p.exportValue)&&(g.setAttribute("selected",!0),o=!1),a.append(g)}let c=null;if(o){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),a.prepend(p),c=()=>{p.remove(),a.removeEventListener("input",c),c=null},a.addEventListener("input",c)}const u=p=>{const g=p?"value":"textContent",{options:v,multiple:x}=a;return x?Array.prototype.filter.call(v,E=>E.selected).map(E=>E[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let h=u(!1);const f=p=>{const g=p.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",p=>{const g={value(v){c?.();const x=v.detail.value,E=new Set(Array.isArray(x)?x:[x]);for(const w of a.options)w.selected=E.has(w.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(v){a.multiple=!0},remove(v){const x=a.options,E=v.detail.remove;x[E].selected=!1,a.remove(E),x.length>0&&Array.prototype.findIndex.call(x,S=>S.selected)===-1&&(x[0].selected=!0),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},clear(v){for(;a.length!==0;)a.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(v){const{index:x,displayValue:E,exportValue:w}=v.detail.insert,S=a.children[x],_=document.createElement("option");_.textContent=E,_.value=w,S?S.before(_):a.append(_),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},items(v){const{items:x}=v.detail;for(;a.length!==0;)a.remove(0);for(const E of x){const{displayValue:w,exportValue:S}=E,_=document.createElement("option");_.textContent=w,_.value=S,a.append(_)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(t,{value:u(!0),items:f(v)}),h=u(!1)},indices(v){const x=new Set(v.detail.indices);for(const E of v.target.options)E.selected=x.has(E.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,p)}),a.addEventListener("input",p=>{const g=u(!0),v=u(!1);e.setValue(t,{value:g}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):a.addEventListener("input",function(p){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class tp extends ot{constructor(e){const{data:t,elements:i,parent:a}=e,o=!!a._commentManager;if(super(e,{isRenderable:!o&&ot._hasPopupData(t)}),this.elements=i,o&&ot._hasPopupData(t)){const c=this.popup=this.#e();for(const u of i)u.popup=c}else this.popup=null}#e(){return new hk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),i=[];for(const a of this.elements)a.popup=t,a.container.ariaHasPopup="dialog",i.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(a=>`${rr}${a}`).join(",")),this.container}}class hk{#e=null;#t=this.#G.bind(this);#i=this.#U.bind(this);#n=this.#L.bind(this);#a=this.#A.bind(this);#r=null;#s=null;#o=null;#c=null;#l=null;#h=null;#d=null;#f=!1;#g=null;#m=null;#u=null;#p=null;#y=null;#v=null;#b=null;#_=null;#S=null;#w=null;#C=!1;#x=null;#E=null;constructor({container:e,color:t,elements:i,titleObj:a,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:f,parentRect:p,open:g,commentManager:v=null}){this.#s=e,this.#S=a,this.#o=c,this.#_=u,this.#h=h,this.#r=t,this.#b=f,this.#d=p,this.#l=i,this.#e=v,this.#x=i[0],this.#c=cu.toDateObject(o),this.trigger=i.flatMap(x=>x.getElementsToTriggerPopup()),v||(this.#D(),this.#s.hidden=!0,g&&this.#A())}#D(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#a,{signal:e}),t.addEventListener("pointerenter",this.#n,{signal:e}),t.addEventListener("pointerleave",this.#i,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#R(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#y=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p){this.#p.parentNode||this.#x.container.after(this.#p);return}if(this.#y||this.#R(),!this.#y)return;const{signal:e}=this.#m=new AbortController,t=this.#x.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},a=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#x.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",i,{signal:e}),c.addEventListener("pointerenter",a,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#x.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#j(),this.#N(),c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",i,{signal:e}),c.addEventListener("pointerenter",a,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),u.after(c)}}#N(){if(this.#x.extraPopupElement&&!this.#x.editor)return;this.#p||this.renderCommentButton();const[e,t]=this.#y,{style:i}=this.#p;i.left=`calc(${e}%)`,i.top=`calc(${t}% - var(--comment-button-dim))`}#j(){this.#x.extraPopupElement||(this.#p||this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#x.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:i,creationDate:a,modificationDate:o}=this.#x.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:i,creationDate:a,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#E||=this.#x.commentText,this.#E}set comment(e){e!==this.comment&&(this.#x.commentText=this.#E=e)}focus(){this.#x.container?.focus()}get parentBoundingClientRect(){return this.#x.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:e,y:t,height:i}=this.#p.getBoundingClientRect(),{x:a,y:o,width:c,height:u}=this.#x.layer.getBoundingClientRect();return[(e-a)/c,(t+i-o)/u]}set commentPopupPosition(e){this.#v=e}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#y}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,i]=this.#v||this.commentButtonPosition.map(f=>f/100),a=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=a;this.#e.showDialog(null,this,o+t*u,c+i*h,{...e,parentDimensions:a})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#r){const i=e.style.outlineColor=ne.makeHexColor(...this.#r);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#S?.str){const i=document.createElement("span");i.className="title",t.append(i),{dir:i.dir,str:i.textContent}=this.#S}if(e.append(t),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),t.append(i)}jp({html:this.#M||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#s.append(e)}get#M(){const e=this.#_,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#_.html||null}get#O(){return this.#M?.attributes?.style?.fontSize||0}get#B(){return this.#M?.attributes?.style?.color||null}#I(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},a={style:{color:this.#B,fontSize:this.#O?`calc(${this.#O}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:a});return i}#G(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:e,popup:t,deleted:i}){if(this.#e){i?(this.remove(),this.#E=null):t&&(t.deleted?this.remove():(this.#j(),this.#E=t.text)),e&&(this.#y=null,this.#R(),this.#N());return}if(i||t?.deleted){this.remove();return}this.#D(),this.#w||={contentsObj:this.#o,richText:this.#_},e&&(this.#u=null),t&&t.text&&(this.#_=this.#I(t.text),this.#c=cu.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#_}=this.#w,this.#w=null,this.#g?.remove(),this.#g=null,this.#u=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#C=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:a,pageY:o}}}=this.#h;let c=!!this.#d,u=c?this.#d:this.#b;for(const E of this.#l)if(!u||ne.intersect(E.data.rect,u)!==null){u=E.data.rect,c=!0;break}const h=ne.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),p=c?u[2]-u[0]+5:0,g=h[0]+p,v=h[1];this.#u=[100*(g-a)/t,100*(v-o)/i];const{style:x}=this.#s;x.left=`${this.#u[0]}%`,x.top=`${this.#u[1]}%`}#A(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#U(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#L(){this.#g||this.render(),this.isVisible?this.#f&&this.#s.classList.add("focused"):(this.#T(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#U(){this.#s.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#C=this.isVisible,this.#C&&(this.#s.hidden=!0)}maybeShow(){this.#e||(this.#D(),this.#C&&(this.#g||this.#L(),this.#C=!1,this.#s.hidden=!1))}get isVisible(){return this.#e?!1:this.#s.hidden===!1}}class iw extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=we.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class fk extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pk extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",t-o),c.setAttribute("height",i-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class mk extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:i}=this,a=this.svgFactory.create(t,i,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",i/2),c.setAttribute("rx",t/2-o/2),c.setAttribute("ry",i/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class sw extends ot{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:a},width:o,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(o,c,!0);let h=[];for(let p=0,g=t.length;p<g;p+=2){const v=t[p]-e[0],x=e[3]-t[p+1];h.push(`${v},${x}`)}h=h.join(" ");const f=this.#e=this.svgFactory.createElement(this.svgElementName);return f.setAttribute("points",h),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),u.append(f),this.container.append(u),!a&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class gk extends sw{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yk extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class Yp extends ot{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?we.HIGHLIGHT:we.INK}#i(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:i,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:h}=this.#i(t,e),f=this.svgFactory.create(u,h,!0),p=this.#e=this.svgFactory.createElement("svg:g");f.append(p),p.setAttribute("stroke-width",a.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",c);for(let g=0,v=i.length;g<v;g++){const x=this.svgFactory.createElement(this.svgElementName);this.#t.push(x),x.setAttribute("points",i[g].join(",")),p.append(x)}return!o&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(f),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:i,rect:a}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),i)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",i[c].join(","));if(a){const{transform:c,width:u,height:h}=this.#i(this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class aw extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=we.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class bk extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class vk extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class xk extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class rw extends ot{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=we.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class wk extends ot{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:a}=wt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class Lu{#e=null;#t=null;#i=null;#n=new Map;#a=null;#r=null;#s=[];#o=!1;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:a,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:f,annotationStorage:p}){this.div=e,this.#e=t,this.#t=i,this.#a=u||null,this.#r=f||null,this.#i=p||new Fp,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=a,this._commentManager=h||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:t}=e,i=this.div;Ms(i,this.viewport);const a=new Map,o=[],c={data:null,layer:i,linkService:this.#r,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new el,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===ft.POPUP;if(h){const g=a.get(u.id);if(!g)continue;if(!this._commentManager){o.push(u);continue}c.elements=g}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;c.data=u;const f=Rf.create(c);if(!f.isRenderable)continue;if(!h&&(this.#s.push(f),u.popupRef)){const g=a.get(u.popupRef);g?g.push(f):a.set(u.popupRef,[f])}const p=f.render();u.hidden&&(p.style.visibility="hidden"),f._isEditable&&(this.#n.set(f.data.id,f),this._annotationEditorUIManager?.renderAnnotationElement(f))}await this.#c();for(const u of o){const h=c.elements=a.get(u.id);c.data=u;const f=Rf.create(c);if(!f.isRenderable)continue;const p=f.render();f.contentElement.id=`${rr}${u.id}`,u.hidden&&(p.style.visibility="hidden"),h.at(-1).container.after(p)}this.#l()}async#c(){if(this.#s.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:a}}of this.#s){const o=i.id=`${rr}${a}`;e.push(this.#a?.getAriaAttributes(o).then(c=>{if(c)for(const[u,h]of c)i.setAttribute(u,h)}))}}this.#s.sort(({data:{rect:[i,a,o,c]}},{data:{rect:[u,h,f,p]}})=>{if(i===o&&a===c)return 1;if(u===f&&h===p)return-1;const g=c,v=a,x=(a+c)/2,E=p,w=h,S=(h+p)/2;if(x>=E&&S<=v)return-1;if(S>=g&&x<=w)return 1;const _=(i+o)/2,C=(u+f)/2;return _-C});const t=document.createDocumentFragment();for(const i of this.#s)t.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&t.append(i.extraPopupElement.render());if(this.div.append(t),await Promise.all(e),this.#e)for(const i of this.#s)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#r,svgFactory:new el,parent:this};for(const i of e){i.borderStyle||=Lu._defaultBorderStyle,t.data=i;const a=Rf.create(t);a.isRenderable&&(a.render(),a.contentElement.id=`${rr}${i.id}`,this.#s.push(a))}await this.#c()}update({viewport:e}){const t=this.div;this.viewport=e,Ms(t,{rotation:e.rotation}),this.#l(),t.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const a=e.querySelector(`[data-annotation-id="${t}"]`);if(!a)continue;i.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):a.append(i);const c=this.#n.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,a.id,i),c._hasNoCanvas=!1):c.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:i,rotation:a}=e,o=new ak({data:{id:i,rect:e.getPDFRect(),rotation:a},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#r,annotationStorage:this.#i});return o.render(),o.contentElement.id=`${rr}${i}`,o.createOrUpdatePopup(),this.#s.push(o),o}removeAnnotation(e){const t=this.#s.findIndex(a=>a.data.id===e);if(t<0)return;const[i]=this.#s.splice(t,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const t of e)t.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return be(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:sr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Fc=/\r\n?|\n/g;class Nt extends ce{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Nt.prototype,t=o=>o.isEmpty(),i=Wi.TRANSLATE_SMALL,a=Wi.TRANSLATE_BIG;return be(this,"_keyboardManager",new hl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,a],checker:t}]]))}static _type="freetext";static _editorType=we.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Nt._defaultColor||ce._defaultLineColor,this.#n=e.fontSize||Nt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,t){ce.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case ke.FREETEXT_SIZE:Nt._defaultFontSize=t;break;case ke.FREETEXT_COLOR:Nt._defaultColor=t;break}}updateParams(e,t){switch(e){case ke.FREETEXT_SIZE:this.#a(t);break;case ke.FREETEXT_COLOR:this.#r(t);break}}static get defaultPropertiesToUpdate(){return[[ke.FREETEXT_SIZE,Nt._defaultFontSize],[ke.FREETEXT_COLOR,Nt._defaultColor||ce._defaultLineColor]]}get propertiesToUpdate(){return[[ke.FREETEXT_SIZE,this.#n],[ke.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Jo(this),[["colorPicker",this._colorPicker]]}get colorType(){return ke.FREETEXT_COLOR}#a(e){const t=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-this.#n)*this.parentScale),this.#n=a,this.#o()},i=this.#n;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#r(e){const t=a=>{this.color=a,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Nt._internalPadding*e,-(Nt._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#s(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(Nt.#c(i)),t=i);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#s().trimEnd();if(e===t)return;const i=a=>{if(this.#e=a,!a){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Nt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[f,p]=this.pageDimensions,[g,v]=this.pageTranslation;let x,E;switch(this.rotation){case 0:x=e+(c[0]-g)/f,E=t+this.height-(c[1]-v)/p;break;case 90:x=e+(c[0]-g)/f,E=t-(c[1]-v)/p,[u,h]=[h,-u];break;case 180:x=e-this.width+(c[0]-g)/f,E=t-(c[1]-v)/p,[u,h]=[-u,-h];break;case 270:x=e+(c[0]-g-this.height*p)/f,E=t+(c[1]-v-this.width*f)/p,[u,h]=[-h,u];break}this.setAt(x*a,E*o,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Fc,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const a=Nt.#d(t.getData("text")||"").replaceAll(Fc,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=c,f=[],p=[];if(u.nodeType===Node.TEXT_NODE){const x=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Fc,"")),x!==this.editorDiv){let E=f;for(const w of this.editorDiv.childNodes){if(w===x){E=p;continue}E.push(Nt.#c(w))}}f.push(u.nodeValue.slice(0,h).replaceAll(Fc,""))}else if(u===this.editorDiv){let x=f,E=0;for(const w of this.editorDiv.childNodes)E++===h&&(x=p),x.push(Nt.#c(w))}this.#e=`${f.join(`
`)}${a}${p.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(f.map(x=>x.length));for(const{firstChild:x}of this.editorDiv.childNodes)if(x.nodeType===Node.TEXT_NODE){const E=x.nodeValue.length;if(v<=E){g.setStart(x,v),g.setEnd(x,v);break}v-=E}o.removeAllRanges(),o.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#d(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Nt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,i){let a=null;if(e instanceof iw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:f,id:p,popupRef:g,richText:v,contentsObj:x,creationDate:E,modificationDate:w},textContent:S,textPosition:_,parent:{page:{pageNumber:C}}}=e;if(!S||S.length===0)return null;a=e={annotationType:we.FREETEXT,color:Array.from(u),fontSize:c,value:S.join(`
`),position:_,pageIndex:C-1,rect:h.slice(0),rotation:f,annotationElementId:p,id:p,deleted:!1,popupRef:g,comment:x?.str||null,richText:v,creationDate:E,modificationDate:w}}const o=await super.deserialize(e,t,i);return o.#n=e.fontSize,o.color=ne.makeHexColor(...e.color),o.#e=Nt.#d(e.value),o._initialData=a,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=ce._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:t,fontSize:this.#n,value:this.#h()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(e){const{value:t,fontSize:i,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((c,u)=>c!==a[u])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:i}=t;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,t.replaceChildren();for(const a of this.#e.split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ie{static PRECISION=1e-4;toSVGPath(){ze("Abstract method `toSVGPath` must be implemented.")}get box(){ze("Abstract getter `box` must be implemented.")}serialize(e,t){ze("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,a,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*a,c[u+1]=i+e[u+1]*o;return c}static _rescaleAndSwap(e,t,i,a,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*a,c[u+1]=i+e[u]*o;return c}static _translate(e,t,i,a){a||=new Float32Array(e.length);for(let o=0,c=e.length;o<c;o+=2)a[o]=t+e[o],a[o+1]=i+e[o+1];return a}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,a,o){switch(o){case 90:return[1-t/i,e/a];case 180:return[1-e/i,1-t/a];case 270:return[t/i,1-e/a];default:return[e/i,t/a]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,a,o,c){return[(e+5*i)/6,(t+5*a)/6,(5*i+o)/6,(5*a+c)/6,(i+o)/2,(a+c)/2]}}class ia{#e;#t=[];#i;#n;#a=[];#r=new Float32Array(18);#s;#o;#c;#l;#h;#d;#f=[];static#g=8;static#m=2;static#u=ia.#g+ia.#m;constructor({x:e,y:t},i,a,o,c,u=0){this.#e=i,this.#d=o*a,this.#n=c,this.#r.set([NaN,NaN,NaN,NaN,e,t],6),this.#i=u,this.#l=ia.#g*a,this.#c=ia.#u*a,this.#h=a,this.#f.push(e,t)}isEmpty(){return isNaN(this.#r[8])}#p(){const e=this.#r.subarray(4,6),t=this.#r.subarray(16,18),[i,a,o,c]=this.#e;return[(this.#s+(e[0]-t[0])/2-i)/o,(this.#o+(e[1]-t[1])/2-a)/c,(this.#s+(t[0]-e[0])/2-i)/o,(this.#o+(t[1]-e[1])/2-a)/c]}add({x:e,y:t}){this.#s=e,this.#o=t;const[i,a,o,c]=this.#e;let[u,h,f,p]=this.#r.subarray(8,12);const g=e-f,v=t-p,x=Math.hypot(g,v);if(x<this.#c)return!1;const E=x-this.#l,w=E/x,S=w*g,_=w*v;let C=u,T=h;u=f,h=p,f+=S,p+=_,this.#f?.push(e,t);const N=-_/E,D=S/E,M=N*this.#d,P=D*this.#d;return this.#r.set(this.#r.subarray(2,8),0),this.#r.set([f+M,p+P],4),this.#r.set(this.#r.subarray(14,18),12),this.#r.set([f-M,p-P],16),isNaN(this.#r[6])?(this.#a.length===0&&(this.#r.set([u+M,h+P],2),this.#a.push(NaN,NaN,NaN,NaN,(u+M-i)/o,(h+P-a)/c),this.#r.set([u-M,h-P],14),this.#t.push(NaN,NaN,NaN,NaN,(u-M-i)/o,(h-P-a)/c)),this.#r.set([C,T,u,h,f,p],6),!this.isEmpty()):(this.#r.set([C,T,u,h,f,p],6),Math.abs(Math.atan2(T-h,C-u)-Math.atan2(_,S))<Math.PI/2?([u,h,f,p]=this.#r.subarray(2,6),this.#a.push(NaN,NaN,NaN,NaN,((u+f)/2-i)/o,((h+p)/2-a)/c),[u,h,C,T]=this.#r.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((C+u)/2-i)/o,((T+h)/2-a)/c),!0):([C,T,u,h,f,p]=this.#r.subarray(0,6),this.#a.push(((C+5*u)/6-i)/o,((T+5*h)/6-a)/c,((5*u+f)/6-i)/o,((5*h+p)/6-a)/c,((u+f)/2-i)/o,((h+p)/2-a)/c),[f,p,u,h,C,T]=this.#r.subarray(12,18),this.#t.push(((C+5*u)/6-i)/o,((T+5*h)/6-a)/c,((5*u+f)/6-i)/o,((5*h+p)/6-a)/c,((u+f)/2-i)/o,((h+p)/2-a)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#a,t=this.#t;if(isNaN(this.#r[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let a=6;a<e.length;a+=6)isNaN(e[a])?i.push(`L${e[a+4]} ${e[a+5]}`):i.push(`C${e[a]} ${e[a+1]} ${e[a+2]} ${e[a+3]} ${e[a+4]} ${e[a+5]}`);this.#b(i);for(let a=t.length-6;a>=6;a-=6)isNaN(t[a])?i.push(`L${t[a+4]} ${t[a+5]}`):i.push(`C${t[a]} ${t[a+1]} ${t[a+2]} ${t[a+3]} ${t[a+4]} ${t[a+5]}`);return this.#v(i),i.join(" ")}#y(){const[e,t,i,a]=this.#e,[o,c,u,h]=this.#p();return`M${(this.#r[2]-e)/i} ${(this.#r[3]-t)/a} L${(this.#r[4]-e)/i} ${(this.#r[5]-t)/a} L${o} ${c} L${u} ${h} L${(this.#r[16]-e)/i} ${(this.#r[17]-t)/a} L${(this.#r[14]-e)/i} ${(this.#r[15]-t)/a} Z`}#v(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#b(e){const[t,i,a,o]=this.#e,c=this.#r.subarray(4,6),u=this.#r.subarray(16,18),[h,f,p,g]=this.#p();e.push(`L${(c[0]-t)/a} ${(c[1]-i)/o} L${h} ${f} L${p} ${g} L${(u[0]-t)/a} ${(u[1]-i)/o}`)}newFreeDrawOutline(e,t,i,a,o,c){return new ow(e,t,i,a,o,c)}getOutlines(){const e=this.#a,t=this.#t,i=this.#r,[a,o,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=h.length-2;g<v;g+=2)h[g]=(this.#f[g]-a)/c,h[g+1]=(this.#f[g+1]-o)/u;if(h[h.length-2]=(this.#s-a)/c,h[h.length-1]=(this.#o-o)/u,isNaN(i[6])&&!this.isEmpty())return this.#_(h);const f=new Float32Array(this.#a.length+24+this.#t.length);let p=e.length;for(let g=0;g<p;g+=2){if(isNaN(e[g])){f[g]=f[g+1]=NaN;continue}f[g]=e[g],f[g+1]=e[g+1]}p=this.#w(f,p);for(let g=t.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(t[g+v])){f[p]=f[p+1]=NaN,p+=2;continue}f[p]=t[g+v],f[p+1]=t[g+v+1],p+=2}return this.#S(f,p),this.newFreeDrawOutline(f,h,this.#e,this.#h,this.#i,this.#n)}#_(e){const t=this.#r,[i,a,o,c]=this.#e,[u,h,f,p]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-i)/o,(t[3]-a)/c,NaN,NaN,NaN,NaN,(t[4]-i)/o,(t[5]-a)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(t[16]-i)/o,(t[17]-a)/c,NaN,NaN,NaN,NaN,(t[14]-i)/o,(t[15]-a)/c],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#i,this.#n)}#S(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#w(e,t){const i=this.#r.subarray(4,6),a=this.#r.subarray(16,18),[o,c,u,h]=this.#e,[f,p,g,v]=this.#p();return e.set([NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/h,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(a[0]-o)/u,(a[1]-c)/h],t),t+=24}}class ow extends ie{#e;#t=new Float32Array(4);#i;#n;#a;#r;#s;constructor(e,t,i,a,o,c){super(),this.#s=e,this.#a=t,this.#e=i,this.#r=a,this.#i=o,this.#n=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,f,p]=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-u)/f,e[g+1]=(e[g+1]-h)/p;for(let g=0,v=t.length;g<v;g+=2)t[g]=(t[g]-u)/f,t[g+1]=(t[g+1]-h)/p}toSVGPath(){const e=[`M${this.#s[4]} ${this.#s[5]}`];for(let t=6,i=this.#s.length;t<i;t+=6){if(isNaN(this.#s[t])){e.push(`L${this.#s[t+4]} ${this.#s[t+5]}`);continue}e.push(`C${this.#s[t]} ${this.#s[t+1]} ${this.#s[t+2]} ${this.#s[t+3]} ${this.#s[t+4]} ${this.#s[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,a],o){const c=i-e,u=a-t;let h,f;switch(o){case 0:h=ie._rescale(this.#s,e,a,c,-u),f=ie._rescale(this.#a,e,a,c,-u);break;case 90:h=ie._rescaleAndSwap(this.#s,e,t,c,u),f=ie._rescaleAndSwap(this.#a,e,t,c,u);break;case 180:h=ie._rescale(this.#s,i,t,-c,u),f=ie._rescale(this.#a,i,t,-c,u);break;case 270:h=ie._rescaleAndSwap(this.#s,i,a,-c,-u),f=ie._rescaleAndSwap(this.#a,i,a,-c,-u);break}return{outline:Array.from(h),points:[Array.from(f)]}}#o(e){const t=this.#s;let i=t[4],a=t[5];const o=[i,a,i,a];let c=i,u=a,h=i,f=a;const p=e?Math.max:Math.min,g=new Float32Array(4);for(let x=6,E=t.length;x<E;x+=6){const w=t[x+4],S=t[x+5];isNaN(t[x])?(ne.pointBoundingBox(w,S,o),u>S?(c=w,u=S):u===S&&(c=p(c,w)),f<S?(h=w,f=S):f===S&&(h=p(h,w))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,ne.bezierBoundingBox(i,a,...t.slice(x,x+6),g),ne.rectBoundingBox(g[0],g[1],g[2],g[3],o),u>g[1]?(c=g[0],u=g[1]):u===g[1]&&(c=p(c,g[0])),f<g[3]?(h=g[2],f=g[3]):f===g[3]&&(h=p(h,g[2]))),i=w,a=S}const v=this.#t;v[0]=o[0]-this.#i,v[1]=o[1]-this.#i,v[2]=o[2]-o[0]+2*this.#i,v[3]=o[3]-o[1]+2*this.#i,this.firstPoint=[c,u],this.lastPoint=[h,f]}get box(){return this.#t}newOutliner(e,t,i,a,o,c=0){return new ia(e,t,i,a,o,c)}getNewOutline(e,t){const[i,a,o,c]=this.#t,[u,h,f,p]=this.#e,g=o*f,v=c*p,x=i*f+u,E=a*p+h,w=this.newOutliner({x:this.#a[0]*g+x,y:this.#a[1]*v+E},this.#e,this.#r,e,this.#n,t??this.#i);for(let S=2;S<this.#a.length;S+=2)w.add({x:this.#a[S]*g+x,y:this.#a[S+1]*v+E});return w.getOutlines()}}class np{#e;#t;#i;#n=[];#a=[];constructor(e,t=0,i=0,a=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:w,y:S,width:_,height:C}of e){const T=Math.floor((w-t)/c)*c,N=Math.ceil((w+_+t)/c)*c,D=Math.floor((S-t)/c)*c,M=Math.ceil((S+C+t)/c)*c,P=[T,D,M,!0],X=[N,D,M,!1];this.#n.push(P,X),ne.rectBoundingBox(T,D,N,M,o)}const u=o[2]-o[0]+2*i,h=o[3]-o[1]+2*i,f=o[0]-i,p=o[1]-i;let g=a?-1/0:1/0,v=1/0;const x=this.#n.at(a?-1:-2),E=[x[0],x[2]];for(const w of this.#n){const[S,_,C,T]=w;!T&&a?_<v?(v=_,g=S):_===v&&(g=Math.max(g,S)):T&&!a&&(_<v?(v=_,g=S):_===v&&(g=Math.min(g,S))),w[0]=(S-f)/u,w[1]=(_-p)/h,w[2]=(C-p)/h}this.#e=new Float32Array([f,p,u,h]),this.#t=[g,v],this.#i=E}getOutlines(){this.#n.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#r(e)}#r(e){const t=[],i=new Set;for(const c of e){const[u,h,f]=c;t.push([u,h,c],[u,f,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],f=t[c+1][2];h.push(f),f.push(h),i.add(h),i.add(f)}const a=[];let o;for(;i.size>0;){const c=i.values().next().value;let[u,h,f,p,g]=c;i.delete(c);let v=u,x=h;for(o=[u,f],a.push(o);;){let E;if(i.has(p))E=p;else if(i.has(g))E=g;else break;i.delete(E),[u,h,f,p,g]=E,v!==u&&(o.push(v,x,u,x===h?h:f),v=u),x=x===h?f:h}o.push(v,x)}return new Ak(a,this.#e,this.#t,this.#i)}#s(e){const t=this.#a;let i=0,a=t.length-1;for(;i<=a;){const o=i+a>>1,c=t[o][0];if(c===e)return o;c<e?i=o+1:a=o-1}return a+1}#o([,e,t]){const i=this.#s(e);this.#a.splice(i,0,[e,t])}#c([,e,t]){const i=this.#s(e);for(let a=i;a<this.#a.length;a++){const[o,c]=this.#a[a];if(o!==e)break;if(o===e&&c===t){this.#a.splice(a,1);return}}for(let a=i-1;a>=0;a--){const[o,c]=this.#a[a];if(o!==e)break;if(o===e&&c===t){this.#a.splice(a,1);return}}}#l(e){const[t,i,a]=e,o=[[t,i,a]],c=this.#s(a);for(let u=0;u<c;u++){const[h,f]=this.#a[u];for(let p=0,g=o.length;p<g;p++){const[,v,x]=o[p];if(!(f<=v||x<=h)){if(v>=h){if(x>f)o[p][1]=f;else{if(g===1)return[];o.splice(p,1),p--,g--}continue}o[p][2]=h,x>f&&o.push([t,f,x])}}}return o}}class Ak extends ie{#e;#t;constructor(e,t,i,a){super(),this.#t=e,this.#e=t,this.firstPoint=i,this.lastPoint=a}toSVGPath(){const e=[];for(const t of this.#t){let[i,a]=t;e.push(`M${i} ${a}`);for(let o=2;o<t.length;o+=2){const c=t[o],u=t[o+1];c===i?(e.push(`V${u}`),a=u):u===a&&(e.push(`H${c}`),i=c)}e.push("Z")}return e.join(" ")}serialize([e,t,i,a],o){const c=[],u=i-e,h=a-t;for(const f of this.#t){const p=new Array(f.length);for(let g=0;g<f.length;g+=2)p[g]=e+f[g]*u,p[g+1]=a-f[g+1]*h;c.push(p)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class ip extends ia{newFreeDrawOutline(e,t,i,a,o,c){return new Sk(e,t,i,a,o,c)}}class Sk extends ow{newOutliner(e,t,i,a,o,c=0){return new ip(e,t,i,a,o,c)}}class pt extends ce{#e=null;#t=0;#i;#n=null;#a=null;#r=null;#s=null;#o=0;#c=null;#l=null;#h=null;#d=!1;#f=null;#g=null;#m=null;#u="";#p;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=we.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=pt.prototype;return be(this,"_keyboardManager",new hl([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||pt._defaultColor,this.#p=e.thickness||pt._defaultThickness,this.opacity=e.opacity||pt._defaultOpacity,this.#i=e.boxes||null,this.#y=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#d=!0,this.#b(e),this.#x()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#s=e.focusNode,this.#o=e.focusOffset,this.#v(),this.#x(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#v(){const e=new np(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new np(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#r=t.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:a}=this.#r;this.#g=[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height]}#b({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#l=e;const a=1.5;if(this.#r=e.getNewOutline(this.#p/2+a,.0025),t>=0)this.#h=t,this.#n=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:pt.#E(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:pt.#E(this.#r.box,g),path:{d:this.#r.toSVGPath()}})}const[o,c,u,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=h;break;case 90:{const[g,v]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*v/g,this.height=h*g/v;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*v/g,this.height=h*g/v;break}}const{firstPoint:f}=e;this.#f=[(f[0]-o)/u,(f[1]-c)/h];const{lastPoint:p}=this.#r;this.#g=[(p[0]-o)/u,(p[1]-c)/h]}static initialize(e,t){ce.initialize(e,t),pt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:pt._defaultColor=t;break;case ke.HIGHLIGHT_THICKNESS:pt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case ke.HIGHLIGHT_COLOR:this.#_(t);break;case ke.HIGHLIGHT_THICKNESS:this.#S(t);break}}static get defaultPropertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,pt._defaultColor],[ke.HIGHLIGHT_THICKNESS,pt._defaultThickness]]}get propertiesToUpdate(){return[[ke.HIGHLIGHT_COLOR,this.color||pt._defaultColor],[ke.HIGHLIGHT_THICKNESS,this.#p||pt._defaultThickness],[ke.HIGHLIGHT_FREE,this.#d]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#a?.updateColor(this.color),super.onUpdatedColor()}#_(e){const t=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},i=this.color,a=this.opacity;this.addCommands({cmd:t.bind(this,e,pt._defaultOpacity),undo:t.bind(this,i,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#S(e){const t=this.#p,i=a=>{this.#p=a,this.#w(a)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ke.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#a=new vn({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#N())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#x(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#x(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#w(e){this.#d&&(this.#b({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#x(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#d},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#r.box,path:{d:this.#r.toSVGPath()}},this.#d),this.#c&&(this.#c.style.clipPath=this.#n))}static#E([e,t,i,a],o){switch(o){case 90:return[1-t-a,e,a,i];case 180:return[1-e-i,1-t-a,i,a];case 270:return[t,1-e-i,a,i]}return[e,t,i,a]}rotate(e){const{drawLayer:t}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=pt.#E(this.#l.box,e)):i=pt.#E([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:pt.#E(this.#r.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#D.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#n,this.setDims(),Mx(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#D(e){pt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#R(!0);break;case 1:case 3:this.#R(!1);break}}#R(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#s,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#d||this.#R(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#N(){return this.#d?this.rotation:0}#j(){if(this.#d)return null;const[e,t]=this.pageDimensions,[i,a]=this.pageTranslation,o=this.#i,c=new Float32Array(o.length*8);let u=0;for(const{x:h,y:f,width:p,height:g}of o){const v=h*e+i,x=(1-f)*t+a;c[u]=c[u+4]=v,c[u+1]=c[u+3]=x,c[u+2]=c[u+6]=v+p*e,c[u+5]=c[u+7]=x-g*t,u+=8}return c}#M(e){return this.#l.serialize(e,this.#N())}static startHighlighting(e,t,{target:i,x:a,y:o}){const{x:c,y:u,width:h,height:f}=i.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),v=x=>{p.abort(),this.#B(e,x)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",rt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",An,{signal:g}),i.addEventListener("pointermove",this.#O.bind(this,e),{signal:g}),this._freeHighlight=new ip({x:a,y:o},[c,u,h,f],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#O(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#B(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,i){let a=null;if(e instanceof aw){const{data:{quadPoints:E,rect:w,rotation:S,id:_,color:C,opacity:T,popupRef:N,richText:D,contentsObj:M,creationDate:P,modificationDate:X},parent:{page:{pageNumber:H}}}=e;a=e={annotationType:we.HIGHLIGHT,color:Array.from(C),opacity:T,quadPoints:E,boxes:null,pageIndex:H-1,rect:w.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:N,richText:D,comment:M?.str||null,creationDate:P,modificationDate:X}}else if(e instanceof Yp){const{data:{inkLists:E,rect:w,rotation:S,id:_,color:C,borderStyle:{rawWidth:T},popupRef:N,richText:D,contentsObj:M,creationDate:P,modificationDate:X},parent:{page:{pageNumber:H}}}=e;a=e={annotationType:we.HIGHLIGHT,color:Array.from(C),thickness:T,inkLists:E,boxes:null,pageIndex:H-1,rect:w.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,popupRef:N,richText:D,comment:M?.str||null,creationDate:P,modificationDate:X}}const{color:o,quadPoints:c,inkLists:u,opacity:h}=e,f=await super.deserialize(e,t,i);f.color=ne.makeHexColor(...o),f.opacity=h||1,u&&(f.#p=e.thickness),f._initialData=a,e.comment&&f.setCommentData(e);const[p,g]=f.pageDimensions,[v,x]=f.pageTranslation;if(c){const E=f.#i=[];for(let w=0;w<c.length;w+=8)E.push({x:(c[w]-v)/p,y:1-(c[w+1]-x)/g,width:(c[w+2]-c[w])/p,height:(c[w+1]-c[w+5])/g});f.#v(),f.#x(),f.rotate(f.rotation)}else if(u){f.#d=!0;const E=u[0],w={x:E[0]-v,y:g-(E[1]-x)},S=new ip(w,[0,0,p,g],1,f.#p/2,!0,.001);for(let T=0,N=E.length;T<N;T+=2)w.x=E[T]-v,w.y=g-(E[T+1]-x),S.add(w);const{id:_,clipPathId:C}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:f.color,"fill-opacity":f._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);f.#b({highlightOutlines:S.getOutlines(),highlightId:_,clipPathId:C}),f.#x(),f.rotate(f.parentRotation)}return f}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=ce._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#j(),outlines:this.#M(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#I(i)?null:(i.id=this.annotationElementId,i)}#I(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((i,a)=>i!==t[a])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class lw{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){ze("Not implemented")}}class Be extends ce{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#a=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#r(e),this.#c())}#r({drawOutlines:e,drawId:t,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#s(e,this.parent),this.#d(e.box)}#s(e,t){const{id:i}=t.drawLayer.draw(Be._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,t){const i=new Set(Object.keys(e));for(const[a,o]of Object.entries(t))i.has(a)?Object.assign(e[a],o):e[a]=o;return e}static getDefaultDrawingOptions(e){ze("Not implemented")}static get typesMap(){ze("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(Be.#i.updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[i,a]of this.typesMap)e.push([i,t[a]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[i,a]of this.constructor.typesMap)e.push([i,t[a]]);return e}_updateProperty(e,t,i){const a=this._drawingOptions,o=a[t],c=u=>{a.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#d(h),this.parent?.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,i),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#h()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#h()),{bbox:this.#f()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#h(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#s(this.#e,e)}}#l([e,t,i,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[t,1-e,i*(c/o),a*(o/c)];case 180:return[1-e,1-t,i,a];case 270:return[1-t,e,i*(c/o),a*(o/c)];default:return[e,t,i,a]}}#h(){const{x:e,y:t,width:i,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-t,e,i*(o/c),a*(c/o)];case 180:return[1-e,1-t,i,a];case 270:return[t,1-e,i*(o/c),a*(c/o)];default:return[e,t,i,a]}}#d(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:t,width:i,height:a,rotation:o,parentRotation:c,parentDimensions:[u,h]}=this;switch((o*4+c)/90){case 1:return[1-t-a,e,a,i];case 2:return[1-e-i,1-t-a,i,a];case 3:return[t,1-e-i,a,i];case 4:return[e,t-i*(u/h),a*(h/u),i*(u/h)];case 5:return[1-t,e,i*(u/h),a*(h/u)];case 6:return[1-e-a*(h/u),1-t,a*(h/u),i*(u/h)];case 7:return[t-i*(u/h),1-e-a*(h/u),i*(u/h),a*(h/u)];case 8:return[e-i,t-a,i,a];case 9:return[1-t,e-i,a,i];case 10:return[1-e,1-t,i,a];case 11:return[t-a,1-e,a,i];case 12:return[e-a*(h/u),t,a*(h/u),i*(u/h)];case 13:return[1-t-i*(u/h),e-a*(h/u),i*(u/h),a*(h/u)];case 14:return[1-e,1-t-i*(u/h),a*(h/u),i*(u/h)];case 15:return[t,1-e,i*(u/h),a*(h/u)];default:return[e,t,i,a]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Be._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const i=super.render();i.classList.add("draw");const a=document.createElement("div");return i.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),i}static createDrawerInstance(e,t,i,a,o){ze("Not implemented")}static startDrawing(e,t,i,a){const{target:o,offsetX:c,offsetY:u,pointerId:h,pointerType:f}=a;if(Ue.isInitializedAndDifferentPointerType(f))return;const{viewport:{rotation:p}}=e,{width:g,height:v}=o.getBoundingClientRect(),x=Be.#n=new AbortController,E=e.combinedSignal(x);if(Ue.setPointer(f,h),window.addEventListener("pointerup",w=>{Ue.isSamePointerIdOrRemove(w.pointerId)&&this._endDraw(w)},{signal:E}),window.addEventListener("pointercancel",w=>{Ue.isSamePointerIdOrRemove(w.pointerId)&&this._currentParent.endDrawingSession()},{signal:E}),window.addEventListener("pointerdown",w=>{Ue.isSamePointerType(w.pointerType)&&(Ue.initializeAndAddPointerId(w.pointerId),Be.#i.isCancellable()&&(Be.#i.removeLastElement(),Be.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:E}),window.addEventListener("contextmenu",An,{signal:E}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:E}),o.addEventListener("touchmove",w=>{Ue.isSameTimeStamp(w.timeStamp)&&rt(w)},{signal:E}),e.toggleDrawing(),t._editorUndoBar?.hide(),Be.#i){e.drawLayer.updateProperties(this._currentDrawId,Be.#i.startNew(c,u,g,v,p));return}t.updateUIForDefaultProperties(this),Be.#i=this.createDrawerInstance(c,u,g,v,p),Be.#a=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(Be.#a.toSVGProperties(),Be.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(Ue.isSameTimeStamp(e.timeStamp),!Be.#i)return;const{offsetX:t,offsetY:i,pointerId:a}=e;if(Ue.isSamePointerId(a)){if(Ue.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,Be.#i.add(t,i)),Ue.setTimeStamp(e.timeStamp),rt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,Be.#i=null,Be.#a=null,Ue.clearTimeStamp()),Be.#n&&(Be.#n.abort(),Be.#n=null,Ue.clearPointerIds())}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,Be.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=Be.#i,a=this._currentDrawId,o=i.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(a,i.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(a,i.removeLastElement())},mustExec:!1,type:ke.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(ke.DRAW_STEP),!Be.#i.isEmpty()){const{pageDimensions:[i,a],scale:o}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:Be.#i.getOutlines(i*o,a*o,o,this._INNER_MARGIN),drawingOptions:Be.#a,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,a,o,c){ze("Not implemented")}static async deserialize(e,t,i){const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,e),f=await super.deserialize(e,t,i);return f.createDrawingOptions(e),f.#r({drawOutlines:h}),f.#c(),f.onScaleChanging(),f.rotate(),f}serializeDraw(e){const[t,i]=this.pageTranslation,[a,o]=this.pageDimensions;return this.#e.serialize([t,i,a,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Ek{#e=new Float64Array(6);#t;#i;#n;#a;#r;#s="";#o=0;#c=new pl;#l;#h;constructor(e,t,i,a,o,c){this.#l=i,this.#h=a,this.#n=o,this.#a=c,[e,t]=this.#d(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t],this.#i=[{line:u,points:this.#r}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#a=t)}#d(e,t){return ie._normalizePoint(e,t,this.#l,this.#h,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#r.length<=10}add(e,t){[e,t]=this.#d(e,t);const[i,a,o,c]=this.#e.subarray(2,6),u=e-o,h=t-c;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#r.push(e,t),isNaN(i)?(this.#e.set([o,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,a,o,c,e,t],0),this.#t.push(...ie.createBezierPoints(i,a,o,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(this.#r.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,a,o){this.#l=i,this.#h=a,this.#n=o,[e,t]=this.#d(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#r=[e,t];const u=this.#i.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#i.push({line:c,points:this.#r}),this.#e.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#r=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#s="";for(let e=0,t=this.#i.length;e<t;e++){const{line:i,points:a}=this.#i[e];this.#t=i,this.#r=a,this.#o=0,this.toSVGPath()}return{path:{d:this.#s}}}toSVGPath(){const e=ie.svgRound(this.#t[4]),t=ie.svgRound(this.#t[5]);if(this.#r.length===2)return this.#s=`${this.#s} M ${e} ${t} Z`,this.#s;if(this.#r.length<=6){const a=this.#s.lastIndexOf("M");this.#s=`${this.#s.slice(0,a)} M ${e} ${t}`,this.#o=6}if(this.#r.length===4){const a=ie.svgRound(this.#t[10]),o=ie.svgRound(this.#t[11]);return this.#s=`${this.#s} L ${a} ${o}`,this.#o=12,this.#s}const i=[];this.#o===0&&(i.push(`M ${e} ${t}`),this.#o=6);for(let a=this.#o,o=this.#t.length;a<o;a+=6){const[c,u,h,f,p,g]=this.#t.slice(a,a+6).map(ie.svgRound);i.push(`C${c} ${u} ${h} ${f} ${p} ${g}`)}return this.#s+=i.join(" "),this.#o=this.#t.length,this.#s}getOutlines(e,t,i,a){const o=this.#i.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#i,e,t,i,this.#n,this.#a,a),this.#e=null,this.#t=null,this.#i=null,this.#s=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class pl extends ie{#e;#t=0;#i;#n;#a;#r;#s;#o;#c;build(e,t,i,a,o,c,u){this.#a=t,this.#r=i,this.#s=a,this.#o=o,this.#c=c,this.#i=u??0,this.#n=e,this.#d()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#n){if(e.push(`M${ie.svgRound(t[4])} ${ie.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${ie.svgRound(t[10])} ${ie.svgRound(t[11])}`);continue}for(let i=6,a=t.length;i<a;i+=6){const[o,c,u,h,f,p]=t.subarray(i,i+6).map(ie.svgRound);e.push(`C${o} ${c} ${u} ${h} ${f} ${p}`)}}return e.join("")}serialize([e,t,i,a],o){const c=[],u=[],[h,f,p,g]=this.#h();let v,x,E,w,S,_,C,T,N;switch(this.#o){case 0:N=ie._rescale,v=e,x=t+a,E=i,w=-a,S=e+h*i,_=t+(1-f-g)*a,C=e+(h+p)*i,T=t+(1-f)*a;break;case 90:N=ie._rescaleAndSwap,v=e,x=t,E=i,w=a,S=e+f*i,_=t+h*a,C=e+(f+g)*i,T=t+(h+p)*a;break;case 180:N=ie._rescale,v=e+i,x=t,E=-i,w=a,S=e+(1-h-p)*i,_=t+f*a,C=e+(1-h)*i,T=t+(f+g)*a;break;case 270:N=ie._rescaleAndSwap,v=e+i,x=t+a,E=-i,w=-a,S=e+(1-f-g)*i,_=t+(1-h-p)*a,C=e+(1-f)*i,T=t+(1-h)*a;break}for(const{line:D,points:M}of this.#n)c.push(N(D,v,x,E,w,o?new Array(D.length):null)),u.push(N(M,v,x,E,w,o?new Array(M.length):null));return{lines:c,points:u,rect:[S,_,C,T]}}static deserialize(e,t,i,a,o,{paths:{lines:c,points:u},rotation:h,thickness:f}){const p=[];let g,v,x,E,w;switch(h){case 0:w=ie._rescale,g=-e/i,v=t/a+1,x=1/i,E=-1/a;break;case 90:w=ie._rescaleAndSwap,g=-t/a,v=-e/i,x=1/a,E=1/i;break;case 180:w=ie._rescale,g=e/i+1,v=-t/a,x=-1/i,E=1/a;break;case 270:w=ie._rescaleAndSwap,g=t/a+1,v=e/i+1,x=-1/a,E=-1/i;break}if(!c){c=[];for(const _ of u){const C=_.length;if(C===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1]]));continue}if(C===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,_[0],_[1],NaN,NaN,NaN,NaN,_[2],_[3]]));continue}const T=new Float32Array(3*(C-2));c.push(T);let[N,D,M,P]=_.subarray(0,4);T.set([NaN,NaN,NaN,NaN,N,D],0);for(let X=4;X<C;X+=2){const H=_[X],$=_[X+1];T.set(ie.createBezierPoints(N,D,M,P,H,$),(X-2)*3),[N,D,M,P]=[M,P,H,$]}}}for(let _=0,C=c.length;_<C;_++)p.push({line:w(c[_].map(T=>T??NaN),g,v,x,E),points:w(u[_].map(T=>T??NaN),g,v,x,E)});const S=new this.prototype.constructor;return S.build(p,i,a,1,h,f,o),S}#l(e=this.#c){const t=this.#i+e/2*this.#s;return this.#o%180===0?[t/this.#a,t/this.#r]:[t/this.#r,t/this.#a]}#h(){const[e,t,i,a]=this.#e,[o,c]=this.#l(0);return[e+o,t+c,i-2*o,a-2*c]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:a}of this.#n){if(a.length<=12){for(let u=4,h=a.length;u<h;u+=6)ne.pointBoundingBox(a[u],a[u+1],e);continue}let o=a[4],c=a[5];for(let u=6,h=a.length;u<h;u+=6){const[f,p,g,v,x,E]=a.subarray(u,u+6);ne.bezierBoundingBox(o,c,f,p,g,v,x,E,e),o=x,c=E}}const[t,i]=this.#l();e[0]=kt(e[0]-t,0,1),e[1]=kt(e[1]-i,0,1),e[2]=kt(e[2]+t,0,1),e[3]=kt(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,i]=this.#l();this.#c=e;const[a,o]=this.#l(),[c,u]=[a-t,o-i],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],i){const[a,o]=this.#l();this.#a=e,this.#r=t,this.#s=i;const[c,u]=this.#l(),h=c-a,f=u-o,p=this.#e;return p[0]-=h,p[1]-=f,p[2]+=2*h,p[3]+=2*f,p}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ie.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let i=0,a=0,o=0,c=0,u=0,h=0;switch(this.#t){case 90:a=t/e,o=-e/t,u=e;break;case 180:i=-1,c=-1,u=e,h=t;break;case 270:a=-t/e,o=e/t,h=t;break;default:return""}return`matrix(${i} ${a} ${o} ${c} ${ie.svgRound(u)} ${ie.svgRound(h)})`}getPathResizingSVGProperties([e,t,i,a]){const[o,c]=this.#l(),[u,h,f,p]=this.#e;if(Math.abs(f-o)<=ie.PRECISION||Math.abs(p-c)<=ie.PRECISION){const w=e+i/2-(u+f/2),S=t+a/2-(h+p/2);return{path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${S})`}}}const g=(i-2*o)/(f-2*o),v=(a-2*c)/(p-2*c),x=f/i,E=p/a;return{path:{"transform-origin":`${ie.svgRound(u)} ${ie.svgRound(h)}`,transform:`${this.rotationTransform} scale(${x} ${E}) translate(${ie.svgRound(o)} ${ie.svgRound(c)}) scale(${g} ${v}) translate(${ie.svgRound(-o)} ${ie.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,i,a]){const[o,c]=this.#l(),u=this.#e,[h,f,p,g]=u;if(u[0]=e,u[1]=t,u[2]=i,u[3]=a,Math.abs(p-o)<=ie.PRECISION||Math.abs(g-c)<=ie.PRECISION){const S=e+i/2-(h+p/2),_=t+a/2-(f+g/2);for(const{line:C,points:T}of this.#n)ie._translate(C,S,_,C),ie._translate(T,S,_,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*o)/(p-2*o),x=(a-2*c)/(g-2*c),E=-v*(h+o)+e+o,w=-x*(f+c)+t+c;if(v!==1||x!==1||E!==0||w!==0)for(const{line:S,points:_}of this.#n)ie._rescale(S,E,w,v,x,S),ie._rescale(_,E,w,v,x,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){const[a,o]=i,c=this.#e,u=e-c[0],h=t-c[1];if(this.#a===a&&this.#r===o)for(const{line:f,points:p}of this.#n)ie._translate(f,u,h,f),ie._translate(p,u,h,p);else{const f=this.#a/a,p=this.#r/o;this.#a=a,this.#r=o;for(const{line:g,points:v}of this.#n)ie._rescale(g,u,h,f,p,g),ie._rescale(v,u,h,f,p,v);c[2]*=f,c[3]*=p}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e)} ${ie.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ie.svgRound(e[0])} ${ie.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Ou extends lw{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:ce._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Ou(this._viewParameters);return e.updateAll(this),e}}class Wp extends Be{static _type="ink";static _editorType=we.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){ce.initialize(e,t),this._defaultDrawingOptions=new Ou(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return be(this,"typesMap",new Map([[ke.INK_THICKNESS,"stroke-width"],[ke.INK_COLOR,"stroke"],[ke.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,a,o){return new Ek(e,t,i,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,a,o,c){return pl.deserialize(e,t,i,a,o,c)}static async deserialize(e,t,i){let a=null;if(e instanceof Yp){const{data:{inkLists:c,rect:u,rotation:h,id:f,color:p,opacity:g,borderStyle:{rawWidth:v},popupRef:x,richText:E,contentsObj:w,creationDate:S,modificationDate:_},parent:{page:{pageNumber:C}}}=e;a=e={annotationType:we.INK,color:Array.from(p),thickness:v,opacity:g,paths:{points:c},boxes:null,pageIndex:C-1,rect:u.slice(0),rotation:h,annotationElementId:f,id:f,deleted:!1,popupRef:x,richText:E,comment:w?.str||null,creationDate:S,modificationDate:_}}const o=await super.deserialize(e,t,i);return o._initialData=a,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new Jo(this),[["colorPicker",this._colorPicker]]}get colorType(){return ke.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=Wp.getDefaultDrawingOptions({stroke:ne.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(e),{color:ce._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:t,points:i}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:i,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==i||e.opacity!==a||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class sp extends pl{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const zc=8,Mo=3;class ta{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,i,a){return i-=e,a-=t,i===0?a>0?0:4:i===1?a+6:2-a}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,t,i,a,o,c,u){const h=this.#t(i,a,o,c);for(let f=0;f<8;f++){const p=(-f+h-u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+g)*t+(a+v)]!==0)return p}return-1}static#a(e,t,i,a,o,c,u){const h=this.#t(i,a,o,c);for(let f=0;f<8;f++){const p=(f+h+u+16)%8,g=this.#i[2*p],v=this.#i[2*p+1];if(e[(i+g)*t+(a+v)]!==0)return p}return-1}static#r(e,t,i,a){const o=e.length,c=new Int32Array(o);for(let p=0;p<o;p++)c[p]=e[p]<=a?1:0;for(let p=1;p<i-1;p++)c[p*t]=c[p*t+t-1]=0;for(let p=0;p<t;p++)c[p]=c[t*i-1-p]=0;let u=1,h;const f=[];for(let p=1;p<i-1;p++){h=1;for(let g=1;g<t-1;g++){const v=p*t+g,x=c[v];if(x===0)continue;let E=p,w=g;if(x===1&&c[v-1]===0)u+=1,w-=1;else if(x>=1&&c[v+1]===0)u+=1,w+=1,x>1&&(h=x);else{x!==1&&(h=Math.abs(x));continue}const S=[g,p],_=w===g+1,C={isHole:_,points:S,id:u,parent:0};f.push(C);let T;for(const Y of f)if(Y.id===h){T=Y;break}T?T.isHole?C.parent=_?T.parent:h:C.parent=_?h:T.parent:C.parent=_?h:0;const N=this.#n(c,t,p,g,E,w,0);if(N===-1){c[v]=-u,c[v]!==1&&(h=Math.abs(c[v]));continue}let D=this.#i[2*N],M=this.#i[2*N+1];const P=p+D,X=g+M;E=P,w=X;let H=p,$=g;for(;;){const Y=this.#a(c,t,H,$,E,w,1);D=this.#i[2*Y],M=this.#i[2*Y+1];const Z=H+D,se=$+M;S.push(se,Z);const re=H*t+$;if(c[re+1]===0?c[re]=-u:c[re]===1&&(c[re]=u),Z===p&&se===g&&H===P&&$===X){c[v]!==1&&(h=Math.abs(c[v]));break}else E=H,w=$,H=Z,$=se}}}return f}static#s(e,t,i,a){if(i-t<=4){for(let P=t;P<i-2;P+=2)a.push(e[P],e[P+1]);return}const o=e[t],c=e[t+1],u=e[i-4]-o,h=e[i-3]-c,f=Math.hypot(u,h),p=u/f,g=h/f,v=p*c-g*o,x=h/u,E=1/f,w=Math.atan(x),S=Math.cos(w),_=Math.sin(w),C=E*(Math.abs(S)+Math.abs(_)),T=E*(1-C+C**2),N=Math.max(Math.atan(Math.abs(_+S)*T),Math.atan(Math.abs(_-S)*T));let D=0,M=t;for(let P=t+2;P<i-2;P+=2){const X=Math.abs(v-p*e[P+1]+g*e[P]);X>D&&(M=P,D=X)}D>(f*N)**2?(this.#s(e,t,M+2,a),this.#s(e,M,i,a)):a.push(o,c)}static#o(e){const t=[],i=e.length;return this.#s(e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t}static#c(e,t,i,a,o,c){const u=new Float32Array(c**2),h=-2*a**2,f=c>>1;for(let w=0;w<c;w++){const S=(w-f)**2;for(let _=0;_<c;_++)u[w*c+_]=Math.exp((S+(_-f)**2)/h)}const p=new Float32Array(256),g=-2*o**2;for(let w=0;w<256;w++)p[w]=Math.exp(w**2/g);const v=e.length,x=new Uint8Array(v),E=new Uint32Array(256);for(let w=0;w<i;w++)for(let S=0;S<t;S++){const _=w*t+S,C=e[_];let T=0,N=0;for(let M=0;M<c;M++){const P=w+M-f;if(!(P<0||P>=i))for(let X=0;X<c;X++){const H=S+X-f;if(H<0||H>=t)continue;const $=e[P*t+H],Y=u[M*c+X]*p[Math.abs($-C)];T+=$*Y,N+=Y}}const D=x[_]=Math.round(T/N);E[D]++}return[x,E]}static#l(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t}static#h(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let a=-1/0,o=1/0;for(let u=0,h=i.length;u<h;u++){const f=i[u]=e[u<<2];a=Math.max(a,f),o=Math.min(o,f)}const c=255/(a-o);for(let u=0,h=i.length;u<h;u++)i[u]=(i[u]-o)*c;return i}static#d(e){let t,i=-1/0,a=-1/0;const o=e.findIndex(h=>h!==0);let c=o,u=o;for(t=o;t<256;t++){const h=e[t];h>i&&(t-c>a&&(a=t-c,u=t-1),i=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:i,height:a}=e,{maxDim:o}=this.#e;let c=i,u=a;if(i>o||a>o){let v=i,x=a,E=Math.log2(Math.max(i,a)/o);const w=Math.floor(E);E=E===w?w-1:w;for(let _=0;_<E;_++){c=Math.ceil(v/2),u=Math.ceil(x/2);const C=new OffscreenCanvas(c,u);C.getContext("2d").drawImage(e,0,0,v,x,0,0,c,u),v=c,x=u,e!==t&&e.close(),e=C.transferToImageBitmap()}const S=Math.min(o/c,o/u);c=Math.round(c*S),u=Math.round(u*S)}const f=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});f.fillStyle="white",f.fillRect(0,0,c,u),f.filter="grayscale(1)",f.drawImage(e,0,0,e.width,e.height,0,0,c,u);const p=f.getImageData(0,0,c,u).data;return[this.#h(p),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:a},o,c,u,h){let f=new OffscreenCanvas(1,1),p=f.getContext("2d",{alpha:!1});const g=200,v=p.font=`${i} ${a} ${g}px ${t}`,{actualBoundingBoxLeft:x,actualBoundingBoxRight:E,actualBoundingBoxAscent:w,actualBoundingBoxDescent:S,fontBoundingBoxAscent:_,fontBoundingBoxDescent:C,width:T}=p.measureText(e),N=1.5,D=Math.ceil(Math.max(Math.abs(x)+Math.abs(E)||0,T)*N),M=Math.ceil(Math.max(Math.abs(w)+Math.abs(S)||g,Math.abs(_)+Math.abs(C)||g)*N);f=new OffscreenCanvas(D,M),p=f.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,D,M),p.fillStyle="black",p.fillText(e,D*(N-1)/2,M*(3-N)/2);const P=this.#h(p.getImageData(0,0,D,M).data),X=this.#l(P),H=this.#d(X),$=this.#r(P,D,M,H);return this.processDrawnLines({lines:{curves:$,width:D,height:M},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,i,a,o){const[c,u,h]=this.#f(e),[f,p]=this.#c(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#d(p),v=this.#r(f,u,h,g);return this.processDrawnLines({lines:{curves:v,width:u,height:h},pageWidth:t,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:a,innerMargin:o,mustSmooth:c,areContours:u}){a%180!==0&&([t,i]=[i,t]);const{curves:h,width:f,height:p}=e,g=e.thickness??0,v=[],x=Math.min(t/f,i/p),E=x/t,w=x/i,S=[];for(const{points:C}of h){const T=c?this.#o(C):C;if(!T)continue;S.push(T);const N=T.length,D=new Float32Array(N),M=new Float32Array(3*(N===2?2:N-2));if(v.push({line:M,points:D}),N===2){D[0]=T[0]*E,D[1]=T[1]*w,M.set([NaN,NaN,NaN,NaN,D[0],D[1]],0);continue}let[P,X,H,$]=T;P*=E,X*=w,H*=E,$*=w,D.set([P,X,H,$],0),M.set([NaN,NaN,NaN,NaN,P,X],0);for(let Y=4;Y<N;Y+=2){const Z=D[Y]=T[Y]*E,se=D[Y+1]=T[Y+1]*w;M.set(ie.createBezierPoints(P,X,H,$,Z,se),(Y-2)*3),[P,X,H,$]=[H,$,Z,se]}}if(v.length===0)return null;const _=u?new sp:new pl;return _.build(v,t,i,1,a,u?0:g,o),{outline:_,newCurves:S,areContours:u,thickness:g,width:f,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:a,height:o}){let c=1/0,u=-1/0,h=0;for(const T of e){h+=T.length;for(let N=2,D=T.length;N<D;N++){const M=T[N]-T[N-2];c=Math.min(c,M),u=Math.max(u,M)}}let f;c>=-128&&u<=127?f=Int8Array:c>=-32768&&u<=32767?f=Int16Array:f=Int32Array;const p=e.length,g=zc+Mo*p,v=new Uint32Array(g);let x=0;v[x++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*f.BYTES_PER_ELEMENT,v[x++]=0,v[x++]=a,v[x++]=o,v[x++]=t?0:1,v[x++]=Math.max(0,Math.floor(i??0)),v[x++]=p,v[x++]=f.BYTES_PER_ELEMENT;for(const T of e)v[x++]=T.length-2,v[x++]=T[0],v[x++]=T[1];const E=new CompressionStream("deflate-raw"),w=E.writable.getWriter();await w.ready,w.write(v);const S=f.prototype.constructor;for(const T of e){const N=new S(T.length-2);for(let D=2,M=T.length;D<M;D++)N[D-2]=T[D]-T[D-2];w.write(N)}w.close();const _=await new Response(E.readable).arrayBuffer();return new Uint8Array(_).toBase64()}static async decompressSignature(e){try{const t=Uint8Array.fromBase64(e),{readable:i,writable:a}=new DecompressionStream("deflate-raw"),o=a.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const T of i)c||=new Uint8Array(new Uint32Array(T.buffer,0,4)[0]),c.set(T,u),u+=T.length;const h=new Uint32Array(c.buffer,0,c.length>>2),f=h[1];if(f!==0)throw new Error(`Invalid version: ${f}`);const p=h[2],g=h[3],v=h[4]===0,x=h[5],E=h[6],w=h[7],S=[],_=(zc+Mo*E)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(w){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(c.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(c.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(c.buffer,_);break}u=0;for(let T=0;T<E;T++){const N=h[Mo*T+zc],D=new Float32Array(N+2);S.push(D);for(let M=0;M<Mo-1;M++)D[M]=h[Mo*T+zc+M+1];for(let M=0;M<N;M++)D[M+2]=D[M]+C[u++]}return{areContours:v,thickness:x,outlines:S,width:p,height:g}}catch(t){return ve(`decompressSignature: ${t}`),null}}}class Xp extends lw{constructor(){super(),super.updateProperties({fill:ce._defaultLineColor,"stroke-width":0})}clone(){const e=new Xp;return e.updateAll(this),e}}class Kp extends Ou{constructor(e){super(e),super.updateProperties({stroke:ce._defaultLineColor,"stroke-width":1})}clone(){const e=new Kp(this._viewParameters);return e.updateAll(this),e}}class ci extends Be{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=we.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){ce.initialize(e,t),this._defaultDrawingOptions=new Xp,this._defaultDrawnSignatureOptions=new Kp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return be(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:h,heightInPage:f}=this.#i,{rawDims:{pageWidth:p,pageHeight:g},rotation:v}=this.parent.viewport,x=ta.processDrawnLines({lines:a,pageWidth:p,pageHeight:g,rotation:v,innerMargin:ci._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(x,f,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:i,width:a,height:o}=this.#i,c=Math.max(a,o),u=ta.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:i,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,i,a){const{x:o,y:c}=this,{outline:u}=this.#i=e;this.#e=u instanceof sp,this.description=i;let h;this.#e?h=ci.getDefaultDrawingOptions():(h=ci._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,f]=this.pageDimensions;let p=t/f;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:a}=this.parent.viewport;return ta.process(e,t,i,a,ci._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:i,pageHeight:a},rotation:o}=this.parent.viewport;return ta.extractContoursFromText(e,t,i,a,o,ci._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:i},rotation:a}=this.parent.viewport;return ta.processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:a,innerMargin:ci._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=ci.getDefaultDrawingOptions():(this._drawingOptions=ci._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:a});return this.addComment(o),e?(o.paths={lines:t,points:i},o.uuid=this.#n,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,i,a,o,c){return c.areContours?sp.deserialize(e,t,i,a,o,c):pl.deserialize(e,t,i,a,o,c)}static async deserialize(e,t,i){const a=await super.deserialize(e,t,i);return a.#e=e.areContours,a.description=e.accessibilityData?.alt||"",a.#n=e.uuid,a}}class _k extends ce{#e=null;#t=null;#i=null;#n=null;#a=null;#r="";#s=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=we.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#a=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){ce.initialize(e,t)}static isHandlingMimeForPasting(e){return uu.includes(e)}static paste(e,t){t.pasteEditor({mode:we.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#d(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#r=e.file.name),this.#m()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#s){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await i.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#d(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(a=>this.#d(a)).finally(()=>this.#f());return}if(this.#a){const i=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(a=>this.#d(a)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=uu.join(",");const t=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#d(a)}i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#s?.remove(),this.#s=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#s===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#a||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:i,bitmap:a}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,a&&(this.#e=a),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:i}=this.#e;const[a,o]=this.pageDimensions,c=.75;if(this.width)t=this.width*a,i=this.height*o;else if(t>c*a||i>c*o){const h=Math.min(c*a/t,c*o/i);t*=h,i*=h}this._uiManager.enableWaiting(!1);const u=this.#s=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/a,this.height=i/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#r&&this.div.setAttribute("aria-description",this.#r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,i=!1){e||(e=224);const{width:a,height:o}=this.#e,c=new Wn;let u=this.#e,h=a,f=o,p=null;if(t){if(a>t||o>t){const M=Math.min(t/a,t/o);h=Math.floor(a*M),f=Math.floor(o*M)}p=document.createElement("canvas");const v=p.width=Math.ceil(h*c.sx),x=p.height=Math.ceil(f*c.sy);this.#l||(u=this.#u(v,x));const E=p.getContext("2d");E.filter=this._uiManager.hcmFilter;let w="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":ZN.isDarkMode&&(w="#8f8f9d",S="#42414d");const _=15,C=_*c.sx,T=_*c.sy,N=new OffscreenCanvas(C*2,T*2),D=N.getContext("2d");D.fillStyle=w,D.fillRect(0,0,C*2,T*2),D.fillStyle=S,D.fillRect(0,0,C,T),D.fillRect(C,T,C,T),E.fillStyle=E.createPattern(N,"repeat"),E.fillRect(0,0,v,x),E.drawImage(u,0,0,u.width,u.height,0,0,v,x)}let g=null;if(i){let v,x;if(c.symmetric&&u.width<e&&u.height<e)v=u.width,x=u.height;else if(u=this.#e,a>e||o>e){const S=Math.min(e/a,e/o);v=Math.floor(a*S),x=Math.floor(o*S),this.#l||(u=this.#u(v,x))}const w=new OffscreenCanvas(v,x).getContext("2d",{willReadFrequently:!0});w.drawImage(u,0,0,u.width,u.height,0,0,v,x),g={width:v,height:x,data:w.getImageData(0,0,v,x).data}}return{canvas:p,width:h,height:f,imageData:g}}#u(e,t){const{width:i,height:a}=this.#e;let o=i,c=a,u=this.#e;for(;o>2*e||c>2*t;){const h=o,f=c;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const p=new OffscreenCanvas(o,c);p.getContext("2d").drawImage(u,0,0,h,f,0,0,o,c),u=p.transferToImageBitmap()}return u}#p(){const[e,t]=this.parentDimensions,{width:i,height:a}=this,o=new Wn,c=Math.ceil(i*e*o.sx),u=Math.ceil(a*t*o.sy),h=this.#s;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const f=this.#l?this.#e:this.#u(c,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(f,0,0,f.width,f.height,0,0,c,u)}#y(e){if(e){if(this.#l){const a=this._uiManager.imageManager.getSvgUrl(this.#t);if(a)return a}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,i]=this.pageDimensions,a=Math.round(this.width*t*ca.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*ca.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,i){let a=null,o=!1;if(e instanceof rw){const{data:{rect:w,rotation:S,id:_,structParent:C,popupRef:T,richText:N,contentsObj:D,creationDate:M,modificationDate:P},container:X,parent:{page:{pageNumber:H}},canvas:$}=e;let Y,Z;$?(delete e.canvas,{id:Y,bitmap:Z}=i.imageManager.getFromCanvas(X.id,$),$.remove()):(o=!0,e._hasNoCanvas=!0);const se=(await t._structTree.getAriaAttributes(`${rr}${_}`))?.get("aria-label")||"";a=e={annotationType:we.STAMP,bitmapId:Y,bitmap:Z,pageIndex:H-1,rect:w.slice(0),rotation:S,annotationElementId:_,id:_,deleted:!1,accessibilityData:{decorative:!1,altText:se},isSvg:!1,structParent:C,popupRef:T,richText:N,comment:D?.str||null,creationDate:M,modificationDate:P}}const c=await super.deserialize(e,t,i),{rect:u,bitmap:h,bitmapUrl:f,bitmapId:p,isSvg:g,accessibilityData:v}=e;o?(i.addMissingCanvas(e.id,c),c.#o=!0):p&&i.imageManager.isValidId(p)?(c.#t=p,h&&(c.#e=h)):c.#n=f,c.#l=g;const[x,E]=c.pageDimensions;return c.width=(u[2]-u[0])/x,c.height=(u[3]-u[1])/E,v&&(c.altTextData=v),c._initialData=a,e.comment&&c.setCommentData(e),c.#h=!!a,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#y(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#v(i);return u.isSame?null:(u.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(t===null)return i;t.stamps||=new Map;const c=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:i}),i.bitmap=this.#y(!1);else if(this.#l){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#y(!1))}return i}#v(e){const{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,a=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class di{#e;#t=!1;#i=null;#n=null;#a=null;#r=new Map;#s=!1;#o=!1;#c=!1;#l=null;#h=null;#d=null;#f=null;#g=null;#m=-1;#u;static _initialized=!1;static#p=new Map([Nt,Wp,_k,pt,ci].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:a,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:f,l10n:p}){const g=[...di.#p.values()];if(!di._initialized){di._initialized=!0;for(const v of g)v.initialize(p,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=t,this.div=i,this.#e=o,this.#i=c,this.viewport=f,this.#d=h,this.drawLayer=u,this._structTree=a,this.#u.addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return this.#r.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===we.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case we.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case we.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case we.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===we.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const i of di.#p.values())t.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#y(){return this.#r.size!==0?this.#r.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const i of this.#y)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const t=this.#i;if(t)for(const i of t.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const a=await this.deserialize(i);a&&(this.addOrRebuild(a),a.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#d&&!this.#g){this.#g=new AbortController;const a=this.#u.combinedSignal(this.#g);this.#d.div.addEventListener("pointerdown",o=>{const{clientX:u,clientY:h,timeStamp:f}=o,p=this.#m;if(f-p>500){this.#m=f;return}this.#m=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const v=document.elementsFromPoint(u,h);if(g.toggle("getElements",!1),!this.div.contains(v[0]))return;let x;const E=new RegExp(`^${Ko}[0-9]+$`);for(const S of v)if(E.test(S.id)){x=S.id;break}if(!x)return;const w=this.#r.get(x);w?.annotationElementId===null&&(o.stopPropagation(),o.preventDefault(),w.dblclick(o))},{signal:a,capture:!0})}const e=this.#i,t=[];if(e){const a=new Map,o=new Map;for(const u of this.#y){if(u.disableEditing(),!u.annotationElementId){t.push(u);continue}if(u.serialize()!==null){a.set(u.annotationElementId,u);continue}else o.set(u.annotationElementId,u);this.getEditableAnnotation(u.annotationElementId)?.show(),u.remove()}const c=e.getEditableAnnotations();for(const u of c){const{id:h}=u.data;if(this.#u.isDeletedAnnotationElement(h)){u.updateEdited({deleted:!0});continue}let f=o.get(h);if(f){f.resetAnnotationElement(u),f.show(!1),u.show();continue}f=a.get(h),f&&(this.#u.addChangedExistingAnnotation(f),f.renderAnnotationElement(u)&&f.show(!1)),u.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const a of di.#p.values())i.remove(`${a._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(t),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#v.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#v(e){this.#u.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:i}=wt.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),pt.startHighlighting(this,this.#u.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#r.set(e.id,e);const{annotationElementId:t}=e;t&&this.#u.isDeletedAnnotationElement(t)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#r.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e),ce.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#a&&(e._focusEventsAllowed=!1,this.#a=setTimeout(()=>{this.#a=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getEditorByUID(e){for(const t of this.#r.values())if(t.uid===e)return t;return null}getNextId(){return this.#u.getId()}get#b(){return di.#p.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#_(e){const t=this.#b;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#b?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:i,offsetY:a}=this.#S(),o=this.getNextId(),c=this.#_({parent:this,id:o,x:i,y:a,uiManager:this.#u,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await di.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,t,i={}){const a=this.getNextId(),o=this.#_({parent:this,id:a,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:t,...i});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#S(){const{x:e,y:t,width:i,height:a}=this.boundingClientRect,o=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+i),h=Math.min(window.innerHeight,t+a),f=(o+u)/2-e,p=(c+h)/2-t,[g,v]=this.viewport.rotation%180===0?[f,p]:[p,f];return{offsetX:g,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#S(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#s||(this.#s=!1,this.#b?.isDrawer&&this.#b.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#u.getMode();if(i===we.STAMP||i===we.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===we.HIGHLIGHT&&this.enableTextSelection(),this.#s){this.#s=!1;return}const{isMac:t}=wt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#s=!0,this.#b?.isDrawer){this.startDrawingSession(e);return}const i=this.#u.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#b.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#b.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#b.endDrawing(e)):null}findNewParent(e,t,i){const a=this.#u.findParent(t,i);return a===null||a===this?!1:(a.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#b.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#a&&(clearTimeout(this.#a),this.#a=null);for(const e of this.#r.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#r.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#r.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Ms(this.div,e);for(const t of this.#u.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Ms(this.div,{rotation:i}),t!==i)for(const a of this.#r.values())a.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#u.viewParameters.realScale}}class Dt{#e=null;#t=new Map;#i=new Map;static#n=0;setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return be(this,"_svgFactory",new el)}static#a(e,[t,i,a,o]){const{style:c}=e;c.top=`${100*i}%`,c.left=`${100*t}%`,c.width=`${100*a}%`,c.height=`${100*o}%`}#r(){const e=Dt._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#s(e,t){const i=Dt._svgFactory.createElement("clipPath");e.append(i);const a=`clip_${t}`;i.setAttribute("id",a),i.setAttribute("clipPathUnits","objectBoundingBox");const o=Dt._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),a}#o(e,t){for(const[i,a]of Object.entries(t))a===null?e.removeAttribute(i):e.setAttribute(i,a)}draw(e,t=!1,i=!1){const a=Dt.#n++,o=this.#r(),c=Dt._svgFactory.createElement("defs");o.append(c);const u=Dt._svgFactory.createElement("path");c.append(u);const h=`path_${a}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(a,u);const f=i?this.#s(c,h):null,p=Dt._svgFactory.createElement("use");return o.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(o,e),this.#t.set(a,o),{id:a,clipPathId:`url(#${f})`}}drawOutline(e,t){const i=Dt.#n++,a=this.#r(),o=Dt._svgFactory.createElement("defs");a.append(o);const c=Dt._svgFactory.createElement("path");o.append(c);const u=`path_${i}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const g=Dt._svgFactory.createElement("mask");o.append(g),h=`mask_${i}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const v=Dt._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const x=Dt._svgFactory.createElement("use");g.append(x),x.setAttribute("href",`#${u}`),x.setAttribute("stroke","none"),x.setAttribute("fill","black"),x.setAttribute("fill-rule","nonzero"),x.classList.add("mask")}const f=Dt._svgFactory.createElement("use");a.append(f),f.setAttribute("href",`#${u}`),h&&f.setAttribute("mask",`url(#${h})`);const p=f.cloneNode();return a.append(p),f.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(a,e),this.#t.set(i,a),i}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:i,bbox:a,rootClass:o,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(i&&this.#o(u,i),a&&Dt.#a(u,a),o){const{classList:h}=u;for(const[f,p]of Object.entries(o))h.toggle(f,p)}if(c){const f=u.firstElementChild.firstElementChild;this.#o(f,c)}}}updateParent(e,t){if(t===this)return;const i=this.#t.get(e);i&&(t.#e.append(i),this.#t.delete(e),t.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:np};globalThis.pdfjsLib={AbortException:Yi,AnnotationEditorLayer:di,AnnotationEditorParamsType:ke,AnnotationEditorType:we,AnnotationEditorUIManager:Wi,AnnotationLayer:Lu,AnnotationMode:Bi,AnnotationType:ft,applyOpacity:Nx,build:tw,ColorPicker:vn,createValidAbsoluteUrl:Lp,CSSConstants:Rx,DOMSVGFactory:el,DrawLayer:Dt,FeatureTest:wt,fetchData:Cr,findContrastColor:Dx,getDocument:Qx,getFilenameFromUrl:_x,getPdfFilenameFromUrl:Tx,getRGB:Rr,getUuid:Ip,getXfaPageViewport:Cx,GlobalWorkerOptions:oa,ImageKind:Ho,InvalidPDFException:lu,isDataScheme:dl,isPdfFile:Cu,isValidExplicitDest:Ix,MathClamp:kt,noContextMenu:An,normalizeUnicode:Ex,OPS:vr,OutputScale:Wn,PagesMapper:Pe,PasswordResponses:Sx,PDFDataRangeTransport:$p,PDFDateString:cu,PDFWorker:xr,PermissionFlag:Ax,PixelsPerInch:ca,RenderingCancelledException:Tu,renderRichText:jp,ResponseException:Qo,setLayerDimensions:Ms,shadow:be,SignatureExtractor:ta,stopEvent:rt,SupportedImageMimeTypes:uu,TextLayer:ln,TouchManager:fl,updateUrlHash:Op,Util:ne,VerbosityLevel:cl,version:ew,XfaLayer:Pp};const Tk=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Yi,AnnotationEditorLayer:di,AnnotationEditorParamsType:ke,AnnotationEditorType:we,AnnotationEditorUIManager:Wi,AnnotationLayer:Lu,AnnotationMode:Bi,AnnotationType:ft,CSSConstants:Rx,ColorPicker:vn,DOMSVGFactory:el,DrawLayer:Dt,FeatureTest:wt,GlobalWorkerOptions:oa,ImageKind:Ho,InvalidPDFException:lu,MathClamp:kt,OPS:vr,OutputScale:Wn,PDFDataRangeTransport:$p,PDFDateString:cu,PDFWorker:xr,PagesMapper:Pe,PasswordResponses:Sx,PermissionFlag:Ax,PixelsPerInch:ca,RenderingCancelledException:Tu,ResponseException:Qo,SignatureExtractor:ta,SupportedImageMimeTypes:uu,TextLayer:ln,TouchManager:fl,Util:ne,VerbosityLevel:cl,XfaLayer:Pp,applyOpacity:Nx,build:tw,createValidAbsoluteUrl:Lp,fetchData:Cr,findContrastColor:Dx,getDocument:Qx,getFilenameFromUrl:_x,getPdfFilenameFromUrl:Tx,getRGB:Rr,getUuid:Ip,getXfaPageViewport:Cx,isDataScheme:dl,isPdfFile:Cu,isValidExplicitDest:Ix,noContextMenu:An,normalizeUnicode:Ex,renderRichText:jp,setLayerDimensions:Ms,shadow:be,stopEvent:rt,updateUrlHash:Op,version:ew},Symbol.toStringTag,{value:"Module"}));oa.workerPort=new Worker(new URL("/assets/pdf.worker.min-BTQ2U8jU.js",import.meta.url),{type:"module"});const T1=async r=>{try{let e="";for(let t=1;t<=r.numPages;t++){const o=(await(await r.getPage(t)).getTextContent()).items.map(c=>c.str).join(" ");e+=o+"\f"}return e}catch(e){return console.error("Error extracting text from PDF:",e),"PDF text content"}},C1=async r=>{let e;if(typeof r=="string")e=new TextEncoder().encode(r);else if(r instanceof ArrayBuffer)e=new Uint8Array(r);else if(r instanceof Uint8Array)e=r;else throw new Error("computeSHA256: unsupported input type");const t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(a=>a.toString(16).padStart(2,"0")).join("")};function hu({pageCount:r,extractedText:e,pdfSizeBytes:t}){const i=String(e||""),o=i.split("\f").filter(c=>c!==void 0).slice(0,r).map(c=>String(c||"").trim().length);return{pageCount:r,charsPerPage:o,totalChars:i.replace(/\f/g,"").length,pdfSizeBytes:t||0}}const cw=()=>{const[r,e]=k.useState(!1),[t,i]=k.useState(null),[a,o]=k.useState(null),[c,u]=k.useState(1),[h,f]=k.useState(1.5),[p,g]=k.useState(""),[v,x]=k.useState(null),[E,w]=k.useState(null),[S,_]=k.useState(!1),[C,T]=k.useState(""),[N,D]=k.useState(null);return k.useEffect(()=>{(async()=>{if(window.pdfjsLib){e(!0);return}try{const $=await Mp(()=>Promise.resolve().then(()=>Tk),[]);window.pdfjsLib=$,e(!0)}catch($){console.error("Failed to load PDF.js:",$),D($)}})()},[]),{pdfLibLoaded:r,pdfDoc:t,numPages:a,pageNumber:c,pageScale:h,pdfTextContent:p,docStats:v,docHash:E,isLoading:S,loadingMessage:C,loadError:N,loadPdfFromBlob:async H=>{if(!(!window.pdfjsLib||!H))try{_(!0),D(null);const $=H.name||"document";T(`Loading ${$}...`);const Y=await H.arrayBuffer(),Z=await C1(Y);w(Z);const re=await window.pdfjsLib.getDocument({data:Y,onProgress:q=>{if(q.total>0){const ee=Math.round(q.loaded/q.total*100);T(`Loading ${$}: ${ee}%`)}}}).promise;i(re),o(re.numPages),T(`Extracting text from ${$}...`);const me=await T1(re);g(me);const j=hu({pageCount:re.numPages,extractedText:me,pdfSizeBytes:Y.byteLength});return x(j),u(1),T(""),{docHash:Z,stats:j,text:me}}catch($){throw console.error("Error loading PDF from blob:",$),D($),T(""),$}finally{_(!1)}},loadTestPdf:async H=>{if(window.pdfjsLib)try{_(!0),D(null),T(`Loading ${H}...`);const $=`/test-docs/${H}`,Y=await fetch($);if(!Y.ok)throw new Error(`Failed to fetch PDF: ${Y.statusText}`);const Z=await Y.arrayBuffer(),se=await C1(Z);w(se);const me=await window.pdfjsLib.getDocument({data:Z,onProgress:ee=>{if(ee.total>0){const ge=Math.round(ee.loaded/ee.total*100);T(`Loading ${H}: ${ge}%`)}}}).promise;i(me),o(me.numPages),T(`Extracting text from ${H}...`);const j=await T1(me);g(j);const q=hu({pageCount:me.numPages,extractedText:j,pdfSizeBytes:Z.byteLength});return x(q),u(1),T(""),{docHash:se,stats:q,text:j,fileInfo:{name:H,size:Z.byteLength,type:"application/pdf"}}}catch($){throw console.error("Error loading test PDF:",$),D($),T(""),$}finally{_(!1)}},navigation:{goToPreviousPage:()=>u(H=>Math.max(H-1,1)),goToNextPage:()=>u(H=>Math.min(H+1,a||1)),zoomIn:()=>f(H=>Math.min(H+.2,3)),zoomOut:()=>f(H=>Math.max(H-.2,.5)),setPageNumber:u,setPageScale:f}}};async function Ck({functions:r,docHash:e,text:t}){if(!r)throw new Error("Firebase functions not available");const i=mi(r,"analyzeByType");if(typeof i!="function")throw new Error("analyzeByType callable not available");return(await i({docHash:e,text:t}))?.data}async function Rk({functions:r,docHash:e,stats:t}){if(!r)throw new Error("Firebase functions not available");const i=mi(r,"preflightCheck");if(typeof i!="function")throw new Error("preflightCheck callable not available");return(await i({docHash:e,stats:t}))?.data}async function Nk({functions:r,payload:e}){if(!r)throw new Error("Firebase functions not available");const t=mi(r,"analyzeText");if(typeof t!="function")throw new Error("analyzeText callable not available");return await t(e)}const Dk=({functions:r,authState:e,isMockMode:t})=>{const[i,a]=k.useState({}),[o,c]=k.useState(null),[u,h]=k.useState(!1),f=()=>t&&e.status==="authenticated"?!0:r&&e.status==="authenticated",p=async({pdfTextContent:S,numPages:_,selectedDocument:C,docHash:T})=>{if(!S||!_)return{ok:!0,classification:"OK"};if(t)return{ok:!0,classification:"OK"};if(!r)return console.error("Firebase functions not available. Returning default response."),{ok:!0,classification:"OK"};try{const N=hu({pageCount:_,extractedText:S,pdfSizeBytes:C?.size||0});return await Rk({functions:r,docHash:T,stats:N})}catch(N){return console.error("Preflight check error:",N),{ok:!0,classification:"OK"}}};return{analysisResults:i,gate:o,setGate:c,isLoading:u,handleAnalyzeDocument:async({selectedDocument:S,pdfTextContent:_,docHash:C,numPages:T,updateAnnotations:N})=>{if(!(!S||!_||!C)){if(!f()){console.warn("Document analysis unavailable: Firebase services not accessible.");return}a(D=>({...D,[S.id]:{...D[S.id]||{},_meta:{status:"loading",message:"Running analysis"}}})),h(!0);try{const D=await p({pdfTextContent:_,numPages:T,selectedDocument:S,docHash:C});if(!D.ok)throw console.error("Preflight check failed:",D),new Error(D.message||"Preflight check failed");if(D.classification==="PRO_REQUIRED"){const Y=D.reasons?.map(Z=>Z.message).join(" ")||"This document requires Pro features (OCR / deeper processing).";a(Z=>({...Z,[S.id]:{...Z[S.id]||{},_meta:{status:"error",message:Y}}})),c({title:"Pro required",message:Y,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}const M=hu({pageCount:T,extractedText:_,pdfSizeBytes:S?.size||0}),P=_.split("\f"),{charsPerPage:X,totalChars:H}=M;let $;if(t?$={data:await(await fetch("/analyzeText",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:C,stats:{pageCount:T,charsPerPage:X,totalChars:H,languageHint:"en"},text:{format:"paged",value:_},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}})})).json()}:$=await Nk({functions:r,payload:{docHash:C,stats:{pageCount:T,charsPerPage:X,totalChars:H,languageHint:"en"},text:{format:"paged",value:_,pageTextIndex:P.map((Y,Z)=>({page:Z+1,start:0,end:Y.length}))},options:{tasks:["explain","caveats","inconsistencies"],targetLanguage:null}}}),$.data.ok){c(null);const Y={_meta:{status:"success"},summary:$.data.result.plainExplanation,keyPoints:[],risks:$.data.result.risks.map(Z=>({id:Z.id,clause:Z.title,riskLevel:Z.severity,description:Z.whyItMatters,explanation:Z.whatToCheck.join("; ")})),recommendations:$.data.result.risks.flatMap(Z=>Z.whatToCheck||[])};a(Z=>({...Z,[S.id]:Y})),N&&N(Y)}else{const Y=$.data.code;if(Y==="SCAN_DETECTED_PRO_REQUIRED"){const Z=$.data.message||"This PDF appears to be scanned. OCR is available on Pro.";a(se=>({...se,[S.id]:{...se[S.id]||{},_meta:{status:"error",message:Z}}})),c({title:"Scanned PDF (OCR requires Pro)",message:Z,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}if(Y==="ANON_TOKEN_LIMIT"){const Z=$.data.message||"Anonymous token limit reached. Create a free account to continue.";a(se=>({...se,[S.id]:{...se[S.id]||{},_meta:{status:"error",message:Z}}})),c({title:"Limit reached",message:Z,primaryLabel:"Create free account",primaryTo:"/sign-in",secondaryLabel:"Cancel",secondaryTo:null});return}if(Y==="FREE_TOKEN_LIMIT"){const Z=$.data.message||"Daily token limit reached. Upgrade to Pro to continue.";a(se=>({...se,[S.id]:{...se[S.id]||{},_meta:{status:"error",message:Z}}})),c({title:"Daily limit reached",message:Z,primaryLabel:"Upgrade to Pro",primaryTo:"/pricing",secondaryLabel:"Cancel",secondaryTo:null});return}throw console.error("Analysis failed:",$.data),new Error($.data.message||"Analysis failed")}}catch(D){console.error("Error analyzing document:",D),a(M=>({...M,[S.id]:{...M[S.id]||{},_meta:{status:"error",message:D?.message||"Analysis failed."}}})),c({title:"Analysis failed",message:D?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null});return}finally{h(!1)}}},handleAnalyzeByType:async({selectedDocument:S,pdfTextContent:_,docHash:C})=>{if(!(!S||!_||!C)){if(!f()){console.warn("Type-specific analysis unavailable: Firebase services not accessible.");return}a(T=>({...T,[S.id]:{...T[S.id]||{},_meta:{status:"loading",message:"Running type-specific analysis"}}})),h(!0);try{if(t){c({title:"Type-specific analysis (beta)",message:"Not available in mock mode yet.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null}),a(D=>({...D,[S.id]:{...D[S.id]||{},_meta:{status:"error",message:"Not available in mock mode yet."}}}));return}const T=await Ck({functions:r,docHash:C,text:_})||{},N={ok:!!T.ok,effectiveTypeId:T.effectiveTypeId||null,validationSlug:T.validationSlug||null,validationTitle:T.validationSpec?.title||null,message:T.message||null,result:T.result||null,usage:T.usage||null,requiredTier:T.requiredTier||null,code:T.code||null};a(D=>({...D,[S.id]:{...D[S.id]||{},_meta:{status:"success"},typeSpecific:N}})),c({title:"Type-specific analysis (beta)",message:`effectiveTypeId: ${N.effectiveTypeId||"null"}
validationSlug: ${N.validationSlug||"null"}

`+(N.validationTitle?`Spec: ${N.validationTitle}

`:"")+(N.message||""),primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}catch(T){console.error("analyzeByType error:",T),a(N=>({...N,[S.id]:{...N[S.id]||{},_meta:{status:"error",message:T?.message||"Request failed."}}})),c({title:"Type-specific analysis failed",message:T?.message||"Request failed.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}finally{h(!1)}}},handleExplainSelection:async({selectedDocument:S,docHash:_,pdfTextContent:C})=>{if(!S||!_)return;if(!f()){console.warn("Explain selection unavailable: Firebase services not accessible.");return}const T="Limitation of liability clause";try{let N;if(t?N={data:await(await fetch("/explainSelection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,selection:T,documentContext:C})})).json()}:N=await mi(r,"explainSelection")({docHash:_,selection:T,documentContext:C}),N.data.success)alert(`Explanation: ${N.data.explanation.plainExplanation}`);else throw console.error("Explanation failed:",N.data),new Error(N.data.error||"Explanation failed")}catch(N){throw console.error("Error explaining selection:",N),N}},handleHighlightRisks:async({selectedDocument:S,docHash:_,pdfTextContent:C,setRiskBadges:T})=>{if(!(!S||!_)){if(!f()){console.warn("Risk highlighting unavailable: Firebase services not accessible.");return}h(!0);try{let N;if(t?N={data:await(await fetch("/highlightRisks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,documentText:C,documentType:"contract"})})).json()}:N=await mi(r,"highlightRisks")({docHash:_,documentText:C,documentType:"contract"}),N.data.success){alert(`Found ${N.data.risks.summary.totalRisks} risks in the document.`);const D=N.data.risks.items?.map((M,P)=>({id:P,pageNum:1,x:150+P*40,y:150+P*35,level:M.riskLevel,description:M.description,explanation:M.explanation}))||[];T(D)}else throw console.error("Risk highlighting failed:",N.data),new Error(N.data.error||"Risk highlighting failed")}catch(N){throw console.error("Error highlighting risks:",N),N}finally{h(!1)}}},handleTranslateToPlainEnglish:async({selectedDocument:S,docHash:_,pdfTextContent:C})=>{if(!(!S||!_)){if(!f()){console.warn("Translation unavailable: Firebase services not accessible.");return}try{const T=C.substring(0,500);let N;if(t?N={data:await(await fetch("/translateToPlainEnglish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({docHash:_,legalText:T})})).json()}:N=await mi(r,"translateToPlainEnglish")({docHash:_,legalText:T}),N.data.success)alert(`Original: ${N.data.translation.originalText}

Plain English: ${N.data.translation.plainEnglishTranslation}`);else throw console.error("Translation failed:",N.data),new Error(N.data.error||"Translation failed")}catch(T){throw console.error("Error translating to plain English:",T),T}}}}};async function kk({functions:r,docHash:e,typeId:t}){if(!r)throw new Error("Firebase functions not available");const i=mi(r,"saveDocTypeOverride");return typeof i!="function"?null:(await i({docHash:e,typeId:t}))?.data}async function Mk({functions:r,docHash:e}){if(!r)throw new Error("Firebase functions not available");const t=mi(r,"getDocumentTypeState");return typeof t!="function"?null:(await t({docHash:e}))?.data}async function Lk({functions:r,docHash:e,stats:t,text:i}){if(!r)throw new Error("Firebase functions not available");const a=mi(r,"detectDocumentType");return typeof a!="function"?null:(await a({docHash:e,stats:t,text:i}))?.data}const Ok=({functions:r,isMockMode:e})=>{const[t,i]=k.useState("legal_contract_generic"),[a,o]=k.useState(null),[c,u]=k.useState(null),[h,f]=k.useState(null);return{detectedDocTypeId:t,detectedMeta:a,overrideDocTypeId:c,pendingOverride:h,setOverrideDocTypeId:u,setPendingOverride:f,loadServerTypeState:async E=>{if(!(!r||e))try{const w=await Mk({functions:r,docHash:E})||{};w?.overrideTypeId&&u(w.overrideTypeId),w?.detected?.typeId&&i(w.detected.typeId),w?.detected&&o({intakeCategory:w.detected.intakeCategory||null,confidence:typeof w.detected.confidence=="number"?w.detected.confidence:null,model:w.detected.model||null,updatedAt:w.detected.updatedAt||null})}catch(w){console.warn("Failed to load server document type state",w)}},runServerDetection:async({docHashValue:E,stats:w,text:S})=>{if(!(!r||e))try{const _=await Lk({functions:r,docHash:E,stats:w,text:S})||{};_?.typeId&&i(_.typeId),o({intakeCategory:_.intakeCategory||null,confidence:typeof _.confidence=="number"?_.confidence:null,model:_.model||"heuristic-v1",updatedAt:null})}catch(_){console.warn("Failed to detect document type",_)}},persistOverride:async(E,w)=>{try{localStorage.setItem(`decodocs:doctype:${E}`,String(w))}catch{}if(!(!r||e))try{await kk({functions:r,docHash:E,typeId:w})}catch(S){console.warn("Failed to persist doc type override",S)}},loadLocalOverride:E=>{try{const w=localStorage.getItem(`decodocs:doctype:${E}`);w&&u(w)}catch{}},setDetectedDocTypeId:i}},Nf=()=>{const{authState:r,app:e}=yi(),t=typeof window<"u"&&window.MOCK_AUTH,{documentId:i,fileName:a}=cp(),o=zt(),c=Xi(),u=k.useRef(null),h=e?px(e):null,{pdfLibLoaded:f,pdfDoc:p,numPages:g,pageNumber:v,pageScale:x,pdfTextContent:E,docHash:w,isLoading:S,loadingMessage:_,loadPdfFromBlob:C,loadTestPdf:T,navigation:N}=cw(),{analysisResults:D,gate:M,setGate:P,isLoading:X,handleAnalyzeDocument:H,handleAnalyzeByType:$,handleExplainSelection:Y,handleHighlightRisks:Z,handleTranslateToPlainEnglish:se}=Dk({functions:h,authState:r,isMockMode:t}),{detectedDocTypeId:re,overrideDocTypeId:me,pendingOverride:j,setOverrideDocTypeId:q,setPendingOverride:ee,loadServerTypeState:ge,runServerDetection:_e,persistOverride:O,loadLocalOverride:V}=Ok({functions:h,isMockMode:t}),[J,te]=k.useState(null),[ue,ye]=k.useState([]),[de,lt]=k.useState([]),[He,Kn]=k.useState([]),[Qn,Bn]=k.useState(!1),[fa,Zn]=k.useState(!1),[pa,Nr]=k.useState(!0),[Ht,Vt]=k.useState("select"),[Dr,kr]=k.useState([]),[Mr,ma]=k.useState([]),[Iu,Bt]=k.useState(!1),[Os,ml]=k.useState(null),Lr=S||X,{types:ga}=wx(),gl=Ae=>ga.find(fe=>fe.id===Ae)||null,yl=gl(me||re),ju=gl(re),Is=yl?.validationSlug||null;jN(Is);const Gt=Ae=>{N.setPageNumber(Ae)},Jn=Ae=>{N.setPageNumber(Ae);const fe=document.getElementById(`pdf-page-${Ae}`);fe&&fe.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{a&&f&&(async()=>{try{const fe=await T(a);fe&&(te({id:a,name:a,type:"application/pdf",size:fe.fileInfo?.size,file:null}),V(fe.docHash),await ge(fe.docHash),_e({docHashValue:fe.docHash,stats:fe.stats,text:fe.text}))}catch(fe){P({title:"Could not load PDF",message:fe?.message||"Failed to load test PDF.",primaryLabel:"OK",primaryTo:null,secondaryLabel:null,secondaryTo:null})}})()},[a,f]),k.useEffect(()=>{if(o.state?.document&&!a&&f){const Ae=o.state.document;te(Ae),(async()=>{try{const Le=await C(Ae.file);Le&&(V(Le.docHash),await ge(Le.docHash),_e({docHashValue:Le.docHash,stats:Le.stats,text:Le.text}))}catch{}})()}},[o,a,f]);const Ut=Ae=>{const Le=Array.from(Ae.target.files).filter(_t=>_t.type==="application/pdf");if(Le.length>0){const _t=Le[0],Kt={id:Date.now()+Math.random(),name:_t.name,size:_t.size,type:_t.type,file:_t};te(Kt),c("/view",{state:{document:Kt}})}},Bu=()=>{J&&c(`/edit/${J.id}`,{state:{document:J}})},Uu=Ae=>{const fe=[];Ae.risks&&Ae.risks.length>0&&Ae.risks.forEach((Le,_t)=>{fe.push({id:_t,pageNum:1,x:100+_t*50,y:100+_t*40,level:Le.riskLevel,description:Le.description,explanation:Le.explanation})}),Kn(fe)},Fu=Ae=>{if(Ht==="select")return;const fe=Ae.target.closest("[data-page-num]");if(!fe)return;const Le=parseInt(fe.getAttribute("data-page-num"),10),_t=fe.getBoundingClientRect(),Kt=Ae.clientX-_t.left,Ps=Ae.clientY-_t.top;Ht==="signature"&&Os?(kr(En=>[...En,{id:Date.now(),pageNum:Le,x:Kt,y:Ps,width:Os.width||200,height:Os.height||60,...Os}]),Vt("select")):Ht==="text"?(ma(En=>[...En,{id:Date.now(),pageNum:Le,x:Kt,y:Ps,text:"Text",type:"text"}]),Vt("select")):Ht==="date"?(ma(En=>[...En,{id:Date.now(),pageNum:Le,x:Kt,y:Ps,text:new Date().toLocaleDateString(),type:"date"}]),Vt("select")):Ht==="image"?(ma(En=>[...En,{id:Date.now(),pageNum:Le,x:Kt,y:Ps,text:" Image",type:"image"}]),Vt("select")):Ht==="checkmark"&&(ma(En=>[...En,{id:Date.now(),pageNum:Le,x:Kt,y:Ps,text:"",type:"checkmark"}]),Vt("select"))},ya=Ae=>y.jsxs(y.Fragment,{children:[Dr.filter(fe=>fe.pageNum===Ae).map(fe=>y.jsx("div",{className:"absolute border-2 border-blue-500/40 bg-blue-50/20 flex items-center justify-center cursor-move rounded",style:{left:fe.x,top:fe.y,width:fe.width,height:fe.height,zIndex:50},onClick:Le=>Le.stopPropagation(),children:fe.mode==="type"?y.jsx("span",{className:"text-slate-900 select-none",style:{fontFamily:fe.fontFamily,fontSize:"1.5rem",lineHeight:1},children:fe.text}):fe.dataUrl?y.jsx("img",{src:fe.dataUrl,alt:"Signature",className:"max-w-full max-h-full object-contain",draggable:!1}):y.jsx("span",{className:"text-blue-700 font-semibold italic text-lg",children:"Signature"})},fe.id)),Mr.filter(fe=>fe.pageNum===Ae).map(fe=>y.jsx("div",{className:`absolute px-2 py-1 text-sm shadow-sm cursor-move rounded ${fe.type==="checkmark"?"text-green-700 text-2xl font-bold":fe.type==="date"?"bg-amber-50 border border-amber-300 text-amber-800":fe.type==="image"?"bg-purple-50 border border-purple-300 text-purple-700":"bg-yellow-100 border border-yellow-300 text-slate-800"}`,style:{left:fe.x,top:fe.y,zIndex:50},onClick:Le=>Le.stopPropagation(),children:fe.text},fe.id))]});return y.jsxs(Hn,{variant:"app",showFooter:!1,children:[y.jsx(LN,{open:Iu,onClose:()=>Bt(!1),onAdopt:Ae=>{ml(Ae),Vt("signature")}}),M&&y.jsx("div",{id:"viewer-gate-dialog",role:"dialog","aria-modal":"true",className:"fixed inset-0 bg-slate-900/45 flex items-center justify-center z-[2000] p-4",onClick:()=>P(null),children:y.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 max-w-[520px] w-full p-5 shadow-2xl",onClick:Ae=>Ae.stopPropagation(),children:[y.jsx("div",{className:"font-black text-base text-slate-900",children:M.title}),y.jsx("div",{className:"mt-2.5 text-slate-600 leading-relaxed whitespace-pre-wrap",children:M.message}),y.jsxs("div",{className:"mt-3.5 flex gap-2.5 flex-wrap justify-end",children:[M.secondaryLabel&&y.jsx("button",{type:"button",onClick:()=>{P(null),M.secondaryTo&&c(M.secondaryTo)},className:"px-3 py-2.5 rounded-xl border border-slate-200 bg-white font-black cursor-pointer hover:bg-slate-50 transition-colors",children:M.secondaryLabel}),M.primaryLabel&&y.jsx("button",{type:"button",onClick:async()=>{if(M._kind==="confirm-override"&&j&&w){const Ae=j.id;q(Ae),await O(w,Ae),ee(null),P(null);return}P(null),M.primaryTo&&c(M.primaryTo)},className:"px-3 py-2.5 rounded-xl border border-slate-900 bg-slate-900 text-white font-black cursor-pointer hover:bg-slate-800 transition-colors",children:M.primaryLabel})]})]})}),y.jsx(PN,{open:Qn,detectedType:ju,onClose:()=>Bn(!1),onPick:Ae=>{Bn(!1),ee(Ae),P({title:"Confirm document type",message:`Set document type to ${Ae.label}? This will change the actions/checks we show for this document.`,primaryLabel:"Confirm",primaryTo:null,secondaryLabel:"Cancel",secondaryTo:null,_kind:"confirm-override"})}}),y.jsxs("div",{id:"viewer-root",className:"flex flex-col flex-1 h-full overflow-hidden bg-slate-100",children:[p&&y.jsxs("div",{id:"viewer-toolbar",className:"flex flex-col bg-white border-b border-slate-200 z-20 relative",children:[y.jsxs("div",{id:"viewer-filename-bar",className:"h-11 px-4 flex items-center justify-between border-b border-slate-100/80",children:[y.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[y.jsx("span",{id:"viewer-filename",className:"font-semibold text-slate-800 text-sm truncate max-w-[320px]",children:J?.name||"Untitled Document"}),y.jsxs("div",{id:"viewer-quick-actions",className:"flex items-center gap-0.5 ml-1",children:[y.jsx("button",{id:"btn-share-link",onClick:()=>alert("Create a shareable link (coming soon)"),className:"p-1.5 rounded-md text-slate-400 hover:text-blue-600 hover:bg-blue-50 transition-colors",title:"Create a shareable link",children:y.jsx(ox,{className:"w-4 h-4"})}),y.jsx("button",{id:"btn-save-decodocs",onClick:()=>alert("Save to DecoDocs (coming soon)"),className:"p-1.5 rounded-md text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition-colors",title:"Save to DecoDocs",children:y.jsx(ix,{className:"w-4 h-4"})})]})]}),y.jsxs("div",{id:"viewer-primary-actions",className:"flex items-center gap-2",children:[y.jsxs("button",{id:"btn-download",onClick:()=>{if(!p)return;const Ae=document.createElement("a");Ae.href=URL.createObjectURL(J?.file||new Blob),Ae.download=J?.name||"document.pdf",Ae.click()},className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-semibold rounded-lg transition-colors shadow-sm",children:[y.jsx(ax,{className:"w-3.5 h-3.5"}),"Download"]}),y.jsxs("button",{id:"btn-finish",onClick:()=>{te(null),c("/view")},className:"flex items-center gap-1.5 px-3 py-1.5 bg-slate-800 hover:bg-slate-900 text-white text-xs font-semibold rounded-lg transition-colors shadow-sm",children:["Finish",y.jsx(_R,{className:"w-3.5 h-3.5"})]})]})]}),y.jsxs("div",{id:"viewer-tools-bar",className:"h-10 px-4 flex items-center bg-slate-50/60",children:[y.jsx("div",{id:"viewer-doctype-bar",className:"flex items-center",children:y.jsxs("button",{id:"viewer-doctype-chip",onClick:()=>Bn(!0),className:"flex items-center gap-1.5 px-2.5 py-1 rounded-md text-xs font-medium text-slate-500 hover:text-slate-700 hover:bg-slate-100 transition-colors",title:"Click to change document type",children:[y.jsx("svg",{className:"w-3.5 h-3.5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),y.jsx("span",{children:yl?.label||"Contract / agreement (general)"}),y.jsx("svg",{className:"w-3 h-3 text-slate-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})})]})}),y.jsx("div",{className:"w-px h-5 bg-slate-200 mx-3"}),y.jsxs("div",{id:"viewer-signing-tools",className:"flex items-center gap-0.5",children:[y.jsx(ir,{active:Ht==="select",icon:sx,label:"Select",onClick:()=>Vt("select")}),y.jsx("div",{className:"w-px h-4 bg-slate-200 mx-1"}),y.jsx(ir,{active:Ht==="signature",icon:Np,label:"Sign",onClick:()=>{Os?Vt("signature"):Bt(!0)}}),y.jsx(ir,{active:Ht==="text",icon:ex,label:"Text",onClick:()=>Vt("text")}),y.jsx(ir,{active:Ht==="date",icon:TR,label:"Date",onClick:()=>Vt("date")}),y.jsx(ir,{active:Ht==="image",icon:wu,label:"Image",onClick:()=>Vt("image")}),y.jsx(ir,{active:Ht==="checkmark",icon:CR,label:"Check",onClick:()=>Vt("checkmark")})]})]})]}),y.jsxs("div",{id:"viewer-content",className:"flex flex-1 overflow-hidden relative",children:[y.jsxs("div",{id:"viewer-canvas-area",className:"flex-1 flex flex-col items-center justify-start overflow-hidden relative",children:[p?y.jsxs("div",{className:"w-full flex-1 relative flex overflow-hidden",children:[y.jsx(xx,{pdfDoc:p,numPages:g,currentPage:v,onPageClick:Jn}),y.jsx("div",{id:"viewer-scroll-area",className:`flex-1 overflow-auto bg-slate-100/50 relative ${Ht!=="select"?"cursor-crosshair":""}`,onClick:Fu,children:y.jsx(bx,{pdfDoc:p,numPages:g,pageScale:x,isLoading:Lr,loadingMessage:_,onPageVisible:Gt,highlights:ue,clauseMarkers:de,riskBadges:He,renderPageOverlay:ya})})]}):y.jsx("div",{className:"flex-1 flex items-center justify-center w-full",children:y.jsx(vx,{onFileSelect:Ut})}),p&&y.jsx(yx,{onFileSelect:Ut,onEdit:Bu,pageNumber:v,numPages:g,pageScale:x,onPreviousPage:N.goToPreviousPage,onNextPage:N.goToNextPage,onZoomIn:N.zoomIn,onZoomOut:N.zoomOut,fileInputRef:u})]}),y.jsx(TN,{isOpen:pa,onToggle:()=>Nr(!pa),onAnalyzeDocument:()=>H({selectedDocument:J,pdfTextContent:E,docHash:w,numPages:g,updateAnnotations:Uu}),onAnalyzeByType:()=>$({selectedDocument:J,pdfTextContent:E,docHash:w}),onExplainSelection:()=>Y({selectedDocument:J,docHash:w,pdfTextContent:E}),onHighlightRisks:()=>Z({selectedDocument:J,docHash:w,pdfTextContent:E,setRiskBadges:Kn}),onTranslateToPlainEnglish:()=>se({selectedDocument:J,docHash:w,pdfTextContent:E}),isLoading:Lr,isAuthenticated:r.status==="authenticated",hasDocument:!!J,selectedDocument:J,analysisResults:D})]})]})]})},ir=({active:r,icon:e,label:t,onClick:i})=>y.jsxs("button",{onClick:i,title:t,className:`flex items-center gap-1 px-2 py-1.5 rounded-md text-xs font-medium transition-all ${r?"bg-slate-200/80 text-slate-800":"text-slate-400 hover:bg-slate-100 hover:text-slate-700"}`,children:[y.jsx(e,{className:"w-4 h-4"}),y.jsx("span",{className:"hidden sm:inline",children:t})]}),R1=()=>{const{documentId:r}=cp(),e=zt(),t=Xi(),i=k.useRef(null),{pdfLibLoaded:a,pdfDoc:o,numPages:c,pageNumber:u,pageScale:h,isLoading:f,loadingMessage:p,loadPdfFromBlob:g,loadTestPdf:v,navigation:x}=cw(),[E,w]=k.useState(null),[S,_]=k.useState("select"),[C,T]=k.useState([]),[N,D]=k.useState([]),[M]=k.useState({width:150,height:50});k.useEffect(()=>{if(e.state?.document&&!o&&a){const $=e.state.document;w($),$.file&&g($.file).catch(console.error)}else if(e.pathname.includes("test-docs")&&a&&!o){e.pathname.split("/");const $=e.pathname.split("/").pop();$.endsWith(".pdf")&&v($).then(Y=>{Y&&w({name:$,id:"test-doc",type:"application/pdf"})})}else if(r&&a&&!o&&!e.pathname.includes("test-docs")){const $={id:r,name:`Document_${r}.pdf`,type:"application/pdf",file:null};w($)}},[e,r,a,o,g,v]);const P=$=>{if(S==="select")return;const Y=$.target.closest("[data-page-num]");if(!Y)return;const Z=parseInt(Y.getAttribute("data-page-num"),10),se=Y.getBoundingClientRect(),re=$.clientX-se.left,me=$.clientY-se.top;if(S==="signature"){const j={id:Date.now(),pageNum:Z,x:re,y:me,width:M.width,height:M.height,text:"John Doe",type:"signature"};T([...C,j]),_("select")}else if(S==="text"){const j={id:Date.now(),pageNum:Z,x:re,y:me,text:"Type something...",type:"text"};D([...N,j]),_("select")}else if(S==="date"){const j={id:Date.now(),pageNum:Z,x:re,y:me,text:new Date().toLocaleDateString(),type:"date"};D([...N,j]),_("select")}},X=$=>{const Z=Array.from($.target.files).filter(se=>se.type==="application/pdf");if(Z.length>0){const se=Z[0],re={id:Date.now(),name:se.name,size:se.size,type:se.type,file:se};w(re),g(se)}},H=$=>y.jsxs(y.Fragment,{children:[C.filter(Y=>Y.pageNum===$).map(Y=>y.jsx("div",{className:"absolute border-2 border-blue-500 bg-blue-50/20 flex items-center justify-center cursor-move",style:{left:Y.x,top:Y.y,width:Y.width,height:Y.height,zIndex:50},onClick:Z=>Z.stopPropagation(),children:y.jsx("span",{className:"text-blue-700 font-script text-xl font-bold",children:Y.text})},Y.id)),N.filter(Y=>Y.pageNum===$).map(Y=>y.jsx("div",{className:"absolute bg-yellow-100 border border-yellow-300 px-2 py-1 text-sm shadow-sm cursor-move",style:{left:Y.x,top:Y.y,zIndex:50},onClick:Z=>Z.stopPropagation(),children:Y.text},Y.id))]});return y.jsx(Hn,{variant:"app",showFooter:!1,children:y.jsxs("div",{className:"flex flex-col h-full bg-slate-100",children:[y.jsxs("div",{className:"flex flex-col bg-white border-b border-slate-200 z-20 relative font-sans",children:[y.jsxs("div",{className:"h-14 px-4 flex items-center justify-between border-b border-slate-100",children:[y.jsx("div",{className:"flex items-center gap-3 min-w-0",children:y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[y.jsx("span",{className:"font-bold text-slate-800 text-base truncate max-w-[250px]",children:E?.name||"Untitled Document"}),y.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[y.jsxs("button",{onClick:()=>alert("Upgrade to Pro to share links!"),className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border border-blue-100",children:[y.jsx(ox,{className:"w-3.5 h-3.5"})," Share"]}),y.jsxs("button",{onClick:()=>alert("Upgrade to Pro to upload to cloud!"),className:"flex items-center gap-1.5 px-2.5 py-1 text-xs font-semibold text-slate-600 bg-slate-50 hover:bg-slate-100 rounded-lg transition-colors border border-slate-200",children:[y.jsx(Dp,{className:"w-3.5 h-3.5"})," Upload"]})]})]})}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>t("/view"),className:"px-3 py-1.5 text-slate-600 text-sm font-semibold hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),y.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-lg transition-all shadow-sm",children:["Finish & Download ",y.jsx(ax,{className:"w-4 h-4"})]})]})]}),y.jsxs("div",{className:"h-12 flex items-center justify-center gap-1 bg-slate-50/50",children:[y.jsx(Lo,{active:S==="select",icon:sx,label:"Select",onClick:()=>_("select"),tooltip:"Select & Move"}),y.jsx("div",{className:"w-px h-5 bg-slate-300 mx-1"}),y.jsx(Lo,{active:S==="text",icon:ex,label:"Text",onClick:()=>_("text"),tooltip:"Add Text"}),y.jsx(Lo,{active:S==="signature",icon:Np,label:"Sign",onClick:()=>_("signature"),tooltip:"Create Signature"}),y.jsx(Lo,{active:S==="image",icon:wu,label:"Image",onClick:()=>_("image"),tooltip:"Insert Image"}),y.jsx(Lo,{active:S==="shape",icon:OR,label:"Shapes",onClick:()=>_("shape"),tooltip:"Add Shapes"})]})]}),y.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[o&&y.jsx(xx,{pdfDoc:o,numPages:c,currentPage:u,onPageClick:$=>{x.setPageNumber($);const Y=document.getElementById(`pdf-page-${$}`);Y&&Y.scrollIntoView({behavior:"smooth"})}}),y.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center relative bg-slate-100/50",children:o?y.jsx("div",{className:"w-full flex justify-center",style:{minHeight:"100%"},onClick:P,children:y.jsx(bx,{pdfDoc:o,numPages:c,pageScale:h,isLoading:f,loadingMessage:p,onPageVisible:$=>x.setPageNumber($),renderPageOverlay:H})}):y.jsx("div",{className:"flex-1 flex items-center justify-center w-full",children:y.jsx(vx,{onFileSelect:X})})}),y.jsx(yx,{onFileSelect:X,onEdit:()=>{},pageNumber:u,numPages:c,pageScale:h,onPreviousPage:x.goToPreviousPage,onNextPage:x.goToNextPage,onZoomIn:x.zoomIn,onZoomOut:x.zoomOut,fileInputRef:i})]})]})})},Lo=({active:r,icon:e,label:t,onClick:i,tooltip:a})=>y.jsx("button",{onClick:i,title:a||t,className:`flex items-center justify-center p-2.5 rounded-lg transition-all relative ${r?"bg-slate-200/80 text-slate-800":"bg-transparent text-slate-500 hover:bg-slate-200/50 hover:text-slate-800"}`,children:y.jsx(e,{className:"w-5 h-5"})}),Ik=()=>y.jsx("section",{className:"about-page",children:y.jsx("div",{className:"about-main",children:y.jsxs("div",{className:"about-container",children:[y.jsxs("section",{className:"about-header",children:[y.jsx("h1",{children:"About DecoDocs"}),y.jsx("p",{children:"DecoDocs is a document intelligence product designed to help people understand what they are about to sign. Before any signature, DecoDocs explains documents in plain language, highlights caveats and unfair conditions, flags logical inconsistencies, and provides translations when needed. Our focus is clarity before commitment."})]}),y.jsxs("section",{className:"product-philosophy",children:[y.jsx("h2",{children:"What We Believe"}),y.jsxs("ul",{className:"philosophy-list",children:[y.jsx("li",{children:"Documents should be understood before being signed"}),y.jsx("li",{children:"AI should reduce information asymmetry, not introduce new ones"}),y.jsx("li",{children:"Free users deserve real value, not crippled features"}),y.jsx("li",{children:"We charge only for real costs: deeper analysis and storage"}),y.jsx("li",{children:"Documents belong to users, not platforms"})]})]}),y.jsxs("section",{className:"scope-definition",children:[y.jsx("h2",{children:"What DecoDocs Is  and Is Not"}),y.jsxs("div",{className:"scope-columns",children:[y.jsxs("div",{className:"scope-column",children:[y.jsx("h3",{children:"Is"}),y.jsxs("ul",{children:[y.jsx("li",{children:"Pre-signature document analysis"}),y.jsx("li",{children:"Plain-language explanation"}),y.jsx("li",{children:"Caveat and unfair-condition detection"}),y.jsx("li",{children:"Logical inconsistency checks"}),y.jsx("li",{children:"Ephemeral processing by default"})]})]}),y.jsxs("div",{className:"scope-column",children:[y.jsx("h3",{children:"Is Not"}),y.jsxs("ul",{children:[y.jsx("li",{children:"A document editor"}),y.jsx("li",{children:"A document management system"}),y.jsx("li",{children:'A "sign now, think later" tool'}),y.jsx("li",{children:"A storage-first SaaS"}),y.jsx("li",{children:"A replacement for legal advice"})]})]})]})]}),y.jsxs("section",{className:"decodocs-clarification",children:[y.jsx("h2",{children:"How It Relates To SnapSign"}),y.jsx("p",{children:"Snap Sign Pty Ltd builds DecoDocs. SnapSign is the company brand and broader product family; DecoDocs is the document understanding and analysis product in that family."})]}),y.jsxs("section",{className:"team-company",children:[y.jsx("h2",{children:"Company"}),y.jsx("p",{children:"SnapSign is built by a small, focused team with backgrounds in software engineering, automation, and privacy-first systems. We prioritize correctness, transparency, and long-term maintainability."}),y.jsxs("div",{className:"legal-block",children:[y.jsx("p",{children:"Snap Sign Pty Ltd"}),y.jsx("p",{children:"ABN 72 679 570 757"}),y.jsx("p",{children:"Australia"})]})]}),y.jsxs("section",{className:"collaboration-contact",children:[y.jsx("h2",{children:"Collaboration"}),y.jsx("p",{children:"We welcome serious collaboration and partnership enquiries. For certain discussions, a Non-Disclosure Agreement (NDA) may be required before sharing internal details."}),y.jsx("div",{className:"contact-info",children:y.jsxs("p",{children:["Email: ",y.jsx("a",{href:"mailto:partnerships@snapsign.com.au",children:"partnerships@snapsign.com.au"})]})})]})]})})}),Pk=()=>y.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Privacy Policy"}),y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),y.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[y.jsx("p",{children:'DecoDocs ("we", "us") is built by Snap Sign Pty Ltd. This policy explains what data is processed when you use DecoDocs, what is stored, and what choices you have.'}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"What we process"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"PDF file metadata (filename, size) and content needed to render and analyze the document."}),y.jsx("li",{children:"Extracted text used to generate summaries, explanations, and risk highlights."}),y.jsx("li",{children:"Basic usage events (e.g. button clicks) to understand product performance."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Storage (Free vs Pro)"}),y.jsxs("p",{children:[y.jsx("strong",{children:"Free:"})," we aim to avoid storing your files. Documents are opened for viewing and analysis without persistent storage."]}),y.jsxs("p",{children:[y.jsx("strong",{children:"Pro (optional):"})," secure storage may be available for users who explicitly choose to save documents for later access."]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Retention"}),y.jsx("p",{children:"We retain only what is necessary to operate the service. Where storage is enabled (e.g. Pro), retention and deletion controls will be provided."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Your controls"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"You can choose whether to use free (no-storage) workflows or paid storage features when available."}),y.jsx("li",{children:"You can contact us to request deletion or export of stored data where applicable."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{children:["Questions or requests: ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),jk=()=>y.jsxs("section",{className:"mx-auto w-full max-w-4xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Terms of Service"}),y.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Last updated: 1 February 2026"}),y.jsxs("div",{className:"mt-10 space-y-6 text-slate-700 leading-relaxed",children:[y.jsx("p",{children:"These terms govern use of DecoDocs provided by Snap Sign Pty Ltd. By using the service, you agree to these terms."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Not legal advice"}),y.jsx("p",{children:"DecoDocs provides informational analysis and is not legal advice. For legal decisions, consult a qualified professional."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Acceptable use"}),y.jsxs("ul",{className:"list-disc pl-6 space-y-2",children:[y.jsx("li",{children:"Do not upload content you do not have the right to process."}),y.jsx("li",{children:"Do not attempt to abuse, probe, or disrupt the service."}),y.jsx("li",{children:"Do not use the service for illegal activity."})]}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Availability and changes"}),y.jsx("p",{children:"The service may change over time. We may add, modify, or remove features. We may suspend access to protect the service or comply with law."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Limitation of liability"}),y.jsx("p",{children:"To the maximum extent permitted by law, Snap Sign Pty Ltd is not liable for indirect or consequential losses arising from use of the service."}),y.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{children:["Questions: ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"})]})]})]}),Bk=()=>{const r="mailto:contact@snapsign.com?subject="+encodeURIComponent("DecoDocs signing waitlist");return y.jsxs("section",{className:"mx-auto w-full max-w-3xl px-6 py-16",children:[y.jsx("h1",{className:"text-3xl font-semibold text-slate-900",children:"Contact"}),y.jsxs("p",{className:"mt-4 text-slate-700",children:["For support, partnerships, or product feedback, email us at"," ",y.jsx("a",{className:"underline",href:"mailto:team@snapsign.com.au",children:"team@snapsign.com.au"}),"."]}),y.jsxs("div",{className:"mt-10 rounded-2xl border border-slate-200 bg-white p-6",children:[y.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:"Signing waitlist"}),y.jsx("p",{className:"mt-2 text-slate-700",children:"Want the signing workflow? Join the waitlist and tell us your use case."}),y.jsx("a",{className:"mt-4 inline-flex rounded-full bg-slate-900 px-5 py-2 text-sm font-semibold text-white",href:r,children:"Join the waitlist"})]})]})},Oo=r=>{try{return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",maximumFractionDigits:0}).format(r)}catch{return`$${r} AUD`}},Df=({items:r})=>y.jsx("ul",{style:{margin:0,paddingLeft:18,color:"#0f172a",lineHeight:1.7},children:r.map(e=>y.jsx("li",{style:{marginBottom:6},children:e},e))});function Uk(){const e="test".toLowerCase()!=="live",t=Xi(),i=zt(),{authState:a}=yi(),o=k.useMemo(()=>new URLSearchParams(i.search),[i.search]),c=o.get("billing")==="annual"?"annual":"monthly",[u,h]=k.useState(c),[f,p]=k.useState(null),[g,v]=k.useState(null),x=k.useRef(!1),E=k.useMemo(()=>{const N=u==="annual"?{label:Oo(60),suffix:"/year"}:{label:Oo(5),suffix:"/month"},D=u==="annual"?{label:Oo(600),suffix:"/year"}:{label:Oo(50),suffix:"/month"};return{pro:N,business:D}},[u]),w=async(N,D=u)=>{if(v(null),p(N),!a?.user||a?.user?.isAnonymous){const M=new URLSearchParams({intent:"upgrade",plan:N,billing:D});e&&M.set("sandbox","1"),t(`/sign-in?${M.toString()}`),p(null);return}try{const{getFunctions:M,httpsCallable:P}=await Mp(async()=>{const{getFunctions:Z,httpsCallable:se}=await Promise.resolve().then(()=>gx);return{getFunctions:Z,httpsCallable:se}},void 0),X=M(),Y=(await P(X,"stripeCreateCheckoutSession")({billing:D,plan:N}))?.data?.url;if(!Y)throw new Error("No checkout URL returned");window.location.assign(Y)}catch(M){v(`Could not start Stripe checkout: ${M?.message||M}`),p(null)}};k.useEffect(()=>{const N=o.get("stripe");if(N==="cancel"){v("Stripe checkout was canceled. Your account was not charged.");return}if(N==="success"){v("Stripe checkout completed. We are finalizing your subscription status from webhook events.");return}if(e||o.get("sandbox")==="1"){v("Sandbox mode is active. Use Stripe test cards only.");return}v(null)},[e,o]),k.useEffect(()=>{if(x.current||o.get("autoCheckout")!=="1")return;const N=o.get("plan")==="business"?"business":"pro",D=o.get("billing")==="annual"?"annual":"monthly";u!==D&&h(D),x.current=!0,w(N,D)},[a?.user,u,o]);const S=()=>t("/sign-in"),_={padding:"2.5rem 1.5rem",maxWidth:1100,margin:"0 auto"},C={border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},T=N=>({padding:"8px 12px",borderRadius:999,border:`1px solid ${N?"#0f172a":"#e2e8f0"}`,background:N?"#0f172a":"#ffffff",color:N?"#ffffff":"#0f172a",fontWeight:700,fontSize:13,cursor:"pointer"});return y.jsxs("div",{style:_,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:12,flexWrap:"wrap",alignItems:"center"},children:[y.jsxs("div",{children:[y.jsx("h1",{style:{margin:0},children:"Pricing"}),y.jsx("p",{style:{marginTop:10,marginBottom:0,color:"#334155",lineHeight:1.6},children:"Compare Free, Pro, and Business plans. Enterprise is available for larger teams."})]}),y.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[y.jsx("button",{type:"button",onClick:()=>h("monthly"),style:T(u==="monthly"),children:"Monthly"}),y.jsx("button",{type:"button",onClick:()=>h("annual"),style:T(u==="annual"),children:"Annual"})]})]}),y.jsx("div",{style:{marginTop:16,padding:14,borderRadius:12,background:"#eff6ff",border:"1px solid #bfdbfe",color:"#1e3a8a",lineHeight:1.65},children:"DecoDocs is publicly available for anonymous trial use. You can open a PDF and test the core experience instantly, then create a free account when you want higher daily limits and cross-device continuity."}),g&&y.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:g}),y.jsxs("div",{style:{marginTop:22,display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14},children:[y.jsxs("div",{style:C,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:800,fontSize:16},children:"Free"}),y.jsxs("div",{style:{fontWeight:800,fontSize:18},children:[Oo(0),y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:"/forever"})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create an account to get a bigger daily budget and manage linked sign-in methods."}),y.jsx("button",{type:"button",onClick:S,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Continue for free"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Df,{items:["AI analysis: 40k tokens/day per uid","Text-only PDFs (no OCR)","No storage with us (browser-only)","Link providers (Google/Email/Apple/Microsoft)"]})})]}),y.jsxs("div",{style:{...C,borderColor:"#0f172a"},children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Pro"}),y.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[E.pro.label,y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:E.pro.suffix})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"OCR for scanned PDFs, unlimited analysis (for now), better model, and 5GB storage."}),y.jsx("button",{type:"button",onClick:()=>w("pro",u),disabled:f!==null,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:f==="pro"?"Opening checkout...":"Upgrade to Pro"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Df,{items:["Unlimited AI (until abuse policy exists)","OCR / vision model for scanned PDFs","5GB storage (Contabo VPS)","Receipts + subscription management in /profile"]})})]}),y.jsxs("div",{style:C,children:[y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[y.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Business"}),y.jsxs("div",{style:{fontWeight:900,fontSize:18},children:[E.business.label,y.jsx("span",{style:{color:"#64748b",fontWeight:600,fontSize:12},children:E.business.suffix})]})]}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Team plan for up to 5 worker accounts with shared billing and team visibility."}),y.jsx("button",{type:"button",onClick:()=>w("business",u),disabled:f!==null,style:{width:"100%",marginTop:8,padding:"10px 14px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:f==="business"?"Opening checkout...":"Start Business"}),y.jsx("div",{style:{marginTop:14},children:y.jsx(Df,{items:["Everything in Pro","Up to 5 worker accounts","Shared billing + seat management","Admin visibility across team docs"]})})]})]}),y.jsxs("div",{style:{marginTop:18,padding:16,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Enterprise"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Need more than ",y.jsx("strong",{children:"5 worker accounts"}),"? Enterprise is for larger teams that need custom security, controls, and contracting. Contact us for seat-based pricing."]}),y.jsx("div",{style:{marginTop:8},children:y.jsx(nt,{to:"/contact",style:{color:"#0f172a",fontWeight:800},children:"Contact sales"})})]}),y.jsxs("div",{style:{marginTop:22,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(nt,{to:"/view",style:{color:"#0f172a",fontWeight:800},children:"Start anonymous trial"}),y.jsx(nt,{to:"/profile",style:{color:"#0f172a",fontWeight:800},children:"Go to profile"}),y.jsx(nt,{to:"/terms",style:{color:"#475569",fontWeight:700},children:"Terms"}),y.jsx(nt,{to:"/privacy",style:{color:"#475569",fontWeight:700},children:"Privacy"})]}),y.jsxs("div",{style:{marginTop:22,padding:16,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Notes"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Well prompt you to upgrade when you hit limits or when a scanned/OCR-required document is detected. Paid checkout requires a non-anonymous account, and account linking is handled via ",y.jsx("code",{children:"/sign-in"}),"."]})]})]})}function uw(r){return Te({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(r)}function dw(r){return Te({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-105.1-305c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"},child:[]}]})(r)}function hw(r){return Te({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 32h214.6v214.6H0V32zm233.4 0H448v214.6H233.4V32zM0 265.4h214.6V480H0V265.4zm233.4 0H448V480H233.4V265.4z"},child:[]}]})(r)}const Fk=()=>{const{search:r}=zt();return k.useMemo(()=>new URLSearchParams(r),[r])},N1=({children:r})=>y.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function zk(){const{authState:r,auth:e,signInWithGoogle:t,signInWithMicrosoft:i,signInWithApple:a,signInWithEmail:o,signUpWithEmail:c,resetPassword:u}=yi(),h=Xi(),f=Fk(),[p,g]=k.useState(""),[v,x]=k.useState(""),[E,w]=k.useState({kind:"idle",message:""}),S=r?.user||null,_=!!S?.isAnonymous,C=f.get("intent"),T=f.get("plan")==="business"?"business":"pro",N=f.get("billing")==="annual"?"annual":"monthly",D=f.get("sandbox")==="1"?"1":null,M=k.useMemo(()=>{if(C!=="upgrade")return"/profile";const Z=new URLSearchParams({autoCheckout:"1",plan:T,billing:N});return D&&Z.set("sandbox",D),`/pricing?${Z.toString()}`},[C,D,N,T]),P=async(Z,se)=>{w({kind:"loading",message:"Opening sign-in"});try{if(!e)throw new Error("Auth is not available");if(e.currentUser)await Xv(e.currentUser,Z);else if(se)await se();else throw new Error("No active session. Refresh and try again.");w({kind:"ok",message:"Signed in. Your accounts are linked."}),h(M)}catch(re){const me=re?.code||"";if(me==="auth/credential-already-in-use"||me==="auth/email-already-in-use"){w({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}w({kind:"error",message:re?.message||"Sign-in failed."})}},X=async()=>{w({kind:"loading",message:"Signing in"});try{if(!p||!v)throw new Error("Email and password are required.");if(e.currentUser&&_){const Z=Ls.credential(p,v);await jv(e.currentUser,Z),w({kind:"ok",message:"Email linked and signed in."})}else await o(p,v),w({kind:"ok",message:"Signed in."});h(M)}catch(Z){w({kind:"error",message:Z?.message||"Email sign-in failed."})}},H=async()=>{w({kind:"loading",message:"Creating account"});try{if(!p||!v)throw new Error("Email and password are required.");if(String(v).length<10)throw new Error("Password must be at least 10 characters.");await c(p,v),w({kind:"ok",message:"Account created and signed in."}),h(M)}catch(Z){w({kind:"error",message:Z?.message||"Email sign-up failed."})}},$=async()=>{w({kind:"loading",message:"Sending reset email"});try{if(!p)throw new Error("Enter your email first.");await u(p),w({kind:"ok",message:"Password reset email sent (if the account exists)."})}catch(Z){w({kind:"error",message:Z?.message||"Password reset failed."})}},Y=C==="upgrade"?"Sign in to upgrade":"Sign in";return k.useEffect(()=>{r.status==="authenticated"&&!_&&h(M,{replace:!0})},[r.status,_,h,M]),r.status==="authenticated"&&!_?y.jsx("div",{children:"Redirecting..."}):y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:Y}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"We support Google, Email, Apple, and Microsoft. Linking is universal  you can attach multiple providers to one account."}),C==="upgrade"&&y.jsxs("p",{style:{marginTop:8,color:"#1e3a8a",lineHeight:1.6},children:["Next step after sign-in: start ",T==="business"?"Business":"Pro"," checkout (",N," billing)."]}),E.kind!=="idle"&&y.jsx("div",{className:"error",style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(E.kind==="error"?"#fecaca":"#bbf7d0"),background:E.kind==="error"?"#fef2f2":"#f0fdf4",color:E.kind==="error"?"#991b1b":"#166534"},children:E.message}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[y.jsxs(N1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),y.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[y.jsxs("button",{type:"button",onClick:()=>P(new Gn,t),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(uw,{size:20}),"Continue with Google"]}),y.jsxs("button",{type:"button",onClick:()=>P(new fi("apple.com"),a),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(dw,{size:20}),"Continue with Apple"]}),y.jsxs("button",{type:"button",onClick:()=>P(new fi("microsoft.com"),i),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(hw,{size:20}),"Continue with Microsoft"]})]})]}),y.jsxs(N1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Sign in with email"}),y.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[y.jsx("input",{value:p,onChange:Z=>g(Z.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:v,onChange:Z=>x(Z.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsxs("div",{style:{display:"grid",gap:10},children:[y.jsx("button",{type:"button",onClick:X,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign In"}),y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:14},children:[y.jsx("button",{type:"button",onClick:H,style:{background:"none",border:"none",color:"#0f172a",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Create account"}),y.jsx("button",{type:"button",onClick:$,style:{background:"none",border:"none",color:"#0f172a",textDecoration:"underline",cursor:"pointer",fontWeight:600},children:"Reset password"})]})]})]})]})]}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(nt,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),y.jsx(nt,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),y.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:S?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(_)})]})]})]})}const Hk=()=>{const{search:r}=zt();return k.useMemo(()=>new URLSearchParams(r),[r])},D1=({children:r})=>y.jsx("div",{style:{border:"1px solid #e2e8f0",borderRadius:14,background:"#fff",padding:18},children:r});function Vk(){const{authState:r,auth:e,signInWithGoogle:t,signInWithMicrosoft:i,signInWithApple:a,signUpWithEmail:o}=yi(),c=Xi(),u=Hk(),[h,f]=k.useState(""),[p,g]=k.useState(""),[v,x]=k.useState(""),[E,w]=k.useState({kind:"idle",message:""}),S=r?.user||null,_=!!S?.isAnonymous,C=u.get("intent"),T=u.get("plan")==="business"?"business":"pro",N=u.get("billing")==="annual"?"annual":"monthly",D=u.get("sandbox")==="1"?"1":null,M=k.useMemo(()=>{if(C!=="upgrade")return"/profile";const H=new URLSearchParams({autoCheckout:"1",plan:T,billing:N});return D&&H.set("sandbox",D),`/pricing?${H.toString()}`},[C,D,N,T]),P=async(H,$)=>{w({kind:"loading",message:"Opening sign-in"});try{if(!e)throw new Error("Auth is not available");if(e.currentUser)await Xv(e.currentUser,H);else if($)await $();else throw new Error("No active session. Refresh and try again.");w({kind:"ok",message:"Signed in. Your accounts are linked."}),c(M)}catch(Y){const Z=Y?.code||"";if(Z==="auth/credential-already-in-use"||Z==="auth/email-already-in-use"){w({kind:"error",message:"That account is already used elsewhere. Please sign out and sign in with that provider, then link the others from your profile."});return}w({kind:"error",message:Y?.message||"Sign-in failed."})}};if(k.useEffect(()=>{r.status==="authenticated"&&!_&&c(M,{replace:!0})},[r.status,_,c,M]),r.status==="authenticated"&&!_)return y.jsx("div",{children:"Redirecting..."});const X=async()=>{w({kind:"loading",message:"Creating account"});try{if(!h||!p||!v)throw new Error("Email and passwords are required.");if(p!==v)throw new Error("Passwords do not match.");if(String(p).length<10)throw new Error("Password must be at least 10 characters.");if(e.currentUser&&_){const H=Ls.credential(h,p);await jv(e.currentUser,H),w({kind:"ok",message:"Account created and linked."})}else await o(h,p),w({kind:"ok",message:"Account created."});c(M)}catch(H){w({kind:"error",message:H?.message||"Account creation failed."})}};return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:"Sign up"}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Create your DecoDocs account to get started."}),C==="upgrade"&&y.jsxs("p",{style:{marginTop:8,color:"#1e3a8a",lineHeight:1.6},children:["Next step after sign-up: start ",T==="business"?"Business":"Pro"," checkout (",N," billing)."]}),y.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(260px, 1fr))",gap:14,marginTop:16},children:[y.jsxs(D1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Continue with a provider"}),y.jsxs("div",{style:{marginTop:12,display:"grid",gap:10},children:[y.jsxs("button",{type:"button",onClick:()=>P(new Gn,t),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(uw,{size:20}),"Continue with Google"]}),y.jsxs("button",{type:"button",onClick:()=>P(new fi("apple.com"),a),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(dw,{size:20}),"Continue with Apple"]}),y.jsxs("button",{type:"button",onClick:()=>P(new fi("microsoft.com"),i),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",color:"#0f172a",fontWeight:800,cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[y.jsx(hw,{size:20}),"Continue with Microsoft"]})]})]}),y.jsxs(D1,{children:[y.jsx("div",{style:{fontWeight:900},children:"Create account"}),y.jsxs("div",{style:{marginTop:10,display:"grid",gap:10},children:[y.jsx("input",{value:h,onChange:H=>f(H.target.value),placeholder:"Email",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:p,onChange:H=>g(H.target.value),placeholder:"Password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("input",{value:v,onChange:H=>x(H.target.value),placeholder:"Confirm password",type:"password",style:{padding:10,borderRadius:12,border:"1px solid #e2e8f0"}}),y.jsx("button",{type:"button",onClick:X,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Create account"})]}),y.jsx("div",{style:{color:"#64748b",fontSize:13,lineHeight:1.5,marginTop:10},children:"Recommended password minimum: 10 chars. If an email already exists and linking fails, sign out then sign in using that email."})]})]}),E.kind!=="idle"&&y.jsx("div",{className:"error",style:{marginTop:14,padding:12,borderRadius:12,border:"1px solid "+(E.kind==="error"?"#fecaca":"#bbf7d0"),background:E.kind==="error"?"#fef2f2":"#f0fdf4",color:E.kind==="error"?"#991b1b":"#166534"},children:E.message}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(nt,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Back to pricing"}),y.jsx(nt,{to:"/",style:{color:"#475569",fontWeight:700},children:"Home"})]}),y.jsxs("div",{style:{marginTop:18,padding:14,borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[y.jsx("div",{style:{fontWeight:900,marginBottom:6},children:"Current session"}),y.jsxs("div",{style:{color:"#475569",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:S?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(_)})]})]})]})}function Gk(){const{authState:r,auth:e}=yi(),t=Xi(),i=zt(),a=k.useMemo(()=>new URLSearchParams(i.search),[i.search]),o=r?.user,[c,u]=k.useState(null);k.useEffect(()=>{const p=a.get("stripe");if(p==="success"){u("Stripe checkout completed. If billing status does not update yet, wait a few seconds for webhook sync and refresh.");return}if(p==="cancel"){u("Stripe checkout was canceled.");return}u(null)},[a]);const h=async()=>{e&&(await Uv(e),window.location.reload())},f=async()=>{u(null);try{const{getFunctions:p,httpsCallable:g}=await Mp(async()=>{const{getFunctions:S,httpsCallable:_}=await Promise.resolve().then(()=>gx);return{getFunctions:S,httpsCallable:_}},void 0),v=p(),w=(await g(v,"stripeCreatePortalSession")({}))?.data?.url;if(!w)throw new Error("No portal URL returned");window.location.assign(w)}catch(p){u(`Could not open Stripe portal: ${p?.message||p}`)}};return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{style:{marginTop:0},children:"Profile"}),y.jsx("p",{style:{marginTop:10,color:"#475569",lineHeight:1.6},children:"Manage linked accounts and subscription. Receipts and subscription management use Stripe Customer Portal."}),c&&y.jsx("div",{style:{marginTop:16,padding:12,borderRadius:12,background:"#fff7ed",border:"1px solid #fed7aa",color:"#9a3412"},children:c}),y.jsxs("div",{style:{marginTop:16,padding:16,borderRadius:14,border:"1px solid #e2e8f0",background:"#fff"},children:[y.jsx("div",{style:{fontWeight:900},children:"Session"}),y.jsxs("div",{style:{marginTop:10,color:"#0f172a",lineHeight:1.7},children:["Status: ",y.jsx("strong",{children:r?.status}),y.jsx("br",{}),"UID: ",y.jsx("code",{children:o?.uid||"n/a"}),y.jsx("br",{}),"Anonymous: ",y.jsx("strong",{children:String(!!o?.isAnonymous)})]}),y.jsxs("div",{style:{marginTop:12,color:"#475569"},children:["Linked providers: ",o?.providerData?.length?y.jsx("ul",{style:{margin:"6px 0 0",paddingLeft:18},children:o.providerData.map(p=>y.jsxs("li",{children:[y.jsx("code",{children:p.providerId}),p.email?`  ${p.email}`:""]},p.providerId))}):y.jsx("span",{children:"none (anonymous)"})]}),y.jsxs("div",{style:{marginTop:14,display:"flex",gap:10,flexWrap:"wrap"},children:[y.jsx("button",{type:"button",onClick:()=>t("/sign-in"),style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#0f172a",color:"#fff",fontWeight:900,cursor:"pointer"},children:"Link accounts"}),y.jsx("button",{type:"button",onClick:f,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #0f172a",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Billing & receipts"}),y.jsx("button",{type:"button",onClick:h,style:{padding:"10px 12px",borderRadius:12,border:"1px solid #e2e8f0",background:"#fff",fontWeight:900,cursor:"pointer"},children:"Sign out"})]})]}),y.jsxs("div",{style:{marginTop:18,display:"flex",gap:12,flexWrap:"wrap"},children:[y.jsx(nt,{to:"/pricing",style:{color:"#0f172a",fontWeight:800},children:"Pricing"}),y.jsx(nt,{to:"/view",style:{color:"#475569",fontWeight:700},children:"Analyze a PDF"})]})]})}const $k=()=>{const{slug:r}=cp(),e=Gc.find(i=>{const a=i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");return i.slug===r||a===r}),t=Gc.filter(i=>i.slug!==e?.slug).slice(0,3);return e?y.jsx($f,{children:y.jsxs("div",{className:"relative overflow-hidden px-6 pb-20 pt-12",children:[y.jsxs("div",{className:"pointer-events-none absolute inset-0",children:[y.jsx("div",{className:"absolute -right-20 -top-24 h-64 w-64 rounded-full bg-amber-200/40 blur-3xl"}),y.jsx("div",{className:"absolute -left-24 top-56 h-72 w-72 rounded-full bg-blue-200/30 blur-3xl"})]}),y.jsxs("div",{className:"relative mx-auto flex w-full max-w-6xl flex-col gap-16",children:[y.jsxs("section",{className:"grid gap-8 rounded-3xl border border-slate-200/80 bg-white/85 p-8 shadow-xl shadow-slate-900/5 backdrop-blur-sm lg:grid-cols-[1.2fr_0.8fr] lg:p-12",children:[y.jsxs("div",{children:[y.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.25em] text-slate-500",children:e.audience}),y.jsx("h1",{className:"mt-4 text-4xl font-bold leading-tight text-slate-900 lg:text-5xl",children:e.heroTitle||e.title}),y.jsx("p",{className:"mt-5 max-w-2xl text-lg leading-relaxed text-slate-600",children:e.heroDescription||e.description}),y.jsxs("div",{className:"mt-8 flex flex-wrap gap-3",children:[y.jsx(na,{size:"md",to:e.cta?.primaryTo||"/view",children:e.cta?.primaryLabel||"Open viewer"}),y.jsx(na,{variant:"outline",size:"md",to:e.cta?.secondaryTo||"/contact",children:e.cta?.secondaryLabel||"Contact us"})]})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-6",children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-800",children:[y.jsx(Rp,{className:"h-5 w-5 text-slate-500"}),"Best document fit"]}),y.jsx("ul",{className:"mt-4 space-y-3 list-none p-0",children:e.documentTypes.map(i=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[y.jsx(Gf,{className:"mt-0.5 h-4 w-4 shrink-0 text-emerald-500"}),y.jsx("span",{children:i})]},i))})]})]}),y.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:e.highlights.map(i=>y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-5",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:i.label}),y.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:i.value})]},i.label))}),y.jsxs("section",{children:[y.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(rx,{className:"h-5 w-5 text-amber-500"}),"Where teams get blocked"]}),y.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.painPoints.map(i=>y.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-5 text-slate-700 shadow-sm",children:i},i))})]}),y.jsxs("section",{children:[y.jsxs("div",{className:"mb-6 flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(Au,{className:"h-5 w-5 text-indigo-500"}),"Recommended workflow"]}),y.jsx("div",{className:"grid gap-4 lg:grid-cols-3",children:e.workflow.map((i,a)=>y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm",children:[y.jsxs("p",{className:"text-xs font-semibold uppercase tracking-[0.2em] text-slate-400",children:["Step ",a+1]}),y.jsx("h3",{className:"mt-3 text-lg font-semibold text-slate-900",children:i.step}),y.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:i.detail})]},i.step))})]}),y.jsxs("section",{className:"grid gap-6 rounded-3xl border border-slate-200 bg-white p-8 lg:grid-cols-[1fr_1fr]",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 text-sm font-bold uppercase tracking-wider text-slate-500",children:[y.jsx(lx,{className:"h-5 w-5 text-emerald-600"}),"What your team delivers"]}),y.jsx("ul",{className:"mt-5 space-y-3 list-none p-0",children:e.deliverables.map(i=>y.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-700",children:[y.jsx(Gf,{className:"mt-0.5 h-4 w-4 shrink-0 text-emerald-500"}),y.jsx("span",{children:i})]},i))})]}),y.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-6",children:[y.jsx("p",{className:"text-sm font-semibold text-slate-900",children:"Need this workflow adapted to your team?"}),y.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:"We can help shape your review flow around your real document mix and approval process."}),y.jsxs("div",{className:"mt-5 flex flex-wrap gap-3",children:[y.jsx(na,{size:"sm",to:"/contact",children:"Talk to us"}),y.jsx(na,{variant:"outline",size:"sm",to:"/pricing",children:"View pricing"})]})]})]}),y.jsxs("section",{children:[y.jsx("p",{className:"text-sm font-bold uppercase tracking-wider text-slate-500",children:"Related use cases"}),y.jsx("div",{className:"mt-5 grid gap-4 md:grid-cols-3",children:t.map(i=>y.jsxs(nt,{to:`/use-cases/${i.slug||i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`,className:"rounded-2xl border border-slate-200 bg-white p-5 no-underline transition hover:border-slate-300 hover:shadow-lg",children:[y.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-400",children:i.audience||"Use case"}),y.jsx("p",{className:"mt-2 text-lg font-semibold text-slate-900",children:i.title}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:i.description})]},i.slug||i.title))})]})]})]})}):y.jsx($f,{children:y.jsx("div",{className:"px-6 py-20",children:y.jsxs("div",{className:"mx-auto max-w-4xl text-center",children:[y.jsx("h1",{className:"text-4xl font-bold text-slate-900 mb-4",children:"Use Case Not Found"}),y.jsx("p",{className:"text-lg text-slate-600",children:"The requested use case could not be found."}),y.jsx("div",{className:"mt-10 grid gap-4 text-left sm:grid-cols-2",children:Gc.map(i=>y.jsxs(nt,{to:`/use-cases/${i.slug||i.title.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}`,className:"rounded-2xl border border-slate-200 bg-white p-5 no-underline transition hover:border-slate-300 hover:shadow-lg",children:[y.jsx("p",{className:"text-sm font-semibold uppercase tracking-wide text-slate-400",children:i.audience||"Use case"}),y.jsx("p",{className:"mt-1 text-lg font-semibold text-slate-900",children:i.title}),y.jsx("p",{className:"mt-2 text-sm text-slate-600",children:i.description})]},i.slug||i.title))})]})})})};class qk extends wn.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t),this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?y.jsxs("div",{style:{padding:"2rem",textAlign:"center",minHeight:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"#f5f5f5"},children:[y.jsx("h1",{children:"Oops! Something went wrong"}),y.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:"We encountered an unexpected error. Please try refreshing the page."}),!1,y.jsx("button",{onClick:()=>window.location.href="/",style:{marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"1rem"},children:"Go to Home"})]}):this.props.children}}const Yk=()=>{const{authState:r}=yi(),[e,t]=wn.useState(!1);return r.status!=="error"||e?null:y.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffc107",borderRadius:"4px",padding:"1rem",maxWidth:"400px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)",zIndex:1e3,fontFamily:"sans-serif"},role:"alert",children:y.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[y.jsxs("div",{children:[y.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"#856404"},children:"Authentication Unavailable"}),y.jsxs("div",{style:{margin:0,color:"#856404",fontSize:"0.9rem",lineHeight:1.4},children:[y.jsx("div",{children:"Some features may be limited, but you can still view documents."}),!1]})]}),y.jsx("button",{onClick:()=>t(!0),style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#856404",padding:0,marginLeft:"1rem",flexShrink:0},"aria-label":"Dismiss notification",children:""})]})})},kf=({children:r})=>{const{authState:e}=yi();return e.status==="loading"?y.jsx("div",{children:"Loading..."}):e.status!=="authenticated"?y.jsx(Lf,{to:"/sign-in",replace:!0}):r},Wk=()=>{const r=[{title:"Signature placement UI",detail:"Place a signature field on a PDF with drag/drop + resize."},{title:"Identity & consent",detail:"Signer authentication + explicit consent."},{title:"Audit trail",detail:"Record who signed, when, and what hash."}];return y.jsxs("div",{style:{padding:"2.5rem 1.5rem",maxWidth:900,margin:"0 auto"},children:[y.jsx("h1",{children:"Sign PDFs"}),y.jsx("p",{children:"Signing is not ready yet. This is a roadmap placeholder."}),y.jsx("ul",{children:r.map(e=>y.jsxs("li",{children:[y.jsx("strong",{children:e.title}),": ",e.detail]},e.title))})]})},Xk=()=>y.jsx(qk,{children:y.jsxs(gR,{children:[y.jsx(Yk,{}),y.jsx(nE,{children:y.jsxs(M2,{children:[y.jsx(St,{path:"/",element:y.jsx(tN,{})}),y.jsx(St,{path:"/pricing",element:y.jsx(Hn,{children:y.jsx(Uk,{})})}),y.jsx(St,{path:"/about",element:y.jsx(Hn,{children:y.jsx(Ik,{})})}),y.jsx(St,{path:"/privacy",element:y.jsx(Hn,{children:y.jsx(Pk,{})})}),y.jsx(St,{path:"/terms",element:y.jsx(Hn,{children:y.jsx(jk,{})})}),y.jsx(St,{path:"/contact",element:y.jsx(Hn,{children:y.jsx(Bk,{})})}),y.jsx(St,{path:"/use-cases/:slug",element:y.jsx($k,{})}),y.jsx(St,{path:"/sign-in",element:y.jsx(Hn,{children:y.jsx(zk,{})})}),y.jsx(St,{path:"/sign-up",element:y.jsx(Hn,{children:y.jsx(Vk,{})})}),y.jsx(St,{path:"/view",element:y.jsx(Nf,{})}),y.jsx(St,{path:"/view/:documentId",element:y.jsx(Nf,{})}),y.jsx(St,{path:"/view/test-docs/:fileName",element:y.jsx(Nf,{})}),y.jsx(St,{path:"/profile",element:y.jsx(kf,{children:y.jsx(Hn,{variant:"app",children:y.jsx(Gk,{})})})}),y.jsx(St,{path:"/edit/:documentId",element:y.jsx(kf,{children:y.jsx(R1,{})})}),y.jsx(St,{path:"/edit/test-docs/:fileName",element:y.jsx(kf,{children:y.jsx(R1,{})})}),y.jsx(St,{path:"/sign",element:y.jsx(Hn,{children:y.jsx(Wk,{})})}),y.jsx(St,{path:"/app",element:y.jsx(Lf,{to:"/view",replace:!0})}),y.jsx(St,{path:"*",element:y.jsx(Lf,{to:"/",replace:!0})})]})})]})});var li={},k1;function Kk(){if(k1)return li;k1=1;var r=li&&li.__createBinding||(Object.create?(function(o,c,u,h){h===void 0&&(h=u);var f=Object.getOwnPropertyDescriptor(c,u);(!f||("get"in f?!c.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(o,h,f)}):(function(o,c,u,h){h===void 0&&(h=u),o[h]=c[u]})),e=li&&li.__setModuleDefault||(Object.create?(function(o,c){Object.defineProperty(o,"default",{enumerable:!0,value:c})}):function(o,c){o.default=c}),t=li&&li.__importStar||(function(){var o=function(c){return o=Object.getOwnPropertyNames||function(u){var h=[];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(h[h.length]=f);return h},o(c)};return function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var h=o(c),f=0;f<h.length;f++)h[f]!=="default"&&r(u,c,h[f]);return e(u,c),u}})();Object.defineProperty(li,"__esModule",{value:!0});var i=t(pu()),a=function(o){var c=o.className,u=o.flagClassName,h=o.textClassName,f=(0,i.useState)(!1),p=f[0],g=f[1];return i.default.createElement("div",{className:c,onMouseEnter:function(){return g(!0)},onMouseLeave:function(){return g(!1)},onFocusCapture:function(){return g(!0)},onBlurCapture:function(){return g(!1)},style:{position:"absolute",left:0,top:0,right:0,background:"#000",display:"flex",justifyContent:"center",padding:"5px",zIndex:1e4,fontFamily:"arial"}},i.default.createElement("a",{href:"https://u24.gov.ua",target:"_blank",rel:"noopener noreferrer",title:"Donate to support freedom.",style:{display:"flex",alignItems:"center",textDecoration:"none"}},i.default.createElement("div",{role:"img","aria-label":"Flag of Ukraine",className:u,style:{height:"25px",marginRight:"10px"}},i.default.createElement("div",{style:{width:"40px",height:"12.5px",background:"#005BBB"}}),i.default.createElement("div",{style:{width:"40px",height:"12.5px",background:"#FFD500"}})),i.default.createElement("div",{className:h,style:{color:"white",fontSize:"12px",lineHeight:"25px"}},"Donate to support freedom.")),i.default.createElement("a",{href:"https://www.npmjs.com/package/react-support-ukraine-banner",target:"_blank",rel:"noopener noreferrer","aria-label":"Get the same banner on npm",title:"Get the same: react-support-ukraine-banner",style:{position:"absolute",right:"10px",top:0,height:"100%",display:"flex",alignItems:"center",fontSize:"12px",lineHeight:"25px",color:p?"#fff":"#000",transition:"color 150ms ease",cursor:"pointer",textDecoration:"none"}},"Get the same"))};return li.default=a,li}var Qk=Kk();const Zk=ap(Qk);IS.createRoot(document.getElementById("root")).render(y.jsxs(wn.StrictMode,{children:[y.jsx(Zk,{}),y.jsx(Xk,{})]}));
